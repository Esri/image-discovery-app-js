//>>built
require({cache:{"esriviewer/ui/footer/FooterTogglerWidget":function(){require({cache:{"url:esriviewer/ui/footer/theme/footerTogglerTheme.css":".footerWidget{position:absolute;bottom:0;width:100%;background:white;z-index:30;height:24px;}.footerTogglerArrow{left:47.5%;position:absolute;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAyCAYAAAAayliMAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjEwMPRyoQAAAkJJREFUaEPtmr9uwkAMxkFdOnSgD4DEyMgjMHbs2LEvWanvwkB3QHmE1B86S9H1/tg+Hy1VkKII4tjfz77kwjmLcRwXpc8wDJuiQeeDx+PxoRiiBtBZX7v7GaA9h20eLBWg62LZFvXn2efz+f1wOKzVfjUAFGBJ2zNtxDDs1MEyJwTxI/n9QAyVXynA5XJ5IecI8hn2I0HsVcESxhPx8D3Q9kV+n8R+pQBwCMEsnven0+lVHCwyjMQDAElZqfxpAALELoaAEFVQMnYRj6BagACxiSHwXQrhJt4KECBWFghX8S0AOJem+ccUBH5PVcNdfCtACSK+GLuI9wDgTKcqwRDdxHsCwFcKogQmveiLdpa7UM5h7pqYQqjv8zVKTwDESg2Xycytm6Rq4r2HEMej2XkbDx33zHMw7wpMkwYIeoZ6kyTSbNMTwCxKc+IMoMlWD9u5Aj2yqvF59xXQwP4127tP/gzw20NqrsC/rwAe5DSrFdqEdBtCeHROLIBttQJr9l0AUuIZxrIAVoJwByiJZ4jckkst26njrgAS8QxhEdsVICWeh0sOzAPCpQIl8SwyB9E6nJoBJOIZQrsMKalQE4BGfPxH32vFwgxgFc8gmdW6jSTrUxsTQKt4FpBZL91pINQAXuJZJNpTieG0l0KoANB4QwMuNOKu/SyPmTXqu10biGgoSiBUAHBIztFmRSvURfzkNou+GzqUaOGK26xqgACx9sh8nGFL89wEICntrWxmgFtlOhenWoHqy0adCWovWwHgG+5ydf2pNh9kAAAAAElFTkSuQmCC);height:25px;width:48px;}.footerTogglerArrow.footerTogglerUp{background-position:0 -26px;}.footerTogglerArrow.footerTogglerDown{background-position:0 0;}.footerExpanderContent{width:100%;cursor:pointer;border-top:1px solid #CCCCCC;border-bottom:1px solid #CCCCCC;height:24px;}.footerExpanded{height:auto;}.footerCollapsed{height:24px;}","url:esriviewer/ui/footer/template/FooterTogglerTemplate.html":"<div class=\"footerWidget\" data-dojo-attach-point=\"footerWidget\" data-bind=\"css:{footerExpanded: expanded() == true, footerCollapsed: expanded() != true}\">\r\n    <div class=\"footerExpanderContent headerFooterBg\" data-dojo-attach-point=\"footerExpanderContent\"  data-dojo-attach-event=\"onclick:toggle\">\r\n        <div class=\"footerTogglerArrow\" data-dojo-attach-point=\"footerTogglerArrow\" data-bind=\"css:{footerTogglerDown: expanded() == true, footerTogglerUp: expanded() != true}\"></div>\r\n    </div>\r\n    <div data-dojo-attach-point=\"footerContent\"></div>\r\n</div>"}});define("esriviewer/ui/footer/FooterTogglerWidget",["dojo/_base/declare","xstyle/css!./theme/footerTogglerTheme.css","dojo/topic","dojo/_base/lang","dojo/text!./template/FooterTogglerTemplate.html","../base/UITemplatedWidget","dojo/dom-construct","./model/FooterTogglerViewModel"],function(_1,_2,_3,_4,_5,_6,_7,_8){return _1([_6],{firstFooterShow:true,templateString:_5,postCreate:function(){this.inherited(arguments);this.viewModel=new _8();ko.applyBindings(this.viewModel,this.domNode);},initListeners:function(){this.inherited(arguments);_3.subscribe(VIEWER_GLOBALS.EVENTS.FOOTER.TOGGLE,_4.hitch(this,this.toggle));_3.subscribe(VIEWER_GLOBALS.EVENTS.FOOTER.COLLAPSE,_4.hitch(this,this.collapse));_3.subscribe(VIEWER_GLOBALS.EVENTS.FOOTER.EXPAND,_4.hitch(this,this.expand));_3.subscribe(VIEWER_GLOBALS.EVENTS.FOOTER.IS_EXPANDED,_4.hitch(this,this.handleIsExpanded));},handleIsExpanded:function(_9){if(_9!=null&&_4.isFunction(_9)){_9(this.viewModel.expanded());}},toggle:function(){if(this.viewModel.expanded()){this.collapse();}else{this.expand();}},collapse:function(){if(this.viewModel.expanded()){this.viewModel.expanded(false);_3.publish(VIEWER_GLOBALS.EVENTS.FOOTER.COLLAPSED);}},expand:function(){if(!this.viewModel.expanded()){this.viewModel.expanded(true);if(this.firstFooterShow){this.onFirstFooterShow();this.firstFooterShow=false;}_3.publish(VIEWER_GLOBALS.EVENTS.FOOTER.EXPANDED);}},setContent:function(_a){_7.place(_a,this.footerContent);},onFirstFooterShow:function(){}});});},"url:dijit/templates/CheckedMenuItem.html":"<tr class=\"dijitReset dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"menuitemcheckbox\" tabIndex=\"-1\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuItemIcon dijitCheckedMenuItemIcon\" data-dojo-attach-point=\"iconNode\"/>\n\t\t<span class=\"dijitCheckedMenuItemIconChar\">&#10003;</span>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode,labelNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">&#160;</td>\n</tr>\n","url:esriviewer/ui/draw/template/DrawWidgetTemplate.html":"<div class=\"drawWindow\">\r\n    <div class=\"defaultTabContainer\">\r\n        <span  data-bind=\"click:showDraw, css: {selectedTab: drawVisible}\">Create</span>\r\n        <span data-bind=\"click:showConfiguration, css: {selectedTab: configurationVisible}\">Configure</span>\r\n        <span  data-bind=\"visible:showGraphicsListTab, click:showGraphicsList, css: {selectedTab: graphicsListVisible}\">Added</span>\r\n        <span data-bind=\"visible:showSavedGraphicsTab, click:showUserPersistedGraphics, css: {selectedTab: userPersistedGraphicsVisible}\">Saved</span>\r\n    </div>\r\n    <div class=\"drawWindowInputIconsContainer\" data-dojo-attach-point=\"drawWindowInputIconsContainer\"\r\n         data-bind=\"visible: drawVisible\">\r\n        <div class=\"threePixelBorderRadius commonIcons32 pointUnselected\"\r\n             data-bind=\"visible: showDrawPointIcon, css: {pointSelected: pointActive}\"\r\n             title=\"Draw Point\" data-dojo-attach-event=\"onclick:handlePointDrawClick\"></div>\r\n        <div class=\"threePixelBorderRadius commonIcons32 lineUnselected\"\r\n             data-bind=\"visible: showDrawLineIcon, css: {lineSelected: lineActive}\"\r\n             title=\"Draw Line\" data-dojo-attach-event=\"onclick:handleLineDrawClick\"></div>\r\n        <div class=\"threePixelBorderRadius commonIcons32 polylineUnselected\"\r\n                data-bind=\"visible: showDrawPolylineIcon, css: {polylineSelected: polylineActive}\"\r\n                title=\"Draw Polyline\" data-dojo-attach-event=\"onclick:handlePolylineDrawClick\"></div>\r\n        <div data-bind=\"visible: showDrawPolygonIcon, css: {polygonSelected: polygonActive}\"\r\n             class=\"threePixelBorderRadius commonIcons32 polygonUnselected\"\r\n             title=\"Draw Polygon\" data-dojo-attach-event=\"onclick:handlePolygonDrawClick\"></div>\r\n        <div data-bind=\"visible: showDrawRectangleIcon,css: {rectangleSelected: rectangleActive}\"\r\n             class=\"threePixelBorderRadius commonIcons32 rectangleUnselected\"\r\n             title=\"Draw Rectangle\" data-dojo-attach-event=\"onclick:handleRectangleDrawClick\"></div>\r\n        <div class=\"threePixelBorderRadius commonIcons32 textUnselected\"\r\n             data-bind=\"visible: showDrawTextIcon,css: {textSelected: textActive}\"\r\n             title=\"Draw Text\" data-dojo-attach-event=\"onclick:handleTextDrawClick\"></div>\r\n    </div>\r\n    <div class=\"drawFreehandContainer\"\r\n         data-bind=\"visible: freehandContainerVisible\">\r\n        <span data-dojo-type=\"dijit/form/CheckBox\" data-dojo-attach-event=\"onChange:handleFreehandToggled\"\r\n              data-dojo-attach-point=\"freeHandDrawCheckbox\"></span>\r\n        <span class=\"drawFreehandCheckboxLabel\" data-dojo-attach-event=\"onclick:toggleFreehand\">Freehand</span>\r\n    </div>\r\n    <div class=\"drawWindowConfigureContainer\" data-bind=\"visible: configurationVisible\"\r\n         data-dojo-attach-point=\"drawWindowConfigureContainer\">\r\n    </div>\r\n    <div class=\"drawWindowGraphicsListContainer\" data-dojo-attach-point=\"drawWindowGraphicsListContainer\"\r\n         data-bind=\"visible: graphicsListVisible\">\r\n    </div>\r\n    <div class=\"drawWindowUserPersistedGraphicsContainer\"\r\n         data-dojo-attach-point=\"drawWindowUserPersistedGraphicsContainer\"\r\n         data-bind=\"visible: userPersistedGraphicsVisible\">\r\n    </div>\r\n</div>","esriviewer/ui/editor/FeatureServiceEditorWindowWidget":function(){define("esriviewer/ui/editor/FeatureServiceEditorWindowWidget",["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/dom-style","../window/WindowWidget"],function(_b,_c,_d,_e,_f){return _b([_f],{defaultPositioning:{x:600,y:50},windowWidth:"310px",windowHeaderText:"Feature Edit",windowIconAltText:"Feature Edit",positioningParamName:"featureEdit",windowIconClass:"commonIcons16 pencil",constructor:function(){this.firstShowListener=this.on("firstWindowShow",_d.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/editor/FeatureServiceEditor"],_d.hitch(this,function(_10){this.featureServiceEditor=new _10();this.featureServiceEditor.on("setParentWidth",_d.hitch(this,this.setWindowWidthFromInt));this.setContent(this.featureServiceEditor.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_c.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.FEATURE_EDITOR.SHOW,_d.hitch(this,this.show)));this.subscribes.push(_c.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.FEATURE_EDITOR.HIDE,_d.hitch(this,this.hide)));this.subscribes.push(_c.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.FEATURE_EDITOR.TOGGLE,_d.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.featureServiceEditor){if(this.featureServiceEditor.currentDrawType!=null){this.featureServiceEditor.clearDraw();}}},show:function(){this.inherited(arguments);if(this.featureServiceEditor){this.featureServiceEditor.showFeatureLayers();}}});});},"esriviewer/map/base/LayerQueryTools":function(){define("esriviewer/map/base/LayerQueryTools",["dojo/_base/declare","dojo/_base/lang","dojo/topic","esri/tasks/QueryTask","esri/tasks/query"],function(_11,_12,_13,_14,_15){return _11([],{constructor:function(){this.layerFieldsCache={};this.initListeners();},initListeners:function(){this.inherited(arguments);_13.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.QUERY_LAYER,_12.hitch(this,this.handleQueryLayer));},handleQueryLayer:function(_16){if(_16.layer==null||_16.layer.url==null){if(_16.errback!=null&&_12.isFunction(_16.errback)){_16.errback("There is no query layer");}return;}if(_16.callback==null||!_12.isFunction(_16.callback)){return;}if(_16.errback==null){_12.hitch(this,this.handleQueryLayerDefaultErrback,_16.layer);}var _17=_16.layer.url;if(_16.layerId!=null){_17=VIEWER_UTILS.joinUrl(_17,_16.layerId);}var _18=new _14(_17);var _19=new _15();_19.returnGeometry=_16.returnGeometry;if(_16.whereClause!=null&&_16.whereClause.length>0){_19.where=_16.whereClause;}if(_16.geometry!=null){_19.geometry=_16.geometry;}if(_16.outFields!=null){_19.outFields=_16.outFields;}else{if(_16.returnGeometry){_19.outFields=["*"];}else{var _1a=_17.toLowerCase();if(this.layerFieldsCache[_1a]==null){if(_16.layerId!=null){var _1b=_16.callback;var _1c=_16.errback;VIEWER_UTILS.getLayerInfoFromService(_16.layer.url,_16.layerId,_12.hitch(this,function(_1d){var _1e=this._generateOutFieldsFromLayer(_1d);this.layerFieldsCache[_1a]=_1e;_19.outFields=_1e;this._performQuery(_18,_19,_1b,_1c);}));return;}else{var _1f=this._generateOutFieldsFromLayer(_16.layer);this.layerFieldsCache[_1a]=_1f;_19.outFields=_1f;}}else{_19.outFields=this.layerFieldsCache[_1a];}}}this._performQuery(_18,_19,_16.callback,_16.errback);},_generateOutFieldsFromLayer:function(_20){if(_20==null||!_12.isObject(_20)||_20.fields==null||!_12.isArray(_20.fields)){return ["*"];}var _21=[];var _22;for(var i=0;i<_20.fields.length;i++){_22=_20.fields[i];if(_22.type!=VIEWER_GLOBALS.ESRI_FIELD_TYPES.GEOMETRY){_21.push(_22.name);}}return _21;},_performQuery:function(_23,_24,_25,_26){_23.execute(_24,_25,_26);},handleQueryLayerDefaultErrback:function(_27,err){VIEWER_UTILS.log("Could not perform layer query",VIEWER_GLOBALS.LOG_TYPE.ERROR);_13.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Could not perform layer query");}});});},"esriviewer/ui/toolbar/base/BasemapListingWidget":function(){require({cache:{"url:esriviewer/ui/toolbar/base/template/BasemapsListingTemplate.html":"<div data-bind=\"visible: visible\" class=\"basemapsToolbarDropdown toolbarDropdownContent\">\r\n    <div data-bind=\"foreach:basemaps\">\r\n        <div class=\"basemapToolbarEntry\">\r\n            <div class=\"basemapToolbarEntryLabel\" data-bind=\"text: $data.label\"></div>\r\n            <img class=\"basemapToolbarThumb\"\r\n                 data-bind=\"click:$parent.handleBasemapClick, css:{basemapThumbSelected: $data.selected},attr:{src:$data.thumbnail, title: $data.label}\">\r\n        </div>\r\n    </div>\r\n</div>"}});define("esriviewer/ui/toolbar/base/BasemapListingWidget",["dojo/_base/declare","dojo/text!./template/BasemapsListingTemplate.html","dojo/topic","dojo/_base/lang","dojo/on","dojo/dom-construct","dojo/dom-class","dojo/dom-style","../../base/UITemplatedWidget","./model/BasemapsListingViewModel"],function(_28,_29,_2a,_2b,on,_2c,_2d,_2e,_2f,_30){return _28([_2f],{templateString:_29,defaultBasemapIcon:"images/thumbs/genericThumbnail.png",postCreate:function(){this.viewModel=new _30();ko.applyBindings(this.viewModel,this.domNode);this.inherited(arguments);},isVisible:function(){return this.viewModel.visible();},toggle:function(){this.viewModel.visible(!this.viewModel.visible());},show:function(){this.viewModel.visible(true);},hide:function(){this.viewModel.visible(false);},initListeners:function(){this.inherited(arguments);_2a.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.ADDED,_2b.hitch(this,this.addBasemap));_2a.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.REMOVED,_2b.hitch(this,this.handleBasemapRemoved));},setBasemaps:function(_31){var _32;for(var key in _31){_32=_31[key];this.addBasemap(_32,key);}_2a.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GET_CURRENT,_2b.hitch(this,this.handleGetCurrentBasemapResponse));},handleBasemapRemoved:function(key){var _33=this.viewModel.removeBasemap(key);if(_33){_2a.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GET_CURRENT,_2b.hitch(this,this.handleGetCurrentBasemapResponse));}},addBasemap:function(_34,key){var _35=_34.icon!=null?_34.icon:this.defaultBasemapIcon;this.viewModel.addBasemap({thumbnail:_35,label:(_34.label?_34.label:"Basemap"),key:key});},handleGetCurrentBasemapResponse:function(_36){this.viewModel.setCurrentBasemap(_36);}});});},"esriviewer/base/ConfigurationEntryMixin":function(){define("esriviewer/base/ConfigurationEntryMixin",["dojo/_base/declare"],function(_37){return _37([],{constructor:function(){},loadViewerConfigurationData:function(){}});});},"esriviewer/ui/tools/ViewerDefaultTools":function(){define("esriviewer/ui/tools/ViewerDefaultTools",["dojo/_base/declare","dojo/topic","dojo/_base/lang","dijit/MenuItem"],function(_38,_39,_3a,_3b){return _38([],{showPlottingWindowMenuIcon:false,showPrintWindowMenuIcon:false,showPortalPublisherWindowMenuIcon:false,showSocialMediaWindowMenuIcon:false,showConfigureWindowMenuItem:false,showLegendWindowMenuItem:false,showLoggingWindowMenuItem:false,showDrawWindowMenuItem:false,showTimeSliderMenuItem:false,showFeatureEditorMenuItem:false,showIdentifyMenuItem:false,showQueryBuilderMenuItem:false,showMeasureMenuItem:false,showReverseGeocodeMenuItem:false,showZoomToMenuItem:false,showPortalSearchMenuItem:false,showLayerTransparencyMenuItem:false,showWeatherWindowMenuItem:false,showReflectivityWindowMenuItem:false,constructor:function(_3c){_3a.mixin(this,_3c||{});this.toolsToAdd=[];this.loadViewerConfigurationData();this.createDefaultToolMenuItems();},createDefaultToolMenuItems:function(){if(this.showDrawWindowMenuItem){this.createDrawWindowMenuItem();}if(this.showMeasureMenuItem){this.createMeasureMenuItem();}if(this.showPortalSearchMenuItem){this.createPortalSearchMenuItem();}if(this.showZoomToMenuItem){this.createZoomToMenuItem();}if(this.showIdentifyMenuItem){this.createIdentifyMenuItem();}if(this.showWeatherWindowMenuItem){this.createWeatherMenuItem();}if(this.showLegendWindowMenuItem){this.createLegendMenuItem();}if(this.showLoggingWindowMenuItem){this.createLoggingMenuItem();}if(this.showTimeSliderMenuItem){this.createTimeSliderMenuItem();}if(this.showFeatureEditorMenuItem){this.createFeatureEditorMenuItem();}if(this.showQueryBuilderMenuItem){this.createQueryBuilderMenuItem();}if(this.showReverseGeocodeMenuItem){this.createReverseGeocodeMenuItem();}if(this.showSocialMediaWindowMenuIcon){this.createSocialMediaMenuItem();}if(this.showReflectivityWindowMenuItem){this.createReflectivityMenuItem();}if(this.showLayerTransparencyMenuItem){this.createLayerTransparencyMenuItem();}if(this.showPortalPublisherWindowMenuIcon){this.createPortalPublisherMenuItem();}if(this.showPrintWindowMenuIcon){this.createPrintMenuItem();}if(this.showPlottingWindowMenuIcon){this.createPlottingMenuItem();}this.sortAndAddTools();},sortAndAddTools:function(){this.toolsToAdd.sort(function(a,b){return a.label.localeCompare(b.label);});for(var i=0;i<this.toolsToAdd.length;i++){_39.publish(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.ADD_TOOL,this.toolsToAdd[i]);}},createZoomToMenuItem:function(){var _3d=new _3b({iconClass:"commonIcons16 magnifyingGlass",label:"Zoom To Location",onClick:_3a.hitch(this,this.handleZoomToLocationClick)});this.toolsToAdd.push(_3d);},createSocialMediaMenuItem:function(){var _3e=new _3b({iconClass:"commonIcons16 binoculars",label:"Social Media",onClick:_3a.hitch(this,this.handleSocialMediaMenuClick)});this.toolsToAdd.push(_3e);},createReflectivityMenuItem:function(){var _3f=new _3b({iconClass:"commonIcons16 weather",label:"Reflectivity",onClick:_3a.hitch(this,this.handleReflectivityMenuClick)});this.toolsToAdd.push(_3f);},createWeatherMenuItem:function(){var _40=new _3b({iconClass:"commonIcons16 weather",label:"Weather",onClick:_3a.hitch(this,this.handleWeatherMenuClick)});this.toolsToAdd.push(_40);},createLegendMenuItem:function(){var _41=new _3b({iconClass:"commonIcons16 list",label:"Legend",onClick:_3a.hitch(this,this.handleLegendMenuClick)});this.toolsToAdd.push(_41);},createLoggingMenuItem:function(){var _42=new _3b({iconClass:"commonIcons16 list",label:"Logging",onClick:_3a.hitch(this,this.handleLoggingMenuClick)});this.toolsToAdd.push(_42);},createPlottingMenuItem:function(){var _43=new _3b({iconClass:"commonIcons16 pushpin",label:"Plotting",onClick:_3a.hitch(this,this.handlePlottingMenuClick)});this.toolsToAdd.push(_43);},createPrintMenuItem:function(){var _44=new _3b({iconClass:"commonIcons16 print",label:"Print",onClick:_3a.hitch(this,this.handlePrintMenuClick)});this.toolsToAdd.push(_44);},createPortalPublisherMenuItem:function(){var _45=new _3b({iconClass:"commonIcons16 worldAdd",label:"Publish Web Map",onClick:_3a.hitch(this,this.handlePortalPublisherMenuClick)});this.toolsToAdd.push(_45);},createLayerTransparencyMenuItem:function(){var _46=new _3b({iconClass:"commonIcons16 slider",label:"Transparency",onClick:_3a.hitch(this,this.handleLayerTransparencyMenuClick)});this.toolsToAdd.push(_46);},createPortalSearchMenuItem:function(){var _47=new _3b({iconClass:"commonIcons16 magnifyingGlass",label:"Search Portal",onClick:_3a.hitch(this,this.handlePortalSearchMenuClick)});this.toolsToAdd.push(_47);},createTimeSliderMenuItem:function(){var _48=new _3b({iconClass:"commonIcons16 clock",label:"Time Slider",onClick:_3a.hitch(this,this.handleTimeSliderMenuClick)});this.toolsToAdd.push(_48);},createFeatureEditorMenuItem:function(){var _49=new _3b({iconClass:"commonIcons16 pencil",label:"Feature Editor",onClick:_3a.hitch(this,this.handleFeatureEditorMenuClick)});this.toolsToAdd.push(_49);},createIdentifyMenuItem:function(){var _4a=new _3b({iconClass:"commonIcons16 information",label:"Identify",onClick:_3a.hitch(this,this.handleIdentifyMenuClick)});this.toolsToAdd.push(_4a);},createQueryBuilderMenuItem:function(){var _4b=new _3b({iconClass:"commonIcons16 sql",label:"Query Builder",onClick:_3a.hitch(this,this.handleQueryBuilderMenuClick)});this.toolsToAdd.push(_4b);},createMeasureMenuItem:function(){var _4c=new _3b({iconClass:"commonIcons16 triangle",label:"Measure",onClick:_3a.hitch(this,this.handleMeasureMenuClick)});this.toolsToAdd.push(_4c);},createReverseGeocodeMenuItem:function(){var _4d=new _3b({iconClass:"commonIcons16 information",label:"Find Address",onClick:_3a.hitch(this,this.handleReverseGeocodeMenuClick)});this.toolsToAdd.push(_4d);},createDrawWindowMenuItem:function(){var _4e=new _3b({iconClass:"commonIcons16 pencil",label:"Draw",onClick:_3a.hitch(this,this.handleDrawMenuClick)});this.toolsToAdd.push(_4e);},handleTimeSliderMenuClick:function(){_39.publish(VIEWER_GLOBALS.EVENTS.MAP.TIME.SHOW_TIME_SLIDER);},handleLayerTransparencyMenuClick:function(){_39.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.TRANSPARENCY.WINDOW.SHOW);},handleDrawMenuClick:function(){_39.publish(VIEWER_GLOBALS.EVENTS.WINDOW.DRAW.SHOW);},handleFeatureEditorMenuClick:function(){_39.publish(VIEWER_GLOBALS.EVENTS.WINDOW.FEATURE_EDITOR.SHOW);},handleQueryBuilderMenuClick:function(){_39.publish(VIEWER_GLOBALS.EVENTS.WINDOW.QUERY_BUILDER.SHOW);},handleMeasureMenuClick:function(){_39.publish(VIEWER_GLOBALS.EVENTS.WINDOW.MEASURE.SHOW);},handleIdentifyMenuClick:function(){_39.publish(VIEWER_GLOBALS.EVENTS.WINDOW.IDENTIFY.SHOW);},handleReverseGeocodeMenuClick:function(){_39.publish(VIEWER_GLOBALS.EVENTS.WINDOW.REVERSE_GEOCODE.SHOW);},handlePortalSearchMenuClick:function(){_39.publish(VIEWER_GLOBALS.EVENTS.WINDOW.PORTAL_SEARCH.SHOW);},loadViewerConfigurationData:function(){var _4f=null;_39.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"logging",function(_50){_4f=_50;});if(_4f&&_3a.isObject(_4f)&&_4f.window!=null){this.showLoggingWindowMenuItem=_4f.window.create==null?false:_4f.window.create;}var _51=null;_39.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"configureWidget",function(_52){_51=_52;});if(_51){this.showConfigureWindowMenuItem=_51.create==null||_51.create!=false;}var _53=null;_39.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_54){_53=_54;});if(_53){if(_53.legend==null||_53.legend.create!=false){this.showLegendWindowMenuItem=true;}}var _55=null;_39.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"socialMediaWidget",function(_56){_55=_56;});if(_55!=null&&_3a.isObject(_55)&&_55.create==true){this.showSocialMediaWindowMenuIcon=true;}var _57=null;_39.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"drawWidget",function(_58){_57=_58;});if(_57!=null&&_3a.isObject(_57)&&_57.create==true){this.showDrawWindowMenuItem=true;}var _59=null;_39.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"timeSliderWidget",function(_5a){_59=_5a;});if(_59!=null&&_3a.isObject(_59)&&_59.create==true){this.showTimeSliderMenuItem=true;}var _5b=null;_39.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"featureEditorWidget",function(_5c){_5b=_5c;});this.showFeatureEditorMenuItem=_5b&&_5b.service&&_5b.service.url;var _5d=null;_39.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"identifyWidget",function(_5e){_5d=_5e;});if(_5d!=null&&_3a.isObject(_5d)&&_5d.create==true){this.showIdentifyMenuItem=true;}var _5f=null;_39.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"layersTransparencyWidget",function(_60){_5f=_60;});if(_5f!=null&&_3a.isObject(_5f)&&_5f.create==true){this.showLayerTransparencyMenuItem=true;}var _61=null;_39.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"zoomToWidget",function(_62){_61=_62;});if(_61!=null&&_3a.isObject(_61)&&_61.create==true){this.showZoomToMenuItem=true;}var _63=null;_39.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"reflectivityWidget",function(_64){_63=_64;});this.showReflectivityWindowMenuItem=_63!=null&&_3a.isObject(_63)&&_63.create===true;var _65=null;_39.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"weatherWidget",function(_66){_65=_66;});this.showWeatherWindowMenuItem=_65!=null&&_3a.isObject(_65)&&_65.create===true;var _67=null;_39.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"printWidget",function(_68){_67=_68;});this.showPrintWindowMenuIcon=_67!=null&&_3a.isObject(_67)&&_67.create===true&&_67.printTaskUrl!=null;var _69=null;_39.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"queryBuilder",function(_6a){_69=_6a;});this.showQueryBuilderMenuItem=_69!=null&&_3a.isObject(_69)&&_69.create===true;var _6b=null;_39.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"geometryServiceUrl",function(_6c){_6b=_6c;});if(_6b!=null){var _6d=null;_39.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"measureWidget",function(_6e){_6d=_6e;});if(_6d&&_3a.isObject(_6d)){if(_6d.create==true){this.showMeasureMenuItem=true;}}}var _6f=null;_39.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"locators",function(_70){_6f=_70;});if(_6f==null||!_3a.isArray(_6f)||_6f.length==0){this.showReverseGeocodeMenuItem=false;}else{var _71=null;_39.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"reverseGeocodeWidget",function(_72){_71=_72;});this.showReverseGeocodeMenuItem=_71&&_3a.isObject(_71)&&_71.create==true;}var _73=null;_39.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"portal",function(_74){_73=_74;});if(_73==null||!_3a.isObject(_73)){this.showPortalSearchMenuItem=false;this.showPortalPublisherWindowMenuIcon=false;}else{var _75=null;_39.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"portalSearchWidget",function(_76){_75=_76;});this.showPortalSearchMenuItem=_75&&_3a.isObject(_75)&&_75.create==true;var _77=null;_39.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"portalPublisher",function(_78){_77=_78;});this.showPortalPublisherWindowMenuIcon=_77&&_3a.isObject(_77)&&_77.window&&_77.window.create==true;}var _79=null;_39.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"plottingWidget",function(_7a){_79=_7a;});this.showPlottingWindowMenuIcon=_79&&_3a.isObject(_79)&&_79.create==true;},createConfigurationMenuItem:function(){if(this.showConfigureWindowMenuItem!=false){this._createConfigureMenuItem();}},handlePortalPublisherMenuClick:function(){_39.publish(VIEWER_GLOBALS.EVENTS.WINDOW.PORTAL_PUBLISH.SHOW);},handlePrintMenuClick:function(){_39.publish(VIEWER_GLOBALS.EVENTS.WINDOW.PRINT.SHOW);},handlePlottingMenuClick:function(){_39.publish(VIEWER_GLOBALS.EVENTS.WINDOW.PLOTTING.SHOW);},handleLoggingMenuClick:function(){_39.publish(VIEWER_GLOBALS.EVENTS.LOGGING.WINDOW.SHOW);},handleZoomToLocationClick:function(){_39.publish(VIEWER_GLOBALS.EVENTS.WINDOW.ZOOM_TO.SHOW);},handleSocialMediaMenuClick:function(){_39.publish(VIEWER_GLOBALS.EVENTS.WINDOW.SOCIAL_MEDIA.SHOW);},handleReflectivityMenuClick:function(){_39.publish(VIEWER_GLOBALS.EVENTS.WINDOW.REFLECTIVITY.SHOW);},handleWeatherMenuClick:function(){_39.publish(VIEWER_GLOBALS.EVENTS.WINDOW.WEATHER.SHOW);},handleLegendMenuClick:function(){_39.publish(VIEWER_GLOBALS.EVENTS.WINDOW.LEGEND.SHOW);},_createConfigureMenuItem:function(){var _7b=new _3b({iconClass:"commonIcons16 gear",label:"Configure",onClick:_3a.hitch(this,this.handleConfigureMenuClick)});_39.publish(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.ADD_TOOL,_7b);},handleConfigureMenuClick:function(){_39.publish(VIEWER_GLOBALS.EVENTS.CONFIGURE.WINDOW.SHOW);}});});},"url:esriviewer/ui/layers/template/LayersWidgetTemplate.html":"<div>\r\n    <div class=\"defaultTabContainer\" data-dojo-attach-point=\"layersTabContainer\">\r\n        <span data-dojo-attach-point=\"layersTab\"\r\n              data-bind=\"click:showLayersList, css: {selectedTab: layersListVisible}\">Layers</span>\r\n        <span data-dojo-attach-point=\"addLayersTab\"\r\n              data-bind=\"click:showAddLayers, css: {selectedTab: addlayersVisible}\">Add Layer</span>\r\n        <span data-dojo-attach-point=\"persistsedLayersTab\"\r\n              data-bind=\"click:showUserPersistedLayers, css: {selectedTab: persistedLayersVisible}\">Saved Layers</span>\r\n    </div>\r\n    <div data-bind=\"visible:addlayersVisible\" class=\"addLayerContainer\">\r\n        <div class=\"addLayerContainerInner\">\r\n            <div class=\"viewerAddLayerWorkingWKIDContainer\" data-bind=\"visible:showWKIDInAddLayers\">\r\n                <span class=\"viewerAddLayerLabel \">Map WKID:</span>\r\n                <span class=\"viewerAddLayerWorkingWKIDLabel\" data-bind=\"text: viewerWKID\"></span>\r\n            </div>\r\n            <div class=\"viewerAddLayerLabel viewerAddLayerUrlLabel \">URL:</div>\r\n            <div data-dojo-type=\"dijit/form/TextBox\" style=\"width: 100%\" data-dojo-attach-point=\"addLayerTextInput\"\r\n                 data-dojo-attach-event=\"onKeyUp:handleLayerAddUrlKeyUp\"></div>\r\n            <div class=\"viewerAddLayerLabel viewerAddLayerUrlLabel \">Label:</div>\r\n            <div data-dojo-type=\"dijit/form/TextBox\" style=\"width: 100%\" data-dojo-attach-point=\"addLayerLabelInput\"\r\n                 value=\"Added Layer\"></div>\r\n            <div class=\"viewerAddLayerActions\">\r\n                <div class=\"layerTypeContainer\">\r\n                    <div class=\"viewerAddLayerLabel\">Type:</div>\r\n                    <select data-dojo-type=\"dijit/form/Select\" style=\"width: 100%\"\r\n                            data-dojo-attach-point=\"addLayerTypeSelect\"\r\n                            style=\"width: 15em\"></select>\r\n                </div>\r\n                <div class=\"viewerAddLayerButtonActions\">\r\n                    <div data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:addManualLayer\">Add Layer\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n    <div data-dojo-attach-point=\"layerTocContainer\" data-bind=\"visible:layersListVisible\">\r\n\r\n    </div>\r\n    <!-- <ul class=\"viewerLayerListing\" data-dojo-attach-point=\"layersList\" data-bind=\"visible:layersListVisible\">\r\n\r\n     </ul> -->\r\n    <div data-bind=\"visible:persistedLayersVisible\" data-dojo-attach-point=\"userPersistedLayersContainer\">\r\n\r\n    </div>\r\n\r\n\r\n</div>","esriviewer/ui/draw/base/GraphicsListWidget":function(){require({cache:{"url:esriviewer/ui/draw/base/template/GrahicsListingTemplate.html":"<div>\r\n    <div class=\"addGraphicsActionsContainer\" data-dojo-attach-point=\"addGraphicsActionsContainer\">\r\n        <div class=\"graphicsListRightIcon commonIcons16 disk\" title=\"Save Graphics\"\r\n             data-bind=\"click:toggleSaveGraphics, visible:saveGraphicsIconVisible\"></div>\r\n        <div class=\"graphicsListLeftIcon commonIcons16 layerHide\" title=\"Toggle Graphics\"\r\n             data-bind=\"click:toggleAllGraphics, css:{layerShow: allGraphicsVisible}\"></div>\r\n        <div class=\"graphicsListLeftIcon commonIcons16 trash\" title=\"Remove All Graphics\"\r\n             data-dojo-attach-event=\"onclick:showConfirmRemoveAllTooltip\"\r\n             data-dojo-attach-point=\"removeAllGraphicsIcon\"\r\n                ></div>\r\n    </div>\r\n    <div class=\"saveGraphicsInputContainer\" data-bind=\"visible: saveGraphicsInputVisible\">\r\n        <input data-dojo-type=\"dijit/form/TextBox\" data-dojo-attach-event=\"onKeyUp: handleSaveGraphicsKeyUp\" data-dojo-attach-point=\"userSaveGraphicsNameInput\" placeholder=\"Enter A Label...\"/>\r\n        <span data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:handleSaveGraphics\">Save</span>\r\n    </div>\r\n\r\n    <div class=\"addedGraphicsListContainer\" data-dojo-attach-point=\"addedGraphicsListContainer\">\r\n        <ul data-dojo-attach-point=\"addedGraphicsList\" class=\"viewerList\" data-bind=\"foreach: addedGraphics\">\r\n            <li class=\"graphicsListEntry\">\r\n                <div title=\"Pan And Flash Graphic\"\r\n                     class=\"viewerListGenericIcon commonIcons16 magnifyingGlass\"\r\n                     data-bind=\"click:$parent.zoomToGraphic\"></div>\r\n                <div title=\"Remove Graphic\" class=\"viewerListEntryRemoveIcon commonIcons16 remove\"\r\n                     data-bind=\"click:$parent.removeGraphic\"></div>\r\n                <span class=\"graphicsListEntryLabel\" data-bind=\"text: $data.label\"></span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>"}});define("esriviewer/ui/draw/base/GraphicsListWidget",["dojo/_base/declare","dojo/text!./template/GrahicsListingTemplate.html","dojo/topic","../../base/UITemplatedWidget","dojo/_base/lang","dojo/on","../../tooltip/ConfirmTooltip","./model/GraphicsListViewModel","dijit/form/TextBox","dijit/form/Button"],function(_7c,_7d,_7e,_7f,_80,on,_81,_82,_83,_84){return _7c([_7f],{templateString:_7d,graphicsCount:0,saveSupported:false,allGraphicsOff:false,constructor:function(_85){_80.mixin(this,_85||{});this.typeLabelLookup={};this.typeLabelLookup[VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT]="Point";this.typeLabelLookup[VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE]="Line";this.typeLabelLookup[VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON]="Polygon";this.typeLabelLookup[VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_RECTANGLE]="Rectangle";this.typeLabelLookup[VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT]="Text Label";},postCreate:function(){this.inherited(arguments);this.viewModel=new _82();this.viewModel.saveGraphicsIconVisible(this.saveSupported);this.viewModel.on(this.viewModel.REMOVE_ALL_GRAPHICS,_80.hitch(this,this.handleRemoveAllGraphics));this.viewModel.on(this.viewModel.REMOVE_GRAPHIC,_80.hitch(this,this.handleRemoveGraphic));ko.applyBindings(this.viewModel,this.domNode);},handleRemoveAllGraphics:function(){this.onRemoveAllGraphics();},onRemoveAllGraphics:function(){},handleRemoveGraphic:function(_86){this.onRemoveGraphic(_86);},onRemoveGraphic:function(_87){},addGraphic:function(_88){this.viewModel.addedGraphics.push({label:_88.label?_88.label:(this.typeLabelLookup[_88.type]+" "+VIEWER_UTILS.getTimeStamp()),graphic:_88.graphic});},showConfirmRemoveAllTooltip:function(){if(this.confirmDeleteAllTooltip==null){this.createConfirmDeleteBookmarkTooltip();}if(this.confirmDeleteAllTooltip){this.confirmDeleteAllTooltip.show();}},createConfirmDeleteBookmarkTooltip:function(){this.confirmDeleteAllTooltip=new _81({confirmCallback:_80.hitch(this.viewModel,this.viewModel.removeAllGraphics),aroundNode:this.removeAllGraphicsIcon,displayText:"Delete Graphics? "});this.confirmDeleteAllTooltip.on("hide",_80.hitch(this,function(){this.deleteBookmarkConfirmedCallback=null;}));},hidePopups:function(){if(this.confirmDeleteAllTooltip){this.confirmDeleteAllTooltip.hide();}},handleSaveGraphicsKeyUp:function(e){if(VIEWER_UTILS.isEnterKey(e)){this.handleSaveGraphics();}},handleSaveGraphics:function(){var _89=this.userSaveGraphicsNameInput.get("value");if(_89!=null&&_89!=""){this.onSaveGraphics(_89,this.viewModel.addedGraphics());this.viewModel.saveGraphicsInputVisible(false);this.userSaveGraphicsNameInput.set("value","");}},getGraphics:function(){var _8a=this.viewModel.addedGraphics();var _8b=[];for(var i=0;i<_8a.length;i++){_8b.push(_8a[i].graphic);}return _8b;},onSaveGraphics:function(_8c,_8d){}});});},"esriviewer/ui/layers/LayersWindowWidget":function(){define("esriviewer/ui/layers/LayersWindowWidget",["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/window","dojo/dom-style","dojo/dom-class","../window/WindowWidget","./LayersWidget"],function(_8e,_8f,_90,_91,_92,_93,_94,_95){return _8e([_94],{defaultPositioning:{x:700,y:50},windowWidth:null,windowHeaderText:"Map Layers",windowIconAltText:"Map Layers",windowIconClass:"commonIcons16 layer",positioningParamName:"layers",initListeners:function(){this.inherited(arguments);this.subscribes.push(_8f.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.WIDGET.SHOW,_90.hitch(this,this.show)));},postCreate:function(){_93.add(this.domNode,"layersWindow");_93.add(this.windowContent,"layersWindowContent");this.layersWidget=new _95();this.setContent(this.layersWidget.domNode);this.inherited(arguments);},show:function(){this.inherited(arguments);this.layersWidget.showLayerList();},hidePopups:function(){this.inherited(arguments);if(this.layersWidget){this.layersWidget.hidePopups();}}});});},"esriviewer/map/base/MapUtils":function(){define("esriviewer/map/base/MapUtils",["dojo/_base/declare"],function(_96){return _96([],{});});},"esriviewer/map/base/LayerQueryParameters":function(){define("esriviewer/map/base/LayerQueryParameters",["dojo/_base/declare","dojo/_base/lang"],function(_97,_98){return _97([],{whereClause:"",returnGeometry:false,useCurrentExtent:false,constructor:function(_99){this.layer=null;this.layerId=null;this.outFields=null;this.geometry=null;this.callback=null;this.errback=null;_98.mixin(this,_99||{});}});});},"esriviewer/ui/base/UITemplatedWidget":function(){define("esriviewer/ui/base/UITemplatedWidget",["dojo/_base/declare","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","./UIWidget"],function(_9a,_9b,_9c,_9d){return _9a([_9d,_9b,_9c],{widgetsInTemplate:true});});},"dijit/tree/TreeStoreModel":function(){define("dijit/tree/TreeStoreModel",["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(_9e,_9f,_a0,_a1){return _a0("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:false,constructor:function(_a2){_a1.mixin(this,_a2);this.connects=[];var _a3=this.store;if(!_a3.getFeatures()["dojo.data.api.Identity"]){throw new Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");}if(_a3.getFeatures()["dojo.data.api.Notification"]){this.connects=this.connects.concat([_9f.after(_a3,"onNew",_a1.hitch(this,"onNewItem"),true),_9f.after(_a3,"onDelete",_a1.hitch(this,"onDeleteItem"),true),_9f.after(_a3,"onSet",_a1.hitch(this,"onSetItem"),true)]);}},destroy:function(){var h;while(h=this.connects.pop()){h.remove();}},getRoot:function(_a4,_a5){if(this.root){_a4(this.root);}else{this.store.fetch({query:this.query,onComplete:_a1.hitch(this,function(_a6){if(_a6.length!=1){throw new Error("dijit.tree.TreeStoreModel: root query returned "+_a6.length+" items, but must return exactly one");}this.root=_a6[0];_a4(this.root);}),onError:_a5});}},mayHaveChildren:function(_a7){return _9e.some(this.childrenAttrs,function(_a8){return this.store.hasAttribute(_a7,_a8);},this);},getChildren:function(_a9,_aa,_ab){var _ac=this.store;if(!_ac.isItemLoaded(_a9)){var _ad=_a1.hitch(this,arguments.callee);_ac.loadItem({item:_a9,onItem:function(_ae){_ad(_ae,_aa,_ab);},onError:_ab});return;}var _af=[];for(var i=0;i<this.childrenAttrs.length;i++){var _b0=_ac.getValues(_a9,this.childrenAttrs[i]);_af=_af.concat(_b0);}var _b1=0;if(!this.deferItemLoadingUntilExpand){_9e.forEach(_af,function(_b2){if(!_ac.isItemLoaded(_b2)){_b1++;}});}if(_b1==0){_aa(_af);}else{_9e.forEach(_af,function(_b3,idx){if(!_ac.isItemLoaded(_b3)){_ac.loadItem({item:_b3,onItem:function(_b4){_af[idx]=_b4;if(--_b1==0){_aa(_af);}},onError:_ab});}});}},isItem:function(_b5){return this.store.isItem(_b5);},fetchItemByIdentity:function(_b6){this.store.fetchItemByIdentity(_b6);},getIdentity:function(_b7){return this.store.getIdentity(_b7);},getLabel:function(_b8){if(this.labelAttr){return this.store.getValue(_b8,this.labelAttr);}else{return this.store.getLabel(_b8);}},newItem:function(_b9,_ba,_bb){var _bc={parent:_ba,attribute:this.childrenAttrs[0]},_bd;if(this.newItemIdAttr&&_b9[this.newItemIdAttr]){this.fetchItemByIdentity({identity:_b9[this.newItemIdAttr],scope:this,onItem:function(_be){if(_be){this.pasteItem(_be,null,_ba,true,_bb);}else{_bd=this.store.newItem(_b9,_bc);if(_bd&&(_bb!=undefined)){this.pasteItem(_bd,_ba,_ba,false,_bb);}}}});}else{_bd=this.store.newItem(_b9,_bc);if(_bd&&(_bb!=undefined)){this.pasteItem(_bd,_ba,_ba,false,_bb);}}},pasteItem:function(_bf,_c0,_c1,_c2,_c3){var _c4=this.store,_c5=this.childrenAttrs[0];if(_c0){_9e.forEach(this.childrenAttrs,function(_c6){if(_c4.containsValue(_c0,_c6,_bf)){if(!_c2){var _c7=_9e.filter(_c4.getValues(_c0,_c6),function(x){return x!=_bf;});_c4.setValues(_c0,_c6,_c7);}_c5=_c6;}});}if(_c1){if(typeof _c3=="number"){var _c8=_c4.getValues(_c1,_c5).slice();_c8.splice(_c3,0,_bf);_c4.setValues(_c1,_c5,_c8);}else{_c4.setValues(_c1,_c5,_c4.getValues(_c1,_c5).concat(_bf));}}},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(_c9,_ca){if(!_ca){return;}this.getChildren(_ca.item,_a1.hitch(this,function(_cb){this.onChildrenChange(_ca.item,_cb);}));},onDeleteItem:function(_cc){this.onDelete(_cc);},onSetItem:function(_cd,_ce){if(_9e.indexOf(this.childrenAttrs,_ce)!=-1){this.getChildren(_cd,_a1.hitch(this,function(_cf){this.onChildrenChange(_cd,_cf);}));}else{this.onChange(_cd);}}});});},"url:esriviewer/ui/bookmark/template/CreateBookmarkTemplate.html":"<div class=\"createBookmarkWindow fivePixelBorderRadius defaultBorder defaultBoxShadow\">\r\n    <div class=\"createBookmarkHeader\">\r\n    </div>\r\n    <div class=\"createBookmarkContent\">\r\n        <div class=\"createBookmarkLabelEntry createBookmarkEntry\">\r\n            <span class=\"createBookmarkLabel\">Label:</span>\r\n            <div data-dojo-type=\"dijit/form/TextBox\" data-dojo-attach-event=\"onKeyUp: onBookmarkLabelKeyUp\" data-dojo-attach-point=\"bookmarkLabelElement\"></div>\r\n        </div>\r\n    </div>\r\n    <div class=\"createBookmarkActionsContent\">\r\n        <span data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:hide\" class=\"createBookmarkButton\">Cancel</span>\r\n        <span data-dojo-type=\"dijit/form/Button\" class=\"createBookmarkButton\" data-dojo-attach-event=\"onClick:createBookmark\">Create</span>\r\n    </div>\r\n</div>","url:esriviewer/ui/toolbar/base/template/BasemapsListingTemplate.html":"<div data-bind=\"visible: visible\" class=\"basemapsToolbarDropdown toolbarDropdownContent\">\r\n    <div data-bind=\"foreach:basemaps\">\r\n        <div class=\"basemapToolbarEntry\">\r\n            <div class=\"basemapToolbarEntryLabel\" data-bind=\"text: $data.label\"></div>\r\n            <img class=\"basemapToolbarThumb\"\r\n                 data-bind=\"click:$parent.handleBasemapClick, css:{basemapThumbSelected: $data.selected},attr:{src:$data.thumbnail, title: $data.label}\">\r\n        </div>\r\n    </div>\r\n</div>","dijit/_MenuBase":function(){define("dijit/_MenuBase",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/lang","dojo/mouse","dojo/on","dojo/window","./a11yclick","./popup","./registry","./_Widget","./_KeyNavContainer","./_TemplatedMixin"],function(_d0,_d1,dom,_d2,_d3,_d4,_d5,on,_d6,_d7,pm,_d8,_d9,_da,_db){return _d1("dijit._MenuBase",[_d9,_db,_da],{parentMenu:null,popupDelay:500,autoFocus:false,childSelector:function(_dc){var _dd=_d8.byNode(_dc);return _dc.parentNode==this.containerNode&&_dd&&_dd.focus;},postCreate:function(){var _de=this,_df=typeof this.childSelector=="string"?this.childSelector:_d4.hitch(this,"childSelector");this.own(on(this.containerNode,on.selector(_df,_d5.enter),function(){_de.onItemHover(_d8.byNode(this));}),on(this.containerNode,on.selector(_df,_d5.leave),function(){_de.onItemUnhover(_d8.byNode(this));}),on(this.containerNode,on.selector(_df,_d7),function(evt){_de.onItemClick(_d8.byNode(this),evt);evt.stopPropagation();evt.preventDefault();}));this.inherited(arguments);},onExecute:function(){},onCancel:function(){},_moveToPopup:function(evt){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled){this.onItemClick(this.focusedChild,evt);}else{var _e0=this._getTopMenu();if(_e0&&_e0._isMenuBar){_e0.focusNext();}}},_onPopupHover:function(){if(this.currentPopup&&this.currentPopup._pendingClose_timer){var _e1=this.currentPopup.parentMenu;if(_e1.focusedChild){_e1.focusedChild._setSelected(false);}_e1.focusedChild=this.currentPopup.from_item;_e1.focusedChild._setSelected(true);this._stopPendingCloseTimer(this.currentPopup);}},onItemHover:function(_e2){if(this.isActive){this.focusChild(_e2);if(this.focusedChild.popup&&!this.focusedChild.disabled&&!this.hover_timer){this.hover_timer=this.defer("_openPopup",this.popupDelay);}}if(this.focusedChild){this.focusChild(_e2);}this._hoveredChild=_e2;_e2._set("hovering",true);},_onChildBlur:function(_e3){this._stopPopupTimer();_e3._setSelected(false);var _e4=_e3.popup;if(_e4){this._stopPendingCloseTimer(_e4);_e4._pendingClose_timer=this.defer(function(){_e4._pendingClose_timer=null;if(_e4.parentMenu){_e4.parentMenu.currentPopup=null;}pm.close(_e4);},this.popupDelay);}},onItemUnhover:function(_e5){if(this.isActive){this._stopPopupTimer();}if(this._hoveredChild==_e5){this._hoveredChild=null;}_e5._set("hovering",false);},_stopPopupTimer:function(){if(this.hover_timer){this.hover_timer=this.hover_timer.remove();}},_stopPendingCloseTimer:function(_e6){if(_e6._pendingClose_timer){_e6._pendingClose_timer=_e6._pendingClose_timer.remove();}},_stopFocusTimer:function(){if(this._focus_timer){this._focus_timer=this._focus_timer.remove();}},_getTopMenu:function(){for(var top=this;top.parentMenu;top=top.parentMenu){}return top;},onItemClick:function(_e7,evt){if(typeof this.isShowingNow=="undefined"){this._markActive();}this.focusChild(_e7);if(_e7.disabled){return false;}if(_e7.popup){this._openPopup(evt.type=="keypress");}else{this.onExecute();_e7._onClick?_e7._onClick(evt):_e7.onClick(evt);}},_openPopup:function(_e8){this._stopPopupTimer();var _e9=this.focusedChild;if(!_e9){return;}var _ea=_e9.popup;if(!_ea.isShowingNow){if(this.currentPopup){this._stopPendingCloseTimer(this.currentPopup);pm.close(this.currentPopup);}_ea.parentMenu=this;_ea.from_item=_e9;var _eb=this;pm.open({parent:this,popup:_ea,around:_e9.domNode,orient:this._orient||["after","before"],onCancel:function(){_eb.focusChild(_e9);_eb._cleanUp();_e9._setSelected(true);_eb.focusedChild=_e9;},onExecute:_d4.hitch(this,"_cleanUp")});this.currentPopup=_ea;_ea.connect(_ea.domNode,"onmouseenter",_d4.hitch(_eb,"_onPopupHover"));}if(_e8&&_ea.focus){_ea._focus_timer=this.defer(_d4.hitch(_ea,function(){this._focus_timer=null;this.focus();}));}},_markActive:function(){this.isActive=true;_d3.replace(this.domNode,"dijitMenuActive","dijitMenuPassive");},onOpen:function(){this.isShowingNow=true;this._markActive();},_markInactive:function(){this.isActive=false;_d3.replace(this.domNode,"dijitMenuPassive","dijitMenuActive");},onClose:function(){this._stopFocusTimer();this._markInactive();this.isShowingNow=false;this.parentMenu=null;},_closeChild:function(){this._stopPopupTimer();if(this.currentPopup){if(_d0.indexOf(this._focusManager.activeStack,this.id)>=0){_d2.set(this.focusedChild.focusNode,"tabIndex",this.tabIndex);this.focusedChild.focusNode.focus();}pm.close(this.currentPopup);this.currentPopup=null;}if(this.focusedChild){this.focusedChild._setSelected(false);this.onItemUnhover(this.focusedChild);this.focusedChild=null;}},_onItemFocus:function(_ec){if(this._hoveredChild&&this._hoveredChild!=_ec){this.onItemUnhover(this._hoveredChild);}},_onBlur:function(){this._cleanUp();this.inherited(arguments);},_cleanUp:function(){this._closeChild();if(typeof this.isShowingNow=="undefined"){this._markInactive();}}});});},"esriviewer/ui/tooltip/ConfirmTooltip":function(){define("esriviewer/ui/tooltip/ConfirmTooltip",["dojo/_base/declare","dojo/_base/lang","dojo/on","dojo/dom-construct","dijit/TooltipDialog","../base/UIWidget"],function(_ed,_ee,on,_ef,_f0,_f1){return _ed([_f1],{optionClassName:"confirmTooltipOptionText",contentHeaderLabelClassName:"confirmTooltipContentLbl",defaultYesLabel:"Yes",defaultNoLabel:"No",defaultDisplayText:"Confirm:",visible:false,constructor:function(_f2){this.confirmCallback=null;_ee.mixin(this,_f2||{});this._createTooltip();},getYesLabel:function(){return this.yesLabel==null?this.defaultYesLabel:this.yesLabel;},getNoLabel:function(){return this.noLabel==null?this.defaultNoLabel:this.noLabel;},getDisplayText:function(){return this.displayText==null?this.defaultDisplayText:this.displayText;},getConfirmCallback:function(){return this.confirmCallback;},hasConfirmCallback:function(){return this.confirmCallback!=null&&_ee.isFunction(this.confirmCallback);},onTooltipCreated:function(_f3){},setAtMouseEvent:function(evt){this.aroundNode=null;this.mouseEvent=evt;},setAroundNode:function(_f4){this.aroundNode=_f4;this.mouseEvent=null;},hasAroundNode:function(){return this.aroundNode!=null;},hasMouseEvent:function(){return this.mouseEvent!=null;},_createTooltip:function(){if(!this.hasConfirmCallback()){this.onError("must provide a confirm callback");return;}var _f5=_ef.create("div");var _f6=_ef.create("span",{innerHTML:this.getDisplayText(),className:this.contentHeaderLabelClassName});var _f7=_ef.create("span",{innerHTML:this.getYesLabel(),className:this.optionClassName});var _f8=_ef.create("span",{innerHTML:this.getNoLabel(),className:this.optionClassName});_ef.place(_f6,_f5);_ef.place(_f7,_f5);_ef.place(_f8,_f5);this.tooltip=new _f0({content:_f5});var _f9=this.getConfirmCallback();var _fa=_ee.hitch(this,function(){this.confirmCallback();this.hide();});on(_f7,"click",_fa);on(_f8,"click",_ee.hitch(this,this.hide));this.onTooltipCreated(this.tooltip);},show:function(){if(!this.hasAroundNode()&&!this.hasMouseEvent()){this.onError("No Position passed for popup");return;}var _fb={popup:this.tooltip};if(this.aroundNode){_fb.around=this.aroundNode;}if(this.mouseEvent){_fb.x=(this.mouseEvent.pageX!=null?this.mouseEvent.pageX:this.mouseEvent.clientX)+5;_fb.y=(this.mouseEvent.pageY!=null?this.mouseEvent.pageY:this.mouseEvent.clientY)+5;}if(this.tooltip){dijit.popup.open(_fb);this.visible=true;}},hide:function(){if(this.tooltip){dijit.popup.close(this.tooltip);this.onHide();this.visible=false;}},onHide:function(){},onError:function(_fc){}});});},"esriviewer/ui/bookmark/BookmarkController":function(){define("esriviewer/ui/bookmark/BookmarkController",["dojo/_base/declare","dojo/topic","dojo/has","dojo/cookie","dojo/_base/json","dojo/_base/lang","dojo/_base/window","dojo/dom-construct","./CreateBookmarkWidget"],function(_fd,_fe,has,_ff,json,lang,_100,_101,_102){return _fd([],{cookieExpiration:365,cookieMode:false,constructor:function(){this.initListeners();if(!(has("ie")<8)){this.storageProvider=dojox.storage.manager.getProvider();this.cookieMode=false;}else{this.storageProvider=null;this.cookieMode=true;}this.bookmarks=this.initializeBookmarks();if(this.bookmarks==null||!lang.isObject(this.bookmarks)){this.bookmarks={};}},initListeners:function(){_fe.subscribe(VIEWER_GLOBALS.EVENTS.BOOKMARK.CREATED,lang.hitch(this,this.handleSaveBookmark));_fe.subscribe(VIEWER_GLOBALS.EVENTS.BOOKMARK.STORAGE.GET,lang.hitch(this,this.handleGetBookmarks));_fe.subscribe(VIEWER_GLOBALS.EVENTS.BOOKMARK.CREATE_WINDOW.SHOW,lang.hitch(this,this.showCreateBookmarkDisplay));_fe.subscribe(VIEWER_GLOBALS.EVENTS.BOOKMARK.REMOVED,lang.hitch(this,this.removeBookmark));},removeBookmark:function(_103){if(this.bookmarks!=null&&lang.isObject(this.bookmarks)&&this.bookmarks[_103]!=null){delete this.bookmarks[_103];this._persistBookmarks();}},handleSaveBookmark:function(_104){if(_104==null||!lang.isObject(_104)){return;}var _105=false;for(var key in _104){this.bookmarks[key]=_104[key];_105=true;}if(_105){this._persistBookmarks();}},_persistBookmarks:function(){if(!this.cookieMode){this._persistToLocalStorage();}else{this._persistToCookies();}},_persistToLocalStorage:function(){this.storageProvider.put(VIEWER_GLOBALS.STORAGE.LABELS.BOOKMARKS,this.bookmarks);},_persistToCookies:function(){_ff(VIEWER_GLOBALS.STORAGE.LABELS.BOOKMARKS,json.toJson(this.bookmarks),{expires:this.cookieExpiration});},handleGetBookmarks:function(_106){if(_106==null||!lang.isFunction(_106)){return;}_106(this.bookmarks);},initializeBookmarks:function(){if(!this.cookieMode){return this._initializeLocalStorageBookmarks();}else{return this._initializeCookieBookmarks();}},_initializeCookieBookmarks:function(){var _107=_ff(VIEWER_GLOBALS.STORAGE.LABELS.BOOKMARKS);if(_107!=null&&_107!=""){return json.fromJson(_107);}return {};},_initializeLocalStorageBookmarks:function(){if(this.storageProvider.hasKey(VIEWER_GLOBALS.STORAGE.LABELS.BOOKMARKS)){return this.storageProvider.get(VIEWER_GLOBALS.STORAGE.LABELS.BOOKMARKS);}return {};},showCreateBookmarkDisplay:function(){if(this.createBookmarkWidget==null){this.createBookmarkWidget=new _102();_fe.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.CREATE_BOOOKMARK,this.createBookmarkWidget);}this.createBookmarkWidget.show();}});});},"esriviewer/ui/plotting/PlottingWidgetWindow":function(){define("esriviewer/ui/plotting/PlottingWidgetWindow",["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/window","dojo/dom-class","../window/WindowWidget"],function(_108,lang,_109,_10a,_10b,_10c){return _108([_10c],{defaultPositioning:{x:600,y:125},windowWidth:"300px",windowHeaderText:"Plot Coordinates",windowIconAltText:"Plot Coordinates",windowIconClass:"commonIcons16 pushpin",positioningParamName:"plotting",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_10b.add(this.windowContent,"plottingWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/plotting/PlottingWidget"],lang.hitch(this,function(_10d){this.plottingWidget=new _10d();this.setContent(this.plottingWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_109.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PLOTTING.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_109.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PLOTTING.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_109.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PLOTTING.TOGGLE,lang.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.plottingWidget){this.plottingWidget.clearGraphic();}}});});},"esriviewer/ui/toolbar/base/BookmarkListingWidget":function(){require({cache:{"url:esriviewer/ui/toolbar/base/template/BookmarkListingTemplate.html":"<div class=\"bookmarksToolbarDropdown toolbarDropdownContent\" data-bind=\"visible:visible\">\r\n    <div class=\"createBookmarkIcon commonIcons16 add\" title=\"Create Bookmark\"\r\n         data-bind=\"visible:showCreateBookmarkIcon, click:showCreateBookmark\"></div>\r\n    <div class=\"bookmarksToolbarDropdownBookmarkEntries\" data-bind=\"foreach:_bookmarks\">\r\n        <div class=\"threePixelBorderRadius bookmarkToolbarEntry\" data-bind=\"click: $parent.handleBookmarkClick\">\r\n            <span class=\"bookmarkToolbarEntryText\" data-bind=\"text: $data.label\"></span>\r\n        </div>\r\n    </div>\r\n    <div class=\"bookmarksToolbarDropdownBookmarkRemovableEntries\" data-bind=\"foreach:_removableBookmarks\">\r\n        <div class=\"bookmarkToolbarEntryOuter\">\r\n            <div title=\"Remove Bookmark\" class=\"commonIcons16 bookmarkToolbarEntryRemoveIcon remove\"\r\n                 data-bind=\"click: $parent.removeClick\"></div>\r\n            <div class=\"threePixelBorderRadius bookmarkToolbarEntry\" data-bind=\"click: $parent.handleBookmarkClick\">\r\n                <span class=\"bookmarkToolbarEntryText\" data-bind=\"text: $data.label\"></span>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</div>"}});define("esriviewer/ui/toolbar/base/BookmarkListingWidget",["dojo/_base/declare","dojo/text!./template/BookmarkListingTemplate.html","dojo/topic","dojo/_base/lang","dojo/on","../../tooltip/ConfirmTooltip","../../base/UITemplatedWidget","./model/BookmarkListingViewModel","esri/geometry/Point"],function(_10e,_10f,_110,lang,on,_111,_112,_113,_114){return _10e([_112],{allowBookmarkCreation:true,templateString:_10f,initListeners:function(){this.inherited(arguments);_110.subscribe(VIEWER_GLOBALS.EVENTS.BOOKMARK.CREATED,lang.hitch(this,this.handleBookmarkCreated));},postCreate:function(){this.inherited(arguments);this.viewModel=new _113();this.viewModel.showCreateBookmarkIcon(this.allowBookmarkCreation);this.viewModel.on(this.viewModel.SHOW_CREATE_BOOKMARK,lang.hitch(this,this.handleShowCreateBookmarkView));this.viewModel.on(this.viewModel.REMOVE_BOOKMARK_REQUEST,lang.hitch(this,this.handleRemoveBookmarkRequest));ko.applyBindings(this.viewModel,this.domNode);},loadViewerConfigurationData:function(){var _115=null;_110.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"bookmarks",function(_116){_115=_116;});if(_115&&_115.allowCreation!=null&&_115.allowCreation==false){this.allowBookmarkCreation=false;}},isVisible:function(){return this.viewModel.visible();},toggle:function(){if(this.viewModel.visible()){this.hide();}else{this.show();}},show:function(){this.viewModel.visible(true);},hide:function(){this.hidePopups();this.viewModel.visible(false);},handleBookmarkCreated:function(_117){this.addBookmarks(_117,true);this.viewModel.sortRemovable();},addStaticBookmarks:function(_118){this.addBookmarks(_118,false);this.viewModel.sortStatic();},addBookmarks:function(_119,_11a){if(_11a==null){_11a=false;}var _11b;for(var key in _119){_11b=_119[key];if(!this.isValidBookmark(_11b)){continue;}var _11c=lang.mixin({key:key},_11b);_11c.point=new _114({x:_11b.point.x,y:_11b.point.y,spatialReference:_11b.point.spatialReference});if(_11a){this.viewModel.addRemovableBookmark(_11c);}else{this.viewModel.addBookmark(_11c);}}},isValidBookmark:function(_11d){if(_11d.label!=null&&_11d.label!=""){if(_11d.zoomLevel!=null){var pt=_11d.point;if(pt.x!=null&&pt.y!=null&&pt.spatialReference!=null&&pt.spatialReference.wkid!=null){return true;}}}return false;},handleRemoveBookmarkRequest:function(_11e,evt){if(_11e!=null){this.deleteBookmarkConfirmedCallback=lang.hitch(this,function(_11f){VIEWER_UTILS.log("Bookmark Deleted: "+_11f.label,VIEWER_GLOBALS.LOG_TYPE.INFO);_110.publish(VIEWER_GLOBALS.EVENTS.BOOKMARK.REMOVED,_11f.key);this.viewModel.removeBookmark(_11f);},_11e);this.showDeleteBookmarkTooltip(evt);}},loadCookieBookmarks:function(){_110.publish(VIEWER_GLOBALS.EVENTS.BOOKMARK.STORAGE.GET,lang.hitch(this,this.handleLocalStorageBookmarksLoaded));},handleLocalStorageBookmarksLoaded:function(_120){this.addBookmarks(_120,true);this.viewModel.sortRemovable();},handleShowCreateBookmarkView:function(){_110.publish(VIEWER_GLOBALS.EVENTS.BOOKMARK.CREATE_WINDOW.SHOW);},createConfirmDeleteBookmarkTooltip:function(){this.confirmDeleteBookmarkTooltip=new _111({confirmCallback:lang.hitch(this,this.handleConfirmedBookmarkDelete)});this.confirmDeleteBookmarkTooltip.on("hide",lang.hitch(this,function(){this.deleteBookmarkConfirmedCallback=null;}));},handleConfirmedBookmarkDelete:function(){if(this.deleteBookmarkConfirmedCallback!=null&&lang.isFunction(this.deleteBookmarkConfirmedCallback)){this.deleteBookmarkConfirmedCallback();this.deleteBookmarkConfirmedCallback=null;}},showDeleteBookmarkTooltip:function(evt){if(this.confirmDeleteBookmarkTooltip==null){this.createConfirmDeleteBookmarkTooltip();}if(this.confirmDeleteBookmarkTooltip){this.confirmDeleteBookmarkTooltip.setAtMouseEvent(evt);this.confirmDeleteBookmarkTooltip.show();}},hidePopups:function(){if(this.confirmDeleteBookmarkTooltip){this.confirmDeleteBookmarkTooltip.hide();}}});});},"dojox/storage/WhatWGStorageProvider":function(){define("dojox/storage/WhatWGStorageProvider",["dijit","dojo","dojox","dojo/require!dojox/storage/Provider,dojox/storage/manager"],function(_121,dojo,_122){dojo.provide("dojox.storage.WhatWGStorageProvider");dojo.require("dojox.storage.Provider");dojo.require("dojox.storage.manager");dojo.declare("dojox.storage.WhatWGStorageProvider",[_122.storage.Provider],{initialized:false,_domain:null,_available:null,_statusHandler:null,_allNamespaces:null,_storageEventListener:null,initialize:function(){if(dojo.config["disableWhatWGStorage"]==true){return;}this._domain=location.hostname;this.initialized=true;_122.storage.manager.loaded();},isAvailable:function(){try{var _123=globalStorage[location.hostname];}catch(e){this._available=false;return this._available;}this._available=true;return this._available;},put:function(key,_124,_125,_126){if(this.isValidKey(key)==false){throw new Error("Invalid key given: "+key);}_126=_126||this.DEFAULT_NAMESPACE;key=this.getFullKey(key,_126);this._statusHandler=_125;if(dojo.isString(_124)){_124="string:"+_124;}else{_124=dojo.toJson(_124);}var _127=dojo.hitch(this,function(evt){window.removeEventListener("storage",_127,false);if(_125){_125.call(null,this.SUCCESS,key,null,_126);}});window.addEventListener("storage",_127,false);try{var _128=globalStorage[this._domain];_128.setItem(key,_124);}catch(e){this._statusHandler.call(null,this.FAILED,key,e.toString(),_126);}},get:function(key,_129){if(this.isValidKey(key)==false){throw new Error("Invalid key given: "+key);}_129=_129||this.DEFAULT_NAMESPACE;key=this.getFullKey(key,_129);var _12a=globalStorage[this._domain];var _12b=_12a.getItem(key);if(_12b==null||_12b==""){return null;}_12b=_12b.value;if(dojo.isString(_12b)&&(/^string:/.test(_12b))){_12b=_12b.substring("string:".length);}else{_12b=dojo.fromJson(_12b);}return _12b;},getNamespaces:function(){var _12c=[this.DEFAULT_NAMESPACE];var _12d={};var _12e=globalStorage[this._domain];var _12f=/^__([^_]*)_/;for(var i=0;i<_12e.length;i++){var _130=_12e.key(i);if(_12f.test(_130)==true){var _131=_130.match(_12f)[1];if(typeof _12d[_131]=="undefined"){_12d[_131]=true;_12c.push(_131);}}}return _12c;},getKeys:function(_132){_132=_132||this.DEFAULT_NAMESPACE;if(this.isValidKey(_132)==false){throw new Error("Invalid namespace given: "+_132);}var _133;if(_132==this.DEFAULT_NAMESPACE){_133=new RegExp("^([^_]{2}.*)$");}else{_133=new RegExp("^__"+_132+"_(.*)$");}var _134=globalStorage[this._domain];var _135=[];for(var i=0;i<_134.length;i++){var _136=_134.key(i);if(_133.test(_136)==true){_136=_136.match(_133)[1];_135.push(_136);}}return _135;},clear:function(_137){_137=_137||this.DEFAULT_NAMESPACE;if(this.isValidKey(_137)==false){throw new Error("Invalid namespace given: "+_137);}var _138;if(_137==this.DEFAULT_NAMESPACE){_138=new RegExp("^[^_]{2}");}else{_138=new RegExp("^__"+_137+"_");}var _139=globalStorage[this._domain];var keys=[];for(var i=0;i<_139.length;i++){if(_138.test(_139.key(i))==true){keys[keys.length]=_139.key(i);}}dojo.forEach(keys,dojo.hitch(_139,"removeItem"));},remove:function(key,_13a){key=this.getFullKey(key,_13a);var _13b=globalStorage[this._domain];_13b.removeItem(key);},isPermanent:function(){return true;},getMaximumSize:function(){return this.SIZE_NO_LIMIT;},hasSettingsUI:function(){return false;},showSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},hideSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},getFullKey:function(key,_13c){_13c=_13c||this.DEFAULT_NAMESPACE;if(this.isValidKey(_13c)==false){throw new Error("Invalid namespace given: "+_13c);}if(_13c==this.DEFAULT_NAMESPACE){return key;}else{return "__"+_13c+"_"+key;}}});_122.storage.manager.register("dojox.storage.WhatWGStorageProvider",new _122.storage.WhatWGStorageProvider());});},"url:esriviewer/ui/draw/base/template/GrahicsListingTemplate.html":"<div>\r\n    <div class=\"addGraphicsActionsContainer\" data-dojo-attach-point=\"addGraphicsActionsContainer\">\r\n        <div class=\"graphicsListRightIcon commonIcons16 disk\" title=\"Save Graphics\"\r\n             data-bind=\"click:toggleSaveGraphics, visible:saveGraphicsIconVisible\"></div>\r\n        <div class=\"graphicsListLeftIcon commonIcons16 layerHide\" title=\"Toggle Graphics\"\r\n             data-bind=\"click:toggleAllGraphics, css:{layerShow: allGraphicsVisible}\"></div>\r\n        <div class=\"graphicsListLeftIcon commonIcons16 trash\" title=\"Remove All Graphics\"\r\n             data-dojo-attach-event=\"onclick:showConfirmRemoveAllTooltip\"\r\n             data-dojo-attach-point=\"removeAllGraphicsIcon\"\r\n                ></div>\r\n    </div>\r\n    <div class=\"saveGraphicsInputContainer\" data-bind=\"visible: saveGraphicsInputVisible\">\r\n        <input data-dojo-type=\"dijit/form/TextBox\" data-dojo-attach-event=\"onKeyUp: handleSaveGraphicsKeyUp\" data-dojo-attach-point=\"userSaveGraphicsNameInput\" placeholder=\"Enter A Label...\"/>\r\n        <span data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:handleSaveGraphics\">Save</span>\r\n    </div>\r\n\r\n    <div class=\"addedGraphicsListContainer\" data-dojo-attach-point=\"addedGraphicsListContainer\">\r\n        <ul data-dojo-attach-point=\"addedGraphicsList\" class=\"viewerList\" data-bind=\"foreach: addedGraphics\">\r\n            <li class=\"graphicsListEntry\">\r\n                <div title=\"Pan And Flash Graphic\"\r\n                     class=\"viewerListGenericIcon commonIcons16 magnifyingGlass\"\r\n                     data-bind=\"click:$parent.zoomToGraphic\"></div>\r\n                <div title=\"Remove Graphic\" class=\"viewerListEntryRemoveIcon commonIcons16 remove\"\r\n                     data-bind=\"click:$parent.removeGraphic\"></div>\r\n                <span class=\"graphicsListEntryLabel\" data-bind=\"text: $data.label\"></span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>","esriviewer/ui/toolbar/base/LocatorToolbarSupportMixin":function(){define("esriviewer/ui/toolbar/base/LocatorToolbarSupportMixin",["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/on","dojo/dom-attr","dojo/dom-construct","dojo/dom-style","../../../base/LocationSupport","dijit/TooltipDialog","dijit/form/RadioButton","esri/geometry/Extent","esri/SpatialReference"],function(_13d,_13e,lang,on,_13f,_140,_141,_142,_143,_144,_145,_146){return _13d([_142],{pointAddressAttributeLabel:"PointAddress",candidateAttributeLocationWKID:4326,constructor:function(){this.locatorLookup={};},onLocateBlur:function(){var val=_13f.get(this.locateTextBox,"value");if(val==""){_13f.set(this.locateTextBox,"value",this.locateDefaultInput);_141.set(this.locateTextBox,"color","#878787");}},initLocatorListeners:function(){on(this.locateTextBox,"blur",lang.hitch(this,this.onLocateBlur));on(this.locateTextBox,"focus",lang.hitch(this,this.onLocateFocus));on(this.locateTextBox,"keyup",lang.hitch(this,this.onLocateTextKeyUp));on(this.locateButton,"click",lang.hitch(this,this.handleLocationSearchRequest));_13e.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_ADDED,lang.hitch(this,this.handleLocatorAdded));_13e.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_REMOVED,lang.hitch(this,this.handleLocatorRemoved));},loadCurrentLocators:function(){var _147=null;_13e.publish(VIEWER_GLOBALS.EVENTS.LOCATOR.GET_LOCATORS,function(_148){_147=_148;});if(_147!=null&&lang.isArray(_147)&&_147.length>0){for(var i=0;i<_147.length;i++){this._addLocatorToLocatorConfiguration(_147[i].locator,_147[i].label);}}else{VIEWER_UTILS.log("No locators found for search",VIEWER_GLOBALS.LOG_TYPE.WARNING);_141.set(this.locateToolbarContainer,"display","none");}},handleLocatorAdded:function(_149){var _14a=_141.get(this.locateToolbarContainer,"display");if(_14a.toLowerCase()==="none"){_141.set(this.locateToolbarContainer,"display","inline");}this._addLocatorToLocatorConfiguration(_149.locator,_149.label);},_addLocatorToLocatorConfiguration:function(_14b,_14c){if(this.configureLocatorTooltip==null){this.createConfigureLocatorTooltip();}var _14d=_14b.url.toLowerCase();if(this.locatorLookup[_14d]!=null){return;}var _14e=new _144({name:"locatorConfigureRadioEntry"});var _14f=(_14c!=null&&_14c!="")?_14c:REG_EXP_UTILS.getServiceNameFromUrl(_14b.url);var _150=_140.create("span",{innerHTML:_14f,className:"locatorConfiguratioEntryLabel"});var _151=_140.create("div",{className:"locatorConfiguratioEntry"});_140.place(_14e.domNode,_151);_140.place(_150,_151);_140.place(_151,this.configureLocatorContent);_141.set(this.configureLocatorNoLocatorsText,"display","none");this.locatorLookup[_14d]={locator:_14b,container:_151,radio:_14e};var _152=0;for(var key in this.locatorLookup){_152++;}if(_152==1){_14e.set("checked","true");}},handleLocatorRemoved:function(_153){if(this.locatorLookup[_153]!=null){_140.destroy(this.locatorLookup[_153].container);delete this.locatorLookup[_153];var _154=false;for(var key in this.locatorLookup){_154=true;break;}if(_154){_141.set(this.configureLocatorNoLocatorsText,"display","none");}else{_141.set(this.configureLocatorNoLocatorsText,"display","block");}}},onLocateFocus:function(){var val=_13f.get(this.locateTextBox,"value");if(val==this.locateDefaultInput){_13f.set(this.locateTextBox,"value","");_141.set(this.locateTextBox,"color","black");}},onLocateTextKeyUp:function(e){if(VIEWER_UTILS.isEnterKey(e)){this.handleLocationSearchRequest();}},handleLocationSearchRequest:function(){var _155=_13f.get(this.locateTextBox,"value");if(_155!=null&&_155!=""&&_155!=this.locateDefaultInput){var _156;var _157;for(var key in this.locatorLookup){_156=this.locatorLookup[key];if(_156.radio.get("checked")){_157=_156;break;}}if(_157){this.handleLocate(_155,_157.locator);}}},handleLocationResponse:function(_158){if(lang.isArray(_158)&&_158.length>0){var _159=_158[0];if(lang.isObject(_159.attributes)){if(_159.attributes.North_Lat!=null&&_159.attributes.South_Lat!=null&&_159.attributes.West_Lon!=null&&_159.attributes.East_Lon!=null){try{var _15a=parseFloat(_159.attributes.West_Lon);var _15b=parseFloat(_159.attributes.South_Lat);var _15c=parseFloat(_159.attributes.East_Lon);var _15d=parseFloat(_159.attributes.North_Lat);var _15e=new _145(_15a,_15b,_15c,_15d,new _146(this.candidateAttributeLocationWKID));_13e.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,_15e);return;}catch(err){}}if(_159.attributes.MatchLevel!=null&&_159.location){var _15f=_159.attributes.MatchLevel;var _160=null;if(_15f!=null){if(_15f===this.pointAddressAttributeLabel){_160={};_160.deepest=true;}}_13e.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PAN_TO,_159.location,_160);return;}}if(_159.location!=null){_13e.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PAN_TO,_159.location);}}},createConfigureLocatorTooltip:function(){this.configureLocatorContent=_140.create("div");this.configureLocatorNoLocatorsText=_140.create("div",{className:"noLocatorsText",innerHTML:"No Locators Configured"});_140.place(this.configureLocatorNoLocatorsText,this.configureLocatorContent);this.configureLocatorTooltip=new _143({content:this.configureLocatorContent});},toggleConfigureLocatorTooltip:function(){if(!this.configureLocatorTooltipVisible){this.showConfigureLocatorTooltip();this.configureLocatorTooltipVisible=true;}else{this.hideConfigureLocatorTooltip();this.configureLocatorTooltipVisible=false;}},showConfigureLocatorTooltip:function(){if(this.configureLocatorTooltip==null){this.createConfigureLocatorTooltip();}if(this.configureLocatorTooltip){dijit.popup.open({popup:this.configureLocatorTooltip,around:this.configureLocateButton});}},hideConfigureLocatorTooltip:function(){if(this.configureLocatorTooltip){dijit.popup.close(this.configureLocatorTooltip);}}});});},"dijit/tree/ForestStoreModel":function(){define("dijit/tree/ForestStoreModel",["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(_161,_162,_163,lang,_164){return _162("dijit.tree.ForestStoreModel",_164,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(_165){this.root={store:this,root:true,id:_165.rootId,label:_165.rootLabel,children:_165.rootChildren};},mayHaveChildren:function(item){return item===this.root||this.inherited(arguments);},getChildren:function(_166,_167,_168){if(_166===this.root){if(this.root.children){_167(this.root.children);}else{this.store.fetch({query:this.query,onComplete:lang.hitch(this,function(_169){this.root.children=_169;_167(_169);}),onError:_168});}}else{this.inherited(arguments);}},isItem:function(_16a){return (_16a===this.root)?true:this.inherited(arguments);},fetchItemByIdentity:function(_16b){if(_16b.identity==this.root.id){var _16c=_16b.scope||_163.global;if(_16b.onItem){_16b.onItem.call(_16c,this.root);}}else{this.inherited(arguments);}},getIdentity:function(item){return (item===this.root)?this.root.id:this.inherited(arguments);},getLabel:function(item){return (item===this.root)?this.root.label:this.inherited(arguments);},newItem:function(args,_16d,_16e){if(_16d===this.root){this.onNewRootItem(args);return this.store.newItem(args);}else{return this.inherited(arguments);}},onNewRootItem:function(){},pasteItem:function(_16f,_170,_171,_172,_173){if(_170===this.root){if(!_172){this.onLeaveRoot(_16f);}}this.inherited(arguments,[_16f,_170===this.root?null:_170,_171===this.root?null:_171,_172,_173]);if(_171===this.root){this.onAddToRoot(_16f);}},onAddToRoot:function(item){},onLeaveRoot:function(item){},_requeryTop:function(){var _174=this.root.children||[];this.store.fetch({query:this.query,onComplete:lang.hitch(this,function(_175){this.root.children=_175;if(_174.length!=_175.length||_161.some(_174,function(item,idx){return _175[idx]!=item;})){this.onChildrenChange(this.root,_175);}})});},onNewItem:function(item,_176){this._requeryTop();this.inherited(arguments);},onDeleteItem:function(item){if(_161.indexOf(this.root.children,item)!=-1){this._requeryTop();}this.inherited(arguments);},onSetItem:function(item,_177,_178,_179){this._requeryTop();this.inherited(arguments);}});});},"dijit/PopupMenuBarItem":function(){define("dijit/PopupMenuBarItem",["dojo/_base/declare","./PopupMenuItem","./MenuBarItem"],function(_17a,_17b,_17c){var _17d=_17c._MenuBarItemMixin;return _17a("dijit.PopupMenuBarItem",[_17b,_17d],{});});},"url:esriviewer/ui/header/template/HeaderLogoTemplate.html":"<div class=\"logoHeaderContainer defaultBoxShadow defaultTransparentBackground defaultBorder fourPixelBorderRadius\">\r\n    <img alt=\"header logo\" data-bind=\"visible: showHeaderIcon, attr:{ src: headerIconUrl, alt:headerMainText}\"  class='headerLogoIcon'>\r\n    <span class=\"headerMainText\" data-bind=\"text: headerMainText\"></span>\r\n    <div class=\"logolinks\">\r\n        <a data-bind=\"attr:{href: contactUrl},text: contactText\" target=\"_blank\" title=\"Opens in a new window.\"></a>\r\n        <span class=\"headerLogoLinksSpace\">|</span>\r\n        <a data-bind=\"attr:{href: helpUrl}, text: helpText\" target=\"_blank\" title=\"Opens in a new window.\"></a>\r\n    </div>\r\n</div>","url:dijit/layout/templates/AccordionButton.html":"<div data-dojo-attach-event='onclick:_onTitleClick' class='dijitAccordionTitle' role=\"presentation\">\n\t<div data-dojo-attach-point='titleNode,focusNode' data-dojo-attach-event='onkeypress:_onTitleKeyPress'\n\t\t\tclass='dijitAccordionTitleFocus' role=\"tab\" aria-expanded=\"false\"\n\t\t><span class='dijitInline dijitAccordionArrow' role=\"presentation\"></span\n\t\t><span class='arrowTextUp' role=\"presentation\">+</span\n\t\t><span class='arrowTextDown' role=\"presentation\">-</span\n\t\t><img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon\" data-dojo-attach-point='iconNode' style=\"vertical-align: middle\" role=\"presentation\"/>\n\t\t<span role=\"presentation\" data-dojo-attach-point='titleTextNode' class='dijitAccordionText'></span>\n\t</div>\n</div>\n","esriviewer/ui/draw/base/model/GraphicsListViewModel":function(){define("esriviewer/ui/draw/base/model/GraphicsListViewModel",["dojo/_base/declare","dojo/topic","dojo/Evented"],function(_17e,_17f,_180){return _17e([_180],{REMOVE_GRAPHIC:"removeGraphic",REMOVE_ALL_GRAPHICS:"removeAllGraphics",constructor:function(){var self=this;this.saveGraphicsIconVisible=ko.observable(false);this.saveGraphicsInputVisible=ko.observable(false);this.allGraphicsVisible=ko.observable(true);this.addedGraphics=ko.observableArray();var _181=function(){return self.addedGraphics().length>0;};this.hasGraphics=ko.computed(_181);this.removeGraphic=function(_182){if(_182==null){return;}self.emit(self.REMOVE_GRAPHIC,_182.graphic);self.addedGraphics.remove(_182);};this.zoomToGraphic=function(_183){_17f.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.CENTER_AND_FLASH,_183.graphic);};},removeAllGraphics:function(){var _184=this.addedGraphics();this.emit(this.REMOVE_ALL_GRAPHICS);for(var i=0;i<_184.length;i++){}this.addedGraphics.removeAll();},toggleAllGraphics:function(){var _185=this.addedGraphics();var i;if(!this.allGraphicsVisible()){for(i=0;i<_185.length;i++){_185[i].graphic.show();}this.allGraphicsVisible(true);}else{for(i=0;i<_185.length;i++){_185[i].graphic.hide();}this.allGraphicsVisible(false);}},toggleSaveGraphics:function(){this.saveGraphicsInputVisible(!this.saveGraphicsInputVisible());}});});},"esriviewer/ui/draw/configure/geometry/ConfigurePointWidget":function(){require({cache:{"url:esriviewer/ui/draw/configure/geometry/template/ConfigurePointTemplate.html":"<div class=\"configureDrawGeometryContainer\">\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Marker Style</span>\r\n        <select data-bind=\"options: markerStyles ,value:selectedMarkerStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Marker Size</span>\r\n        <select data-bind=\"options: markerSizes ,value:selectedMarkerSize\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Outline Style</span>\r\n        <select data-bind=\"options: outlineStyles ,value:selectedOutlineStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Outline Width</span>\r\n        <select data-bind=\"options: outlineWidths ,value:selectedOutlineWidth\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Angle</span>\r\n        <select data-bind=\"options: angles ,value:selectedAngle\"></select>\r\n    </div>\r\n    <div data-dojo-attach-point=\"transparencySliderContainer\"></div>\r\n    <div class=\"colorPickerTextContainer\">\r\n        <span class=\"colorPickerText\"\r\n              data-bind=\"click: setMarkerColorMode,css:{colorPickerTextSelected: markerColorActive}\"> Marker Color</span>\r\n        <span class=\"colorPickerText\"\r\n              data-bind=\"click: setOutlineColorMode,css:{colorPickerTextSelected: outlineColorActive}\"> Outline Color</span>\r\n\r\n    </div>\r\n\r\n    <div class=\"configureDrawColorPickerContainer\" data-dojo-attach-point=\"colorPickerContainer\"></div>\r\n</div>"}});define("esriviewer/ui/draw/configure/geometry/ConfigurePointWidget",["dojo/_base/declare","dojo/text!./template/ConfigurePointTemplate.html","dojo/_base/Color","dojo/topic","dojo/_base/lang","./model/ConfigurePointViewModel","./BaseGeometryConfigurationWidget","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol"],function(_186,_187,_188,_189,lang,_18a,_18b,_18c,_18d){return _186([_18b],{templateString:_187,postCreate:function(){this.inherited(arguments);this.viewModel=new _18a();this.viewModel.selectedMarkerStyle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedMarkerSize.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedAngle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedOutlineWidth.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedOutlineStyle.subscribe(lang.hitch(this,this.processChange));this.viewModel.markerColorActive.subscribe(lang.hitch(this,this.handleMarkerColorToggled));this.markerColor=new _188([255,0,0,this.getTransparency()/100]);this.outlineColor=new _188([255,0,0,this.getTransparency()/100]);this.colorPicker.set("value",this.markerColor.toHex());ko.applyBindings(this.viewModel,this.domNode);},handleTransparencyChanged:function(){var _18e=this.getTransparency()/100;this.outlineColor=new _188([this.outlineColor.r,this.outlineColor.g,this.outlineColor.b,_18e]);this.markerColor=new _188([this.markerColor.r,this.markerColor.g,this.markerColor.b,_18e]);this.inherited(arguments);},handleMarkerColorToggled:function(_18f){if(_18f){this.colorPicker.set("value",this.markerColor.toHex());}else{this.colorPicker.set("value",this.outlineColor.toHex());}},handleColorPickerChanged:function(){if(this.viewModel.outlineColorActive()){this.outlineColor=this.getColor();}else{this.markerColor=this.getColor();}this.processChange();},processChange:function(){this.onChange(this.getSymbol());},getSymbol:function(){return new _18c(this.viewModel.selectedMarkerStyle(),parseInt(this.viewModel.selectedMarkerSize(),10),new _18d(this.viewModel.selectedOutlineStyle(),this.outlineColor,this.viewModel.selectedOutlineWidth()),this.markerColor).setAngle(this.viewModel.selectedAngle());}});});},"esriviewer/ui/draw/configure/geometry/model/ConfigurePointViewModel":function(){define("esriviewer/ui/draw/configure/geometry/model/ConfigurePointViewModel",["dojo/_base/declare","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol"],function(_190,_191,_192){return _190([],{pointColorTypes:{outline:"outline",fill:"fill"},markerStyles:ko.observableArray([{value:_191.STYLE_CIRCLE,label:"Circle"},{value:_191.STYLE_CROSS,label:"Cross"},{value:_191.STYLE_DIAMOND,label:"Diamond"},{value:_191.STYLE_SQUARE,label:"Square"},{value:_191.STYLE_X,label:"X"}]),outlineStyles:ko.observableArray([{value:_192.STYLE_DASH,label:"Dashed Line"},{value:_192.STYLE_DASHDOT,label:"Dash Dot Line"},{value:_192.STYLE_DASHDOTDOT,label:"Dash Dot Dot Line"},{value:_192.STYLE_DOT,label:"Dotted Line"},{value:_192.STYLE_SOLID,label:"Solid Line"},{value:_192.STYLE_NULL,label:"None"}]),markerSizes:ko.observableArray([1,2,3,4,5,6,7,8,9,10,15,20,25,30,40,50,75]),outlineWidths:ko.observableArray([1,2,3,4,5,6,7,8,9,10]),angles:ko.observableArray([0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85]),constructor:function(){this.selectedMarkerStyle=ko.observable(_191.STYLE_CIRCLE);this.selectedMarkerSize=ko.observable(10);this.selectedAngle=ko.observable(0);this.selectedOutlineStyle=ko.observable(_192.STYLE_SOLID);this.selectedOutlineWidth=ko.observable(1);this.markerColorActive=ko.observable(true);this.outlineColorActive=ko.observable(false);},setOutlineColorMode:function(){this.outlineColorActive(true);this.markerColorActive(false);},setMarkerColorMode:function(){this.outlineColorActive(false);this.markerColorActive(true);}});});},"dojo/dnd/Manager":function(){define("dojo/dnd/Manager",["../_base/array","../_base/declare","../_base/event","../_base/lang","../_base/window","../dom-class","../Evented","../has","../keys","../on","../topic","../touch","./common","./autoscroll","./Avatar"],function(_193,_194,_195,lang,win,_196,_197,has,keys,on,_198,_199,dnd,_19a,_19b){var _19c=_194("dojo.dnd.Manager",[_197],{constructor:function(){this.avatar=null;this.source=null;this.nodes=[];this.copy=true;this.target=null;this.canDropFlag=false;this.events=[];},OFFSET_X:has("touch")?0:16,OFFSET_Y:has("touch")?-64:16,overSource:function(_19d){if(this.avatar){this.target=(_19d&&_19d.targetState!="Disabled")?_19d:null;this.canDropFlag=Boolean(this.target);this.avatar.update();}_198.publish("/dnd/source/over",_19d);},outSource:function(_19e){if(this.avatar){if(this.target==_19e){this.target=null;this.canDropFlag=false;this.avatar.update();_198.publish("/dnd/source/over",null);}}else{_198.publish("/dnd/source/over",null);}},startDrag:function(_19f,_1a0,copy){_19a.autoScrollStart(win.doc);this.source=_19f;this.nodes=_1a0;this.copy=Boolean(copy);this.avatar=this.makeAvatar();win.body().appendChild(this.avatar.node);_198.publish("/dnd/start",_19f,_1a0,this.copy);this.events=[on(win.doc,_199.move,lang.hitch(this,"onMouseMove")),on(win.doc,_199.release,lang.hitch(this,"onMouseUp")),on(win.doc,"keydown",lang.hitch(this,"onKeyDown")),on(win.doc,"keyup",lang.hitch(this,"onKeyUp")),on(win.doc,"dragstart",_195.stop),on(win.body(),"selectstart",_195.stop)];var c="dojoDnd"+(copy?"Copy":"Move");_196.add(win.body(),c);},canDrop:function(flag){var _1a1=Boolean(this.target&&flag);if(this.canDropFlag!=_1a1){this.canDropFlag=_1a1;this.avatar.update();}},stopDrag:function(){_196.remove(win.body(),["dojoDndCopy","dojoDndMove"]);_193.forEach(this.events,function(_1a2){_1a2.remove();});this.events=[];this.avatar.destroy();this.avatar=null;this.source=this.target=null;this.nodes=[];},makeAvatar:function(){return new _19b(this);},updateAvatar:function(){this.avatar.update();},onMouseMove:function(e){var a=this.avatar;if(a){_19a.autoScrollNodes(e);var s=a.node.style;s.left=(e.pageX+this.OFFSET_X)+"px";s.top=(e.pageY+this.OFFSET_Y)+"px";var copy=Boolean(this.source.copyState(dnd.getCopyKeyState(e)));if(this.copy!=copy){this._setCopyStatus(copy);}}if(has("touch")){e.preventDefault();}},onMouseUp:function(e){if(this.avatar){if(this.target&&this.canDropFlag){var copy=Boolean(this.source.copyState(dnd.getCopyKeyState(e)));_198.publish("/dnd/drop/before",this.source,this.nodes,copy,this.target,e);_198.publish("/dnd/drop",this.source,this.nodes,copy,this.target,e);}else{_198.publish("/dnd/cancel");}this.stopDrag();}},onKeyDown:function(e){if(this.avatar){switch(e.keyCode){case keys.CTRL:var copy=Boolean(this.source.copyState(true));if(this.copy!=copy){this._setCopyStatus(copy);}break;case keys.ESCAPE:_198.publish("/dnd/cancel");this.stopDrag();break;}}},onKeyUp:function(e){if(this.avatar&&e.keyCode==keys.CTRL){var copy=Boolean(this.source.copyState(false));if(this.copy!=copy){this._setCopyStatus(copy);}}},_setCopyStatus:function(copy){this.copy=copy;this.source._markDndStatus(this.copy);this.updateAvatar();_196.replace(win.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"));}});dnd._manager=null;_19c.manager=dnd.manager=function(){if(!dnd._manager){dnd._manager=new _19c();}return dnd._manager;};return _19c;});},"esriviewer/ui/bookmark/CreateBookmarkWidget":function(){require({cache:{"url:esriviewer/ui/bookmark/template/CreateBookmarkTemplate.html":"<div class=\"createBookmarkWindow fivePixelBorderRadius defaultBorder defaultBoxShadow\">\r\n    <div class=\"createBookmarkHeader\">\r\n    </div>\r\n    <div class=\"createBookmarkContent\">\r\n        <div class=\"createBookmarkLabelEntry createBookmarkEntry\">\r\n            <span class=\"createBookmarkLabel\">Label:</span>\r\n            <div data-dojo-type=\"dijit/form/TextBox\" data-dojo-attach-event=\"onKeyUp: onBookmarkLabelKeyUp\" data-dojo-attach-point=\"bookmarkLabelElement\"></div>\r\n        </div>\r\n    </div>\r\n    <div class=\"createBookmarkActionsContent\">\r\n        <span data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:hide\" class=\"createBookmarkButton\">Cancel</span>\r\n        <span data-dojo-type=\"dijit/form/Button\" class=\"createBookmarkButton\" data-dojo-attach-event=\"onClick:createBookmark\">Create</span>\r\n    </div>\r\n</div>"}});define("esriviewer/ui/bookmark/CreateBookmarkWidget",["dojo/_base/declare","dojo/text!./template/CreateBookmarkTemplate.html","dojo/topic","../base/UITemplatedWidget","dojo/dom-style","dojo/dom-class","dijit/form/TextBox","dijit/form/Button"],function(_1a3,_1a4,_1a5,_1a6,_1a7,_1a8,_1a9,_1aa){return _1a3([_1a6],{templateString:_1a4,postCreate:function(){this.inherited(arguments);this.hide();},show:function(){_1a8.remove(this.domNode,"createBookmarkWindowHidden");this.bookmarkLabelElement.focus();},hide:function(){_1a8.add(this.domNode,"createBookmarkWindowHidden");this.bookmarkLabelElement.set("value","");},onBookmarkLabelKeyUp:function(e){if(VIEWER_UTILS.isEnterKey(e)){this.createBookmark();}},createBookmark:function(){var _1ab=this.bookmarkLabelElement.get("value");if(_1ab==""){return;}var _1ac;var _1ad;_1a5.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_CENTER,function(_1ae){_1ac=_1ae;});_1a5.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_LEVEL,function(_1af){_1ad=_1af;});var _1b0={x:_1ac.x,y:_1ac.y,spatialReference:{wkid:_1ac.spatialReference.wkid}};var id=VIEWER_UTILS.generateUUID();var _1b1={label:_1ab,zoomLevel:_1ad,point:_1b0};var _1b2={};_1b2[id]=_1b1;VIEWER_UTILS.log("Bookmark Created: "+_1ab,VIEWER_GLOBALS.LOG_TYPE.INFO);_1a5.publish(VIEWER_GLOBALS.EVENTS.BOOKMARK.CREATED,_1b2);this.hide();}});});},"esriviewer/ui/print/PrintWidgetWindow":function(){define("esriviewer/ui/print/PrintWidgetWindow",["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/window","dojo/dom-style","../window/WindowWidget"],function(_1b3,lang,_1b4,_1b5,_1b6,_1b7){return _1b3([_1b7],{defaultPositioning:{x:500,y:125},windowWidth:"300px",windowHeaderText:"Print",windowIconAltText:"Print",windowIconClass:"commonIcons16 print",positioningParamName:"print",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/print/PrintWidget"],lang.hitch(this,function(_1b8){this.printWidget=new _1b8();this.setContent(this.printWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_1b4.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PRINT.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_1b4.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PRINT.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_1b4.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PRINT.TOGGLE,lang.hitch(this,this.toggle)));}});});},"url:esriviewer/ui/navigation/template/NavigationWidgetTemplate.html":"<div data-bind=\"visible: visible\" class=\"navigationHorizontalWidgetContainer\">\r\n    <div class=\"navigationTextToolbarHorizontal\">\r\n        <div class=\"navigationTextToolbarHorizontalInner\" data-dojo-attach-point=\"navigationToolbar\">\r\n        </div>\r\n    </div>\r\n</div>\r\n","esriviewer/manager/base/WebMapTemplateConfigurationUtil":function(){define("esriviewer/manager/base/WebMapTemplateConfigurationUtil",["dojo/_base/declare","dojo/_base/lang","dojo/Deferred","esri/request","dojo/_base/array","../../base/DataLoaderSupport","esri/arcgis/utils"],function(_1b9,lang,_1ba,_1bb,_1bc,_1bd,_1be){return _1b9([_1bd],{showOverviewParameter:"showOverview",showLegendParameter:"showLegend",showHeaderParameter:"showHeader",headerTextParameter:"headerText",helpLinkParameter:"helpUrl",contactUsParameter:"contactUsUrl",ignoreProcessingConfigurationEntries:["webmap","geometryServiceUrl","locators","baseViewer","showOverview","showLegend"],appConfigToViewerWindowWidgetConfigLookup:{logging:"logging"},appConfigToViewerWidgetConfigLookup:{drawWidget:"drawWidget",reverseGeocodeWidget:"reverseGeocodeWidget",portalSearchWidget:"portalSearchWidget",reflectivityWidget:"reflectivityWidget",zoomToWidget:"zoomToWidget",timeSliderWidget:"timeSliderWidget",identifyWidget:"identifyWidget",configureWidget:"configureWidget",measureWidget:"measureWidget",socialMediaWidget:"socialMediaWidget",printWidget:"printWidget",weatherWidget:"weatherWidget"},defaultConfigFile:"config/portal/config.json",constructor:function(){this.init();},init:function(){},loadConfiguration:function(_1bf){this.appId=_1bf;this.deferred=new _1ba();this._loadDefaultConfiguration();return this.deferred.promise;},_loadDefaultConfiguration:function(){this.loadJson(this.defaultConfigFile,lang.hitch(this,this._handleDefaultConfigurationLoaded),lang.hitch(this,this._handleDefaultConfigurationLoadError));},_loadTemplateConfiguration:function(){var _1c0=_1bb({url:_1be.arcgisUrl+"/"+this.appId+"/data",content:{f:"json"},callbackParamName:"callback",load:lang.hitch(this,this.handleTemplateResponse)});},handleTemplateResponse:function(_1c1){this.templateResponse=_1c1;this.appConfig={};for(var key in _1c1.values){if(_1c1.values[key]!==undefined){this.appConfig[key]=_1c1.values[key];}}this._loadWebMapItem(this.appConfig.webmap);},_loadWebMapItem:function(_1c2){_1be.getItem(_1c2).then(lang.hitch(this,this.handleWebMapItemLoaded));},handleWebMapItemLoaded:function(_1c3){this.webMapItem=_1c3;var _1c4=lang.mixin(this.defaultConfiguration.values,this.appConfig);this.viewerConfiguration=this._applicationConfigurationToViewerConfiguration(_1c4);this.viewerConfiguration.webMapItem=this.webMapItem;this.handleWebMapConfigurationComplete();},_handleDefaultConfigurationLoaded:function(_1c5){this.defaultConfiguration=_1c5;this.portalUrl=this.defaultConfiguration.values.portalConfiguration.url;_1be.arcgisUrl=VIEWER_UTILS.joinUrl(this.portalUrl,this.defaultConfiguration.values.portalConfiguration.itemsPath);this._loadTemplateConfiguration();},handleWebMapConfigurationComplete:function(){this.finalizeLoad();},finalizeLoad:function(){this.deferred.resolve(this.viewerConfiguration);},_handleDefaultConfigurationLoadError:function(){alert("Could not load default configuration");},_applicationConfigurationToViewerConfiguration:function(_1c6){var _1c7={small:true,display:true,headerText:"Mapping Application",headerImage:"images/logoSmall.png",contact:{label:"Contact Us",url:"http://www.esri.com/about-esri/contact"},help:{label:"Help",url:"http://support.esri.com/en/"}};var _1c8={webMapItem:_1c6.webmap,header:_1c7};for(var key in _1c6){if(_1bc.indexOf(this.ignoreProcessingConfigurationEntries,key)>-1){continue;}else{if(key===this.showHeaderParameter){_1c8.header.display=_1c6[key];}else{if(key===this.headerTextParameter){_1c8.header.headerText=_1c6[key];}else{if(key===this.helpLinkParameter){_1c8.header.contact.url=_1c6[key];}else{if(key===this.contactUsParameter){_1c8.header.help.url=_1c6[key];}else{if(this.appConfigToViewerWidgetConfigLookup[key]){_1c8[key]={create:_1c6[key]};}else{if(this.appConfigToViewerWindowWidgetConfigLookup[key]){_1c8[key]={window:{create:_1c6[key]}};}else{_1c8[key]={create:false};}}}}}}}}this._applyWebMappingApplicationDefaults(_1c6,_1c8);return _1c8;},_applyWebMappingApplicationDefaults:function(_1c9,_1ca){var _1cb=_1c9[this.showOverviewParameter]!=null&&_1c9[this.showOverviewParameter];var _1cc=_1c9[this.showLegendParameter]!=null&&_1c9[this.showLegendParameter];_1ca.map={overview:{create:_1cb},useBasemapGallery:true,legend:{create:_1cc}};_1ca.toolsBar={showToolsDropdown:true,showLayersButton:true,showConfigureLocatorsIcon:false,showBookmarksButton:true};_1ca.toolsAccordion={create:false};if(this.portalUrl){_1ca.portal={url:this.portalUrl};}if(_1c9.geometryServiceUrl){_1ca.geometryServiceUrl=_1c9.geometryServiceUrl;}if(_1c9.locators){_1ca.locators=_1c9.locators;}var _1cd=_1ca[this.appConfigToViewerWidgetConfigLookup.socialMediaWidget];if(_1cd){if(_1cd.create){_1cd.configurationUrl=this.defaultConfiguration.values.baseViewer.socialMediaWidgetConfiguration.configurationUrl;}}var _1ce=_1ca[this.appConfigToViewerWidgetConfigLookup.weatherWidget];if(_1ce){if(_1ce.create){_1ce.configurationUrl=this.defaultConfiguration.values.baseViewer.weatherWidgetConfiguration.configurationUrl;}}var _1cf=_1ca[this.appConfigToViewerWidgetConfigLookup.printWidget];if(_1cf){if(_1cf.create){_1cf.printTaskUrl=this.defaultConfiguration.values.baseViewer.printWidgetConfiguration.printTaskUrl;}}var _1d0=_1ca[this.appConfigToViewerWidgetConfigLookup.zoomToWidget];if(_1d0){if(_1d0.create){_1d0.stateJson=this.defaultConfiguration.values.baseViewer.zoomToWidgetConfiguration.stateJson;_1d0.countyJson=this.defaultConfiguration.values.baseViewer.zoomToWidgetConfiguration.countyJson;}}}});});},"dojox/storage/BehaviorStorageProvider":function(){define("dojox/storage/BehaviorStorageProvider",["dijit","dojo","dojox","dojo/require!dojox/storage/Provider,dojox/storage/manager"],function(_1d1,dojo,_1d2){dojo.provide("dojox.storage.BehaviorStorageProvider");dojo.require("dojox.storage.Provider");dojo.require("dojox.storage.manager");dojo.declare("dojox.storage.BehaviorStorageProvider",[_1d2.storage.Provider],{store:null,storeName:"__dojox_BehaviorStorage",keys:[],initialize:function(){try{this.store=this._createStore();this.store.load(this.storeName);}catch(e){throw new Error("Store is not available: "+e);}var keys=this.get("keys","dojoxSystemNS");this.keys=keys||[];this.initialized=true;_1d2.storage.manager.loaded();},isAvailable:function(){return dojo.isIE&&dojo.isIE>=5;},_createStore:function(){var _1d3=dojo.create("link",{id:this.storeName+"Node",style:{"display":"none"}},dojo.query("head")[0]);_1d3.addBehavior("#default#userdata");return _1d3;},put:function(key,_1d4,_1d5,_1d6){this._assertIsValidKey(key);_1d6=_1d6||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_1d6);var _1d7=this.getFullKey(key,_1d6);_1d4=dojo.toJson(_1d4);this.store.setAttribute(_1d7,_1d4);this.store.save(this.storeName);var _1d8=this.store.getAttribute(_1d7)===_1d4;if(_1d8){this._addKey(_1d7);this.store.setAttribute("__dojoxSystemNS_keys",dojo.toJson(this.keys));this.store.save(this.storeName);}if(_1d5){_1d5(_1d8?this.SUCCESS:this.FAILED,key,null,_1d6);}},get:function(key,_1d9){this._assertIsValidKey(key);_1d9=_1d9||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_1d9);key=this.getFullKey(key,_1d9);return dojo.fromJson(this.store.getAttribute(key));},getKeys:function(_1da){_1da=_1da||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_1da);_1da="__"+_1da+"_";var keys=[];for(var i=0;i<this.keys.length;i++){var _1db=this.keys[i];if(this._beginsWith(_1db,_1da)){_1db=_1db.substring(_1da.length);keys.push(_1db);}}return keys;},clear:function(_1dc){_1dc=_1dc||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_1dc);_1dc="__"+_1dc+"_";var keys=[];for(var i=0;i<this.keys.length;i++){var _1dd=this.keys[i];if(this._beginsWith(_1dd,_1dc)){keys.push(_1dd);}}dojo.forEach(keys,function(key){this.store.removeAttribute(key);this._removeKey(key);},this);this.put("keys",this.keys,null,"dojoxSystemNS");this.store.save(this.storeName);},remove:function(key,_1de){this._assertIsValidKey(key);_1de=_1de||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_1de);key=this.getFullKey(key,_1de);this.store.removeAttribute(key);this._removeKey(key);this.put("keys",this.keys,null,"dojoxSystemNS");this.store.save(this.storeName);},getNamespaces:function(){var _1df=[this.DEFAULT_NAMESPACE];var _1e0={};_1e0[this.DEFAULT_NAMESPACE]=true;var _1e1=/^__([^_]*)_/;for(var i=0;i<this.keys.length;i++){var _1e2=this.keys[i];if(_1e1.test(_1e2)==true){var _1e3=_1e2.match(_1e1)[1];if(typeof _1e0[_1e3]=="undefined"){_1e0[_1e3]=true;_1df.push(_1e3);}}}return _1df;},isPermanent:function(){return true;},getMaximumSize:function(){return 64;},hasSettingsUI:function(){return false;},isValidKey:function(_1e4){if(_1e4===null||_1e4===undefined){return false;}return /^[0-9A-Za-z_-]*$/.test(_1e4);},isValidNamespace:function(_1e5){if(_1e5===null||_1e5===undefined){return false;}return /^[0-9A-Za-z-]*$/.test(_1e5);},getFullKey:function(key,_1e6){return "__"+_1e6+"_"+key;},_beginsWith:function(_1e7,_1e8){if(_1e8.length>_1e7.length){return false;}return _1e7.substring(0,_1e8.length)===_1e8;},_assertIsValidNamespace:function(_1e9){if(this.isValidNamespace(_1e9)===false){throw new Error("Invalid namespace given: "+_1e9);}},_assertIsValidKey:function(key){if(this.isValidKey(key)===false){throw new Error("Invalid key given: "+key);}},_addKey:function(key){this._removeKey(key);this.keys.push(key);},_removeKey:function(key){this.keys=dojo.filter(this.keys,function(item){return item!==key;},this);}});_1d2.storage.manager.register("dojox.storage.BehaviorStorageProvider",new _1d2.storage.BehaviorStorageProvider());});},"dijit/layout/AccordionContainer":function(){require({cache:{"url:dijit/layout/templates/AccordionButton.html":"<div data-dojo-attach-event='onclick:_onTitleClick' class='dijitAccordionTitle' role=\"presentation\">\n\t<div data-dojo-attach-point='titleNode,focusNode' data-dojo-attach-event='onkeypress:_onTitleKeyPress'\n\t\t\tclass='dijitAccordionTitleFocus' role=\"tab\" aria-expanded=\"false\"\n\t\t><span class='dijitInline dijitAccordionArrow' role=\"presentation\"></span\n\t\t><span class='arrowTextUp' role=\"presentation\">+</span\n\t\t><span class='arrowTextDown' role=\"presentation\">-</span\n\t\t><img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon\" data-dojo-attach-point='iconNode' style=\"vertical-align: middle\" role=\"presentation\"/>\n\t\t<span role=\"presentation\" data-dojo-attach-point='titleTextNode' class='dijitAccordionText'></span>\n\t</div>\n</div>\n"}});define("dijit/layout/AccordionContainer",["require","dojo/_base/array","dojo/_base/declare","dojo/_base/event","dojo/_base/fx","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/topic","../focus","../_base/manager","dojo/ready","../_Widget","../_Container","../_TemplatedMixin","../_CssStateMixin","./StackContainer","./ContentPane","dojo/text!./templates/AccordionButton.html"],function(_1ea,_1eb,_1ec,_1ed,fx,dom,_1ee,_1ef,_1f0,_1f1,keys,lang,has,_1f2,_1f3,_1f4,_1f5,_1f6,_1f7,_1f8,_1f9,_1fa,_1fb,_1fc){var _1fd=_1ec("dijit.layout._AccordionButton",[_1f6,_1f8,_1f9],{templateString:_1fc,label:"",_setLabelAttr:{node:"titleTextNode",type:"innerHTML"},title:"",_setTitleAttr:{node:"titleTextNode",type:"attribute",attribute:"title"},iconClassAttr:"",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitAccordionTitle",getParent:function(){return this.parent;},buildRendering:function(){this.inherited(arguments);var _1fe=this.id.replace(" ","_");_1ee.set(this.titleTextNode,"id",_1fe+"_title");this.focusNode.setAttribute("aria-labelledby",_1ee.get(this.titleTextNode,"id"));dom.setSelectable(this.domNode,false);},getTitleHeight:function(){return _1f1.getMarginSize(this.domNode).h;},_onTitleClick:function(){var _1ff=this.getParent();_1ff.selectChild(this.contentWidget,true);_1f3.focus(this.focusNode);},_onTitleKeyPress:function(evt){return this.getParent()._onKeyPress(evt,this.contentWidget);},_setSelectedAttr:function(_200){this._set("selected",_200);this.focusNode.setAttribute("aria-expanded",_200?"true":"false");this.focusNode.setAttribute("aria-selected",_200?"true":"false");this.focusNode.setAttribute("tabIndex",_200?"0":"-1");}});var _201=_1ec("dijit.layout._AccordionInnerContainer",[_1f6,_1f9],{baseClass:"dijitAccordionInnerContainer",isLayoutContainer:true,buildRendering:function(){this.domNode=_1f0.place("<div class='"+this.baseClass+"' role='presentation'>",this.contentWidget.domNode,"after");var _202=this.contentWidget,cls=lang.isString(this.buttonWidget)?lang.getObject(this.buttonWidget):this.buttonWidget;this.button=_202._buttonWidget=(new cls({contentWidget:_202,label:_202.title,title:_202.tooltip,dir:_202.dir,lang:_202.lang,textDir:_202.textDir,iconClass:_202.iconClass,id:_202.id+"_button",parent:this.parent})).placeAt(this.domNode);this.containerNode=_1f0.place("<div class='dijitAccordionChildWrapper' style='display:none'>",this.domNode);_1f0.place(this.contentWidget.domNode,this.containerNode);},postCreate:function(){this.inherited(arguments);var _203=this.button;this._contentWidgetWatches=[this.contentWidget.watch("title",lang.hitch(this,function(name,_204,_205){_203.set("label",_205);})),this.contentWidget.watch("tooltip",lang.hitch(this,function(name,_206,_207){_203.set("title",_207);})),this.contentWidget.watch("iconClass",lang.hitch(this,function(name,_208,_209){_203.set("iconClass",_209);}))];},_setSelectedAttr:function(_20a){this._set("selected",_20a);this.button.set("selected",_20a);if(_20a){var cw=this.contentWidget;if(cw.onSelected){cw.onSelected();}}},startup:function(){this.contentWidget.startup();},destroy:function(){this.button.destroyRecursive();_1eb.forEach(this._contentWidgetWatches||[],function(w){w.unwatch();});delete this.contentWidget._buttonWidget;delete this.contentWidget._wrapperWidget;this.inherited(arguments);},destroyDescendants:function(_20b){this.contentWidget.destroyRecursive(_20b);}});var _20c=_1ec("dijit.layout.AccordionContainer",_1fa,{duration:_1f4.defaultDuration,buttonWidget:_1fd,baseClass:"dijitAccordionContainer",buildRendering:function(){this.inherited(arguments);this.domNode.style.overflow="hidden";this.domNode.setAttribute("role","tablist");},startup:function(){if(this._started){return;}this.inherited(arguments);if(this.selectedChildWidget){this.selectedChildWidget._wrapperWidget.set("selected",true);}},layout:function(){var _20d=this.selectedChildWidget;if(!_20d){return;}var _20e=_20d._wrapperWidget.domNode,_20f=_1f1.getMarginExtents(_20e),_210=_1f1.getPadBorderExtents(_20e),_211=_20d._wrapperWidget.containerNode,_212=_1f1.getMarginExtents(_211),_213=_1f1.getPadBorderExtents(_211),_214=this._contentBox;var _215=0;_1eb.forEach(this.getChildren(),function(_216){if(_216!=_20d){_215+=_1f1.getMarginSize(_216._wrapperWidget.domNode).h;}});this._verticalSpace=_214.h-_215-_20f.h-_210.h-_212.h-_213.h-_20d._buttonWidget.getTitleHeight();this._containerContentBox={h:this._verticalSpace,w:this._contentBox.w-_20f.w-_210.w-_212.w-_213.w};if(_20d){_20d.resize(this._containerContentBox);}},_setupChild:function(_217){_217._wrapperWidget=_201({contentWidget:_217,buttonWidget:this.buttonWidget,id:_217.id+"_wrapper",dir:_217.dir,lang:_217.lang,textDir:_217.textDir,parent:this});this.inherited(arguments);},addChild:function(_218,_219){if(this._started){var _21a=this.containerNode;if(_219&&typeof _219=="number"){var _21b=_1f6.prototype.getChildren.call(this);if(_21b&&_21b.length>=_219){_21a=_21b[_219-1].domNode;_219="after";}}_1f0.place(_218.domNode,_21a,_219);if(!_218._started){_218.startup();}this._setupChild(_218);_1f2.publish(this.id+"-addChild",_218,_219);this.layout();if(!this.selectedChildWidget){this.selectChild(_218);}}else{this.inherited(arguments);}},removeChild:function(_21c){if(_21c._wrapperWidget){_1f0.place(_21c.domNode,_21c._wrapperWidget.domNode,"after");_21c._wrapperWidget.destroy();delete _21c._wrapperWidget;}_1ef.remove(_21c.domNode,"dijitHidden");this.inherited(arguments);},getChildren:function(){return _1eb.map(this.inherited(arguments),function(_21d){return _21d.declaredClass=="dijit.layout._AccordionInnerContainer"?_21d.contentWidget:_21d;},this);},destroy:function(){if(this._animation){this._animation.stop();}_1eb.forEach(this.getChildren(),function(_21e){if(_21e._wrapperWidget){_21e._wrapperWidget.destroy();}else{_21e.destroyRecursive();}});this.inherited(arguments);},_showChild:function(_21f){_21f._wrapperWidget.containerNode.style.display="block";return this.inherited(arguments);},_hideChild:function(_220){_220._wrapperWidget.containerNode.style.display="none";this.inherited(arguments);},_transition:function(_221,_222,_223){if(has("ie")<8){_223=false;}if(this._animation){this._animation.stop(true);delete this._animation;}var self=this;if(_221){_221._wrapperWidget.set("selected",true);var d=this._showChild(_221);if(this.doLayout&&_221.resize){_221.resize(this._containerContentBox);}}if(_222){_222._wrapperWidget.set("selected",false);if(!_223){this._hideChild(_222);}}if(_223){var _224=_221._wrapperWidget.containerNode,_225=_222._wrapperWidget.containerNode;var _226=_221._wrapperWidget.containerNode,_227=_1f1.getMarginExtents(_226),_228=_1f1.getPadBorderExtents(_226),_229=_227.h+_228.h;_225.style.height=(self._verticalSpace-_229)+"px";this._animation=new fx.Animation({node:_224,duration:this.duration,curve:[1,this._verticalSpace-_229-1],onAnimate:function(_22a){_22a=Math.floor(_22a);_224.style.height=_22a+"px";_225.style.height=(self._verticalSpace-_229-_22a)+"px";},onEnd:function(){delete self._animation;_224.style.height="auto";_222._wrapperWidget.containerNode.style.display="none";_225.style.height="auto";self._hideChild(_222);}});this._animation.onStop=this._animation.onEnd;this._animation.play();}return d;},_onKeyPress:function(e,_22b){if(this.disabled||e.altKey||!(_22b||e.ctrlKey)){return;}var c=e.charOrCode;if((_22b&&(c==keys.LEFT_ARROW||c==keys.UP_ARROW))||(e.ctrlKey&&c==keys.PAGE_UP)){this._adjacent(false)._buttonWidget._onTitleClick();_1ed.stop(e);}else{if((_22b&&(c==keys.RIGHT_ARROW||c==keys.DOWN_ARROW))||(e.ctrlKey&&(c==keys.PAGE_DOWN||c==keys.TAB))){this._adjacent(true)._buttonWidget._onTitleClick();_1ed.stop(e);}}}});if(has("dijit-legacy-requires")){_1f5(0,function(){var _22c=["dijit/layout/AccordionPane"];_1ea(_22c);});}_20c._InnerContainer=_201;_20c._Button=_1fd;return _20c;});},"esriviewer/portal/PortalSearcher":function(){define("esriviewer/portal/PortalSearcher",["dojo/_base/declare","dojo/topic","dojo/_base/lang","../base/ConfigurationEntryMixin"],function(_22d,_22e,lang,_22f){return _22d([_22f],{_defaultMaxResults:50,_defaultSortField:"avgRating",constructor:function(){this.initListeners();},initListeners:function(){_22e.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_WEBMAPS,lang.hitch(this,this.searchWebmaps));_22e.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_GEOCODE_SERVICES,lang.hitch(this,this.searchGeocodeServices));_22e.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_IMAGE_SERVICES,lang.hitch(this,this.searchImageServices));_22e.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_FEATURE_SERVICE_LAYERS,lang.hitch(this,this.searchFeatureServiceLayers));_22e.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_FEATURE_SERVICES,lang.hitch(this,this.searchFeatureServices));_22e.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_MAP_SERVICES,lang.hitch(this,this.searchMapServices));},searchGeocodeServices:function(_230,_231,_232,_233,_234,_235){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.GEOCODE_SERVICE,_230,_231,_232,_233,_234,_235);},searchFeatureServiceLayers:function(_236,_237,_238,_239,_23a,_23b){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.FEATURE_SERVICE_LAYER,_236,_237,_238,_239,_23a,_23b);},searchImageServices:function(_23c,_23d,_23e,_23f,_240,_241){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.IMAGE_SERVICE,_23c,_23d,_23e,_23f,_240,_241);},searchFeatureServices:function(_242,_243,_244,_245,_246,_247){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.FEATURE_SERVICE,_242,_243,_244,_245,_246,_247);},searchMapServices:function(_248,_249,_24a,_24b,_24c,_24d){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.MAP_SERVICE,_248,_249,_24a,_24b,_24c,_24d);},searchWebmaps:function(_24e,_24f,_250,_251,_252,_253){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.WEB_MAP,_24e,_24f,_250,_251,_252,_253);},_performSearch:function(_254,_255,_256,_257,_258,_259,_25a){if(_259==null||!lang.isFunction(_259)){return;}if(_256==null){_256=this._defaultMaxResults;}if(_257==null||_257==""){_257=this._defaultSortField;}if(_258==null){_258=0;}var _25b={};_25b.q=_255+this._getItemTypeAppend(_254);_25b.sortField=_257;_25b.start=_258;this._search(_25b,_259,_25a);},_getItemTypeAppend:function(_25c){if(_25c==null){return "";}return " AND (type: \""+_25c+"\") AND NOT (type: \""+VIEWER_GLOBALS.AGS_PORTAL_TYPES.MAPPING_APPLICATION+"\")";},_search:function(_25d,_25e,_25f){var _260=null;_22e.publish(VIEWER_GLOBALS.EVENTS.PORTAL.GET_INSTANCE,function(_261){_260=_261;});if(_260){var _262=_25e;_260.queryItems(_25d).then(function(_263){_262(_263);});}else{if(_25f!=null&&lang.isFunction(_25f)){_25f("Portal is not configured");}}}});});},"esriviewer/manager/ViewerManagerWindow":function(){define("esriviewer/manager/ViewerManagerWindow",["dojo/_base/declare","dojo/on","dojo/dom-style","dojo/_base/window","dojo/dom-construct","./base/ViewerManager","../ui/identify/IdentifyWindowWidget","../ui/measure/MeasureWindow","../ui/editor/FeatureServiceEditorWindowWidget","../ui/time/TimeSliderWindow","../ui/transparency/LayersTransparencyWindowWidget","../ui/geocode/ReverseGeocodeWindowWidget","../ui/query/QueryBuilderWindowWidget","../ui/draw/DrawWindow","../ui/logging/LoggingWidgetWindow","../ui/layers/LayersWindowWidget","../ui/legend/MapLegendWindow","../ui/zoomto/ZoomToWidgetWindow","../ui/configure/ConfigureViewerWindow","../ui/weather/conditions/WeatherWidgetWindow","../ui/weather/reflectivity/ReflectivityWidgetWindow","../ui/socialmedia/SocialMediaWidgetWindow","../ui/portal/PortalPublisherWindowWidget","../ui/plotting/PlottingWidgetWindow","../ui/print/PrintWidgetWindow"],function(_264,on,_265,_266,_267,_268,_269,_26a,_26b,_26c,_26d,_26e,_26f,_270,_271,_272,_273,_274,_275,_276,_277,_278,_279,_27a,_27b){return _264([_268],{createPlottingWidget:function(){new _27a();},createSocialMediaWidget:function(){new _278();},createReflectivityWidget:function(){new _277();},createWeatherWidget:function(){new _276();},createIdentifyWidget:function(){new _269();},createMeasureWidget:function(){new _26a();},createFeatureEditorWidget:function(){new _26b();},createTimeSliderWidget:function(){new _26c();},createLayersTransparencyWidget:function(){new _26d();},createConfigureViewerWidget:function(){new _275();},createReverseGeocodeWidget:function(){new _26e();},createQueryBuilderWidget:function(){new _26f();},createDrawWidget:function(){new _270();},createLoggingWidget:function(){new _271();},createLayersWidget:function(){new _272();},createLegendWidget:function(){new _273();},createZoomToWidget:function(){new _274();},createPortalPublisherWidget:function(){new _279();},createPrintWidget:function(){new _27b();},_createHeaderLogo:function(){this.viewerConfig.header.small=false;if(this.viewerConfig.header.small===true){var _27c=_267.create("span",{className:"smallWindowHeaderContainer"});var _27d=_267.create("img",{src:this.viewerConfig.header.headerImage});var _27e=_267.create("span",{innerHTML:this.viewerConfig.header.headerText});_267.place(_27d,_27c);_267.place(_27e,_27c);_267.place(_27c,_266.body());if(this.viewerConfig.header.contact&&this.viewerConfig.header.contact.url){_265.set(_27c,"cursor","pointer");var _27f=this.viewerConfig.header.contact.url;on(_27c,"click",function(){window.open(_27f);});}}else{this.inherited(arguments);}}});});},"url:dijit/templates/ColorPalette.html":"<div class=\"dijitInline dijitColorPalette\">\n\t<table dojoAttachPoint=\"paletteTableNode\" class=\"dijitPaletteTable\" cellSpacing=\"0\" cellPadding=\"0\" role=\"grid\">\n\t\t<tbody data-dojo-attach-point=\"gridNode\"></tbody>\n\t</table>\n</div>\n","esriviewer/ui/throbber/ThrobberWidget":function(){require({cache:{"url:esriviewer/ui/throbber/template/ThrobberTemplate.html":"<div class=\"loadingThrobber\"\r\n     style=\"display:none\">\r\n    <div class=\"loadingThrobberInner\">\r\n        <div class=\"loadingIcon\"></div>\r\n    </div>\r\n</div>"}});define("esriviewer/ui/throbber/ThrobberWidget",["dojo/_base/declare","dojo/text!./template/ThrobberTemplate.html","dojo/topic","../base/UITemplatedWidget","dojo/_base/lang","dojo/_base/window","dojo/request/notify"],function(_280,_281,_282,_283,lang,_284,_285){return _280([_283],{blockHideEnabled:false,defaultPositioning:{x:10,y:10,alignX:"left",alignY:"bottom"},positioningParamName:"throbber",isPositionedByConfig:true,templateString:_281,postCreate:function(){this.inherited(arguments);_285("start",lang.hitch(this,this.show));_285("done",lang.hitch(this,this.hide));},initListeners:function(){this.inherited(arguments);_282.subscribe(VIEWER_GLOBALS.EVENTS.THROBBER.SHOW,lang.hitch(this,this.show));_282.subscribe(VIEWER_GLOBALS.EVENTS.THROBBER.HIDE,lang.hitch(this,this.hide));_282.subscribe(VIEWER_GLOBALS.EVENTS.THROBBER.BLOCK_HIDE,lang.hitch(this,this.blockHide));_282.subscribe(VIEWER_GLOBALS.EVENTS.THROBBER.RELEASE_HIDE_BLOCK,lang.hitch(this,this.releaseHideBlock));},blockHide:function(){this.blockHideEnabled=true;},releaseHideBlock:function(){this.blockHideEnabled=false;this.hide();},hide:function(){if(!this.blockHideEnabled){this.inherited(arguments);}}});});},"esriviewer/ui/draw/configure/geometry/ConfigureTextWidget":function(){require({cache:{"url:esriviewer/ui/draw/configure/geometry/template/ConfigureTextTemplate.html":"<div class=\"configureDrawGeometryContainer\">\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Font Face</span>\r\n        <select data-bind=\"options: fontFaces ,value:selectedFontFace, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Text Align</span>\r\n        <select data-bind=\"options: textAligns ,value:selectedTextAlign, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Weight</span>\r\n        <select data-bind=\"options: textWeights ,value:selectedTextWeight, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Size</span>\r\n        <select data-bind=\"options: textSizes ,value:selectedTextSize, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Angle</span>\r\n        <select data-bind=\"options: angles ,value:selectedAngle\"></select>\r\n    </div>\r\n    <div class=\"configureDrawColorPickerContainer\" data-dojo-attach-point=\"colorPickerContainer\"></div>\r\n\r\n</div>"}});define("esriviewer/ui/draw/configure/geometry/ConfigureTextWidget",["dojo/_base/declare","dojo/text!./template/ConfigureTextTemplate.html","dojo/topic","dojo/_base/lang","./model/ConfigureTextViewModel","./BaseGeometryConfigurationWidget","esri/symbols/Font","esri/symbols/TextSymbol"],function(_286,_287,_288,lang,_289,_28a,Font,_28b){return _286([_28a],{templateString:_287,postCreate:function(){this.inherited(arguments);this.viewModel=new _289();this.viewModel.selectedAngle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedTextAlign.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedTextSize.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedTextWeight.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedFontFace.subscribe(lang.hitch(this,this.processChange));ko.applyBindings(this.viewModel,this.domNode);},processChange:function(){this.onChange(this.getSymbol());},getSymbol:function(){var font=new Font(this.viewModel.selectedTextSize());font.setWeight(this.viewModel.selectedTextWeight());font.setStyle(this.viewModel.selectedFontFace());return new _28b("").setColor(this.getColor()).setAlign(this.viewModel.selectedTextAlign()).setAngle(parseInt(this.viewModel.selectedAngle(),10)).setFont(font);}});});},"esriviewer/ui/layers/LayersWidget":function(){require({cache:{"url:esriviewer/ui/layers/template/LayersWidgetTemplate.html":"<div>\r\n    <div class=\"defaultTabContainer\" data-dojo-attach-point=\"layersTabContainer\">\r\n        <span data-dojo-attach-point=\"layersTab\"\r\n              data-bind=\"click:showLayersList, css: {selectedTab: layersListVisible}\">Layers</span>\r\n        <span data-dojo-attach-point=\"addLayersTab\"\r\n              data-bind=\"click:showAddLayers, css: {selectedTab: addlayersVisible}\">Add Layer</span>\r\n        <span data-dojo-attach-point=\"persistsedLayersTab\"\r\n              data-bind=\"click:showUserPersistedLayers, css: {selectedTab: persistedLayersVisible}\">Saved Layers</span>\r\n    </div>\r\n    <div data-bind=\"visible:addlayersVisible\" class=\"addLayerContainer\">\r\n        <div class=\"addLayerContainerInner\">\r\n            <div class=\"viewerAddLayerWorkingWKIDContainer\" data-bind=\"visible:showWKIDInAddLayers\">\r\n                <span class=\"viewerAddLayerLabel \">Map WKID:</span>\r\n                <span class=\"viewerAddLayerWorkingWKIDLabel\" data-bind=\"text: viewerWKID\"></span>\r\n            </div>\r\n            <div class=\"viewerAddLayerLabel viewerAddLayerUrlLabel \">URL:</div>\r\n            <div data-dojo-type=\"dijit/form/TextBox\" style=\"width: 100%\" data-dojo-attach-point=\"addLayerTextInput\"\r\n                 data-dojo-attach-event=\"onKeyUp:handleLayerAddUrlKeyUp\"></div>\r\n            <div class=\"viewerAddLayerLabel viewerAddLayerUrlLabel \">Label:</div>\r\n            <div data-dojo-type=\"dijit/form/TextBox\" style=\"width: 100%\" data-dojo-attach-point=\"addLayerLabelInput\"\r\n                 value=\"Added Layer\"></div>\r\n            <div class=\"viewerAddLayerActions\">\r\n                <div class=\"layerTypeContainer\">\r\n                    <div class=\"viewerAddLayerLabel\">Type:</div>\r\n                    <select data-dojo-type=\"dijit/form/Select\" style=\"width: 100%\"\r\n                            data-dojo-attach-point=\"addLayerTypeSelect\"\r\n                            style=\"width: 15em\"></select>\r\n                </div>\r\n                <div class=\"viewerAddLayerButtonActions\">\r\n                    <div data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:addManualLayer\">Add Layer\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n    <div data-dojo-attach-point=\"layerTocContainer\" data-bind=\"visible:layersListVisible\">\r\n\r\n    </div>\r\n    <!-- <ul class=\"viewerLayerListing\" data-dojo-attach-point=\"layersList\" data-bind=\"visible:layersListVisible\">\r\n\r\n     </ul> -->\r\n    <div data-bind=\"visible:persistedLayersVisible\" data-dojo-attach-point=\"userPersistedLayersContainer\">\r\n\r\n    </div>\r\n\r\n\r\n</div>"}});define("esriviewer/ui/layers/LayersWidget",["dojo/_base/declare","dojo/text!./template/LayersWidgetTemplate.html","dojo/topic","dojo/_base/connect","dojo/_base/lang","dojo/on","dojo/dom-style","dojo/dom-construct","../base/UITemplatedWidget","../tooltip/ConfirmTooltip","./base/LayersLocalStorageMixin","./model/LayersWidgetViewModel","./LayersTocWidget","./base/UserPersistedLayersListWidget","dijit/form/TextBox","dijit/form/Select","dijit/form/Button"],function(_28c,_28d,_28e,con,lang,on,_28f,_290,_291,_292,_293,_294,_295,_296,_297,_298,_299){return _28c([_291,_293],{firstAddLayerDisplay:true,errorMessageDelay:5000,successMessageDelay:2000,allowAddLayers:true,templateString:_28d,constructor:function(_29a){lang.mixin(this,_29a||{});this.addedLayers={};},postCreate:function(){this.inherited(arguments);this.viewModel=new _294();this.viewModel.showUserPersistedLayersIcon(this.localStoragePersistSupported);this.viewModel.on(this.viewModel.ADD_LAYERS_VISIBLE,lang.hitch(this,this.handleAddLayersVisible));ko.applyBindings(this.viewModel,this.domNode);this.createLayersTocWidget();_28f.set(this.domNode,"minHeight","250px");if(this.allowAddLayers){this.populateLayerTypesDropdown();}else{_28f.set(this.layersTabContainer,"display","none");}this.manualLayerLoadedSuccessCallback=lang.hitch(this,this.handleManualLayerLoadedCallback);this.manualLayerLoadedErrCallback=lang.hitch(this,this.handleManualLayerLoadErrorCallback);if(this.localStoragePersistSupported){this.createUserPersistedLayerListWidget();}},handleAddLayersVisible:function(){this.addLayerTextInput.set("value","");this.addLayerLabelInput.set("value","");this.addLayerTextInput.focus();},createLayersTocWidget:function(){this.layersTocWidget=new _295();_290.place(this.layersTocWidget.domNode,this.layerTocContainer);},createUserPersistedLayerListWidget:function(){if(this.userPersistedLayersListWidget==null){this.userPersistedLayersListWidget=new _296();this.userPersistedLayersListWidget.placeAt(this.userPersistedLayersContainer);this.userPersistedLayersListWidget.on("removeUserPersistedGraphics",lang.hitch(this,this.handleRemoveUserPersistedLayer));this.userPersistedLayersListWidget.on("addUserPersistedLayerToMap",lang.hitch(this,this.handleAddUserPersistedLayerToMap));this.userPersistedLayersListWidget.on("removeAllUserPersistedGraphics",lang.hitch(this,this.handleRemoveAllUserPersistedLayers));this.userPersistedLayersListWidget.addExistingPersistedLayerItems(this.persistedUserLayers);}},showLayerList:function(){this.viewModel.showLayersList();},handleRemoveAllUserPersistedLayers:function(){this.removeAllLayers();},handleRemoveUserPersistedLayer:function(_29b){if(_29b!=null&&_29b!=""){this.deleteUserPersistedLayer(_29b);}},handleAddUserPersistedLayerToMap:function(_29c,_29d){if(_29c!=null&&_29c!=""){this._addLayer(_29c,_29d);}},loadViewerConfigurationData:function(){var _29e=null;_28e.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"layersWidget",function(_29f){_29e=_29f;});if(_29e){for(var key in _29e){if(key==null||key.toString()==null){continue;}if(key.toString().toLowerCase()=="allowAddLayers".toLowerCase()){this.allowAddLayers=_29e[key];}else{if(key.toString().toLowerCase()=="showWKIDInAddLayers".toLowerCase()){if(_29e[key]==false){this.viewModel.showWKIDInAddLayers(false);}}}}}},handleManualLayerLoadedCallback:function(){_28e.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Layer Added");VIEWER_UTILS.log("Layer Added",VIEWER_GLOBALS.LOG_TYPE.INFO);},handleManualLayerLoadErrorCallback:function(msg){if(msg!=null&&lang.isString(msg)){VIEWER_UTILS.log("Could not add layer: "+msg,VIEWER_GLOBALS.LOG_TYPE.ERROR);}else{VIEWER_UTILS.log("Add Layer Failed",VIEWER_GLOBALS.LOG_TYPE.ERROR);}},initListeners:function(){this.inherited(arguments);_28e.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADDED,lang.hitch(this,this.addLayer));_28e.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVED,lang.hitch(this,this.handleLayerRemoved));},populateLayerTypesDropdown:function(){var _2a0;for(var key in VIEWER_GLOBALS.LAYER_TYPES){_2a0=VIEWER_GLOBALS.LAYER_TYPES[key];var _2a1={label:_2a0.LABEL,value:_2a0.VALUE};this.addLayerTypeSelect.addOption(_2a1);}},handleAddLayers:function(_2a2){if(_2a2!=null&&lang.isArray(_2a2)){for(var i=0;i<_2a2.length;i++){this.addLayer(_2a2[i]);}}},addLayer:function(_2a3){if(_2a3==null||_2a3.url==null){return;}var _2a4=_2a3.url.toLowerCase();if(this.addedLayers[_2a4]!=null){return;}this.layersTocWidget.addLayer(_2a3);this.addedLayers[_2a4]={layer:_2a3};if(this.localStoragePersistSupported){this.saveLayer(_2a3);}},saveLayer:function(_2a5){var _2a6=this.persistUserLayer(_2a5);if(_2a6){this.userPersistedLayersListWidget.addPersistedLayer(_2a6);}},handleToggleLayerVisibility:function(_2a7){if(_2a7.visible){_2a7.hide();}else{_2a7.show();}},handleZoomToLayer:function(_2a8){_28e.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,_2a8.fullExtent);},handleLayerAddUrlKeyUp:function(e){if(VIEWER_UTILS.isEnterKey(e)){this.addManualLayer();}else{var url=this.addLayerTextInput.get("value");if(url==""){return;}var _2a9=VIEWER_UTILS.getServiceTypeFromUrl(url);if(_2a9!=null){if(_2a9===VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER){this.addLayerTypeSelect.set("value",VIEWER_GLOBALS.LAYER_TYPES.IMAGE_SERVER.VALUE);}else{if(_2a9===VIEWER_GLOBALS.SERVICE_TYPES.FEATURE_SERVER){this.addLayerTypeSelect.set("value",VIEWER_GLOBALS.LAYER_TYPES.FEATURE_LAYER.VALUE);}else{if(_2a9===VIEWER_GLOBALS.SERVICE_TYPES.KML){this.addLayerTypeSelect.set("value",VIEWER_GLOBALS.LAYER_TYPES.KML.VALUE);}else{if(_2a9===VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER){var _2aa=REG_EXP_UTILS.featureLayerRegExp.test(url);if(_2aa){this.addLayerTypeSelect.set("value",VIEWER_GLOBALS.LAYER_TYPES.FEATURE_LAYER.VALUE);}else{this.addLayerTypeSelect.set("value",VIEWER_GLOBALS.LAYER_TYPES.MAP_SERVER.VALUE);}}}}}}}},addManualLayer:function(){var url=this.addLayerTextInput.get("value");if(url!=""){if(VIEWER_UTILS.endsWith(url,"/")){url=url.substring(0,url.length-1);}this._addLayer(url);}},_addLayer:function(_2ab,_2ac){var _2ad=_2ac;if(_2ad==null||_2ad==""){_2ad=this.addLayerLabelInput.get("value");}_28e.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_FROM_URL,_2ab,{isOperationalLayer:true,canRemove:true,label:_2ad},this.manualLayerLoadedSuccessCallback,this.manualLayerLoadedErrCallback);},showConfirmDeleteLayerTooltip:function(_2ae,_2af){this.deleteLayerConfirmedCallback=lang.hitch(this,this.handleRemoveLayerFromClick,_2ae);this.showDeleteLayerTooltip(_2af);},handleRemoveLayerFromClick:function(_2b0){_28e.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE,_2b0);},createConfirmDeleteLayerTooltip:function(){this.confirmDeleteLayerTooltip=new _292({confirmCallback:lang.hitch(this,this.handleConfirmedLayerDelete)});this.confirmDeleteLayerTooltip.on("hide",lang.hitch(this,function(){this.deleteLayerConfirmedCallback=null;}));},handleConfirmedLayerDelete:function(){if(lang.isFunction(this.deleteLayerConfirmedCallback)){this.deleteLayerConfirmedCallback();}this.deleteLayerConfirmedCallback=null;},showDeleteLayerTooltip:function(_2b1){if(_2b1==null){return;}if(this.confirmDeleteLayerTooltip==null){this.createConfirmDeleteLayerTooltip();}if(this.confirmDeleteLayerTooltip){this.confirmDeleteLayerTooltip.setAroundNode(_2b1);this.confirmDeleteLayerTooltip.show();}},handleLayerRemoved:function(_2b2){if(_2b2==null){return;}var _2b3=_2b2.url.toLowerCase();if(this.addedLayers[_2b3]!=null){this.layersTocWidget.removeLayer(_2b2);delete this.addedLayers[_2b3];}},hidePopups:function(){if(this.confirmDeleteLayerTooltip){this.confirmDeleteLayerTooltip.hide();}}});});},"esriviewer/loader/base/ViewerPlacementWindow":function(){define("esriviewer/loader/base/ViewerPlacementWindow",["dojo/_base/declare","dojo/_base/window","dojo/topic","dojo/_base/lang","dojo/dom-construct","./BaseViewerPlacement"],function(_2b4,_2b5,_2b6,lang,_2b7,_2b8){return _2b4([_2b8],{label:"window",isAbsolutePositioned:true,isWindowless:false,initUI:function(){this.inherited(arguments);_2b7.place(this.mapDiv,_2b5.body());},placeNavigationToolbar:function(_2b9){if(_2b9){_2b9.placeAt(_2b5.body());}},placeHeader:function(_2ba){if(_2ba){_2ba.placeAt(_2b5.body());}},placeViewerAccordion:function(_2bb){if(_2bb){_2bb.placeAt(_2b5.body());}},placeMainToolbar:function(_2bc){if(_2bc){_2bc.placeAt(_2b5.body());}},placeMainToolbarDropdown:function(_2bd){if(_2bd){_2b7.place(_2bd,_2b5.body());}},placeMessagingWidget:function(_2be){if(_2be){_2be.placeAt(_2b5.body());}},placeThrobberWidget:function(_2bf){if(_2bf){_2bf.placeAt(_2b5.body());}},placeBasemapGallery:function(_2c0){if(_2c0){_2c0.placeAt(_2b5.body());}},placeMapScaleAndCoordinates:function(_2c1){if(_2c1!=null){_2b7.place(_2c1,_2b5.body());}},placeCreateBookmarkWidget:function(_2c2){if(_2c2){_2c2.placeAt(_2b5.body());}},placeMenuBarWidget:function(_2c3){if(_2c3){_2c3.placeAt(_2b5.body());}},placeZoomToWidget:function(_2c4){if(_2c4){_2c4.placeAt(_2b5.body());}}});});},"esriviewer/manager/base/ViewerManager":function(){define("esriviewer/manager/base/ViewerManager",["dojo/_base/declare","dojox/storage","dojo/topic","dojo/_base/window","dojo/_base/lang","esri/IdentityManager","../../base/Configurable","../../base/LocationServiceSupport","../../base/DataLoaderSupport","../../ui/tools/ViewerDefaultTools","../../map/MapManager","../../ui/toolbar/ActionsToolbarWidget","../../ui/bookmark/BookmarkController","../../portal/PortalViewerManagerSupportMixin","../../ui/menu/ViewerMenuBar","../../map/geometry/GeometryServiceController","../../ui/accordion/ToolsAccordion","./ViewerManagerUI","esri/SpatialReference","esri/geometry/Extent","./WebMapTemplateConfigurationUtil","esri/urlUtils","esri/arcgis/utils"],function(_2c5,_2c6,_2c7,_2c8,lang,_2c9,_2ca,_2cb,_2cc,_2cd,_2ce,_2cf,_2d0,_2d1,_2d2,_2d3,_2d4,_2d5,_2d6,_2d7,_2d8,_2d9,_2da){return _2c5([_2d1,_2ca,_2cb,_2cc,_2d5],{portalContentUrl:"/sharing/rest/content/items",baseConfigurationLoaded:false,forceHideCoreTimeSlider:false,useProxyForConfig:false,useProxyForPositionConfig:false,allowAccordionMove:true,allowAccordionCollapse:true,forceHideAccordionTab:false,configUrl:"config/baseConfig.json",viewerPositioningConfigUrl:"config/viewerPositioning.json",constructor:function(_2db){lang.mixin(this,_2db||{});var _2dc=_2d9.urlToObject(document.location.href);this.appId=_2dc.query?_2dc.query.appid:null;this.processConfig();},processConfig:function(){if(this.appId!=null){var _2dd=new _2d8();_2dd.loadConfiguration(this.appId).then(lang.hitch(this,this._handleWebMapTemplateConfigurationLoaded));}else{if(this.useProxyForConfig){this.loadProxiedConfig();}else{this.loadConfig();}}},_handleWebMapTemplateConfigurationLoaded:function(_2de){this.handleConfigLoaded(_2de);},handleConfigLoaded:function(_2df){VIEWER_UTILS.debug("Configuration Loaded");this.viewerConfig=_2df;if(_2df.windowTitle){_2c8.doc.title=_2df.windowTitle;}else{_2c8.doc.title="JavaScript Map Viewer";}if(this.viewerConfig&&this.viewerConfig.portal!=null&&lang.isObject(this.viewerConfig.portal)&&this.viewerConfig.portal.url){var _2e0=this.viewerConfig.portal.url;var _2e1=_2e0.toLowerCase();if(_2e1.indexOf("http://")<0&&_2e1.indexOf("https://")<0){_2e0="http://"+_2e0;}_2da.arcgisUrl=VIEWER_UTILS.joinUrl(_2e0,this.portalContentUrl);}if(this.useProxyForPositionConfig){this.loadProxiedJson(this.viewerPositioningConfigUrl,lang.hitch(this,this.handleWindowPositionsConfigLoaded),lang.hitch(this,this.handleWindowPositionsConfigLoadFailed));}else{this.loadJson(this.viewerPositioningConfigUrl,lang.hitch(this,this.handleWindowPositionsConfigLoaded),lang.hitch(this,this.handleWindowPositionsConfigLoadFailed));}},startupViewer:function(){this._initializeStorageProvider();this._initListeners();this._createViewerManager();},_initListeners:function(){this.inherited(arguments);_2c7.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LOADED,lang.hitch(this,this.handleMapLoaded));_2c7.subscribe(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET,lang.hitch(this,this.handleGetConfiguration));_2c7.subscribe(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,lang.hitch(this,this.handleGetConfigurationKey));},handleGetConfiguration:function(_2e2){if(_2e2&&lang.isFunction(_2e2)){_2e2(this.viewerConfig);}},handleGetConfigurationKey:function(key,_2e3){if(key!=null&&key!=""&&_2e3&&lang.isFunction(_2e3)){_2e3(this.viewerConfig[key]);}},handleMapLoaded:function(map){this.map=map;if(this._initializePortalSupport!=null&&lang.isFunction(this._initializePortalSupport)){this._initializePortalSupport();}PROJECTION_UTILS.setMapSpatialReference(map.spatialReference);this.loadControllers();this.loadUI();},loadUI:function(){this.inherited(arguments);},_initializePortalSupport:function(){this.inherited(arguments);},loadControllers:function(){if(this.viewerConfig.geometryServiceUrl!=null&&this.viewerConfig.geometryServiceUrl){this.geometryServiceController=new _2d3();}else{_2c7.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.EXISTS,lang.hitch(this,function(_2e4){if(_2e4!=null&&lang.isFunction(_2e4)){_2e4(false);}}));}if(this.viewerConfig.locators!=null&&lang.isArray(this.viewerConfig.locators)){for(var i=0;i<this.viewerConfig.locators.length;i++){this.addLocator(this.viewerConfig.locators[i].url,this.viewerConfig.locators[i].label);}}this._createBookmarkController();},handleWindowPositionsConfigLoaded:function(_2e5){VIEWER_GLOBALS.windowPositioning=_2e5;if(!this.baseConfigurationLoaded){this.handleBaseConfigurationsLoaded();}},handleWindowPositionsConfigLoadFailed:function(){VIEWER_GLOBALS.windowPositioning={};if(!this.baseConfigurationLoaded){this.handleBaseConfigurationsLoaded();}},handleBaseConfigurationsLoaded:function(){this.baseConfigurationLoaded=true;this.startupViewer();},_createViewerManager:function(){this._createLayersWidget();this.mapManager=new _2ce({webMapItem:this.viewerConfig.webMapItem});},_createLayersWidget:function(){this.createLayersWidget();},createLayersWidget:function(){},_createBookmarkController:function(){this.bookmarkController=new _2d0();},_loadBookmarks:function(){if(lang.isObject(this.viewerConfig.bookmarks)&&this.viewerConfig.bookmarks.url!=null){var _2e6=lang.hitch(this,function(_2e7){this._setServerBookmarks(_2e7);});this.loadJson(this.viewerConfig.bookmarks.url,_2e6);}this.mainToolbar.loadCookieBookmarks();},_setServerBookmarks:function(_2e8){this.mainToolbar.addStaticBookmarks(_2e8);},_initializeStorageProvider:function(){var _2e9=dojox.storage.manager.getProvider();_2e9.initialize();},processNavigationToolbarAddons:function(){},createViewerDefaultTools:function(){this.viewerDefaultTools=new _2cd();this.createAddonTools();this.viewerDefaultTools.createConfigurationMenuItem();},_createViewerAccordion:function(){if(this.viewerConfig.toolsAccordion.create==null||this.viewerConfig.toolsAccordion.create!=false){_2c7.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.LOAD_DEFAULT_TOOLS,lang.hitch(this,this.createDefaultAccordionTools));this.viewerAccordion=new _2d4({allowCollapse:this.allowAccordionCollapse,movable:this.allowAccordionMove});_2c7.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.VIEWER_ACCORDION,this.viewerAccordion);}},_createViewerMainToolbar:function(){this.mainToolbar=new _2cf();_2c7.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAIN_TOOLBAR,this.mainToolbar);if(lang.isObject(this.viewerConfig.map)){this.mainToolbar.setBasemaps(this.viewerConfig.map.basemaps);}},createMenuBar:function(){new _2d2();},createDefaultAccordionTools:function(){},handleToggleAccordion:function(){this.viewerAccordion.toggle();},createAddonTools:function(){}});});},"undefined":undefined,"esriviewer/map/base/MapLayersTools":function(){define("esriviewer/map/base/MapLayersTools",["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/dom-construct","esri/layers/OpenStreetMapLayer","esri/layers/FeatureLayer","esri/layers/GraphicsLayer","esri/layers/ArcGISImageServiceLayer","esri/layers/KMLLayer","esri/layers/WMSLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/layers/ArcGISDynamicMapServiceLayer"],function(_2ea,_2eb,lang,_2ec,_2ed,_2ee,_2ef,_2f0,_2f1,_2f2,_2f3,_2f4){return _2ea([],{labelServicesVisible:false,constructor:function(_2f5){lang.mixin(this,_2f5);this.loadViewerConfigurationData();this.currrentBasemapKey=null;this.labelServices={};this.timeEnabledLayers=[];this.operationalLayers={};this.graphicsLayers={};this._initListeners();},loadViewerConfigurationData:function(){if(this.mapConfiguration==null){var _2f6;_2eb.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_2f7){_2f6=_2f7;});if(_2f6){this.mapConfiguration=_2f6;}}},_initListeners:function(){_2eb.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.REMOVE,lang.hitch(this,this.handleRemoveBasemap));_2eb.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_GRAPHICS_LAYER,lang.hitch(this,this.handleAddGraphicsLayer));_2eb.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.ADD,lang.hitch(this,this.handleAddBasemap));_2eb.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.SET,lang.hitch(this,this.changeBaseMaps));_2eb.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GET_CURRENT_URL,lang.hitch(this,this.handleGetCurrentBasemapUrl));_2eb.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GET_CURRENT,lang.hitch(this,this.handleGetCurrentBasemap));_2eb.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.SHOW,lang.hitch(this,this.showLabelServices));_2eb.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.HIDE,lang.hitch(this,this.hideLabelServices));_2eb.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.SERVICE_EXISTS,lang.hitch(this,this.handleLabelServiceExists));_2eb.subscribe(VIEWER_GLOBALS.EVENTS.MAP.TIME.GET_TIME_ENABLED_SERVICES,lang.hitch(this,this.handleGetTimeEnabledLayers));_2eb.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.OPERATIONAL.GET,lang.hitch(this,this.handleGetOperationalLayers));_2eb.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_FROM_URL,lang.hitch(this,this.handleAddLayerFromUrl));_2eb.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD,lang.hitch(this,this.handleAddLayer));_2eb.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_EXTERNAL_MANAGED_LAYER,lang.hitch(this,this.handleAddExternalManagedLayer));_2eb.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE_EXTERNAL_MANAGED_LAYER,lang.hitch(this,this.handleRemoveExternalManagedLayer));_2eb.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.GET_FEATURE_LAYER_IF_EXISTS,lang.hitch(this,this.handleGetFeatureLayerIfExists));_2eb.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE,lang.hitch(this,this.handleRemoveLayer));_2eb.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_REFERENCE_LAYER,lang.hitch(this,this.handleAddReferenceLayerRequest));_2eb.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE_REFERENCE_LAYER,lang.hitch(this,this.handleRemoveReferenceLayerRequest));_2eb.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.MOVE_LAYER_TO_TOP,lang.hitch(this,this.handleMoveLayerToTop));_2eb.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.MAKE_VISIBLE,lang.hitch(this,this.handleMakeLayerVisible));_2eb.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.MAKE_INVISIBLE,lang.hitch(this,this.handleMakeLayerInvisible));this.map.on("layer-add",lang.hitch(this,this.handleLayerAdded));},handleMakeLayerVisible:function(_2f8){if(_2f8!=null){_2f8.show();}},handleMakeLayerInvisible:function(_2f9){if(_2f9!=null){_2f9.hide();}},handleMoveLayerToTop:function(_2fa){if(_2fa){this.map.reorderLayer(_2fa,this.map.layerIds.length);}},handleLayerAdded:function(evt){if(evt==null||evt.layer==null){return;}var _2fb=evt.layer;if(_2fb!=null&&_2fb.isReferenceLayer==null||!_2fb.isReferenceLayer){if(_2fb.timeInfo!=null){this.timeEnabledLayers.push(_2fb);VIEWER_UTILS.log("Found time enabled layer",VIEWER_GLOBALS.LOG_TYPE.INFO);_2eb.publish(VIEWER_GLOBALS.EVENTS.MAP.TIME.TIME_LAYER_FOUND,_2fb);}}if(_2fb.isOperationalLayer!=null&&_2fb.isOperationalLayer===true){VIEWER_UTILS.log("Added operational layer",VIEWER_GLOBALS.LOG_TYPE.INFO);_2eb.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADDED,_2fb);}},handleGetFeatureLayerIfExists:function(_2fc,_2fd){if(_2fc==null||_2fc==""||_2fd==null||!lang.isFunction(_2fd)){return;}var _2fe=_2fc.toLowerCase();_2fd(this.operationalLayers[_2fe]);},handleAddGraphicsLayer:function(_2ff){if(_2ff!=null){this.map.addLayer(_2ff);var uuid=VIEWER_UTILS.generateUUID();_2ff.id=uuid;this.graphicsLayers[uuid]=_2ff;}},handleAddBasemap:function(_300,_301,_302){var id=_300.toLowerCase();if(this.basemaps[id]!=null){_302("Basemap Already Exists");}var _303=lang.hitch(this,this._handleBaseMapServiceDescriptionLoaded,_300,_301,_302);VIEWER_UTILS.getServiceDescription(_300,_303);},_handleBaseMapServiceDescriptionLoaded:function(_304,_305,_306,_307){if(this.isServiceTiledAndInMapSR(_307)){var id=_304.toLowerCase();var _308={id:id,label:REG_EXP_UTILS.getServiceNameFromUrl(_304),url:_304};this.basemaps[id]=_308;VIEWER_UTILS.debug("Added Basemap: "+id);_2eb.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.ADDED,_308,id);if(_305!=null&&lang.isFunction(_305)){_305(_308);}}else{if(_306!=null&&lang.isFunction(_306)){_306("Could not add basemap. Is the service cached and in the map spatial reference ("+this.map.spatialReference.wkid+")?");}}},handleRemoveLayer:function(_309){if(_309==null){return;}if(_309.url!=null){var _30a=_309.url.toLowerCase();if(this.operationalLayers[_30a]){delete this.operationalLayers[_30a];}}if(_309 instanceof _2ef){if(this.graphicsLayers[_309.id]!=null){delete this.graphicsLayers[_309.id];}}this.map.removeLayer(_309);VIEWER_UTILS.debug("Removed Layer: "+_309.name);_2eb.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVED,_309);},handleGetOperationalLayers:function(_30b){if(_30b!=null&&lang.isFunction(_30b)){var _30c=[];for(var key in this.operationalLayers){_30c.push(this.operationalLayers[key]);}_30b(_30c);}},handleGetTimeEnabledLayers:function(_30d){if(_30d!=null&&lang.isFunction(_30d)){_30d(this.timeEnabledLayers);}},handleRemoveExternalManagedLayer:function(_30e){this.map.removeLayer(_30e);},handleAddExternalManagedLayer:function(_30f){this.map.addLayer(_30f);},handleAddLayer:function(_310,_311,_312,_313){if(_311&&_311.isOperationalLayer!=false){if(_310.url!=null){var _314=_310.url.toLowerCase();if(this.operationalLayers[_314]!=null){return;}}this.operationalLayers[_314]=_310;_310.isOperationalLayer=true;}else{_310.isOperationalLayer=false;}_310.canRemove=_311!=null&&_311.canRemove!=false;this.map.addLayer(_310);if(_312!=null&&lang.isFunction(_312)){_310.on("load",_312);}if(_313!=null&&lang.isFunction(_313)){var _315=function(){_313(_310);};_310.on("error",lang.hitch(this,_315));}VIEWER_UTILS.debug("Added Layer: "+_310.url);},handleAddLayerFromUrl:function(_316,_317,_318,_319){var _31a=_316.toLowerCase();if(this.operationalLayers[_31a]!=null){if(_319!=null&&lang.isFunction(_319)){_319("Layer has already been added to the map");}else{_2eb.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Layer has already been added to the map");}return;}var _31b=null;var type=VIEWER_UTILS.getServiceTypeFromUrl(_316);if(type){if(type==VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER){if(REG_EXP_UTILS.isFeatureLayer(_316)){_31b=new _2ee(_316,lang.mixin({mode:_2ee.MODE_ONDEMAND},_317||{}));}else{this._handleAddMapServiceLayer(_316,_317,_318,_319);return;}}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.KML){_31b=new _2f1(_316);}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER){_31b=new _2f0(_316);}else{if(type===VIEWER_GLOBALS.SERVICE_TYPES.FEATURE_SERVER){_31b=new _2ee(_316,lang.mixin({mode:_2ee.MODE_ONDEMAND},_317||{}));}}}}}else{if(_316.indexOf("/wms/")>-1){_31b=new _2f2(_316,_317);}}if(_31b){_31b.canRemove=_317!=null&&_317.canRemove!=false;_31b.isOperationalLayer=_317!=null&&_317.isOperationalLayer!=null&&_317.isOperationalLayer!=false;_31b.layerAliasName=(_317&&_317.label)?_317.label:REG_EXP_UTILS.getServiceNameFromUrl(_316);if(_318!=null&&lang.isFunction(_318)){_31b.on("load",_318);}if(_319!=null&&lang.isFunction(_319)){_31b.on("error",_319);}var _31c=this.operationalLayers;_31b.on("load",function(){_31c[_31b.url.toLowerCase()]=_31b;});VIEWER_UTILS.debug("Added Layer from URL: "+_316);this.map.addLayer(_31b);}else{if(lang.isFunction(_319)){_319("Could Not Add Layer");}}},_handleAddMapServiceLayer:function(_31d,_31e,_31f,_320){var _321=lang.hitch(this,lang.hitch(this,this._handleAddMapServiceServiceDescriptionLoaded,_31d,_31e,_31f,_320));VIEWER_UTILS.getServiceDescription(_31d,_321);},_handleAddMapServiceServiceDescriptionLoaded:function(_322,_323,_324,_325,_326){var _327;var _328=_322.toLowerCase();if(_326!=null&&lang.isObject(_326)){if(this.isServiceTiledAndInMapSR(_326)){_327=new _2f3(_322);}else{_327=new _2f4(_322);}_327.isOperationalLayer=_323!=null&&_323.isOperationalLayer!=null&&_323.isOperationalLayer!=false;var _329=this.operationalLayers;_327.on("load",function(){_329[_327.url.toLowerCase()]=_327;});_327.serviceDescription=_326;}if(_327!=null){_327.name=REG_EXP_UTILS.getServiceNameFromUrl(_322);if(_323!=null&&_323.canRemove!=null){_327.canRemove=true;}if(_324!=null&&lang.isFunction(_324)){_327.on("load",_324);}if(_325!=null&&lang.isFunction(_325)){_327.on("error",_325);}VIEWER_UTILS.debug("Added Layer: "+_327.url);this.map.addLayer(_327);}},isServiceTiledAndInMapSR:function(_32a){if(_32a!=null&&lang.isObject(_32a)){return _32a.tileInfo!=null&&_32a.spatialReference!=null&&_32a.spatialReference.wkid==this.map.spatialReference.wkid;}return false;},handleLabelServiceExists:function(_32b){if(_32b!=null&&lang.isFunction(_32b)){var _32c=false;for(var key in this.labelServices){_32c=true;break;}_32b(_32c);}},handleRemoveBasemap:function(id){var _32d=this.basemaps[id];if(this.basemaps[id]!=null){if(this.currrentBasemapKey!=null&&this.currrentBasemapKey===id){this.map.removeLayer(this.currentBasemap);for(var key in this.basemaps){this.changeBaseMaps(key);break;}}delete this.basemaps[id];VIEWER_UTILS.debug("Removed Basemap: "+id);_2eb.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.REMOVED,id);}},changeBaseMaps:function(key){var _32e=this.basemaps[key];if(_32e){if(this.currrentBasemapKey!=null&&this.currrentBasemapKey===key){return;}if(this.currentBasemap!=null){this.map.removeLayer(this.currentBasemap);}if(_32e.isOpenStreetMap==null||_32e.isOpenStreetMap==false){this.currentBasemap=new _2f3(_32e.url);}else{this.currentBasemap=new _2ed();}this.map.addLayer(this.currentBasemap,0);VIEWER_UTILS.debug("Changed Basemap: "+key);this.currrentBasemapKey=key;}},handleGetCurrentBasemapUrl:function(_32f){if(_32f!=null&&lang.isFunction(_32f)){if(this.mapConfiguration.useBasemapGallery==null||this.mapConfiguration.useBasemapGallery!=true){_32f(this.basemaps[this.currrentBasemapKey].url);return;}else{var _330;_2eb.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.GET,function(_331){_330=_331;});if(_330){var _332=_330.getSelected();if(_332==null){if(this.webMapItem&&this.webMapItem.itemData&&this.webMapItem.itemData.baseMap&&this.webMapItem.itemData.baseMap.baseMapLayers&&this.webMapItem.itemData.baseMap.baseMapLayers&&lang.isArray(this.webMapItem.itemData.baseMap.baseMapLayers)&&this.webMapItem.itemData.baseMap.baseMapLayers.length>0){_32f(this.webMapItem.itemData.baseMap.baseMapLayers[0].url);return;}}else{if(_332&&_332.layers&&lang.isArray(_332.layers)&&_332.layers.length>0){_32f(_332.layers[0].url);return;}}}}_32f(null);}},handleGetCurrentBasemap:function(_333){if(_333!=null&&lang.isFunction(_333)){if(this.mapConfiguration.useBasemapGallery==null||this.mapConfiguration.useBasemapGallery!=true){_333(this.currrentBasemapKey);return;}else{var _334;_2eb.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.GET,function(_335){_334=_335;});if(_334){var _336=_334.getSelected();if(_336==null){if(this.webMapItem&&this.webMapItem.itemData&&this.webMapItem.itemData.baseMap&&this.webMapItem.itemData.baseMap.baseMapLayers&&this.webMapItem.itemData.baseMap.baseMapLayers&&lang.isArray(this.webMapItem.itemData.baseMap.baseMapLayers)&&this.webMapItem.itemData.baseMap.baseMapLayers.length>0){_333(new _2f3(this.webMapItem.itemData.baseMap.baseMapLayers[0].url));return;}}else{_333(_336);return;}}}}_333(null);},showLabelServices:function(){var _337;for(var key in this.labelServices){_337=this.labelServices[key];_337.show();this.handleMoveLayerToTop(_337);}VIEWER_UTILS.debug("Displayed Label Services");this.labelServicesVisible=true;},hideLabelServices:function(){for(var key in this.labelServices){this.labelServices[key].hide();}VIEWER_UTILS.debug("Hid Label Services");this.labelServicesVisible=false;},handleAddReferenceLayerRequest:function(_338,_339,_33a){if(_338==null||_338.url==null||_338.url==""){if(_33a!=null&&lang.isFunction(_33a)){_33a("Invalid Reference Layer");}}var id=_338.url.toLowerCase();if(this.labelServices[id]!=null){if(_33a!=null&&lang.isFunction(_33a)){_33a("Reference Layer Already Exists");}}var _33b=this._addReferenceLayer(_338);if(_33b!=null){if(_339!=null&&lang.isFunction(_339)){_339(_33b);}}else{if(_33a!=null&&lang.isFunction(_33a)){_33a("Could not add reference layer");}}},addReferenceLayers:function(){if(this.mapConfiguration.referenceLayers!=null&&lang.isArray(this.mapConfiguration.referenceLayers)){var _33c;for(var i=0;i<this.mapConfiguration.referenceLayers.length;i++){_33c=this.mapConfiguration.referenceLayers[i];this._addReferenceLayer(_33c);}}},_addReferenceLayer:function(_33d){var _33e=this._getMapLayerFromLayerObject(_33d);if(_33e!=null){if(!this.labelServicesVisible){_33e.hide();}else{_33e.show();}var id=_33e.url.toLowerCase();this.labelServices[id]=_33e;_33e.isReferenceLayer=true;this.map.addLayer(_33e);VIEWER_UTILS.log("Added Reference Layer: "+_33e.url,VIEWER_GLOBALS.LOG_TYPE.INFO);_2eb.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REFERENCE_LAYER_ADDED,_33e);return _33e;}return null;},handleRemoveReferenceLayerRequest:function(_33f){var id=_33f.url.toLowerCase();if(this.labelServices[id]!=null){this.map.removeLayer(_33f);delete this.labelServices[id];var _340=false;for(var key in this.labelServices){_340=true;break;}VIEWER_UTILS.log("Removed reference layer",VIEWER_GLOBALS.LOG_TYPE.INFO);_2eb.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REFERENCE_LAYER_REMOVED,_33f,_340);}},addWebMapOperationalLayers:function(_341){var _342;var _343;for(var i=0;i<_341.itemData.operationalLayers.length;i++){_342=_341.itemData.operationalLayers[i];_343=_342.layerObject;_343.name=REG_EXP_UTILS.getServiceNameFromUrl(_343.url);_343.isOperationalLayer=true;var _344=_343.url.toLowerCase();if(this.operationalLayers[_344]==null){this.operationalLayers[_344]=_343;}VIEWER_UTILS.getServiceDescription(_343.url,lang.hitch(this,function(_345,_346){_345.serviceDescription=_346;this.handleLayerAdded(_345);},_343));}},addOperationalLayers:function(){if(this.mapConfiguration.operationalLayers!=null&&lang.isArray(this.mapConfiguration.operationalLayers)){var _347;for(var i=0;i<this.mapConfiguration.operationalLayers.length;i++){_347=this.mapConfiguration.operationalLayers[i];var _348=this._getMapLayerFromLayerObject(_347);if(_348!=null){VIEWER_UTILS.getServiceDescription(_347.url,lang.hitch(this,function(_349,_34a){_349.serviceDescription=_34a;},_348));_348.name=REG_EXP_UTILS.getServiceNameFromUrl(_347.url);if(_347.label!=null&&_347.label!=""){_348.layerAliasName=_347.label;}this.map.addLayer(_348);_348.isOperationalLayer=true;var _34b=_348.url.toLowerCase();if(this.operationalLayers[_34b]==null){this.operationalLayers[_34b]=_348;}}}}},_getMapLayerFromLayerObject:function(_34c){if(_34c.type==null||_34c.type==""||_34c.url==null||_34c.url==""){return null;}var _34d={};if(_34c.visible!=null){_34d.visible=_34c.visible;}var _34e=_34c.type.toLowerCase();if(_34e==="tiled"){return new _2f3(_34c.url,_34d);}else{if(_34e==="dynamic"){var _34f=new _2f4(_34c.url,_34d);if(_34c.visibleLayerIds!=null&&lang.isArray(_34c.visibleLayerIds)){_34f.setVisibleLayers(_34c.visibleLayerIds);}return _34f;}else{if(_34e==="image"){return new _2f0(_34c.url,_34d);}else{if(_34e==="feature"){_34d=lang.mixin(_34d,{mode:_2ee.MODE_ONDEMAND,outFields:["*"]});return new _2ee(_34c.url,_34d);}else{if(_34e==="kml"){return new _2f1(_34c.url);}}}}}}});});},"esriviewer/map/base/MapDisplayWidgets":function(){define("esriviewer/map/base/MapDisplayWidgets",["dojo/_base/declare","dojo/_base/lang","dojo/_base/window","dojo/dom-attr","dojo/dom-construct","dojo/dom-class","dojo/topic","esri/geometry/webMercatorUtils","esri/geometry/scaleUtils","esri/dijit/Scalebar"],function(_350,lang,_351,_352,_353,_354,_355,_356,_357,_358){return _350([],{useFooterCoordPosition:false,_defaultMgrsPrecision:6,showMgrs:false,showUTM:false,showLatLong:true,hideMapScale:false,showScaleBar:false,constructor:function(_359){lang.mixin(this,_359);this.mgrsPrecision=this._defaultMgrsPrecision;this.loadViewerConfigurationData();this.createMapScaleAndCoordsElement();this._initListeners();},loadViewerConfigurationData:function(){var _35a=null;_355.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_35b){_35a=_35b;});if(_35a&&lang.isObject(_35a)){if(_35a.display!=null&&lang.isObject(_35a.display)){if(_35a.display.showScale!=null&&_35a.display.showScale==false){this.hideMapScale=true;}if(_35a.display.showScaleBar!=null&&_35a.display.showScaleBar==true){this.showScaleBar=true;}if(_35a.display.showMGRS!=null&&_35a.display.showMGRS==true){this.showMgrs=true;}if(_35a.display.showUTM!=null&&_35a.display.showUTM==true){this.showUTM=true;}if(_35a.display.showLatLong!=null&&_35a.display.showLatLong==false){this.showLatLong=false;}if(_35a.display.mgrsPrecision!=null){this.mgrsPrecision=parseInt(_35a.display.mgrsPrecision,10);}}}var _35c=null;_355.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"footerTogglerWidget",function(_35d){_35c=_35d;});this.useFooterCoordPosition=_35c!=null&&lang.isObject(_35c)&&_35c.create;},_initListeners:function(){_355.subscribe(VIEWER_GLOBALS.EVENTS.MAP.INFO_WINDOW.HIDE,lang.hitch(this,this.handleHideInfoWindow));if(this.showLatLong||this.showMgrs||this.showUTM){this.map.on("mouse-move",lang.hitch(this,this.showCoords));}},handleHideInfoWindow:function(){if(this.map&&this.map.infoWindow&&this.map.infoWindow.isShowing){this.map.infoWindow.hide();}},createMapScaleAndCoordsElement:function(){var _35e=_353.create("div",{className:"threePixelBorderRadius mapalmanac"});if(this.useFooterCoordPosition){_354.add(_35e,"mapScaleAndCoordsContainerWithFooter");}else{_354.add(_35e,"mapScaleAndCoordsContainer");}if(!this.hideMapScale){this.scaleInfoElement=_353.create("span",{className:"mapScaleInfoInner"});_353.place(this.scaleInfoElement,_35e);}if(this.showScaleBar){var _35f=new _358({map:this.map,scalebarUnit:"dual"});}if(this.showLatLong||this.showMgrs||this.showUTM){if(!this.hideMapScale){_353.place(_353.create("span",{innerHTML:"|"}),_35e);}if(this.showLatLong){this.latLongCoordsInfoElement=_353.create("span",{className:"mapCoordsInfoInner"});_353.place(this.latLongCoordsInfoElement,_35e);}if(this.showMgrs){if(this.showLatLong){_353.place(_353.create("span",{innerHTML:"|"}),_35e);}this.mrgsCoordsInfoElement=_353.create("span",{className:"mapCoordsInfoInner"});_353.place(this.mrgsCoordsInfoElement,_35e);}if(this.showUTM){if(this.showLatLong||this.showMgrs){_353.place(_353.create("span",{innerHTML:"|"}),_35e);}this.utmCoordsInfoElement=_353.create("span",{className:"mapCoordsInfoInner"});_353.place(this.utmCoordsInfoElement,_35e);}}_355.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAP_SCALE_AND_COORDINATES,_35e);},showCoords:function(evt){try{if(this.latLongCoordsInfoElement||this.mrgsCoordsInfoElement||this.utmCoordsInfoElement){var pnt=_356.webMercatorToGeographic(evt.mapPoint||evt);if(this.latLongCoordsInfoElement){if(pnt===null||pnt===undefined){return;}_352.set(this.latLongCoordsInfoElement,"innerHTML","Lat: "+pnt.y.toFixed(2)+"&deg"+((pnt.y<0)?"S":"N")+"  Lon: "+pnt.x.toFixed(2)+"&deg"+((pnt.x<0)?"W":"E"));}if(this.mrgsCoordsInfoElement){_352.set(this.mrgsCoordsInfoElement,"innerHTML","<span style='font-weight:bold'>MGRS</span> "+PROJECTION_UTILS.LLtoMGRS(pnt.y,pnt.x,this.mgrsPrecision));}if(this.utmCoordsInfoElement){var _360=PROJECTION_UTILS.LLtoUTM(pnt.y,pnt.x);if(_360.northing==null||isNaN(_360.northing)){_360.northing="?";}else{_360.northing=_360.northing.toFixed(3);}if(_360.easting==null||isNaN(_360.easting)){_360.easting="?";}else{_360.easting=_360.easting.toFixed(3);}_352.set(this.utmCoordsInfoElement,"innerHTML","<span style='font-weight:bold'>UTM</span> "+"N: "+_360.northing+" E: "+_360.easting+"   Z: "+_360.zone);}}}catch(e){}},showScale:function(){var a=Math.round(_357.getScale(this.map));a>999&&a<=999999?a=Math.round(a/1000)+" K":a>999999?a=Math.round(a/1000000)+" M":a>0&&a<=999&&(a=Math.round(a)+" Ft");_352.set(this.scaleInfoElement,"innerHTML","<span style='font-weight:bold'>Scale</span> 1 <b>:</b> "+a);}});});},"dijit/PopupMenuItem":function(){define("dijit/PopupMenuItem",["dojo/_base/declare","dojo/dom-style","dojo/query","./registry","./MenuItem","./hccss"],function(_361,_362,_363,_364,_365){return _361("dijit.PopupMenuItem",_365,{_fillContent:function(){if(this.srcNodeRef){var _366=_363("*",this.srcNodeRef);this.inherited(arguments,[_366[0]]);this.dropDownContainer=this.srcNodeRef;}},startup:function(){if(this._started){return;}this.inherited(arguments);if(!this.popup){var node=_363("[widgetId]",this.dropDownContainer)[0];this.popup=_364.byNode(node);}this.ownerDocumentBody.appendChild(this.popup.domNode);this.popup.startup();this.popup.domNode.style.display="none";if(this.arrowWrapper){_362.set(this.arrowWrapper,"visibility","");}this.focusNode.setAttribute("aria-haspopup","true");},destroyDescendants:function(_367){if(this.popup){if(!this.popup._destroyed){this.popup.destroyRecursive(_367);}delete this.popup;}this.inherited(arguments);}});});},"dojox/flash":function(){define("dojox/flash",["./flash/_base"],function(){});},"dijit/form/RadioButton":function(){define("dijit/form/RadioButton",["dojo/_base/declare","./CheckBox","./_RadioButtonMixin"],function(_368,_369,_36a){return _368("dijit.form.RadioButton",[_369,_36a],{baseClass:"dijitRadio"});});},"esriviewer/ui/layers/base/LayersLocalStorageMixin":function(){define("esriviewer/ui/layers/base/LayersLocalStorageMixin",["dojo/_base/declare","dojo/_base/lang","dojo/has"],function(_36b,lang,has){return _36b([],{localStoragePersistSupported:true,constructor:function(){if(!(has("ie")<8)){this.localStoragePersistSupported=false;}this.storageProvider=dojox.storage.manager.getProvider();if(this.storageProvider){this.localStoragePersistSupported=true;}this.persistedUserLayers=this.loadPersistedUserLayers();},deleteUserPersistedLayer:function(_36c){if(_36c!=null&&_36c!=""){if(this.persistUserLayerExists(_36c)){var _36d=_36c.toLowerCase();delete this.persistedUserLayers[_36d];this.persist();}}},removeAllLayers:function(){this.persistedUserLayers={};this.persist();},persistUserLayerExists:function(_36e){if(_36e==null||_36e==""){return true;}var _36f=_36e.toLowerCase();return this.persistedUserLayers[_36f]!=null;},persistUserLayer:function(_370){if(_370.url==null||_370.url==""){return null;}if(this.persistUserLayerExists(_370.url)){return null;}else{var name=VIEWER_UTILS.getLayerNameFromLayer(_370);var _371={url:_370.url,name:name};this.persistedUserLayers[_370.url.toLowerCase()]=_371;this.persist();return _371;}},loadPersistedUserLayers:function(){if(this.storageProvider){if(this.storageProvider.hasKey(VIEWER_GLOBALS.STORAGE.LABELS.LAYERS)){return this.storageProvider.get(VIEWER_GLOBALS.STORAGE.LABELS.LAYERS);}}return {};},persist:function(){this.storageProvider.put(VIEWER_GLOBALS.STORAGE.LABELS.LAYERS,this.persistedUserLayers);}});});},"esriviewer/ui/layers/base/LayersTocWidgetContextMenu":function(){define("esriviewer/ui/layers/base/LayersTocWidgetContextMenu",["dojo/_base/declare","dojo/topic","dojo/on","dojo/_base/lang","dojo/dom-style","dojo/dom-attr","dijit/Menu","dijit/MenuItem","dijit/PopupMenuItem","dijit/registry","dojo/_base/connect"],function(_372,_373,on,lang,_374,_375,Menu,_376,_377,_378,con){return _372([],{showRemoveMenuItems:true,constructor:function(_379){lang.mixin(this,_379);this.initialize();},initialize:function(){this.createServerMenu();this.createGroupLayerMenu();this.createLayerMenu();this.createGraphicsLayerMenu();this.initListeners();},initListeners:function(){this.zoomToExtentMenuItem.on("click",lang.hitch(this,this.handleZoomToExtent));this.openMapServiceDescriptionMenu.on("click",lang.hitch(this,this.handleOpenMapServerDescriptionMenuRequest));this.confirmRemoveLayerMenuItem.on("click",lang.hitch(this,this.handleRemoveLayer));this.confirmRemoveGraphicLayerMenuItem.on("click",lang.hitch(this,this.handleRemoveGraphicsLayer));con.connect(this.serverNodeMenu,"_openMyself",lang.hitch(this,this.handleServerMenuOpen));con.connect(this.groupNodeMenu,"_openMyself",lang.hitch(this,this.handleGroupMenuOpen));con.connect(this.graphicsLayerMenu,"_openMyself",lang.hitch(this,this.handleGraphicsLayerMenuOpen));},createServerMenu:function(){this.serverNodeMenu=new Menu();this.zoomToExtentMenuItem=new _376({label:"Zoom To Extent",iconClass:"commonIcons16 locationGoTo"});this.openMapServiceDescriptionMenu=new _376({label:"View Service Description",iconClass:"serviceDescriptionIcon"});this.serverNodeMenu.addChild(this.zoomToExtentMenuItem);this.serverNodeMenu.addChild(this.openMapServiceDescriptionMenu);var _37a=new Menu();this.confirmRemoveLayerMenuItem=new _376({label:"Confirm",iconClass:"commonIcons16 question"});_37a.addChild(this.confirmRemoveLayerMenuItem);this.removeServiceMenuItem=new _377({iconClass:"commonIcons16 delete",label:"Remove Layer",popup:_37a});this.serverNodeMenu.addChild(this.removeServiceMenuItem);this.serverNodeMenu.startup();},createGraphicsLayerMenu:function(){this.graphicsLayerMenu=new Menu();var _37b=new Menu();this.confirmRemoveGraphicLayerMenuItem=new _376({label:"Confirm",iconClass:"commonIcons16 question"});_37b.addChild(this.confirmRemoveGraphicLayerMenuItem);this.removeGraphicLayerMenuItem=new _377({iconClass:"commonIcons16 delete",label:"Remove Graphics Layer",popup:_37b});this.graphicsLayerMenu.addChild(this.removeGraphicLayerMenuItem);this.graphicsLayerMenu.startup();},createLayerMenu:function(){this.layerNodeMenu=new Menu();this.layerNodeMenu.startup();},createGroupLayerMenu:function(){this.groupNodeMenu=new Menu();this.groupNodeMenu.startup();_374.set(this.groupNodeMenu.domNode,"display","none");},handleGroupMenuOpen:function(){_374.set(this.groupNodeMenu.domNode,"display","none");return false;},bindNodeToGraphicsLayerMenu:function(node){this.bindNode(node,this.graphicsLayerMenu);},bindNodeToServerMenu:function(node){this.bindNode(node,this.serverNodeMenu);},bindNodeToGroupMenu:function(node){this.bindNode(node,this.groupNodeMenu);},bindNodeToLayerMenu:function(node){this.bindNode(node,this.layerNodeMenu);},bindNodeToNoContentMenu:function(node){on(node,"contextmenu",function(e){e.stopPropagation();});},bindNode:function(node,menu){if(node&&menu&&menu.bindDomNode){menu.bindDomNode(node);}},handleRemoveGraphicsLayer:function(){if(this.currentGraphicsLayerNodeFromMenu&&this.currentGraphicsLayerNodeFromMenu.item){var _37c=this.getTreeStore().getValue(this.currentGraphicsLayerNodeFromMenu.item,"layer");if(_37c){_373.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE,_37c);}}},handleGraphicsLayerMenuOpen:function(e){var node=_378.getEnclosingWidget(e.target);this.currentGraphicsLayerNodeFromMenu=node;if(this.currentGraphicsLayerNodeFromMenu&&this.currentGraphicsLayerNodeFromMenu.item){var _37d=this.getTreeStore().getValue(this.currentGraphicsLayerNodeFromMenu.item,"layer");if(_37d){if(_37d.removable!=null&&_37d.removable===true){this.removeGraphicLayerMenuItem.attr("disabled",false);}else{this.removeGraphicLayerMenuItem.attr("disabled",true);}}}},handleServerMenuOpen:function(e){var node=_378.getEnclosingWidget(e.target);this.currentServerNodeFromMenu=node;if(this.currentServerNodeFromMenu&&this.currentServerNodeFromMenu.item){var _37e=this.getTreeStore().getValue(this.currentServerNodeFromMenu.item,"layer");if(_37e){if(_37e.canRemove!=null&&_37e.canRemove===true){this.removeServiceMenuItem.attr("disabled",false);}else{this.removeServiceMenuItem.attr("disabled",true);}}}},handleZoomToExtent:function(){if(this.currentServerNodeFromMenu&&this.currentServerNodeFromMenu.item){var _37f=this.getTreeStore().getValue(this.currentServerNodeFromMenu.item,"layer");if(_37f){_373.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,_37f.initialExtent);}}this.currentServerNodeFromMenu=null;},handleRemoveLayer:function(){if(this.currentServerNodeFromMenu&&this.currentServerNodeFromMenu.item){var _380=this.getTreeStore().getValue(this.currentServerNodeFromMenu.item,"layer");if(_380){if(_380.canRemove!=null&&_380.canRemove===true){_373.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE,_380);}}}this.currentServerNodeFromMenu=null;},handleOpenMapServerDescriptionMenuRequest:function(){if(this.currentServerNodeFromMenu&&this.currentServerNodeFromMenu.item){var _381=this.getTreeStore().getValue(this.currentServerNodeFromMenu.item,"layer");if(_381&&_381.url){this.openUrlInWindow(_381.url);}}this.currentMapServerNodeFromMenu=null;},openUrlInWindow:function(url){if(url){window.open(url);}},getTreeStore:function(){return this.tree.model.store;}});});},"url:dijit/form/templates/HorizontalSlider.html":"<table class=\"dijit dijitReset dijitSlider dijitSliderH\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" rules=\"none\" data-dojo-attach-event=\"onkeypress:_onKeyPress,onkeyup:_onKeyUp\"\n\trole=\"presentation\"\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td data-dojo-attach-point=\"topDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\n\t\t\t><div class=\"dijitSliderDecrementIconH\" style=\"display:none\" data-dojo-attach-point=\"decrementButton\"><span class=\"dijitSliderButtonInner\">-</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper\" data-dojo-attach-event=\"press:_onClkDecBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><input data-dojo-attach-point=\"valueNode\" type=\"hidden\" ${!nameAttrSetting}\n\t\t\t/><div class=\"dijitReset dijitSliderBarContainerH\" role=\"presentation\" data-dojo-attach-point=\"sliderBarContainer\"\n\t\t\t\t><div role=\"presentation\" data-dojo-attach-point=\"progressBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH\" data-dojo-attach-event=\"press:_onBarClick\"\n\t\t\t\t\t><div class=\"dijitSliderMoveable dijitSliderMoveableH\"\n\t\t\t\t\t\t><div data-dojo-attach-point=\"sliderHandle,focusNode\" class=\"dijitSliderImageHandle dijitSliderImageHandleH\" data-dojo-attach-event=\"press:_onHandleClick\" role=\"slider\"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t\t><div role=\"presentation\" data-dojo-attach-point=\"remainingBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH\" data-dojo-attach-event=\"press:_onBarClick\"></div\n\t\t\t></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper\" data-dojo-attach-event=\"press:_onClkIncBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\n\t\t\t><div class=\"dijitSliderIncrementIconH\" style=\"display:none\" data-dojo-attach-point=\"incrementButton\"><span class=\"dijitSliderButtonInner\">+</span></div\n\t\t></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td data-dojo-attach-point=\"containerNode,bottomDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n></table>\n","esriviewer/ui/draw/base/MapDrawSupport":function(){define("esriviewer/ui/draw/base/MapDrawSupport",["dojo/_base/declare","dojo/topic","dojo/_base/Color","dojo/_base/lang","dojo/dom-construct","dijit/form/TextBox","dijit/TooltipDialog","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Extent","esri/geometry/screenUtils","esri/graphic","esri/symbols/TextSymbol","esri/symbols/Font"],function(_382,_383,_384,lang,_385,_386,_387,_388,_389,_38a,_38b,_38c,_38d,_38e,Font){return _382([],{constructor:function(){this.polygonOptions={};this.pointOptions={};this.envelopeOptions={};this.lineOptions={};this.geometryAddedCallback=lang.hitch(this,this.geometryAdded);},clearDraw:function(){this.currentDrawType=null;},setDraw:function(type){if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT){this.activatePointDraw();}else{if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE){this.activatePolylineDraw(this.freehandActive);}else{if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_LINE){this.activateLineDraw();}else{if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON){this.activatePolygonDraw(this.freehandActive);}else{if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_RECTANGLE){this.activateRectangleDraw();}else{if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT){this.activatePointDraw();}}}}}}this.currentDrawType=type;},activatePointDraw:function(){this.cancelDrawChangeListener();_383.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.POINT_INPUT,this.geometryAddedCallback,this.pointOptions);this.setupClearDrawCallback();},activateLineDraw:function(){this.cancelDrawChangeListener();_383.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.LINE_INPUT,this.geometryAddedCallback,this.lineOptions);this.setupClearDrawCallback();},activatePolylineDraw:function(_38f){this.cancelDrawChangeListener();if(_38f==null||_38f===false){_383.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.POLYLINE_INPUT,this.geometryAddedCallback,this.lineOptions);}else{_383.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.FREEHAND_POLYLINE_INPUT,this.geometryAddedCallback,this.lineOptions);}this.setupClearDrawCallback();},activatePolygonDraw:function(_390){this.cancelDrawChangeListener();if(_390==null||_390===false){_383.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.POLYGON_INPUT,this.geometryAddedCallback,this.polygonOptions);}else{_383.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.FREEHAND_POLYGON_INPUT,this.geometryAddedCallback,this.polygonOptions);}this.setupClearDrawCallback();},activateRectangleDraw:function(){this.cancelDrawChangeListener();_383.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.RECTANGLE_INPUT,this.geometryAddedCallback,this.envelopeOptions);this.setupClearDrawCallback();},cancelDrawChangeListener:function(){if(this.toolChangeConnect){this.toolChangeConnect.remove();this.toolChangeConnect=null;}},geometryAdded:function(_391){if(_391==null){return;}var _392=null;var type=null;if(_391 instanceof _388){type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT;if(this.currentDrawType==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT){type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT;_392=this.cloneTextSymbol(this.textSymbol);_392.setText("");var _393;var _394;_383.publish(VIEWER_GLOBALS.EVENTS.MAP.DIMENSIONS.GET,function(_395){_393=_395;});_383.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,function(_396){_394=_396;});var _397=_38c.toScreenPoint(_394,_393.width,_393.height,_391);this.showTextSymbolTooltip(_397);}else{type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT;_392=this.pointSymbol;}}else{if(_391 instanceof _389){_392=this.lineSymbol;type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE;}else{if(_391 instanceof _38a){_392=this.polygonSymbol;type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON;}else{if(_391 instanceof _38b){_392=this.envelopeSymbol;type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_RECTANGLE;}}}}if(_392!=null&&type!=null){if(type===VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT){this.currentTextGraphic=new _38d(_391,_392);}else{var _398=new _38d(_391,_392);var uuid=VIEWER_UTILS.generateUUID();this.onAnnotationCreated({id:uuid,type:type,graphic:_398});}}},onClearDraw:function(){},onAnnotationCreated:function(_399){},setupClearDrawCallback:function(){this.toolChangeConnect=_383.subscribe(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,lang.hitch(this,this.handleClearDraw));},handleClearDraw:function(){this.cancelDrawChangeListener();this.clearDraw();this.onClearDraw();},createTextSymbolLabelTooltip:function(){var _39a=_385.create("div");var _39b=_385.create("span",{innerHTML:"Label: ",className:"textSymbolInputLabel"});this.textSymbolLabelInput=new _386({value:"Label"});this.textSymbolLabelInput.on("keyUp",lang.hitch(this,this.handleTextSymbolKeyUp));_385.place(_39b,_39a);_385.place(this.textSymbolLabelInput.domNode,_39a);this.textSymbolLabelTooltip=new _387({content:_39a});},handleTextSymbolKeyUp:function(e){if(VIEWER_UTILS.isEnterKey(e)){this.finalizeTextSymbol();this.hideTextSymbolTooltip();}},finalizeTextSymbol:function(){if(this.currentTextGraphic==null||this.currentTextGraphic.symbol==null){return;}var _39c=this.textSymbolLabelInput.get("value");if(_39c==""){_39c="Label";}this.currentTextGraphic.symbol.setText(_39c);var uuid=VIEWER_UTILS.generateUUID();this.onAnnotationCreated({id:uuid,type:VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT,graphic:this.currentTextGraphic});this.currentTextSymbol=null;},showTextSymbolTooltip:function(_39d){if(this.textSymbolLabelTooltip==null){this.createTextSymbolLabelTooltip();}if(this.textSymbolLabelTooltip){dijit.popup.open({popup:this.textSymbolLabelTooltip,x:_39d.x,y:_39d.y});this.textSymbolLabelInput.set("value","");this.textSymbolLabelInput.focus();}},hideTextSymbolTooltip:function(){if(this.textSymbolLabelTooltip){dijit.popup.close(this.textSymbolLabelTooltip);}},cloneTextSymbol:function(){var _39e=new _38e("");_39e.setColor(new _384(this.textSymbol.color));_39e.setAlign(this.textSymbol.align);_39e.setAngle(this.textSymbol.angle);_39e.setFont(new Font(this.textSymbol.font.size));_39e.font.setWeight(this.textSymbol.font.weight);_39e.font.setStyle(this.textSymbol.font.style);return _39e;}});});},"esriviewer/map/base/MapTimeTools":function(){define("esriviewer/map/base/MapTimeTools",["dojo/_base/declare","dojo/topic","dojo/_base/lang"],function(_39f,_3a0,lang){return _39f([],{constructor:function(_3a1){lang.mixin(this,_3a1);this._initListeners();},_initListeners:function(){_3a0.subscribe(VIEWER_GLOBALS.EVENTS.MAP.TIME.CLEAR_TIME_EXTENT,lang.hitch(this,this.handleClearTimeExtent));_3a0.subscribe(VIEWER_GLOBALS.EVENTS.MAP.TIME.SET_MAP_TIME_SLIDER,lang.hitch(this,this.handleSetMapTimeSlider));},handleSetMapTimeSlider:function(_3a2){this.map.setTimeSlider(_3a2);_3a0.publish(VIEWER_GLOBALS.EVENTS.MAP.TIME.MAP_TIME_EXTENT_SET);},handleClearTimeExtent:function(){this.map.setTimeSlider(null);this.map.setTimeExtent(null);_3a0.publish(VIEWER_GLOBALS.EVENTS.MAP.TIME.MAP_TIME_EXTENT_CLEARED);}});});},"dojox/storage/LocalStorageProvider":function(){define("dojox/storage/LocalStorageProvider",["dijit","dojo","dojox","dojo/require!dojox/storage/Provider,dojox/storage/manager"],function(_3a3,dojo,_3a4){dojo.provide("dojox.storage.LocalStorageProvider");dojo.require("dojox.storage.Provider");dojo.require("dojox.storage.manager");dojo.declare("dojox.storage.LocalStorageProvider",[_3a4.storage.Provider],{store:null,initialize:function(){this.store=localStorage;this.initialized=true;_3a4.storage.manager.loaded();},isAvailable:function(){return typeof localStorage!="undefined";},put:function(key,_3a5,_3a6,_3a7){this._assertIsValidKey(key);_3a7=_3a7||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_3a7);var _3a8=this.getFullKey(key,_3a7);_3a5=dojo.toJson(_3a5);try{this.store.setItem(_3a8,_3a5);if(_3a6){_3a6(this.SUCCESS,key,null,_3a7);}}catch(e){if(_3a6){_3a6(this.FAILED,key,e.toString(),_3a7);}}},get:function(key,_3a9){this._assertIsValidKey(key);_3a9=_3a9||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_3a9);key=this.getFullKey(key,_3a9);return dojo.fromJson(this.store.getItem(key));},getKeys:function(_3aa){_3aa=_3aa||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_3aa);_3aa="__"+_3aa+"_";var keys=[];for(var i=0;i<this.store.length;i++){var _3ab=this.store.key(i);if(this._beginsWith(_3ab,_3aa)){_3ab=_3ab.substring(_3aa.length);keys.push(_3ab);}}return keys;},clear:function(_3ac){_3ac=_3ac||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_3ac);_3ac="__"+_3ac+"_";var keys=[];for(var i=0;i<this.store.length;i++){if(this._beginsWith(this.store.key(i),_3ac)){keys.push(this.store.key(i));}}dojo.forEach(keys,dojo.hitch(this.store,"removeItem"));},remove:function(key,_3ad){_3ad=_3ad||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_3ad);this.store.removeItem(this.getFullKey(key,_3ad));},getNamespaces:function(){var _3ae=[this.DEFAULT_NAMESPACE];var _3af={};_3af[this.DEFAULT_NAMESPACE]=true;var _3b0=/^__([^_]*)_/;for(var i=0;i<this.store.length;i++){var _3b1=this.store.key(i);if(_3b0.test(_3b1)==true){var _3b2=_3b1.match(_3b0)[1];if(typeof _3af[_3b2]=="undefined"){_3af[_3b2]=true;_3ae.push(_3b2);}}}return _3ae;},isPermanent:function(){return true;},getMaximumSize:function(){return _3a4.storage.SIZE_NO_LIMIT;},hasSettingsUI:function(){return false;},isValidKey:function(_3b3){if(_3b3===null||_3b3===undefined){return false;}return /^[0-9A-Za-z_-]*$/.test(_3b3);},isValidNamespace:function(_3b4){if(_3b4===null||_3b4===undefined){return false;}return /^[0-9A-Za-z-]*$/.test(_3b4);},getFullKey:function(key,_3b5){return "__"+_3b5+"_"+key;},_beginsWith:function(_3b6,_3b7){if(_3b7.length>_3b6.length){return false;}return _3b6.substring(0,_3b7.length)===_3b7;},_assertIsValidNamespace:function(_3b8){if(this.isValidNamespace(_3b8)===false){throw new Error("Invalid namespace given: "+_3b8);}},_assertIsValidKey:function(key){if(this.isValidKey(key)===false){throw new Error("Invalid key given: "+key);}}});_3a4.storage.manager.register("dojox.storage.LocalStorageProvider",new _3a4.storage.LocalStorageProvider());});},"dojox/storage/GearsStorageProvider":function(){define("dojox/storage/GearsStorageProvider",["dijit","dojo","dojox","dojo/require!dojo/gears,dojox/storage/Provider,dojox/storage/manager,dojox/sql"],function(_3b9,dojo,_3ba){dojo.provide("dojox.storage.GearsStorageProvider");dojo.require("dojo.gears");dojo.require("dojox.storage.Provider");dojo.require("dojox.storage.manager");dojo.require("dojox.sql");if(dojo.gears.available){(function(){dojo.declare("dojox.storage.GearsStorageProvider",_3ba.storage.Provider,{constructor:function(){},TABLE_NAME:"__DOJO_STORAGE",initialized:false,_available:null,_storageReady:false,initialize:function(){if(dojo.config["disableGearsStorage"]==true){return;}this.TABLE_NAME="__DOJO_STORAGE";this.initialized=true;_3ba.storage.manager.loaded();},isAvailable:function(){return this._available=dojo.gears.available;},put:function(key,_3bb,_3bc,_3bd){this._initStorage();if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}_3bd=_3bd||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_3bd)){throw new Error("Invalid namespace given: "+key);}if(dojo.isString(_3bb)){_3bb="string:"+_3bb;}else{_3bb=dojo.toJson(_3bb);}try{_3ba.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND key = ?",_3bd,key);_3ba.sql("INSERT INTO "+this.TABLE_NAME+" VALUES (?, ?, ?)",_3bd,key,_3bb);}catch(e){_3bc(this.FAILED,key,e.toString(),_3bd);return;}if(_3bc){_3bc(_3ba.storage.SUCCESS,key,null,_3bd);}},get:function(key,_3be){this._initStorage();if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}_3be=_3be||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_3be)){throw new Error("Invalid namespace given: "+key);}var _3bf=_3ba.sql("SELECT * FROM "+this.TABLE_NAME+" WHERE namespace = ? AND "+" key = ?",_3be,key);if(!_3bf.length){return null;}else{_3bf=_3bf[0].value;}if(dojo.isString(_3bf)&&(/^string:/.test(_3bf))){_3bf=_3bf.substring("string:".length);}else{_3bf=dojo.fromJson(_3bf);}return _3bf;},getNamespaces:function(){this._initStorage();var _3c0=[_3ba.storage.DEFAULT_NAMESPACE];var rs=_3ba.sql("SELECT namespace FROM "+this.TABLE_NAME+" DESC GROUP BY namespace");for(var i=0;i<rs.length;i++){if(rs[i].namespace!=_3ba.storage.DEFAULT_NAMESPACE){_3c0.push(rs[i].namespace);}}return _3c0;},getKeys:function(_3c1){this._initStorage();_3c1=_3c1||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_3c1)){throw new Error("Invalid namespace given: "+_3c1);}var rs=_3ba.sql("SELECT key FROM "+this.TABLE_NAME+" WHERE namespace = ?",_3c1);var _3c2=[];for(var i=0;i<rs.length;i++){_3c2.push(rs[i].key);}return _3c2;},clear:function(_3c3){this._initStorage();_3c3=_3c3||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_3c3)){throw new Error("Invalid namespace given: "+_3c3);}_3ba.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ?",_3c3);},remove:function(key,_3c4){this._initStorage();if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}_3c4=_3c4||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_3c4)){throw new Error("Invalid namespace given: "+key);}_3ba.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND"+" key = ?",_3c4,key);},putMultiple:function(keys,_3c5,_3c6,_3c7){this._initStorage();if(!this.isValidKeyArray(keys)||!_3c5 instanceof Array||keys.length!=_3c5.length){throw new Error("Invalid arguments: keys = ["+keys+"], values = ["+_3c5+"]");}if(_3c7==null||typeof _3c7=="undefined"){_3c7=_3ba.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_3c7)){throw new Error("Invalid namespace given: "+_3c7);}this._statusHandler=_3c6;try{_3ba.sql.open();_3ba.sql.db.execute("BEGIN TRANSACTION");var _3c8="REPLACE INTO "+this.TABLE_NAME+" VALUES (?, ?, ?)";for(var i=0;i<keys.length;i++){var _3c9=_3c5[i];if(dojo.isString(_3c9)){_3c9="string:"+_3c9;}else{_3c9=dojo.toJson(_3c9);}_3ba.sql.db.execute(_3c8,[_3c7,keys[i],_3c9]);}_3ba.sql.db.execute("COMMIT TRANSACTION");_3ba.sql.close();}catch(e){if(_3c6){_3c6(this.FAILED,keys,e.toString(),_3c7);}return;}if(_3c6){_3c6(_3ba.storage.SUCCESS,keys,null,_3c7);}},getMultiple:function(keys,_3ca){this._initStorage();if(!this.isValidKeyArray(keys)){throw new ("Invalid key array given: "+keys);}if(_3ca==null||typeof _3ca=="undefined"){_3ca=_3ba.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_3ca)){throw new Error("Invalid namespace given: "+_3ca);}var _3cb="SELECT * FROM "+this.TABLE_NAME+" WHERE namespace = ? AND "+" key = ?";var _3cc=[];for(var i=0;i<keys.length;i++){var _3cd=_3ba.sql(_3cb,_3ca,keys[i]);if(!_3cd.length){_3cc[i]=null;}else{_3cd=_3cd[0].value;if(dojo.isString(_3cd)&&(/^string:/.test(_3cd))){_3cc[i]=_3cd.substring("string:".length);}else{_3cc[i]=dojo.fromJson(_3cd);}}}return _3cc;},removeMultiple:function(keys,_3ce){this._initStorage();if(!this.isValidKeyArray(keys)){throw new Error("Invalid arguments: keys = ["+keys+"]");}if(_3ce==null||typeof _3ce=="undefined"){_3ce=_3ba.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_3ce)){throw new Error("Invalid namespace given: "+_3ce);}_3ba.sql.open();_3ba.sql.db.execute("BEGIN TRANSACTION");var _3cf="DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND key = ?";for(var i=0;i<keys.length;i++){_3ba.sql.db.execute(_3cf,[_3ce,keys[i]]);}_3ba.sql.db.execute("COMMIT TRANSACTION");_3ba.sql.close();},isPermanent:function(){return true;},getMaximumSize:function(){return this.SIZE_NO_LIMIT;},hasSettingsUI:function(){return false;},showSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},hideSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},_initStorage:function(){if(this._storageReady){return;}if(!google.gears.factory.hasPermission){var _3d0=null;var icon=null;var msg="This site would like to use Google Gears to enable "+"enhanced functionality.";var _3d1=google.gears.factory.getPermission(_3d0,icon,msg);if(!_3d1){throw new Error("You must give permission to use Gears in order to "+"store data");}}try{_3ba.sql("CREATE TABLE IF NOT EXISTS "+this.TABLE_NAME+"( "+" namespace TEXT, "+" key TEXT, "+" value TEXT "+")");_3ba.sql("CREATE UNIQUE INDEX IF NOT EXISTS namespace_key_index"+" ON "+this.TABLE_NAME+" (namespace, key)");}catch(e){throw new Error("Unable to create storage tables for Gears in "+"Dojo Storage");}this._storageReady=true;}});_3ba.storage.manager.register("dojox.storage.GearsStorageProvider",new _3ba.storage.GearsStorageProvider());})();}});},"esriviewer/base/LocationSupport":function(){define("esriviewer/base/LocationSupport",["dojo/_base/declare","dojo/_base/lang","dojo/topic"],function(_3d2,lang,_3d3){return _3d2([],{handleLocate:function(_3d4,_3d5){this.currentLocateRequestId=VIEWER_UTILS.generateUUID();this.requestCompleteHandle=_3d3.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_REQUEST_COMPLETE,lang.hitch(this,this._handleLocateRequestComplete));this.requreErrorHandle=_3d3.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_REQUEST_ERROR,lang.hitch(this,this._handleLocateRequestError));VIEWER_UTILS.log("Locating: "+_3d4,VIEWER_GLOBALS.LOG_TYPE.INFO);_3d3.publish(VIEWER_GLOBALS.EVENTS.LOCATOR.SINGLE_LINE_ADDRESS_TO_LOCATION,_3d4,this.currentLocateRequestId,_3d5);},_handleLocateRequestComplete:function(_3d6){if(_3d6.requestId==this.currentLocateRequestId){this.handleLocationResponse(_3d6.addressCandidates);this.requestCompleteHandle.remove();this.requreErrorHandle.remove();}},_handleLocateRequestError:function(_3d7){VIEWER_UTILS.log("Locator Failed",VIEWER_GLOBALS.LOG_TYPE.ERROR);this.requestCompleteHandle.remove();this.requreErrorHandle.remove();},handleLocationResponse:function(_3d8){}});});},"esriviewer/ui/draw/base/model/UserPersistedGraphicsListViewModel":function(){define("esriviewer/ui/draw/base/model/UserPersistedGraphicsListViewModel",["dojo/_base/declare","dojo/topic","dojo/Evented"],function(_3d9,_3da,_3db){return _3d9([_3db],{REMOVE_USER_PERSISTED_GRAPHICS:"removeUserPersistedGraphic",ADD_USER_PERSISTED_GRAPHICS_TO_MAP:"addUserPersistedGraphicsToMap",constructor:function(){var self=this;this.addedUserPersistedGraphics=ko.observableArray();this.removeUserPersistedGraphic=function(_3dc){if(_3dc==null){return;}self.emit(self.REMOVE_USER_PERSISTED_GRAPHICS,_3dc);self.addedUserPersistedGraphics.remove(_3dc);};this.addSavedGraphics=function(_3dd){if(_3dd==null){return;}self.emit(self.ADD_USER_PERSISTED_GRAPHICS_TO_MAP,_3dd);};},sort:function(){this.addedUserPersistedGraphics.sort(function(left,_3de){var _3df=left.label.toLowerCase();var _3e0=_3de.label.toLowerCase();return _3df==_3e0?0:(_3df<_3e0?-1:1);});}});});},"esriviewer/base/ViewerGlobals":function(){define("esriviewer/base/ViewerGlobals",["dojo/_base/declare"],function(_3e1){return _3e1([],{EVENTS:{CSS:{CORE_UI_THEME_LOADED:"css:coreUILoaded"},MAP:{GET_MAP_DIV:"map:getMapDiv",GET:"map:get",INFO_WINDOW:{HIDE:"mapInfoWin:hide"},LEGEND:{CREATE:"legend:create"},RESIZE:"map:resize",LOADED:"map:loaded",ACTIONS:{TOOL_CHANGED:"MapMan:tlChngd"},FLASH:{POINT:"mapFlash:point"},LAYERS:{TRANSPARENCY:{WINDOW:{SHOW:"layerTransWindow:show",HIDE:"layerTransWindow:hide",TOGGLE:"layerTransWindow:toggle"},SET:"layerTrans:setTransparency"},WIDGET:{SHOW:"layersWidget:show"},OPERATIONAL:{GET:"operationalLayers:get"},ADD_GRAPHICS_LAYER:"layers:addGraphicsLayer",ADD_FROM_URL:"layers:addFromUrl",ADD:"layers:add",REMOVE:"layers:remove",REMOVED:"layers:removed",ADDED:"layers:added",ADD_REFERENCE_LAYER:"reference:addLayer",REMOVE_REFERENCE_LAYER:"reference:removeLayer",REFERENCE_LAYER_ADDED:"reference:added",REFERENCE_LAYER_REMOVED:"reference:removed",ADD_EXTERNAL_MANAGED_LAYER:"layers:addExternalManagedLayer",REMOVE_EXTERNAL_MANAGED_LAYER:"layers:removeExternalManagedLayer",GET_FEATURE_LAYER_IF_EXISTS:"layers:getFeatureLayerIfExists",MOVE_LAYER_TO_TOP:"layers:moveLayerToTop",QUERY_LAYER:"layers:queryLayer",MAKE_VISIBLE:"layers:makeLayerVisible",MAKE_INVISIBLE:"layers:makeLayerInvisible"},TOOLS:{DRAW_POINT:"tldr:dPt",DRAW_POLYGON:"tldr:dPoly",DRAW_RECTANGLE:"tldr:dRect",DRAW_FREEHAND_POLYGON:"tldr:dFPoly",DRAW_FREEHAND_LINE:"tldr:dFln",DRAW_LINE:"tldr:dLn",DRAW_POLYLINE:"tldr:dPLn",DRAW_TEXT:"tldr:dTx"},GRAPHICS:{ADD:"mapGraphics:add",REMOVE:"mapGraphics:remove",CENTER_AND_FLASH:"mapGraphics:centerAndFlash"},BASEMAP:{SET:"map:setBasemap",GET_CURRENT:"map:getCurrentBasemap",GET_CURRENT_URL:"map:getCurrentBasemapUrl",ADD:"map:addBasemap",ADDED:"map:basemapAdded",REMOVE:"map:removeBasemap",REMOVED:"map:basemapRemoved",GALLERY:{TOGGLE:"map:basemapGalleryToggle",HIDE:"map:basemapGalleryHide",SHOW:"map:basemapGalleryShow",IS_HIDDEN:"map:basemapGalleryIsHidden",GET:"map:basemapGalleryGet"},CHANGED:"map:basemapChanged"},EXTENT:{GET_EXTENT:"extent:getExtent",GET_CENTER:"extent:getCenter",GET_LEVEL:"extent:getLevel",SET_LEVEL:"extent:setLevel",PAN_TO:"extent:panTo",SET_EXTENT:"extent:setExtent"},LEVEL:{CHANGED:"zoomLevel:changed",GET_LEVEL_COUNT:"zoomLevel:getCount",LEVEL_COUNT_CHANGED:"zoomLevel:lvlCountChanged"},LABEL_SERVICES:{SHOW:"lblServices:show",HIDE:"lblServices:hide",SERVICE_EXISTS:"lblServices:exist"},DIMENSIONS:{GET:"dimensions:get"},TIME:{TIME_LAYER_FOUND:"time:timeLayerFound",GET_TIME_ENABLED_SERVICES:"time:getTimeEnabledServices",SHOW_TIME_SLIDER:"time:showTimeSlider",TOGGLE_TIME_SLIDER:"time:toggleTimeSlider",MAP_TIME_EXTENT_CLEARED:"map:timeExtentCleared",CLEAR_TIME_EXTENT:"time:clearTimeExtent",SET_MAP_TIME_SLIDER:"time:setMapTimeSlider",MAP_TIME_EXTENT_SET:"time:mapTimeExtentSet",MAP_TIME_CHANGED:"time:mapTimeChanged"}},PORTAL:{USER_LOGGED_OUT:"portal:userLoggedOut",USER_LOGGED_IN:"portal:userLoggedIn",IS_USER_LOGGED_IN:"portal:isUserLoggedIn",LOG_IN:"portal:logIn",LOG_OUT:"portal:logOut",SEARCH_WEBMAPS:"portal:searchWebmaps",SEARCH_FEATURE_SERVICES:"portal:searchFeatureServices",SEARCH_MAP_SERVICES:"portal:searchMapServices",SEARCH_IMAGE_SERVICES:"portal:searchImageServices",SEARCH_FEATURE_SERVICE_LAYERS:"portal:searchFeatureServiceLayers",SEARCH_GEOCODE_SERVICES:"portal:searchGeocodeServices",GET_INSTANCE:"portal:getInstance"},TOOLS:{ACCORDION:{TOGGLE:"accordion:toggle",SHOW:"accordion:show",HIDE:"accordion:hide",ADD_ITEM:"accordion:addItem",LOAD_DEFAULT_TOOLS:"accordion:loadDefaultTools",HIDE_COMPLETE:"accordion:hideComplete"},MENU:{ADD_TOOL:"toolMenu:addTool",HIDE_TOOLS_BUTTON:"toolMenu:hideToolsButton",SHOW_TOOLS_BUTTON:"toolMenu:showToolsButton",HIDE_LAYERS_BUTTON:"toolMenu:hideLayersButton",SHOW_LAYERS_BUTTON:"toolMenu:showLayersButton"}},WINDOW:{REPOSITION_ALL:"window:repositionAll",SOCIAL_MEDIA:{SHOW:"socialMedia:show",HIDE:"socialMedia:hide",TOGGLE:"socialMedia:toggle"},WEATHER:{SHOW:"weatherWindow:show",HIDE:"weatherWindow:hide",TOGGLE:"weatherWindow:toggle"},DRAW:{SHOW:"drawWindow:show",HIDE:"drawWindow:hide",TOGGLE:"drawWindow:toggle"},LEGEND:{SHOW:"legendWindow:show",HIDE:"legendWindow:hide"},QUERY_BUILDER:{SHOW:"queryBuilder:show",HIDE:"queryBuilder:hide",TOGGLE:"queryBuilder:toggle"},FEATURE_EDITOR:{SHOW:"featureEditor:show",HIDE:"featureEditor:hide",TOGGLE:"featureEditor:toggle"},MEASURE:{SHOW:"measureWindow:show",HIDE:"measureWindow:hide",TOGGLE:"measureWindow:toggle"},IDENTIFY:{SHOW:"identifyWindow:show",HIDE:"identifyWindow:hide",TOGGLE:"identifyWindow:toggle"},REVERSE_GEOCODE:{SHOW:"reverseGeocodeWindow:show",HIDE:"reverseGeocodeWindow:hide",TOGGLE:"reverseGeocodeWindow:toggle"},PORTAL_PUBLISH:{SHOW:"portalPublish:show",HIDE:"portalPublish:hide",TOGGLE:"portalPublish:toggle"},PORTAL_SEARCH:{SHOW:"portalSearch:show",HIDE:"portalSearch:hide",TOGGLE:"portalSearch:toggle"},ZOOM_TO:{SHOW:"zoomTo:show",HIDE:"zoomTo:hide",TOGGLE:"zoomTo:toggle"},REFLECTIVITY:{SHOW:"reflect:show",HIDE:"reflect:hide",TOGGLE:"reflect:toggle"},PRINT:{SHOW:"print:show",HIDE:"print:hide",TOGGLE:"print:toggle"},ECHO_GP:{SHOW:"echo:show",HIDE:"echo:hide",TOGGLE:"echo:toggle"},PLOTTING:{SHOW:"plotting:show",HIDE:"plotting:hide",TOGGLE:"plotting:toggle"}},DRAW:{USER:{LINE_INPUT:"draw:usrLnIn",POINT_INPUT:"draw:usrPointIn",POLYGON_INPUT:"draw:usrPolyIn",POLYLINE_INPUT:"draw:usrPLnIn",RECTANGLE_INPUT:"draw:usrRectIn",DRAW_CANCEL:"draw:usrDrawCncl",FREEHAND_POLYLINE_INPUT:"draw:usrFrLnIn",FREEHAND_POLYGON_INPUT:"draw:usrFrPolyIn",GET_USER_GRAPHICS:"draw:usrGGraphics"},SYMBOLOGY:{SET_POLYGON:"drawSym:setPolygon",SET_POINT:"drawSym:setPoint",SET_LINE:"drawSym:setLine",SET_ENVELOPE:"drawSym:setEnvelope",SET_TEXT:"drawSym:setText"},DRAW_GRAPHICS_LAYER_CREATED:"draw:drawGraphicsLayerCreated"},NAVIGATION:{DISABLE:"nav:disable",DISABLE_TOOLBAR:"nav:disableToolbar",ENABLE_TOOLBAR:"nav:enableToolbar",PAN:"nav:pan",ZOOM_IN:"nav:zoomIn",ZOOM_OUT:"nav:zoomOut"},LOCATOR:{REVERSE_GEOCODE:"locator:reverseGeocode",SINGLE_LINE_ADDRESS_TO_LOCATION:"locator:addressToLocation",LOCATOR_REQUEST_COMPLETE:"locator:locatorRequestComplete",LOCATOR_REQUEST_ERROR:"locator:locatorRequestError",ADD_LOCATOR:"locator:addLocator",GET_LOCATORS:"locator:getLocators",LOCATOR_ADDED:"locator:locatorAdded",REMOVE_LOCATOR:"locator:remove",LOCATOR_REMOVED:"locator:removed"},BOOKMARK:{STORAGE:{GET:"bookmark:getBookmarks"},CREATE_WINDOW:{SHOW:"bookmark:show",HIDE:"bookmark:hide"},REMOVED:"bookmark:removed",CREATED:"bookmark:created"},CONFIGURE:{WINDOW:{SHOW:"configureWindow:show",HIDE:"configureWindow:hide"}},THROBBER:{SHOW:"throbber:show",HIDE:"throbber:hide",BLOCK_HIDE:"throbber:blockHide",RELEASE_HIDE_BLOCK:"throbber:unblockHide"},TOOLTIP:{CREATE_CONFIRM:"tooltip:createCOnfirm"},MESSAGING:{SHOW:"messaging:show",HIDE:"messaging:hide"},GEOMETRY_SERVICE:{EXISTS:"geometryService:exists",TASKS:{PROJECT_TO_MAP_SR:"geometry:project",CALCULATE_AREA:"geometry:calculateArea",CALCULATE_DISTANCE:"geometry:calculateDistance",PROJECT_TO_LAT_LON:"geometry:projectToLatLon"},BUFFER_POINT:"geometryService:bufferPoint",MGRS_TO_LAT_LON:"geometryService:mrgsToLatLon"},LOGGING:{ADD:"logging:add",CLEAR:"logging:clear",WINDOW:{SHOW:"logging:windowShow",HIDE:"logging:windowHide",TOGGLE:"logging:windowToggle"}},FOOTER:{TOGGLE:"footer:toggle",COLLAPSE:"footer:collapse",EXPAND:"footer:expand",COLLAPSED:"footer:collapsed",EXPANDED:"footer:expanded",IS_EXPANDED:"footer:isExpanded"},CONFIGURATION:{GET:"config:get",GET_ENTRY:"config:getEntry"},PLACEMENT:{GLOBAL:{PLACE:{NAVIGATION_TOOLBAR:"place:navTool",HEADER:"place:header",VIEWER_ACCORDION:"place:vAccor",MAIN_TOOLBAR:"place:mTbar",MAIN_TOOLBAR_DROP_DOWN:"place:mTbardd",FOOTER:"place:ftr",MESSAGING:"place:msging",THROBBER:"place:throbber",BASEMAP_GALLERY:"place:basemapGallery",MAP_SCALE_AND_COORDINATES:"place:mSACoords",CREATE_BOOOKMARK:"place:createBmrk",MENU_BAR:"place:menuBar",USER_LOCATION:"place:usrLoc"}},WINDOWLESS:{PLACE:{MAP_LEGEND_WIDGET:"wlsplace:mapLegendWidget",IDENTIFY_WIDGET:"wlsplace:identifyWidget",MEASURE_WIDGET:"wlsplace:measureWidget",FEATURE_SERVICE_WIDGET:"wlsplace:featureServiceWidget",TIME_SLIDER_WIDGET:"wlsplace:timeSliderWidget",LAYER_TRANSPARENCY_WIDGET:"wlsplace:layerTransWidget",CONFIGURE_WIDGET:"wlsplace:configureWidget",REVERSE_GEOCODE_WIDGET:"wlsplace:reverseGeocodeWidget",QUERY_BUILDER_WIDGET:"wlsplace:queryBuilderWidget",DRAW_WIDGET:"wlsplace:drawWidget",LOGGING_WIDGET:"wlsplace:loggingWidget",LAYERS_WIDGET:"wlsplace:layersWidget",ZOOM_TO_WIDGET:"wlsplace:zoomToWidget",WEATHER_WIDGET:"wlsplace:weatherWidget"}}}},STORAGE:{LABELS:{BOOKMARKS:"bookmarks",USER_GRAPHICS:"userGraphics","BASEMAPS":"basemaps","LOCATORS":"locators","REFERENCE_LAYERS":"referenceLayers","LAYERS":"userLayers"}},SERVICE_TYPES:{GEOMETRY_SERVER:"GeometryServer",GLOBE_SERVER:"GlobeServer",GP_SERVER:"GPServer",GP_TASK:"GPTask",IMAGE_SERVER:"ImageServer",MAP_SERVER:"MapServer",WEB_MAP:"WebMap",PORTAL_SERVER:"PortalServer",GEOCODE_SERVER:"GeocodeServer",FEATURE_LAYER:"FeatureLayer",FEATURE_SERVER:"FeatureServer",KML:"KMLLayer",OPEN_STREET_MAP:"OpenStreetMap",WMS_LAYER:"WMSLayer"},LAYER_TYPES:{IMAGE_SERVER:{LABEL:"Image Service",VALUE:"ImageServer"},MAP_SERVER:{LABEL:"Map Service",VALUE:"MapServer"},FEATURE_LAYER:{LABEL:"Feature Layer",VALUE:"FeatureLayer"},KML:{LABEL:"KML Layer",VALUE:"KMLLayer"}},LOG_TYPE:{WARNING:"warning",ERROR:"error",INFO:"info"},ESRI_FIELD_TYPES:{DATE:"esriFieldTypeDate",DOUBLE:"esriFieldTypeDouble",STRING:"esriFieldTypeString",INTEGER:"esriFieldTypeInteger",SMALL_INTEGER:"esriFieldTypeSmallInteger",GEOMETRY:"esriFieldTypeGeometry",OBJECT_ID:"esriFieldTypeOID"},ESRI_GEOMETRY_TYPES:{POINT:"esriGeometryPoint",LINE:"esriGeometryPolyline",POLYGON:"esriGeometryPolygon",ENVELOPE:"esriGeometryEnvelope"},ESRI_LAYER_TYPES:{FEATURE_LAYER:"Feature Layer",RASTER:"Raster Layer"},ESRI_LAYER_DECLARED_CLASSES:{GRAPHICS_LAYER:"esri.layers.GraphicsLayer",FEATURE_LAYER:"esri.layers.FeatureLayer",TILED_MAP_SERVICE:"esri.layers.ArcGISTiledMapServiceLayer",DYNAMIC_MAP_SERVICE:"esri.layers.ArcGISDynamicMapServiceLayer",IMAGE_SERVICE:"esri.layers.ArcGISImageServiceLayer"},ESRI_UNITS:{ACRES:"esriAcres",METERS:"esriMeters",FEET:"esriFeet",YARDS:"esriYards",MILES:"esriMiles",NAUTICAL_MILES:"esriNauticalMiles",MILLIMETERS:"esriMillimeters",CENTIMETERS:"esriCentimeters",DECIMETERS:"esriDecimeters",KILOMETERS:"esriKilometers",SQUARE_MILES:"esriSquareMiles",SQUARE_METERS:"esriSquareMeters",SQUARE_KILOMETERS:"esriSquareKilometers",SQUARE_ARES:"esriAres",SQUARE_HECTARES:"esriHectares",SQUARE_CENTIMETERS:"esriSquareCentimeters",SQUARE_DECIMETERS:"esriSquareDecimeters",SQUARE_FEET:"esriSquareFeet",SQUARE_INCHES:"esriSquareInches",SQUARE_MILLIMETERS:"esriSquareMillimeters",SQUARE_YARDS:"esriSquareYards",SQUARE_UNKNOWN:"esriUnknownAreaUnits",DECIMAL_DEGREES:"esriDUDecimalDegrees",DEGREE_MINUTE_SECONDS:"esriDegreeMinuteSeconds"},AGS_PORTAL_TYPES:{GEOPROCESSING_SERVICE:"Geoprocessing Service",MAP_SERVICE:"Map Service",WEB_MAP:"Web Map",MAPPING_APPLICATION:"Web Mapping Application",FEATURE_SERVICE:"Feature Service",FEATURE_SERVICE_LAYER:"Feature Service Layer",GEOCODE_SERVICE:"Geocoding Service",DESKTOP_TEMPLATE:"Desktop Application Template",FEATURE_COLLECTION_TEMPLATE:"Feature Collection Template",FEATURED_ITEMS:"Featured Items",LAYER_PACKAGE:"Layer Package",IMAGE_SERVICE:"Image Service",GRAPHICS_LAYER:"Graphics Layer",UNKNOWN:"Unknown",OPEN_STREET_MAPS:"OpenStreetMap"},DEFAULT_PORTAL_ENDPOINTS:{SEARCH_URL_PART:"/sharing/search",VIEWER_URL_PART:"home/webmap/viewer.html",CONTENT_URL_PART:"sharing/content",ITEMS_URL_PART:"sharing/content/items",DEFAULT_MAX_RESULTS:15,USER_CONTENT_PREPEND:"sharing/content/users/",USER_GROUPS_PREPEND:"/sharing/community/users",USER_SHARE_APPEND:"/shareItems",ADD_ITEM_PART_APPEND:"/addItem",PRINT_SERVICE_APPEND:"sharing/tools/print",GENERATE_TOKEN_APPEND:"/sharing/generateToken",PORTAL_VALIDATOR_ENDPOINT:"sharing",DATA_APPEND:"data"},ESRI_RENDERER_TYPES:{SIMPLE:"simple",UNIQUE_VALUE:"uniqueValue",CLASS_BREAKS:"classBreaks"},WINDOW:{TOP_POSITION_MOVE_OFFSET:30},VIEWER_MODES:{SIDEBAR:"sidebar",WINDOW:"window",MOBILE:"mobile"},GP_PARAMETER_DIRECTION:{INPUT:"esriGPParameterDirectionInput",OUTPUT:"esriGPParameterDirectionOutput"},GP_MESSAGE_TYPES:{INFO:["esriJobMessageTypeInformative","esriGPMessageTypeInformative"],WARNING:["esriJobMessageTypeWarning","esriGPMessageTypeWarning"],ERROR:["esriJobMessageTypeAbort","esriGPMessageTypeError","esriJobMessageTypeError","esriGPMessageTypeAbort"]},DEFAULT_REVERSE_GEOCODE_DISTANCE:50,PORTAL_SHARING_REST_URL_PART:"/sharing/rest"});});},"url:esriviewer/ui/draw/configure/geometry/template/ConfigurePointTemplate.html":"<div class=\"configureDrawGeometryContainer\">\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Marker Style</span>\r\n        <select data-bind=\"options: markerStyles ,value:selectedMarkerStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Marker Size</span>\r\n        <select data-bind=\"options: markerSizes ,value:selectedMarkerSize\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Outline Style</span>\r\n        <select data-bind=\"options: outlineStyles ,value:selectedOutlineStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Outline Width</span>\r\n        <select data-bind=\"options: outlineWidths ,value:selectedOutlineWidth\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Angle</span>\r\n        <select data-bind=\"options: angles ,value:selectedAngle\"></select>\r\n    </div>\r\n    <div data-dojo-attach-point=\"transparencySliderContainer\"></div>\r\n    <div class=\"colorPickerTextContainer\">\r\n        <span class=\"colorPickerText\"\r\n              data-bind=\"click: setMarkerColorMode,css:{colorPickerTextSelected: markerColorActive}\"> Marker Color</span>\r\n        <span class=\"colorPickerText\"\r\n              data-bind=\"click: setOutlineColorMode,css:{colorPickerTextSelected: outlineColorActive}\"> Outline Color</span>\r\n\r\n    </div>\r\n\r\n    <div class=\"configureDrawColorPickerContainer\" data-dojo-attach-point=\"colorPickerContainer\"></div>\r\n</div>","dijit/form/_RadioButtonMixin":function(){define("dijit/form/_RadioButtonMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/_base/event","dojo/_base/lang","dojo/query","../registry"],function(_3e2,_3e3,_3e4,_3e5,lang,_3e6,_3e7){return _3e3("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var ary=[];_3e6("input[type=radio]",this.focusNode.form||this.ownerDocument).forEach(lang.hitch(this,function(_3e8){if(_3e8.name==this.name&&_3e8.form==this.focusNode.form){var _3e9=_3e7.getEnclosingWidget(_3e8);if(_3e9){ary.push(_3e9);}}}));return ary;},_setCheckedAttr:function(_3ea){this.inherited(arguments);if(!this._created){return;}if(_3ea){_3e2.forEach(this._getRelatedWidgets(),lang.hitch(this,function(_3eb){if(_3eb!=this&&_3eb.checked){_3eb.set("checked",false);}}));}},_getSubmitValue:function(_3ec){return _3ec===null?"on":_3ec;},_onClick:function(e){if(this.checked||this.disabled){_3e5.stop(e);return false;}if(this.readOnly){_3e5.stop(e);_3e2.forEach(this._getRelatedWidgets(),lang.hitch(this,function(_3ed){_3e4.set(this.focusNode||this.domNode,"checked",_3ed.checked);}));return false;}return this.inherited(arguments);}});});},"dojo/data/ItemFileWriteStore":function(){define("dojo/data/ItemFileWriteStore",["../_base/lang","../_base/declare","../_base/array","../_base/json","../_base/kernel","./ItemFileReadStore","../date/stamp"],function(lang,_3ee,_3ef,_3f0,_3f1,_3f2,_3f3){return _3ee("dojo.data.ItemFileWriteStore",_3f2,{constructor:function(_3f4){this._features["dojo.data.api.Write"]=true;this._features["dojo.data.api.Notification"]=true;this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};if(!this._datatypeMap["Date"].serialize){this._datatypeMap["Date"].serialize=function(obj){return _3f3.toISOString(obj,{zulu:true});};}if(_3f4&&(_3f4.referenceIntegrity===false)){this.referenceIntegrity=false;}this._saveInProgress=false;},referenceIntegrity:true,_assert:function(_3f5){if(!_3f5){throw new Error("assertion failed in ItemFileWriteStore");}},_getIdentifierAttribute:function(){return this.getFeatures()["dojo.data.api.Identity"];},newItem:function(_3f6,_3f7){this._assert(!this._saveInProgress);if(!this._loadFinished){this._forceLoad();}if(typeof _3f6!="object"&&typeof _3f6!="undefined"){throw new Error("newItem() was passed something other than an object");}var _3f8=null;var _3f9=this._getIdentifierAttribute();if(_3f9===Number){_3f8=this._arrayOfAllItems.length;}else{_3f8=_3f6[_3f9];if(typeof _3f8==="undefined"){throw new Error("newItem() was not passed an identity for the new item");}if(lang.isArray(_3f8)){throw new Error("newItem() was not passed an single-valued identity");}}if(this._itemsByIdentity){this._assert(typeof this._itemsByIdentity[_3f8]==="undefined");}this._assert(typeof this._pending._newItems[_3f8]==="undefined");this._assert(typeof this._pending._deletedItems[_3f8]==="undefined");var _3fa={};_3fa[this._storeRefPropName]=this;_3fa[this._itemNumPropName]=this._arrayOfAllItems.length;if(this._itemsByIdentity){this._itemsByIdentity[_3f8]=_3fa;_3fa[_3f9]=[_3f8];}this._arrayOfAllItems.push(_3fa);var _3fb=null;if(_3f7&&_3f7.parent&&_3f7.attribute){_3fb={item:_3f7.parent,attribute:_3f7.attribute,oldValue:undefined};var _3fc=this.getValues(_3f7.parent,_3f7.attribute);if(_3fc&&_3fc.length>0){var _3fd=_3fc.slice(0,_3fc.length);if(_3fc.length===1){_3fb.oldValue=_3fc[0];}else{_3fb.oldValue=_3fc.slice(0,_3fc.length);}_3fd.push(_3fa);this._setValueOrValues(_3f7.parent,_3f7.attribute,_3fd,false);_3fb.newValue=this.getValues(_3f7.parent,_3f7.attribute);}else{this._setValueOrValues(_3f7.parent,_3f7.attribute,_3fa,false);_3fb.newValue=_3fa;}}else{_3fa[this._rootItemPropName]=true;this._arrayOfTopLevelItems.push(_3fa);}this._pending._newItems[_3f8]=_3fa;for(var key in _3f6){if(key===this._storeRefPropName||key===this._itemNumPropName){throw new Error("encountered bug in ItemFileWriteStore.newItem");}var _3fe=_3f6[key];if(!lang.isArray(_3fe)){_3fe=[_3fe];}_3fa[key]=_3fe;if(this.referenceIntegrity){for(var i=0;i<_3fe.length;i++){var val=_3fe[i];if(this.isItem(val)){this._addReferenceToMap(val,_3fa,key);}}}}this.onNew(_3fa,_3fb);return _3fa;},_removeArrayElement:function(_3ff,_400){var _401=_3ef.indexOf(_3ff,_400);if(_401!=-1){_3ff.splice(_401,1);return true;}return false;},deleteItem:function(item){this._assert(!this._saveInProgress);this._assertIsItem(item);var _402=item[this._itemNumPropName];var _403=this.getIdentity(item);if(this.referenceIntegrity){var _404=this.getAttributes(item);if(item[this._reverseRefMap]){item["backup_"+this._reverseRefMap]=lang.clone(item[this._reverseRefMap]);}_3ef.forEach(_404,function(_405){_3ef.forEach(this.getValues(item,_405),function(_406){if(this.isItem(_406)){if(!item["backupRefs_"+this._reverseRefMap]){item["backupRefs_"+this._reverseRefMap]=[];}item["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(_406),attr:_405});this._removeReferenceFromMap(_406,item,_405);}},this);},this);var _407=item[this._reverseRefMap];if(_407){for(var _408 in _407){var _409=null;if(this._itemsByIdentity){_409=this._itemsByIdentity[_408];}else{_409=this._arrayOfAllItems[_408];}if(_409){for(var _40a in _407[_408]){var _40b=this.getValues(_409,_40a)||[];var _40c=_3ef.filter(_40b,function(_40d){return !(this.isItem(_40d)&&this.getIdentity(_40d)==_403);},this);this._removeReferenceFromMap(item,_409,_40a);if(_40c.length<_40b.length){this._setValueOrValues(_409,_40a,_40c,true);}}}}}}this._arrayOfAllItems[_402]=null;item[this._storeRefPropName]=null;if(this._itemsByIdentity){delete this._itemsByIdentity[_403];}this._pending._deletedItems[_403]=item;if(item[this._rootItemPropName]){this._removeArrayElement(this._arrayOfTopLevelItems,item);}this.onDelete(item);return true;},setValue:function(item,_40e,_40f){return this._setValueOrValues(item,_40e,_40f,true);},setValues:function(item,_410,_411){return this._setValueOrValues(item,_410,_411,true);},unsetAttribute:function(item,_412){return this._setValueOrValues(item,_412,[],true);},_setValueOrValues:function(item,_413,_414,_415){this._assert(!this._saveInProgress);this._assertIsItem(item);this._assert(lang.isString(_413));this._assert(typeof _414!=="undefined");var _416=this._getIdentifierAttribute();if(_413==_416){throw new Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");}var _417=this._getValueOrValues(item,_413);var _418=this.getIdentity(item);if(!this._pending._modifiedItems[_418]){var _419={};for(var key in item){if((key===this._storeRefPropName)||(key===this._itemNumPropName)||(key===this._rootItemPropName)){_419[key]=item[key];}else{if(key===this._reverseRefMap){_419[key]=lang.clone(item[key]);}else{_419[key]=item[key].slice(0,item[key].length);}}}this._pending._modifiedItems[_418]=_419;}var _41a=false;if(lang.isArray(_414)&&_414.length===0){_41a=delete item[_413];_414=undefined;if(this.referenceIntegrity&&_417){var _41b=_417;if(!lang.isArray(_41b)){_41b=[_41b];}for(var i=0;i<_41b.length;i++){var _41c=_41b[i];if(this.isItem(_41c)){this._removeReferenceFromMap(_41c,item,_413);}}}}else{var _41d;if(lang.isArray(_414)){_41d=_414.slice(0,_414.length);}else{_41d=[_414];}if(this.referenceIntegrity){if(_417){var _41b=_417;if(!lang.isArray(_41b)){_41b=[_41b];}var map={};_3ef.forEach(_41b,function(_41e){if(this.isItem(_41e)){var id=this.getIdentity(_41e);map[id.toString()]=true;}},this);_3ef.forEach(_41d,function(_41f){if(this.isItem(_41f)){var id=this.getIdentity(_41f);if(map[id.toString()]){delete map[id.toString()];}else{this._addReferenceToMap(_41f,item,_413);}}},this);for(var rId in map){var _420;if(this._itemsByIdentity){_420=this._itemsByIdentity[rId];}else{_420=this._arrayOfAllItems[rId];}this._removeReferenceFromMap(_420,item,_413);}}else{for(var i=0;i<_41d.length;i++){var _41c=_41d[i];if(this.isItem(_41c)){this._addReferenceToMap(_41c,item,_413);}}}}item[_413]=_41d;_41a=true;}if(_415){this.onSet(item,_413,_417,_414);}return _41a;},_addReferenceToMap:function(_421,_422,_423){var _424=this.getIdentity(_422);var _425=_421[this._reverseRefMap];if(!_425){_425=_421[this._reverseRefMap]={};}var _426=_425[_424];if(!_426){_426=_425[_424]={};}_426[_423]=true;},_removeReferenceFromMap:function(_427,_428,_429){var _42a=this.getIdentity(_428);var _42b=_427[this._reverseRefMap];var _42c;if(_42b){for(_42c in _42b){if(_42c==_42a){delete _42b[_42c][_429];if(this._isEmpty(_42b[_42c])){delete _42b[_42c];}}}if(this._isEmpty(_42b)){delete _427[this._reverseRefMap];}}},_dumpReferenceMap:function(){var i;for(i=0;i<this._arrayOfAllItems.length;i++){var item=this._arrayOfAllItems[i];if(item&&item[this._reverseRefMap]){}}},_getValueOrValues:function(item,_42d){var _42e=undefined;if(this.hasAttribute(item,_42d)){var _42f=this.getValues(item,_42d);if(_42f.length==1){_42e=_42f[0];}else{_42e=_42f;}}return _42e;},_flatten:function(_430){if(this.isItem(_430)){return {_reference:this.getIdentity(_430)};}else{if(typeof _430==="object"){for(var type in this._datatypeMap){var _431=this._datatypeMap[type];if(lang.isObject(_431)&&!lang.isFunction(_431)){if(_430 instanceof _431.type){if(!_431.serialize){throw new Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+type+"]");}return {_type:type,_value:_431.serialize(_430)};}}else{if(_430 instanceof _431){return {_type:type,_value:_430.toString()};}}}}return _430;}},_getNewFileContentString:function(){var _432={};var _433=this._getIdentifierAttribute();if(_433!==Number){_432.identifier=_433;}if(this._labelAttr){_432.label=this._labelAttr;}_432.items=[];for(var i=0;i<this._arrayOfAllItems.length;++i){var item=this._arrayOfAllItems[i];if(item!==null){var _434={};for(var key in item){if(key!==this._storeRefPropName&&key!==this._itemNumPropName&&key!==this._reverseRefMap&&key!==this._rootItemPropName){var _435=this.getValues(item,key);if(_435.length==1){_434[key]=this._flatten(_435[0]);}else{var _436=[];for(var j=0;j<_435.length;++j){_436.push(this._flatten(_435[j]));_434[key]=_436;}}}}_432.items.push(_434);}}var _437=true;return _3f0.toJson(_432,_437);},_isEmpty:function(_438){var _439=true;if(lang.isObject(_438)){var i;for(i in _438){_439=false;break;}}else{if(lang.isArray(_438)){if(_438.length>0){_439=false;}}}return _439;},save:function(_43a){this._assert(!this._saveInProgress);this._saveInProgress=true;var self=this;var _43b=function(){self._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};self._saveInProgress=false;if(_43a&&_43a.onComplete){var _43c=_43a.scope||_3f1.global;_43a.onComplete.call(_43c);}};var _43d=function(err){self._saveInProgress=false;if(_43a&&_43a.onError){var _43e=_43a.scope||_3f1.global;_43a.onError.call(_43e,err);}};if(this._saveEverything){var _43f=this._getNewFileContentString();this._saveEverything(_43b,_43d,_43f);}if(this._saveCustom){this._saveCustom(_43b,_43d);}if(!this._saveEverything&&!this._saveCustom){_43b();}},revert:function(){this._assert(!this._saveInProgress);var _440;for(_440 in this._pending._modifiedItems){var _441=this._pending._modifiedItems[_440];var _442=null;if(this._itemsByIdentity){_442=this._itemsByIdentity[_440];}else{_442=this._arrayOfAllItems[_440];}_441[this._storeRefPropName]=this;for(var key in _442){delete _442[key];}lang.mixin(_442,_441);}var _443;for(_440 in this._pending._deletedItems){_443=this._pending._deletedItems[_440];_443[this._storeRefPropName]=this;var _444=_443[this._itemNumPropName];if(_443["backup_"+this._reverseRefMap]){_443[this._reverseRefMap]=_443["backup_"+this._reverseRefMap];delete _443["backup_"+this._reverseRefMap];}this._arrayOfAllItems[_444]=_443;if(this._itemsByIdentity){this._itemsByIdentity[_440]=_443;}if(_443[this._rootItemPropName]){this._arrayOfTopLevelItems.push(_443);}}for(_440 in this._pending._deletedItems){_443=this._pending._deletedItems[_440];if(_443["backupRefs_"+this._reverseRefMap]){_3ef.forEach(_443["backupRefs_"+this._reverseRefMap],function(_445){var _446;if(this._itemsByIdentity){_446=this._itemsByIdentity[_445.id];}else{_446=this._arrayOfAllItems[_445.id];}this._addReferenceToMap(_446,_443,_445.attr);},this);delete _443["backupRefs_"+this._reverseRefMap];}}for(_440 in this._pending._newItems){var _447=this._pending._newItems[_440];_447[this._storeRefPropName]=null;this._arrayOfAllItems[_447[this._itemNumPropName]]=null;if(_447[this._rootItemPropName]){this._removeArrayElement(this._arrayOfTopLevelItems,_447);}if(this._itemsByIdentity){delete this._itemsByIdentity[_440];}}this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};return true;},isDirty:function(item){if(item){var _448=this.getIdentity(item);return new Boolean(this._pending._newItems[_448]||this._pending._modifiedItems[_448]||this._pending._deletedItems[_448]).valueOf();}else{return !this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems);}},onSet:function(item,_449,_44a,_44b){},onNew:function(_44c,_44d){},onDelete:function(_44e){},close:function(_44f){if(this.clearOnClose){if(!this.isDirty()){this.inherited(arguments);}else{throw new Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");}}}});});},"url:dijit/templates/TreeNode.html":"<div class=\"dijitTreeNode\" role=\"presentation\"\n\t><div data-dojo-attach-point=\"rowNode\" class=\"dijitTreeRow dijitInline\" role=\"presentation\"\n\t\t><div data-dojo-attach-point=\"indentNode\" class=\"dijitInline\"></div\n\t\t><img src=\"${_blankGif}\" alt=\"\" data-dojo-attach-point=\"expandoNode\" class=\"dijitTreeExpando\" role=\"presentation\"\n\t\t/><span data-dojo-attach-point=\"expandoNodeText\" class=\"dijitExpandoText\" role=\"presentation\"\n\t\t></span\n\t\t><span data-dojo-attach-point=\"contentNode\"\n\t\t\tclass=\"dijitTreeContent\" role=\"presentation\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" data-dojo-attach-point=\"iconNode\" class=\"dijitIcon dijitTreeIcon\" role=\"presentation\"\n\t\t\t/><span data-dojo-attach-point=\"labelNode\" class=\"dijitTreeLabel\" role=\"treeitem\" tabindex=\"-1\" aria-selected=\"false\"></span>\n\t\t</span\n\t></div>\n\t<div data-dojo-attach-point=\"containerNode\" class=\"dijitTreeContainer\" role=\"presentation\" style=\"display: none;\"></div>\n</div>\n","dojox/storage/Provider":function(){define("dojox/storage/Provider",["dijit","dojo","dojox"],function(_450,dojo,_451){dojo.provide("dojox.storage.Provider");dojo.declare("dojox.storage.Provider",null,{constructor:function(){},SUCCESS:"success",FAILED:"failed",PENDING:"pending",SIZE_NOT_AVAILABLE:"Size not available",SIZE_NO_LIMIT:"No size limit",DEFAULT_NAMESPACE:"default",onHideSettingsUI:null,initialize:function(){},isAvailable:function(){},put:function(key,_452,_453,_454){},get:function(key,_455){},hasKey:function(key,_456){return !!this.get(key,_456);},getKeys:function(_457){},clear:function(_458){},remove:function(key,_459){},getNamespaces:function(){},isPermanent:function(){},getMaximumSize:function(){},putMultiple:function(keys,_45a,_45b,_45c){for(var i=0;i<keys.length;i++){_451.storage.put(keys[i],_45a[i],_45b,_45c);}},getMultiple:function(keys,_45d){var _45e=[];for(var i=0;i<keys.length;i++){_45e.push(_451.storage.get(keys[i],_45d));}return _45e;},removeMultiple:function(keys,_45f){for(var i=0;i<keys.length;i++){_451.storage.remove(keys[i],_45f);}},isValidKeyArray:function(keys){if(keys===null||keys===undefined||!dojo.isArray(keys)){return false;}return !dojo.some(keys,function(key){return !this.isValidKey(key);},this);},hasSettingsUI:function(){return false;},showSettingsUI:function(){},hideSettingsUI:function(){},isValidKey:function(_460){if(_460===null||_460===undefined){return false;}return /^[0-9A-Za-z_]*$/.test(_460);},getResourceList:function(){return [];}});});},"url:dijit/templates/Tree.html":"<div class=\"dijitTree dijitTreeContainer\" role=\"tree\">\n\t<div class=\"dijitInline dijitTreeIndent\" style=\"position: absolute; top: -9999px\" data-dojo-attach-point=\"indentDetector\"></div>\n</div>\n","esriviewer/map/MapManager":function(){define("esriviewer/map/MapManager",["dojo/_base/declare","dojo/_base/window","dojo/dom-construct","dojo/has","dojo/topic","dojo/_base/lang","dojo/dom","./base/MapUtils","./base/MapExtentTools","./base/MapLayersTools","./base/MapDisplayWidgets","./base/MapNavDrawTools","./base/MapTimeTools","./base/LayerQueryTools","dijit/layout/ContentPane","../ui/basemap/BasemapGalleryWidget","esri/dijit/OverviewMap","esri/config","esri/geometry/Extent","esri/map","esri/urlUtils","esri/arcgis/utils","./base/LayerQueryParameters"],function(_461,_462,_463,has,_464,lang,dom,_465,_466,_467,_468,_469,_46a,_46b,_46c,_46d,_46e,_46f,_470,Map,_471,_472,_473){return _461([],{__defaultZoomSliderPosition:{x:10,y:120},hasGeometryService:false,maxClientZoom:null,hideLatLongDisplay:false,hideMGRSDisplay:true,hideMapScale:false,constructor:function(_474){lang.mixin(this,_474||{});this.mapInitializationParameters={wrapAround180:true,force3DTransforms:false,navigationMode:"classic"};this.loadViewerConfigurationData();this.initMap();this.layerQueryTools=new _46b();},loadViewerConfigurationData:function(){var _475=null;_464.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"geometryService",function(_476){_475=_476;});this.hasGeometryService=_475!=null;_464.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_477){mapConfiguration=_477;});if(mapConfiguration&&lang.isObject(mapConfiguration)){this.mapConfiguration=mapConfiguration;this.basemaps=this.mapConfiguration.basemaps;var _478=false;if(this.mapConfiguration.display!=null&&lang.isObject(this.mapConfiguration.display)&&this.mapConfiguration.display.showScale!=null&&this.mapConfiguration.display.showScale==false){this.hideMapScale=true;}if(this.mapConfiguration.maxClientZoom!=null){try{this.maxClientZoom=parseInt(this.mapConfiguration.maxClientZoom,10);}catch(err){}}lang.mixin(this.mapInitializationParameters,this.mapConfiguration.initializationParameters||{});}},initListeners:function(){this.map.on("load",lang.hitch(this,this.handleMapLoaded));this.map.on("update-start",function(){_464.publish(VIEWER_GLOBALS.EVENTS.THROBBER.SHOW);});this.map.on("zoom-end",lang.hitch(this,this.handleZoomLevelChanged));this.map.on("update-end",function(){_464.publish(VIEWER_GLOBALS.EVENTS.THROBBER.HIDE);});if(!this.hideMapScale){this.map.on("extent-change",lang.hitch(this.mapExtentTools,this.mapExtentTools.handleMapExtentChanged));}_464.subscribe(VIEWER_GLOBALS.EVENTS.MAP.GET,lang.hitch(this,this.handleGetMap));},handleGetMap:function(_479){if(_479!=null&&lang.isFunction(_479)){_479(this.map);}},initMap:function(){var _47a;_464.publish(VIEWER_GLOBALS.EVENTS.MAP.GET_MAP_DIV,function(mD){_47a=mD;});this.mapDiv=_47a;new _46c({region:"center",style:"height: 100%; width: 100%; margin: 0; padding: 0; overflow: hidden;"},this.mapDiv);if(this.mapConfiguration.zoomSlider==null||this.mapConfiguration.zoomSlider.create!=false){var _47b=this.__defaultZoomSliderPosition.x;var _47c=this.__defaultZoomSliderPosition.y;if(VIEWER_GLOBALS&&VIEWER_GLOBALS.windowPositioning&&VIEWER_GLOBALS.windowPositioning.zoomSlider&&lang.isObject(VIEWER_GLOBALS.windowPositioning.zoomSlider)){_47b=VIEWER_GLOBALS.windowPositioning.zoomSlider.x;_47c=VIEWER_GLOBALS.windowPositioning.zoomSlider.y;var _47d="left";var _47e="top";if(VIEWER_GLOBALS.windowPositioning.zoomSlider.alignY!=null&&lang.isString(VIEWER_GLOBALS.windowPositioning.zoomSlider.alignY)){var _47f=VIEWER_GLOBALS.windowPositioning.zoomSlider.alignY.toLowerCase();if(_47f==="top"||_47f==="bottom"){_47e=_47f;}}if(VIEWER_GLOBALS.windowPositioning.zoomSlider.alignX!=null&&lang.isString(VIEWER_GLOBALS.windowPositioning.zoomSlider.alignX)){var _480=VIEWER_GLOBALS.windowPositioning.zoomSlider.alignX.toLowerCase();if(_480==="left"||_480==="right"){_47d=_480;}}}var _481={width:null,height:"150px"};_481[_47d]=_47b+"px";_481[_47e]=_47c+"px";if(has("ie")){_481.height="80px";}_46f.defaults.map.slider=_481;}else{this.mapInitializationParameters.slider=false;}if(this.mapConfiguration.initialExtent!=null&&lang.isObject(this.mapConfiguration.initialExtent)){var _482=this.mapConfiguration.initialExtent;this.initialExtent=new _470({xmin:_482.xmin,ymin:_482.ymin,xmax:_482.xmax,ymax:_482.ymax,spatialReference:_482.spatialReference});this.mapInitializationParameters.extent=this.initialExtent;}if(lang.isArray(this.mapConfiguration.lods)){this.mapInitializationParameters.lods=this.mapConfiguration.lods;}if(this.webMapItem){this.map=_472.createMap(this.webMapItem,this.mapDiv).then(lang.hitch(this,function(_483){this.mapCreated(_483.map);this.handleMapLoaded();}));}else{var map=new Map(this.mapDiv,this.mapInitializationParameters);this.mapCreated(map);}},mapCreated:function(map){this.map=map;this.mapDisplayWidgets=new _468({map:this.map,mapDiv:this.mapDiv});this.mapExtentTools=new _466({mapDisplayWidgets:this.mapDisplayWidgets,map:this.map,mapUtils:this.mapUtils,maxClientZoom:this.maxClientZoom});this.mapLayersTools=new _467({map:this.map,basemaps:this.basemaps,mapConfiguration:this.mapConfiguration,webMapItem:this.webMapItem});this.mapUtils=new _465({map:this.map,mapDiv:this.mapDiv,operationalLayers:this.mapLayersTools.operationalLayers});this.mapNavDrawTools=new _469({map:this.map});this.mapTimeTools=new _46a({map:this.map});this.initListeners();this.initBasemaps();},initBasemaps:function(){if(this.mapConfiguration.useBasemapGallery==null||this.mapConfiguration.useBasemapGallery!=true){for(var key in this.basemaps){this.mapLayersTools.changeBaseMaps(key);break;}}else{this.basemapGalleryWidget=new _46d();_464.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.BASEMAP_GALLERY,this.basemapGalleryWidget);this.basemapGalleryWidget.startup();}},handleMapLoaded:function(){if(this.webMapItem&&this.webMapItem.itemData){this.mapLayersTools.addWebMapOperationalLayers(this.webMapItem);}else{this.mapLayersTools.addReferenceLayers();this.mapLayersTools.addOperationalLayers();}if(this.mapConfiguration.overview==null||this.mapConfiguration.overview.create!=false){this.overviewMapDijit=new _46e({attachTo:"bottom-right",color:"#D84E13",opacity:0.4,map:this.map,visible:true,width:225,height:175});this.overviewMapDijit.startup();}_464.publish(VIEWER_GLOBALS.EVENTS.MAP.LOADED,this.map);this.onMapLoaded();},handleZoomLevelChanged:function(evt){if(evt==null){return;}var _484=evt.extent;var _485=evt.zoomFactor;var _486=evt.anchor;var _487=evt.level;_464.publish(VIEWER_GLOBALS.EVENTS.MAP.LEVEL.CHANGED,_484,_485,_486,_487);},onMapLoaded:function(){}});});},"esriviewer/util/GeometryUtils":function(){define("esriviewer/util/GeometryUtils",["dojo/_base/declare"],function(_488){return _488([],{polygonIntersectsPoint:function(pt,_489){var ext=_489.getExtent();return (pt.x>=ext.xmin&&pt.y>=ext.ymin&&pt.x<=ext.xmax&&pt.y<=ext.ymax);},ddToDMSString:function(_48a){var _48b;var _48c=false;if(_48a<0){_48c=true;_48a=Math.abs(_48a);}_48b=Math.floor(_48a)+""+Math.floor((_48a-Math.floor(_48a))*60)+"'"+Math.floor(((_48a-Math.floor(_48a))*60-Math.floor((_48a-Math.floor(_48a))*60))*60)+"\"";if(_48c){_48b="-"+_48b;}return _48b;}});});},"esriviewer/ui/weather/conditions/WeatherWidgetWindow":function(){define("esriviewer/ui/weather/conditions/WeatherWidgetWindow",["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/window","dojo/dom-style","../../window/WindowWidget"],function(_48d,lang,_48e,_48f,_490,_491){return _48d([_491],{defaultPositioning:{x:400,y:125},windowWidth:"350px",windowHeaderText:"Weather",windowIconAltText:"Weather",windowIconClass:"commonIcons16 weather",positioningParamName:"weather",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/weather/conditions/WeatherWidget"],lang.hitch(this,function(_492){this.weatherWidget=new _492();this.setContent(this.weatherWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_48e.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.WEATHER.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_48e.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.WEATHER.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_48e.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.WEATHER.TOGGLE,lang.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.weatherWidget){this.weatherWidget.clearDraw();}}});});},"esriviewer/ui/draw/configure/geometry/ConfigurePolygonWidget":function(){require({cache:{"url:esriviewer/ui/draw/configure/geometry/template/ConfigurePolygonTemplate.html":"<div class=\"configureDrawGeometryContainer\">\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Fill Style</span>\r\n        <select data-bind=\"options: fillStyles ,value:selectedFillStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Outline Style</span>\r\n        <select data-bind=\"options: outlineStyles ,value:selectedOutlineStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Outline Width</span>\r\n        <select data-bind=\"options: outlineWidths ,value:selectedOutlineWidth\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Angle</span>\r\n        <select data-bind=\"options: angles ,value:selectedAngle\"></select>\r\n    </div>\r\n    <div data-dojo-attach-point=\"transparencySliderContainer\"></div>\r\n\r\n    <div class=\"colorPickerTextContainer\">\r\n        <span class=\"colorPickerText\"\r\n              data-bind=\"click: setOutlineColorMode,css:{colorPickerTextSelected: outlineColorActive}\"> Outline Color</span>\r\n        <span class=\"colorPickerText\"\r\n              data-bind=\"click: setFillColorMode,css:{colorPickerTextSelected: fillColorActive}\"> Fill Color</span>\r\n\r\n    </div>\r\n\r\n\r\n    <div class=\"configureDrawColorPickerContainer\" data-dojo-attach-point=\"colorPickerContainer\"></div>\r\n</div>"}});define("esriviewer/ui/draw/configure/geometry/ConfigurePolygonWidget",["dojo/_base/declare","dojo/text!./template/ConfigurePolygonTemplate.html","dojo/topic","dojo/_base/lang","dojo/_base/Color","./model/ConfigurePolygonViewModel","./BaseGeometryConfigurationWidget","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol"],function(_493,_494,_495,lang,_496,_497,_498,_499,_49a){return _493([_498],{defaultTransparency:50,templateString:_494,postCreate:function(){this.inherited(arguments);this.viewModel=new _497();this.viewModel.fillColorActive.subscribe(lang.hitch(this,this.handleFillColorToggled));this.viewModel.selectedAngle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedFillStyle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedOutlineStyle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedAngle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedOutlineWidth.subscribe(lang.hitch(this,this.processChange));this.outlineColor=new _496([255,0,0,this.getTransparency()/100]);this.fillColor=new _496([255,0,0,this.getTransparency()/100]);this.colorPicker.set("value",this.outlineColor.toHex());ko.applyBindings(this.viewModel,this.domNode);},handleTransparencyChanged:function(){var _49b=this.getTransparency()/100;this.outlineColor=new _496([this.outlineColor.r,this.outlineColor.g,this.outlineColor.b,_49b]);this.fillColor=new _496([this.fillColor.r,this.fillColor.g,this.fillColor.b,_49b]);this.inherited(arguments);},handleFillColorToggled:function(_49c){if(_49c){this.colorPicker.set("value",this.fillColor.toHex());}else{this.colorPicker.set("value",this.outlineColor.toHex());}},handleColorPickerChanged:function(){if(this.viewModel.outlineColorActive()){this.outlineColor=this.getColor();}else{this.fillColor=this.getColor();}this.processChange();},processChange:function(){this.onChange(this.getSymbol());},getSymbol:function(){return new _499(this.viewModel.selectedFillStyle(),new _49a(this.viewModel.selectedOutlineStyle(),this.outlineColor,this.viewModel.selectedOutlineWidth()),this.fillColor);}});});},"esriviewer/ui/draw/configure/ConfigureDrawWidget":function(){require({cache:{"url:esriviewer/ui/draw/configure/template/ConfigureDrawTemplate.html":"<div>\r\n    <div data-dojo-attach-point=\"annotationOptionsButtons\" class=\"annotationOptionButtons\">\r\n        <div title=\"Set Point Symbol\"\r\n             data-bind=\"click: showPointConfiguration, css:{pointSelected: pointConfigurationActive}\"\r\n             class=\"annotationOptionButton pointUnselected\"></div>\r\n        <div title=\"Set Line Symbol\"\r\n             data-bind=\"click: showLineConfiguration, css:{polylineSelected: lineConfigurationActive}\"\r\n                    class=\"annotationOptionButton polylineUnselected\"></div>\r\n        <div title=\"Set Polygon Symbol\"\r\n             data-bind=\"click: showPolygonConfiguration, css:{polygonSelected: polygonConfigurationActive}\"\r\n             class=\"annotationOptionButton polygonUnselected\"></div>\r\n        <div title=\"Set Rectangle Symbol\"\r\n             data-bind=\"click: showRectangleConfiguration, css:{rectangleSelected: rectangleConfigurationActive}\"\r\n             class=\"annotationOptionButton rectangleUnselected\"></div>\r\n        <div title=\"Set Text Symbol\"\r\n             data-bind=\"click: showTextConfiguration, css:{textSelected: textConfigurationActive}\"\r\n             class=\"annotationOptionButton textUnselected\"></div>\r\n    </div>\r\n    <div data-dojo-attach-point=\"configurePointWidgetContainer\" data-bind=\"visible:pointConfigurationActive\"></div>\r\n    <div data-dojo-attach-point=\"configureLineWidgetContainer\" data-bind=\"visible:lineConfigurationActive\"></div>\r\n    <div data-dojo-attach-point=\"configureRectangleWidgetContainer\" data-bind=\"visible:rectangleConfigurationActive\"></div>\r\n    <div data-dojo-attach-point=\"configurePolygonWidgetContainer\" data-bind=\"visible:polygonConfigurationActive\"></div>\r\n\r\n    <div data-dojo-attach-point=\"configureTextWidgetContainer\" data-bind=\"visible:textConfigurationActive\"></div>\r\n\r\n</div>"}});define("esriviewer/ui/draw/configure/ConfigureDrawWidget",["dojo/_base/declare","dojo/text!./template/ConfigureDrawTemplate.html","dojo/_base/lang","dojo/on","../../base/UITemplatedWidget","./model/ConfigureDrawViewModel","./geometry/ConfigurePointWidget","./geometry/ConfigureLineWidget","./geometry/ConfigureTextWidget","./geometry/ConfigurePolygonWidget"],function(_49d,_49e,lang,on,_49f,_4a0,_4a1,_4a2,_4a3,_4a4){return _49d([_49f],{templateString:_49e,postCreate:function(){this.inherited(arguments);this.viewModel=new _4a0();ko.applyBindings(this.viewModel,this.domNode);this.createConfigurationWidgets();},createConfigurationWidgets:function(){this.pointConfigurationWidget=new _4a1();this.pointConfigurationWidget.placeAt(this.configurePointWidgetContainer);this.pointConfigurationWidget.on("change",lang.hitch(this,this.handlePointSymbolChanged));this.lineConfigurationWidget=new _4a2();this.lineConfigurationWidget.placeAt(this.configureLineWidgetContainer);this.lineConfigurationWidget.on("change",lang.hitch(this,this.handleLineSymbolChanged));this.rectangleConfigurationWidget=new _4a4();this.rectangleConfigurationWidget.placeAt(this.configureRectangleWidgetContainer);this.rectangleConfigurationWidget.on("change",lang.hitch(this,this.handleRectangleSymbolChanged));this.configureTextWidget=new _4a3();this.configureTextWidget.placeAt(this.configureTextWidgetContainer);this.configureTextWidget.on("change",lang.hitch(this,this.handleTextSymbolChanged));this.configurePolygonWidget=new _4a4();this.configurePolygonWidget.placeAt(this.configurePolygonWidgetContainer);this.configurePolygonWidget.on("change",lang.hitch(this,this.handlePolygonSymbolChanged));},handlePointSymbolChanged:function(_4a5){this.onPointSymbolChanged(_4a5);},handleLineSymbolChanged:function(_4a6){this.onLineSymbolChanged(_4a6);},handlePolygonSymbolChanged:function(_4a7){this.onPolygonSymbolChanged(_4a7);},handleTextSymbolChanged:function(_4a8){this.onTextSymbolChanged(_4a8);},handleRectangleSymbolChanged:function(_4a9){this.onRectangleSymbolChanged(_4a9);},onPointSymbolChanged:function(_4aa){},onLineSymbolChanged:function(_4ab){},onPolygonSymbolChanged:function(_4ac){},onTextSymbolChanged:function(_4ad){},onRectangleSymbolChanged:function(_4ae){}});});},"esriviewer/ui/draw/configure/geometry/ConfigureLineWidget":function(){require({cache:{"url:esriviewer/ui/draw/configure/geometry/template/ConfigureLineTemplate.html":"<div class=\"configureDrawGeometryContainer\">\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Line Style</span>\r\n        <select data-bind=\"options: lineStyles ,value:selectedLineStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Width</span>\r\n        <select data-bind=\"options: lineWidths ,value:selectedWidth\"></select>\r\n    </div>\r\n    <div data-dojo-attach-point=\"transparencySliderContainer\"></div>\r\n\r\n    <div class=\"configureDrawColorPickerContainer\" data-dojo-attach-point=\"colorPickerContainer\"></div>\r\n</div>"}});define("esriviewer/ui/draw/configure/geometry/ConfigureLineWidget",["dojo/_base/declare","dojo/text!./template/ConfigureLineTemplate.html","dojo/topic","dojo/_base/lang","dojo/_base/Color","./model/ConfigureLineViewModel","./BaseGeometryConfigurationWidget","esri/symbols/SimpleLineSymbol"],function(_4af,_4b0,_4b1,lang,_4b2,_4b3,_4b4,_4b5){return _4af([_4b4],{templateString:_4b0,postCreate:function(){this.inherited(arguments);this.viewModel=new _4b3();this.viewModel.selectedLineStyle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedWidth.subscribe(lang.hitch(this,this.processChange));ko.applyBindings(this.viewModel,this.domNode);},processChange:function(){this.onChange(this.getSymbol());},getSymbol:function(){return new _4b5(this.viewModel.selectedLineStyle(),this.getColor(),this.viewModel.selectedWidth());}});});},"esriviewer/ui/layers/LayersTocWidget":function(){require({cache:{"url:esriviewer/ui/layers/template/LayersTocWidgetTemplate.html":"<div>\r\n    <div class=\"tocRightClickLbl\">Right click for actions</div>\r\n    <div data-dojo-attach-point=\"tocContainer\" class=\"tocContainer\">\r\n\r\n\r\n    </div>\r\n</div>"}});define("esriviewer/ui/layers/LayersTocWidget",["dojo/_base/declare","dojo/text!./template/LayersTocWidgetTemplate.html","dojo/_base/array","dojo/topic","dojo/_base/lang","dojo/dom-style","dojo/dom-class","dojo/dom-construct","dijit/Tree","dijit/tree/ForestStoreModel","dijit/tree/dndSource","dojo/dnd/Avatar","dojo/dnd/Manager","dojo/data/ItemFileWriteStore","./base/LayersTocWidgetContextMenu","../base/UITemplatedWidget","esri/layers/ArcGISTiledMapServiceLayer"],function(_4b6,_4b7,_4b8,_4b9,lang,_4ba,_4bb,_4bc,Tree,_4bd,_4be,_4bf,_4c0,_4c1,_4c2,_4c3,_4c4){return _4b6([_4c3],{templateString:_4b7,constructor:function(){this.treeStore=new _4c1({data:{items:[],identifier:"id",label:"label"}});this.treeModel=new _4bd({store:this.treeStore,openOnClick:true});this.tree=new Tree({model:this.treeModel,getIconClass:lang.hitch(this,this.getTreeIcon),showRoot:false});_4ba.set(this.tree.domNode,"height","100%");this.treeContextMenu=new _4c2({tree:this.tree});this.treeContextMenu.bindNodeToNoContentMenu(this.tree.rootNode.domNode);},postCreate:function(){this.inherited(arguments);_4bc.place(this.tree.domNode,this.tocContainer);},initListeners:function(){this.tree.on("click",lang.hitch(this,this.treeClickHandler));},getNodeFromItem:function(item){var _4c5=item.id[0];return this.tree._itemNodesMap[_4c5][0];},getTreeIcon:function(item,_4c6){if(item.root){return "tocIcons layerService";}var _4c7=null;var _4c8=null;if(item.layer){_4c7=this.treeStore.getValue(item,"layer");}if(item.layerId){_4c8=this.treeStore.getValue(item,"layerId");}if(_4c7){if(_4c8!=null){var _4c9=this.treeStore.getValue(item,"info");if(lang.isArray(_4c9.subLayerIds)&&_4c9.subLayerIds.length>0){if(_4c6){return "tocIcons folderOpen";}else{return "tocIcons folderClosed";}}else{var _4ca=_4b8.indexOf(_4c7.visibleLayers,_4c8)>-1;if(lang.isObject(_4c9.metadata)){var _4cb=_4c9.metadata;if(_4cb.geometryType!=""){if(_4cb.geometryType==VIEWER_GLOBALS.ESRI_GEOMETRY_TYPES.POINT){if(_4c7.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.TILED_MAP_SERVICE){return "tocIcons layerPoint";}if(_4ca){return "tocIcons layerPointChecked";}else{return "tocIcons layerPointUnchecked";}}else{if(_4cb.geometryType==VIEWER_GLOBALS.ESRI_GEOMETRY_TYPES.LINE){if(_4c7.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.TILED_MAP_SERVICE){return "tocIcons layerLine";}if(_4ca){return "tocIcons layerLineChecked";}else{return "tocIcons layerLineUnchecked";}}else{if(_4cb.geometryType==VIEWER_GLOBALS.ESRI_GEOMETRY_TYPES.POLYGON){if(_4c7.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.TILED_MAP_SERVICE){return "tocIcons layerPolygon";}if(_4ca){return "tocIcons layerPolygonChecked";}else{return "tocIcons layerPolygonUnchecked";}}else{if(_4c7.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.TILED_MAP_SERVICE){return "tocIcons layerGeneric";}if(_4ca){return "layerGenericChecked";}else{return "layerGenericUnchecked";}}}}}else{if(_4cb.type==VIEWER_GLOBALS.ESRI_LAYER_TYPES.RASTER){if(_4c7 instanceof _4c4){return "tocIcons layerRasterIcon";}if(_4ca){return "tocIcons layerRasterIconChecked";}else{return "tocIcons layerRasterIconUnchecked";}}else{return _4ca?"tocIcons layerGenericChecked":"tocIcons layerGenericUnchecked";}}}else{if(_4c7.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.IMAGE_SERVICE){return "genericLayerIcon";}else{return _4ca?"tocIcons layerGenericChecked":"tocIcons layerGenericUnchecked";}}}}else{if(_4c7.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.IMAGE_SERVICE){if(_4c7.visible){return "tocIcons imageServiceChecked";}else{return "tocIcons imageServiceUnchecked";}}else{if(_4c7.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.DYNAMIC_MAP_SERVICE){if(_4c7.visible){return "tocIcons globeChecked";}else{return "tocIcons globeUnchecked";}}else{if(_4c7.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.TILED_MAP_SERVICE){if(_4c7.visible){return "tocIcons layerRasterChecked";}else{return "tocIcons layerRasterUnchecked";}}else{if(_4c7.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.FEATURE_LAYER){if(_4c7.visible){return "tocIcons layerGenericChecked";}else{return "tocIcons layerGenericUnchecked";}}else{if(_4c7.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.GRAPHICS_LAYER){if(_4c7.visible){return "tocIcons graphicsLayerChecked";}else{return "tocIcons graphicsLayerUnchecked";}}else{if(_4c7.visible){return "tocIcons layerGenericChecked";}else{return "tocIcons layerGenericUnchecked";}}}}}}}}return "tocIcons layerGeneric";},addTreeNode:function(item,_4cc){var _4cd={children:[]};_4cd.parent=_4cc;if(_4cc.children!=null){_4cd.attribute="children";}return this.treeStore.newItem(item,_4cd);},addLayer:function(_4ce){if(_4ce==null||!_4ce.isOperationalLayer){return;}var _4cf=VIEWER_UTILS.getLayerNameFromLayer(_4ce);var _4d0={label:_4cf,serviceId:_4ce.id,layer:_4ce,id:VIEWER_UTILS.generateUUID()};if(lang.isArray(_4ce.layerInfos)&&_4ce.layerInfos.length>0){_4d0.children=[];}var _4d1=this.addTreeNode(_4d0,this.tree.rootNode);var _4d2=this.getNodeFromItem(_4d1);if(!(_4ce.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.GRAPHICS_LAYER)||(_4ce.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.FEATURE_LAYER)){this.treeContextMenu.bindNodeToServerMenu(_4d2.domNode);}else{this.treeContextMenu.bindNodeToGraphicsLayerMenu(_4d2.domNode);}this.checkForChildLayers(_4ce,_4d1);},checkForChildLayers:function(_4d3,_4d4){var _4d5={};var _4d6=_4d3.layerInfos;if(lang.isArray(_4d6)){var _4d7=_4d4;var _4d8;for(var i=0;i<_4d6.length;i++){_4d8=false;var info=_4d6[i];if(info==null){continue;}var name=info.name;subLayerItem={id:VIEWER_UTILS.generateUUID(),label:name,layerId:info.id,serviceId:_4d3.id,layer:_4d3,info:info};if(lang.isArray(info.subLayerIds)){subLayerItem.children=[];_4d8=true;}if(info.parentLayerId>-1){_4d7=_4d5[info.parentLayerId];if(_4d7==null){return;}}var _4d9=this.addTreeNode(subLayerItem,_4d7);var _4da=this.getNodeFromItem(_4d9);if(_4d8){_4d5[info.id]=_4d9;this.treeContextMenu.bindNodeToGroupMenu(_4da.domNode);}else{this.treeContextMenu.bindNodeToLayerMenu(_4da.domNode);}}}},removeLayer:function(_4db){if(_4db==null){return;}var _4dc;this.treeStore.fetch({query:{serviceId:_4db.id},queryOptions:{deep:false},onComplete:lang.hitch(this,this.deleteNodes)});},deleteNodes:function(_4dd){for(var i=0;i<_4dd.length;i++){this.deleteNode(_4dd[i]);}},deleteChildNodes:function(item){var _4de=this.treeStore.getValue(item,"isPersistedToCookie");if(_4de){var url=this.treeStore.getValue(item,"url");}var node=this.getNodeFromItem(item);var _4df=node.getChildren();for(var i=0;i<_4df.length;i++){this.deleteNode(_4df[i].item);}this.treeStore.save();},deleteNode:function(item){this.deleteChildNodes(item);this.treeStore.deleteItem(item);this.treeStore.save();},treeClickHandler:function(item,node,_4e0){var _4e1=null;var _4e2=null;if(item.layer){_4e1=this.treeStore.getValue(item,"layer");}if(item.layerId){_4e2=this.treeStore.getValue(item,"layerId");}if(_4e1 instanceof _4c4&&item.layerId!=null){return;}if(_4e1&&_4e2==null){if(_4e1.visible){_4e1.hide();}else{_4e1.show();}}else{if(_4e1&&_4e2!=null){this.toggleDynamicSubLayerItem(_4e1,_4e2);this.processVisibleLayers(_4e1);}}node._updateItemClasses(item);},processVisibleLayers:function(_4e3){if(_4e3.visibleLayers.length==0){_4e3.setVisibleLayers([-1]);}else{var _4e4=VIEWER_UTILS.sortIntegerArray(_4e3.visibleLayers);_4e3.setVisibleLayers(_4e4);}},toggleDynamicSubLayerItem:function(_4e5,_4e6){if(_4e5==null){return;}var _4e7=_4b8.indexOf(_4e5.visibleLayers,_4e6)>-1;if(_4e7){index=_4b8.indexOf(_4e5.visibleLayers,_4e6);if(index>-1){_4e5.visibleLayers.splice(index,1);}}else{_4e5.visibleLayers.push(_4e6);}}});});},"esriviewer/map/base/MapNavDrawTools":function(){define("esriviewer/map/base/MapNavDrawTools",["dojo/_base/declare","dojo/topic","dojo/_base/connect","dojo/_base/lang","dojox/timing","dojo/_base/Color","esri/toolbars/draw","esri/graphic","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Extent","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol"],function(_4e8,_4e9,con,lang,_4ea,_4eb,Draw,_4ec,_4ed,_4ee,_4ef,_4f0,_4f1,_4f2){return _4e8([],{CROSSHAIR:"crosshair",DEFAULT:"default",MOVE:"move",POINTER:"pointer",currentGraphicFlashCount:0,maxGraphicFlashCount:3,currentFlashGraphicVisible:false,constructor:function(_4f3){lang.mixin(this,_4f3);this._initListeners();this.createDrawToolbar();},createDrawToolbar:function(){this.drawToolbar=new Draw(this.map,{showTooltips:true});},_initListeners:function(){_4e9.subscribe(VIEWER_GLOBALS.EVENTS.MAP.FLASH.POINT,lang.hitch(this,this.flashPoint));_4e9.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.DRAW_CANCEL,lang.hitch(this,this.handleDrawCancel));_4e9.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.RECTANGLE_INPUT,lang.hitch(this,this.handleUserRectangleDrawInput));_4e9.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.POLYLINE_INPUT,lang.hitch(this,this.handleUserPolyLineDrawInput));_4e9.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.LINE_INPUT,lang.hitch(this,this.handleUserLineDrawInput));_4e9.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.POINT_INPUT,lang.hitch(this,this.handleUserPointClickInput));_4e9.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.POLYGON_INPUT,lang.hitch(this,this.handleUserPolygonClickInput));_4e9.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.FREEHAND_POLYLINE_INPUT,lang.hitch(this,this.handleUserFreehandLineDrawInput));_4e9.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.FREEHAND_POLYGON_INPUT,lang.hitch(this,this.handleUserFreehandPolygonDrawInput));_4e9.subscribe(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.ADD,lang.hitch(this,this.handleAddGraphic));_4e9.subscribe(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.REMOVE,lang.hitch(this,this.removeGraphic));_4e9.subscribe(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.CENTER_AND_FLASH,lang.hitch(this,this.handleCenterAndFlashGraphic));},handleAddGraphic:function(_4f4){if(this.map&&this.map.graphics){this.map.graphics.add(_4f4);}},removeGraphic:function(_4f5){if(this.map&&this.map.graphics){this.map.graphics.remove(_4f5);}},handleDrawCancel:function(){this.drawToolbar.deactivate();if(this._drawEventHandle){con.disconnect(this._drawEventHandle);this._drawEventHandle=null;}this.map.enableMapNavigation();this.map.setMapCursor(this.DEFAULT);},handleUserRectangleDrawInput:function(_4f6,_4f7){_4e9.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_RECTANGLE);this.userRectangleDrawInput(_4f6,_4f7);},handleUserLineDrawInput:function(_4f8,_4f9){_4e9.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_LINE);this.userLineDrawInput(_4f8,_4f9);},handleUserPolyLineDrawInput:function(_4fa,_4fb){_4e9.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_POLYLINE);this.userPolylineDrawInput(_4fa,_4fb);},handleUserPointClickInput:function(_4fc,_4fd){_4e9.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_POINT);this.userPointDrawInput(_4fc,_4fd);},handleUserPolygonClickInput:function(_4fe,_4ff){_4e9.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_POLYGON);this.userPolygonDrawInput(_4fe,_4ff);},handleUserFreehandLineDrawInput:function(_500,_501){_4e9.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_FREEHAND_LINE);this.userFreehandLineDrawInput(_500,_501);},handleUserFreehandPolygonDrawInput:function(_502,_503){_4e9.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_FREEHAND_POLYGON);this.userFreehandPolygonDrawInput(_502,_503);},userFreehandPolygonDrawInput:function(_504,_505){this.userDrawCancel();var _506=_505&&_505.cursor?_505.cursor:this.CROSSHAIR;this.map.setMapCursor(_506);this.activateDraw(Draw.FREEHAND_POLYGON,_504,_505);},userFreehandLineDrawInput:function(_507,_508){this.userDrawCancel();var _509=_508&&_508.cursor?_508.cursor:this.CROSSHAIR;this.map.setMapCursor(_509);this.activateDraw(Draw.FREEHAND_POLYLINE,_507,_508);},userRectangleDrawInput:function(_50a,_50b){this.userDrawCancel();var _50c=_50b&&_50b.cursor?_50b.cursor:this.CROSSHAIR;this.map.setMapCursor(_50c);this.activateDraw(Draw.EXTENT,_50a,_50b);},userLineDrawInput:function(_50d,_50e){this.userDrawCancel();var _50f=_50e&&_50e.cursor?_50e.cursor:this.CROSSHAIR;this.map.setMapCursor(_50f);this.activateDraw(Draw.LINE,_50d,_50e);},userPolylineDrawInput:function(_510,_511){this.userDrawCancel();var _512=_511&&_511.cursor?_511.cursor:this.CROSSHAIR;this.map.setMapCursor(_512);this.activateDraw(Draw.POLYLINE,_510,_511);},userPointDrawInput:function(_513,_514){this.userDrawCancel();var _515=_514&&_514.cursor?_514.cursor:this.POINTER;this.map.setMapCursor(_515);this.activateDraw(Draw.POINT,_513,_514);},userPolygonDrawInput:function(_516,_517){this.userDrawCancel();var _518=_517&&_517.cursor?_517.cursor:this.CROSSHAIR;this.map.setMapCursor(_518);this.activateDraw(Draw.POLYGON,_516,_517);},activateDraw:function(type,_519,_51a){if(_51a==null){_51a={};}if(_519!=null&&lang.isFunction(_519)){this._drawEventHandle=con.connect(this.drawToolbar,"onDrawEnd",lang.hitch(this,this._internalDrawComplete,_519));}_51a.showTooltips=_51a.showTooltips==null?true:_51a.showTooltips;this.drawToolbar.activate(type,_51a);this.map.disableMapNavigation();},_internalDrawComplete:function(_51b,_51c){this.drawToolbar.deactivate();this.map.setMapCursor(this.DEFAULT);this.map.enableMapNavigation();if(_51b!=null&&lang.isFunction(_51b)){_51b(_51c);}},userDrawCancel:function(){this.drawToolbar.deactivate();if(this._drawEventHandle){con.disconnect(this._drawEventHandle);this._drawEventHandle=null;}this.map.setMapCursor(this.DEFAULT);},handleCenterAndFlashGraphic:function(_51d){this.centerMapAtGraphic(_51d);this.flashGraphic(_51d);},centerMapAtGraphic:function(_51e){var _51f=this.getGraphicCenter(_51e);if(_51f){this.centerMapAtPoint(_51f);}},centerMapAtPoint:function(_520){this.map.centerAt(_520);},flashGraphic:function(_521){if(_521==null||!(_521 instanceof _4ec)||this.graphicFlashInProgress){return;}this.currentGraphicFlashCount=0;this.currentFlashGraphic=_521;this.graphicFlashTimer=new _4ea.Timer(500);var _522=_521.visible;_521.hide();this.graphicFlashTimer.onTick=lang.hitch(this,function(_523){try{if(this.currentGraphicFlashCount==this.maxGraphicFlashCount){this.currentGraphicFlashCount=0;this.graphicFlashTimer.stop();this.graphicFlashInProgress=false;if(_523){this.currentFlashGraphic.show();}else{this.currentFlashGraphic.hide();}}else{if(this.currentFlashGraphic.visible){if(this.currentFlashGraphic!=null){this.currentFlashGraphic.hide();}}else{if(this.currentFlashGraphic!=null){this.currentFlashGraphic.show();this.currentGraphicFlashCount++;}}}}catch(err){}},_522);this.graphicFlashInProgress=true;this.graphicFlashTimer.start();},getGraphicCenter:function(_524){if(_524==null){return;}if(_524.geometry==null){return;}var _525=_524.geometry;if(_525 instanceof _4ed){return _525;}else{if(_525 instanceof _4ee||_525 instanceof _4ef){var _526=_525.getExtent();return _526.getCenter();}else{if(_525 instanceof _4f0){return _525.getCenter();}}}return null;},flashPoint:function(pt,_527){if(_527==null){_527=20;}var _528;if(pt==null||!(pt instanceof _4ed)){return;}var _529=new _4f1(_4f1.STYLE_X,2,new _4f2(_4f2.STYLE_SOLID,new _4eb([255,0,0])));_528=new _4ec(pt,_529);var opac=1;setTimeout(function(){_4e9.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.ADD,_528);var i_id=setInterval(function(){_529.setColor(new _4eb([255,0,0,opac]));_528.setSymbol(_529);if(opac<0.01){clearInterval(i_id);_4e9.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.REMOVE,_528);}opac-=0.01;},_527);},700);}});});},"esriviewer/ui/draw/base/UserPersistsedGraphicsListWidget":function(){require({cache:{"url:esriviewer/ui/draw/base/template/UserPersistedGrahicsListingTemplate.html":"<div>\r\n    <div class=\"addedUserPersistedGraphicsListContainer\" data-dojo-attach-point=\"addedUserPersistedGraphicsListContainer\">\r\n        <ul data-dojo-attach-point=\"addedGraphicsList\" class=\"viewerList\" data-bind=\"foreach: addedUserPersistedGraphics\">\r\n            <li class=\"graphicsListEntry\">\r\n                <div title=\"Delete Saved Graphics\" class=\"viewerListEntryRemoveIcon commonIcons16 remove\" data-bind=\"click:$parent.removeUserPersistedGraphic\"></div>\r\n                <div title=\"Add Saved Graphics To Map\" class=\"viewerListGenericIcon commonIcons16 layerShow\" data-bind=\"click:$parent.addSavedGraphics\"></div>\r\n                <span class=\"graphicsListEntryLabel\" data-bind=\"text: $data.label\"></span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>"}});define("esriviewer/ui/draw/base/UserPersistsedGraphicsListWidget",["dojo/_base/declare","dojo/text!./template/UserPersistedGrahicsListingTemplate.html","dojo/topic","../../base/UITemplatedWidget","dojo/_base/lang","./model/UserPersistedGraphicsListViewModel"],function(_52a,_52b,_52c,_52d,lang,_52e){return _52a([_52d],{bindingsApplied:false,templateString:_52b,constructor:function(){this.userPersistedGraphics={};},postCreate:function(){this.inherited(arguments);this.viewModel=new _52e();this.viewModel.on(this.viewModel.REMOVE_USER_PERSISTED_GRAPHICS,lang.hitch(this,this.handleRemoveUserPersistedGraphics));this.viewModel.on(this.viewModel.ADD_USER_PERSISTED_GRAPHICS_TO_MAP,lang.hitch(this,this.handleAddUserPersistedGraphicsToMap));},applyBindings:function(){if(!this.bindingsApplied){this.bindingsApplied=true;ko.applyBindings(this.viewModel,this.domNode);}},handleAddUserPersistedGraphicsToMap:function(_52f){if(_52f&&lang.isObject(_52f)){this.onAddUserPersistedGraphicsToMap(_52f);}},onAddUserPersistedGraphicsToMap:function(_530){},handleRemoveUserPersistedGraphics:function(_531){if(_531&&lang.isObject(_531)&&_531.label!=null&&_531.label!=""){this.onRemoveUserPersistedGraphics(_531.label);}},onRemoveUserPersistedGraphics:function(_532){},addExistingPersistedGraphicsItems:function(_533){for(var key in _533){this.viewModel.addedUserPersistedGraphics.push(_533[key]);}this.viewModel.sort();this.applyBindings();},addUserPersistedGraphics:function(_534){this.viewModel.addedUserPersistedGraphics.push(_534);this.viewModel.sort();}});});},"url:esriviewer/ui/toolbar/template/ActionsToolbarWidgetTemplate.html":"<div class='viewerMainToolbar headerFooterBg'>\r\n    <div class=\"mainToolbarContents\" data-dojo-attach-point=\"mainToolbarContents\">\r\n\r\n            <span data-bind=\"visible: toolsButtonVisible\"\r\n                  data-dojo-type=\"dijit/form/DropDownButton\"\r\n                  data-dojo-attach-point=\"toolsDropDownButton\"\r\n                  data-dojo-props=\"iconClass:'commonIcons16 wrench'\">\r\n                <span>Tools</span>\r\n            </span>\r\n\r\n        <div data-dojo-attach-point=\"layersButton\" class=\"actionsToolbarButton\"\r\n             data-bind=\"visible: layersButtonVisible\">\r\n            <div class=\"commonIcons16 list actionsToolbarIcon\"></div>\r\n            <div class=\"actionsToolbarText\">Layers</div>\r\n        </div>\r\n        <div data-dojo-attach-point=\"bookmarksButton\" class=\"actionsToolbarButton\"\r\n             data-dojo-attach-event=\"onclick:toggleBookmarksListing\">\r\n            <div class=\"commonIcons16 bookmark actionsToolbarIcon\"></div>\r\n            <div class=\"actionsToolbarText\">Bookmarks</div>\r\n        </div>\r\n        <div data-dojo-attach-point=\"basemapsButton\" class=\"actionsToolbarButton\"\r\n             data-dojo-attach-event=\"onclick:toggleBasemapsListing\">\r\n            <div class=\"commonIcons16 layer actionsToolbarIcon\"></div>\r\n            <div class=\"actionsToolbarText\">Basemaps</div>\r\n\r\n        </div>\r\n        <span data-dojo-type=\"dijit/form/ToggleButton\"\r\n              data-dojo-attach-point=\"labelsButton\"\r\n              data-dojo-props=\"iconClass:'dijitCheckBoxIcon'\">Labels</span>\r\n\r\n        <div data-dojo-attach-point=\"addOnContentContainer\"></div>\r\n        <div class=\"locateToolbarContainer locateToolbarContainerOnMap\" data-dojo-attach-point=\"locateToolbarContainer\">\r\n            <input value=\"${locateDefaultInput}\" type=\"text\" class=\"locateTextBox defaultBorder\"\r\n                   data-dojo-attach-point=\"locateTextBox\"/>\r\n\r\n            <div data-dojo-attach-point=\"locateButton\" title=\"Locate\"\r\n                 class=\"defaultBorder searchButton searchButtonIcon\"></div>\r\n            <div data-dojo-attach-point=\"configureLocateButton\"\r\n                 data-dojo-attach-event=\"onclick:toggleConfigureLocatorTooltip\" title=\"Configure Locate\"\r\n                 class=\"defaultBorder configureLocate configureButtonIcon\"></div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","dijit/ColorPalette":function(){require({cache:{"url:dijit/templates/ColorPalette.html":"<div class=\"dijitInline dijitColorPalette\">\n\t<table dojoAttachPoint=\"paletteTableNode\" class=\"dijitPaletteTable\" cellSpacing=\"0\" cellPadding=\"0\" role=\"grid\">\n\t\t<tbody data-dojo-attach-point=\"gridNode\"></tbody>\n\t</table>\n</div>\n"}});define("dijit/ColorPalette",["require","dojo/text!./templates/ColorPalette.html","./_Widget","./_TemplatedMixin","./_PaletteMixin","./hccss","dojo/i18n","dojo/_base/Color","dojo/_base/declare","dojo/dom-construct","dojo/string","dojo/i18n!dojo/nls/colors","dojo/colors"],function(_535,_536,_537,_538,_539,has,i18n,_53a,_53b,_53c,_53d){var _53e=_53b("dijit.ColorPalette",[_537,_538,_539],{palette:"7x10",_palettes:{"7x10":[["white","seashell","cornsilk","lemonchiffon","lightyellow","palegreen","paleturquoise","lightcyan","lavender","plum"],["lightgray","pink","bisque","moccasin","khaki","lightgreen","lightseagreen","lightskyblue","cornflowerblue","violet"],["silver","lightcoral","sandybrown","orange","palegoldenrod","chartreuse","mediumturquoise","skyblue","mediumslateblue","orchid"],["gray","red","orangered","darkorange","yellow","limegreen","darkseagreen","royalblue","slateblue","mediumorchid"],["dimgray","crimson","chocolate","coral","gold","forestgreen","seagreen","blue","blueviolet","darkorchid"],["darkslategray","firebrick","saddlebrown","sienna","olive","green","darkcyan","mediumblue","darkslateblue","darkmagenta"],["black","darkred","maroon","brown","darkolivegreen","darkgreen","midnightblue","navy","indigo","purple"]],"3x4":[["white","lime","green","blue"],["silver","yellow","fuchsia","navy"],["gray","red","purple","black"]]},templateString:_536,baseClass:"dijitColorPalette",_dyeFactory:function(_53f,row,col,_540){return new this._dyeClass(_53f,row,col,_540);},buildRendering:function(){this.inherited(arguments);this._dyeClass=_53b(_53e._Color,{palette:this.palette});this._preparePalette(this._palettes[this.palette],i18n.getLocalization("dojo","colors",this.lang));}});_53e._Color=_53b("dijit._Color",_53a,{template:"<span class='dijitInline dijitPaletteImg'>"+"<img src='${blankGif}' alt='${alt}' title='${title}' class='dijitColorPaletteSwatch' style='background-color: ${color}'/>"+"</span>",hcTemplate:"<span class='dijitInline dijitPaletteImg' style='position: relative; overflow: hidden; height: 12px; width: 14px;'>"+"<img src='${image}' alt='${alt}' title='${title}' style='position: absolute; left: ${left}px; top: ${top}px; ${size}'/>"+"</span>",_imagePaths:{"7x10":_535.toUrl("./themes/a11y/colors7x10.png"),"3x4":_535.toUrl("./themes/a11y/colors3x4.png")},constructor:function(_541,row,col,_542){this._title=_542;this._row=row;this._col=col;this.setColor(_53a.named[_541]);},getValue:function(){return this.toHex();},fillCell:function(cell,_543){var html=_53d.substitute(has("highcontrast")?this.hcTemplate:this.template,{color:this.toHex(),blankGif:_543,alt:this._title,title:this._title,image:this._imagePaths[this.palette].toString(),left:this._col*-20-5,top:this._row*-20-5,size:this.palette=="7x10"?"height: 145px; width: 206px":"height: 64px; width: 86px"});_53c.place(html,cell);}});return _53e;});},"esriviewer/ui/base/UIWidget":function(){define("esriviewer/ui/base/UIWidget",["dojo/_base/declare","dijit/_Widget","dojo/_base/lang","dojo/_base/connect","dojo/dom-construct","dojo/dom-style","../../base/ConfigurationEntryMixin"],function(_544,_545,lang,con,_546,_547,_548){return _544([_545,_548],{defaultPositioning:{x:0,y:0},positioningParamName:null,isPositionedByConfig:false,LEFT_LOWER:"left",RIGHT_LOWER:"right",TOP_LOWER:"top",BOTTOM_LOWER:"bottom",constructor:function(){this.creationPositioning=lang.mixin({},this.defaultPositioning);this.connects=[];this.subscribes=[];},postCreate:function(){this.loadViewerConfigurationData();this.initListeners();if(this.isPositionedByConfig){this.positionNode();}},initListeners:function(){},destroy:function(){this.clearSubscribes();this.clearConnects();},placeAt:function(node){_546.place(this.domNode,node);return this;},clearSubscribes:function(){if(lang.isArray(this.subscribes)){for(var i=0;i<this.subscribes.length;i++){this.subscribes[i].remove();}}},positionNode:function(){_547.set(this.domNode,"position","absolute");var _549=VIEWER_GLOBALS.windowPositioning[this.positioningParamName];var _54a=(_549!=null&&_549.x!=null)?_549.x:this.defaultPositioning.x;var _54b=(_549!=null&&_549.y!=null)?_549.y:this.defaultPositioning.y;var _54c="left";var _54d="top";if(_549){if(_549.alignY!=null&&lang.isString(_549.alignY)){var _54e=_549.alignY.toLowerCase();if(_54e===this.TOP_LOWER||_54e===this.BOTTOM_LOWER){_54d=_54e;}}if(_549.alignX!=null&&lang.isString(_549.alignX)){var _54f=_549.alignX.toLowerCase();if(_54f===this.LEFT_LOWER||_54f===this.RIGHT_LOWER){_54c=_54f;}}}_547.set(this.domNode,_54c,_54a+"px");_547.set(this.domNode,_54d,_54b+"px");this.creationPositioning={x:_54a,y:_54b,alignX:_54c,alignY:_54d};},clearConnects:function(){if(lang.isArray(this.connects)){for(var i=0;i<this.connects.length;i++){if(this.connects[i].remove!=null&&lang.isFunction(this.connects[i].remove)){this.connects[i].remove();}else{con.disconnect(this.connects[i]);}}}},show:function(){_547.set(this.domNode,"display","block");},hide:function(){_547.set(this.domNode,"display","none");},hidePopups:function(){}});});},"dojox/storage":function(){define("dojox/storage",["./storage/_common"],function(){});},"dojox/main":function(){define("dojox/main",["dojo/_base/kernel"],function(dojo){return dojo.dojox;});},"undefined":undefined,"esriviewer/ui/measure/MeasureWidget":function(){require({cache:{"url:esriviewer/ui/measure/template/MeasureWidgetTemplate.html":"<div class=\"measurementWidget\">\r\n    <div class=\"measureIcon areaIcon\"\r\n         title=\"Area\"\r\n         data-bind=\"click:handleAreaButtonClick, css: {measurementIconSelected: areaActive}\"></div>\r\n    <div class=\"measureIcon distanceIcon\"\r\n         title=\"Distance\"\r\n         data-bind=\"click:handleDistanceButtonClick, css: {measurementIconSelected: distanceActive}\"></div>\r\n    <div class=\"measureIcon locationIcon\"\r\n         title=\"Location\"\r\n         data-bind=\"click:handleLocationButtonClick, css: {measurementIconSelected: locationActive}\"></div>\r\n    <div class=\"measurementSpacer\">|</div>\r\n    <select data-bind=\"visible: areaActive, options: areaMeasurementUnits ,value:selectedAreaUnits, optionsText: 'label', optionsValue: 'value'\">\r\n    </select>\r\n    <select data-bind=\"visible: distanceActive, options: distanceMeasurementUnits ,value:selectedDistanceUnits, optionsText: 'label', optionsValue: 'value'\">\r\n    </select>\r\n    <select data-bind=\"visible: locationActive, options: locationUnits ,value:selectedLocationUnits, optionsText: 'label', optionsValue: 'value'\">\r\n    </select>\r\n\r\n\r\n    <div class=\"measurementResultsContainer\">\r\n        <span data-bind=\"text: measureMethodText\" class=\"measureMethodText\"></span>\r\n        <span data-bind=\"text: resultsText\" class=\"measureResultsText\"></span>\r\n        <span data-bind=\"text: unitsText\"  class=\"measureUnitsText\"></span>\r\n    </div>\r\n</div>"}});define("esriviewer/ui/measure/MeasureWidget",["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/topic","../base/UITemplatedWidget","dojo/text!./template/MeasureWidgetTemplate.html","./model/MeasureWidgetViewModel","../draw/base/MapDrawSupport","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleMarkerSymbol"],function(_550,lang,_551,_552,_553,_554,_555,_556,_557,_558,_559,_55a,_55b,_55c){return _550([_553,_556],{measureFloatPrecision:2,locationFloatPrecision:3,templateString:_554,AREA:"area",DISTANCE:"distance",LOCATION:"location",constructor:function(){this.currentGeometry=null;this.currentGraphic=null;},postCreate:function(){this.distanceResponseCallback=lang.hitch(this,this.handleDistanceResponse);this.areaResponseCallback=lang.hitch(this,this.handleAreaResponse);this.locationResponseCallback=lang.hitch(this,this.handleLocationResponse);this.initSymbology();this.viewModel=new _555();this.viewModel.areaActive.subscribe(lang.hitch(this,this.handleAreaActiveChanged));this.viewModel.distanceActive.subscribe(lang.hitch(this,this.handleDistanceActiveChanged));this.viewModel.locationActive.subscribe(lang.hitch(this,this.handleLocationActiveChanged));this.viewModel.selectedAreaUnits.subscribe(lang.hitch(this,this.handleSelectedAreaUnitsChanged));this.viewModel.selectedDistanceUnits.subscribe(lang.hitch(this,this.handleSelectedDistanceUnitsChanged));this.viewModel.selectedLocationUnits.subscribe(lang.hitch(this,this.handleSelectedLocationUnitsChanged));ko.applyBindings(this.viewModel,this.domNode);},handleSelectedLocationUnitsChanged:function(_55d){if(this.currentGeometry&&this.currentGeometry instanceof _557){_552.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_LAT_LON,this.currentGeometry,this.locationResponseCallback);}},handleSelectedDistanceUnitsChanged:function(_55e){if(this.currentGeometry&&this.currentGeometry instanceof _558){_552.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_DISTANCE,this.currentGeometry,_55e,this.distanceResponseCallback);}},handleSelectedAreaUnitsChanged:function(_55f){if(this.currentGeometry&&this.currentGeometry instanceof _559){_552.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_AREA,this.currentGeometry,_55f,this.areaResponseCallback);}},initSymbology:function(){this.polygonSymbol=new _55a(_55a.STYLE_SOLID,new _55b(_55b.STYLE_SOLID,new _551([0,0,255]),1),new _551([0,0,255,0]));this.pointSymbol=new _55c(_55c.STYLE_X,1,new _55b(_55b.STYLE_SOLID,new _551("blue")));this.lineSymbol=new _55b(_55b.STYLE_SOLID,new _551([0,0,255]),1);},handleAreaActiveChanged:function(_560){if(_560){this.handlePolygonDraw();this.activeMode=this.AREA;}else{if(this.activeMode==this.AREA){this.activeMode="";this.clearCurrentGraphic();this.clearDraw();this.viewModel.resultsText("");}}},handleDistanceActiveChanged:function(_561){if(_561){this.handleLineDraw();this.activeMode=this.DISTANCE;}else{if(this.activeMode==this.DISTANCE){this.activeMode="";this.clearCurrentGraphic();this.clearDraw();this.viewModel.resultsText("");}}},handleLocationActiveChanged:function(_562){if(_562){this.handlePointDraw();this.activeMode=this.LOCATION;}else{if(this.activeMode==this.LOCATION){this.activeMode="";this.clearCurrentGraphic();this.clearDraw();this.viewModel.resultsText("");}}},clearDraw:function(){this.inherited(arguments);this.viewModel.areaActive(false);this.viewModel.distanceActive(false);this.viewModel.locationActive(false);this.viewModel.measureMethodText("");this.viewModel.unitsText("");this.viewModel.resultsText("");_552.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.DRAW_CANCEL);},clearCurrentGraphic:function(){if(this.currentGraphic){_552.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.REMOVE,this.currentGraphic);this.currentGraphic=null;}},handleLineDraw:function(){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_LINE);},handlePolygonDraw:function(){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON);},handlePointDraw:function(){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT);},geometryAdded:function(_563){this.currentGeometry=_563;this.inherited(arguments);if(this.viewModel.locationActive()){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT);_552.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_LAT_LON,_563,this.locationResponseCallback);}if(this.viewModel.areaActive()){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON);_552.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_AREA,_563,this.viewModel.selectedAreaUnits(),this.areaResponseCallback);}if(this.viewModel.distanceActive()){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_LINE);_552.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_DISTANCE,_563,this.viewModel.selectedDistanceUnits(),this.distanceResponseCallback);}},handleDistanceResponse:function(_564){if(_564==null||!lang.isObject(_564)||_564.lengths==null||!lang.isArray(_564.lengths)||_564.lengths.length<1){return;}this.viewModel.measureMethodText("Distance: ");this.viewModel.resultsText(REG_EXP_UTILS.numberToStringWithCommas(_564.lengths[0].toFixed(this.measureFloatPrecision)));this.viewModel.unitsText(this.viewModel.getLabelForDistanceValue(this.viewModel.selectedDistanceUnits()));},handleAreaResponse:function(_565){if(_565==null||!lang.isObject(_565)||_565.areas==null||!lang.isArray(_565.areas)||_565.areas.length<1){return;}var area=_565.areas[0];this.viewModel.measureMethodText("Area: ");this.viewModel.unitsText(this.viewModel.getLabelForAreaValue(this.viewModel.selectedAreaUnits()));this.viewModel.resultsText(REG_EXP_UTILS.numberToStringWithCommas(area.toFixed(this.measureFloatPrecision)));},handleLocationResponse:function(_566){if(_566==null||!lang.isArray(_566)||_566.length<1){return;}var pt=_566[0];this.viewModel.measureMethodText("");this.viewModel.unitsText("");if(this.viewModel.selectedLocationUnits()==VIEWER_GLOBALS.ESRI_UNITS.DEGREE_MINUTE_SECONDS){this.viewModel.resultsText("Latitude: "+GEOMETRY_UTILS.ddToDMSString(pt.y)+" Longitude:"+GEOMETRY_UTILS.ddToDMSString(pt.x));}else{this.viewModel.resultsText("Latitude: "+pt.y.toFixed(this.locationFloatPrecision)+" Longitude: "+pt.x.toFixed(this.locationFloatPrecision));}},onAnnotationCreated:function(_567){if(_567!=null&&_567.graphic!=null){this.inherited(arguments);this.clearCurrentGraphic();this.currentGraphic=_567.graphic;_552.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.ADD,_567.graphic);}},reset:function(){this.clearCurrentGraphic();this.clearDraw();this.currentGeometry=null;}});});},"esriviewer/map/geometry/base/ProjectionUtils":function(){define("esriviewer/map/geometry/base/ProjectionUtils",["dojo/_base/declare","dojo/_base/lang","dojo/topic","esri/geometry/webMercatorUtils","esri/geometry/Point","esri/SpatialReference"],function(_568,lang,_569,_56a,_56b,_56c){return _568([],{DEG_2_RAD:Math.PI/180,BLOCK_SIZE:100000,GRIDSQUARE_SET_COL_SIZE:8,GRIDSQUARE_SET_ROW_SIZE:20,UNDEFINED_STR:"undefined",WEB_MERCATOR_WKID:102100,WGS_84_WKID:4326,EASTING_OFFSET:500000,NORTHING_OFFSET:10000000,k0:0.9996,RAD_2_DEG:(180/Math.PI),EQUATORIAL_RADIUS_NAD83:6378137,EQUATORIAL_RADIUS_NAD27:6378206.4,ECC_SQUARED_NAD83:0.006694380023,ECC_SQUARED_NAD27:0.006768658,UTMGzdLetters:"NPQRSTUVWX",USNGSqEast:"ABCDEFGHJKLMNPQRSTUVWXYZ",USNGSqLetOdd:"ABCDEFGHJKLMNPQRSTUV",USNGSqLetEven:"FGHJKLMNPQRSTUVABCDE",zoneBase:[1.1,2,2.9,3.8,4.7,5.6,6.5,7.3,8.2,9.1,0,0.8,1.7,2.6,3.5,4.4,5.3,6.2,7,7.9],segBase:[0,2,2,2,4,4,6,6,8,8,0,0,0,2,2,4,4,6,6,6],isNad83Mode:true,constructor:function(){if(this.isNad83Mode){this.EQUATORIAL_RADIUS=this.EQUATORIAL_RADIUS_NAD83;this.ECC_SQUARED=this.ECC_SQUARED_NAD83;}else{this.EQUATORIAL_RADIUS=this.EQUATORIAL_RADIUS_NAD27;this.ECC_SQUARED=this.ECC_SQUARED_NAD27;}this.ECC_PRIME_SQUARED=this.ECC_SQUARED/(1-this.ECC_SQUARED);this.E1=(1-Math.sqrt(1-this.ECC_SQUARED))/(1+Math.sqrt(1-this.ECC_SQUARED));},setMapSpatialReference:function(_56d){this.mapSpatialReference=_56d;},graphicsToMapSpatialReference:function(_56e){if(_56e==null){return null;}if(!lang.isArray(_56e)){_56e=[_56e];}if(_56e.length<1){return [];}var _56f=null;if((this.mapSpatialReference.wkid===this.WEB_MERCATOR_WKID||this.mapSpatialReference.wkid===this.WGS_84_WKID)&&_56e[0].geometry.spatialReference.wkid===this.WEB_MERCATOR_WKID||_56e[0].geometry.spatialReference.wkid===this.WGS_84_WKID){var _570=null;if(this.mapSpatialReference.wkid===this.WEB_MERCATOR_WKID&&_56e[0].geometry.spatialReference.wkid===this.WGS_84_WKID){_570=_56a.geographicToWebMercator;}else{if(_56e[0].geometry.spatialReference.wkid===this.WEB_MERCATOR_WKID&&this.mapSpatialReference.wkid===this.WGS_84_WKID){_570=_56a.webMercatorToGeographic;}}if(lang.isFunction(_570)){var _571;_56f=[];for(var i=0;i<_56e.length;i++){_571=_56e[i];_571.geometry=_570(_571.geometry);}}}return _56e;},geometryToMapSpatialReference:function(_572){if(_572==null){return null;}if(!lang.isArray(_572)){_572=[_572];}if(_572.length<1){return [];}if(this.mapSpatialReference.wkid==_572[0].spatialReference.wkid){return _572;}var _573=null;if((this.mapSpatialReference.wkid===this.WEB_MERCATOR_WKID||this.mapSpatialReference.wkid===this.WGS_84_WKID)&&_572[0].spatialReference.wkid===this.WEB_MERCATOR_WKID||_572[0].spatialReference.wkid===this.WGS_84_WKID){var _574=null;if(this.mapSpatialReference.wkid===this.WEB_MERCATOR_WKID&&_572[0].spatialReference.wkid===this.WGS_84_WKID){_574=_56a.geographicToWebMercator;}else{if(_572[0].spatialReference.wkid===this.WEB_MERCATOR_WKID&&this.mapSpatialReference.wkid===this.WGS_84_WKID){_574=_56a.webMercatorToGeographic;}}if(lang.isFunction(_574)){_573=[];for(var i=0;i<_572.length;i++){_573.push(_574(_572[i]));}}}return _573;},USNGtoLL:function(_575,_576){var _577=[];var _578={};this.parseUSNG_str(_575,_578);var _579={};this.USNGtoUTM(_578.zone,_578.letN,_578.sq1,_578.sq2,_578.east,_578.north,_579);if(_578.letN<"N"){_579.N-=this.NORTHING_OFFSET;}this.UTMtoLL(_579.N,_579.E,_578.zone,_579);_577[0]=_579.lat;_577[1]=_579.lon;var _57a=new _56b(_579.lon,_579.lat,new _56c(4326));if(_576&&lang.isFunction(_576)){_576(_57a);}else{return _57a;}},USNGtoUTM:function(zone,letN,sq1,sq2,east,_57b,ret){var _57c=this.USNGSqEast.indexOf(sq1);var _57d=1+_57c%8;var _57e;var _57f="CDEFGHJKLMNPQRSTUVWX".indexOf(letN);if(zone%2){_57e="ABCDEFGHJKLMNPQRSTUV".indexOf(sq2);}else{_57e="FGHJKLMNPQRSTUVABCDE".indexOf(sq2);}var _580=this.zoneBase[_57f];var _581=Number(this.segBase[_57f])+_57e/10;if(_581<_580){_581+=2;}ret.N=_581*1000000+Number(_57b)*Math.pow(10,5-_57b.length);ret.E=_57d*100000+Number(east)*Math.pow(10,5-east.length);ret.zone=zone;ret.letter=letN;},parseUSNG_str:function(_582,_583){var j=0;var k;var _584=[];var _585=[];_585=_582.toUpperCase();var _586=/%20/g;_584=_585.replace(_586,"");_586=/ /g;_584=_585.replace(_586,"");if(_584.length<7){return 0;}_583.zone=_584.charAt(j++)*10+_584.charAt(j++)*1;_583.letN=_584.charAt(j++);_583.sq1=_584.charAt(j++);_583.sq2=_584.charAt(j++);_583.precision=(_584.length-j)/2;_583.east="";_583.north="";for(k=0;k<_583.precision;k++){_583.east+=_584.charAt(j++);}if(_584[j]==" "){j++;}for(k=0;k<_583.precision;k++){_583.north+=_584.charAt(j++);}},UTMtoLL:function(_587,_588,_589,ret){var xUTM=parseFloat(_588)-this.EASTING_OFFSET;var yUTM=parseFloat(_587);var _58a=parseInt(_589,10);var _58b=(_58a-1)*6-180+3;var M=yUTM/this.k0;var mu=M/(this.EQUATORIAL_RADIUS*(1-this.ECC_SQUARED/4-3*this.ECC_SQUARED*this.ECC_SQUARED/64-5*this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED/256));var _58c=mu+(3*this.E1/2-27*this.E1*this.E1*this.E1/32)*Math.sin(2*mu)+(21*this.E1*this.E1/16-55*this.E1*this.E1*this.E1*this.E1/32)*Math.sin(4*mu)+(151*this.E1*this.E1*this.E1/96)*Math.sin(6*mu);var phi1=_58c*this.RAD_2_DEG;var N1=this.EQUATORIAL_RADIUS/Math.sqrt(1-this.ECC_SQUARED*Math.sin(_58c)*Math.sin(_58c));var T1=Math.tan(_58c)*Math.tan(_58c);var C1=this.ECC_PRIME_SQUARED*Math.cos(_58c)*Math.cos(_58c);var R1=this.EQUATORIAL_RADIUS*(1-this.ECC_SQUARED)/Math.pow(1-this.ECC_SQUARED*Math.sin(_58c)*Math.sin(_58c),1.5);var D=xUTM/(N1*this.k0);var lat=_58c-(N1*Math.tan(_58c)/R1)*(D*D/2-(5+3*T1+10*C1-4*C1*C1-9*this.ECC_PRIME_SQUARED)*D*D*D*D/24+(61+90*T1+298*C1+45*T1*T1-252*this.ECC_PRIME_SQUARED-3*C1*C1)*D*D*D*D*D*D/720);lat=lat*this.RAD_2_DEG;var lon=(D-(1+2*T1+C1)*D*D*D/6+(5-2*C1+28*T1-3*C1*C1+8*this.ECC_PRIME_SQUARED+24*T1*T1)*D*D*D*D*D/120)/Math.cos(_58c);lon=_58b+lon*this.RAD_2_DEG;ret.lat=lat;ret.lon=lon;},LLtoMGRS:function(lat,lon,_58d){var _58e="";var _58f=this.LLtoUSNG(lat,lon,_58d);var _590=/ /g;return _58f.replace(_590,"");},LLtoUSNG:function(lat,lon,_591){var USNG;lat=parseFloat(lat);lon=parseFloat(lon);var _592=this.LLtoUTM(lat,lon);var _593=_592.easting;var _594=_592.northing;if(lat<0){_594+=this.NORTHING_OFFSET;}var _595=this.getZoneNumber(lat,lon);USNGLetters=this.findGridLetters(_595,_594,_593);var _596=Math.round(_594)%this.BLOCK_SIZE;var _597=Math.round(_593)%this.BLOCK_SIZE;_596=Math.floor(_596/Math.pow(10,(5-_591)));_597=Math.floor(_597/Math.pow(10,(5-_591)));USNG=this.getZoneNumber(lat,lon)+this.UTMLetterDesignator(lat)+" "+USNGLetters+" ";var i;for(i=String(_597).length;i<_591;i++){USNG+="0";}USNG+=_597+" ";for(i=String(_596).length;i<_591;i++){USNG+="0";}return USNG;},LLtoUTM:function(lat,lon,zone){lat=parseFloat(lat);lon=parseFloat(lon);if(lat>84||lat<-80){return this.UNDEFINED_STR;}var _598=(lon+180)-parseInt((lon+180)/360,10)*360-180;var _599=lat*this.DEG_2_RAD;var _59a=_598*this.DEG_2_RAD;var _59b=this.getZoneNumber(lat,lon);var _59c=(_59b-1)*6-180+3;var _59d=_59c*this.DEG_2_RAD;var _59e=_59b+""+this.UTMLetterDesignator(lat)+" ";var N=this.EQUATORIAL_RADIUS/Math.sqrt(1-this.ECC_SQUARED*Math.sin(_599)*Math.sin(_599));var T=Math.tan(_599)*Math.tan(_599);var C=this.ECC_PRIME_SQUARED*Math.cos(_599)*Math.cos(_599);var A=Math.cos(_599)*(_59a-_59d);var M=this.EQUATORIAL_RADIUS*((1-this.ECC_SQUARED/4-3*(this.ECC_SQUARED*this.ECC_SQUARED)/64-5*(this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED)/256)*_599-(3*this.ECC_SQUARED/8+3*this.ECC_SQUARED*this.ECC_SQUARED/32+45*this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED/1024)*Math.sin(2*_599)+(15*this.ECC_SQUARED*this.ECC_SQUARED/256+45*this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED/1024)*Math.sin(4*_599)-(35*this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED/3072)*Math.sin(6*_599));var _59f=(this.k0*N*(A+(1-T+C)*(A*A*A)/6+(5-18*T+T*T+72*C-58*this.ECC_PRIME_SQUARED)*(A*A*A*A*A)/120)+this.EASTING_OFFSET);var _5a0=(this.k0*(M+N*Math.tan(_599)*((A*A)/2+(5-T+9*C+4*C*C)*(A*A*A*A)/24+(61-58*T+T*T+600*C-330*this.ECC_PRIME_SQUARED)*(A*A*A*A*A*A)/720)));return {easting:_59f,northing:_5a0,zone:_59b};},getZoneNumber:function(lat,lon){lat=parseFloat(lat);lon=parseFloat(lon);var _5a1=(lon+180)-parseInt((lon+180)/360,10)*360-180;var _5a2=parseInt((_5a1+180)/6,10)+1;if(lat>=56&&lat<64&&_5a1>=3&&_5a1<12){_5a2=32;}if(lat>=72&&lat<84){if(_5a1>=0&&_5a1<9){_5a2=31;}else{if(_5a1>=9&&_5a1<21){_5a2=33;}else{if(_5a1>=21&&_5a1<33){_5a2=35;}else{if(_5a1>=33&&_5a1<42){_5a2=37;}}}}}return _5a2;},findGridLetters:function(_5a3,_5a4,_5a5){_5a3=parseInt(_5a3,10);_5a4=parseFloat(_5a4);_5a5=parseFloat(_5a5);row=1;var _5a6=Math.round(_5a4);while(_5a6>=this.BLOCK_SIZE){_5a6=_5a6-this.BLOCK_SIZE;row++;}var row=row%this.GRIDSQUARE_SET_ROW_SIZE;var col=0;var _5a7=Math.round(_5a5);while(_5a7>=this.BLOCK_SIZE){_5a7=_5a7-this.BLOCK_SIZE;col++;}col=col%this.GRIDSQUARE_SET_COL_SIZE;return this.lettersHelper(this.findSet(_5a3),row,col);},findSet:function(_5a8){_5a8=parseInt(_5a8,10);_5a8=_5a8%6;switch(_5a8){case 0:return 6;break;case 1:return 1;break;case 2:return 2;break;case 3:return 3;break;case 4:return 4;break;case 5:return 5;break;default:return -1;break;}},lettersHelper:function(set,row,col){if(row==0){row=this.GRIDSQUARE_SET_ROW_SIZE-1;}else{row--;}if(col==0){col=this.GRIDSQUARE_SET_COL_SIZE-1;}else{col--;}var l1;var l2;switch(set){case 1:l1="ABCDEFGH";l2="ABCDEFGHJKLMNPQRSTUV";return l1.charAt(col)+l2.charAt(row);break;case 2:l1="JKLMNPQR";l2="FGHJKLMNPQRSTUVABCDE";return l1.charAt(col)+l2.charAt(row);break;case 3:l1="STUVWXYZ";l2="ABCDEFGHJKLMNPQRSTUV";return l1.charAt(col)+l2.charAt(row);break;case 4:l1="ABCDEFGH";l2="FGHJKLMNPQRSTUVABCDE";return l1.charAt(col)+l2.charAt(row);break;case 5:l1="JKLMNPQR";l2="ABCDEFGHJKLMNPQRSTUV";return l1.charAt(col)+l2.charAt(row);break;case 6:l1="STUVWXYZ";l2="FGHJKLMNPQRSTUVABCDE";return l1.charAt(col)+l2.charAt(row);break;}},UTMLetterDesignator:function(lat){lat=parseFloat(lat);var _5a9;if((84>=lat)&&(lat>=72)){_5a9="X";}else{if((72>lat)&&(lat>=64)){_5a9="W";}else{if((64>lat)&&(lat>=56)){_5a9="V";}else{if((56>lat)&&(lat>=48)){_5a9="U";}else{if((48>lat)&&(lat>=40)){_5a9="T";}else{if((40>lat)&&(lat>=32)){_5a9="S";}else{if((32>lat)&&(lat>=24)){_5a9="R";}else{if((24>lat)&&(lat>=16)){_5a9="Q";}else{if((16>lat)&&(lat>=8)){_5a9="P";}else{if((8>lat)&&(lat>=0)){_5a9="N";}else{if((0>lat)&&(lat>=-8)){_5a9="M";}else{if((-8>lat)&&(lat>=-16)){_5a9="L";}else{if((-16>lat)&&(lat>=-24)){_5a9="K";}else{if((-24>lat)&&(lat>=-32)){_5a9="J";}else{if((-32>lat)&&(lat>=-40)){_5a9="H";}else{if((-40>lat)&&(lat>=-48)){_5a9="G";}else{if((-48>lat)&&(lat>=-56)){_5a9="F";}else{if((-56>lat)&&(lat>=-64)){_5a9="E";}else{if((-64>lat)&&(lat>=-72)){_5a9="D";}else{if((-72>lat)&&(lat>=-80)){_5a9="C";}else{_5a9="Z";}}}}}}}}}}}}}}}}}}}}return _5a9;}});});},"esriviewer/ui/toolbar/model/ActionsToolbarViewModel":function(){define("esriviewer/ui/toolbar/model/ActionsToolbarViewModel",["dojo/_base/declare"],function(_5aa){return _5aa([],{constructor:function(){this.toolsButtonVisible=ko.observable(true);this.layersButtonVisible=ko.observable(true);}});});},"url:dijit/templates/MenuItem.html":"<tr class=\"dijitReset dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon dijitMenuItemIcon\" data-dojo-attach-point=\"iconNode\"/>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">\n\t\t<div data-dojo-attach-point=\"arrowWrapper\" style=\"visibility: hidden\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuExpand\"/>\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</div>\n\t</td>\n</tr>\n","esriviewer/ui/navigation/model/NavigationWidgetViewModel":function(){define("esriviewer/ui/navigation/model/NavigationWidgetViewModel",["dojo/_base/declare"],function(_5ab){return _5ab([],{constructor:function(){this.visible=ko.observable(true);}});});},"url:dijit/form/templates/CheckBox.html":"<div class=\"dijit dijitReset dijitInline\" role=\"presentation\"\n\t><input\n\t \t${!nameAttrSetting} type=\"${type}\" role=\"${type}\" aria-checked=\"false\" ${checkedAttrSetting}\n\t\tclass=\"dijitReset dijitCheckBoxInput\"\n\t\tdata-dojo-attach-point=\"focusNode\"\n\t \tdata-dojo-attach-event=\"onclick:_onClick\"\n/></div>\n","dojox/uuid/generateTimeBasedUuid":function(){define("dojox/uuid/generateTimeBasedUuid",["dojo/_base/lang","./_base"],function(lang){dojox.uuid.generateTimeBasedUuid=function(node){var _5ac=dojox.uuid.generateTimeBasedUuid._generator.generateUuidString(node);return _5ac;};dojox.uuid.generateTimeBasedUuid.isValidNode=function(node){var _5ad=16;var _5ae=parseInt(node,_5ad);var _5af=lang.isString(node)&&node.length==12&&isFinite(_5ae);return _5af;};dojox.uuid.generateTimeBasedUuid.setNode=function(node){dojox.uuid.assert((node===null)||this.isValidNode(node));this._uniformNode=node;};dojox.uuid.generateTimeBasedUuid.getNode=function(){return this._uniformNode;};dojox.uuid.generateTimeBasedUuid._generator=new function(){this.GREGORIAN_CHANGE_OFFSET_IN_HOURS=3394248;var _5b0=null;var _5b1=null;var _5b2=null;var _5b3=0;var _5b4=null;var _5b5=null;var _5b6=16;function _5b7(_5b8){_5b8[2]+=_5b8[3]>>>16;_5b8[3]&=65535;_5b8[1]+=_5b8[2]>>>16;_5b8[2]&=65535;_5b8[0]+=_5b8[1]>>>16;_5b8[1]&=65535;dojox.uuid.assert((_5b8[0]>>>16)===0);};function _5b9(x){var _5ba=new Array(0,0,0,0);_5ba[3]=x%65536;x-=_5ba[3];x/=65536;_5ba[2]=x%65536;x-=_5ba[2];x/=65536;_5ba[1]=x%65536;x-=_5ba[1];x/=65536;_5ba[0]=x;return _5ba;};function _5bb(_5bc,_5bd){dojox.uuid.assert(lang.isArray(_5bc));dojox.uuid.assert(lang.isArray(_5bd));dojox.uuid.assert(_5bc.length==4);dojox.uuid.assert(_5bd.length==4);var _5be=new Array(0,0,0,0);_5be[3]=_5bc[3]+_5bd[3];_5be[2]=_5bc[2]+_5bd[2];_5be[1]=_5bc[1]+_5bd[1];_5be[0]=_5bc[0]+_5bd[0];_5b7(_5be);return _5be;};function _5bf(_5c0,_5c1){dojox.uuid.assert(lang.isArray(_5c0));dojox.uuid.assert(lang.isArray(_5c1));dojox.uuid.assert(_5c0.length==4);dojox.uuid.assert(_5c1.length==4);var _5c2=false;if(_5c0[0]*_5c1[0]!==0){_5c2=true;}if(_5c0[0]*_5c1[1]!==0){_5c2=true;}if(_5c0[0]*_5c1[2]!==0){_5c2=true;}if(_5c0[1]*_5c1[0]!==0){_5c2=true;}if(_5c0[1]*_5c1[1]!==0){_5c2=true;}if(_5c0[2]*_5c1[0]!==0){_5c2=true;}dojox.uuid.assert(!_5c2);var _5c3=new Array(0,0,0,0);_5c3[0]+=_5c0[0]*_5c1[3];_5b7(_5c3);_5c3[0]+=_5c0[1]*_5c1[2];_5b7(_5c3);_5c3[0]+=_5c0[2]*_5c1[1];_5b7(_5c3);_5c3[0]+=_5c0[3]*_5c1[0];_5b7(_5c3);_5c3[1]+=_5c0[1]*_5c1[3];_5b7(_5c3);_5c3[1]+=_5c0[2]*_5c1[2];_5b7(_5c3);_5c3[1]+=_5c0[3]*_5c1[1];_5b7(_5c3);_5c3[2]+=_5c0[2]*_5c1[3];_5b7(_5c3);_5c3[2]+=_5c0[3]*_5c1[2];_5b7(_5c3);_5c3[3]+=_5c0[3]*_5c1[3];_5b7(_5c3);return _5c3;};function _5c4(_5c5,_5c6){while(_5c5.length<_5c6){_5c5="0"+_5c5;}return _5c5;};function _5c7(){var _5c8=Math.floor((Math.random()%1)*Math.pow(2,32));var _5c9=_5c8.toString(_5b6);while(_5c9.length<8){_5c9="0"+_5c9;}return _5c9;};this.generateUuidString=function(node){if(node){dojox.uuid.assert(dojox.uuid.generateTimeBasedUuid.isValidNode(node));}else{if(dojox.uuid.generateTimeBasedUuid._uniformNode){node=dojox.uuid.generateTimeBasedUuid._uniformNode;}else{if(!_5b0){var _5ca=32768;var _5cb=Math.floor((Math.random()%1)*Math.pow(2,15));var _5cc=(_5ca|_5cb).toString(_5b6);_5b0=_5cc+_5c7();}node=_5b0;}}if(!_5b1){var _5cd=32768;var _5ce=Math.floor((Math.random()%1)*Math.pow(2,14));_5b1=(_5cd|_5ce).toString(_5b6);}var now=new Date();var _5cf=now.valueOf();var _5d0=_5b9(_5cf);if(!_5b4){var _5d1=_5b9(60*60);var _5d2=_5b9(dojox.uuid.generateTimeBasedUuid._generator.GREGORIAN_CHANGE_OFFSET_IN_HOURS);var _5d3=_5bf(_5d2,_5d1);var _5d4=_5b9(1000);_5b4=_5bf(_5d3,_5d4);_5b5=_5b9(10000);}var _5d5=_5d0;var _5d6=_5bb(_5b4,_5d5);var _5d7=_5bf(_5d6,_5b5);if(now.valueOf()==_5b2){_5d7[3]+=_5b3;_5b7(_5d7);_5b3+=1;if(_5b3==10000){while(now.valueOf()==_5b2){now=new Date();}}}else{_5b2=now.valueOf();_5b3=1;}var _5d8=_5d7[2].toString(_5b6);var _5d9=_5d7[3].toString(_5b6);var _5da=_5c4(_5d8,4)+_5c4(_5d9,4);var _5db=_5d7[1].toString(_5b6);_5db=_5c4(_5db,4);var _5dc=_5d7[0].toString(_5b6);_5dc=_5c4(_5dc,3);var _5dd="-";var _5de="1";var _5df=_5da+_5dd+_5db+_5dd+_5de+_5dc+_5dd+_5b1+_5dd+node;_5df=_5df.toLowerCase();return _5df;};}();return dojox.uuid.generateTimeBasedUuid;});},"dojo/gears":function(){define("dojo/gears",["./_base/lang","./sniff"],function(lang,has){var _5e0={};lang.setObject("dojo.gears",_5e0);_5e0._gearsObject=function(){var _5e1;var _5e2=lang.getObject("google.gears");if(_5e2){return _5e2;}if(typeof GearsFactory!="undefined"){_5e1=new GearsFactory();}else{if(has("ie")){try{_5e1=new ActiveXObject("Gears.Factory");}catch(e){}}else{if(navigator.mimeTypes["application/x-googlegears"]){_5e1=document.createElement("object");_5e1.setAttribute("type","application/x-googlegears");_5e1.setAttribute("width",0);_5e1.setAttribute("height",0);_5e1.style.display="none";document.documentElement.appendChild(_5e1);}}}if(!_5e1){return null;}lang.setObject("google.gears.factory",_5e1);return lang.getObject("google.gears");};_5e0.available=(!!_5e0._gearsObject())||0;return _5e0;});},"esriviewer/ui/identify/IdentifyWindowWidget":function(){define("esriviewer/ui/identify/IdentifyWindowWidget",["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/window","dojo/dom-class","../window/WindowWidget"],function(_5e3,lang,_5e4,_5e5,_5e6,_5e7){return _5e3([_5e7],{defaultPositioning:{x:400,y:125},windowWidth:"310px",windowHeaderText:"Identify",windowIconAltText:"Identify",windowIconClass:"commonIcons16 information",positioningParamName:"identify",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_5e6.add(this.windowContent,"identifyWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/identify/IdentifyWidget"],lang.hitch(this,function(_5e8){this.identifyWidget=new _5e8();this.setContent(this.identifyWidget.domNode);this.identifyWidget.showQueryView();}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_5e4.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.IDENTIFY.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_5e4.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.IDENTIFY.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_5e4.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.IDENTIFY.TOGGLE,lang.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.identifyWidget){this.identifyWidget.reset();}},show:function(){this.inherited(arguments);if(this.identifyWidget){this.identifyWidget.showQueryView();}}});});},"url:dijit/templates/MenuSeparator.html":"<tr class=\"dijitMenuSeparator\">\n\t<td class=\"dijitMenuSeparatorIconCell\">\n\t\t<div class=\"dijitMenuSeparatorTop\"></div>\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\n\t</td>\n\t<td colspan=\"3\" class=\"dijitMenuSeparatorLabelCell\">\n\t\t<div class=\"dijitMenuSeparatorTop dijitMenuSeparatorLabel\"></div>\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\n\t</td>\n</tr>","dijit/layout/AccordionPane":function(){define("dijit/layout/AccordionPane",["dojo/_base/declare","dojo/_base/kernel","./ContentPane"],function(_5e9,_5ea,_5eb){return _5e9("dijit.layout.AccordionPane",_5eb,{constructor:function(){_5ea.deprecated("dijit.layout.AccordionPane deprecated, use ContentPane instead","","2.0");},onSelected:function(){}});});},"undefined":undefined,"esriviewer/portal/PortalViewerManagerSupportMixin":function(){define("esriviewer/portal/PortalViewerManagerSupportMixin",["dojo/_base/declare","dojo/_base/lang","./PortalSupport"],function(_5ec,lang,_5ed){return _5ec([],{portalSupported:false,_initializePortalSupport:function(){if(this.viewerConfig.portal!=null&&lang.isObject(this.viewerConfig.portal)&&this.viewerConfig.portal.url!=null&&this.viewerConfig.portal.url!=""){this.portalSupported=true;new _5ed();this._createPortalSearchWidget();}},_createPortalSearchWidget:function(){if(this.portalSupported){if(this.viewerConfig.portalSearchWidget!=null&&this.viewerConfig.portalSearchWidget.create!=null&&this.viewerConfig.portalSearchWidget.create==true){require(["esriviewer/ui/portal/PortalSearchWidgetWindow"],function(_5ee){this.portalSearchWidgetWindow=new _5ee();});}}}});});},"url:esriviewer/ui/toolbar/base/template/BookmarkListingTemplate.html":"<div class=\"bookmarksToolbarDropdown toolbarDropdownContent\" data-bind=\"visible:visible\">\r\n    <div class=\"createBookmarkIcon commonIcons16 add\" title=\"Create Bookmark\"\r\n         data-bind=\"visible:showCreateBookmarkIcon, click:showCreateBookmark\"></div>\r\n    <div class=\"bookmarksToolbarDropdownBookmarkEntries\" data-bind=\"foreach:_bookmarks\">\r\n        <div class=\"threePixelBorderRadius bookmarkToolbarEntry\" data-bind=\"click: $parent.handleBookmarkClick\">\r\n            <span class=\"bookmarkToolbarEntryText\" data-bind=\"text: $data.label\"></span>\r\n        </div>\r\n    </div>\r\n    <div class=\"bookmarksToolbarDropdownBookmarkRemovableEntries\" data-bind=\"foreach:_removableBookmarks\">\r\n        <div class=\"bookmarkToolbarEntryOuter\">\r\n            <div title=\"Remove Bookmark\" class=\"commonIcons16 bookmarkToolbarEntryRemoveIcon remove\"\r\n                 data-bind=\"click: $parent.removeClick\"></div>\r\n            <div class=\"threePixelBorderRadius bookmarkToolbarEntry\" data-bind=\"click: $parent.handleBookmarkClick\">\r\n                <span class=\"bookmarkToolbarEntryText\" data-bind=\"text: $data.label\"></span>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</div>","dojox/storage/_common":function(){define("dojox/storage/_common",["dijit","dojo","dojox","dojo/require!dojox/storage/Provider,dojox/storage/manager,dojox/storage/LocalStorageProvider,dojox/storage/GearsStorageProvider,dojox/storage/WhatWGStorageProvider,dojox/storage/FlashStorageProvider,dojox/storage/BehaviorStorageProvider,dojox/storage/CookieStorageProvider"],function(_5ef,dojo,_5f0){dojo.provide("dojox.storage._common");dojo.require("dojox.storage.Provider");dojo.require("dojox.storage.manager");dojo.require("dojox.storage.LocalStorageProvider");dojo.require("dojox.storage.GearsStorageProvider");dojo.require("dojox.storage.WhatWGStorageProvider");dojo.require("dojox.storage.FlashStorageProvider");dojo.require("dojox.storage.BehaviorStorageProvider");dojo.require("dojox.storage.CookieStorageProvider");_5f0.storage.manager.initialize();});},"url:esriviewer/ui/footer/template/FooterTogglerTemplate.html":"<div class=\"footerWidget\" data-dojo-attach-point=\"footerWidget\" data-bind=\"css:{footerExpanded: expanded() == true, footerCollapsed: expanded() != true}\">\r\n    <div class=\"footerExpanderContent headerFooterBg\" data-dojo-attach-point=\"footerExpanderContent\"  data-dojo-attach-event=\"onclick:toggle\">\r\n        <div class=\"footerTogglerArrow\" data-dojo-attach-point=\"footerTogglerArrow\" data-bind=\"css:{footerTogglerDown: expanded() == true, footerTogglerUp: expanded() != true}\"></div>\r\n    </div>\r\n    <div data-dojo-attach-point=\"footerContent\"></div>\r\n</div>","dojox/sql":function(){define("dojox/sql",["./sql/_base"],function(){});},"esriviewer/ui/toolbar/ActionsToolbarWidget":function(){require({cache:{"url:esriviewer/ui/toolbar/template/ActionsToolbarWidgetTemplate.html":"<div class='viewerMainToolbar headerFooterBg'>\r\n    <div class=\"mainToolbarContents\" data-dojo-attach-point=\"mainToolbarContents\">\r\n\r\n            <span data-bind=\"visible: toolsButtonVisible\"\r\n                  data-dojo-type=\"dijit/form/DropDownButton\"\r\n                  data-dojo-attach-point=\"toolsDropDownButton\"\r\n                  data-dojo-props=\"iconClass:'commonIcons16 wrench'\">\r\n                <span>Tools</span>\r\n            </span>\r\n\r\n        <div data-dojo-attach-point=\"layersButton\" class=\"actionsToolbarButton\"\r\n             data-bind=\"visible: layersButtonVisible\">\r\n            <div class=\"commonIcons16 list actionsToolbarIcon\"></div>\r\n            <div class=\"actionsToolbarText\">Layers</div>\r\n        </div>\r\n        <div data-dojo-attach-point=\"bookmarksButton\" class=\"actionsToolbarButton\"\r\n             data-dojo-attach-event=\"onclick:toggleBookmarksListing\">\r\n            <div class=\"commonIcons16 bookmark actionsToolbarIcon\"></div>\r\n            <div class=\"actionsToolbarText\">Bookmarks</div>\r\n        </div>\r\n        <div data-dojo-attach-point=\"basemapsButton\" class=\"actionsToolbarButton\"\r\n             data-dojo-attach-event=\"onclick:toggleBasemapsListing\">\r\n            <div class=\"commonIcons16 layer actionsToolbarIcon\"></div>\r\n            <div class=\"actionsToolbarText\">Basemaps</div>\r\n\r\n        </div>\r\n        <span data-dojo-type=\"dijit/form/ToggleButton\"\r\n              data-dojo-attach-point=\"labelsButton\"\r\n              data-dojo-props=\"iconClass:'dijitCheckBoxIcon'\">Labels</span>\r\n\r\n        <div data-dojo-attach-point=\"addOnContentContainer\"></div>\r\n        <div class=\"locateToolbarContainer locateToolbarContainerOnMap\" data-dojo-attach-point=\"locateToolbarContainer\">\r\n            <input value=\"${locateDefaultInput}\" type=\"text\" class=\"locateTextBox defaultBorder\"\r\n                   data-dojo-attach-point=\"locateTextBox\"/>\r\n\r\n            <div data-dojo-attach-point=\"locateButton\" title=\"Locate\"\r\n                 class=\"defaultBorder searchButton searchButtonIcon\"></div>\r\n            <div data-dojo-attach-point=\"configureLocateButton\"\r\n                 data-dojo-attach-event=\"onclick:toggleConfigureLocatorTooltip\" title=\"Configure Locate\"\r\n                 class=\"defaultBorder configureLocate configureButtonIcon\"></div>\r\n        </div>\r\n    </div>\r\n</div>\r\n"}});define("esriviewer/ui/toolbar/ActionsToolbarWidget",["dojo/_base/declare","dojo/text!./template/ActionsToolbarWidgetTemplate.html","dojo/topic","dojo/_base/lang","dojo/on","dojo/window","dojo/_base/window","dojo/has","dojo/dom-style","dojo/dom-class","dojo/dom-construct","dijit/Menu","dijit/MenuItem","../base/UITemplatedWidget","./base/BookmarkListingWidget","./base/LocatorToolbarSupportMixin","./model/ActionsToolbarViewModel","./base/BasemapListingWidget","dijit/form/DropDownButton","dijit/form/ToggleButton"],function(_5f1,_5f2,_5f3,lang,on,_5f4,_5f5,has,_5f6,_5f7,_5f8,Menu,_5f9,_5fa,_5fb,_5fc,_5fd,_5fe,_5ff,_600){return _5f1([_5fa,_5fc],{useBasemapGallery:false,basemapsDropdownWidth:"125px",bookmarksDropdownWidth:"224px",showLocator:true,showLabelServicesButton:true,showConfigureLocatorsIcon:true,showLayersButton:true,showBookmarksButton:true,showToolsDropdownButton:true,configureLocatorTooltipVisible:false,locateDefaultInput:"Enter a location...",templateString:_5f2,constructor:function(_601){lang.mixin(this,_601||{});},postCreate:function(){this.inherited(arguments);this.viewModel=new _5fd();this.toolsDropDownMenu=new Menu({});this.toolsDropDownButton.dropDown=this.toolsDropDownMenu;if(!this.showToolsDropdownButton){this.handleHideToolsButton();}else{this.handleShowToolsButton();}ko.applyBindings(this.viewModel,this.domNode);this.createToolbarDropDown();if(this.showLabelServicesButton){var _602=false;_5f3.publish(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.SERVICE_EXISTS,function(_603){_602=_603;});if(!_602){_5f6.set(this.labelsButton.domNode,"display","none");}}else{_5f6.set(this.labelsButton.domNode,"display","none");}if(!this.showLayersButton){_5f6.set(this.layersButton,"display","none");}if(!this.showBookmarksButton){_5f6.set(this.bookmarksButton,"display","none");}if(!this.showLocator){_5f6.set(this.locateToolbarContainer,"display","none");}if(!this.showConfigureLocatorsIcon){_5f6.set(this.configureLocateButton,"display","none");}this.tweakUI();},loadViewerConfigurationData:function(){var _604=null;_5f3.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"toolsBar",function(_605){_604=_605;});if(_604&&lang.isObject(_604)){if(_604.showToolsDropdown!=null&&_604.showToolsDropdown==false){this.showToolsDropdownButton=false;}if(_604.showLayersButton!=null&&_604.showLayersButton==false){this.showLayersButton=false;}if(_604.showConfigureLocatorsIcon!=null&&_604.showConfigureLocatorsIcon==false){this.showConfigureLocatorsIcon=false;}if(_604.showBookmarksButton!=null&&_604.showBookmarksButton==false){this.showBookmarksButton=false;}if(_604.showLocator!=null&&_604.showLocator==false){this.showLocator=false;}}var _606=null;_5f3.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_607){_606=_607;});if(_606!=null&&lang.isObject(_606)){if(_606.useBasemapGallery!=null&&_606.useBasemapGallery===true){this.useBasemapGallery=true;}}},handleBookmarksWidgetVisibilityChanged:function(_608){if(_608){if(!this.useBasemapGallery){this.basemapListingWidget.hide();}else{var _609;_5f3.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.IS_HIDDEN,function(_60a){_609=_60a;});if(!_609){_5f3.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.HIDE);}}this.handleDropdownContentVisiblility(true,this.bookmarksDropdownWidth);}else{if(!this.useBasemapGallery){if(!this.basemapListingWidget.viewModel.visible()){this.handleDropdownContentVisiblility(false);}}else{this.handleDropdownContentVisiblility(false);}}},handleBasemapsWidgetVisibilityChanged:function(_60b){if(_60b){this.bookmarkListingWidget.hide();if(!this.useBasemapGallery){this.handleDropdownContentVisiblility(true,this.basemapsDropdownWidth);}}else{if(!this.bookmarkListingWidget.viewModel.visible()){this.handleDropdownContentVisiblility(false);}}},handleDropdownContentVisiblility:function(_60c,_60d){if(!_60c){_5f6.set(this.toolbarDropdownElement,"display","none");}else{if(_60d!=null){_5f6.set(this.toolbarDropdownElement,"width",_60d);}_5f6.set(this.toolbarDropdownElement,"display","block");}},toggleBasemapsListing:function(){if(!this.useBasemapGallery){this.basemapListingWidget.toggle();}else{var _60e;_5f3.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.IS_HIDDEN,function(_60f){_60e=_60f;});if(_60e){_5f3.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.SHOW);if(this.bookmarkListingWidget.viewModel.visible()){this.bookmarkListingWidget.hide();}}else{_5f3.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.HIDE);}}},toggleBookmarksListing:function(){this.bookmarkListingWidget.toggle();},initListeners:function(){this.inherited(arguments);if(this.showToolsDropdownButton){_5f3.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.ADD_TOOL,lang.hitch(this,this.handleAddToolToMenu));}this.initLocatorListeners();if(this.showLabelServicesButton){_5f3.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REFERENCE_LAYER_ADDED,lang.hitch(this,this.handleReferenceLayerAdded));_5f3.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REFERENCE_LAYER_REMOVED,lang.hitch(this,this.handleReferenceLayerRemoved));this.labelsButton.on("change",lang.hitch(this,this.handleToggleLabels));on(this.layersButton,"click",lang.hitch(this,this.handleShowLayersWindow));}_5f3.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.HIDE_TOOLS_BUTTON,lang.hitch(this,this.handleHideToolsButton));_5f3.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.SHOW_TOOLS_BUTTON,lang.hitch(this,this.handleShowToolsButton));_5f3.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.HIDE_LAYERS_BUTTON,lang.hitch(this,this.handleHideLayersButton));_5f3.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.SHOW_LAYERS_BUTTON,lang.hitch(this,this.handleShowLayersButton));this.loadCurrentLocators();},handleShowLayersButton:function(){this.viewModel.layersButtonVisible(true);},handleHideLayersButton:function(){this.viewModel.layersButtonVisible(false);},handleShowToolsButton:function(){this.viewModel.toolsButtonVisible(true);},handleHideToolsButton:function(){this.viewModel.toolsButtonVisible(false);},handleShowLayersWindow:function(){_5f3.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.WIDGET.SHOW);},handleToggleLabels:function(_610){if(_610){_5f3.publish(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.SHOW);}else{_5f3.publish(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.HIDE);}},handleReferenceLayerRemoved:function(_611,_612){if(!_612){_5f6.set(this.labelsButton.domNode,"display","none");}},handleReferenceLayerAdded:function(){var _613=_5f6.get(this.labelsButton.domNode,"display");if(_613.toLowerCase()==="none"){_5f6.set(this.labelsButton.domNode,"display","inline");}},setBasemaps:function(_614){if(!this.useBasemapGallery){this.basemapListingWidget.setBasemaps(_614);}},addStaticBookmarks:function(_615){if(this.bookmarkListingWidget){this.bookmarkListingWidget.addStaticBookmarks(_615,false);}},loadCookieBookmarks:function(){if(this.bookmarkListingWidget){this.bookmarkListingWidget.loadCookieBookmarks();}},createToolbarDropDown:function(){this.toolbarDropdownElement=_5f8.create("div",{className:"defaultBorder threePixelBorderRadius defaultBoxShadow toolbarDropdownContainer",style:{display:"none"}});_5f3.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAIN_TOOLBAR_DROP_DOWN,this.toolbarDropdownElement);this.bookmarkListingWidget=new _5fb();this.bookmarkListingWidget.placeAt(this.toolbarDropdownElement);this.bookmarkListingWidget.viewModel.visible.subscribe(lang.hitch(this,this.handleBookmarksWidgetVisibilityChanged));if(!this.useBasemapGallery){this.basemapListingWidget=new _5fe();this.basemapListingWidget.placeAt(this.toolbarDropdownElement);this.basemapListingWidget.viewModel.visible.subscribe(lang.hitch(this,this.handleBasemapsWidgetVisibilityChanged));}},tweakUI:function(){this.inherited(arguments);if(has("ie")<9){_5f6.set(this.locateButton,"position","relative");_5f6.set(this.locateButton,"top","-2px");_5f6.set(this.configureLocateButton,"position","relative");_5f6.set(this.configureLocateButton,"top","-2px");}else{if(has("ie")>=9){_5f6.set(this.locateButton,"height","17px");_5f6.set(this.configureLocateButton,"height","17px");_5f6.set(this.locateButton,"marginTop","0");_5f6.set(this.configureLocateButton,"marginTop","0");}else{if(has("ff")){_5f6.set(this.locateButton,"marginTop","0");_5f6.set(this.configureLocateButton,"marginTop","0");}}}if(this.toolsDropDownButton){_5f6.set(this.toolsDropDownButton.domNode,"float","right");_5f6.set(this.toolsDropDownButton.domNode.firstChild,"background","none");_5f6.set(this.toolsDropDownButton.domNode.firstChild,"border","none");}_5f6.set(this.labelsButton.domNode,"float","right");_5f6.set(this.labelsButton.domNode,"marginRight","20px");_5f7.add(this.labelsButton.domNode,"defaultTextColor");_5f6.set(this.labelsButton.domNode.firstChild,"background","none");_5f6.set(this.labelsButton.domNode.firstChild,"border","none");},handleAddToolToMenu:function(_616){if(_616 instanceof _5f9&&this.toolsDropDownMenu){this.toolsDropDownMenu.addChild(_616);}}});});},"esriviewer/ui/time/TimeSliderWindow":function(){define("esriviewer/ui/time/TimeSliderWindow",["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/window","dojo/dom-style","../window/WindowWidget"],function(_617,lang,_618,_619,_61a,_61b){return _617([_61b],{defaultPositioning:{x:10,y:50},windowWidth:"450px",windowHeaderText:"Time Slider",windowIconAltText:"Time Slider",windowIconClass:"commonIcons16 clock",positioningParamName:"time",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/time/TimeSliderWidget"],lang.hitch(this,function(_61c){this.timeSliderWidget=new _61c();this.setContent(this.timeSliderWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_618.subscribe(VIEWER_GLOBALS.EVENTS.MAP.TIME.SHOW_TIME_SLIDER,lang.hitch(this,this.show)));this.subscribes.push(_618.subscribe(VIEWER_GLOBALS.EVENTS.MAP.TIME.TOGGLE_TIME_SLIDER,lang.hitch(this,this.toggle)));},postCreate:function(){var _61d=_619.getBox();if(_61d.w>1600){_61a.set(this.domNode,"width","25%");}else{_61a.set(this.domNode,"width","35%");}this.inherited(arguments);},hide:function(){this.inherited(arguments);if(this.timeSliderWidget){this.timeSliderWidget.clearTimeSlider();}}});});},"dijit/MenuItem":function(){require({cache:{"url:dijit/templates/MenuItem.html":"<tr class=\"dijitReset dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon dijitMenuItemIcon\" data-dojo-attach-point=\"iconNode\"/>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">\n\t\t<div data-dojo-attach-point=\"arrowWrapper\" style=\"visibility: hidden\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuExpand\"/>\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</div>\n\t</td>\n</tr>\n"}});define("dijit/MenuItem",["dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/kernel","dojo/sniff","./_Widget","./_TemplatedMixin","./_Contained","./_CssStateMixin","dojo/text!./templates/MenuItem.html"],function(_61e,dom,_61f,_620,_621,has,_622,_623,_624,_625,_626){return _61e("dijit.MenuItem",[_622,_623,_624,_625],{templateString:_626,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(val){this.containerNode.innerHTML=val;this._set("label",val);if(this.textDir==="auto"){this.applyTextDir(this.focusNode,this.label);}},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:false,_fillContent:function(_627){if(_627&&!("label" in this.params)){this.set("label",_627.innerHTML);}},buildRendering:function(){this.inherited(arguments);var _628=this.id+"_text";_61f.set(this.containerNode,"id",_628);if(this.accelKeyNode){_61f.set(this.accelKeyNode,"id",this.id+"_accel");_628+=" "+this.id+"_accel";}this.domNode.setAttribute("aria-labelledby",_628);dom.setSelectable(this.domNode,false);},onClick:function(){},focus:function(){try{if(has("ie")==8){this.containerNode.focus();}this.focusNode.focus();}catch(e){}},_onFocus:function(){this._setSelected(true);this.getParent()._onItemFocus(this);this.inherited(arguments);},_setSelected:function(_629){_620.toggle(this.domNode,"dijitMenuItemSelected",_629);},setLabel:function(_62a){_621.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_62a);},setDisabled:function(_62b){_621.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",_62b);},_setDisabledAttr:function(_62c){this.focusNode.setAttribute("aria-disabled",_62c?"true":"false");this._set("disabled",_62c);},_setAccelKeyAttr:function(_62d){this.accelKeyNode.style.display=_62d?"":"none";this.accelKeyNode.innerHTML=_62d;_61f.set(this.containerNode,"colSpan",_62d?"1":"2");this._set("accelKey",_62d);},_setTextDirAttr:function(_62e){if(!this._created||this.textDir!=_62e){this._set("textDir",_62e);this.applyTextDir(this.focusNode,this.label);}}});});},"esriviewer/ui/measure/MeasureWindow":function(){define("esriviewer/ui/measure/MeasureWindow",["dojo/_base/declare","dojo/_base/lang","dojo/topic","../window/WindowWidget","./MeasureWidget"],function(_62f,lang,_630,_631,_632){return _62f([_631],{defaultPositioning:{x:50,y:50},windowWidth:"300px",windowHeaderText:"Measure",windowIconAltText:"Measure",windowIconClass:"commonIcons16 triangle",positioningParamName:"measure",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/measure/MeasureWidget"],lang.hitch(this,function(_633){this.measureWidget=new _633();this.setContent(this.measureWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_630.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.MEASURE.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_630.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.MEASURE.TOGGLE,lang.hitch(this,this.toggle)));this.subscribes.push(_630.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.MEASURE.HIDE,lang.hitch(this,this.hide)));},hide:function(){this.inherited(arguments);if(this.measureWidget){this.measureWidget.reset();}}});});},"esriviewer/map/geometry/GeometryServiceController":function(){define("esriviewer/map/geometry/GeometryServiceController",["dojo/_base/declare","dojo/topic","dojo/_base/lang","esri/tasks/GeometryService","esri/config","esri/tasks/AreasAndLengthsParameters","esri/tasks/LengthsParameters","esri/tasks/BufferParameters","esri/tasks/ProjectParameters","esri/geometry/webMercatorUtils","esri/SpatialReference"],function(_634,_635,lang,_636,_637,_638,_639,_63a,_63b,_63c,_63d){return _634([],{constructor:function(_63e){lang.mixin(this,_63e||{});this.init();},init:function(){this.loadViewerConfigurationData();if(this.geometryService==null){return;}else{this.initListeners();}var _63f=null;_635.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,function(ext){_63f=ext;});if(_63f&&_63f.spatialReference&&_63f.spatialReference!=null){this.mapSpatialReference=_63f.spatialReference;}this.createMapConfigGeometryService();},loadViewerConfigurationData:function(){var _640=null;_635.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"geometryServiceUrl",function(_641){_640=_641;});this.geometryServiceUrl=_640;if(this.geometryServiceUrl!=null&&this.geometryServiceUrl!=""){this.geometryService=new _636(this.geometryServiceUrl);}else{_635.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"No Geometry Service in configuration. Service disabled");VIEWER_UTILS.log("No Geometry Service in configuration. Service disabled",VIEWER_GLOBALS.LOG_TYPE.WARNING);}},createMapConfigGeometryService:function(){if(this.geometryServiceUrl){if(_637&&_637.defaults){_637.defaults.geometryService=new _636(this.geometryServiceUrl);}}},initListeners:function(){_635.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_LAT_LON,lang.hitch(this,this.handleProjectGeometriesToLatLon));_635.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.MGRS_TO_LAT_LON,lang.hitch(this,this.handleMgrsToLatLon));_635.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_MAP_SR,lang.hitch(this,this.handleProjectGeometriesToMapSR));_635.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_AREA,lang.hitch(this,this.handleCalculateArea));_635.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_DISTANCE,lang.hitch(this,this.handleCalculateDistance));_635.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.EXISTS,lang.hitch(this,this.handleGeometryServiceExists));_635.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.BUFFER_POINT,lang.hitch(this,this.handleBufferPoint));this.projectErrorDefaultCallback=lang.hitch(this,this.handleProjectionError);},handleCalculateArea:function(_642,_643,_644){if(_644!=null&&lang.isFunction(_644)){var _645=new _638();_645.areaUnit=_643;_645.polygons=[_642];this.geometryService.areasAndLengths(_645,_644,_644);}},handleCalculateDistance:function(_646,_647,_648){if(_648!=null&&lang.isFunction(_648)){var _649=new _639();_649.lengthUnit=_647;_649.polylines=[_646];_649.geodesic=true;this.geometryService.lengths(_649,_648,_648);}},handleMgrsToLatLon:function(_64a,_64b){PROJECTION_UTILS.USNGtoLL(_64a,_64b);},handleBufferPoint:function(pt,_64c,_64d,_64e){if(pt==null||_64c==null||_64c.distance==null||_64c.units==null){return;}if(_64d==null||!lang.isFunction(_64d)||this.mapSpatialReference==null){return;}var _64f=new _63a();_64f.geometries=[pt];_64f.distances=[_64c.distance];_64f.unit=_64c.units;_64f.bufferSpatialReference=pt.spatialReference;_64f.outSpatialReference=this.mapSpatialReference;this.geometryService.buffer(_64f,_64d,_64e);},handleProjectGeometriesToLatLon:function(_650,_651){if(_651==null||!lang.isFunction(_651)||_650==null){return;}if(!lang.isArray(_650)){_650=[_650];}if(_650.length==0){_651([]);}var _652=false;var _653=[];if(_650[0].spatialReference.wkid===PROJECTION_UTILS.WEB_MERCATOR_WKID||_650[0].spatialReference.wkid===PROJECTION_UTILS.WGS_84_WKID){if(_650[0].spatialReference.wkid===PROJECTION_UTILS.WGS_84_WKID){_651(_650);}var _654=_63c.webMercatorToGeographic;if(lang.isFunction(_654)){for(var i=0;i<_650.length;i++){_653.push(_654(_650[i]));}}}if(_653.length>0){_651(_653);}else{var _655=new _63b();_655.geometries=_650;_655.outSR=new _63d({wkid:PROJECTION_UTILS.WGS_84_WKID});this.geometryService.project(_655,_651,_651);}},handleProjectGeometriesToMapSR:function(_656,_657,_658,_659){if(_656==null){if(_659&&lang.isFunction(_659)){_659("No geometries to project");}return;}if(_657==null||!lang.isFunction(_657)||this.mapSpatialReference==null){if(_659&&lang.isFunction(_659)){_659("Cannot process project");}return;}if(!lang.isArray(_656)){_656=[_656];}if(_656.length<0){_657([]);}var _65a=PROJECTION_UTILS.geometryToMapSpatialReference(_656);if(_65a!=null&&lang.isArray(_65a)){_657(_65a);}else{this._handleServerSideProject(_656,_657,_658,_659);}},_handleServerSideProject:function(_65b,_65c,_65d,_65e){if(_65d==null){_65d={};}var _65f=new _63b();_65f.geometries=_65b;_65f.outSR=this.mapSpatialReference;if(_65d.transformation){_65f.transformation=_65d.transformation;}if(_65e==null||!lang.isFunction(_65e)){_65e=this.projectErrorDefaultCallback;}this.geometryService.project(_65f,_65c,_65e);},handleProjectionError:function(err){VIEWER_UTILS.log("Error Projecting data",VIEWER_GLOBALS.LOG_TYPE.ERROR);},handleGeometryServiceExists:function(_660){if(_660!=null&&lang.isFunction(_660)){_660(this.geometryService!=null);}}});});},"esriviewer/base/LocationServiceSupport":function(){define("esriviewer/base/LocationServiceSupport",["dojo/_base/declare","dojo/topic","dojo/_base/lang","esri/tasks/locator"],function(_661,_662,lang,_663){return _661([],{constructor:function(){this.locatorLookup={};},_initListeners:function(){_662.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.SINGLE_LINE_ADDRESS_TO_LOCATION,lang.hitch(this,this._handleSingleAddressLineAddressToLocations));_662.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.REVERSE_GEOCODE,lang.hitch(this,this.handleReverseGeocode));_662.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.ADD_LOCATOR,lang.hitch(this,this.handleAddLocatorRequest));_662.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.REMOVE_LOCATOR,lang.hitch(this,this.handleRemoveLocatorRequest));_662.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.GET_LOCATORS,lang.hitch(this,this.handleGetLocators));},handleGetLocators:function(_664){if(_664!=null&&lang.isFunction(_664)){var _665=[];for(var key in this.locatorLookup){_665.push(this.locatorLookup[key]);}_664(_665);}},handleReverseGeocode:function(_666,_667,_668,_669){if(_668!=null&&lang.isFunction(_668)){var _66a;var _66b=null;for(var key in this.locatorLookup){_66a=this.locatorLookup[key];if(_66a!=null&&_66a.locator!=null&&lang.isFunction(_66a.locator.locationToAddress)){_66b=_66a.locator;break;}}if(_66b==null){if(_669!=null&&lang.isFunction(_669)){_669("Reverse Geocode Not Supported");return;}}if(_667==null){_667=VIEWER_GLOBALS.DEFAULT_REVERSE_GEOCODE_DISTANCE;}_66b.locationToAddress(_666,_667,_668,_669);}},_handleSingleAddressLineAddressToLocations:function(_66c,_66d,_66e){this.singleLineAddressToLocations(_66c,_66d,_66e);},handleRemoveLocatorRequest:function(_66f){if(this.locatorLookup[_66f]!=null){delete this.locatorLookup[_66f];_662.publish(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_REMOVED,_66f);}},handleAddLocatorRequest:function(_670,_671,_672){this.addLocator(_670,null,function(id){if(id!=null){if(_671!=null&&lang.isFunction(_671)){_671(id,_670);}}else{if(_672!=null&&lang.isFunction(_672)){_672("Locator Exists");}}});},addLocator:function(_673,_674,_675){var id=_673.toLowerCase();if(this.locatorLookup[id]==null){var _676=new _663(_673);var _677={locator:_676,label:(_674!=null&&_674!="")?_674:REG_EXP_UTILS.getServiceNameFromUrl(_676.url)};var _678=null;_662.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,function(ext){_678=ext;});if(_678&&_678.spatialReference){_676.setOutSpatialReference(_678.spatialReference);}var _679=_675;var _67a=this.locatorLookup;VIEWER_UTILS.getServiceDescription(_673,function(_67b){if(_67b!=null&&lang.isObject(_67b)){if(_67b.singleLineAddressField!=null&&lang.isObject(_67b.singleLineAddressField)&&_67b.singleLineAddressField.name!=null&&_67b.singleLineAddressField.name!=""){_676.serviceDescription=_67b;_67a[id]=_677;_662.publish(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_ADDED,_677);if(_679!=null&&lang.isFunction(_679)){_679(id);}}else{_662.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Locator does not support single line address.");}}});}else{VIEWER_UTILS.log("Locator Already Exists: "+_673,VIEWER_GLOBALS.LOG_TYPE.ERROR);_662.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Locator already exists.");return null;}},singleLineAddressToLocations:function(_67c,_67d,_67e){if(_67e!=null){var _67f={};_67f[_67e.serviceDescription.singleLineAddressField.name]=VIEWER_UTILS.trim(_67c);var _680=lang.hitch(this,this.handleLocatorResponse,_67e.url.toLowerCase(),_67d);var _681=lang.hitch(this,this.handleLocatorError,_67e.url.toLowerCase(),_67d);_67e.addressToLocations(_67f,["*"],_680,_681);}},handleLocatorResponse:function(_682,_683,_684){_662.publish(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_REQUEST_COMPLETE,{addressCandidates:_684,locatorId:_682,requestId:_683});},handleLocatorError:function(_685,_686,_687){_662.publish(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_REQUEST_ERROR,{error:_687,locatorId:_685,requestId:_686});VIEWER_UTILS.log("Could not perform locate",VIEWER_GLOBALS.LOG_TYPE.ERROR);_662.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Could not perform locate");}});});},"dijit/MenuBarItem":function(){require({cache:{"url:dijit/templates/MenuBarItem.html":"<div class=\"dijitReset dijitInline dijitMenuItem dijitMenuItemLabel\" data-dojo-attach-point=\"focusNode\"\n\t \trole=\"menuitem\" tabIndex=\"-1\">\n\t<span data-dojo-attach-point=\"containerNode\"></span>\n</div>\n"}});define("dijit/MenuBarItem",["dojo/_base/declare","./MenuItem","dojo/text!./templates/MenuBarItem.html"],function(_688,_689,_68a){var _68b=_688("dijit._MenuBarItemMixin",null,{templateString:_68a,_setIconClassAttr:null});var _68c=_688("dijit.MenuBarItem",[_689,_68b],{});_68c._MenuBarItemMixin=_68b;return _68c;});},"esriviewer/manager/ViewerManagerSidebar":function(){require({cache:{"url:esriviewer/theme/sidebarTheme.css":".dijitTitlePaneTitle{font-size:12pt;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAABLCAYAAAC1Iz2+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjEwMPRyoQAAAKBJREFUOE+Nx7cNw0AAQ1HuP6ByzlkNBzBcsDjINFR8gg/3fVMhwHVdVPA4z5MKHsdxUOEn9n0nvqP+YNs2Knis60oFj2VZqOAxzzMVAkzTRAWPcRyp8BLDMFAhQN/3VPDouo4KHm3bUsGjaRoqeNR1TQWPqqqo4FGWJRU8iqKggkee51TwyLKMCgHSNKXCSyRJQgWPOI6p8EAURfwGnQc+9GsrqAtrB/gAAAAASUVORK5CYII=) !important;}body.sidebarTheme{background:rgb(147, 206, 222);background:-moz-radial-gradient(center, ellipse cover, rgba(147, 206, 222, 1) 0%, rgba(117, 189, 209, 1) 41%, rgba(73, 165, 191, 1) 100%);background:-webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%, rgba(147, 206, 222, 1)), color-stop(41%, rgba(117, 189, 209, 1)), color-stop(100%, rgba(73, 165, 191, 1)));background:-webkit-radial-gradient(center, ellipse cover, rgba(147, 206, 222, 1) 0%, rgba(117, 189, 209, 1) 41%, rgba(73, 165, 191, 1) 100%);background:-o-radial-gradient(center, ellipse cover, rgba(147, 206, 222, 1) 0%, rgba(117, 189, 209, 1) 41%, rgba(73, 165, 191, 1) 100%);background:-ms-radial-gradient(center, ellipse cover, rgba(147, 206, 222, 1) 0%, rgba(117, 189, 209, 1) 41%, rgba(73, 165, 191, 1) 100%);background:radial-gradient(ellipse at center, rgba(147, 206, 222, 1) 0%, rgba(117, 189, 209, 1) 41%, rgba(73, 165, 191, 1) 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr ='#93cede', endColorstr ='#49a5bf', GradientType = 1);}.logolinks a,.sidebarInnerBorderContainerTop{color:white;}.dijitTabContainer{color:#666666;border-radius:10px 10px 10px 10px;}.dijitTab{border-radius:5px 5px 0 0;font-family:tahoma,sans-serif;}.sidebarInnerBorderContainer{margin-right:10px;margin-bottom:10px;}.sidebarInnerBorderContainerTop{height:24px;}.dijitTabContainerTop-tabs{border:0;}"}});define("esriviewer/manager/ViewerManagerSidebar",["dojo/_base/declare","xstyle/css!./../theme/sidebarTheme.css","dojo/topic","./base/ViewerManager"],function(_68d,_68e,_68f,_690){return _68d([_690],{createIdentifyWidget:function(){require(["esriviewer/ui/identify/IdentifyWidget"],function(_691){_68f.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.WINDOWLESS.PLACE.IDENTIFY_WIDGET,new _691());});},createMeasureWidget:function(){require(["esriviewer/ui/measure/MeasureWidget"],function(_692){_68f.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.WINDOWLESS.PLACE.MEASURE_WIDGET,new _692());});},createFeatureEditorWidget:function(){require(["esriviewer/ui/editor/FeatureServiceEditor"],function(_693){_68f.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.WINDOWLESS.PLACE.FEATURE_SERVICE_WIDGET,new _693());});},createTimeSliderWidget:function(){require(["esriviewer/ui/time/TimeSliderWidget"],function(_694){_68f.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.WINDOWLESS.PLACE.TIME_SLIDER_WIDGET,new _694());});},createLayersTransparencyWidget:function(){require(["../ui/transparency/LayersTransparencyWidget"],function(_695){_68f.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.WINDOWLESS.PLACE.LAYER_TRANSPARENCY_WIDGET,new _695());});},createConfigureViewerWidget:function(){require(["esriviewer/ui/configure/ConfigureViewerWidget"],function(_696){_68f.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.WINDOWLESS.PLACE.CONFIGURE_WIDGET,new _696());});},createReverseGeocodeWidget:function(){require(["esriviewer/ui/geocode/ReverseGeocodeWidget"],function(_697){_68f.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.WINDOWLESS.PLACE.REVERSE_GEOCODE_WIDGET,new _697());});},createQueryBuilderWidget:function(){require(["esriviewer/ui/query/QueryBuilderWidget"],function(_698){_68f.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.WINDOWLESS.PLACE.QUERY_BUILDER_WIDGET,new _698());});},createDrawWidget:function(){require(["esriviewer/ui/draw/DrawWidget"],function(_699){_68f.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.WINDOWLESS.PLACE.DRAW_WIDGET,new _699());});},createLoggingWidget:function(){require(["esriviewer/ui/logging/LoggingWidget"],function(_69a){_68f.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.WINDOWLESS.PLACE.LOGGING_WIDGET,new _69a());});},createLayersWidget:function(){require(["esriviewer/ui/layers/LayersWidget"],function(_69b){_68f.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.WINDOWLESS.PLACE.LAYERS_WIDGET,new _69b());});},createLegendWidget:function(){require(["esriviewer/ui/legend/MapLegendWidget"],function(_69c){_68f.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.WINDOWLESS.PLACE.MAP_LEGEND_WIDGET,new _69c());});},createZoomToWidget:function(){require(["esriviewer/ui/zoomto/ZoomToWidget"],function(_69d){_68f.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.WINDOWLESS.PLACE.ZOOM_TO_WIDGET,new _69d());});},createWeatherWidget:function(){require(["esriviewer/ui/weather/conditions/WeatherWidget"],function(_69e){_68f.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.WINDOWLESS.PLACE.WEATHER_WIDGET,new _69e());});}});});},"dijit/MenuBar":function(){require({cache:{"url:dijit/templates/MenuBar.html":"<div class=\"dijitMenuBar dijitMenuPassive\" data-dojo-attach-point=\"containerNode\"  role=\"menubar\" tabIndex=\"${tabIndex}\" data-dojo-attach-event=\"onkeypress: _onKeyPress\"></div>\n"}});define("dijit/MenuBar",["dojo/_base/declare","dojo/_base/event","dojo/keys","./_MenuBase","dojo/text!./templates/MenuBar.html"],function(_69f,_6a0,keys,_6a1,_6a2){return _69f("dijit.MenuBar",_6a1,{templateString:_6a2,baseClass:"dijitMenuBar",_isMenuBar:true,postCreate:function(){this.inherited(arguments);var l=this.isLeftToRight();this.connectKeyNavHandlers(l?[keys.LEFT_ARROW]:[keys.RIGHT_ARROW],l?[keys.RIGHT_ARROW]:[keys.LEFT_ARROW]);this._orient=["below"];},_moveToPopup:function(evt){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled){this.onItemClick(this.focusedChild,evt);}},focusChild:function(item){var _6a3=this.focusedChild,_6a4=_6a3&&_6a3.popup&&_6a3.popup.isShowingNow;this.inherited(arguments);if(_6a4&&item.popup&&!item.disabled){this._openPopup(true);}},_onKeyPress:function(evt){if(evt.ctrlKey||evt.altKey){return;}switch(evt.charOrCode){case keys.DOWN_ARROW:this._moveToPopup(evt);_6a0.stop(evt);}},onItemClick:function(item,evt){if(item.popup&&item.popup.isShowingNow&&(evt.type!=="keypress"||evt.keyCode!==keys.DOWN_ARROW)){item.popup.onCancel();}else{this.inherited(arguments);}}});});},"esriviewer/ui/zoomto/ZoomToWidgetWindow":function(){define("esriviewer/ui/zoomto/ZoomToWidgetWindow",["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/dom-style","../window/WindowWidget"],function(_6a5,_6a6,lang,_6a7,_6a8,_6a9){return _6a5([_6a8],{defaultPositioning:{x:10,y:240},windowWidth:"275px",windowHeaderText:"Zoom To",windowIconAltText:"Zoom To",windowIconClass:"commonIcons16 magnifyingGlass",positioningParamName:"zoomTo",initListeners:function(){this.inherited(arguments);this.subscribes.push(_6a6.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.ZOOM_TO.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_6a6.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.ZOOM_TO.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_6a6.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.ZOOM_TO.TOGGLE,lang.hitch(this,this.toggle)));this.firstShowListener=this.on("firstWindowShow",lang.hitch(this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/zoomto/ZoomToWidget"],lang.hitch(this,function(_6aa){this.zoomToWidget=new _6aa();this.setContent(this.zoomToWidget.domNode);}));}});});},"dijit/layout/_LayoutWidget":function(){define("dijit/layout/_LayoutWidget",["dojo/_base/lang","../_Widget","../_Container","../_Contained","../Viewport","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style"],function(lang,_6ab,_6ac,_6ad,_6ae,_6af,_6b0,_6b1,_6b2){return _6af("dijit.layout._LayoutWidget",[_6ab,_6ac,_6ad],{baseClass:"dijitLayoutContainer",isLayoutContainer:true,buildRendering:function(){this.inherited(arguments);_6b0.add(this.domNode,"dijitContainer");},startup:function(){if(this._started){return;}this.inherited(arguments);var _6b3=this.getParent&&this.getParent();if(!(_6b3&&_6b3.isLayoutContainer)){this.resize();this.own(_6ae.on("resize",lang.hitch(this,"resize")));}},resize:function(_6b4,_6b5){var node=this.domNode;if(_6b4){_6b1.setMarginBox(node,_6b4);}var mb=_6b5||{};lang.mixin(mb,_6b4||{});if(!("h" in mb)||!("w" in mb)){mb=lang.mixin(_6b1.getMarginBox(node),mb);}var cs=_6b2.getComputedStyle(node);var me=_6b1.getMarginExtents(node,cs);var be=_6b1.getBorderExtents(node,cs);var bb=(this._borderBox={w:mb.w-(me.w+be.w),h:mb.h-(me.h+be.h)});var pe=_6b1.getPadExtents(node,cs);this._contentBox={l:_6b2.toPixelValue(node,cs.paddingLeft),t:_6b2.toPixelValue(node,cs.paddingTop),w:bb.w-pe.w,h:bb.h-pe.h};this.layout();},layout:function(){},_setupChild:function(_6b6){var cls=this.baseClass+"-child "+(_6b6.baseClass?this.baseClass+"-"+_6b6.baseClass:"");_6b0.add(_6b6.domNode,cls);},addChild:function(_6b7,_6b8){this.inherited(arguments);if(this._started){this._setupChild(_6b7);}},removeChild:function(_6b9){var cls=this.baseClass+"-child"+(_6b9.baseClass?" "+this.baseClass+"-"+_6b9.baseClass:"");_6b0.remove(_6b9.domNode,cls);this.inherited(arguments);}});});},"dojox/uuid/_base":function(){define("dojox/uuid/_base",["dojo/_base/kernel","dojo/_base/lang"],function(dojo){dojo.getObject("uuid",true,dojox);dojox.uuid.NIL_UUID="00000000-0000-0000-0000-000000000000";dojox.uuid.version={UNKNOWN:0,TIME_BASED:1,DCE_SECURITY:2,NAME_BASED_MD5:3,RANDOM:4,NAME_BASED_SHA1:5};dojox.uuid.variant={NCS:"0",DCE:"10",MICROSOFT:"110",UNKNOWN:"111"};dojox.uuid.assert=function(_6ba,_6bb){if(!_6ba){if(!_6bb){_6bb="An assert statement failed.\n"+"The method dojox.uuid.assert() was called with a 'false' value.\n";}throw new Error(_6bb);}};dojox.uuid.generateNilUuid=function(){return dojox.uuid.NIL_UUID;};dojox.uuid.isValid=function(_6bc){_6bc=_6bc.toString();var _6bd=(dojo.isString(_6bc)&&(_6bc.length==36)&&(_6bc==_6bc.toLowerCase()));if(_6bd){var _6be=_6bc.split("-");_6bd=((_6be.length==5)&&(_6be[0].length==8)&&(_6be[1].length==4)&&(_6be[2].length==4)&&(_6be[3].length==4)&&(_6be[4].length==12));var _6bf=16;for(var i in _6be){var part=_6be[i];var _6c0=parseInt(part,_6bf);_6bd=_6bd&&isFinite(_6c0);}}return _6bd;};dojox.uuid.getVariant=function(_6c1){if(!dojox.uuid._ourVariantLookupTable){var _6c2=dojox.uuid.variant;var _6c3=[];_6c3[0]=_6c2.NCS;_6c3[1]=_6c2.NCS;_6c3[2]=_6c2.NCS;_6c3[3]=_6c2.NCS;_6c3[4]=_6c2.NCS;_6c3[5]=_6c2.NCS;_6c3[6]=_6c2.NCS;_6c3[7]=_6c2.NCS;_6c3[8]=_6c2.DCE;_6c3[9]=_6c2.DCE;_6c3[10]=_6c2.DCE;_6c3[11]=_6c2.DCE;_6c3[12]=_6c2.MICROSOFT;_6c3[13]=_6c2.MICROSOFT;_6c3[14]=_6c2.UNKNOWN;_6c3[15]=_6c2.UNKNOWN;dojox.uuid._ourVariantLookupTable=_6c3;}_6c1=_6c1.toString();var _6c4=_6c1.charAt(19);var _6c5=16;var _6c6=parseInt(_6c4,_6c5);dojox.uuid.assert((_6c6>=0)&&(_6c6<=16));return dojox.uuid._ourVariantLookupTable[_6c6];};dojox.uuid.getVersion=function(_6c7){var _6c8="dojox.uuid.getVersion() was not passed a DCE Variant UUID.";dojox.uuid.assert(dojox.uuid.getVariant(_6c7)==dojox.uuid.variant.DCE,_6c8);_6c7=_6c7.toString();var _6c9=_6c7.charAt(14);var _6ca=16;var _6cb=parseInt(_6c9,_6ca);return _6cb;};dojox.uuid.getNode=function(_6cc){var _6cd="dojox.uuid.getNode() was not passed a TIME_BASED UUID.";dojox.uuid.assert(dojox.uuid.getVersion(_6cc)==dojox.uuid.version.TIME_BASED,_6cd);_6cc=_6cc.toString();var _6ce=_6cc.split("-");var _6cf=_6ce[4];return _6cf;};dojox.uuid.getTimestamp=function(_6d0,_6d1){var _6d2="dojox.uuid.getTimestamp() was not passed a TIME_BASED UUID.";dojox.uuid.assert(dojox.uuid.getVersion(_6d0)==dojox.uuid.version.TIME_BASED,_6d2);_6d0=_6d0.toString();if(!_6d1){_6d1=null;}switch(_6d1){case "string":case String:return dojox.uuid.getTimestamp(_6d0,Date).toUTCString();break;case "hex":var _6d3=_6d0.split("-");var _6d4=_6d3[0];var _6d5=_6d3[1];var _6d6=_6d3[2];_6d6=_6d6.slice(1);var _6d7=_6d6+_6d5+_6d4;dojox.uuid.assert(_6d7.length==15);return _6d7;break;case null:case "date":case Date:var _6d8=3394248;var _6d9=16;var _6da=_6d0.split("-");var _6db=parseInt(_6da[0],_6d9);var _6dc=parseInt(_6da[1],_6d9);var _6dd=parseInt(_6da[2],_6d9);var _6de=_6dd&4095;_6de<<=16;_6de+=_6dc;_6de*=4294967296;_6de+=_6db;var _6df=_6de/10000;var _6e0=60*60;var _6e1=_6d8;var _6e2=_6e1*_6e0;var _6e3=_6e2*1000;var _6e4=_6df-_6e3;var _6e5=new Date(_6e4);return _6e5;break;default:dojox.uuid.assert(false,"dojox.uuid.getTimestamp was not passed a valid returnType: "+_6d1);break;}};return dojox.uuid;});},"esriviewer/ui/user/location/UserLocationWidget":function(){require({cache:{"url:esriviewer/ui/user/location/theme/UserLocationWidgetTheme.css":".userLocationCrosshairContainer{position:absolute;z-index:4;}"}});define("esriviewer/ui/user/location/UserLocationWidget",["dojo/_base/declare","xstyle/css!./theme/UserLocationWidgetTheme.css","dojo/dom-construct","dojo/dom-class","dojo/_base/lang","dojo/on","dojo/topic","../../base/UIWidget","esri/geometry/Point","esri/SpatialReference"],function(_6e6,_6e7,_6e8,_6e9,lang,on,_6ea,_6eb,_6ec,_6ed){return _6e6([_6eb],{defaultPositioning:{x:20,y:205},browserLocationWkid:4326,isPositionedByConfig:true,positioningParamName:"zoomToUserLocation",maximumAge:0,timeout:6000,enableHighAccuracy:true,postCreate:function(){this.inherited(arguments);_6e9.add(this.domNode,"userLocationCrosshairContainer fivePixelBorderRadius defaultTwoPixelBorder defaultBackground");var _6ee=_6e8.create("div",{className:"commonIcons32 locationCrosshair"});_6e8.place(_6ee,this.domNode);on(_6ee,"click",lang.hitch(this,this.handleZoomToCurrentLocation));this.handleProjectResponse=lang.hitch(this,this._handleProjectResponse);this.zoomToCurrentLocation=lang.hitch(this,this._zoomToCurrentLocation);this.zoomToCurrentLocationError=lang.hitch(this,this._zoomToCurrentLocationError);},handleZoomToCurrentLocation:function(){if(navigator&&navigator.geolocation){navigator.geolocation.getCurrentPosition(this.zoomToCurrentLocation,this.zoomToCurrentLocationError,{maximumAge:this.maximumAge,timeout:this.timeout,enableHighAccuracy:this.enableHighAccuracy});}},_zoomToCurrentLocation:function(_6ef){if(_6ef!=null&&lang.isObject(_6ef)&&_6ef.coords){var pt=new _6ec(_6ef.coords.longitude,_6ef.coords.latitude,new _6ed({wkid:this.browserLocationWkid}));_6ea.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_MAP_SR,pt,this.handleProjectResponse);}},_handleProjectResponse:function(_6f0){if(_6f0!=null&&lang.isArray(_6f0)&&_6f0.length>0){_6ea.publish(VIEWER_GLOBALS.EVENTS.MAP.FLASH.POINT,_6f0[0]);_6ea.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PAN_TO,_6f0[0],{deepest:true});}},_zoomToCurrentLocationError:function(){_6ea.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Could not zoom to current location");VIEWER_UTILS.log("Could not get users current location");}});});},"esriviewer/ui/geocode/ReverseGeocodeWindowWidget":function(){define("esriviewer/ui/geocode/ReverseGeocodeWindowWidget",["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/dom-style","../window/WindowWidget"],function(_6f1,_6f2,lang,_6f3,_6f4){return _6f1([_6f4],{defaultPositioning:{x:600,y:150},windowWidth:"310px",windowHeaderText:"Find Address By Point",windowIconAltText:"Find Address By Point",positioningParamName:"reverseGeocode",windowIconClass:"commonIcons16 binoculars",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/geocode/ReverseGeocodeWidget"],lang.hitch(this,function(_6f5){this.reverseGeocodeWidget=new _6f5();this.setContent(this.reverseGeocodeWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_6f2.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REVERSE_GEOCODE.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_6f2.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REVERSE_GEOCODE.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_6f2.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REVERSE_GEOCODE.TOGGLE,lang.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.reverseGeocodeWidget){this.reverseGeocodeWidget.reset();}}});});},"dijit/layout/StackController":function(){define("dijit/layout/StackController",["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/on","../focus","../registry","../_Widget","../_TemplatedMixin","../_Container","../form/ToggleButton","dojo/i18n!../nls/common"],function(_6f6,_6f7,_6f8,_6f9,keys,lang,on,_6fa,_6fb,_6fc,_6fd,_6fe,_6ff){var _700=_6f7("dijit.layout._StackButton",_6ff,{tabIndex:"-1",closeButton:false,_aria_attr:"aria-selected",buildRendering:function(evt){this.inherited(arguments);(this.focusNode||this.domNode).setAttribute("role","tab");}});var _701=_6f7("dijit.layout.StackController",[_6fc,_6fd,_6fe],{baseClass:"dijitStackController",templateString:"<span role='tablist' data-dojo-attach-event='onkeypress'></span>",containerId:"",buttonWidget:_700,buttonWidgetCloseClass:"dijitStackCloseButton",constructor:function(_702){this.pane2button={};},postCreate:function(){this.inherited(arguments);this.subscribe(this.containerId+"-startup","onStartup");this.subscribe(this.containerId+"-addChild","onAddChild");this.subscribe(this.containerId+"-removeChild","onRemoveChild");this.subscribe(this.containerId+"-selectChild","onSelectChild");this.subscribe(this.containerId+"-containerKeyPress","onContainerKeyPress");this.connect(this.containerNode,"click",function(evt){var _703=_6fb.getEnclosingWidget(evt.target);if(_703!=this.containerNode&&!_703.disabled&&_703.page){for(var _704=evt.target;_704!==this.containerNode;_704=_704.parentNode){if(_6f8.contains(_704,this.buttonWidgetCloseClass)){this.onCloseButtonClick(_703.page);break;}else{if(_704==_703.domNode){this.onButtonClick(_703.page);break;}}}}});},onStartup:function(info){_6f6.forEach(info.children,this.onAddChild,this);if(info.selected){this.onSelectChild(info.selected);}var _705=_6fb.byId(this.containerId).containerNode,_706=this.pane2button,_707={"title":"label","showtitle":"showLabel","iconclass":"iconClass","closable":"closeButton","tooltip":"title","disabled":"disabled"},_708=function(attr,_709){return on(_705,"attrmodified-"+attr,function(evt){var _70a=_706[evt.detail&&evt.detail.widget&&evt.detail.widget.id];if(_70a){_70a.set(_709,evt.detail.newValue);}});};for(var attr in _707){this.own(_708(attr,_707[attr]));}},destroy:function(){for(var pane in this.pane2button){this.onRemoveChild(_6fb.byId(pane));}this.inherited(arguments);},onAddChild:function(page,_70b){var Cls=lang.isString(this.buttonWidget)?lang.getObject(this.buttonWidget):this.buttonWidget;var _70c=new Cls({id:this.id+"_"+page.id,name:this.id+"_"+page.id,label:page.title,disabled:page.disabled,ownerDocument:this.ownerDocument,dir:page.dir,lang:page.lang,textDir:page.textDir,showLabel:page.showTitle,iconClass:page.iconClass,closeButton:page.closable,title:page.tooltip,page:page});this.addChild(_70c,_70b);this.pane2button[page.id]=_70c;page.controlButton=_70c;if(!this._currentChild){this.onSelectChild(page);}},onRemoveChild:function(page){if(this._currentChild===page){this._currentChild=null;}var _70d=this.pane2button[page.id];if(_70d){this.removeChild(_70d);delete this.pane2button[page.id];_70d.destroy();}delete page.controlButton;},onSelectChild:function(page){if(!page){return;}if(this._currentChild){var _70e=this.pane2button[this._currentChild.id];_70e.set("checked",false);_70e.focusNode.setAttribute("tabIndex","-1");}var _70f=this.pane2button[page.id];_70f.set("checked",true);this._currentChild=page;_70f.focusNode.setAttribute("tabIndex","0");var _710=_6fb.byId(this.containerId);_710.containerNode.setAttribute("aria-labelledby",_70f.id);},onButtonClick:function(page){var _711=this.pane2button[page.id];_6fa.focus(_711.focusNode);if(this._currentChild&&this._currentChild.id===page.id){_711.set("checked",true);}var _712=_6fb.byId(this.containerId);_712.selectChild(page);},onCloseButtonClick:function(page){var _713=_6fb.byId(this.containerId);_713.closeChild(page);if(this._currentChild){var b=this.pane2button[this._currentChild.id];if(b){_6fa.focus(b.focusNode||b.domNode);}}},adjacent:function(_714){if(!this.isLeftToRight()&&(!this.tabPosition||/top|bottom/.test(this.tabPosition))){_714=!_714;}var _715=this.getChildren();var idx=_6f6.indexOf(_715,this.pane2button[this._currentChild.id]),_716=_715[idx];var _717;do{idx=(idx+(_714?1:_715.length-1))%_715.length;_717=_715[idx];}while(_717.disabled&&_717!=_716);return _717;},onkeypress:function(e){if(this.disabled||e.altKey){return;}var _718=null;if(e.ctrlKey||!e._djpage){switch(e.charOrCode){case keys.LEFT_ARROW:case keys.UP_ARROW:if(!e._djpage){_718=false;}break;case keys.PAGE_UP:if(e.ctrlKey){_718=false;}break;case keys.RIGHT_ARROW:case keys.DOWN_ARROW:if(!e._djpage){_718=true;}break;case keys.PAGE_DOWN:if(e.ctrlKey){_718=true;}break;case keys.HOME:var _719=this.getChildren();for(var idx=0;idx<_719.length;idx++){var _71a=_719[idx];if(!_71a.disabled){this.onButtonClick(_71a.page);break;}}_6f9.stop(e);break;case keys.END:var _719=this.getChildren();for(var idx=_719.length-1;idx>=0;idx--){var _71a=_719[idx];if(!_71a.disabled){this.onButtonClick(_71a.page);break;}}_6f9.stop(e);break;case keys.DELETE:if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild);}_6f9.stop(e);break;default:if(e.ctrlKey){if(e.charOrCode===keys.TAB){this.onButtonClick(this.adjacent(!e.shiftKey).page);_6f9.stop(e);}else{if(e.charOrCode=="w"){if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild);}_6f9.stop(e);}}}}if(_718!==null){this.onButtonClick(this.adjacent(_718).page);_6f9.stop(e);}}},onContainerKeyPress:function(info){info.e._djpage=info.page;this.onkeypress(info.e);}});_701.StackButton=_700;return _701;});},"esriviewer/ui/header/model/HeaderLogoViewModel":function(){define("esriviewer/ui/header/model/HeaderLogoViewModel",["dojo/_base/declare"],function(_71b){return _71b([],{constructor:function(){this.showHeaderIcon=ko.observable(true);this.headerIconUrl=ko.observable();this.headerMainText=ko.observable("Esri Map Viewer");this.helpUrl=ko.observable("http://www.esri.com");this.contactUrl=ko.observable("http://www.esri.com/about-esri/contact");this.contactText=ko.observable("Contact Esri");this.helpText=ko.observable("Help");}});});},"esriviewer/ui/menu/ViewerMenuBar":function(){define("esriviewer/ui/menu/ViewerMenuBar",["dojo/_base/declare","../base/UIWidget","dojo/_base/window","dojo/dom-construct","dojo/dom-style","dojo/topic","dojo/_base/lang","dijit/MenuBar","dijit/PopupMenuBarItem","dijit/Menu","dijit/MenuItem","dijit/DropDownMenu"],function(_71c,_71d,_71e,_71f,_720,_721,lang,_722,_723,Menu,_724,_725){return _71c([_71d],{postCreate:function(){var _726=new _722({});var _727=new _725({});var _728=new _724({label:"Draw"});_728.on("click",lang.hitch(this,this.handleDrawClick));_727.addChild(_728);var _729=new _724({label:"Time"});_729.on("click",lang.hitch(this,this.handleTimeClick));_727.addChild(_729);var _72a=new _724({label:"Query Builder"});_72a.on("click",lang.hitch(this,this.handleQueryBuilderClick));_727.addChild(_72a);_726.addChild(new _723({label:"Actions",popup:_727,style:{height:"30px"}}));_721.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MENU_BAR,this);_726.placeAt(this.domNode);_726.startup();},handleQueryBuilderClick:function(){_721.publish(VIEWER_GLOBALS.EVENTS.WINDOW.QUERY_BUILDER.SHOW);},handleTimeClick:function(){_721.publish(VIEWER_GLOBALS.EVENTS.MAP.TIME.SHOW_TIME_SLIDER);},handleDrawClick:function(){_721.publish(VIEWER_GLOBALS.EVENTS.WINDOW.DRAW.SHOW);}});});},"esriviewer/ui/basemap/BasemapGalleryWidget":function(){require({cache:{"url:esriviewer/ui/basemap/template/BasemapGalleryTemplate.html":"<div data-bind=\"visible: visible\" class=\"defaultTransparentBackground basemapGalleryContainer\">\r\n    <div data-dojo-attach-point=\"basemapGalleryContents\"></div>\r\n</div>"}});define("esriviewer/ui/basemap/BasemapGalleryWidget",["dojo/_base/declare","dojo/text!./template/BasemapGalleryTemplate.html","dojo/_base/lang","dojo/topic","dojo/_base/window","dojo/dom-class","dojo/dom-construct","../base/UITemplatedWidget","./model/BasemapGalleryViewModel","esri/dijit/BasemapGallery","esri/arcgis/utils"],function(_72b,_72c,lang,_72d,_72e,_72f,_730,_731,_732,_733,_734){return _72b([_731],{templateString:_72c,constructor:function(){this.portalConfig=null;},initListeners:function(){_72d.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.TOGGLE,lang.hitch(this,this.handleToggleBasemapGallery));_72d.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.SHOW,lang.hitch(this,this.handleShowBasemapGallery));_72d.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.HIDE,lang.hitch(this,this.handleHideBasemapGallery));_72d.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.IS_HIDDEN,lang.hitch(this,this.handleBasemapGalleryIsHidden));_72d.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.GET,lang.hitch(this,this.handleGetBasemapGallery));},handleGetBasemapGallery:function(_735){if(_735!=null&&lang.isFunction(_735)){_735(this.basemapGallery);}},loadViewerConfigurationData:function(){var _736=null;_72d.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"portal",function(_737){_736=_737;});this.portalConfig=_736;},handleBasemapGalleryIsHidden:function(_738){if(_738!=null&&lang.isFunction(_738)){_738(!this.viewModel.visible());}},handleHideBasemapGallery:function(){if(this.viewModel.visible()){this.viewModel.visible(false);}},handleShowBasemapGallery:function(){if(!this.viewModel.visible()){this.viewModel.visible(true);}},handleToggleBasemapGallery:function(){this.viewModel.visible(!this.viewModel.visible());},postCreate:function(){this.inherited(arguments);this.viewModel=new _732();ko.applyBindings(this.viewModel,this.domNode);var map;dojo.publish(VIEWER_GLOBALS.EVENTS.MAP.GET,function(_739){map=_739;});this.basemapGallery=new _733({showArcGISBasemaps:true,map:map},this.basemapGalleryContents);this.basemapGallery.on("load",lang.hitch(this,this.handleBasemapGalleryLoaded));this.basemapGallery.on("selectionChange",lang.hitch(this,this.handleBasemapSelectionChanged));},handleBasemapSelectionChanged:function(){this.handleHideBasemapGallery();_72d.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.CHANGED);},placeAt:function(node){this.inherited(arguments);},handleBasemapGalleryLoaded:function(){},startup:function(){if(this.portalConfig!=null&&lang.isObject(this.portalConfig)&&this.portalConfig.url!=null&&this.portalConfig.url!=""){_734.arcgisUrl=VIEWER_UTILS.joinUrl(this.portalConfig.url,VIEWER_GLOBALS.PORTAL_SHARING_REST_URL_PART);}this.basemapGallery.startup();}});});},"url:dijit/templates/Menu.html":"<table class=\"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable\" role=\"menu\" tabIndex=\"${tabIndex}\"\n\t   data-dojo-attach-event=\"onkeypress:_onKeyPress\" cellspacing=\"0\">\n\t<tbody class=\"dijitReset\" data-dojo-attach-point=\"containerNode\"></tbody>\n</table>\n","url:esriviewer/ui/throbber/template/ThrobberTemplate.html":"<div class=\"loadingThrobber\"\r\n     style=\"display:none\">\r\n    <div class=\"loadingThrobberInner\">\r\n        <div class=\"loadingIcon\"></div>\r\n    </div>\r\n</div>","dojo/dnd/Avatar":function(){define("dojo/dnd/Avatar",["../_base/declare","../_base/window","../dom","../dom-attr","../dom-class","../dom-construct","../hccss","../query"],function(_73a,win,dom,_73b,_73c,_73d,has,_73e){return _73a("dojo.dnd.Avatar",null,{constructor:function(_73f){this.manager=_73f;this.construct();},construct:function(){var a=_73d.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),_740=this.manager.source,node,b=_73d.create("tbody",null,a),tr=_73d.create("tr",null,b),td=_73d.create("td",null,tr),k=Math.min(5,this.manager.nodes.length),i=0;if(has("highcontrast")){_73d.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"<"},td);}_73d.create("span",{innerHTML:_740.generateText?this._generateText():""},td);_73b.set(tr,{"class":"dojoDndAvatarHeader",style:{opacity:0.9}});for(;i<k;++i){if(_740.creator){node=_740._normalizedCreator(_740.getItem(this.manager.nodes[i].id).data,"avatar").node;}else{node=this.manager.nodes[i].cloneNode(true);if(node.tagName.toLowerCase()=="tr"){var _741=_73d.create("table"),_742=_73d.create("tbody",null,_741);_742.appendChild(node);node=_741;}}node.id="";tr=_73d.create("tr",null,b);td=_73d.create("td",null,tr);td.appendChild(node);_73b.set(tr,{"class":"dojoDndAvatarItem",style:{opacity:(9-i)/10}});}this.node=a;},destroy:function(){_73d.destroy(this.node);this.node=false;},update:function(){_73c.toggle(this.node,"dojoDndAvatarCanDrop",this.manager.canDropFlag);if(has("highcontrast")){var icon=dom.byId("a11yIcon");var text="+";if(this.manager.canDropFlag&&!this.manager.copy){text="< ";}else{if(!this.manager.canDropFlag&&!this.manager.copy){text="o";}else{if(!this.manager.canDropFlag){text="x";}}}icon.innerHTML=text;}_73e(("tr.dojoDndAvatarHeader td span"+(has("highcontrast")?" span":"")),this.node).forEach(function(node){node.innerHTML=this.manager.source.generateText?this._generateText():"";},this);},_generateText:function(){return this.manager.nodes.length.toString();}});});},"undefined":undefined,"dojo/dnd/move":function(){define("dojo/dnd/move",["../_base/declare","../dom-geometry","../dom-style","./common","./Mover","./Moveable"],function(_743,_744,_745,dnd,_746,_747){var _748=_743("dojo.dnd.move.constrainedMoveable",_747,{constraints:function(){},within:false,constructor:function(node,_749){if(!_749){_749={};}this.constraints=_749.constraints;this.within=_749.within;},onFirstMove:function(_74a){var c=this.constraintBox=this.constraints.call(this,_74a);c.r=c.l+c.w;c.b=c.t+c.h;if(this.within){var mb=_744.getMarginSize(_74a.node);c.r-=mb.w;c.b-=mb.h;}},onMove:function(_74b,_74c){var c=this.constraintBox,s=_74b.node.style;this.onMoving(_74b,_74c);_74c.l=_74c.l<c.l?c.l:c.r<_74c.l?c.r:_74c.l;_74c.t=_74c.t<c.t?c.t:c.b<_74c.t?c.b:_74c.t;s.left=_74c.l+"px";s.top=_74c.t+"px";this.onMoved(_74b,_74c);}});var _74d=_743("dojo.dnd.move.boxConstrainedMoveable",_748,{box:{},constructor:function(node,_74e){var box=_74e&&_74e.box;this.constraints=function(){return box;};}});var _74f=_743("dojo.dnd.move.parentConstrainedMoveable",_748,{area:"content",constructor:function(node,_750){var area=_750&&_750.area;this.constraints=function(){var n=this.node.parentNode,s=_745.getComputedStyle(n),mb=_744.getMarginBox(n,s);if(area=="margin"){return mb;}var t=_744.getMarginExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="border"){return mb;}t=_744.getBorderExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="padding"){return mb;}t=_744.getPadExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;return mb;};}});return {constrainedMoveable:_748,boxConstrainedMoveable:_74d,parentConstrainedMoveable:_74f};});},"url:esriviewer/ui/layers/base/template/UserPersistedLayersListingTemplate.html":"<div>\r\n    <div class=\"userPersistsedLayersClearContainer\" data-bind=\"visible: hasEntries\">\r\n        <div class=\"userPersistsedLayersClearLbl\" data-bind=\"click:clearEntries\">Clear Entries</div>\r\n    </div>\r\n    <div class=\"addedUserPersistedLayersListContainer\" data-dojo-attach-point=\"addedUserPersistedGraphicsListContainer\">\r\n        <ul class=\"viewerList\" data-bind=\"foreach: addedUserPersistedLayers\">\r\n            <li class=\"graphicsListEntry\">\r\n                <div title=\"Delete Layer\" class=\"viewerListEntryRemoveIcon commonIcons16 remove\"\r\n                     data-bind=\"click:$parent.removeUserPersistedLayer\"></div>\r\n                <div title=\"Add Layer To Map\" class=\"viewerListGenericIcon commonIcons16 layerShow\"\r\n                     data-bind=\"click:$parent.addPersistedLayerToMap\"></div>\r\n                <span class=\"graphicsListEntryLabel\" data-bind=\"text: $data.name\"></span>\r\n\r\n                <div class=\"userPersistedLayersInfoIcon commonIcons16 information\"\r\n                     data-bind=\"attr:{title:$data.url}\"></div>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>","esriviewer/portal/PortalSupport":function(){define("esriviewer/portal/PortalSupport",["dojo/_base/declare","dojo/topic","dojo/_base/lang","esri/arcgis/Portal","../base/ConfigurationEntryMixin","./PortalSearcher"],function(_751,_752,lang,_753,_754,_755){return _751([_754],{constructor:function(){this.portalConfiguration=null;this.loadViewerConfigurationData();if(this.portalConfiguration!=null&&lang.isObject(this.portalConfiguration)&&this.portalConfiguration.url!=null&&this.portalConfiguration.url!=""){this.initPortal();}else{VIEWER_UTILS.log("Portal Configuration not found",VIEWER_GLOBALS.LOG_TYPE.ERROR);}if(this.portal){this.initListeners();this.createPortalSearcher();}},initPortal:function(){this.portal=new _753.Portal(this.portalConfiguration.url);},initListeners:function(){_752.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.GET_INSTANCE,lang.hitch(this,this.handleGetPortalInstance));_752.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.LOG_IN,lang.hitch(this,this.handlePortalLogIn));_752.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.LOG_OUT,lang.hitch(this,this.handlePortalLogOut));_752.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.IS_USER_LOGGED_IN,lang.hitch(this,this.handleIsUserLoggedIn));},handleIsUserLoggedIn:function(_756){if(_756!=null&&lang.isFunction(_756)){_756(this.portal&&this.portal.getPortalUser()!=null);}},handlePortalLogOut:function(){this.portal.signOut();_752.publish(VIEWER_GLOBALS.EVENTS.PORTAL.USER_LOGGED_OUT);},handlePortalLogIn:function(_757){this.portal.signIn().then(lang.hitch(this,function(user){_752.publish(VIEWER_GLOBALS.EVENTS.PORTAL.USER_LOGGED_IN,user);if(_757!=null&&lang.isFunction(_757)){_757(user);}}));},loadViewerConfigurationData:function(){var _758;_752.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"portal",function(_759){_758=_759;});this.portalConfiguration=_758;},handleGetPortalInstance:function(_75a){if(_75a!=null&&lang.isFunction(_75a)){_75a(this.portal);}},createPortalSearcher:function(){this.portalSearcher=new _755();}});});},"dojox/sql/_crypto":function(){define("dojox/sql/_crypto",["dijit","dojo","dojox"],function(_75b,dojo,_75c){dojo.provide("dojox.sql._crypto");dojo.mixin(_75c.sql._crypto,{_POOL_SIZE:100,encrypt:function(_75d,_75e,_75f){this._initWorkerPool();var msg={plaintext:_75d,password:_75e};msg=dojo.toJson(msg);msg="encr:"+String(msg);this._assignWork(msg,_75f);},decrypt:function(_760,_761,_762){this._initWorkerPool();var msg={ciphertext:_760,password:_761};msg=dojo.toJson(msg);msg="decr:"+String(msg);this._assignWork(msg,_762);},_initWorkerPool:function(){if(!this._manager){try{this._manager=google.gears.factory.create("beta.workerpool","1.0");this._unemployed=[];this._employed={};this._handleMessage=[];var self=this;this._manager.onmessage=function(msg,_763){var _764=self._employed["_"+_763];self._employed["_"+_763]=undefined;self._unemployed.push("_"+_763);if(self._handleMessage.length){var _765=self._handleMessage.shift();self._assignWork(_765.msg,_765.callback);}_764(msg);};var _766="function _workerInit(){"+"gearsWorkerPool.onmessage = "+String(this._workerHandler)+";"+"}";var code=_766+" _workerInit();";for(var i=0;i<this._POOL_SIZE;i++){this._unemployed.push("_"+this._manager.createWorker(code));}}catch(exp){throw exp.message||exp;}}},_assignWork:function(msg,_767){if(!this._handleMessage.length&&this._unemployed.length){var _768=this._unemployed.shift().substring(1);this._employed["_"+_768]=_767;this._manager.sendMessage(msg,parseInt(_768,10));}else{this._handleMessage={msg:msg,callback:_767};}},_workerHandler:function(msg,_769){var Sbox=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22];var Rcon=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]];function _76a(_76b,w){var Nb=4;var Nr=w.length/Nb-1;var _76c=[[],[],[],[]];for(var i=0;i<4*Nb;i++){_76c[i%4][Math.floor(i/4)]=_76b[i];}_76c=_76d(_76c,w,0,Nb);for(var _76e=1;_76e<Nr;_76e++){_76c=_76f(_76c,Nb);_76c=_770(_76c,Nb);_76c=_771(_76c,Nb);_76c=_76d(_76c,w,_76e,Nb);}_76c=_76f(_76c,Nb);_76c=_770(_76c,Nb);_76c=_76d(_76c,w,Nr,Nb);var _772=new Array(4*Nb);for(var i=0;i<4*Nb;i++){_772[i]=_76c[i%4][Math.floor(i/4)];}return _772;};function _76f(s,Nb){for(var r=0;r<4;r++){for(var c=0;c<Nb;c++){s[r][c]=Sbox[s[r][c]];}}return s;};function _770(s,Nb){var t=new Array(4);for(var r=1;r<4;r++){for(var c=0;c<4;c++){t[c]=s[r][(c+r)%Nb];}for(var c=0;c<4;c++){s[r][c]=t[c];}}return s;};function _771(s,Nb){for(var c=0;c<4;c++){var a=new Array(4);var b=new Array(4);for(var i=0;i<4;i++){a[i]=s[i][c];b[i]=s[i][c]&128?s[i][c]<<1^283:s[i][c]<<1;}s[0][c]=b[0]^a[1]^b[1]^a[2]^a[3];s[1][c]=a[0]^b[1]^a[2]^b[2]^a[3];s[2][c]=a[0]^a[1]^b[2]^a[3]^b[3];s[3][c]=a[0]^b[0]^a[1]^a[2]^b[3];}return s;};function _76d(_773,w,rnd,Nb){for(var r=0;r<4;r++){for(var c=0;c<Nb;c++){_773[r][c]^=w[rnd*4+c][r];}}return _773;};function _774(key){var Nb=4;var Nk=key.length/4;var Nr=Nk+6;var w=new Array(Nb*(Nr+1));var temp=new Array(4);for(var i=0;i<Nk;i++){var r=[key[4*i],key[4*i+1],key[4*i+2],key[4*i+3]];w[i]=r;}for(var i=Nk;i<(Nb*(Nr+1));i++){w[i]=new Array(4);for(var t=0;t<4;t++){temp[t]=w[i-1][t];}if(i%Nk==0){temp=_775(_776(temp));for(var t=0;t<4;t++){temp[t]^=Rcon[i/Nk][t];}}else{if(Nk>6&&i%Nk==4){temp=_775(temp);}}for(var t=0;t<4;t++){w[i][t]=w[i-Nk][t]^temp[t];}}return w;};function _775(w){for(var i=0;i<4;i++){w[i]=Sbox[w[i]];}return w;};function _776(w){w[4]=w[0];for(var i=0;i<4;i++){w[i]=w[i+1];}return w;};function _777(_778,_779,_77a){if(!(_77a==128||_77a==192||_77a==256)){return "";}var _77b=_77a/8;var _77c=new Array(_77b);for(var i=0;i<_77b;i++){_77c[i]=_779.charCodeAt(i)&255;}var key=_76a(_77c,_774(_77c));key=key.concat(key.slice(0,_77b-16));var _77d=16;var _77e=new Array(_77d);var _77f=(new Date()).getTime();for(var i=0;i<4;i++){_77e[i]=(_77f>>>i*8)&255;}for(var i=0;i<4;i++){_77e[i+4]=(_77f/4294967296>>>i*8)&255;}var _780=_774(key);var _781=Math.ceil(_778.length/_77d);var _782=new Array(_781);for(var b=0;b<_781;b++){for(var c=0;c<4;c++){_77e[15-c]=(b>>>c*8)&255;}for(var c=0;c<4;c++){_77e[15-c-4]=(b/4294967296>>>c*8);}var _783=_76a(_77e,_780);var _784=b<_781-1?_77d:(_778.length-1)%_77d+1;var ct="";for(var i=0;i<_784;i++){var _785=_778.charCodeAt(b*_77d+i);var _786=_785^_783[i];ct+=String.fromCharCode(_786);}_782[b]=_787(ct);}var _788="";for(var i=0;i<8;i++){_788+=String.fromCharCode(_77e[i]);}_788=_787(_788);return _788+"-"+_782.join("-");};function _789(_78a,_78b,_78c){if(!(_78c==128||_78c==192||_78c==256)){return "";}var _78d=_78c/8;var _78e=new Array(_78d);for(var i=0;i<_78d;i++){_78e[i]=_78b.charCodeAt(i)&255;}var _78f=_774(_78e);var key=_76a(_78e,_78f);key=key.concat(key.slice(0,_78d-16));var _790=_774(key);_78a=_78a.split("-");var _791=16;var _792=new Array(_791);var _793=_794(_78a[0]);for(var i=0;i<8;i++){_792[i]=_793.charCodeAt(i);}var _795=new Array(_78a.length-1);for(var b=1;b<_78a.length;b++){for(var c=0;c<4;c++){_792[15-c]=((b-1)>>>c*8)&255;}for(var c=0;c<4;c++){_792[15-c-4]=((b/4294967296-1)>>>c*8)&255;}var _796=_76a(_792,_790);_78a[b]=_794(_78a[b]);var pt="";for(var i=0;i<_78a[b].length;i++){var _797=_78a[b].charCodeAt(i);var _798=_797^_796[i];pt+=String.fromCharCode(_798);}_795[b-1]=pt;}return _795.join("");};function _787(str){return str.replace(/[\0\t\n\v\f\r\xa0!-]/g,function(c){return "!"+c.charCodeAt(0)+"!";});};function _794(str){return str.replace(/!\d\d?\d?!/g,function(c){return String.fromCharCode(c.slice(1,-1));});};function _799(_79a,_79b){return _777(_79a,_79b,256);};function _79c(_79d,_79e){return _789(_79d,_79e,256);};var cmd=msg.substr(0,4);var arg=msg.substr(5);if(cmd=="encr"){arg=eval("("+arg+")");var _79f=arg.plaintext;var _7a0=arg.password;var _7a1=_799(_79f,_7a0);gearsWorkerPool.sendMessage(String(_7a1),_769);}else{if(cmd=="decr"){arg=eval("("+arg+")");var _7a2=arg.ciphertext;var _7a0=arg.password;var _7a1=_79c(_7a2,_7a0);gearsWorkerPool.sendMessage(String(_7a1),_769);}}}});});},"esriviewer/ui/layers/base/model/UserPersistedLayersListViewModel":function(){define("esriviewer/ui/layers/base/model/UserPersistedLayersListViewModel",["dojo/_base/declare","dojo/topic","dojo/Evented"],function(_7a3,_7a4,_7a5){return _7a3([_7a5],{CLEAR_USER_PERSISTED_LAYERS:"clearUserPersistedLayers",REMOVE_USER_PERSISTED_LAYER:"removeUserPersistedLayer",ADD_USER_PERSISTED_LAYER_TO_MAP:"addUserPersistedLayerToMap",constructor:function(){var self=this;this.addedUserPersistedLayers=ko.observableArray();this.removeUserPersistedLayer=function(_7a6){if(_7a6==null){return;}self.emit(self.REMOVE_USER_PERSISTED_LAYER,_7a6);self.addedUserPersistedLayers.remove(_7a6);};this.addPersistedLayerToMap=function(_7a7){if(_7a7==null){return;}self.emit(self.ADD_USER_PERSISTED_LAYER_TO_MAP,_7a7);};this.hasEntries=ko.computed(function(){return self.addedUserPersistedLayers().length>0;});},sort:function(){this.addedUserPersistedLayers.sort(function(left,_7a8){var _7a9=left.name.toLowerCase();var _7aa=_7a8.name.toLowerCase();return _7a9==_7aa?0:(_7a9<_7aa?-1:1);});},clearEntries:function(){this.addedUserPersistedLayers.removeAll();this.emit(this.CLEAR_USER_PERSISTED_LAYERS);}});});},"esriviewer/manager/base/ViewerManagerUI":function(){define("esriviewer/manager/base/ViewerManagerUI",["dojo/_base/declare","dojo/_base/lang","dojo/on","dojo/topic","./../../ui/user/location/UserLocationWidget","../../ui/footer/FooterTogglerWidget","../../ui/header/HeaderLogo","../../ui/messaging/MessagingWidget","../../ui/navigation/NavigationWidget","../../ui/throbber/ThrobberWidget","dojo/Evented"],function(_7ab,lang,on,_7ac,_7ad,_7ae,_7af,_7b0,_7b1,_7b2,_7b3){return _7ab([_7b3],{FINALIZE_UI_LOAD_COMPLETE:"finalizeUILoadComplete",loadUI:function(){this._createLoggingWidget();this._createMessagingWidget();var _7b4=true;if(lang.isObject(this.viewerConfig.header)){if(this.viewerConfig.header.display!=null){_7b4=!(String(this.viewerConfig.header.display).toLowerCase()=="false");}}if(_7b4){this._createHeaderLogo();}this._createIdentifyWidget();this._createMeasureWidget();this._createQueryBuilderWidget();this._createReverseGeocodeWidget();this.createFooterWidget();this._createConfigureViewerWidget();this._createDrawWidget();this._createLegendWidget();this._createReflectivityWidget();this._createViewerMainToolbar();this.createViewerDefaultTools();this._createNavigationToolbar();this._createWeatherWidget();this._createTimeSliderWidget();this._createFeatureEditorWidget();this._createSocialMediaWidget();this._createPrintWidget();this._createZoomToWidget();this._createZoomToUserLocationWidget();this._createLayersTransparencyWidget();this._createViewerAccordion();this._createPortalPublisherWidget();this._createPlottingWidget();this.finalizeUILoad();},finalizeUILoad:function(){if(this.viewerAccordion!=null){this.viewerAccordion.startup();var _7b5=true;}if(this.bookmarkController!=null){this._loadBookmarks();}this.createThrobberWidget();this.emit(this.FINALIZE_UI_LOAD_COMPLETE);},_createHeaderLogo:function(){this.headerLogo=new _7af();_7ac.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.HEADER,this.headerLogo);},_createIdentifyWidget:function(){if(this.viewerConfig.identifyWidget!=null&&lang.isObject(this.viewerConfig.identifyWidget)&&this.viewerConfig.identifyWidget.create!=null&&this.viewerConfig.identifyWidget.create==true){this.createIdentifyWidget();}},createIdentifyWidget:function(){},_createMeasureWidget:function(){if(this.viewerConfig.geometryServiceUrl!=null&&this.viewerConfig.geometryServiceUrl){if(this.viewerConfig.measureWidget==null||(lang.isObject(this.viewerConfig.measureWidget)&&this.viewerConfig.measureWidget.create!=false)){this.createMeasureWidget();}}},createMeasureWidget:function(){},_createPrintWidget:function(){if(this.viewerConfig.printWidget==null||(lang.isObject(this.viewerConfig.printWidget)&&this.viewerConfig.printWidget.create!=null&&this.viewerConfig.printWidget.create&&this.viewerConfig.printWidget.printTaskUrl!=null)){this.createPrintWidget();}},createPrintWidget:function(){},_createSocialMediaWidget:function(){if(this.viewerConfig.socialMediaWidget==null||(lang.isObject(this.viewerConfig.socialMediaWidget)&&this.viewerConfig.socialMediaWidget.create!=null&&this.viewerConfig.socialMediaWidget.create)){this.createSocialMediaWidget();}},createSocialMediaWidget:function(){},_createFeatureEditorWidget:function(){if(this.viewerConfig.featureEditorWidget!=null&&this.viewerConfig.featureEditorWidget.service!=null&&this.viewerConfig.featureEditorWidget.service.url!=""){this.createFeatureEditorWidget();}},createFeatureEditorWidget:function(){},_createZoomToUserLocationWidget:function(){if(navigator&&navigator.geolocation&&this.viewerConfig.zoomToUserLocationWidget!=null&&lang.isObject(this.viewerConfig.zoomToUserLocationWidget)&&this.viewerConfig.zoomToUserLocationWidget.create===true){this.createZoomToUserLocationWidget();}},createZoomToUserLocationWidget:function(){this.userLocationWidget=new _7ad();_7ac.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.USER_LOCATION,this.userLocationWidget);},_createZoomToWidget:function(){if(this.viewerConfig.zoomToWidget==null||(lang.isObject(this.viewerConfig.zoomToWidget)&&this.viewerConfig.zoomToWidget.create!=null&&this.viewerConfig.zoomToWidget.create)){this.createZoomToWidget();}},createZoomToWidget:function(){},_createTimeSliderWidget:function(){if(!this.forceHideCoreTimeSlider&&(this.viewerConfig.timeSliderWidget!=null&&this.viewerConfig.timeSliderWidget.create!=false)){this.createTimeSliderWidget();}},createTimeSliderWidget:function(){},_createLayersTransparencyWidget:function(){if(this.viewerConfig.layersTransparencyWidget==null||(lang.isObject(this.viewerConfig.layersTransparencyWidget)&&this.viewerConfig.layersTransparencyWidget.create!=null&&this.viewerConfig.layersTransparencyWidget.create)){this.createLayersTransparencyWidget();}},createLayersTransparencyWidget:function(){},_createConfigureViewerWidget:function(){if(this.viewerConfig.configureWidget==null||this.viewerConfig.configureWidget.create==null||this.viewerConfig.configureWidget.create==true){this.createConfigureViewerWidget();}},createConfigureViewerWidget:function(){},_createReverseGeocodeWidget:function(){if(this.viewerConfig.reverseGeocodeWidget==null||this.viewerConfig.reverseGeocodeWidget.create==null||this.viewerConfig.reverseGeocodeWidget.create==true){if(this.viewerConfig.locators!=null&&lang.isArray(this.viewerConfig.locators)&&this.viewerConfig.locators.length>0){this.createReverseGeocodeWidget();}}},createReverseGeocodeWidget:function(){},_createQueryBuilderWidget:function(){if(this.viewerConfig.queryBuilder&&this.viewerConfig.queryBuilder.create!=null&&this.viewerConfig.queryBuilder.create){this.createQueryBuilderWidget();}},createQueryBuilderWidget:function(){},_createWeatherWidget:function(){if(lang.isObject(this.viewerConfig.weatherWidget)&&this.viewerConfig.weatherWidget.create!=null&&this.viewerConfig.weatherWidget.create==true){this.createWeatherWidget();}},createWeatherWidget:function(){},_createPlottingWidget:function(){if(lang.isObject(this.viewerConfig.plottingWidget)&&this.viewerConfig.plottingWidget.create!=null&&this.viewerConfig.plottingWidget.create==true){this.createPlottingWidget();}},createPlottingWidget:function(){},_createPortalPublisherWidget:function(){if(this.viewerConfig.portal!=null&&lang.isObject(this.viewerConfig.portal)&&this.viewerConfig.portal.url){if(this.viewerConfig.portalPublisher&&this.viewerConfig.portalPublisher.window&&this.viewerConfig.portalPublisher.window.create){this.createPortalPublisherWidget();}}},createPortalPublisherWidget:function(){},createFooterWidget:function(){var _7b6=false;if(lang.isObject(this.viewerConfig.footerTogglerWidget)){if(this.viewerConfig.footerTogglerWidget.create!=null){_7b6=!(String(this.viewerConfig.footerTogglerWidget.create).toLowerCase()=="false");}}if(_7b6){this.footerTogglerWidget=new _7ae();this.footerTogglerWidget.on("firstFooterShow",lang.hitch(this,this.handleFirstFooterShow));_7ac.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.FOOTER,this.footerTogglerWidget);}},handleFirstFooterShow:function(){},_createLoggingWidget:function(){if(this.viewerConfig.logging&&this.viewerConfig.logging.window&&this.viewerConfig.logging.window.create){this.createLoggingWidget();}},createLoggingWidget:function(){},_createMessagingWidget:function(){this.messagingWidget=new _7b0();_7ac.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MESSAGING,this.messagingWidget);},createThrobberWidget:function(){this.loadingThrobber=new _7b2();_7ac.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.THROBBER,this.loadingThrobber);},_createReflectivityWidget:function(){if(this.viewerConfig.reflectivityWidget!=null&&lang.isObject(this.viewerConfig.reflectivityWidget)&&this.viewerConfig.reflectivityWidget.create==true){this.createReflectivityWidget();}},createReflectivityWidget:function(){},_createLegendWidget:function(){if(this.viewerConfig.map.legend==null||this.viewerConfig.map.legend.create==true){this.createLegendWidget();}},createLegendWidget:function(){},_createNavigationToolbar:function(){this.createNavigationToolbar();if(this.navigationToolbar){_7ac.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.NAVIGATION_TOOLBAR,this.navigationToolbar);}this.processNavigationToolbarAddons();},createNavigationToolbar:function(){this.navigationToolbar=new _7b1();},_createDrawWidget:function(){if(this.viewerConfig.drawWidget==null||!lang.isObject(this.viewerConfig.drawWidget)||this.viewerConfig.drawWidget.create==null||this.viewerConfig.drawWidget.create!=false){this.createDrawWidget();}},createDrawWidget:function(){}});});},"esriviewer/ui/measure/model/MeasureWidgetViewModel":function(){define("esriviewer/ui/measure/model/MeasureWidgetViewModel",["dojo/_base/declare","esri/tasks/GeometryService"],function(_7b7,_7b8){return _7b7([],{constructor:function(){this.areaMeasurementUnits=ko.observableArray([{label:"Acres",value:_7b8.UNIT_ACRES},{label:"Sq Miles",value:_7b8.UNIT_SQUARE_MILES},{label:"Sq Kilometers",value:_7b8.UNIT_SQUARE_KILOMETERS},{label:"Hectares",value:_7b8.UNIT_HECTARES},{label:"Sq Yards",value:_7b8.UNIT_SQUARE_YARDS},{label:"Sq Feet",value:_7b8.UNIT_SQUARE_FEET},{label:"Sq Meters",value:_7b8.UNIT_SQUARE_METERS}]);this.distanceMeasurementUnits=ko.observableArray([{label:"Miles",value:_7b8.UNIT_STATUTE_MILE},{label:"Kilometers",value:_7b8.UNIT_KILOMETER},{label:"Feet",value:_7b8.UNIT_FOOT},{label:"Meters",value:_7b8.UNIT_METER}]);this.locationUnits=ko.observableArray([{label:"Degrees",value:VIEWER_GLOBALS.ESRI_UNITS.DECIMAL_DEGREES},{label:"DMS",value:VIEWER_GLOBALS.ESRI_UNITS.DEGREE_MINUTE_SECONDS}]);this.measureMethodText=ko.observable("");this.unitsText=ko.observable("");this.resultsText=ko.observable("");this.selectedAreaUnits=ko.observable("");this.selectedDistanceUnits=ko.observable("");this.selectedLocationUnits=ko.observable("");this.areaActive=ko.observable(false);this.distanceActive=ko.observable(false);this.locationActive=ko.observable(false);this.measurementResult=ko.observable("");},handleAreaButtonClick:function(){var _7b9=this.areaActive();this.areaActive(!_7b9);this.distanceActive(false);this.locationActive(false);},handleDistanceButtonClick:function(){var _7ba=this.distanceActive();this.distanceActive(!_7ba);this.areaActive(false);this.locationActive(false);},handleLocationButtonClick:function(){var _7bb=this.locationActive();this.locationActive(!_7bb);this.areaActive(false);this.distanceActive(false);},getLabelForDistanceValue:function(_7bc){var _7bd=this.distanceMeasurementUnits();for(var i=0;i<_7bd.length;i++){if(_7bd[i].value==_7bc){return _7bd[i].label;}}return "Unknown";},getLabelForLocationValue:function(_7be){var _7bf=this.locationUnits();for(var i=0;i<_7bf.length;i++){if(_7bf[i].value==_7be){return _7bf[i].label;}}return "Unknown";},getLabelForAreaValue:function(_7c0){var _7c1=this.areaMeasurementUnits();for(var i=0;i<_7c1.length;i++){if(_7c1[i].value==_7c0){return _7c1[i].label;}}return "Unknown";}});});},"esriviewer/ui/weather/reflectivity/ReflectivityWidgetWindow":function(){define("esriviewer/ui/weather/reflectivity/ReflectivityWidgetWindow",["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/window","dojo/dom-style","../../window/WindowWidget"],function(_7c2,lang,_7c3,_7c4,_7c5,_7c6){return _7c2([_7c6],{defaultPositioning:{x:400,y:125},windowWidth:"300px",windowHeaderText:"NEXRAD Reflectance",windowIconAltText:"Alt Text",windowIconClass:"commonIcons16 weather",positioningParamName:"reflectance",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/weather/reflectivity/ReflectivityWidget"],lang.hitch(this,function(_7c7){this.reflectivityWidget=new _7c7();this.setContent(this.reflectivityWidget.domNode);if(this.reflectivityWidget){this.reflectivityWidget.showWmsLayer();}}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_7c3.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REFLECTIVITY.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_7c3.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REFLECTIVITY.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_7c3.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REFLECTIVITY.TOGGLE,lang.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.reflectivityWidget&&this.reflectivityWidget){this.reflectivityWidget.hideWmsLayer();}},show:function(){this.inherited(arguments);if(this.reflectivityWidget){this.reflectivityWidget.showWmsLayer();}}});});},"esri/dijit/Scalebar":function(){define("esri/dijit/Scalebar",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/query","esri/kernel","esri/lang","esri/domUtils","esri/units","esri/SpatialReference","esri/WKIDUnitConversion","esri/geometry/Point","esri/geometry/ScreenPoint","esri/geometry/Polyline","esri/geometry/geodesicUtils","esri/geometry/webMercatorUtils","esri/geometry/screenUtils","esri/geometry/normalizeUtils"],function(_7c8,lang,_7c9,conn,_7ca,_7cb,_7cc,_7cd,has,_7ce,_7cf,_7d0,_7d1,_7d2,_7d3,_7d4,_7d5,_7d6,_7d7,_7d8,_7d9,_7da,_7db){var _7dc=_7c8(null,{declaredClass:"esri.dijit.Scalebar",map:null,mapUnit:null,scalebarUnit:null,unitsDictionary:[],domNode:null,screenPt1:null,screenPt2:null,constructor:function(_7dd,_7de){this.metricScalebar=_7cb.create("div",{innerHTML:"<div class='esriScaleLabelDiv'><div class='esriScalebarLabel esriScalebarLineLabel esriScalebarSecondNumber'></div></div><div class='esriScalebarLine esriScalebarMetricLine'></div>"});this.englishScalebar=_7cb.create("div",{innerHTML:"<div class='esriScalebarLine esriScalebarEnglishLine'></div><div class='esriScaleLabelDiv'><div class='esriScalebarLabel esriScalebarLineLabel esriScalebarSecondNumber'></div></div>"});this.domNode=_7cb.create("div");_7dd=_7dd||{};if(!_7dd.map){return;}if(!_7dd.scalebarUnit){this.scalebarUnit="english";}else{if(_7dd.scalebarUnit!=="english"&&_7dd.scalebarUnit!=="metric"&&_7dd.scalebarUnit!=="dual"){return;}else{this.scalebarUnit=_7dd.scalebarUnit;}}if(!_7dd.scalebarStyle){this.scalebarStyle="ruler";}else{if(_7dd.scalebarStyle!=="ruler"&&_7dd.scalebarStyle!=="line"){return;}else{this.scalebarStyle=_7dd.scalebarStyle;}}this.background=_7dd.background;switch(this.scalebarUnit){case "english":if(this.scalebarStyle==="ruler"){this.englishScalebar.innerHTML="<div class='esriScalebarRuler'><div class='esriScalebarRulerBlock upper_firstpiece'></div><div class='esriScalebarRulerBlock upper_secondpiece'></div><div class='esriScalebarRulerBlock lower_firstpiece'></div><div class='esriScalebarRulerBlock lower_secondpiece'></div></div><div class='scaleLabelDiv'><div class='esriScalebarLabel' style='left: -3%'>0</div><div class='esriScalebarLabel esriScalebarFirstNumber'></div><div class='esriScalebarLabel esriScalebarSecondNumber'></div></div>";}this.domNode.appendChild(this.englishScalebar);break;case "metric":if(this.scalebarStyle==="ruler"){this.metricScalebar.innerHTML="<div class='esriScalebarRuler'><div class='esriScalebarRulerBlock upper_firstpiece'></div><div class='esriScalebarRulerBlock upper_secondpiece'></div><div class='esriScalebarRulerBlock lower_firstpiece'></div><div class='esriScalebarRulerBlock lower_secondpiece'></div></div><div class='scaleLabelDiv'><div class='esriScalebarLabel' style='left: -3%'>0</div><div class='esriScalebarLabel esriScalebarFirstNumber'></div><div class='esriScalebarLabel esriScalebarSecondNumber'></div></div>";}this.domNode.appendChild(this.metricScalebar);break;case "dual":this.domNode.appendChild(this.metricScalebar);this.domNode.appendChild(this.englishScalebar);break;}this.map=_7dd.map;if(_7de){_7de.appendChild(this.domNode);}else{this.map.container.appendChild(this.domNode);if(_7dd.attachTo){_7ca.add(this.domNode,"scalebar_"+_7dd.attachTo);}else{_7ca.add(this.domNode,"scalebar_bottom-left");}}_7ca.add(this.domNode,"esriScalebar");if(this.map.loaded){this._getDistance(this.map.extent);this._checkBingMaps();}else{var _7df=conn.connect(this.map,"onLoad",this,function(){conn.disconnect(_7df);_7df=null;this._getDistance(this.map.extent);this._checkBingMaps();});}this._mapOnPan=conn.connect(this.map,"onPan",this,this._getDistance);this._mapOnExtentChange=conn.connect(this.map,"onExtentChange",this,this._getDistance);_7c9.forEach(this.map.layerIds,function(_7e0,idx){if(this.map.getLayer(_7e0).declaredClass==="esri.virtualearth.VETiledLayer"){conn.connect(this.map.getLayer(_7e0),"onVisibilityChange",lang.hitch(this,function(_7e1){this._checkBingMaps();}));}},this);this._mapOnLayerAdd=conn.connect(this.map,"onLayerAdd",lang.hitch(this,function(_7e2){if(_7e2.declaredClass==="esri.virtualearth.VETiledLayer"){conn.connect(_7e2,"onVisibilityChange",lang.hitch(this,function(_7e3){this._checkBingMaps();}));}this._checkBingMaps();}));this._mapOnLayerRemove=conn.connect(this.map,"onLayerRemove",lang.hitch(this,this._checkBingMaps));},hide:function(){this._hidden=true;_7d1.hide(this.domNode);},show:function(){this._hidden=false;_7d1.show(this.domNode);},destroy:function(){conn.disconnect(this._mapOnPan);conn.disconnect(this._mapOnExtentChange);conn.disconnect(this._mapOnLayerAdd);conn.disconnect(this._mapOnLayerRemove);this.hide();this.map=null;_7cb.destroy(this.domNode);},_checkBingMaps:function(){if(_7ca.contains(this.domNode,"scalebar_bottom-left")){_7cd.set(this.domNode,"left","25px");_7c9.forEach(this.map.layerIds,function(_7e4,idx){if(this.map.getLayer(_7e4).declaredClass==="esri.virtualearth.VETiledLayer"&&this.map.getLayer(_7e4).visible){var _7e5="95px";if(this.map._mapParams.nav){_7e5="115px";}_7cd.set(this.domNode,"left",_7e5);}},this);}},_getDistance:function(_7e6){var _7e7=_7cc.position(this.domNode,true);var _7e8=_7e7.y-this.map.position.y;_7e8=(_7e8>this.map.height)?this.map.height:_7e8;_7e8=(_7e8<0)?0:_7e8;var _7e9=new _7d6(0,_7e8);var _7ea=new _7d6(this.map.width,_7e8);var _7eb,_7ec,_7ed,_7ee;this.mapUnit="esriDecimalDegrees";var pt1=_7da.toMapPoint(_7e6,this.map.width,this.map.height,_7e9);var pt2=_7da.toMapPoint(_7e6,this.map.width,this.map.height,_7ea);var _7ef=new _7d5(_7e6.xmin,(_7e6.ymin+_7e6.ymax)/2,this.map.spatialReference);var _7f0=new _7d5(_7e6.xmax,(_7e6.ymin+_7e6.ymax)/2,this.map.spatialReference);if(this.map.spatialReference.wkid===3857||this.map.spatialReference.wkid===102100||this.map.spatialReference.wkid===102113||(this.map.spatialReference.wkt&&this.map.spatialReference.wkt.indexOf("WGS_1984_Web_Mercator")!=-1)){pt1=_7d9.webMercatorToGeographic(pt1,true);pt2=_7d9.webMercatorToGeographic(pt2,true);_7ef=_7d9.webMercatorToGeographic(_7ef,true);_7f0=_7d9.webMercatorToGeographic(_7f0,true);}else{if(_7d0.isDefined(_7d4[this.map.spatialReference.wkid])||(this.map.spatialReference.wkt&&this.map.spatialReference.wkt.indexOf("PROJCS")===0)){this.mapUnit="linearUnit";_7eb=Math.abs(_7e6.xmax-_7e6.xmin);var _7f1;if(_7d0.isDefined(_7d4[this.map.spatialReference.wkid])){_7f1=_7d4.values[_7d4[this.map.spatialReference.wkid]];}else{var wkt=this.map.spatialReference.wkt;var _7f2=wkt.lastIndexOf(",")+1;var end=wkt.lastIndexOf("]]");_7f1=parseFloat(wkt.substring(_7f2,end));}_7eb*=_7f1;_7ee=_7eb/1609;_7ed=_7eb/1000;_7eb/=1000;}}if(this.mapUnit==="esriDecimalDegrees"){var line=new _7d7(new _7d3({wkid:4326}));line.addPath([pt1,pt2]);var _7f3=_7db._straightLineDensify(line,10);_7eb=_7d8.geodesicLengths([_7f3],_7d2.KILOMETERS)[0];var _7f4=new _7d7(new _7d3({wkid:4326}));_7f4.addPath([_7ef,_7f0]);var _7f5=_7db._straightLineDensify(_7f4,10);_7ec=_7d8.geodesicLengths([_7f5],_7d2.KILOMETERS)[0];_7ee=_7eb/1.609;_7ec/=1.609;_7ed=_7eb;}if(this.scalebarUnit==="english"){this._getScaleBarLength(_7ee,"mi");}else{if(this.scalebarUnit==="metric"){this._getScaleBarLength(_7ed,"km");}else{if(this.scalebarUnit==="dual"){this._getScaleBarLength(_7ee,"mi");this._getScaleBarLength(_7ed,"km");}}}},_getScaleBarLength:function(_7f6,unit){var _7f7=50;var _7f8=_7f7*_7f6/this.map.width;var i=0;var _7f9=unit;if(_7f8<0.1){if(unit==="mi"){_7f8*=5280;_7f9="ft";}else{if(unit==="km"){_7f8*=1000;_7f9="m";}}}while(_7f8>=1){_7f8/=10;i++;}var _7fa,_7fb;if(_7f8>0.5){_7fa=1;_7fb=0.5;}else{if(_7f8>0.3){_7fa=0.5;_7fb=0.3;}else{if(_7f8>0.2){_7fa=0.3;_7fb=0.2;}else{if(_7f8>0.15){_7fa=0.2;_7fb=0.15;}else{if(_7f8>0.1){_7fa=0.15;_7fb=0.1;}}}}}var _7fc=((_7fa/_7f8)>=(_7f8/_7fb))?_7fb:_7fa;var _7fd=_7fc/_7f8;var _7fe=_7f7*_7fd;var _7ff=Math.pow(10,i)*_7fc;this._drawScaleBar(_7fe,_7ff,_7f9);},_drawScaleBar:function(_800,_801,_802){var _803=2*Math.round(_800),_804,_805,_806;if(_802==="mi"||_802==="ft"){this.englishScalebar.style.width=_803+"px";_804=_7ce(".esriScalebarFirstNumber",this.englishScalebar);_805=_7ce(".esriScalebarSecondNumber",this.englishScalebar);_806=_7ce(".esriScalebarMetricLineBackground",this.englishScalebar);}else{this.metricScalebar.style.width=_803+"px";_804=_7ce(".esriScalebarFirstNumber",this.metricScalebar);_805=_7ce(".esriScalebarSecondNumber",this.metricScalebar);_806=_7ce(".esriScalebarMetricLineBackground",this.metricScalebar);}_7c9.forEach(_806,function(_807,idx){_807.style.width=_803-2+"px";},this);_7c9.forEach(_804,function(_808,idx){_808.innerHTML=_801;},this);_7c9.forEach(_805,function(_809,idx){if(this.mapUnit!=="esriUnknown"){_809.innerHTML=2*_801+_802;}else{_809.innerHTML=2*_801+"Unknown Unit";}},this);}});if(has("extend-esri")){lang.setObject("dijit.Scalebar",_7dc,_7cf);}return _7dc;});},"dijit/layout/StackContainer":function(){define("dijit/layout/StackContainer",["dojo/_base/array","dojo/cookie","dojo/_base/declare","dojo/dom-class","dojo/has","dojo/_base/lang","dojo/ready","dojo/topic","../registry","../_WidgetBase","./_LayoutWidget","dojo/i18n!../nls/common"],function(_80a,_80b,_80c,_80d,has,lang,_80e,_80f,_810,_811,_812){if(has("dijit-legacy-requires")){_80e(0,function(){var _813=["dijit/layout/StackController"];require(_813);});}var _814=_80c("dijit.layout.StackContainer",_812,{doLayout:true,persist:false,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);_80d.add(this.domNode,"dijitLayoutContainer");this.containerNode.setAttribute("role","tabpanel");},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onkeypress",this._onKeyPress);},startup:function(){if(this._started){return;}var _815=this.getChildren();_80a.forEach(_815,this._setupChild,this);if(this.persist){this.selectedChildWidget=_810.byId(_80b(this.id+"_selectedChild"));}else{_80a.some(_815,function(_816){if(_816.selected){this.selectedChildWidget=_816;}return _816.selected;},this);}var _817=this.selectedChildWidget;if(!_817&&_815[0]){_817=this.selectedChildWidget=_815[0];_817.selected=true;}_80f.publish(this.id+"-startup",{children:_815,selected:_817});this.inherited(arguments);},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=true;var _818=this.selectedChildWidget;if(_818){this._showChild(_818);}}this.inherited(arguments);},_setupChild:function(_819){this.inherited(arguments);_80d.replace(_819.domNode,"dijitHidden","dijitVisible");_819.domNode.title="";},addChild:function(_81a,_81b){this.inherited(arguments);if(this._started){_80f.publish(this.id+"-addChild",_81a,_81b);this.layout();if(!this.selectedChildWidget){this.selectChild(_81a);}}},removeChild:function(page){this.inherited(arguments);if(this._started){_80f.publish(this.id+"-removeChild",page);}if(this._descendantsBeingDestroyed){return;}if(this.selectedChildWidget===page){this.selectedChildWidget=undefined;if(this._started){var _81c=this.getChildren();if(_81c.length){this.selectChild(_81c[0]);}}}if(this._started){this.layout();}},selectChild:function(page,_81d){page=_810.byId(page);if(this.selectedChildWidget!=page){var d=this._transition(page,this.selectedChildWidget,_81d);this._set("selectedChildWidget",page);_80f.publish(this.id+"-selectChild",page);if(this.persist){_80b(this.id+"_selectedChild",this.selectedChildWidget.id);}}return d;},_transition:function(_81e,_81f){if(_81f){this._hideChild(_81f);}var d=this._showChild(_81e);if(_81e.resize){if(this.doLayout){_81e.resize(this._containerContentBox||this._contentBox);}else{_81e.resize();}}return d;},_adjacent:function(_820){var _821=this.getChildren();var _822=_80a.indexOf(_821,this.selectedChildWidget);_822+=_820?1:_821.length-1;return _821[_822%_821.length];},forward:function(){return this.selectChild(this._adjacent(true),true);},back:function(){return this.selectChild(this._adjacent(false),true);},_onKeyPress:function(e){_80f.publish(this.id+"-containerKeyPress",{e:e,page:this});},layout:function(){var _823=this.selectedChildWidget;if(_823&&_823.resize){if(this.doLayout){_823.resize(this._containerContentBox||this._contentBox);}else{_823.resize();}}},_showChild:function(page){var _824=this.getChildren();page.isFirstChild=(page==_824[0]);page.isLastChild=(page==_824[_824.length-1]);page._set("selected",true);_80d.replace(page.domNode,"dijitVisible","dijitHidden");return (page._onShow&&page._onShow())||true;},_hideChild:function(page){page._set("selected",false);_80d.replace(page.domNode,"dijitHidden","dijitVisible");page.onHide&&page.onHide();},closeChild:function(page){var _825=page.onClose(this,page);if(_825){this.removeChild(page);page.destroyRecursive();}},destroyDescendants:function(_826){this._descendantsBeingDestroyed=true;this.selectedChildWidget=undefined;_80a.forEach(this.getChildren(),function(_827){if(!_826){this.removeChild(_827);}_827.destroyRecursive(_826);},this);this._descendantsBeingDestroyed=false;}});_814.ChildWidgetProperties={selected:false,disabled:false,closable:false,iconClass:"dijitNoIcon",showTitle:true};lang.extend(_811,_814.ChildWidgetProperties);return _814;});},"esriviewer/ui/window/WindowWidget":function(){require({cache:{"url:esriviewer/ui/window/template/WindowWidgetTemplate.html":"<div class=\"windowContainer defaultBorder fivePixelBorderRadius defaultBoxShadow\">\r\n    <div data-dojo-attach-point=\"windowHeader\" class=\"windowHeader\">\r\n        <div class=\"windowCloseImg windowAction close\" data-dojo-attach-point=\"windowCloseImg\"\r\n             title=\"Close\"></div>\r\n        <div class=\"windowMinimizeImg windowAction minimize\" data-dojo-attach-point=\"windowMinimizeImg\"\r\n             title=\"Minimize\"></div>\r\n        <div data-dojo-attach-point=\"headerMoverContainer\" class=\"headerMoverContainer\">\r\n            <div class=\"windowIcon ${windowIconClass}\" title=\"${windowIconAltText}\"></div>\r\n            <span class=\"windowHeaderText\">${windowHeaderText}</span>\r\n        </div>\r\n    </div>\r\n    <div class=\"windowContentOuter\" data-dojo-attach-point=\"windowContentOuter\">\r\n        <div data-dojo-attach-point=\"windowContent\" class=\"windowContent\">\r\n            <div data-dojo-attach-point=\"windowLoadingThrobber\" class=\"windowLoadingThrobber\"></div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n</div>"}});define("esriviewer/ui/window/WindowWidget",["dojo/_base/declare","dojo/text!./template/WindowWidgetTemplate.html","dojo/topic","dojo/_base/window","dojo/_base/lang","dojo/on","dojo/dom-construct","dojo/dom-class","dojo/dom-style","../base/UITemplatedWidget","dojo/dnd/Moveable","dojox/layout/ResizeHandle","dojo/_base/connect","dojo/dom-geometry"],function(_828,_829,_82a,_82b,lang,on,_82c,_82d,_82e,_82f,_830,_831,con,_832){return _828([_82f],{resizable:false,isPositionedByConfig:true,firstShow:true,showOnLoad:false,visible:false,movable:true,canMinimize:true,windowHeight:null,windowWidth:"35%",positioningParamName:"",windowHeaderText:"Window",windowIconClass:"commonIcons16 application",templateString:_829,closeWindowTitle:"Close Window",windowIconAltText:"Window",constructor:function(){this.windowTopOffset=(VIEWER_GLOBALS.WINDOW&&VIEWER_GLOBALS.WINDOW.TOP_POSITION_MOVE_OFFSET)?(VIEWER_GLOBALS.WINDOW.TOP_POSITION_MOVE_OFFSET):3;},postCreate:function(){this.inherited(arguments);_82c.place(this.domNode,_82b.body());this.visible=false;_82d.add(this.domNode,"windowHidden");if(this.movable){this.initMover();}else{_82e.set(this.windowHeader,"cursor","default");}if(this.windowHeight!=null){_82e.set(this.domNode,"height",this.windowHeight);}if(this.windowWidth!=null){_82e.set(this.domNode,"width",this.windowWidth);}if(this.resizable){var _833={targetId:this.id,activeResize:true};if(this.minWidth!=null){_833["minWidth"]=this.minWidth;}if(this.minHeight!=null){_833["minHeight"]=this.minHeight;}if(this.resizeAxis){_833["resizeAxis"]=this.resizeAxis;}this.handle=new _831(_833).placeAt(this.domNode);}if(!this.canMinimize){_82e.set(this.windowMinimizeImg,"display","none");}if(!this.showOnLoad){this.hide();}else{this.show();}},initListeners:function(){this.inherited(arguments);this.connects.push(on(this.windowCloseImg,"click",lang.hitch(this,this.hide,0)));this.connects.push(on(this.windowMinimizeImg,"click",lang.hitch(this,this.toggleContent)));this.subscribes.push(_82a.subscribe("/dojo/resize/stop",lang.hitch(this,this.handleGlobalResizeFired)));this.subscribes.push(_82a.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REPOSITION_ALL,lang.hitch(this,this.handleReposition)));},handleReposition:function(){var pos=_832.position(this.domNode);if(pos.y<this.windowTopOffset){_82e.set(this.domNode,"top",this.windowTopOffset+"px");}},handleGlobalResizeFired:function(_834){if(this.handle){if(_834.id===this.handle.id){this.onWindowResize();}}},setContent:function(_835){_82c.empty(this.windowContent);_82c.place(_835,this.windowContent);},toggle:function(){if(this.visible){this.hide();}else{this.show();}},show:function(){if(!this.visible){this.onBeforeWindowShow();_82d.remove(this.domNode,"windowHidden");this.visible=true;if(this.firstShow){this.firstShow=false;this.onFirstWindowShow();}this.onAfterWindowShow();}},hide:function(){if(this.visible){this.onBeforeWindowHide();_82d.add(this.domNode,"windowHidden");this.visible=false;this.hidePopups();this.onAfterWindowHide();}},initMover:function(){this.mover=new _830(this.domNode,{handle:this.headerMoverContainer});con.connect(this.mover,"onMove",VIEWER_UTILS,VIEWER_UTILS.handleContainerMoved);},toggleContent:function(){var _836=_82e.get(this.windowContentOuter,"display");if(_836=="none"){_82e.set(this.windowContentOuter,"display","block");_82d.remove(this.windowHeader,"windowHeaderCollapsed");_82d.add(this.windowHeader,"windowHeader");if(this.windowHeight!=null){_82e.set(this.domNode,"height",this.windowHeight);}this.onWindowExpanded();}else{_82e.set(this.windowContentOuter,"display","none");_82d.remove(this.windowHeader,"windowHeader");_82d.add(this.windowHeader,"windowHeaderCollapsed");if(this.windowHeight!=null){_82e.set(this.domNode,"height",null);}this.hidePopups();this.onWindowCollapsed();}},hidePopups:function(){},setWindowWidthFromInt:function(_837){_82e.set(this.domNode,"width",_837+"px");},onWindowExpanded:function(){},onWindowCollapsed:function(){},onWindowResize:function(){},onBeforeWindowShow:function(){},onBeforeWindowHide:function(){},onAfterWindowShow:function(){},onAfterWindowHide:function(){},onFirstWindowShow:function(){}});});},"url:esriviewer/ui/accordion/template/ToolsAccordionTemplate.html":"<div class=\"toolsAccordionContainer fivePixelBorderRadius defaultBoxShadow\">\r\n\r\n</div>","esriviewer/ui/toolbar/base/model/BookmarkListingViewModel":function(){define("esriviewer/ui/toolbar/base/model/BookmarkListingViewModel",["dojo/_base/declare","dojo/topic","dojo/Evented"],function(_838,_839,_83a){return _838([_83a],{SHOW_CREATE_BOOKMARK:"showCreateBookmark",REMOVE_BOOKMARK_REQUEST:"removeBookmarkRequest",constructor:function(){var self=this;this.showCreateBookmarkIcon=ko.observable(true);this.visible=ko.observable(false);this._removableBookmarks=ko.observableArray();this._bookmarks=ko.observableArray();this.removeClick=function(item,evt){self._removeClick(item,evt);};},handleBookmarkClick:function(_83b){if(_83b==null){return;}_839.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PAN_TO,_83b.point,{zoomLevel:_83b.zoomLevel});},addRemovableBookmark:function(_83c){if(this._removableBookmarks.indexOf(_83c)>-1){return;}this._removableBookmarks.push(_83c);this._removableBookmarks.sort(this._bookmarkSorter);},addBookmark:function(_83d){if(this._bookmarks.indexOf(_83d)>-1){return;}this._bookmarks.push(_83d);this._bookmarks.sort(this._bookmarkSorter);},_bookmarkSorter:function(left,_83e){return left.label==_83e.label?0:(left.label<_83e.label?-1:1);},showCreateBookmark:function(){this.emit(this.SHOW_CREATE_BOOKMARK);},_removeClick:function(_83f,evt){if(_83f!=null){this.emit(this.REMOVE_BOOKMARK_REQUEST,_83f,evt);}},removeBookmark:function(_840){this._removableBookmarks.remove(_840);},sortStatic:function(){this._bookmarks.sort(function(left,_841){var _842=left.label.toLowerCase();var _843=_841.label.toLowerCase();return _842==_843?0:(_842<_843?-1:1);});},sortRemovable:function(){this._removableBookmarks.sort(function(left,_844){var _845=left.label.toLowerCase();var _846=_844.label.toLowerCase();return _845==_846?0:(_845<_846?-1:1);});},sortAll:function(){this.sortRemovable();this.sortStatic();}});});},"url:esriviewer/ui/draw/configure/geometry/template/ConfigureTextTemplate.html":"<div class=\"configureDrawGeometryContainer\">\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Font Face</span>\r\n        <select data-bind=\"options: fontFaces ,value:selectedFontFace, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Text Align</span>\r\n        <select data-bind=\"options: textAligns ,value:selectedTextAlign, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Weight</span>\r\n        <select data-bind=\"options: textWeights ,value:selectedTextWeight, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Size</span>\r\n        <select data-bind=\"options: textSizes ,value:selectedTextSize, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Angle</span>\r\n        <select data-bind=\"options: angles ,value:selectedAngle\"></select>\r\n    </div>\r\n    <div class=\"configureDrawColorPickerContainer\" data-dojo-attach-point=\"colorPickerContainer\"></div>\r\n\r\n</div>","esriviewer/ui/layers/base/UserPersistedLayersListWidget":function(){require({cache:{"url:esriviewer/ui/layers/base/template/UserPersistedLayersListingTemplate.html":"<div>\r\n    <div class=\"userPersistsedLayersClearContainer\" data-bind=\"visible: hasEntries\">\r\n        <div class=\"userPersistsedLayersClearLbl\" data-bind=\"click:clearEntries\">Clear Entries</div>\r\n    </div>\r\n    <div class=\"addedUserPersistedLayersListContainer\" data-dojo-attach-point=\"addedUserPersistedGraphicsListContainer\">\r\n        <ul class=\"viewerList\" data-bind=\"foreach: addedUserPersistedLayers\">\r\n            <li class=\"graphicsListEntry\">\r\n                <div title=\"Delete Layer\" class=\"viewerListEntryRemoveIcon commonIcons16 remove\"\r\n                     data-bind=\"click:$parent.removeUserPersistedLayer\"></div>\r\n                <div title=\"Add Layer To Map\" class=\"viewerListGenericIcon commonIcons16 layerShow\"\r\n                     data-bind=\"click:$parent.addPersistedLayerToMap\"></div>\r\n                <span class=\"graphicsListEntryLabel\" data-bind=\"text: $data.name\"></span>\r\n\r\n                <div class=\"userPersistedLayersInfoIcon commonIcons16 information\"\r\n                     data-bind=\"attr:{title:$data.url}\"></div>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>"}});define("esriviewer/ui/layers/base/UserPersistedLayersListWidget",["dojo/_base/declare","dojo/text!./template/UserPersistedLayersListingTemplate.html","dojo/topic","../../base/UITemplatedWidget","dojo/_base/lang","./model/UserPersistedLayersListViewModel"],function(_847,_848,_849,_84a,lang,_84b){return _847([_84a],{bindingsApplied:false,templateString:_848,constructor:function(){this.userPersistedGraphics={};},postCreate:function(){this.inherited(arguments);this.viewModel=new _84b();this.viewModel.on(this.viewModel.REMOVE_USER_PERSISTED_LAYER,lang.hitch(this,this.handleRemoveUserPersistedLayer));this.viewModel.on(this.viewModel.ADD_USER_PERSISTED_LAYER_TO_MAP,lang.hitch(this,this.handleAddUserPersistedLayerToMap));this.viewModel.on(this.viewModel.CLEAR_USER_PERSISTED_LAYERS,lang.hitch(this,this.handleClearUserPersistedLayers));},applyBindings:function(){if(!this.bindingsApplied){this.bindingsApplied=true;ko.applyBindings(this.viewModel,this.domNode);}},handleAddUserPersistedLayerToMap:function(_84c){if(_84c==null||!lang.isObject(_84c)||_84c.url==null||_84c.url==""){return;}this.onAddUserPersistedLayerToMap(_84c.url,_84c.name);},onAddUserPersistedLayerToMap:function(_84d,_84e){},handleClearUserPersistedLayers:function(){this.onRemoveAllUserPersistedGraphics();},handleRemoveUserPersistedLayer:function(_84f){if(_84f&&lang.isObject(_84f)&&_84f.url!=null&&_84f.url!=""){this.onRemoveUserPersistedGraphics(_84f.url);}},onRemoveAllUserPersistedGraphics:function(){},onRemoveUserPersistedGraphics:function(_850){},addExistingPersistedLayerItems:function(_851){for(var key in _851){this.viewModel.addedUserPersistedLayers.push(_851[key]);}this.viewModel.sort();this.applyBindings();},addPersistedLayer:function(_852){this.viewModel.addedUserPersistedLayers.push(_852);this.viewModel.sort();}});});},"dijit/DropDownMenu":function(){require({cache:{"url:dijit/templates/Menu.html":"<table class=\"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable\" role=\"menu\" tabIndex=\"${tabIndex}\"\n\t   data-dojo-attach-event=\"onkeypress:_onKeyPress\" cellspacing=\"0\">\n\t<tbody class=\"dijitReset\" data-dojo-attach-point=\"containerNode\"></tbody>\n</table>\n"}});define("dijit/DropDownMenu",["dojo/_base/declare","dojo/_base/event","dojo/keys","dojo/text!./templates/Menu.html","./_OnDijitClickMixin","./_MenuBase"],function(_853,_854,keys,_855,_856,_857){return _853("dijit.DropDownMenu",[_857,_856],{templateString:_855,baseClass:"dijitMenu",postCreate:function(){this.inherited(arguments);var l=this.isLeftToRight();this._openSubMenuKey=l?keys.RIGHT_ARROW:keys.LEFT_ARROW;this._closeSubMenuKey=l?keys.LEFT_ARROW:keys.RIGHT_ARROW;this.connectKeyNavHandlers([keys.UP_ARROW],[keys.DOWN_ARROW]);},_onKeyPress:function(evt){if(evt.ctrlKey||evt.altKey){return;}switch(evt.charOrCode){case this._openSubMenuKey:this._moveToPopup(evt);_854.stop(evt);break;case this._closeSubMenuKey:if(this.parentMenu){if(this.parentMenu._isMenuBar){this.parentMenu.focusPrev();}else{this.onCancel(false);}}else{_854.stop(evt);}break;}}});});},"dijit/Menu":function(){define("dijit/Menu",["require","dojo/_base/array","dojo/_base/declare","dojo/_base/event","dojo/dom","dojo/dom-attr","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window","dojo/window","./popup","./DropDownMenu","dojo/ready"],function(_858,_859,_85a,_85b,dom,_85c,_85d,_85e,keys,lang,on,has,win,_85f,pm,_860,_861){if(has("dijit-legacy-requires")){_861(0,function(){var _862=["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"];_858(_862);});}return _85a("dijit.Menu",_860,{constructor:function(){this._bindings=[];},targetNodeIds:[],selector:"",contextMenuForWindow:false,leftClickToOpen:false,refocus:true,postCreate:function(){if(this.contextMenuForWindow){this.bindDomNode(this.ownerDocumentBody);}else{_859.forEach(this.targetNodeIds,this.bindDomNode,this);}this.inherited(arguments);},_iframeContentWindow:function(_863){return _85f.get(this._iframeContentDocument(_863))||this._iframeContentDocument(_863)["__parent__"]||(_863.name&&win.doc.frames[_863.name])||null;},_iframeContentDocument:function(_864){return _864.contentDocument||(_864.contentWindow&&_864.contentWindow.document)||(_864.name&&win.doc.frames[_864.name]&&win.doc.frames[_864.name].document)||null;},bindDomNode:function(node){node=dom.byId(node,this.ownerDocument);var cn;if(node.tagName.toLowerCase()=="iframe"){var _865=node,_866=this._iframeContentWindow(_865);cn=win.body(_866.document);}else{cn=(node==win.body(this.ownerDocument)?this.ownerDocument.documentElement:node);}var _867={node:node,iframe:_865};_85c.set(node,"_dijitMenu"+this.id,this._bindings.push(_867));var _868=lang.hitch(this,function(cn){var _869=this.selector,_86a=_869?function(_86b){return on.selector(_869,_86b);}:function(_86c){return _86c;},self=this;return [on(cn,_86a(this.leftClickToOpen?"click":"contextmenu"),function(evt){_85b.stop(evt);self._scheduleOpen(this,_865,{x:evt.pageX,y:evt.pageY});}),on(cn,_86a("keydown"),function(evt){if(evt.shiftKey&&evt.keyCode==keys.F10){_85b.stop(evt);self._scheduleOpen(this,_865);}})];});_867.connects=cn?_868(cn):[];if(_865){_867.onloadHandler=lang.hitch(this,function(){var _86d=this._iframeContentWindow(_865);cn=win.body(_86d.document);_867.connects=_868(cn);});if(_865.addEventListener){_865.addEventListener("load",_867.onloadHandler,false);}else{_865.attachEvent("onload",_867.onloadHandler);}}},unBindDomNode:function(_86e){var node;try{node=dom.byId(_86e,this.ownerDocument);}catch(e){return;}var _86f="_dijitMenu"+this.id;if(node&&_85c.has(node,_86f)){var bid=_85c.get(node,_86f)-1,b=this._bindings[bid],h;while((h=b.connects.pop())){h.remove();}var _870=b.iframe;if(_870){if(_870.removeEventListener){_870.removeEventListener("load",b.onloadHandler,false);}else{_870.detachEvent("onload",b.onloadHandler);}}_85c.remove(node,_86f);delete this._bindings[bid];}},_scheduleOpen:function(_871,_872,_873){if(!this._openTimer){this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:_871,iframe:_872,coords:_873});},1);}},_openMyself:function(args){var _874=args.target,_875=args.iframe,_876=args.coords;this.currentTarget=_874;if(_876){if(_875){var ifc=_85d.position(_875,true),_877=this._iframeContentWindow(_875),_878=_85d.docScroll(_877.document);var cs=_85e.getComputedStyle(_875),tp=_85e.toPixelValue,left=(has("ie")&&has("quirks")?0:tp(_875,cs.paddingLeft))+(has("ie")&&has("quirks")?tp(_875,cs.borderLeftWidth):0),top=(has("ie")&&has("quirks")?0:tp(_875,cs.paddingTop))+(has("ie")&&has("quirks")?tp(_875,cs.borderTopWidth):0);_876.x+=ifc.x+left-_878.x;_876.y+=ifc.y+top-_878.y;}}else{_876=_85d.position(_874,true);_876.x+=10;_876.y+=10;}var self=this;var _879=this._focusManager.get("prevNode");var _87a=this._focusManager.get("curNode");var _87b=!_87a||(dom.isDescendant(_87a,this.domNode))?_879:_87a;function _87c(){if(self.refocus&&_87b){_87b.focus();}pm.close(self);};pm.open({popup:this,x:_876.x,y:_876.y,onExecute:_87c,onCancel:_87c,orient:this.isLeftToRight()?"L":"R"});this.focus();this._onBlur=function(){this.inherited("_onBlur",arguments);pm.close(this);};},destroy:function(){_859.forEach(this._bindings,function(b){if(b){this.unBindDomNode(b.node);}},this);this.inherited(arguments);}});});},"dijit/form/_CheckBoxMixin":function(){define("dijit/form/_CheckBoxMixin",["dojo/_base/declare","dojo/dom-attr","dojo/_base/event"],function(_87d,_87e,_87f){return _87d("dijit.form._CheckBoxMixin",null,{type:"checkbox",value:"on",readOnly:false,_aria_attr:"aria-checked",_setReadOnlyAttr:function(_880){this._set("readOnly",_880);_87e.set(this.focusNode,"readOnly",_880);},_setLabelAttr:undefined,_getSubmitValue:function(_881){return !_881&&_881!==0?"on":_881;},_setValueAttr:function(_882){_882=this._getSubmitValue(_882);this._set("value",_882);_87e.set(this.focusNode,"value",_882);},reset:function(){this.inherited(arguments);this._set("value",this.params.value||"on");_87e.set(this.focusNode,"value",this.value);},_onClick:function(e){if(this.readOnly){_87f.stop(e);return false;}return this.inherited(arguments);}});});},"esriviewer/ui/footer/model/FooterTogglerViewModel":function(){define("esriviewer/ui/footer/model/FooterTogglerViewModel",["dojo/_base/declare"],function(_883){return _883([],{constructor:function(){this.expanded=ko.observable(false);}});});},"dijit/_Contained":function(){define("dijit/_Contained",["dojo/_base/declare","./registry"],function(_884,_885){return _884("dijit._Contained",null,{_getSibling:function(_886){var node=this.domNode;do{node=node[_886+"Sibling"];}while(node&&node.nodeType!=1);return node&&_885.byNode(node);},getPreviousSibling:function(){return this._getSibling("previous");},getNextSibling:function(){return this._getSibling("next");},getIndexInParent:function(){var p=this.getParent();if(!p||!p.getIndexOfChild){return -1;}return p.getIndexOfChild(this);}});});},"dijit/_KeyNavContainer":function(){define("dijit/_KeyNavContainer",["dojo/_base/kernel","./_Container","./_FocusMixin","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/_base/event","dojo/dom-attr","dojo/_base/lang"],function(_887,_888,_889,_88a,keys,_88b,_88c,_88d,lang){return _88b("dijit._KeyNavContainer",[_889,_888],{tabIndex:"0",connectKeyNavHandlers:function(_88e,_88f){var _890=(this._keyNavCodes={});var prev=lang.hitch(this,"focusPrev");var next=lang.hitch(this,"focusNext");_88a.forEach(_88e,function(code){_890[code]=prev;});_88a.forEach(_88f,function(code){_890[code]=next;});_890[keys.HOME]=lang.hitch(this,"focusFirstChild");_890[keys.END]=lang.hitch(this,"focusLastChild");this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus");},startupKeyNavChildren:function(){_887.deprecated("startupKeyNavChildren() call no longer needed","","2.0");},startup:function(){this.inherited(arguments);_88a.forEach(this.getChildren(),lang.hitch(this,"_startupChild"));},addChild:function(_891,_892){this.inherited(arguments);this._startupChild(_891);},focus:function(){this.focusFirstChild();},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild());},focusLastChild:function(){this.focusChild(this._getLastFocusableChild());},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1));},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),true);},focusChild:function(_893,last){if(!_893){return;}if(this.focusedChild&&_893!==this.focusedChild){this._onChildBlur(this.focusedChild);}_893.set("tabIndex",this.tabIndex);_893.focus(last?"end":"start");this._set("focusedChild",_893);},_startupChild:function(_894){_894.set("tabIndex","-1");this.connect(_894,"_onFocus",function(){_894.set("tabIndex",this.tabIndex);});this.connect(_894,"_onBlur",function(){_894.set("tabIndex","-1");});},_onContainerFocus:function(evt){if(evt.target!==this.domNode||this.focusedChild){return;}this.focusFirstChild();_88d.set(this.domNode,"tabIndex","-1");},_onBlur:function(evt){if(this.tabIndex){_88d.set(this.domNode,"tabIndex",this.tabIndex);}this.focusedChild=null;this.inherited(arguments);},_onContainerKeypress:function(evt){if(evt.ctrlKey||evt.altKey){return;}var func=this._keyNavCodes[evt.charOrCode];if(func){func();_88c.stop(evt);}},_onChildBlur:function(){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1);},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1);},_getNextFocusableChild:function(_895,dir){if(_895){_895=this._getSiblingOfChild(_895,dir);}var _896=this.getChildren();for(var i=0;i<_896.length;i++){if(!_895){_895=_896[(dir>0)?0:(_896.length-1)];}if(_895.isFocusable()){return _895;}_895=this._getSiblingOfChild(_895,dir);}return null;}});});},"esriviewer/ui/draw/configure/model/ConfigureDrawViewModel":function(){define("esriviewer/ui/draw/configure/model/ConfigureDrawViewModel",["dojo/_base/declare"],function(_897){return _897([],{pointConfigurationActive:ko.observable(true),lineConfigurationActive:ko.observable(false),rectangleConfigurationActive:ko.observable(false),polygonConfigurationActive:ko.observable(false),textConfigurationActive:ko.observable(false),showPointConfiguration:function(){this.pointConfigurationActive(true);this.lineConfigurationActive(false);this.rectangleConfigurationActive(false);this.polygonConfigurationActive(false);this.textConfigurationActive(false);},showLineConfiguration:function(){this.lineConfigurationActive(true);this.pointConfigurationActive(false);this.rectangleConfigurationActive(false);this.polygonConfigurationActive(false);this.textConfigurationActive(false);},showRectangleConfiguration:function(){this.rectangleConfigurationActive(true);this.lineConfigurationActive(false);this.pointConfigurationActive(false);this.polygonConfigurationActive(false);this.textConfigurationActive(false);},showPolygonConfiguration:function(){this.polygonConfigurationActive(true);this.rectangleConfigurationActive(false);this.lineConfigurationActive(false);this.pointConfigurationActive(false);this.textConfigurationActive(false);},showTextConfiguration:function(){this.textConfigurationActive(true);this.polygonConfigurationActive(false);this.rectangleConfigurationActive(false);this.lineConfigurationActive(false);this.pointConfigurationActive(false);}});});},"url:esriviewer/ui/measure/template/MeasureWidgetTemplate.html":"<div class=\"measurementWidget\">\r\n    <div class=\"measureIcon areaIcon\"\r\n         title=\"Area\"\r\n         data-bind=\"click:handleAreaButtonClick, css: {measurementIconSelected: areaActive}\"></div>\r\n    <div class=\"measureIcon distanceIcon\"\r\n         title=\"Distance\"\r\n         data-bind=\"click:handleDistanceButtonClick, css: {measurementIconSelected: distanceActive}\"></div>\r\n    <div class=\"measureIcon locationIcon\"\r\n         title=\"Location\"\r\n         data-bind=\"click:handleLocationButtonClick, css: {measurementIconSelected: locationActive}\"></div>\r\n    <div class=\"measurementSpacer\">|</div>\r\n    <select data-bind=\"visible: areaActive, options: areaMeasurementUnits ,value:selectedAreaUnits, optionsText: 'label', optionsValue: 'value'\">\r\n    </select>\r\n    <select data-bind=\"visible: distanceActive, options: distanceMeasurementUnits ,value:selectedDistanceUnits, optionsText: 'label', optionsValue: 'value'\">\r\n    </select>\r\n    <select data-bind=\"visible: locationActive, options: locationUnits ,value:selectedLocationUnits, optionsText: 'label', optionsValue: 'value'\">\r\n    </select>\r\n\r\n\r\n    <div class=\"measurementResultsContainer\">\r\n        <span data-bind=\"text: measureMethodText\" class=\"measureMethodText\"></span>\r\n        <span data-bind=\"text: resultsText\" class=\"measureResultsText\"></span>\r\n        <span data-bind=\"text: unitsText\"  class=\"measureUnitsText\"></span>\r\n    </div>\r\n</div>","esriviewer/ui/layers/model/LayersWidgetViewModel":function(){define("esriviewer/ui/layers/model/LayersWidgetViewModel",["dojo/_base/declare","dojo/topic","dojo/Evented"],function(_898,_899,_89a){return _898([_89a],{ADD_LAYERS_VISIBLE:"addLayersVisible",constructor:function(){this.firstAddLayersDisplay=true;this.layersListVisible=ko.observable(true);this.addlayersVisible=ko.observable(false);this.persistedLayersVisible=ko.observable(false);this.showWKIDInAddLayers=ko.observable(true);this.showUserPersistedLayersIcon=ko.observable(true);this.viewerWKID=ko.observable("");},showLayersList:function(){this.layersListVisible(true);this.addlayersVisible(false);this.persistedLayersVisible(false);},showAddLayers:function(){if(this.addlayersVisible()){return;}if(this.firstAddLayersDisplay){var _89b=null;_899.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,function(ext){_89b=ext;});if(_89b&&_89b.spatialReference&&_89b.spatialReference.wkid!=null){this.viewerWKID(_89b.spatialReference.wkid.toString());}this.firstAddLayersDisplay=false;}this.layersListVisible(false);this.addlayersVisible(true);this.persistedLayersVisible(false);this.emit(this.ADD_LAYERS_VISIBLE);},showUserPersistedLayers:function(){this.layersListVisible(false);this.addlayersVisible(false);this.persistedLayersVisible(true);}});});},"dojox/sql/_base":function(){define("dojox/sql/_base",["dijit","dojo","dojox","dojo/require!dojox/sql/_crypto"],function(_89c,dojo,_89d){dojo.provide("dojox.sql._base");dojo.require("dojox.sql._crypto");dojo.mixin(_89d.sql,{dbName:null,debug:(dojo.exists("dojox.sql.debug")?_89d.sql.debug:false),open:function(_89e){if(this._dbOpen&&(!_89e||_89e==this.dbName)){return;}if(!this.dbName){this.dbName="dot_store_"+window.location.href.replace(/[^0-9A-Za-z_]/g,"_");if(this.dbName.length>63){this.dbName=this.dbName.substring(0,63);}}if(!_89e){_89e=this.dbName;}try{this._initDb();this.db.open(_89e);this._dbOpen=true;}catch(exp){throw exp.message||exp;}},close:function(_89f){if(dojo.isIE){return;}if(!this._dbOpen&&(!_89f||_89f==this.dbName)){return;}if(!_89f){_89f=this.dbName;}try{this.db.close(_89f);this._dbOpen=false;}catch(exp){throw exp.message||exp;}},_exec:function(_8a0){try{this._initDb();if(!this._dbOpen){this.open();this._autoClose=true;}var sql=null;var _8a1=null;var _8a2=null;var args=dojo._toArray(_8a0);sql=args.splice(0,1)[0];if(this._needsEncrypt(sql)||this._needsDecrypt(sql)){_8a1=args.splice(args.length-1,1)[0];_8a2=args.splice(args.length-1,1)[0];}if(this.debug){this._printDebugSQL(sql,args);}var _8a3;if(this._needsEncrypt(sql)){_8a3=new _89d.sql._SQLCrypto("encrypt",sql,_8a2,args,_8a1);return null;}else{if(this._needsDecrypt(sql)){_8a3=new _89d.sql._SQLCrypto("decrypt",sql,_8a2,args,_8a1);return null;}}var rs=this.db.execute(sql,args);rs=this._normalizeResults(rs);if(this._autoClose){this.close();}return rs;}catch(exp){exp=exp.message||exp;if(this._autoClose){try{this.close();}catch(e){}}throw exp;}return null;},_initDb:function(){if(!this.db){try{this.db=google.gears.factory.create("beta.database","1.0");}catch(exp){dojo.setObject("google.gears.denied",true);if(_89d.off){_89d.off.onFrameworkEvent("coreOperationFailed");}throw "Google Gears must be allowed to run";}}},_printDebugSQL:function(sql,args){var msg="dojox.sql(\""+sql+"\"";for(var i=0;i<args.length;i++){if(typeof args[i]=="string"){msg+=", \""+args[i]+"\"";}else{msg+=", "+args[i];}}msg+=")";},_normalizeResults:function(rs){var _8a4=[];if(!rs){return [];}while(rs.isValidRow()){var row={};for(var i=0;i<rs.fieldCount();i++){var _8a5=rs.fieldName(i);var _8a6=rs.field(i);row[_8a5]=_8a6;}_8a4.push(row);rs.next();}rs.close();return _8a4;},_needsEncrypt:function(sql){return /encrypt\([^\)]*\)/i.test(sql);},_needsDecrypt:function(sql){return /decrypt\([^\)]*\)/i.test(sql);}});dojo.declare("dojox.sql._SQLCrypto",null,{constructor:function(_8a7,sql,_8a8,args,_8a9){if(_8a7=="encrypt"){this._execEncryptSQL(sql,_8a8,args,_8a9);}else{this._execDecryptSQL(sql,_8a8,args,_8a9);}},_execEncryptSQL:function(sql,_8aa,args,_8ab){var _8ac=this._stripCryptoSQL(sql);var _8ad=this._flagEncryptedArgs(sql,args);var self=this;this._encrypt(_8ac,_8aa,args,_8ad,function(_8ae){var _8af=false;var _8b0=[];var exp=null;try{_8b0=_89d.sql.db.execute(_8ac,_8ae);}catch(execError){_8af=true;exp=execError.message||execError;}if(exp!=null){if(_89d.sql._autoClose){try{_89d.sql.close();}catch(e){}}_8ab(null,true,exp.toString());return;}_8b0=_89d.sql._normalizeResults(_8b0);if(_89d.sql._autoClose){_89d.sql.close();}if(_89d.sql._needsDecrypt(sql)){var _8b1=self._determineDecryptedColumns(sql);self._decrypt(_8b0,_8b1,_8aa,function(_8b2){_8ab(_8b2,false,null);});}else{_8ab(_8b0,false,null);}});},_execDecryptSQL:function(sql,_8b3,args,_8b4){var _8b5=this._stripCryptoSQL(sql);var _8b6=this._determineDecryptedColumns(sql);var _8b7=false;var _8b8=[];var exp=null;try{_8b8=_89d.sql.db.execute(_8b5,args);}catch(execError){_8b7=true;exp=execError.message||execError;}if(exp!=null){if(_89d.sql._autoClose){try{_89d.sql.close();}catch(e){}}_8b4(_8b8,true,exp.toString());return;}_8b8=_89d.sql._normalizeResults(_8b8);if(_89d.sql._autoClose){_89d.sql.close();}this._decrypt(_8b8,_8b6,_8b3,function(_8b9){_8b4(_8b9,false,null);});},_encrypt:function(sql,_8ba,args,_8bb,_8bc){this._totalCrypto=0;this._finishedCrypto=0;this._finishedSpawningCrypto=false;this._finalArgs=args;for(var i=0;i<args.length;i++){if(_8bb[i]){var _8bd=args[i];var _8be=i;this._totalCrypto++;_89d.sql._crypto.encrypt(_8bd,_8ba,dojo.hitch(this,function(_8bf){this._finalArgs[_8be]=_8bf;this._finishedCrypto++;if(this._finishedCrypto>=this._totalCrypto&&this._finishedSpawningCrypto){_8bc(this._finalArgs);}}));}}this._finishedSpawningCrypto=true;},_decrypt:function(_8c0,_8c1,_8c2,_8c3){this._totalCrypto=0;this._finishedCrypto=0;this._finishedSpawningCrypto=false;this._finalResultSet=_8c0;for(var i=0;i<_8c0.length;i++){var row=_8c0[i];for(var _8c4 in row){if(_8c1=="*"||_8c1[_8c4]){this._totalCrypto++;var _8c5=row[_8c4];this._decryptSingleColumn(_8c4,_8c5,_8c2,i,function(_8c6){_8c3(_8c6);});}}}this._finishedSpawningCrypto=true;},_stripCryptoSQL:function(sql){sql=sql.replace(/DECRYPT\(\*\)/ig,"*");var _8c7=sql.match(/ENCRYPT\([^\)]*\)/ig);if(_8c7!=null){for(var i=0;i<_8c7.length;i++){var _8c8=_8c7[i];var _8c9=_8c8.match(/ENCRYPT\(([^\)]*)\)/i)[1];sql=sql.replace(_8c8,_8c9);}}_8c7=sql.match(/DECRYPT\([^\)]*\)/ig);if(_8c7!=null){for(i=0;i<_8c7.length;i++){var _8ca=_8c7[i];var _8cb=_8ca.match(/DECRYPT\(([^\)]*)\)/i)[1];sql=sql.replace(_8ca,_8cb);}}return sql;},_flagEncryptedArgs:function(sql,args){var _8cc=new RegExp(/([\"][^\"]*\?[^\"]*[\"])|([\'][^\']*\?[^\']*[\'])|(\?)/ig);var _8cd;var _8ce=0;var _8cf=[];while((_8cd=_8cc.exec(sql))!=null){var _8d0=RegExp.lastMatch+"";if(/^[\"\']/.test(_8d0)){continue;}var _8d1=false;if(/ENCRYPT\([^\)]*$/i.test(RegExp.leftContext)){_8d1=true;}_8cf[_8ce]=_8d1;_8ce++;}return _8cf;},_determineDecryptedColumns:function(sql){var _8d2={};if(/DECRYPT\(\*\)/i.test(sql)){_8d2="*";}else{var _8d3=/DECRYPT\((?:\s*\w*\s*\,?)*\)/ig;var _8d4=_8d3.exec(sql);while(_8d4){var _8d5=new String(RegExp.lastMatch);var _8d6=_8d5.replace(/DECRYPT\(/i,"");_8d6=_8d6.replace(/\)/,"");_8d6=_8d6.split(/\s*,\s*/);dojo.forEach(_8d6,function(_8d7){if(/\s*\w* AS (\w*)/i.test(_8d7)){_8d7=_8d7.match(/\s*\w* AS (\w*)/i)[1];}_8d2[_8d7]=true;});_8d4=_8d3.exec(sql);}}return _8d2;},_decryptSingleColumn:function(_8d8,_8d9,_8da,_8db,_8dc){_89d.sql._crypto.decrypt(_8d9,_8da,dojo.hitch(this,function(_8dd){this._finalResultSet[_8db][_8d8]=_8dd;this._finishedCrypto++;if(this._finishedCrypto>=this._totalCrypto&&this._finishedSpawningCrypto){_8dc(this._finalResultSet);}}));}});(function(){var _8de=_89d.sql;_89d.sql=new Function("return dojox.sql._exec(arguments);");dojo.mixin(_89d.sql,_8de);})();});},"dojox/timing/_base":function(){define("dojox/timing/_base",["dojo/_base/kernel","dojo/_base/lang"],function(dojo){dojo.experimental("dojox.timing");dojo.getObject("timing",true,dojox);dojox.timing.Timer=function(_8df){this.timer=null;this.isRunning=false;this.interval=_8df;this.onStart=null;this.onStop=null;};dojo.extend(dojox.timing.Timer,{onTick:function(){},setInterval:function(_8e0){if(this.isRunning){window.clearInterval(this.timer);}this.interval=_8e0;if(this.isRunning){this.timer=window.setInterval(dojo.hitch(this,"onTick"),this.interval);}},start:function(){if(typeof this.onStart=="function"){this.onStart();}this.isRunning=true;this.timer=window.setInterval(dojo.hitch(this,"onTick"),this.interval);},stop:function(){if(typeof this.onStop=="function"){this.onStop();}this.isRunning=false;window.clearInterval(this.timer);}});return dojox.timing;});},"dijit/form/CheckBox":function(){require({cache:{"url:dijit/form/templates/CheckBox.html":"<div class=\"dijit dijitReset dijitInline\" role=\"presentation\"\n\t><input\n\t \t${!nameAttrSetting} type=\"${type}\" role=\"${type}\" aria-checked=\"false\" ${checkedAttrSetting}\n\t\tclass=\"dijitReset dijitCheckBoxInput\"\n\t\tdata-dojo-attach-point=\"focusNode\"\n\t \tdata-dojo-attach-event=\"onclick:_onClick\"\n/></div>\n"}});define("dijit/form/CheckBox",["require","dojo/_base/declare","dojo/dom-attr","dojo/has","dojo/query","dojo/ready","./ToggleButton","./_CheckBoxMixin","dojo/text!./templates/CheckBox.html","dojo/NodeList-dom"],function(_8e1,_8e2,_8e3,has,_8e4,_8e5,_8e6,_8e7,_8e8){if(has("dijit-legacy-requires")){_8e5(0,function(){var _8e9=["dijit/form/RadioButton"];_8e1(_8e9);});}return _8e2("dijit.form.CheckBox",[_8e6,_8e7],{templateString:_8e8,baseClass:"dijitCheckBox",_setValueAttr:function(_8ea,_8eb){if(typeof _8ea=="string"){this.inherited(arguments);_8ea=true;}if(this._created){this.set("checked",_8ea,_8eb);}},_getValueAttr:function(){return (this.checked?this.value:false);},_setIconClassAttr:null,postMixInProperties:function(){this.inherited(arguments);this.checkedAttrSetting=this.checked?"checked":"";},_fillContent:function(){},_onFocus:function(){if(this.id){_8e4("label[for='"+this.id+"']").addClass("dijitFocusedLabel");}this.inherited(arguments);},_onBlur:function(){if(this.id){_8e4("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");}this.inherited(arguments);}});});},"dojox/storage/manager":function(){define("dojox/storage/manager",["dijit","dojo","dojox"],function(_8ec,dojo,_8ed){dojo.provide("dojox.storage.manager");_8ed.storage.manager=new function(){this.currentProvider=null;this.available=false;this.providers=[];this._initialized=false;this._onLoadListeners=[];this.initialize=function(){this.autodetect();};this.register=function(name,_8ee){this.providers.push(_8ee);this.providers[name]=_8ee;};this.setProvider=function(_8ef){};this.autodetect=function(){if(this._initialized){return;}var _8f0=dojo.config["forceStorageProvider"]||false;var _8f1;for(var i=0;i<this.providers.length;i++){_8f1=this.providers[i];if(_8f0&&_8f0==_8f1.declaredClass){_8f1.isAvailable();break;}else{if(!_8f0&&_8f1.isAvailable()){break;}}}if(!_8f1){this._initialized=true;this.available=false;this.currentProvider=null;this.loaded();return;}this.currentProvider=_8f1;dojo.mixin(_8ed.storage,this.currentProvider);_8ed.storage.initialize();this._initialized=true;this.available=true;};this.isAvailable=function(){return this.available;};this.addOnLoad=function(func){this._onLoadListeners.push(func);if(this.isInitialized()){this._fireLoaded();}};this.removeOnLoad=function(func){for(var i=0;i<this._onLoadListeners.length;i++){if(func==this._onLoadListeners[i]){this._onLoadListeners.splice(i,1);break;}}};this.isInitialized=function(){if(this.currentProvider!=null&&this.currentProvider.declaredClass=="dojox.storage.FlashStorageProvider"&&_8ed.flash.ready==false){return false;}else{return this._initialized;}};this.supportsProvider=function(_8f2){try{var _8f3=eval("new "+_8f2+"()");var _8f4=_8f3.isAvailable();if(!_8f4){return false;}return _8f4;}catch(e){return false;}};this.getProvider=function(){return this.currentProvider;};this.loaded=function(){this._fireLoaded();};this._fireLoaded=function(){dojo.forEach(this._onLoadListeners,function(i){try{i();}catch(e){}});};this.getResourceList=function(){var _8f5=[];dojo.forEach(_8ed.storage.manager.providers,function(_8f6){_8f5=_8f5.concat(_8f6.getResourceList());});return _8f5;};};});},"dijit/tree/_dndSelector":function(){define("dijit/tree/_dndSelector",["dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/Deferred","dojo/_base/kernel","dojo/_base/lang","dojo/cookie","dojo/mouse","dojo/on","dojo/touch","./_dndContainer"],function(_8f7,_8f8,_8f9,_8fa,_8fb,lang,_8fc,_8fd,on,_8fe,_8ff){return _8f9("dijit.tree._dndSelector",_8ff,{constructor:function(){this.selection={};this.anchor=null;if(!this.cookieName&&this.tree.id){this.cookieName=this.tree.id+"SaveSelectedCookie";}this.events.push(on(this.tree.domNode,_8fe.press,lang.hitch(this,"onMouseDown")),on(this.tree.domNode,_8fe.release,lang.hitch(this,"onMouseUp")),on(this.tree.domNode,_8fe.move,lang.hitch(this,"onMouseMove")));},singular:false,getSelectedTreeNodes:function(){var _900=[],sel=this.selection;for(var i in sel){_900.push(sel[i]);}return _900;},selectNone:function(){this.setSelection([]);return this;},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null;},addTreeNode:function(node,_901){this.setSelection(this.getSelectedTreeNodes().concat([node]));if(_901){this.anchor=node;}return node;},removeTreeNode:function(node){this.setSelection(this._setDifference(this.getSelectedTreeNodes(),[node]));return node;},isTreeNodeSelected:function(node){return node.id&&!!this.selection[node.id];},setSelection:function(_902){var _903=this.getSelectedTreeNodes();_8f7.forEach(this._setDifference(_903,_902),lang.hitch(this,function(node){node.setSelected(false);if(this.anchor==node){delete this.anchor;}delete this.selection[node.id];}));_8f7.forEach(this._setDifference(_902,_903),lang.hitch(this,function(node){node.setSelected(true);this.selection[node.id]=node;}));this._updateSelectionProperties();},_setDifference:function(xs,ys){_8f7.forEach(ys,function(y){y.__exclude__=true;});var ret=_8f7.filter(xs,function(x){return !x.__exclude__;});_8f7.forEach(ys,function(y){delete y["__exclude__"];});return ret;},_updateSelectionProperties:function(){var _904=this.getSelectedTreeNodes();var _905=[],_906=[],_907=[];_8f7.forEach(_904,function(node){var ary=node.getTreePath(),_908=this.tree.model;_906.push(node);_905.push(ary);ary=_8f7.map(ary,function(item){return _908.getIdentity(item);},this);_907.push(ary.join("/"));},this);var _909=_8f7.map(_906,function(node){return node.item;});this.tree._set("paths",_905);this.tree._set("path",_905[0]||[]);this.tree._set("selectedNodes",_906);this.tree._set("selectedNode",_906[0]||null);this.tree._set("selectedItems",_909);this.tree._set("selectedItem",_909[0]||null);if(this.tree.persist&&_907.length>0){_8fc(this.cookieName,_907.join(","),{expires:365});}},_getSavedPaths:function(){var tree=this.tree;if(tree.persist&&tree.dndController.cookieName){var oreo,_90a=[];oreo=_8fc(tree.dndController.cookieName);if(oreo){_90a=_8f7.map(oreo.split(","),function(path){return path.split("/");});}return _90a;}},onMouseDown:function(e){if(!this.current||this.tree.isExpandoNode(e.target,this.current)){return;}if(_8fd.isLeft(e)){e.preventDefault();}else{if(e.type!="touchstart"){return;}}var _90b=this.current,copy=_8f8.isCopyKey(e),id=_90b.id;if(!this.singular&&!e.shiftKey&&this.selection[id]){this._doDeselect=true;return;}else{this._doDeselect=false;}this.userSelect(_90b,copy,e.shiftKey);},onMouseUp:function(e){if(!this._doDeselect){return;}this._doDeselect=false;this.userSelect(this.current,_8f8.isCopyKey(e),e.shiftKey);},onMouseMove:function(){this._doDeselect=false;},_compareNodes:function(n1,n2){if(n1===n2){return 0;}if("sourceIndex" in document.documentElement){return n1.sourceIndex-n2.sourceIndex;}else{if("compareDocumentPosition" in document.documentElement){return n1.compareDocumentPosition(n2)&2?1:-1;}else{if(document.createRange){var r1=doc.createRange();r1.setStartBefore(n1);var r2=doc.createRange();r2.setStartBefore(n2);return r1.compareBoundaryPoints(r1.END_TO_END,r2);}else{throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");}}}},userSelect:function(node,_90c,_90d){if(this.singular){if(this.anchor==node&&_90c){this.selectNone();}else{this.setSelection([node]);this.anchor=node;}}else{if(_90d&&this.anchor){var cr=this._compareNodes(this.anchor.rowNode,node.rowNode),_90e,end,_90f=this.anchor;if(cr<0){_90e=_90f;end=node;}else{_90e=node;end=_90f;}var _910=[];while(_90e!=end){_910.push(_90e);_90e=this.tree._getNextNode(_90e);}_910.push(end);this.setSelection(_910);}else{if(this.selection[node.id]&&_90c){this.removeTreeNode(node);}else{if(_90c){this.addTreeNode(node,true);}else{this.setSelection([node]);this.anchor=node;}}}}},getItem:function(key){var _911=this.selection[key];return {data:_911,type:["treeNode"]};},forInSelectedItems:function(f,o){o=o||_8fb.global;for(var id in this.selection){f.call(o,this.getItem(id),id,this);}}});});},"url:dijit/templates/MenuBar.html":"<div class=\"dijitMenuBar dijitMenuPassive\" data-dojo-attach-point=\"containerNode\"  role=\"menubar\" tabIndex=\"${tabIndex}\" data-dojo-attach-event=\"onkeypress: _onKeyPress\"></div>\n","dojox/flash/_base":function(){define("dojox/flash/_base",["dijit","dojo","dojox","dojo/require!dojo/window"],function(_912,dojo,_913){dojo.provide("dojox.flash._base");dojo.experimental("dojox.flash");dojo.require("dojo.window");_913.flash={ready:false,url:null,_visible:true,_loadedListeners:[],_installingListeners:[],setSwf:function(url,_914){this.url=url;this._visible=true;if(_914!==null&&_914!==undefined){this._visible=_914;}this._initialize();},addLoadedListener:function(_915){this._loadedListeners.push(_915);},addInstallingListener:function(_916){this._installingListeners.push(_916);},loaded:function(){_913.flash.ready=true;if(_913.flash._loadedListeners.length){for(var i=0;i<_913.flash._loadedListeners.length;i++){_913.flash._loadedListeners[i].call(null);}}},installing:function(){if(_913.flash._installingListeners.length){for(var i=0;i<_913.flash._installingListeners.length;i++){_913.flash._installingListeners[i].call(null);}}},_initialize:function(){var _917=new _913.flash.Install();_913.flash.installer=_917;if(_917.needed()){_917.install();}else{_913.flash.obj=new _913.flash.Embed(this._visible);_913.flash.obj.write();_913.flash.comm=new _913.flash.Communicator();}}};_913.flash.Info=function(){this._detectVersion();};_913.flash.Info.prototype={version:-1,versionMajor:-1,versionMinor:-1,versionRevision:-1,capable:false,installing:false,isVersionOrAbove:function(_918,_919,_91a){_91a=parseFloat("."+_91a);if(this.versionMajor>=_918&&this.versionMinor>=_919&&this.versionRevision>=_91a){return true;}else{return false;}},_detectVersion:function(){var _91b;for(var _91c=25;_91c>0;_91c--){if(dojo.isIE){var axo;try{if(_91c>6){axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_91c);}else{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}if(typeof axo=="object"){if(_91c==6){axo.AllowScriptAccess="always";}_91b=axo.GetVariable("$version");}}catch(e){continue;}}else{_91b=this._JSFlashInfo(_91c);}if(_91b==-1){this.capable=false;return;}else{if(_91b!=0){var _91d;if(dojo.isIE){var _91e=_91b.split(" ");var _91f=_91e[1];_91d=_91f.split(",");}else{_91d=_91b.split(".");}this.versionMajor=_91d[0];this.versionMinor=_91d[1];this.versionRevision=_91d[2];var _920=this.versionMajor+"."+this.versionRevision;this.version=parseFloat(_920);this.capable=true;break;}}}},_JSFlashInfo:function(_921){if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var _922=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"";var _923=navigator.plugins["Shockwave Flash"+_922].description;var _924=_923.split(" ");var _925=_924[2].split(".");var _926=_925[0];var _927=_925[1];var _928=(_924[3]||_924[4]).split("r");var _929=_928[1]>0?_928[1]:0;var _92a=_926+"."+_927+"."+_929;return _92a;}}return -1;}};_913.flash.Embed=function(_92b){this._visible=_92b;};_913.flash.Embed.prototype={width:215,height:138,id:"flashObject",_visible:true,protocol:function(){switch(window.location.protocol){case "https:":return "https";break;default:return "http";break;}},write:function(_92c){var _92d;var _92e=_913.flash.url;var _92f=_92e;var _930=_92e;var _931=dojo.baseUrl;var _932=document.location.protocol+"//"+document.location.host;if(_92c){var _933=escape(window.location);document.title=document.title.slice(0,47)+" - Flash Player Installation";var _934=escape(document.title);_92f+="?MMredirectURL="+_933+"&MMplayerType=ActiveX"+"&MMdoctitle="+_934+"&baseUrl="+escape(_931)+"&xdomain="+escape(_932);_930+="?MMredirectURL="+_933+"&MMplayerType=PlugIn"+"&baseUrl="+escape(_931)+"&xdomain="+escape(_932);}else{_92f+="?cachebust="+new Date().getTime();_92f+="&baseUrl="+escape(_931);_92f+="&xdomain="+escape(_932);}if(_930.indexOf("?")==-1){_930+="?baseUrl="+escape(_931);}else{_930+="&baseUrl="+escape(_931);}_930+="&xdomain="+escape(_932);_92d="<object classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" "+"codebase=\""+this.protocol()+"://fpdownload.macromedia.com/pub/shockwave/cabs/flash/"+"swflash.cab#version=8,0,0,0\"\n "+"width=\""+this.width+"\"\n "+"height=\""+this.height+"\"\n "+"id=\""+this.id+"\"\n "+"name=\""+this.id+"\"\n "+"align=\"middle\">\n "+"<param name=\"allowScriptAccess\" value=\"always\"></param>\n "+"<param name=\"movie\" value=\""+_92f+"\"></param>\n "+"<param name=\"quality\" value=\"high\"></param>\n "+"<param name=\"bgcolor\" value=\"#ffffff\"></param>\n "+"<embed src=\""+_930+"\" "+"quality=\"high\" "+"bgcolor=\"#ffffff\" "+"width=\""+this.width+"\" "+"height=\""+this.height+"\" "+"id=\""+this.id+"Embed"+"\" "+"name=\""+this.id+"\" "+"swLiveConnect=\"true\" "+"align=\"middle\" "+"allowScriptAccess=\"always\" "+"type=\"application/x-shockwave-flash\" "+"pluginspage=\""+this.protocol()+"://www.macromedia.com/go/getflashplayer\" "+"></embed>\n"+"</object>\n";dojo.connect(dojo,"loaded",dojo.hitch(this,function(){var _935=this.id+"Container";if(dojo.byId(_935)){return;}var div=document.createElement("div");div.id=this.id+"Container";div.style.width=this.width+"px";div.style.height=this.height+"px";if(!this._visible){div.style.position="absolute";div.style.zIndex="10000";div.style.top="-1000px";}div.innerHTML=_92d;var body=document.getElementsByTagName("body");if(!body||!body.length){throw new Error("No body tag for this page");}body=body[0];body.appendChild(div);}));},get:function(){if(dojo.isIE||dojo.isWebKit){return dojo.byId(this.id);}else{return document[this.id+"Embed"];}},setVisible:function(_936){var _937=dojo.byId(this.id+"Container");if(_936){_937.style.position="absolute";_937.style.visibility="visible";}else{_937.style.position="absolute";_937.style.y="-1000px";_937.style.visibility="hidden";}},center:function(){var _938=this.width;var _939=this.height;var _93a=dojo.window.getBox();var x=_93a.l+(_93a.w-_938)/2;var y=_93a.t+(_93a.h-_939)/2;var _93b=dojo.byId(this.id+"Container");_93b.style.top=y+"px";_93b.style.left=x+"px";}};_913.flash.Communicator=function(){};_913.flash.Communicator.prototype={_addExternalInterfaceCallback:function(_93c){var _93d=dojo.hitch(this,function(){var _93e=new Array(arguments.length);for(var i=0;i<arguments.length;i++){_93e[i]=this._encodeData(arguments[i]);}var _93f=this._execFlash(_93c,_93e);_93f=this._decodeData(_93f);return _93f;});this[_93c]=_93d;},_encodeData:function(data){if(!data||typeof data!="string"){return data;}data=data.replace("\\","&custom_backslash;");data=data.replace(/\0/g,"&custom_null;");return data;},_decodeData:function(data){if(data&&data.length&&typeof data!="string"){data=data[0];}if(!data||typeof data!="string"){return data;}data=data.replace(/\&custom_null\;/g,"\x00");data=data.replace(/\&custom_lt\;/g,"<").replace(/\&custom_gt\;/g,">").replace(/\&custom_backslash\;/g,"\\");return data;},_execFlash:function(_940,_941){var _942=_913.flash.obj.get();_941=(_941)?_941:[];for(var i=0;i<_941;i++){if(typeof _941[i]=="string"){_941[i]=this._encodeData(_941[i]);}}var _943=function(){return eval(_942.CallFunction("<invoke name=\""+_940+"\" returntype=\"javascript\">"+__flash__argumentsToXML(_941,0)+"</invoke>"));};var _944=_943.call(_941);if(typeof _944=="string"){_944=this._decodeData(_944);}return _944;}};_913.flash.Install=function(){};_913.flash.Install.prototype={needed:function(){if(!_913.flash.info.capable){return true;}if(!_913.flash.info.isVersionOrAbove(8,0,0)){return true;}return false;},install:function(){var _945;_913.flash.info.installing=true;_913.flash.installing();if(_913.flash.info.capable==false){_945=new _913.flash.Embed(false);_945.write();}else{if(_913.flash.info.isVersionOrAbove(6,0,65)){_945=new _913.flash.Embed(false);_945.write(true);_945.setVisible(true);_945.center();}else{alert("This content requires a more recent version of the Macromedia "+" Flash Player.");window.location.href=+_913.flash.Embed.protocol()+"://www.macromedia.com/go/getflashplayer";}}},_onInstallStatus:function(msg){if(msg=="Download.Complete"){_913.flash._initialize();}else{if(msg=="Download.Cancelled"){alert("This content requires a more recent version of the Macromedia "+" Flash Player.");window.location.href=_913.flash.Embed.protocol()+"://www.macromedia.com/go/getflashplayer";}else{if(msg=="Download.Failed"){alert("There was an error downloading the Flash Player update. "+"Please try again later, or visit macromedia.com to download "+"the latest version of the Flash plugin.");}}}}};_913.flash.info=new _913.flash.Info();});},"esriviewer/ui/basemap/model/BasemapGalleryViewModel":function(){define("esriviewer/ui/basemap/model/BasemapGalleryViewModel",["dojo/_base/declare"],function(_946){return _946([],{constructor:function(){this.visible=ko.observable(false);}});});},"dojo/data/ItemFileReadStore":function(){define("dojo/data/ItemFileReadStore",["../_base/kernel","../_base/lang","../_base/declare","../_base/array","../_base/xhr","../Evented","./util/filter","./util/simpleFetch","../date/stamp"],function(_947,lang,_948,_949,xhr,_94a,_94b,_94c,_94d){var _94e=_948("dojo.data.ItemFileReadStore",[_94a],{constructor:function(_94f){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=_94f.url;this._ccUrl=_94f.url;this.url=_94f.url;this._jsonData=_94f.data;this.data=null;this._datatypeMap=_94f.typeMap||{};if(!this._datatypeMap["Date"]){this._datatypeMap["Date"]={type:Date,deserialize:function(_950){return _94d.fromISOString(_950);}};}this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(_94f.urlPreventCache!==undefined){this.urlPreventCache=_94f.urlPreventCache?true:false;}if(_94f.hierarchical!==undefined){this.hierarchical=_94f.hierarchical?true:false;}if(_94f.clearOnClose){this.clearOnClose=true;}if("failOk" in _94f){this.failOk=_94f.failOk?true:false;}},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,failOk:false,hierarchical:true,_assertIsItem:function(item){if(!this.isItem(item)){throw new Error(this.declaredClass+": Invalid item argument.");}},_assertIsAttribute:function(_951){if(typeof _951!=="string"){throw new Error(this.declaredClass+": Invalid attribute argument.");}},getValue:function(item,_952,_953){var _954=this.getValues(item,_952);return (_954.length>0)?_954[0]:_953;},getValues:function(item,_955){this._assertIsItem(item);this._assertIsAttribute(_955);return (item[_955]||[]).slice(0);},getAttributes:function(item){this._assertIsItem(item);var _956=[];for(var key in item){if((key!==this._storeRefPropName)&&(key!==this._itemNumPropName)&&(key!==this._rootItemPropName)&&(key!==this._reverseRefMap)){_956.push(key);}}return _956;},hasAttribute:function(item,_957){this._assertIsItem(item);this._assertIsAttribute(_957);return (_957 in item);},containsValue:function(item,_958,_959){var _95a=undefined;if(typeof _959==="string"){_95a=_94b.patternToRegExp(_959,false);}return this._containsValue(item,_958,_959,_95a);},_containsValue:function(item,_95b,_95c,_95d){return _949.some(this.getValues(item,_95b),function(_95e){if(_95e!==null&&!lang.isObject(_95e)&&_95d){if(_95e.toString().match(_95d)){return true;}}else{if(_95c===_95e){return true;}}});},isItem:function(_95f){if(_95f&&_95f[this._storeRefPropName]===this){if(this._arrayOfAllItems[_95f[this._itemNumPropName]]===_95f){return true;}}return false;},isItemLoaded:function(_960){return this.isItem(_960);},loadItem:function(_961){this._assertIsItem(_961.item);},getFeatures:function(){return this._features;},getLabel:function(item){if(this._labelAttr&&this.isItem(item)){return this.getValue(item,this._labelAttr);}return undefined;},getLabelAttributes:function(item){if(this._labelAttr){return [this._labelAttr];}return null;},filter:function(_962,_963,_964){var _965=[],i,key;if(_962.query){var _966,_967=_962.queryOptions?_962.queryOptions.ignoreCase:false;var _968={};for(key in _962.query){_966=_962.query[key];if(typeof _966==="string"){_968[key]=_94b.patternToRegExp(_966,_967);}else{if(_966 instanceof RegExp){_968[key]=_966;}}}for(i=0;i<_963.length;++i){var _969=true;var _96a=_963[i];if(_96a===null){_969=false;}else{for(key in _962.query){_966=_962.query[key];if(!this._containsValue(_96a,key,_966,_968[key])){_969=false;}}}if(_969){_965.push(_96a);}}_964(_965,_962);}else{for(i=0;i<_963.length;++i){var item=_963[i];if(item!==null){_965.push(item);}}_964(_965,_962);}},_fetchItems:function(_96b,_96c,_96d){var self=this;if(this._loadFinished){this.filter(_96b,this._getItemsArray(_96b.queryOptions),_96c);}else{if(this._jsonFileUrl!==this._ccUrl){_947.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_96b,filter:lang.hitch(self,"filter"),findCallback:lang.hitch(self,_96c)});}else{this._loadInProgress=true;var _96e={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _96f=xhr.get(_96e);_96f.addCallback(function(data){try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;self.filter(_96b,self._getItemsArray(_96b.queryOptions),_96c);self._handleQueuedFetches();}catch(e){self._loadFinished=true;self._loadInProgress=false;_96d(e,_96b);}});_96f.addErrback(function(_970){self._loadInProgress=false;_96d(_970,_96b);});var _971=null;if(_96b.abort){_971=_96b.abort;}_96b.abort=function(){var df=_96f;if(df&&df.fired===-1){df.cancel();df=null;}if(_971){_971.call(_96b);}};}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;self.filter(_96b,this._getItemsArray(_96b.queryOptions),_96c);}catch(e){_96d(e,_96b);}}else{_96d(new Error(this.declaredClass+": No JSON source data was provided as either URL or a nested Javascript object."),_96b);}}}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var i=0;i<this._queuedFetches.length;i++){var _972=this._queuedFetches[i],_973=_972.args,_974=_972.filter,_975=_972.findCallback;if(_974){_974(_973,this._getItemsArray(_973.queryOptions),_975);}else{this.fetchItemByIdentity(_973);}}this._queuedFetches=[];}},_getItemsArray:function(_976){if(_976&&_976.deep){return this._arrayOfAllItems;}return this._arrayOfTopLevelItems;},close:function(_977){if(this.clearOnClose&&this._loadFinished&&!this._loadInProgress){if(((this._jsonFileUrl==""||this._jsonFileUrl==null)&&(this.url==""||this.url==null))&&this.data==null){}this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[];}},_getItemsFromLoadedData:function(_978){var _979=false,self=this;function _97a(_97b){return (_97b!==null)&&(typeof _97b==="object")&&(!lang.isArray(_97b)||_979)&&(!lang.isFunction(_97b))&&(_97b.constructor==Object||lang.isArray(_97b))&&(typeof _97b._reference==="undefined")&&(typeof _97b._type==="undefined")&&(typeof _97b._value==="undefined")&&self.hierarchical;};function _97c(_97d){self._arrayOfAllItems.push(_97d);for(var _97e in _97d){var _97f=_97d[_97e];if(_97f){if(lang.isArray(_97f)){var _980=_97f;for(var k=0;k<_980.length;++k){var _981=_980[k];if(_97a(_981)){_97c(_981);}}}else{if(_97a(_97f)){_97c(_97f);}}}}};this._labelAttr=_978.label;var i,item;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=_978.items;for(i=0;i<this._arrayOfTopLevelItems.length;++i){item=this._arrayOfTopLevelItems[i];if(lang.isArray(item)){_979=true;}_97c(item);item[this._rootItemPropName]=true;}var _982={},key;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){if(key!==this._rootItemPropName){var _983=item[key];if(_983!==null){if(!lang.isArray(_983)){item[key]=[_983];}}else{item[key]=[null];}}_982[key]=key;}}while(_982[this._storeRefPropName]){this._storeRefPropName+="_";}while(_982[this._itemNumPropName]){this._itemNumPropName+="_";}while(_982[this._reverseRefMap]){this._reverseRefMap+="_";}var _984;var _985=_978.identifier;if(_985){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=_985;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];_984=item[_985];var _986=_984[0];if(!Object.hasOwnProperty.call(this._itemsByIdentity,_986)){this._itemsByIdentity[_986]=item;}else{if(this._jsonFileUrl){throw new Error(this.declaredClass+":  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+_985+"].  Value collided: ["+_986+"]");}else{if(this._jsonData){throw new Error(this.declaredClass+":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+_985+"].  Value collided: ["+_986+"]");}}}}}else{this._features["dojo.data.api.Identity"]=Number;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];item[this._storeRefPropName]=this;item[this._itemNumPropName]=i;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){_984=item[key];for(var j=0;j<_984.length;++j){_983=_984[j];if(_983!==null&&typeof _983=="object"){if(("_type" in _983)&&("_value" in _983)){var type=_983._type;var _987=this._datatypeMap[type];if(!_987){throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+type+"'");}else{if(lang.isFunction(_987)){_984[j]=new _987(_983._value);}else{if(lang.isFunction(_987.deserialize)){_984[j]=_987.deserialize(_983._value);}else{throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");}}}}if(_983._reference){var _988=_983._reference;if(!lang.isObject(_988)){_984[j]=this._getItemByIdentity(_988);}else{for(var k=0;k<this._arrayOfAllItems.length;++k){var _989=this._arrayOfAllItems[k],_98a=true;for(var _98b in _988){if(_989[_98b]!=_988[_98b]){_98a=false;}}if(_98a){_984[j]=_989;}}}if(this.referenceIntegrity){var _98c=_984[j];if(this.isItem(_98c)){this._addReferenceToMap(_98c,item,key);}}}else{if(this.isItem(_983)){if(this.referenceIntegrity){this._addReferenceToMap(_983,item,key);}}}}}}}},_addReferenceToMap:function(_98d,_98e,_98f){},getIdentity:function(item){var _990=this._features["dojo.data.api.Identity"];if(_990===Number){return item[this._itemNumPropName];}else{var _991=item[_990];if(_991){return _991[0];}}return null;},fetchItemByIdentity:function(_992){var item,_993;if(!this._loadFinished){var self=this;if(this._jsonFileUrl!==this._ccUrl){_947.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_992});}else{this._loadInProgress=true;var _994={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _995=xhr.get(_994);_995.addCallback(function(data){var _996=_992.scope?_992.scope:_947.global;try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;item=self._getItemByIdentity(_992.identity);if(_992.onItem){_992.onItem.call(_996,item);}self._handleQueuedFetches();}catch(error){self._loadInProgress=false;if(_992.onError){_992.onError.call(_996,error);}}});_995.addErrback(function(_997){self._loadInProgress=false;if(_992.onError){var _998=_992.scope?_992.scope:_947.global;_992.onError.call(_998,_997);}});}}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;item=self._getItemByIdentity(_992.identity);if(_992.onItem){_993=_992.scope?_992.scope:_947.global;_992.onItem.call(_993,item);}}}}else{item=this._getItemByIdentity(_992.identity);if(_992.onItem){_993=_992.scope?_992.scope:_947.global;_992.onItem.call(_993,item);}}},_getItemByIdentity:function(_999){var item=null;if(this._itemsByIdentity){if(Object.hasOwnProperty.call(this._itemsByIdentity,_999)){item=this._itemsByIdentity[_999];}}else{if(Object.hasOwnProperty.call(this._arrayOfAllItems,_999)){item=this._arrayOfAllItems[_999];}}if(item===undefined){item=null;}return item;},getIdentityAttributes:function(item){var _99a=this._features["dojo.data.api.Identity"];if(_99a===Number){return null;}else{return [_99a];}},_forceLoad:function(){var self=this;if(this._jsonFileUrl!==this._ccUrl){_947.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){var _99b={url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:true};var _99c=xhr.get(_99b);_99c.addCallback(function(data){try{if(self._loadInProgress!==true&&!self._loadFinished){self._getItemsFromLoadedData(data);self._loadFinished=true;}else{if(self._loadInProgress){throw new Error(this.declaredClass+":  Unable to perform a synchronous load, an async load is in progress.");}}}catch(e){throw e;}});_99c.addErrback(function(_99d){throw _99d;});}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;}}}});lang.extend(_94e,_94c);return _94e;});},"dijit/_PaletteMixin":function(){define("dijit/_PaletteMixin",["dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/_base/event","dojo/keys","dojo/_base/lang","./_CssStateMixin","./focus","./typematic"],function(_99e,_99f,_9a0,_9a1,_9a2,keys,lang,_9a3,_9a4,_9a5){return _99e("dijit._PaletteMixin",[_9a3],{defaultTimeout:500,timeoutChangeRate:0.9,value:"",_selectedCell:-1,tabIndex:"0",cellClass:"dijitPaletteCell",dyeClass:null,summary:"",_setSummaryAttr:"paletteTableNode",_dyeFactory:function(_9a6){var _9a7=typeof this.dyeClass=="string"?lang.getObject(this.dyeClass):this.dyeClass;return new _9a7(_9a6);},_preparePalette:function(_9a8,_9a9){this._cells=[];var url=this._blankGif;this.connect(this.gridNode,"ondijitclick","_onCellClick");for(var row=0;row<_9a8.length;row++){var _9aa=_9a1.create("tr",{tabIndex:"-1"},this.gridNode);for(var col=0;col<_9a8[row].length;col++){var _9ab=_9a8[row][col];if(_9ab){var _9ac=this._dyeFactory(_9ab,row,col,_9a9[_9ab]);var _9ad=_9a1.create("td",{"class":this.cellClass,tabIndex:"-1",title:_9a9[_9ab],role:"gridcell"},_9aa);_9ac.fillCell(_9ad,url);_9ad.idx=this._cells.length;this._cells.push({node:_9ad,dye:_9ac});}}}this._xDim=_9a8[0].length;this._yDim=_9a8.length;var _9ae={UP_ARROW:-this._xDim,DOWN_ARROW:this._xDim,RIGHT_ARROW:this.isLeftToRight()?1:-1,LEFT_ARROW:this.isLeftToRight()?-1:1};for(var key in _9ae){this.own(_9a5.addKeyListener(this.domNode,{charOrCode:keys[key],ctrlKey:false,altKey:false,shiftKey:false},this,function(){var _9af=_9ae[key];return function(_9b0){this._navigateByKey(_9af,_9b0);};}(),this.timeoutChangeRate,this.defaultTimeout));}},postCreate:function(){this.inherited(arguments);this._setCurrent(this._cells[0].node);},focus:function(){_9a4.focus(this._currentFocus);},_onCellClick:function(evt){var _9b1=evt.target;while(_9b1.tagName!="TD"){if(!_9b1.parentNode||_9b1==this.gridNode){return;}_9b1=_9b1.parentNode;}var _9b2=this._getDye(_9b1).getValue();this._setCurrent(_9b1);_9a4.focus(_9b1);this._setValueAttr(_9b2,true);_9a2.stop(evt);},_setCurrent:function(node){if("_currentFocus" in this){_99f.set(this._currentFocus,"tabIndex","-1");}this._currentFocus=node;if(node){_99f.set(node,"tabIndex",this.tabIndex);}},_setValueAttr:function(_9b3,_9b4){if(this._selectedCell>=0){_9a0.remove(this._cells[this._selectedCell].node,this.cellClass+"Selected");}this._selectedCell=-1;if(_9b3){for(var i=0;i<this._cells.length;i++){if(_9b3==this._cells[i].dye.getValue()){this._selectedCell=i;_9a0.add(this._cells[i].node,this.cellClass+"Selected");break;}}}this._set("value",this._selectedCell>=0?_9b3:null);if(_9b4||_9b4===undefined){this.onChange(_9b3);}},onChange:function(){},_navigateByKey:function(_9b5,_9b6){if(_9b6==-1){return;}var _9b7=this._currentFocus.idx+_9b5;if(_9b7<this._cells.length&&_9b7>-1){var _9b8=this._cells[_9b7].node;this._setCurrent(_9b8);this.defer(lang.hitch(_9a4,"focus",_9b8));}},_getDye:function(cell){return this._cells[cell.idx].dye;}});});},"esriviewer/base/Configurable":function(){define("esriviewer/base/Configurable",["dojo/_base/declare","dojo/_base/xhr","dojo/_base/lang","./DataLoaderSupport"],function(_9b9,xhr,lang,_9ba){return _9b9([_9ba],{configUrl:"",loadConfig:function(){xhr.get({url:this.configUrl,handleAs:"json",load:lang.hitch(this,this.handleConfigLoaded),error:lang.hitch(this,this.handleConfigLoadError)});},loadProxiedConfig:function(){this.loadProxiedJson(this.configUrl,lang.hitch(this,this.handleConfigLoaded),lang.hitch(this,this.handleConfigLoadError));},handleConfigLoaded:function(_9bb){},handleConfigLoadError:function(err){}});});},"url:esriviewer/ui/basemap/template/BasemapGalleryTemplate.html":"<div data-bind=\"visible: visible\" class=\"defaultTransparentBackground basemapGalleryContainer\">\r\n    <div data-dojo-attach-point=\"basemapGalleryContents\"></div>\r\n</div>","esriviewer/util/ViewerUtils":function(){define("esriviewer/util/ViewerUtils",["dojo/_base/declare","dojo/keys","dojo/_base/lang","dojo/dom-style","dojox/uuid/Uuid","dojox/uuid/generateTimeBasedUuid","dojo/topic","esri/request"],function(_9bc,keys,lang,_9bd,Uuid,_9be,_9bf,_9c0){return _9bc([],{isDebug:false,constructor:function(_9c1){lang.mixin(this,_9c1||{});Uuid.setGenerator(_9be);},debug:function(_9c2){if(this.isDebug){this.log(_9c2,VIEWER_GLOBALS.LOG_TYPE.INFO);}},log:function(_9c3,type){if(_9c3==null||_9c3===""){return;}_9bf.publish(VIEWER_GLOBALS.EVENTS.LOGGING.ADD,_9c3,type);},handleContainerMoved:function(_9c4,_9c5){var _9c6=false;var _9c7=false;if(_9c5.l<3){_9bd.set(_9c4.node,"left","3px");_9c6=true;}var _9c8=(VIEWER_GLOBALS.WINDOW&&VIEWER_GLOBALS.WINDOW.TOP_POSITION_MOVE_OFFSET)?(VIEWER_GLOBALS.WINDOW.TOP_POSITION_MOVE_OFFSET):3;if(_9c5.t<_9c8){_9bd.set(_9c4.node,"top",_9c8+"px");_9c7=true;}if(_9c6&&_9c7){return;}var _9c9=dijit.getViewport();if(!_9c6){var _9ca=_9bd.get(_9c4.node,"width");var _9cb=_9bd.get(_9c4.node,"left");var _9cc=_9cb+_9ca;if(_9cc>(_9c9.w-3)){_9bd.set(_9c4.node,"left",(_9c9.w-_9ca-3)+"px");}}if(!_9c7){var _9cd=_9bd.get(_9c4.node,"height");var _9ce=_9bd.get(_9c4.node,"top");var _9cf=_9ce+_9cd;if(_9cf>(_9c9.h-3)){_9bd.set(_9c4.node,"top",(_9c9.h-_9cd-5)+"px");}}},generateUUID:function(){var uuid=new Uuid();return uuid.toString();},getTimeStamp:function(){var date=new Date();var _9d0=date.getHours();if(_9d0<12){if(_9d0==0){_9d0=12;}}else{if(_9d0!=12){_9d0=_9d0-12;}}_9d0=_9d0.toString();if(_9d0.length<2){_9d0="0"+_9d0;}var _9d1=date.getMinutes().toString();if(_9d1.length<2){_9d1="0"+_9d1;}var _9d2=date.getSeconds().toString();if(_9d2.length<2){_9d2="0"+_9d2;}return _9d0+":"+_9d1+":"+_9d2;},sendJsonPQuery:function(url,_9d3,_9d4,_9d5,_9d6){if(_9d5==null){_9d5=lang.hitch(this,function(_9d7){var msg="Could not resource : "+url+". Please verify URL is accessible.";VIEWER_UTILS.log(msg,VIEWER_GLOBALS.LOG_TYPE.ERROR);_9bf.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,msg);});}if(_9d6==null){_9d6="callback";}var _9d8={callbackParamName:_9d6,content:_9d3,url:url};_9c0(_9d8).then(_9d4,_9d5);},isEnterKey:function(e){return e.keyCode==keys.ENTER;},joinUrl:function(url,_9d9){var _9da=url.lastIndexOf("/")==url.length-1;if(!_9da){url+="/";}if(_9d9[0]==="/"){_9d9=_9d9.substring(1);}return url+_9d9;},getLayerInfoFromService:function(_9db,_9dc,_9dd,_9de){if(_9de==null){_9de="callback";}var _9df=lang.hitch(this,function(_9e0){var msg="could not load layer from service: "+_9e1;VIEWER_UTILS.log(msg,VIEWER_GLOBALS.LOG_TYPE.ERROR);_9bf.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,msg);});if(_9db!=null&&_9dc!=null&&_9dd){var _9e1=_9db+"/"+_9dc;}var _9e2={callbackParamName:_9de,content:{f:"json"},url:_9e1};_9c0(_9e2).then(_9dd,_9df);},trim:function(str){return str.replace(/^\s*/,"").replace(/\s*$/,"");},endsWith:function(_9e3,_9e4){var _9e5=_9e3.lastIndexOf(_9e4);return (_9e5!=-1)&&(_9e5+_9e4.length==_9e3.length);},getFileExtension:function(_9e6){var _9e7=_9e6.lastIndexOf(".");if(_9e7<0||_9e7===_9e6.length-1){return "";}return _9e6.substr(_9e7+1);},getFileExtensionLower:function(_9e8){return this.getFileExtension(_9e8).toLowerCase();},getServiceTypeFromUrl:function(url){if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER;}else{if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER;}else{if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GP_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GP_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.GP_SERVER;}else{if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GLOBE_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GLOBE_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.GLOBE_SERVER;}else{if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GEOCODE_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GEOCODE_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.GEOCODE_SERVER;}else{if(REG_EXP_UTILS.isKMLExtension(url)){return VIEWER_GLOBALS.SERVICE_TYPES.KML;}else{if(REG_EXP_UTILS.isFeatureLayer(url)){return VIEWER_GLOBALS.SERVICE_TYPES.FEATURE_SERVER;}else{return null;}}}}}}}},getServiceDescription:function(_9e9,_9ea,_9eb,_9ec){if(_9ec==null){_9ec="callback";}if(_9eb==null){_9eb=lang.hitch(this,function(_9ed){var msg="Could not load service description for : "+_9e9+". Please verify service is online.";});}if(_9e9!=null&&_9ea){var _9ee={callbackParamName:_9ec,content:{f:"json"},url:_9e9};_9c0(_9ee).then(_9ea,_9eb);}},getLayerNameFromLayer:function(_9ef){if(_9ef.layerAliasName!=null&&_9ef.layerAliasName!=""){return _9ef.layerAliasName;}else{if(_9ef.name!=null&&_9ef.name!=""){return _9ef.name;}else{if(_9ef.id!=null){return _9ef.id;}else{if(_9ef.url!=null){return _9ef.url;}}}}return "Layer";},getLabelForEsriUnit:function(_9f0){if(_9f0===VIEWER_GLOBALS.ESRI_UNITS.METERS){return "meters";}else{if(_9f0===VIEWER_GLOBALS.ESRI_UNITS.FEET){return "feet";}else{if(_9f0===VIEWER_GLOBALS.ESRI_UNITS.YARDS){return "yards";}else{if(_9f0===VIEWER_GLOBALS.ESRI_UNITS.MILES){return "miles";}else{if(_9f0===VIEWER_GLOBALS.ESRI_UNITS.NAUTICAL_MILES){return "nautical miles";}else{if(_9f0===VIEWER_GLOBALS.ESRI_UNITS.MILLIMETERS){return "millimeters";}else{if(_9f0===VIEWER_GLOBALS.ESRI_UNITS.CENTIMETERS){return "centimeters";}else{if(_9f0===VIEWER_GLOBALS.ESRI_UNITS.DECIMETERS){return "decimeters";}else{if(_9f0===VIEWER_GLOBALS.ESRI_UNITS.KILOMETERS){return "kilometers";}else{if(_9f0===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_MILES){return "square miles";}else{if(_9f0===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_METERS){return "square meters";}else{if(_9f0===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_KILOMETERS){return "square kilometers";}else{if(_9f0===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_ARES){return "square ares";}else{if(_9f0===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_HECTARES){return "square hectares";}else{if(_9f0===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_CENTIMETERS){return "square centimeters";}else{if(_9f0===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_DECIMETERS){return "square decimeters";}else{if(_9f0===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_FEET){return "square feet";}else{if(_9f0===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_INCHES){return "square inches";}else{if(_9f0===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_MILLIMETERS){return "square millimeters";}else{if(_9f0===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_YARDS){return "square yards";}else{if(_9f0===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_UNKNOWN){return "square unknown";}else{if(_9f0===VIEWER_GLOBALS.ESRI_UNITS.DECIMAL_DEGREES){return "decimal degrees";}}}}}}}}}}}}}}}}}}}}}}return "unknown";},getShortLabelForEsriUnit:function(_9f1){if(_9f1===VIEWER_GLOBALS.ESRI_UNITS.METERS){return "m";}else{if(_9f1===VIEWER_GLOBALS.ESRI_UNITS.FEET){return "f";}else{if(_9f1===VIEWER_GLOBALS.ESRI_UNITS.YARDS){return "y";}else{if(_9f1===VIEWER_GLOBALS.ESRI_UNITS.MILES){return "M";}else{if(_9f1===VIEWER_GLOBALS.ESRI_UNITS.NAUTICAL_MILES){return "NM";}else{if(_9f1===VIEWER_GLOBALS.ESRI_UNITS.MILLIMETERS){return "mm";}else{if(_9f1===VIEWER_GLOBALS.ESRI_UNITS.CENTIMETERS){return "cm";}else{if(_9f1===VIEWER_GLOBALS.ESRI_UNITS.DECIMETERS){return "dm";}else{if(_9f1===VIEWER_GLOBALS.ESRI_UNITS.KILOMETERS){return "KM";}else{if(_9f1===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_MILES){return "square miles";}else{if(_9f1===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_METERS){return "Sq m";}else{if(_9f1===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_KILOMETERS){return "Sq KM";}else{if(_9f1===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_ARES){return "Sq Ares";}else{if(_9f1===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_HECTARES){return "Sq Hectares";}else{if(_9f1===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_CENTIMETERS){return "Sq cm";}else{if(_9f1===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_DECIMETERS){return "Sq dm";}else{if(_9f1===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_FEET){return "Sq f";}else{if(_9f1===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_INCHES){return "Sq in";}else{if(_9f1===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_MILLIMETERS){return "Sq mm";}else{if(_9f1===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_YARDS){return "Sq y";}else{if(_9f1===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_UNKNOWN){return "Sq unknown";}else{if(_9f1===VIEWER_GLOBALS.ESRI_UNITS.DECIMAL_DEGREES){return "Dec. Deg.";}}}}}}}}}}}}}}}}}}}}}}return "Unknown";},getFieldTypeFromLayer:function(_9f2,_9f3){var _9f4=_9f3.fields?_9f3.fields:(_9f3.serviceDescription?_9f3.serviceDescription.fields:[]);if(_9f3&&_9f4&&_9f2){for(var i=0;i<_9f4.length;i++){if(_9f4[i].alias===_9f2||_9f4[i].name===_9f2){return _9f4[i].type;}}}return null;},getFileNameFromAtEndOfUrl:function(_9f5){if(_9f5==null||_9f5.lastIndexOf("/")<0){return "";}_9f5=_9f5.substring(0,(_9f5.indexOf("#")==-1)?_9f5.length:_9f5.indexOf("#"));_9f5=_9f5.substring(0,(_9f5.indexOf("?")==-1)?_9f5.length:_9f5.indexOf("?"));return _9f5.substring(_9f5.lastIndexOf("/")+1,_9f5.length);},getFileNameFromAtEndOfPath:function(_9f6){if(_9f6==null||_9f6.lastIndexOf("\\")<0){return "";}return _9f6.substring(_9f6.lastIndexOf("\\")+1,_9f6.length);},_intSorter:function(a,b){return a-b;},sortIntegerArray:function(arr){return arr.sort(this._intSorter);}});});},"esriviewer/map/base/MapExtentTools":function(){define("esriviewer/map/base/MapExtentTools",["dojo/_base/declare","dojo/topic","dojo/_base/lang","esri/geometry/Extent","esri/geometry/Point"],function(_9f7,_9f8,lang,_9f9,_9fa){return _9f7([],{maxClientZoom:null,constructor:function(_9fb){lang.mixin(this,_9fb);this._initListeners();},_initListeners:function(){_9f8.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.CHANGED,lang.hitch(this,this.handleBasemapChanged));_9f8.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PAN_TO,lang.hitch(this,this.panToPoint));_9f8.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_CENTER,lang.hitch(this,this.handleGetCenter));_9f8.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,lang.hitch(this,this.handleGetExtent));_9f8.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_LEVEL,lang.hitch(this,this.handleGetLevel));_9f8.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_LEVEL,lang.hitch(this,this.handleSetLevel));_9f8.subscribe(VIEWER_GLOBALS.EVENTS.MAP.DIMENSIONS.GET,lang.hitch(this,this.handleGetMapDimensions));_9f8.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,lang.hitch(this,this.setMapExtent));_9f8.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LEVEL.GET_LEVEL_COUNT,lang.hitch(this,this.getZoomLevelCount));},handleBasemapChanged:function(){var _9fc=this.getZoomLevelCount();_9f8.publish(VIEWER_GLOBALS.EVENTS.MAP.LEVEL.LEVEL_COUNT_CHANGED,_9fc);},getZoomLevelCount:function(_9fd){var _9fe=null;if(lang.isObject(this.map.__tileInfo)&&lang.isArray(this.map.__tileInfo.lods)){_9fe=this.map.__tileInfo.lods.length-1;}var _9ff={count:_9fe,current:this.map.getLevel()};if(_9fd!=null&&lang.isFunction(_9fd)){_9fd(_9ff);}else{return _9ff;}},setMapExtent:function(_a00){if(_a00!=null&&_a00 instanceof _9f9){if(_a00.spatialReference.wkid==this.map.spatialReference.wkid){this.map.setExtent(_a00);}else{_9f8.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_MAP_SR,_a00,lang.hitch(this,function(_a01){if(lang.isArray(_a01)&&_a01.length>0){if(this.maxClientZoom!=null){this.map.setLevel(this.maxClientZoom);}this.map.setExtent(_a01[0]);}}));}}},handleGetMapDimensions:function(_a02){if(_a02!=null&&lang.isFunction(_a02)){_a02({width:this.map.width,height:this.map.height});}},handleMapExtentChanged:function(){this.mapDisplayWidgets.showScale();},panToPoint:function(_a03,_a04){var _a05;if(!(_a03 instanceof _9fa)){return;}if(_a04!=null&&lang.isObject(_a04)){if(_a04.zoomTo!=null&&_a04.zoomTo===false){this.map.centerAt(_a03);}else{if(_a04.deepest!=null&&_a04.deepest==true){if(lang.isObject(this.map.__tileInfo)&&lang.isArray(this.map.__tileInfo.lods)){_a05=this.map.__tileInfo.lods.length-1;}}else{if(_a04.zoomLevel!=null&&lang.isObject(this.map.__tileInfo)&&lang.isArray(this.map.__tileInfo.lods)){if(_a05>=this.map.__tileInfo.lods.length){_a05=this.map.__tileInfo.lods.length-1;}else{_a05=_a04.zoomLevel;}}}if(_a05!=null){this.map.centerAndZoom(_a03,_a05);}}}else{if(this.map.getLevel()<8||this.map.getLevel()>15){_a05=7;}else{_a05=this.map.getLevel();}if(this.map.getLevel()==_a05){this.map.centerAt(_a03);}else{this.map.centerAndZoom(_a03,_a05);}}},handleSetLevel:function(_a06){if(_a06<this.map.__tileInfo.lods.length){this.map.setLevel(_a06);}},handleGetLevel:function(_a07){if(_a07==null||!lang.isFunction(_a07)){return;}_a07(this.map.getLevel());},handleGetExtent:function(_a08){if(_a08==null||!lang.isFunction(_a08)){return;}_a08(this.map.extent);},handleGetCenter:function(_a09){if(_a09==null||!lang.isFunction(_a09)){return;}_a09(this.map.extent.getCenter());}});});},"dojox/timing":function(){define("dojox/timing",["./timing/_base"],function(_a0a){return _a0a;});},"esriviewer/util/RegExpUtils":function(){define("esriviewer/util/RegExpUtils",["dojo/_base/declare"],function(_a0b){return _a0b([],{URLRegExp:new RegExp(/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/),xmlExtensionRegExp:new RegExp(/\.xml$/i),jsonExtensionRegExp:new RegExp(/\.json$/i),kmlExtensionRegExp:new RegExp(/\.kml/i),featureLayerRegExp:new RegExp(/\/[0-9]+$/i),dateRegexp:new RegExp(/\d+\/\d+\/\d{4}/),numberRegExp:new RegExp(/^[+-]?\d*\.?\d*$/),numericRegexp:new RegExp(/[^0-9\.]/g),unsignedNumberRegExp:new RegExp(/^\d*\.?\d*$/),mapServiceNameRegExp:new RegExp(/.*\/(.*)\/MapServer\/?$/),geocodeServiceNameRegExp:new RegExp(/.*\/(.*)\/GeocodeServer\/?$/),imageServiceNameRegExp:new RegExp(/.*\/(.*)\/ImageServer\/?$/),globeServiceNameRegExp:new RegExp(/.*\/(.*)\/GlobeServer\/?$/),gpServerServiceNameRegExp:new RegExp(/.*\/(.*)\/GPServer\/?$/),featureServerServiceNameRegExp:new RegExp(/.*\/(.*)\/FeatureServer\/?$/),numberToStringWithCommasRegexp:new RegExp(/\B(?=(\d{3})+(?!\d))/g),whitespaceRegexp:new RegExp(/\s*/g),isUrl:function(_a0c){return this.URLRegExp.test(_a0c);},isFeatureLayer:function(url){var _a0d=url.indexOf("/"+VIEWER_GLOBALS.SERVICE_TYPES.FEATURE_SERVER+"/")>-1;var _a0e=url.indexOf("/"+VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER+"/")>-1;if(_a0d||_a0e){return this.featureLayerRegExp.test(url);}},isXmlExtension:function(_a0f){return this.xmlExtensionRegExp.test(_a0f);},isJsonExtension:function(_a10){return this.jsonExtensionRegExp.test(_a10);},isKMLExtension:function(_a11){return this.kmlExtensionRegExp.test(_a11);},isDate:function(_a12){return this.dateRegexp.test(_a12);},isNumber:function(_a13){return this.numberRegExp.test(_a13);},isUnsignedNumber:function(_a14){return this.unsignedNumberRegExp.test(_a14);},stripNonNumberic:function(_a15){return _a15.toString().replace(this.numericRegexp,"");},stripWhitespace:function(_a16){return _a16.toString().replace(this.whitespaceRegexp,"");},getCharacterOccuranceCount:function(_a17,_a18){return _a18.split(_a17).length-1;},getServiceNameFromUrl:function(url){var type=VIEWER_UTILS.getServiceTypeFromUrl(url);if(type){var _a19=null;if(type==VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER){_a19=this.mapServiceNameRegExp;}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER){_a19=this.imageServiceNameRegExp;}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.GP_SERVER){_a19=this.gpServerServiceNameRegExp;}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.GLOBE_SERVER){_a19=this.globeServiceNameRegExp;}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.FEATURE_SERVER){_a19=this.featureServerServiceNameRegExp;}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.GEOCODE_SERVER){_a19=this.geocodeServiceNameRegExp;}else{return url;}}}}}}var res=_a19.exec(url);if(res!=undefined&&res[1]!=undefined){return res[1].replace("_"," ");}return url;}else{return url;}},numberToStringWithCommas:function(x){var _a1a=x.toString().split(".");_a1a[0]=_a1a[0].replace(this.numberToStringWithCommasRegexp,",");return _a1a.join(".");}});});},"url:dijit/templates/MenuBarItem.html":"<div class=\"dijitReset dijitInline dijitMenuItem dijitMenuItemLabel\" data-dojo-attach-point=\"focusNode\"\n\t \trole=\"menuitem\" tabIndex=\"-1\">\n\t<span data-dojo-attach-point=\"containerNode\"></span>\n</div>\n","esriviewer/ui/draw/DrawWidget":function(){require({cache:{"url:esriviewer/ui/draw/template/DrawWidgetTemplate.html":"<div class=\"drawWindow\">\r\n    <div class=\"defaultTabContainer\">\r\n        <span  data-bind=\"click:showDraw, css: {selectedTab: drawVisible}\">Create</span>\r\n        <span data-bind=\"click:showConfiguration, css: {selectedTab: configurationVisible}\">Configure</span>\r\n        <span  data-bind=\"visible:showGraphicsListTab, click:showGraphicsList, css: {selectedTab: graphicsListVisible}\">Added</span>\r\n        <span data-bind=\"visible:showSavedGraphicsTab, click:showUserPersistedGraphics, css: {selectedTab: userPersistedGraphicsVisible}\">Saved</span>\r\n    </div>\r\n    <div class=\"drawWindowInputIconsContainer\" data-dojo-attach-point=\"drawWindowInputIconsContainer\"\r\n         data-bind=\"visible: drawVisible\">\r\n        <div class=\"threePixelBorderRadius commonIcons32 pointUnselected\"\r\n             data-bind=\"visible: showDrawPointIcon, css: {pointSelected: pointActive}\"\r\n             title=\"Draw Point\" data-dojo-attach-event=\"onclick:handlePointDrawClick\"></div>\r\n        <div class=\"threePixelBorderRadius commonIcons32 lineUnselected\"\r\n             data-bind=\"visible: showDrawLineIcon, css: {lineSelected: lineActive}\"\r\n             title=\"Draw Line\" data-dojo-attach-event=\"onclick:handleLineDrawClick\"></div>\r\n        <div class=\"threePixelBorderRadius commonIcons32 polylineUnselected\"\r\n                data-bind=\"visible: showDrawPolylineIcon, css: {polylineSelected: polylineActive}\"\r\n                title=\"Draw Polyline\" data-dojo-attach-event=\"onclick:handlePolylineDrawClick\"></div>\r\n        <div data-bind=\"visible: showDrawPolygonIcon, css: {polygonSelected: polygonActive}\"\r\n             class=\"threePixelBorderRadius commonIcons32 polygonUnselected\"\r\n             title=\"Draw Polygon\" data-dojo-attach-event=\"onclick:handlePolygonDrawClick\"></div>\r\n        <div data-bind=\"visible: showDrawRectangleIcon,css: {rectangleSelected: rectangleActive}\"\r\n             class=\"threePixelBorderRadius commonIcons32 rectangleUnselected\"\r\n             title=\"Draw Rectangle\" data-dojo-attach-event=\"onclick:handleRectangleDrawClick\"></div>\r\n        <div class=\"threePixelBorderRadius commonIcons32 textUnselected\"\r\n             data-bind=\"visible: showDrawTextIcon,css: {textSelected: textActive}\"\r\n             title=\"Draw Text\" data-dojo-attach-event=\"onclick:handleTextDrawClick\"></div>\r\n    </div>\r\n    <div class=\"drawFreehandContainer\"\r\n         data-bind=\"visible: freehandContainerVisible\">\r\n        <span data-dojo-type=\"dijit/form/CheckBox\" data-dojo-attach-event=\"onChange:handleFreehandToggled\"\r\n              data-dojo-attach-point=\"freeHandDrawCheckbox\"></span>\r\n        <span class=\"drawFreehandCheckboxLabel\" data-dojo-attach-event=\"onclick:toggleFreehand\">Freehand</span>\r\n    </div>\r\n    <div class=\"drawWindowConfigureContainer\" data-bind=\"visible: configurationVisible\"\r\n         data-dojo-attach-point=\"drawWindowConfigureContainer\">\r\n    </div>\r\n    <div class=\"drawWindowGraphicsListContainer\" data-dojo-attach-point=\"drawWindowGraphicsListContainer\"\r\n         data-bind=\"visible: graphicsListVisible\">\r\n    </div>\r\n    <div class=\"drawWindowUserPersistedGraphicsContainer\"\r\n         data-dojo-attach-point=\"drawWindowUserPersistedGraphicsContainer\"\r\n         data-bind=\"visible: userPersistedGraphicsVisible\">\r\n    </div>\r\n</div>"}});define("esriviewer/ui/draw/DrawWidget",["dojo/_base/declare","dojo/text!./template/DrawWidgetTemplate.html","dojo/topic","dojo/_base/lang","../base/UITemplatedWidget","./base/MapDrawSupport","./configure/ConfigureDrawWidget","./base/GraphicsListWidget","./model/DrawWidgetViewModel","./base/GraphicsLocalStorageMixin","./base/UserPersistsedGraphicsListWidget","dijit/form/CheckBox","esri/layers/GraphicsLayer","esri/graphic"],function(_a1b,_a1c,_a1d,lang,_a1e,_a1f,_a20,_a21,_a22,_a23,_a24,_a25,_a26,_a27){return _a1b([_a1e,_a1f,_a23],{bindingsApplied:false,templateString:_a1c,constructor:function(){this.freehandActive=false;},initListeners:function(){this.inherited(arguments);_a1d.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.GET_USER_GRAPHICS,lang.hitch(this,this.getUserGraphics));},postCreate:function(){this.viewModel=new _a22();this.viewModel.showUserPersistedGraphicsIcon(this.localStoragePersistSupported);var _a28=false;for(var key in this.persistedUserGraphics){_a28=true;break;}this.viewModel.showSavedGraphicsTab(_a28);this.applyBindings();this.createConfigureDrawWidget();this.createGraphicsListWidget();if(this.localStoragePersistSupported){this.createUserPersistedGraphicsListWidget();}this.inherited(arguments);this.drawGraphicsLayer=_a26();_a1d.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_EXTERNAL_MANAGED_LAYER,this.drawGraphicsLayer);_a1d.publish(VIEWER_GLOBALS.EVENTS.DRAW.DRAW_GRAPHICS_LAYER_CREATED);},applyBindings:function(){if(!this.bindingsApplied){this._applyBindings();}},_applyBindings:function(){if(!this.bindingsApplied){ko.applyBindings(this.viewModel,this.domNode);this.bindingsApplied=true;}},createConfigureDrawWidget:function(){if(this.configureDrawWidget==null){this.configureDrawWidget=new _a20();this.configureDrawWidget.placeAt(this.drawWindowConfigureContainer);this.configureDrawWidget.on("pointSymbolChanged",lang.hitch(this,this.handlePointSymbolChanged));this.configureDrawWidget.on("lineSymbolChanged",lang.hitch(this,this.handleLineSymbolChanged));this.configureDrawWidget.on("polygonSymbolChanged",lang.hitch(this,this.handlePolygonSymbolChanged));this.configureDrawWidget.on("rectangleSymbolChanged",lang.hitch(this,this.handleRectangleSymbolChanged));this.configureDrawWidget.on("textSymbolChanged",lang.hitch(this,this.handleTextSymbolChanged));this.pointSymbol=this.configureDrawWidget.pointConfigurationWidget.getSymbol();this.lineSymbol=this.configureDrawWidget.lineConfigurationWidget.getSymbol();this.envelopeSymbol=this.configureDrawWidget.rectangleConfigurationWidget.getSymbol();this.textSymbol=this.configureDrawWidget.configureTextWidget.getSymbol();this.polygonSymbol=this.configureDrawWidget.configurePolygonWidget.getSymbol();}},handlePointSymbolChanged:function(_a29){this.pointSymbol=_a29;},handleLineSymbolChanged:function(_a2a){this.lineSymbol=_a2a;},handlePolygonSymbolChanged:function(_a2b){this.polygonSymbol=_a2b;},handleRectangleSymbolChanged:function(_a2c){this.envelopeSymbol=_a2c;},handleTextSymbolChanged:function(_a2d){this.textSymbol=_a2d;},createUserPersistedGraphicsListWidget:function(){if(this.userPersistedGraphicsListWidget==null){this.userPersistedGraphicsListWidget=new _a24();this.userPersistedGraphicsListWidget.placeAt(this.drawWindowUserPersistedGraphicsContainer);this.userPersistedGraphicsListWidget.on("removeUserPersistedGraphics",lang.hitch(this,this.removeUserPersistedGraphics));this.userPersistedGraphicsListWidget.on("addUserPersistedGraphicsToMap",lang.hitch(this,this.addUserPersistedGraphicsToMap));this.userPersistedGraphicsListWidget.addExistingPersistedGraphicsItems(this.persistedUserGraphics);}},createGraphicsListWidget:function(){if(this.graphicsListWidget==null){this.graphicsListWidget=new _a21({saveSupported:this.localStoragePersistSupported});this.graphicsListWidget.placeAt(this.drawWindowGraphicsListContainer);this.graphicsListWidget.viewModel.hasGraphics.subscribe(lang.hitch(this,this.handleCheckForExistingGraphics));this.graphicsListWidget.on("removeAllGraphics",lang.hitch(this,this.removeAllGraphics));this.graphicsListWidget.on("removeGraphic",lang.hitch(this,this.removeGraphic));this.graphicsListWidget.on("saveGraphics",lang.hitch(this,this.saveUserGraphics));}},saveUserGraphics:function(_a2e,_a2f){var _a30=this.persistUserGraphics(_a2e,_a2f);if(_a30){this.userPersistedGraphicsListWidget.addUserPersistedGraphics(_a30);this.viewModel.showSavedGraphicsTab(true);}},addUserPersistedGraphicsToMap:function(_a31){if(_a31==null||!lang.isObject(_a31)){return;}if(_a31.graphics==null||!lang.isArray(_a31.graphics)){return;}var _a32;for(var i=0;i<_a31.graphics.length;i++){_a32=_a31.graphics[i].graphic;var _a33=new _a27(_a32);var _a34={label:_a31.graphics[i].label,graphic:_a33};this.onAnnotationCreated(_a34);}},removeUserPersistedGraphics:function(_a35){var _a36=this.deleteUserPersistedGraphics(_a35);this.viewModel.showSavedGraphicsTab(_a36);},removeAllGraphics:function(){this.drawGraphicsLayer.clear();},removeGraphic:function(_a37){if(_a37){this.drawGraphicsLayer.remove(_a37);}},getUserGraphics:function(_a38){if(_a38&&lang.isFunction(_a38)){_a38(this.graphicsListWidget.getGraphics());}},handleCheckForExistingGraphics:function(_a39){if(!_a39){this.viewModel.graphicsListTabVisible(false);this.viewModel.showDraw();}else{this.viewModel.graphicsListTabVisible(true);}},handlePointDrawClick:function(){var _a3a=this.viewModel.pointActive();this.clearDraw();if(!_a3a){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT);this.viewModel.setDrawMode(this.viewModel.drawModes.point);}},handleTextDrawClick:function(){var _a3b=this.viewModel.textActive();this.clearDraw();if(!_a3b){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT);this.viewModel.setDrawMode(this.viewModel.drawModes.text);}},handleLineDrawClick:function(){var _a3c=this.viewModel.lineActive();this.clearDraw();if(!_a3c){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_LINE);this.viewModel.setDrawMode(this.viewModel.drawModes.line);}},handlePolylineDrawClick:function(){var _a3d=this.viewModel.polylineActive();this.clearDraw();if(!_a3d){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE);this.viewModel.setDrawMode(this.viewModel.drawModes.polyline);}},handlePolygonDrawClick:function(){var _a3e=this.viewModel.polygonActive();this.clearDraw();if(!_a3e){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON);this.viewModel.setDrawMode(this.viewModel.drawModes.polygon);}},handleRectangleDrawClick:function(){var _a3f=this.viewModel.rectangleActive();this.clearDraw();if(!_a3f){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_RECTANGLE);this.viewModel.setDrawMode(this.viewModel.drawModes.rectangle);}},clearDraw:function(){this.inherited(arguments);this.viewModel.setDrawMode(null);_a1d.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.DRAW_CANCEL);},geometryAdded:function(_a40){this.inherited(arguments);var _a41=this.viewModel.getCurrentDrawType();this.clearDraw();if(_a41!=null){if(_a41===this.viewModel.drawModes.rectangle){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_RECTANGLE);this.viewModel.setDrawMode(this.viewModel.drawModes.rectangle);}if(_a41===this.viewModel.drawModes.point){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT);this.viewModel.setDrawMode(this.viewModel.drawModes.point);}if(_a41===this.viewModel.drawModes.polygon){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON);this.viewModel.setDrawMode(this.viewModel.drawModes.polygon);}if(_a41===this.viewModel.drawModes.polyline){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE);this.viewModel.setDrawMode(this.viewModel.drawModes.polyline);}if(_a41===this.viewModel.drawModes.line){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_LINE);this.viewModel.setDrawMode(this.viewModel.drawModes.line);}if(_a41===this.viewModel.drawModes.text){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT);this.viewModel.setDrawMode(this.viewModel.drawModes.text);}}},toggleFreehand:function(){this.freeHandDrawCheckbox.set("checked",!this.freeHandDrawCheckbox.get("checked"));},handleFreehandToggled:function(){this.freehandActive=this.freeHandDrawCheckbox.get("checked");var _a42=this.viewModel.getCurrentDrawType();if(_a42===this.viewModel.drawModes.polygon){this.clearDraw();this.viewModel.setDrawMode(this.viewModel.drawModes.polygon);this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON);}if(_a42===this.viewModel.drawModes.polyline){this.clearDraw();this.viewModel.setDrawMode(this.viewModel.drawModes.polyline);this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE);}},onAnnotationCreated:function(_a43){this.inherited(arguments);this.graphicsListWidget.addGraphic(_a43);this.drawGraphicsLayer.add(_a43.graphic);},hidePopups:function(){if(this.graphicsListWidget){this.graphicsListWidget.hidePopups();}}});});},"dojo/colors":function(){define("dojo/colors",["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(dojo,lang,_a44,_a45){var _a46={};lang.setObject("dojo.colors",_a46);var _a47=function(m1,m2,h){if(h<0){++h;}if(h>1){--h;}var h6=6*h;if(h6<1){return m1+(m2-m1)*h6;}if(2*h<1){return m2;}if(3*h<2){return m1+(m2-m1)*(2/3-h)*6;}return m1;};dojo.colorFromRgb=_a44.fromRgb=function(_a48,obj){var m=_a48.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(m){var c=m[2].split(/\s*,\s*/),l=c.length,t=m[1],a;if((t=="rgb"&&l==3)||(t=="rgba"&&l==4)){var r=c[0];if(r.charAt(r.length-1)=="%"){a=_a45.map(c,function(x){return parseFloat(x)*2.56;});if(l==4){a[3]=c[3];}return _a44.fromArray(a,obj);}return _a44.fromArray(c,obj);}if((t=="hsl"&&l==3)||(t=="hsla"&&l==4)){var H=((parseFloat(c[0])%360)+360)%360/360,S=parseFloat(c[1])/100,L=parseFloat(c[2])/100,m2=L<=0.5?L*(S+1):L+S-L*S,m1=2*L-m2;a=[_a47(m1,m2,H+1/3)*256,_a47(m1,m2,H)*256,_a47(m1,m2,H-1/3)*256,1];if(l==4){a[3]=c[3];}return _a44.fromArray(a,obj);}}return null;};var _a49=function(c,low,high){c=Number(c);return isNaN(c)?high:c<low?low:c>high?high:c;};_a44.prototype.sanitize=function(){var t=this;t.r=Math.round(_a49(t.r,0,255));t.g=Math.round(_a49(t.g,0,255));t.b=Math.round(_a49(t.b,0,255));t.a=_a49(t.a,0,1);return this;};_a46.makeGrey=_a44.makeGrey=function(g,a){return _a44.fromArray([g,g,g,a]);};lang.mixin(_a44.named,{"aliceblue":[240,248,255],"antiquewhite":[250,235,215],"aquamarine":[127,255,212],"azure":[240,255,255],"beige":[245,245,220],"bisque":[255,228,196],"blanchedalmond":[255,235,205],"blueviolet":[138,43,226],"brown":[165,42,42],"burlywood":[222,184,135],"cadetblue":[95,158,160],"chartreuse":[127,255,0],"chocolate":[210,105,30],"coral":[255,127,80],"cornflowerblue":[100,149,237],"cornsilk":[255,248,220],"crimson":[220,20,60],"cyan":[0,255,255],"darkblue":[0,0,139],"darkcyan":[0,139,139],"darkgoldenrod":[184,134,11],"darkgray":[169,169,169],"darkgreen":[0,100,0],"darkgrey":[169,169,169],"darkkhaki":[189,183,107],"darkmagenta":[139,0,139],"darkolivegreen":[85,107,47],"darkorange":[255,140,0],"darkorchid":[153,50,204],"darkred":[139,0,0],"darksalmon":[233,150,122],"darkseagreen":[143,188,143],"darkslateblue":[72,61,139],"darkslategray":[47,79,79],"darkslategrey":[47,79,79],"darkturquoise":[0,206,209],"darkviolet":[148,0,211],"deeppink":[255,20,147],"deepskyblue":[0,191,255],"dimgray":[105,105,105],"dimgrey":[105,105,105],"dodgerblue":[30,144,255],"firebrick":[178,34,34],"floralwhite":[255,250,240],"forestgreen":[34,139,34],"gainsboro":[220,220,220],"ghostwhite":[248,248,255],"gold":[255,215,0],"goldenrod":[218,165,32],"greenyellow":[173,255,47],"grey":[128,128,128],"honeydew":[240,255,240],"hotpink":[255,105,180],"indianred":[205,92,92],"indigo":[75,0,130],"ivory":[255,255,240],"khaki":[240,230,140],"lavender":[230,230,250],"lavenderblush":[255,240,245],"lawngreen":[124,252,0],"lemonchiffon":[255,250,205],"lightblue":[173,216,230],"lightcoral":[240,128,128],"lightcyan":[224,255,255],"lightgoldenrodyellow":[250,250,210],"lightgray":[211,211,211],"lightgreen":[144,238,144],"lightgrey":[211,211,211],"lightpink":[255,182,193],"lightsalmon":[255,160,122],"lightseagreen":[32,178,170],"lightskyblue":[135,206,250],"lightslategray":[119,136,153],"lightslategrey":[119,136,153],"lightsteelblue":[176,196,222],"lightyellow":[255,255,224],"limegreen":[50,205,50],"linen":[250,240,230],"magenta":[255,0,255],"mediumaquamarine":[102,205,170],"mediumblue":[0,0,205],"mediumorchid":[186,85,211],"mediumpurple":[147,112,219],"mediumseagreen":[60,179,113],"mediumslateblue":[123,104,238],"mediumspringgreen":[0,250,154],"mediumturquoise":[72,209,204],"mediumvioletred":[199,21,133],"midnightblue":[25,25,112],"mintcream":[245,255,250],"mistyrose":[255,228,225],"moccasin":[255,228,181],"navajowhite":[255,222,173],"oldlace":[253,245,230],"olivedrab":[107,142,35],"orange":[255,165,0],"orangered":[255,69,0],"orchid":[218,112,214],"palegoldenrod":[238,232,170],"palegreen":[152,251,152],"paleturquoise":[175,238,238],"palevioletred":[219,112,147],"papayawhip":[255,239,213],"peachpuff":[255,218,185],"peru":[205,133,63],"pink":[255,192,203],"plum":[221,160,221],"powderblue":[176,224,230],"rosybrown":[188,143,143],"royalblue":[65,105,225],"saddlebrown":[139,69,19],"salmon":[250,128,114],"sandybrown":[244,164,96],"seagreen":[46,139,87],"seashell":[255,245,238],"sienna":[160,82,45],"skyblue":[135,206,235],"slateblue":[106,90,205],"slategray":[112,128,144],"slategrey":[112,128,144],"snow":[255,250,250],"springgreen":[0,255,127],"steelblue":[70,130,180],"tan":[210,180,140],"thistle":[216,191,216],"tomato":[255,99,71],"turquoise":[64,224,208],"violet":[238,130,238],"wheat":[245,222,179],"whitesmoke":[245,245,245],"yellowgreen":[154,205,50]});return _a44;});},"dojox/uuid/Uuid":function(){define("dojox/uuid/Uuid",["dojo/_base/lang","./_base"],function(dojo,uuid){dojox.uuid.Uuid=function(_a4a){this._uuidString=dojox.uuid.NIL_UUID;if(_a4a){dojox.uuid.assert(dojo.isString(_a4a));this._uuidString=_a4a.toLowerCase();dojox.uuid.assert(this.isValid());}else{var _a4b=dojox.uuid.Uuid.getGenerator();if(_a4b){this._uuidString=_a4b();dojox.uuid.assert(this.isValid());}}};dojox.uuid.Uuid.compare=function(_a4c,_a4d){var _a4e=_a4c.toString();var _a4f=_a4d.toString();if(_a4e>_a4f){return 1;}if(_a4e<_a4f){return -1;}return 0;};dojox.uuid.Uuid.setGenerator=function(_a50){dojox.uuid.assert(!_a50||dojo.isFunction(_a50));dojox.uuid.Uuid._ourGenerator=_a50;};dojox.uuid.Uuid.getGenerator=function(){return dojox.uuid.Uuid._ourGenerator;};dojox.uuid.Uuid.prototype.toString=function(){return this._uuidString;};dojox.uuid.Uuid.prototype.compare=function(_a51){return dojox.uuid.Uuid.compare(this,_a51);};dojox.uuid.Uuid.prototype.isEqual=function(_a52){return (this.compare(_a52)==0);};dojox.uuid.Uuid.prototype.isValid=function(){return dojox.uuid.isValid(this);};dojox.uuid.Uuid.prototype.getVariant=function(){return dojox.uuid.getVariant(this);};dojox.uuid.Uuid.prototype.getVersion=function(){if(!this._versionNumber){this._versionNumber=dojox.uuid.getVersion(this);}return this._versionNumber;};dojox.uuid.Uuid.prototype.getNode=function(){if(!this._nodeString){this._nodeString=dojox.uuid.getNode(this);}return this._nodeString;};dojox.uuid.Uuid.prototype.getTimestamp=function(_a53){if(!_a53){_a53=null;}switch(_a53){case "string":case String:return this.getTimestamp(Date).toUTCString();break;case "hex":if(!this._timestampAsHexString){this._timestampAsHexString=dojox.uuid.getTimestamp(this,"hex");}return this._timestampAsHexString;break;case null:case "date":case Date:if(!this._timestampAsDate){this._timestampAsDate=dojox.uuid.getTimestamp(this,Date);}return this._timestampAsDate;break;default:dojox.uuid.assert(false,"The getTimestamp() method dojox.uuid.Uuid was passed a bogus returnType: "+_a53);break;}};return dojox.uuid.Uuid;});},"esriviewer/ui/toolbar/base/model/BasemapsListingViewModel":function(){define("esriviewer/ui/toolbar/base/model/BasemapsListingViewModel",["dojo/_base/declare","dojo/_base/lang","dojo/topic"],function(_a54,lang,_a55){return _a54([],{constructor:function(){this.basemapKeyLookup={};this.visible=ko.observable(false);this.basemaps=ko.observableArray();this.handleBasemapClick=lang.hitch(this,this._handleBaseMapClick);},addBasemap:function(_a56){var _a57=lang.mixin({selected:ko.observable(false)},_a56);this.basemaps.push(_a57);this.basemapKeyLookup[_a57.key]=_a57;},_handleBaseMapClick:function(_a58){if(_a58==null){return;}this.setCurrentBasemap(_a58.key);this.visible(false);},removeBasemap:function(key){var _a59=this.basemapKeyLookup[key];if(_a59==null){return false;}delete this.basemapKeyLookup[key];this.basemaps.remove(_a59);return true;},setCurrentBasemap:function(key){var _a5a=this.basemapKeyLookup[key];if(_a5a==null){return;}_a5a.selected(true);var _a5b=this.basemaps.indexOf(_a5a);var _a5c=this.basemaps();for(var i=0;i<_a5c.length;i++){if(i!=_a5b){_a5c[i].selected(false);}}_a55.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.SET,key);}});});},"dijit/tree/_dndContainer":function(){define("dijit/tree/_dndContainer",["dojo/aspect","dojo/_base/declare","dojo/dom-class","dojo/_base/event","dojo/_base/lang","dojo/on","dojo/touch"],function(_a5d,_a5e,_a5f,_a60,lang,on,_a61){return _a5e("dijit.tree._dndContainer",null,{constructor:function(tree,_a62){this.tree=tree;this.node=tree.domNode;lang.mixin(this,_a62);this.current=null;this.containerState="";_a5f.add(this.node,"dojoDndContainer");this.events=[on(this.node,_a61.enter,lang.hitch(this,"onOverEvent")),on(this.node,_a61.leave,lang.hitch(this,"onOutEvent")),_a5d.after(this.tree,"_onNodeMouseEnter",lang.hitch(this,"onMouseOver"),true),_a5d.after(this.tree,"_onNodeMouseLeave",lang.hitch(this,"onMouseOut"),true),on(this.node,"dragstart",lang.hitch(_a60,"stop")),on(this.node,"selectstart",lang.hitch(_a60,"stop"))];},destroy:function(){var h;while(h=this.events.pop()){h.remove();}this.node=this.parent=null;},onMouseOver:function(_a63){this.current=_a63;},onMouseOut:function(){this.current=null;},_changeState:function(type,_a64){var _a65="dojoDnd"+type;var _a66=type.toLowerCase()+"State";_a5f.replace(this.node,_a65+_a64,_a65+this[_a66]);this[_a66]=_a64;},_addItemClass:function(node,type){_a5f.add(node,"dojoDndItem"+type);},_removeItemClass:function(node,type){_a5f.remove(node,"dojoDndItem"+type);},onOverEvent:function(){this._changeState("Container","Over");},onOutEvent:function(){this._changeState("Container","");}});});},"url:esriviewer/ui/draw/configure/geometry/template/ConfigurePolygonTemplate.html":"<div class=\"configureDrawGeometryContainer\">\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Fill Style</span>\r\n        <select data-bind=\"options: fillStyles ,value:selectedFillStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Outline Style</span>\r\n        <select data-bind=\"options: outlineStyles ,value:selectedOutlineStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Outline Width</span>\r\n        <select data-bind=\"options: outlineWidths ,value:selectedOutlineWidth\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Angle</span>\r\n        <select data-bind=\"options: angles ,value:selectedAngle\"></select>\r\n    </div>\r\n    <div data-dojo-attach-point=\"transparencySliderContainer\"></div>\r\n\r\n    <div class=\"colorPickerTextContainer\">\r\n        <span class=\"colorPickerText\"\r\n              data-bind=\"click: setOutlineColorMode,css:{colorPickerTextSelected: outlineColorActive}\"> Outline Color</span>\r\n        <span class=\"colorPickerText\"\r\n              data-bind=\"click: setFillColorMode,css:{colorPickerTextSelected: fillColorActive}\"> Fill Color</span>\r\n\r\n    </div>\r\n\r\n\r\n    <div class=\"configureDrawColorPickerContainer\" data-dojo-attach-point=\"colorPickerContainer\"></div>\r\n</div>","esriviewer/ui/socialmedia/SocialMediaWidgetWindow":function(){define("esriviewer/ui/socialmedia/SocialMediaWidgetWindow",["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/window","dojo/dom-class","../window/WindowWidget"],function(_a67,lang,_a68,_a69,_a6a,_a6b){return _a67([_a6b],{defaultPositioning:{x:400,y:125},constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/socialmedia/SocialMediaWidget"],lang.hitch(this,function(_a6c){this.socialMediaWidget=new _a6c();this.setContent(this.socialMediaWidget.domNode);this.socialMediaWidget.listenForMapCursor();}));},windowWidth:"400px",windowHeaderText:"Search Social Media",windowIconAltText:"Search Social Media",windowIconClass:"commonIcons16 binoculars",positioningParamName:"socialMedia",postCreate:function(){this.inherited(arguments);_a6a.add(this.windowContent,"socialMediaWindowContent");},initListeners:function(){this.inherited(arguments);this.subscribes.push(_a68.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.SOCIAL_MEDIA.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_a68.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.SOCIAL_MEDIA.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_a68.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.SOCIAL_MEDIA.TOGGLE,lang.hitch(this,this.toggle)));},show:function(){this.inherited(arguments);if(this.socialMediaWidget){this.socialMediaWidget.listenForMapCursor();}},hide:function(){this.inherited(arguments);if(this.socialMediaWidget){this.socialMediaWidget.stopMapCursorListener();}}});});},"dijit/form/_FormSelectWidget":function(){define("dijit/form/_FormSelectWidget",["dojo/_base/array","dojo/_base/Deferred","dojo/aspect","dojo/data/util/sorter","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/when","dojo/store/util/QueryResults","./_FormValueWidget"],function(_a6d,_a6e,_a6f,_a70,_a71,dom,_a72,_a73,lang,_a74,when,_a75,_a76){var _a77=_a71("dijit.form._FormSelectWidget",_a76,{multiple:false,options:null,store:null,query:null,queryOptions:null,labelAttr:"",onFetch:null,sortByLabel:true,loadChildrenOnOpen:false,onLoadDeferred:null,getOptions:function(_a78){var _a79=_a78,opts=this.options||[],l=opts.length;if(_a79===undefined){return opts;}if(lang.isArray(_a79)){return _a6d.map(_a79,"return this.getOptions(item);",this);}if(lang.isObject(_a78)){if(!_a6d.some(this.options,function(o,idx){if(o===_a79||(o.value&&o.value===_a79.value)){_a79=idx;return true;}return false;})){_a79=-1;}}if(typeof _a79=="string"){for(var i=0;i<l;i++){if(opts[i].value===_a79){_a79=i;break;}}}if(typeof _a79=="number"&&_a79>=0&&_a79<l){return this.options[_a79];}return null;},addOption:function(_a7a){if(!lang.isArray(_a7a)){_a7a=[_a7a];}_a6d.forEach(_a7a,function(i){if(i&&lang.isObject(i)){this.options.push(i);}},this);this._loadChildren();},removeOption:function(_a7b){if(!lang.isArray(_a7b)){_a7b=[_a7b];}var _a7c=this.getOptions(_a7b);_a6d.forEach(_a7c,function(i){if(i){this.options=_a6d.filter(this.options,function(node){return (node.value!==i.value||node.label!==i.label);});this._removeOptionItem(i);}},this);this._loadChildren();},updateOption:function(_a7d){if(!lang.isArray(_a7d)){_a7d=[_a7d];}_a6d.forEach(_a7d,function(i){var _a7e=this.getOptions(i),k;if(_a7e){for(k in i){_a7e[k]=i[k];}}},this);this._loadChildren();},setStore:function(_a7f,_a80,_a81){var _a82=this.store;_a81=_a81||{};if(_a82!==_a7f){var h;while((h=this._notifyConnections.pop())){h.remove();}if(!_a7f.get){lang.mixin(_a7f,{_oldAPI:true,get:function(id){var _a83=new _a6e();this.fetchItemByIdentity({identity:id,onItem:function(_a84){_a83.resolve(_a84);},onError:function(_a85){_a83.reject(_a85);}});return _a83.promise;},query:function(_a86,_a87){var _a88=new _a6e(function(){if(_a89.abort){_a89.abort();}});_a88.total=new _a6e();var _a89=this.fetch(lang.mixin({query:_a86,onBegin:function(_a8a){_a88.total.resolve(_a8a);},onComplete:function(_a8b){_a88.resolve(_a8b);},onError:function(_a8c){_a88.reject(_a8c);}},_a87));return new _a75(_a88);}});if(_a7f.getFeatures()["dojo.data.api.Notification"]){this._notifyConnections=[_a6f.after(_a7f,"onNew",lang.hitch(this,"_onNewItem"),true),_a6f.after(_a7f,"onDelete",lang.hitch(this,"_onDeleteItem"),true),_a6f.after(_a7f,"onSet",lang.hitch(this,"_onSetItem"),true)];}}this._set("store",_a7f);}if(this.options&&this.options.length){this.removeOption(this.options);}if(this._queryRes&&this._queryRes.close){this._queryRes.close();}if(_a81.query){this._set("query",_a81.query);this._set("queryOptions",_a81.queryOptions);}if(_a7f){this._loadingStore=true;this.onLoadDeferred=new _a6e();this._queryRes=_a7f.query(this.query,this.queryOptions);when(this._queryRes,lang.hitch(this,function(_a8d){if(this.sortByLabel&&!_a81.sort&&_a8d.length){if(_a8d[0].getValue){_a8d.sort(_a70.createSortFunction([{attribute:_a7f.getLabelAttributes(_a8d[0])[0]}],_a7f));}else{var _a8e=this.labelAttr;_a8d.sort(function(a,b){return a[_a8e]>b[_a8e]?1:b[_a8e]>a[_a8e]?-1:0;});}}if(_a81.onFetch){_a8d=_a81.onFetch.call(this,_a8d,_a81);}_a6d.forEach(_a8d,function(i){this._addOptionForItem(i);},this);if(this._queryRes.observe){this._queryRes.observe(lang.hitch(this,function(_a8f,_a90,_a91){if(_a90==_a91){this._onSetItem(_a8f);}else{if(_a90!=-1){this._onDeleteItem(_a8f);}if(_a91!=-1){this._onNewItem(_a8f);}}}),true);}this._loadingStore=false;this.set("value","_pendingValue" in this?this._pendingValue:_a80);delete this._pendingValue;if(!this.loadChildrenOnOpen){this._loadChildren();}else{this._pseudoLoadChildren(_a8d);}this.onLoadDeferred.resolve(true);this.onSetStore();}),function(err){this.onLoadDeferred.reject(err);});}return _a82;},_setValueAttr:function(_a92,_a93){if(!this._onChangeActive){_a93=null;}if(this._loadingStore){this._pendingValue=_a92;return;}var opts=this.getOptions()||[];if(!lang.isArray(_a92)){_a92=[_a92];}_a6d.forEach(_a92,function(i,idx){if(!lang.isObject(i)){i=i+"";}if(typeof i==="string"){_a92[idx]=_a6d.filter(opts,function(node){return node.value===i;})[0]||{value:"",label:""};}},this);_a92=_a6d.filter(_a92,function(i){return i&&i.value;});if(!this.multiple&&(!_a92[0]||!_a92[0].value)&&opts.length){_a92[0]=opts[0];}_a6d.forEach(opts,function(i){i.selected=_a6d.some(_a92,function(v){return v.value===i.value;});});var val=_a6d.map(_a92,function(i){return i.value;}),disp=_a6d.map(_a92,function(i){return i.label;});if(typeof val=="undefined"||typeof val[0]=="undefined"){return;}this._setDisplay(this.multiple?disp:disp[0]);this.inherited(arguments,[this.multiple?val:val[0],_a93]);this._updateSelection();},_getDisplayedValueAttr:function(){var val=this.get("value");if(!lang.isArray(val)){val=[val];}var ret=_a6d.map(this.getOptions(val),function(v){if(v&&"label" in v){return v.label;}else{if(v){return v.value;}}return null;},this);return this.multiple?ret:ret[0];},_loadChildren:function(){if(this._loadingStore){return;}_a6d.forEach(this._getChildren(),function(_a94){_a94.destroyRecursive();});_a6d.forEach(this.options,this._addOptionItem,this);this._updateSelection();},_updateSelection:function(){this._set("value",this._getValueFromOpts());var val=this.value;if(!lang.isArray(val)){val=[val];}if(val&&val[0]){_a6d.forEach(this._getChildren(),function(_a95){var _a96=_a6d.some(val,function(v){return _a95.option&&(v===_a95.option.value);});_a72.toggle(_a95.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),_a96);_a95.domNode.setAttribute("aria-selected",_a96?"true":"false");},this);}},_getValueFromOpts:function(){var opts=this.getOptions()||[];if(!this.multiple&&opts.length){var opt=_a6d.filter(opts,function(i){return i.selected;})[0];if(opt&&opt.value){return opt.value;}else{opts[0].selected=true;return opts[0].value;}}else{if(this.multiple){return _a6d.map(_a6d.filter(opts,function(i){return i.selected;}),function(i){return i.value;})||[];}}return "";},_onNewItem:function(item,_a97){if(!_a97||!_a97.parent){this._addOptionForItem(item);}},_onDeleteItem:function(item){var _a98=this.store;this.removeOption(_a98.getIdentity(item));},_onSetItem:function(item){this.updateOption(this._getOptionObjForItem(item));},_getOptionObjForItem:function(item){var _a99=this.store,_a9a=(this.labelAttr&&this.labelAttr in item)?item[this.labelAttr]:_a99.getLabel(item),_a9b=(_a9a?_a99.getIdentity(item):null);return {value:_a9b,label:_a9a,item:item};},_addOptionForItem:function(item){var _a9c=this.store;if(_a9c.isItemLoaded&&!_a9c.isItemLoaded(item)){_a9c.loadItem({item:item,onItem:function(i){this._addOptionForItem(i);},scope:this});return;}var _a9d=this._getOptionObjForItem(item);this.addOption(_a9d);},constructor:function(_a9e){this._oValue=(_a9e||{}).value||null;this._notifyConnections=[];},buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.focusNode,false);},_fillContent:function(){if(!this.options){this.options=this.srcNodeRef?_a74("> *",this.srcNodeRef).map(function(node){if(node.getAttribute("type")==="separator"){return {value:"",label:"",selected:false,disabled:false};}return {value:(node.getAttribute("data-"+_a73._scopeName+"-value")||node.getAttribute("value")),label:String(node.innerHTML),selected:node.getAttribute("selected")||false,disabled:node.getAttribute("disabled")||false};},this):[];}if(!this.value){this._set("value",this._getValueFromOpts());}else{if(this.multiple&&typeof this.value=="string"){this._set("value",this.value.split(","));}}},postCreate:function(){this.inherited(arguments);this.connect(this,"onChange","_updateSelection");var _a9f=this.store;if(_a9f&&(_a9f.getIdentity||_a9f.getFeatures()["dojo.data.api.Identity"])){this.store=null;this.setStore(_a9f,this._oValue);}},startup:function(){this._loadChildren();this.inherited(arguments);},destroy:function(){var h;while((h=this._notifyConnections.pop())){h.remove();}if(this._queryRes&&this._queryRes.close){this._queryRes.close();}this.inherited(arguments);},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return [];},_getSelectedOptionsAttr:function(){return this.getOptions(this.get("value"));},_pseudoLoadChildren:function(){},onSetStore:function(){}});return _a77;});},"esriviewer/ui/configure/ConfigureViewerWindow":function(){define("esriviewer/ui/configure/ConfigureViewerWindow",["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/dom-class","../window/WindowWidget"],function(_aa0,_aa1,lang,_aa2,_aa3){return _aa0([_aa3],{defaultPositioning:{x:500,y:50},constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/configure/ConfigureViewerWidget"],lang.hitch(this,function(_aa4){this.configureViewerWidget=new _aa4();this.setContent(this.configureViewerWidget.domNode);}));},isPositionedByConfig:true,canMinimize:false,windowHeaderText:"Configure Viewer",windowIconAltText:"Configure Viewer",windowIconClass:"commonIcons16 gear",postCreate:function(){this.inherited(arguments);_aa2.add(this.windowContent,"configureWindowContent");},initListeners:function(){this.inherited(arguments);this.subscribes.push(_aa1.subscribe(VIEWER_GLOBALS.EVENTS.CONFIGURE.WINDOW.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_aa1.subscribe(VIEWER_GLOBALS.EVENTS.CONFIGURE.WINDOW.HIDE,lang.hitch(this,this.hide)));},hidePopups:function(){this.inherited(arguments);if(this.configureViewerWidget){this.configureViewerWidget.hidePopups();}}});});},"dijit/form/Select":function(){require({cache:{"url:dijit/form/templates/Select.html":"<table class=\"dijit dijitReset dijitInline dijitLeft\"\n\tdata-dojo-attach-point=\"_buttonNode,tableNode,focusNode\" cellspacing='0' cellpadding='0'\n\trole=\"listbox\" aria-haspopup=\"true\"\n\t><tbody role=\"presentation\"><tr role=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonContents\" role=\"presentation\"\n\t\t\t><div class=\"dijitReset dijitInputField dijitButtonText\"  data-dojo-attach-point=\"containerNode,_popupStateNode\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitValidationContainer\"\n\t\t\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t/></div\n\t\t\t><input type=\"hidden\" ${!nameAttrSetting} data-dojo-attach-point=\"valueNode\" value=\"${value}\" aria-hidden=\"true\"\n\t\t/></td\n\t\t><td class=\"dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\"\n\t\t\tdata-dojo-attach-point=\"titleNode\" role=\"presentation\"\n\t\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t${_buttonInputDisabled}\n\t\t/></td\n\t></tr></tbody\n></table>\n"}});define("dijit/form/Select",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/_base/event","dojo/i18n","dojo/_base/lang","dojo/sniff","./_FormSelectWidget","../_HasDropDown","../Menu","../MenuItem","../MenuSeparator","../Tooltip","dojo/text!./templates/Select.html","dojo/i18n!./nls/validate"],function(_aa5,_aa6,_aa7,_aa8,_aa9,_aaa,i18n,lang,has,_aab,_aac,Menu,_aad,_aae,_aaf,_ab0){var _ab1=_aa6("dijit.form._SelectMenu",Menu,{autoFocus:true,buildRendering:function(){this.inherited(arguments);var o=(this.menuTableNode=this.domNode);var n=(this.domNode=this.ownerDocument.createElement("div"));n.style.cssText="overflow-x: hidden; overflow-y: scroll";if(o.parentNode){o.parentNode.replaceChild(n,o);}_aa8.remove(o,"dijitMenuTable");n.className=o.className+" dijitSelectMenu";o.className="dijitReset dijitMenuTable";o.setAttribute("role","listbox");n.setAttribute("role","presentation");n.appendChild(o);},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onselectstart",_aaa.stop);},focus:function(){var _ab2=false,val=this.parentWidget.value;if(lang.isArray(val)){val=val[val.length-1];}if(val){_aa5.forEach(this.parentWidget._getChildren(),function(_ab3){if(_ab3.option&&(val===_ab3.option.value)){_ab2=true;this.focusChild(_ab3,false);}},this);}if(!_ab2){this.inherited(arguments);}},resize:function(mb){if(mb){_aa9.setMarginBox(this.domNode,mb);if("w" in mb){this.menuTableNode.style.width="100%";}}}});var _ab4=_aa6("dijit.form.Select",[_aab,_aac],{baseClass:"dijitSelect dijitValidationTextBox",templateString:_ab0,_buttonInputDisabled:has("ie")?"disabled":"",required:false,state:"",message:"",tooltipPosition:[],emptyLabel:"&#160;",_isLoaded:false,_childrenLoaded:false,_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var si=this.srcNodeRef.selectedIndex||0;this.value=this.options[si>=0?si:0].value;}this.dropDown=new _ab1({id:this.id+"_menu",parentWidget:this});_aa8.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "));},_getMenuItemForOption:function(_ab5){if(!_ab5.value&&!_ab5.label){return new _aae({ownerDocument:this.ownerDocument});}else{var _ab6=lang.hitch(this,"_setValueAttr",_ab5);var item=new _aad({option:_ab5,label:_ab5.label||this.emptyLabel,onClick:_ab6,ownerDocument:this.ownerDocument,dir:this.dir,disabled:_ab5.disabled||false});item.focusNode.setAttribute("role","option");return item;}},_addOptionItem:function(_ab7){if(this.dropDown){this.dropDown.addChild(this._getMenuItemForOption(_ab7));}},_getChildren:function(){if(!this.dropDown){return [];}return this.dropDown.getChildren();},_loadChildren:function(_ab8){if(_ab8===true){if(this.dropDown){delete this.dropDown.focusedChild;}if(this.options.length){this.inherited(arguments);}else{_aa5.forEach(this._getChildren(),function(_ab9){_ab9.destroyRecursive();});var item=new _aad({ownerDocument:this.ownerDocument,label:this.emptyLabel});this.dropDown.addChild(item);}}else{this._updateSelection();}this._isLoaded=false;this._childrenLoaded=true;if(!this._loadingStore){this._setValueAttr(this.value,false);}},_refreshState:function(){if(this._started){this.validate(this.focused);}},startup:function(){this.inherited(arguments);this._refreshState();},_setValueAttr:function(_aba){this.inherited(arguments);_aa7.set(this.valueNode,"value",this.get("value"));this._refreshState();},_setDisabledAttr:function(_abb){this.inherited(arguments);this._refreshState();},_setRequiredAttr:function(_abc){this._set("required",_abc);this.focusNode.setAttribute("aria-required",_abc);this._refreshState();},_setOptionsAttr:function(_abd){this._isLoaded=false;this._set("options",_abd);},_setDisplay:function(_abe){var lbl=_abe||this.emptyLabel;this.containerNode.innerHTML="<span role=\"option\" class=\"dijitReset dijitInline "+this.baseClass.replace(/\s+|$/g,"Label ")+"\">"+lbl+"</span>";},validate:function(_abf){var _ac0=this.disabled||this.isValid(_abf);this._set("state",_ac0?"":(this._hasBeenBlurred?"Error":"Incomplete"));this.focusNode.setAttribute("aria-invalid",_ac0?"false":"true");var _ac1=_ac0?"":this._missingMsg;if(_ac1&&this.focused&&this._hasBeenBlurred){_aaf.show(_ac1,this.domNode,this.tooltipPosition,!this.isLeftToRight());}else{_aaf.hide(this.domNode);}this._set("message",_ac1);return _ac0;},isValid:function(){return (!this.required||this.value===0||!(/^\s*$/.test(this.value||"")));},reset:function(){this.inherited(arguments);_aaf.hide(this.domNode);this._refreshState();},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=i18n.getLocalization("dijit.form","validate",this.lang).missingMessage;},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onselectstart",_aaa.stop);this.domNode.setAttribute("aria-expanded","false");if(has("ie")<9){this.defer(function(){try{var s=domStyle.getComputedStyle(this.domNode);if(s){var ff=s.fontFamily;if(ff){var _ac2=this.domNode.getElementsByTagName("INPUT");if(_ac2){for(var i=0;i<_ac2.length;i++){_ac2[i].style.fontFamily=ff;}}}}}catch(e){}});}},_setStyleAttr:function(_ac3){this.inherited(arguments);_aa8.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width);},isLoaded:function(){return this._isLoaded;},loadDropDown:function(_ac4){this._loadChildren(true);this._isLoaded=true;_ac4();},closeDropDown:function(){this.inherited(arguments);if(this.dropDown&&this.dropDown.menuTableNode){this.dropDown.menuTableNode.style.width="";}},destroy:function(_ac5){if(this.dropDown&&!this.dropDown._destroyed){this.dropDown.destroyRecursive(_ac5);delete this.dropDown;}this.inherited(arguments);},_onFocus:function(){this.validate(true);this.inherited(arguments);},_onBlur:function(){_aaf.hide(this.domNode);this.inherited(arguments);this.validate(false);}});_ab4._Menu=_ab1;return _ab4;});},"esriviewer/loader/base/BaseViewerPlacement":function(){define("esriviewer/loader/base/BaseViewerPlacement",["dojo/_base/declare","dojo/_base/window","dojo/topic","dojo/_base/lang","dojo/dom-construct"],function(_ac6,_ac7,_ac8,lang,_ac9){return _ac6([],{label:"unknown",isAbsolutePositioned:false,isWindowless:true,MAP_DIV_CLASS:"mapdiv",constructor:function(){this.initUI();this.initListeners();},initUI:function(){this.mapDiv=_ac9.create("div",{className:this.MAP_DIV_CLASS});},initListeners:function(){_ac8.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAIN_TOOLBAR,lang.hitch(this,this.placeMainToolbar));_ac8.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAIN_TOOLBAR_DROP_DOWN,lang.hitch(this,this.placeMainToolbarDropdown));_ac8.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.NAVIGATION_TOOLBAR,lang.hitch(this,this.placeNavigationToolbar));_ac8.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.HEADER,lang.hitch(this,this.placeHeader));_ac8.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.VIEWER_ACCORDION,lang.hitch(this,this.placeViewerAccordion));_ac8.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.FOOTER,lang.hitch(this,this.placeFooterWidget));_ac8.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MESSAGING,lang.hitch(this,this.placeMessagingWidget));_ac8.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.THROBBER,lang.hitch(this,this.placeThrobberWidget));_ac8.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.BASEMAP_GALLERY,lang.hitch(this,this.placeBasemapGallery));_ac8.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAP_SCALE_AND_COORDINATES,lang.hitch(this,this.placeMapScaleAndCoordinates));_ac8.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.CREATE_BOOOKMARK,lang.hitch(this,this.placeCreateBookmarkWidget));_ac8.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MENU_BAR,lang.hitch(this,this.placeMenuBarWidget));_ac8.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.USER_LOCATION,lang.hitch(this,this.placeUserLocationWidget));_ac8.subscribe(VIEWER_GLOBALS.EVENTS.MAP.GET_MAP_DIV,lang.hitch(this,this.handleGetMapDiv));},handleGetMapDiv:function(_aca){if(_aca!=null&&lang.isFunction(_aca)){_aca(this.mapDiv);}},placeMainToolbarDropdown:function(_acb){},placeMenuBarWidget:function(_acc){},placeCreateBookmarkWidget:function(_acd){},placeMapScaleAndCoordinates:function(_ace){},placeBasemapGallery:function(_acf){},placeNavigationToolbar:function(_ad0){},placeHeader:function(_ad1){},placeViewerAccordion:function(_ad2){},placeMainToolbar:function(_ad3){},placeUserLocationWidget:function(_ad4){if(_ad4){var _ad5=this._getMapContainer();if(_ad5){_ad4.placeAt(_ad5);}}},placeFooterWidget:function(_ad6){if(_ad6){_ad6.placeAt(_ac7.body());}},placeMessagingWidget:function(_ad7){},placeThrobberWidget:function(_ad8){},_getMapContainer:function(){if(this.mapContainer==null){var _ad9;_ac8.publish(VIEWER_GLOBALS.EVENTS.MAP.GET_MAP_DIV,function(mDiv){_ad9=mDiv;});this.mapContainer=_ad9;}return this.mapContainer;}});});},"esriviewer/ui/draw/configure/geometry/BaseGeometryConfigurationWidget":function(){define("esriviewer/ui/draw/configure/geometry/BaseGeometryConfigurationWidget",["dojo/_base/declare","dojo/_base/lang","dijit/form/HorizontalSlider","dojo/_base/Color","dijit/ColorPalette","dojo/dom-attr","dojo/dom-style","dojo/dom-construct","dojo/dom-class","../../../base/UITemplatedWidget"],function(_ada,lang,_adb,_adc,_add,_ade,_adf,_ae0,_ae1,_ae2){return _ada([_ae2],{defaultColor:"#ff0000",transparencySliderContainer:null,colorPickerContainer:null,defaultTransparency:75,postCreate:function(){this.inherited(arguments);if(this.transparencySliderContainer!=null){this.createTransparencySlider();}if(this.colorPickerContainer!=null){this.createColorPicker();}},createTransparencySlider:function(){this.transparencySliderLabel=_ae0.create("div");_adf.set(this.transparencySliderLabel,"margin","8px 0 5px 0");_ade.set(this.transparencySliderLabel,"innerHTML","Opacity - "+this.defaultTransparency+"%");_ae1.add(this.transparencySliderLabel,"configureGeometryOpacityLabel");_ae0.place(this.transparencySliderLabel,this.transparencySliderContainer);var _ae3=_ae0.create("div");_ae0.place(_ae3,this.transparencySliderContainer);this.transparencySlider=new _adb({value:this.defaultTransparency,maximum:100,minimum:5,showButtons:false,pageIncrement:10,style:"width:195px"},_ae3);this.transparencySlider.on("change",lang.hitch(this,this.handleTransparencyChanged));this.transparencySlider.startup();},createColorPicker:function(){var _ae4=_ae0.create("div");_ae0.place(_ae4,this.colorPickerContainer);this.colorPicker=new _add({value:this.defaultColor},_ae4);this.colorPicker.on("change",lang.hitch(this,this.handleColorPickerChanged));},handleTransparencyChanged:function(_ae5){_ade.set(this.transparencySliderLabel,"innerHTML","Opacity - "+Math.ceil(_ae5)+" %");this.processChange();},handleColorPickerChanged:function(_ae6){this.processChange();},getTransparency:function(){if(this.transparencySlider==null){return 100;}else{return Math.ceil(this.transparencySlider.get("value"));}},getColor:function(){var _ae7=_adc.fromHex(this.colorPicker.get("value"));var _ae8=this.getTransparency()/100;return new _adc([_ae7.r,_ae7.g,_ae7.b,_ae8]);},processChange:function(){},onChange:function(_ae9){},getSymbol:function(){return null;}});});},"dojo/store/util/QueryResults":function(){define("dojo/store/util/QueryResults",["../../_base/array","../../_base/lang","../../_base/Deferred"],function(_aea,lang,_aeb){var _aec=function(_aed){if(!_aed){return _aed;}if(_aed.then){_aed=lang.delegate(_aed);}function _aee(_aef){if(!_aed[_aef]){_aed[_aef]=function(){var args=arguments;return _aeb.when(_aed,function(_af0){Array.prototype.unshift.call(args,_af0);return _aec(_aea[_aef].apply(_aea,args));});};}};_aee("forEach");_aee("filter");_aee("map");if(!_aed.total){_aed.total=_aeb.when(_aed,function(_af1){return _af1.length;});}return _aed;};lang.setObject("dojo.store.util.QueryResults",_aec);return _aec;});},"xstyle/util/createStyleSheet":function(){define("xstyle/util/createStyleSheet",[],function(){function has(){return !document.createStyleSheet;};var head=document.head;return function insertCss(css){if(has("dom-create-style-element")){_af2=document.createElement("style");_af2.setAttribute("type","text/css");_af2.appendChild(document.createTextNode(css));head.insertBefore(_af2,head.firstChild);return _af2;}else{var _af2=document.createStyleSheet();_af2.cssText=css;return _af2.owningElement;}};});},"url:esriviewer/ui/messaging/template/MessagingWidgetTemplate.html":"<div class=\"defaultBorder defaultBackground statusMessageContainer threePixelBorderRadius defaultBoxShadow\"\r\n     data-bind=\"visible:visible\">\r\n    <div class=\"commonIcons16 infoBlock messagingIcon\"></div>\r\n    <div class=\"statusDivInner threePixelBorderRadius\">\r\n        <div class=\"statusDivMessage\" data-bind=\"text:message\"></div>\r\n    </div>\r\n</div>","dijit/CheckedMenuItem":function(){require({cache:{"url:dijit/templates/CheckedMenuItem.html":"<tr class=\"dijitReset dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"menuitemcheckbox\" tabIndex=\"-1\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuItemIcon dijitCheckedMenuItemIcon\" data-dojo-attach-point=\"iconNode\"/>\n\t\t<span class=\"dijitCheckedMenuItemIconChar\">&#10003;</span>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode,labelNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">&#160;</td>\n</tr>\n"}});define("dijit/CheckedMenuItem",["dojo/_base/declare","dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(_af3,_af4,_af5,_af6){return _af3("dijit.CheckedMenuItem",_af5,{templateString:_af6,checked:false,_setCheckedAttr:function(_af7){_af4.toggle(this.domNode,"dijitCheckedMenuItemChecked",_af7);this.domNode.setAttribute("aria-checked",_af7?"true":"false");this._set("checked",_af7);},iconClass:"",onChange:function(){},_onClick:function(evt){if(!this.disabled){this.set("checked",!this.checked);this.onChange(this.checked);}this.onClick(evt);}});});},"esriviewer/ui/draw/model/DrawWidgetViewModel":function(){define("esriviewer/ui/draw/model/DrawWidgetViewModel",["dojo/_base/declare"],function(_af8){return _af8([],{drawModes:{"point":"point","line":"line","polyline":"polyline","polygon":"polygon","rectangle":"rectangle","text":"text"},constructor:function(){var self=this;this.showUserPersistedGraphicsIcon=ko.observable(true);this.showDrawWindowActions=ko.observable(true);this.showDrawPolylineIcon=ko.observable(true);this.showDrawTextIcon=ko.observable(true);this.showDrawPointIcon=ko.observable(true);this.showDrawLineIcon=ko.observable(true);this.showDrawPolygonIcon=ko.observable(true);this.showDrawRectangleIcon=ko.observable(true);this.forceHideGraphicsListTab=ko.observable(false);this.polylineActive=ko.observable(false);this.pointActive=ko.observable(false);this.lineActive=ko.observable(false);this.rectangleActive=ko.observable(false);this.polygonActive=ko.observable(false);this.textActive=ko.observable(false);this.graphicsListTabVisible=ko.observable(false);this.freehandContainerVisible=ko.observable(false);this.userPersistedGraphicsVisible=ko.observable(false);this.graphicsListVisible=ko.observable(false);this.configurationVisible=ko.observable(false);this.drawVisible=ko.observable(true);var _af9=function(){return (!self.forceHideGraphicsListTab())&&self.graphicsListTabVisible();};this.showGraphicsListTab=ko.computed(_af9);this.showSavedGraphicsTab=ko.observable(false);},showUserPersistedGraphics:function(){this.graphicsListVisible(false);this.configurationVisible(false);this.drawVisible(false);this.userPersistedGraphicsVisible(true);this.freehandContainerVisible(false);},showGraphicsList:function(){this.graphicsListVisible(true);this.configurationVisible(false);this.drawVisible(false);this.userPersistedGraphicsVisible(false);this.freehandContainerVisible(false);},showConfiguration:function(){this.graphicsListVisible(false);this.configurationVisible(true);this.userPersistedGraphicsVisible(false);this.drawVisible(false);this.freehandContainerVisible(false);},showDraw:function(){this.graphicsListVisible(false);this.userPersistedGraphicsVisible(false);this.configurationVisible(false);this.drawVisible(true);this.freehandContainerVisible(this.polygonActive()||this.lineActive());},setDrawMode:function(mode){this.pointActive(false);this.lineActive(false);this.polylineActive(false);this.rectangleActive(false);this.polygonActive(false);this.textActive(false);this.freehandContainerVisible(false);if(mode!=null){if(mode===this.drawModes.point){this.pointActive(true);}else{if(mode===this.drawModes.line){this.lineActive(true);if(this.drawVisible()){this.freehandContainerVisible(false);}}else{if(mode===this.drawModes.polyline){this.polylineActive(true);if(this.drawVisible()){this.freehandContainerVisible(true);}}else{if(mode===this.drawModes.rectangle){this.rectangleActive(true);}else{if(mode===this.drawModes.polygon){this.polygonActive(true);if(this.drawVisible()){this.freehandContainerVisible(true);}}else{if(mode===this.drawModes.text){this.textActive(true);}}}}}}}},getCurrentDrawType:function(){if(this.polygonActive()){return this.drawModes.polygon;}else{if(this.lineActive()){return this.drawModes.line;}else{if(this.rectangleActive()){return this.drawModes.rectangle;}else{if(this.pointActive()){return this.drawModes.point;}else{if(this.polylineActive()){return this.drawModes.polyline;}else{if(this.textActive()){return this.drawModes.text;}else{return null;}}}}}}}});});},"esriviewer/ui/logging/LoggingWidgetWindow":function(){define("esriviewer/ui/logging/LoggingWidgetWindow",["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/dom-style","../window/WindowWidget"],function(_afa,_afb,lang,_afc,_afd){return _afa([_afd],{defaultPositioning:{x:10,y:240},windowWidth:"500px",windowHeaderText:"Logging",windowIconAltText:"Logging",windowIconClass:"commonIcons16 list",positioningParamName:"logging",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/logging/LoggingWidget"],lang.hitch(this,function(_afe){this.loggingWidget=new _afe();this.setContent(this.loggingWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_afb.subscribe(VIEWER_GLOBALS.EVENTS.LOGGING.WINDOW.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_afb.subscribe(VIEWER_GLOBALS.EVENTS.LOGGING.WINDOW.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_afb.subscribe(VIEWER_GLOBALS.EVENTS.LOGGING.WINDOW.TOGGLE,lang.hitch(this,this.toggle)));},hidePopups:function(){this.inherited(arguments);if(this.loggingWidget){this.loggingWidget.hidePopups();}}});});},"esriviewer/ui/portal/PortalPublisherWindowWidget":function(){define("esriviewer/ui/portal/PortalPublisherWindowWidget",["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/window","dojo/dom-class","../window/WindowWidget"],function(_aff,lang,_b00,_b01,_b02,_b03){return _aff([_b03],{defaultPositioning:{x:400,y:125},windowWidth:"375px",windowHeaderText:"Publish to Portal",windowIconAltText:"Publish to Portal",windowIconClass:"commonIcons16 worldAdd",positioningParamName:"portalSearch",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_b02.add(this.windowContent,"portalPublisherWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/portal/PortalPublisherWidget"],lang.hitch(this,function(_b04){this.portalPublisherWidget=new _b04();this.setContent(this.portalPublisherWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_b00.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PORTAL_PUBLISH.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_b00.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PORTAL_PUBLISH.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_b00.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PORTAL_PUBLISH.TOGGLE,lang.hitch(this,this.toggle)));}});});},"esriviewer/ui/legend/MapLegendWindow":function(){define("esriviewer/ui/legend/MapLegendWindow",["dojo/_base/declare","dojo/topic","dojo/_base/lang","../window/WindowWidget"],function(_b05,_b06,lang,_b07){return _b05([_b07],{defaultPositioning:{x:62,y:150},windowWidth:"300px",windowHeight:"400px",windowHeaderText:"Map Legend",windowIconAltText:"Map Legend",windowIconClass:"commonIcons16 list",positioningParamName:"legend",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/legend/MapLegendWidget"],lang.hitch(this,function(_b08){this.mapLegendWidget=new _b08();this.setContent(this.mapLegendWidget.domNode);this.mapLegendWidget.startup();}));},initListeners:function(){this.inherited(arguments);_b06.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.LEGEND.SHOW,lang.hitch(this,this.show));_b06.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.LEGEND.HIDE,lang.hitch(this,this.hide));}});});},"esriviewer/ui/header/HeaderLogo":function(){require({cache:{"url:esriviewer/ui/header/template/HeaderLogoTemplate.html":"<div class=\"logoHeaderContainer defaultBoxShadow defaultTransparentBackground defaultBorder fourPixelBorderRadius\">\r\n    <img alt=\"header logo\" data-bind=\"visible: showHeaderIcon, attr:{ src: headerIconUrl, alt:headerMainText}\"  class='headerLogoIcon'>\r\n    <span class=\"headerMainText\" data-bind=\"text: headerMainText\"></span>\r\n    <div class=\"logolinks\">\r\n        <a data-bind=\"attr:{href: contactUrl},text: contactText\" target=\"_blank\" title=\"Opens in a new window.\"></a>\r\n        <span class=\"headerLogoLinksSpace\">|</span>\r\n        <a data-bind=\"attr:{href: helpUrl}, text: helpText\" target=\"_blank\" title=\"Opens in a new window.\"></a>\r\n    </div>\r\n</div>"}});define("esriviewer/ui/header/HeaderLogo",["dojo/_base/declare","dojo/text!./template/HeaderLogoTemplate.html","../base/UITemplatedWidget","dojo/_base/lang","dojo/topic","./model/HeaderLogoViewModel"],function(_b09,_b0a,_b0b,lang,_b0c,_b0d){return _b09([_b0b],{templateString:_b0a,postCreate:function(){this.viewModel=new _b0d();this.inherited(arguments);ko.applyBindings(this.viewModel,this.domNode);},loadViewerConfigurationData:function(){var _b0e=null;_b0c.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"header",function(_b0f){_b0e=_b0f;});if(_b0e!=null&&lang.isObject(_b0e)){if(_b0e.headerText){this.viewModel.headerMainText(_b0e.headerText);}if(_b0e.headerImage!=null&&_b0e.headerImage!=""){this.viewModel.headerIconUrl(_b0e.headerImage);}else{this.viewModel.showHeaderIcon(false);}if(_b0e.contact!=null&&lang.isObject(_b0e.contact)){if(_b0e.contact.label){this.viewModel.contactText(_b0e.contact.label);}if(_b0e.contact.url){this.viewModel.contactUrl(_b0e.contact.url);}}if(_b0e.help!=null&&lang.isObject(_b0e.help)){if(_b0e.help.label){this.viewModel.helpText(_b0e.help.label);}if(_b0e.help.url){this.viewModel.helpUrl(_b0e.help.url);}}}}});});},"dijit/MenuSeparator":function(){require({cache:{"url:dijit/templates/MenuSeparator.html":"<tr class=\"dijitMenuSeparator\">\n\t<td class=\"dijitMenuSeparatorIconCell\">\n\t\t<div class=\"dijitMenuSeparatorTop\"></div>\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\n\t</td>\n\t<td colspan=\"3\" class=\"dijitMenuSeparatorLabelCell\">\n\t\t<div class=\"dijitMenuSeparatorTop dijitMenuSeparatorLabel\"></div>\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\n\t</td>\n</tr>"}});define("dijit/MenuSeparator",["dojo/_base/declare","dojo/dom","./_WidgetBase","./_TemplatedMixin","./_Contained","dojo/text!./templates/MenuSeparator.html"],function(_b10,dom,_b11,_b12,_b13,_b14){return _b10("dijit.MenuSeparator",[_b11,_b12,_b13],{templateString:_b14,buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});});},"esriviewer/ui/draw/configure/geometry/model/ConfigureTextViewModel":function(){define("esriviewer/ui/draw/configure/geometry/model/ConfigureTextViewModel",["dojo/_base/declare","esri/symbols/TextSymbol","esri/symbols/Font"],function(_b15,_b16,Font){return _b15([],{textAligns:ko.observableArray([{value:_b16.ALIGN_START,label:"Start"},{value:_b16.ALIGN_MIDDLE,label:"Middle"},{value:_b16.ALIGN_END,label:"End"}]),textWeights:ko.observableArray([{value:Font.WEIGHT_NORMAL,label:"Normal"},{value:Font.WEIGHT_LIGHTER,label:"Lighter"},{value:Font.WEIGHT_BOLD,label:"Bold"},{value:Font.WEIGHT_BOLDER,label:"Bolder"}]),fontFaces:ko.observableArray([{value:Font.STYLE_NORMAL,label:"Normal"},{value:Font.STYLE_ITALIC,label:"Italic"},{value:Font.STYLE_OBLIQUE,label:"Oblique"}]),textSizes:ko.observableArray([{value:"8pt",label:"8"},{value:"9pt",label:"9"},{value:"10pt",label:"10"},{value:"11pt",label:"11"},{value:"12pt",label:"12"},{value:"13pt",label:"13"},{value:"14pt",label:"14"},{value:"15pt",label:"15"},{value:"20pt",label:"20"},{value:"25pt",label:"25"},{value:"30pt",label:"30"},{value:"50pt",label:"50"},{value:"75pt",label:"75"}]),angles:ko.observableArray([0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85]),constructor:function(){this.selectedTextSize=ko.observable("15pt");this.selectedTextAlign=ko.observable(_b16.ALIGN_END);this.selectedTextWeight=ko.observable(Font.WEIGHT_NORMAL);this.selectedFontFace=ko.observable(Font.STYLE_NORMAL);this.selectedAngle=ko.observable(0);}});});},"esriviewer/base/DataLoaderSupport":function(){define("esriviewer/base/DataLoaderSupport",["dojo/_base/declare","dojo/_base/lang","dojo/_base/xhr","esri/config","esri/request"],function(_b17,lang,xhr,_b18,_b19){return _b17([],{loadJson:function(url,_b1a,_b1b){if(url==null||url==""||_b1a==null||!lang.isFunction(_b1a)){return;}var _b1c={url:url,handleAs:"json",load:_b1a};if(_b1b!=null&&lang.isFunction(_b1b)){_b1c.error=_b1b;}xhr.get(_b1c);},loadProxiedJson:function(url,_b1d,_b1e){if(_b18==null||_b18.defaults==null||_b18.defaults.io==null||_b18.defaults.io.proxyUrl==null){alert("You Must Configure a proxy for this request: "+url);return;}this.loadJson(_b18.defaults.io.proxyUrl+"?"+url,_b1d,_b1e);},loadJsonP:function(url,_b1f,_b20,_b21,_b22){if(_b21==null){_b21=lang.hitch(this,function(_b23){var msg="Could not resource : "+url+". Please verify URL is accessible.";});}if(_b22==null){_b22="callback";}var _b24={callbackParamName:_b22,content:_b1f,url:url};_b19(_b24).then(_b20,_b21);},loadText:function(url,_b25,_b26){if(url==null||url==""||!lang.isFunction(_b25)){return;}var _b27={url:url,handleAs:"text",load:_b25};if(_b26!=null&&lang.isFunction(_b26)){_b27.error=_b26;}xhr.get(_b27);}});});},"url:esriviewer/ui/draw/configure/geometry/template/ConfigureLineTemplate.html":"<div class=\"configureDrawGeometryContainer\">\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Line Style</span>\r\n        <select data-bind=\"options: lineStyles ,value:selectedLineStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Width</span>\r\n        <select data-bind=\"options: lineWidths ,value:selectedWidth\"></select>\r\n    </div>\r\n    <div data-dojo-attach-point=\"transparencySliderContainer\"></div>\r\n\r\n    <div class=\"configureDrawColorPickerContainer\" data-dojo-attach-point=\"colorPickerContainer\"></div>\r\n</div>","esriviewer/ui/draw/DrawWindow":function(){define("esriviewer/ui/draw/DrawWindow",["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/dom-class","../window/WindowWidget","./DrawWidget"],function(_b28,_b29,lang,_b2a,_b2b,_b2c){return _b28([_b2b],{defaultPositioning:{x:500,y:50},windowWidth:"335px",windowHeaderText:"Draw",windowIconAltText:"Draw",positioningParamName:"draw",windowIconClass:"commonIcons16 pencil",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_b2a.add(this.windowContent,"drawWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();this.drawWidget=new _b2c();this.setContent(this.drawWidget.domNode);},initListeners:function(){this.inherited(arguments);this.subscribes.push(_b29.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.DRAW.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_b29.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.DRAW.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_b29.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.DRAW.TOGGLE,lang.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.drawWidget){if(this.drawWidget.currentDrawType!=null){this.drawWidget.clearDraw();}}},hidePopups:function(){this.inherited(arguments);if(this.drawWidget){this.drawWidget.hidePopups();}}});});},"esriviewer/ui/query/QueryBuilderWindowWidget":function(){define("esriviewer/ui/query/QueryBuilderWindowWidget",["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/window","dojo/dom-style","../window/WindowWidget"],function(_b2d,lang,_b2e,_b2f,_b30,_b31){return _b2d([_b31],{defaultPositioning:{x:400,y:125},windowWidth:"300px",windowHeaderText:"Query Builder",windowIconAltText:"Query Builder",windowIconClass:"commonIcons16 sql",positioningParamName:"queryBuilder",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/query/QueryBuilderWidget"],lang.hitch(this,function(_b32){this.queryBuilderWidget=new _b32();this.setContent(this.queryBuilderWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_b2e.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.QUERY_BUILDER.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_b2e.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.QUERY_BUILDER.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_b2e.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.QUERY_BUILDER.TOGGLE,lang.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.queryBuilderWidget){this.queryBuilderWidget.clearGraphics();}}});});},"dojo/require":function(){define("dojo/require",["./_base/loader"],function(_b33){return {dynamic:0,normalize:function(id){return id;},load:_b33.require};});},"xstyle/css":function(){define("xstyle/css",["require"],function(_b34){"use strict";function _b35(tag,id,_b36){var _b37=document.documentElement;var _b38=_b37.insertBefore(document.createElement(tag),_b37.firstChild);_b38.id=id;var _b39=(_b38.currentStyle||getComputedStyle(_b38,null))[_b36];_b37.removeChild(_b38);return _b39;};return {load:function(_b3a,_b3b,_b3c,_b3d){var url=_b3b.toUrl(_b3a);var _b3e=_b3b.cache["url:"+url];if(_b3e){if(_b3e.xCss){var _b3f=_b3e.parser;var xCss=_b3e.xCss;_b3e=_b3e.cssText;}_b34(["./util/createStyleSheet"],function(_b40){_b40(_b3e);});if(xCss){}return _b41();}function _b41(){var _b42=_b35("x-parse",null,"content");if(_b42&&_b42!="none"){_b3b([eval(_b42)],_b3c);}else{_b3c();}};var _b43=_b35("div",_b3a.replace(/\//g,"-").replace(/\..*/,"")+"-loaded","display");if(_b43=="none"){return _b41();}_b34(["./load-css"],function(load){load(url,_b41);});}};});},"esriviewer/ui/draw/configure/geometry/model/ConfigurePolygonViewModel":function(){define("esriviewer/ui/draw/configure/geometry/model/ConfigurePolygonViewModel",["dojo/_base/declare","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol"],function(_b44,_b45,_b46){return _b44([],{fillStyles:ko.observableArray([{value:_b46.STYLE_BACKWARD_DIAGONAL,label:"Backward Diagonal"},{value:_b46.STYLE_CROSS,label:"Cross"},{value:_b46.STYLE_DIAGONAL_CROSS,label:"Diagonal Cross"},{value:_b46.STYLE_FORWARD_DIAGONAL,label:"Forward Diagonal"},{value:_b46.STYLE_HORIZONTAL,label:"Horizontal Lines"},{value:_b46.STYLE_SOLID,label:"Solid"},{value:_b46.STYLE_VERTICAL,label:"Vertical Lines"},{value:_b46.STYLE_NULL,label:"None"}]),outlineStyles:ko.observableArray([{value:_b45.STYLE_DASH,label:"Dashed Line"},{value:_b45.STYLE_DASHDOT,label:"Dash Dot Line"},{value:_b45.STYLE_DASHDOTDOT,label:"Dash Dot Dot Line"},{value:_b45.STYLE_DOT,label:"Dotted Line"},{value:_b45.STYLE_SOLID,label:"Solid Line"},{value:_b45.STYLE_NULL,label:"None"}]),outlineWidths:ko.observableArray([1,2,3,4,5,6,7,8,9,10,15,20,25,30,40,50]),angles:ko.observableArray([0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85]),constructor:function(){this.selectedFillStyle=ko.observable(_b46.STYLE_SOLID);this.selectedOutlineStyle=ko.observable(_b45.STYLE_SOLID);this.selectedAngle=ko.observable(0);this.selectedOutlineWidth=ko.observable(1);this.outlineColorActive=ko.observable(true);this.fillColorActive=ko.observable(false);},setOutlineColorMode:function(){this.outlineColorActive(true);this.fillColorActive(false);},setFillColorMode:function(){this.outlineColorActive(false);this.fillColorActive(true);}});});},"dijit/tree/dndSource":function(){define("dijit/tree/dndSource",["dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/_base/lang","dojo/on","dojo/touch","dojo/topic","dojo/dnd/Manager","./_dndSelector"],function(_b47,_b48,_b49,_b4a,_b4b,lang,on,_b4c,_b4d,_b4e,_b4f){var _b50=_b49("dijit.tree.dndSource",_b4f,{isSource:true,accept:["text","treeNode"],copyOnly:false,dragThreshold:5,betweenThreshold:0,generateText:true,constructor:function(tree,_b51){if(!_b51){_b51={};}lang.mixin(this,_b51);var type=_b51.accept instanceof Array?_b51.accept:["text","treeNode"];this.accept=null;if(type.length){this.accept={};for(var i=0;i<type.length;++i){this.accept[type[i]]=1;}}this.isDragging=false;this.mouseDown=false;this.targetAnchor=null;this.targetBox=null;this.dropPosition="";this._lastX=0;this._lastY=0;this.sourceState="";if(this.isSource){_b4a.add(this.node,"dojoDndSource");}this.targetState="";if(this.accept){_b4a.add(this.node,"dojoDndTarget");}this.topics=[_b4d.subscribe("/dnd/source/over",lang.hitch(this,"onDndSourceOver")),_b4d.subscribe("/dnd/start",lang.hitch(this,"onDndStart")),_b4d.subscribe("/dnd/drop",lang.hitch(this,"onDndDrop")),_b4d.subscribe("/dnd/cancel",lang.hitch(this,"onDndCancel"))];},checkAcceptance:function(){return true;},copyState:function(_b52){return this.copyOnly||_b52;},destroy:function(){this.inherited(arguments);var h;while(h=this.topics.pop()){h.remove();}this.targetAnchor=null;},_onDragMouse:function(e,_b53){var m=_b4e.manager(),_b54=this.targetAnchor,_b55=this.current,_b56=this.dropPosition;var _b57="Over";if(_b55&&this.betweenThreshold>0){if(!this.targetBox||_b54!=_b55){this.targetBox=_b4b.position(_b55.rowNode,true);}if((e.pageY-this.targetBox.y)<=this.betweenThreshold){_b57="Before";}else{if((e.pageY-this.targetBox.y)>=(this.targetBox.h-this.betweenThreshold)){_b57="After";}}}if(_b53||_b55!=_b54||_b57!=_b56){if(_b54){this._removeItemClass(_b54.rowNode,_b56);}if(_b55){this._addItemClass(_b55.rowNode,_b57);}if(!_b55){m.canDrop(false);}else{if(_b55==this.tree.rootNode&&_b57!="Over"){m.canDrop(false);}else{var _b58=false;if(m.source==this){for(var _b59 in this.selection){var _b5a=this.selection[_b59];if(_b5a.item===_b55.item){_b58=true;break;}}}if(_b58){m.canDrop(false);}else{if(this.checkItemAcceptance(_b55.rowNode,m.source,_b57.toLowerCase())&&!this._isParentChildDrop(m.source,_b55.rowNode)){m.canDrop(true);}else{m.canDrop(false);}}}}this.targetAnchor=_b55;this.dropPosition=_b57;}},onMouseMove:function(e){if(this.isDragging&&this.targetState=="Disabled"){return;}this.inherited(arguments);var m=_b4e.manager();if(this.isDragging){this._onDragMouse(e);}else{if(this.mouseDown&&this.isSource&&(Math.abs(e.pageX-this._lastX)>=this.dragThreshold||Math.abs(e.pageY-this._lastY)>=this.dragThreshold)){var _b5b=this.getSelectedTreeNodes();if(_b5b.length){if(_b5b.length>1){var seen=this.selection,i=0,r=[],n,p;nextitem:while((n=_b5b[i++])){for(p=n.getParent();p&&p!==this.tree;p=p.getParent()){if(seen[p.id]){continue nextitem;}}r.push(n);}_b5b=r;}_b5b=_b47.map(_b5b,function(n){return n.domNode;});m.startDrag(this,_b5b,this.copyState(_b48.isCopyKey(e)));this._onDragMouse(e,true);}}}},onMouseDown:function(e){this.mouseDown=true;this.mouseButton=e.button;this._lastX=e.pageX;this._lastY=e.pageY;this.inherited(arguments);},onMouseUp:function(e){if(this.mouseDown){this.mouseDown=false;this.inherited(arguments);}},onMouseOut:function(){this.inherited(arguments);this._unmarkTargetAnchor();},checkItemAcceptance:function(){return true;},onDndSourceOver:function(_b5c){if(this!=_b5c){this.mouseDown=false;this._unmarkTargetAnchor();}else{if(this.isDragging){var m=_b4e.manager();m.canDrop(false);}}},onDndStart:function(_b5d,_b5e,copy){if(this.isSource){this._changeState("Source",this==_b5d?(copy?"Copied":"Moved"):"");}var _b5f=this.checkAcceptance(_b5d,_b5e);this._changeState("Target",_b5f?"":"Disabled");if(this==_b5d){_b4e.manager().overSource(this);}this.isDragging=true;},itemCreator:function(_b60){return _b47.map(_b60,function(node){return {"id":node.id,"name":node.textContent||node.innerText||""};});},onDndDrop:function(_b61,_b62,copy){if(this.containerState=="Over"){var tree=this.tree,_b63=tree.model,_b64=this.targetAnchor;this.isDragging=false;var _b65;var _b66;var _b67;_b65=(_b64&&_b64.item)||tree.item;if(this.dropPosition=="Before"||this.dropPosition=="After"){_b65=(_b64.getParent()&&_b64.getParent().item)||tree.item;_b66=_b64.getIndexInParent();if(this.dropPosition=="After"){_b66=_b64.getIndexInParent()+1;_b67=_b64.getNextSibling()&&_b64.getNextSibling().item;}else{_b67=_b64.item;}}else{_b65=(_b64&&_b64.item)||tree.item;}var _b68;_b47.forEach(_b62,function(node,idx){var _b69=_b61.getItem(node.id);if(_b47.indexOf(_b69.type,"treeNode")!=-1){var _b6a=_b69.data,_b6b=_b6a.item,_b6c=_b6a.getParent().item;}if(_b61==this){if(typeof _b66=="number"){if(_b65==_b6c&&_b6a.getIndexInParent()<_b66){_b66-=1;}}_b63.pasteItem(_b6b,_b6c,_b65,copy,_b66,_b67);}else{if(_b63.isItem(_b6b)){_b63.pasteItem(_b6b,_b6c,_b65,copy,_b66,_b67);}else{if(!_b68){_b68=this.itemCreator(_b62,_b64.rowNode,_b61);}_b63.newItem(_b68[idx],_b65,_b66,_b67);}}},this);this.tree._expandNode(_b64);}this.onDndCancel();},onDndCancel:function(){this._unmarkTargetAnchor();this.isDragging=false;this.mouseDown=false;delete this.mouseButton;this._changeState("Source","");this._changeState("Target","");},onOverEvent:function(){this.inherited(arguments);_b4e.manager().overSource(this);},onOutEvent:function(){this._unmarkTargetAnchor();var m=_b4e.manager();if(this.isDragging){m.canDrop(false);}m.outSource(this);this.inherited(arguments);},_isParentChildDrop:function(_b6d,_b6e){if(!_b6d.tree||_b6d.tree!=this.tree){return false;}var root=_b6d.tree.domNode;var ids=_b6d.selection;var node=_b6e.parentNode;while(node!=root&&!ids[node.id]){node=node.parentNode;}return node.id&&ids[node.id];},_unmarkTargetAnchor:function(){if(!this.targetAnchor){return;}this._removeItemClass(this.targetAnchor.rowNode,this.dropPosition);this.targetAnchor=null;this.targetBox=null;this.dropPosition=null;},_markDndStatus:function(copy){this._changeState("Source",copy?"Copied":"Moved");}});return _b50;});},"url:esriviewer/ui/draw/base/template/UserPersistedGrahicsListingTemplate.html":"<div>\r\n    <div class=\"addedUserPersistedGraphicsListContainer\" data-dojo-attach-point=\"addedUserPersistedGraphicsListContainer\">\r\n        <ul data-dojo-attach-point=\"addedGraphicsList\" class=\"viewerList\" data-bind=\"foreach: addedUserPersistedGraphics\">\r\n            <li class=\"graphicsListEntry\">\r\n                <div title=\"Delete Saved Graphics\" class=\"viewerListEntryRemoveIcon commonIcons16 remove\" data-bind=\"click:$parent.removeUserPersistedGraphic\"></div>\r\n                <div title=\"Add Saved Graphics To Map\" class=\"viewerListGenericIcon commonIcons16 layerShow\" data-bind=\"click:$parent.addSavedGraphics\"></div>\r\n                <span class=\"graphicsListEntryLabel\" data-bind=\"text: $data.label\"></span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>","dojox/storage/CookieStorageProvider":function(){define("dojox/storage/CookieStorageProvider",["dijit","dojo","dojox","dojo/require!dojox/storage/Provider,dojox/storage/manager,dojo/cookie"],function(_b6f,dojo,_b70){dojo.provide("dojox.storage.CookieStorageProvider");dojo.require("dojox.storage.Provider");dojo.require("dojox.storage.manager");dojo.require("dojo.cookie");dojo.declare("dojox.storage.CookieStorageProvider",[_b70.storage.Provider],{store:null,cookieName:"dojoxStorageCookie",storageLife:730,initialize:function(){this.store=dojo.fromJson(dojo.cookie(this.cookieName))||{};this.initialized=true;_b70.storage.manager.loaded();},isAvailable:function(){return dojo.cookie.isSupported();},put:function(key,_b71,_b72,_b73){this._assertIsValidKey(key);_b73=_b73||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_b73);fullKey=this.getFullKey(key,_b73);this.store[fullKey]=dojo.toJson(_b71);this._save();var _b74=dojo.toJson(this.store)===dojo.cookie(this.cookieName);if(!_b74){this.remove(key,_b73);}if(_b72){_b72(_b74?this.SUCCESS:this.FAILED,key,null,_b73);}},get:function(key,_b75){this._assertIsValidKey(key);_b75=_b75||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_b75);key=this.getFullKey(key,_b75);return this.store[key]?dojo.fromJson(this.store[key]):null;},getKeys:function(_b76){_b76=_b76||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_b76);_b76="__"+_b76+"_";var keys=[];for(var _b77 in this.store){if(this._beginsWith(_b77,_b76)){_b77=_b77.substring(_b76.length);keys.push(_b77);}}return keys;},clear:function(_b78){_b78=_b78||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_b78);_b78="__"+_b78+"_";for(var _b79 in this.store){if(this._beginsWith(_b79,_b78)){delete (this.store[_b79]);}}this._save();},remove:function(key,_b7a){_b7a=_b7a||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_b7a);this._assertIsValidKey(key);key=this.getFullKey(key,_b7a);delete this.store[key];this._save();},getNamespaces:function(){var _b7b=[this.DEFAULT_NAMESPACE];var _b7c={};_b7c[this.DEFAULT_NAMESPACE]=true;var _b7d=/^__([^_]*)_/;for(var _b7e in this.store){if(_b7d.test(_b7e)==true){var _b7f=_b7e.match(_b7d)[1];if(typeof _b7c[_b7f]=="undefined"){_b7c[_b7f]=true;_b7b.push(_b7f);}}}return _b7b;},isPermanent:function(){return true;},getMaximumSize:function(){return 4;},hasSettingsUI:function(){return false;},isValidKey:function(_b80){if(_b80===null||_b80===undefined){return false;}return /^[0-9A-Za-z_-]*$/.test(_b80);},isValidNamespace:function(_b81){if(_b81===null||_b81===undefined){return false;}return /^[0-9A-Za-z-]*$/.test(_b81);},getFullKey:function(key,_b82){return "__"+_b82+"_"+key;},_save:function(){dojo.cookie(this.cookieName,dojo.toJson(this.store),{expires:this.storageLife});},_beginsWith:function(_b83,_b84){if(_b84.length>_b83.length){return false;}return _b83.substring(0,_b84.length)===_b84;},_assertIsValidNamespace:function(_b85){if(this.isValidNamespace(_b85)===false){throw new Error("Invalid namespace given: "+_b85);}},_assertIsValidKey:function(key){if(this.isValidKey(key)===false){throw new Error("Invalid key given: "+key);}}});_b70.storage.manager.register("dojox.storage.CookieStorageProvider",new _b70.storage.CookieStorageProvider());});},"esriviewer/ui/accordion/ToolsAccordion":function(){require({cache:{"url:esriviewer/ui/accordion/template/ToolsAccordionTemplate.html":"<div class=\"toolsAccordionContainer fivePixelBorderRadius defaultBoxShadow\">\r\n\r\n</div>"}});define("esriviewer/ui/accordion/ToolsAccordion",["dojo/_base/declare","dojo/text!./template/ToolsAccordionTemplate.html","dojo/topic","dojo/_base/lang","dojo/on","dijit/layout/AccordionContainer","dojo/dom-style","dojo/dom-class","dojo/dom-attr","dojo/dom-construct","dojo/dnd/Moveable","../base/UITemplatedWidget"],function(_b86,_b87,_b88,lang,on,_b89,_b8a,_b8b,_b8c,_b8d,_b8e,_b8f){return _b86([_b8f],{templateString:_b87,isPositionedByConfig:true,positionForHeader:false,headerVisiblePositioning:{x:75,y:125},defaultPositioning:{x:75,y:100},allowCollapse:true,movable:false,isFirstAddedItem:true,showOnLoad:true,positioningParamName:"accordion",returnToOriginOnShow:true,constructor:function(){this.accordion=new _b89();_b8b.add(this.accordion.domNode,"toolsAccordion");this.visible=true;},postCreate:function(){this.inherited(arguments);if(this.allowCollapse){this.addMinimizeIcon();}_b8d.place(this.accordion.domNode,this.domNode);_b88.publish(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.LOAD_DEFAULT_TOOLS);if(!this.showOnLoad){this.hide();}if(this.positionForHeader){this.creationPositioning.x=this.headerVisiblePositioning.x;this.creationPositioning.y=this.headerVisiblePositioning.y;}this.returnToOrigin();},loadViewerConfigurationData:function(){var _b90=null;_b88.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"toolsAccordion",function(_b91){_b90=_b91;});if(_b90&&_b90.showOnLoad!=null){this.showOnLoad=_b90.showOnLoad;}var _b92;_b88.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"header",function(_b93){_b92=_b93;});if(_b92!=null&&lang.isObject(_b92)){this.positionForHeader=_b92.display===true&&_b92.small!=true;}},initMover:function(){var _b94=_b8d.create("div",{title:"Move",className:"accordionMoveIcon accordionAction move"});_b8d.place(_b94,this.domNode);this.mover=new _b8e(this.domNode,{handle:_b94});this.mover.on("move",lang.hitch(VIEWER_UTILS,VIEWER_UTILS.handleContainerMoved));},placeAt:function(node){_b8d.place(this.domNode,node);if(this.toolsAccordionActions){_b8d.place(this.toolsAccordionActions,node);}if(this.movable){this.initMover();}},addMinimizeIcon:function(){if(this.minimizeIconElement==null){this.minimizeIconElement=_b8d.create("div",{title:"Minimize",className:"accordionMimimizeIcon accordionAction minimize"});_b8d.place(this.minimizeIconElement,this.domNode);on(this.minimizeIconElement,"click",lang.hitch(this,this.hide));if(!this.movable){_b8a.set(this.minimizeIconElement,"right","5px");}}},addItem:function(_b95){_b8b.add(_b95.domNode,"accordionChild");this.accordion.addChild(_b95);if(this.isFirstAddedItem){this.isFirstAddedItem=false;this.selectedChild=_b95;}},initListeners:function(){this.inherited(arguments);_b88.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.TOGGLE,lang.hitch(this,this.toggle));_b88.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.SHOW,lang.hitch(this,this.show));_b88.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.HIDE,lang.hitch(this,this.hide));_b88.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.ADD_ITEM,lang.hitch(this,this.addItem));},startup:function(){this.accordion.startup();},destroy:function(){if(this.imageryDisplayWidget){this.imageryDisplayWidget.destroy();}if(this.imageryQueryFilterManager){this.imageryQueryFilterManager.destroy();}},toggle:function(){if(this.visible){this.hide();}else{this.show();}},show:function(){_b8a.set(this.domNode,"display","block");this.visible=true;if(this.toolsAccordionActions){_b8c.set(this.toolsAccordionActions,"title","Collapse Tools");if(!_b8b.contains(this.toolsAccordionActions,"toolsAccordionCollapserExpanded")){_b8b.add(this.toolsAccordionActions,"toolsAccordionCollapserExpanded");}_b8b.remove(this.toolsAccordionActions,"toolsAccordionCollapserCollapsed");}if(this.returnToOriginOnShow){this.returnToOrigin();}},returnToOrigin:function(){_b8a.set(this.domNode,this.creationPositioning.alignX,this.creationPositioning.x+"px");_b8a.set(this.domNode,this.creationPositioning.alignY,this.creationPositioning.y+"px");},hide:function(){_b8a.set(this.domNode,"display","none");this.visible=false;if(this.toolsAccordionActions){_b8c.set(this.toolsAccordionActions,"title","Show Tools");if(!_b8b.contains(this.toolsAccordionActions,"toolsAccordionCollapserCollapsed")){_b8b.add(this.toolsAccordionActions,"toolsAccordionCollapserCollapsed");}_b8b.remove(this.toolsAccordionActions,"toolsAccordionCollapserExpanded");}_b88.publish(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.HIDE_COMPLETE);},toggleVisibility:function(){if(this.visible){this.hide();}else{this.show();}},selectChild:function(_b96){this.accordion.selectChild(_b96);this.selectedChild=_b96;}});});},"esriviewer/ui/draw/base/GraphicsLocalStorageMixin":function(){define("esriviewer/ui/draw/base/GraphicsLocalStorageMixin",["dojo/_base/declare","dojo/_base/lang","dojo/has","dojo/topic"],function(_b97,lang,has,_b98){return _b97([],{localStoragePersistSupported:true,constructor:function(){if(!(has("ie")<8)){this.localStoragePersistSupported=false;}this.storageProvider=dojox.storage.manager.getProvider();if(this.storageProvider){this.localStoragePersistSupported=true;}this.persistedUserGraphics=this.loadPersistedUserGraphics();},deleteUserPersistedGraphics:function(_b99){if(this.persistUserGraphicsLabelExists(_b99)){delete this.persistedUserGraphics[_b99];this.persist();}var _b9a=false;for(var key in this.persistedUserGraphics){_b9a=true;break;}return _b9a;},persistUserGraphicsLabelExists:function(_b9b){return this.persistedUserGraphics[_b9b]!=null;},persistUserGraphics:function(_b9c,_b9d){if(_b9c==null||_b9c==""||_b9d==null||!lang.isArray(_b9d)||_b9d.length==0){return null;}if(this.persistUserGraphicsLabelExists(_b9c)){VIEWER_UTILS.log("Attempted to save graphics with an existing label: "+_b9c,VIEWER_GLOBALS.LOG_TYPE.ERROR);_b98.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Cannot save graphics. Label already exists.");return null;}else{var _b9e=[];for(var i=0;i<_b9d.length;i++){_b9e.push({label:_b9d[i].label,graphic:_b9d[i].graphic.toJson()});}var _b9f={label:_b9c,graphics:_b9e};this.persistedUserGraphics[_b9c]=_b9f;this.persist();VIEWER_UTILS.log("Saved graphics with label: "+_b9c,VIEWER_GLOBALS.LOG_TYPE.INFO);_b98.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Graphics Saved");return _b9f;}},loadPersistedUserGraphics:function(){if(this.storageProvider){if(this.storageProvider.hasKey(VIEWER_GLOBALS.STORAGE.LABELS.USER_GRAPHICS)){return this.storageProvider.get(VIEWER_GLOBALS.STORAGE.LABELS.USER_GRAPHICS);}}return {};},persist:function(){this.storageProvider.put(VIEWER_GLOBALS.STORAGE.LABELS.USER_GRAPHICS,this.persistedUserGraphics);}});});},"undefined":undefined,"esriviewer/ui/navigation/NavigationWidget":function(){require({cache:{"url:esriviewer/ui/navigation/template/NavigationWidgetTemplate.html":"<div data-bind=\"visible: visible\" class=\"navigationHorizontalWidgetContainer\">\r\n    <div class=\"navigationTextToolbarHorizontal\">\r\n        <div class=\"navigationTextToolbarHorizontalInner\" data-dojo-attach-point=\"navigationToolbar\">\r\n        </div>\r\n    </div>\r\n</div>\r\n"}});define("esriviewer/ui/navigation/NavigationWidget",["dojo/_base/declare","dojo/text!./template/NavigationWidgetTemplate.html","dojo/topic","dojo/dom-class","../base/UITemplatedWidget","dojo/_base/lang","dojo/on","./model/NavigationWidgetViewModel"],function(_ba0,_ba1,_ba2,_ba3,_ba4,lang,on,_ba5){return _ba0([_ba4],{defaultPositioning:{y:5,x:0},positionWithSmallHeader:false,isPositionedByConfig:true,positioningParamName:"navigation",templateString:_ba1,constructor:function(_ba6){lang.mixin(this,_ba6||{});this.visible=true;},postCreate:function(){this.viewModel=new _ba5();this.inherited(arguments);ko.applyBindings(this.viewModel,this.domNode);if(this.positionWithSmallHeader){_ba3.add(this.navigationToolbar,"navigationWithSmallHeaderPositioning");}this.show();},loadViewerConfigurationData:function(){var _ba7;_ba2.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"header",function(_ba8){_ba7=_ba8;});if(_ba7!=null&&lang.isObject(_ba7)){this.positionWithSmallHeader=_ba7.display===true&&_ba7.small===true;}},handleToggle:function(){this.viewModel.visible(!this.viewModel.visible());},show:function(){this.viewModel.visible(true);},hide:function(){this.viewModel.visible(false);}});});},"dojox/storage/FlashStorageProvider":function(){define("dojox/storage/FlashStorageProvider",["dijit","dojo","dojox","dojo/require!dojox/flash,dojox/storage/manager,dojox/storage/Provider"],function(_ba9,dojo,_baa){dojo.provide("dojox.storage.FlashStorageProvider");dojo.require("dojox.flash");dojo.require("dojox.storage.manager");dojo.require("dojox.storage.Provider");dojo.declare("dojox.storage.FlashStorageProvider",_baa.storage.Provider,{initialized:false,_available:null,_statusHandler:null,_flashReady:false,_pageReady:false,initialize:function(){if(dojo.config["disableFlashStorage"]==true){return;}_baa.flash.addLoadedListener(dojo.hitch(this,function(){this._flashReady=true;if(this._flashReady&&this._pageReady){this._loaded();}}));var _bab=dojo.moduleUrl("dojox","storage/Storage.swf").toString();_baa.flash.setSwf(_bab,false);dojo.connect(dojo,"loaded",this,function(){this._pageReady=true;if(this._flashReady&&this._pageReady){this._loaded();}});},setFlushDelay:function(_bac){if(_bac===null||typeof _bac==="undefined"||isNaN(_bac)){throw new Error("Invalid argunment: "+_bac);}_baa.flash.comm.setFlushDelay(String(_bac));},getFlushDelay:function(){return Number(_baa.flash.comm.getFlushDelay());},flush:function(_bad){if(_bad==null||typeof _bad=="undefined"){_bad=_baa.storage.DEFAULT_NAMESPACE;}_baa.flash.comm.flush(_bad);},isAvailable:function(){return (this._available=!dojo.config["disableFlashStorage"]);},put:function(key,_bae,_baf,_bb0){if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}if(!_bb0){_bb0=_baa.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_bb0)){throw new Error("Invalid namespace given: "+_bb0);}this._statusHandler=_baf;if(dojo.isString(_bae)){_bae="string:"+_bae;}else{_bae=dojo.toJson(_bae);}_baa.flash.comm.put(key,_bae,_bb0);},putMultiple:function(keys,_bb1,_bb2,_bb3){if(!this.isValidKeyArray(keys)||!_bb1 instanceof Array||keys.length!=_bb1.length){throw new Error("Invalid arguments: keys = ["+keys+"], values = ["+_bb1+"]");}if(!_bb3){_bb3=_baa.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_bb3)){throw new Error("Invalid namespace given: "+_bb3);}this._statusHandler=_bb2;var _bb4=keys.join(",");var _bb5=[];for(var i=0;i<_bb1.length;i++){if(dojo.isString(_bb1[i])){_bb1[i]="string:"+_bb1[i];}else{_bb1[i]=dojo.toJson(_bb1[i]);}_bb5[i]=_bb1[i].length;}var _bb6=_bb1.join("");var _bb7=_bb5.join(",");_baa.flash.comm.putMultiple(_bb4,_bb6,_bb7,_bb3);},get:function(key,_bb8){if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}if(!_bb8){_bb8=_baa.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_bb8)){throw new Error("Invalid namespace given: "+_bb8);}var _bb9=_baa.flash.comm.get(key,_bb8);if(_bb9==""){return null;}return this._destringify(_bb9);},getMultiple:function(keys,_bba){if(!this.isValidKeyArray(keys)){throw new ("Invalid key array given: "+keys);}if(!_bba){_bba=_baa.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_bba)){throw new Error("Invalid namespace given: "+_bba);}var _bbb=keys.join(",");var _bbc=_baa.flash.comm.getMultiple(_bbb,_bba);var _bbd=eval("("+_bbc+")");for(var i=0;i<_bbd.length;i++){_bbd[i]=(_bbd[i]=="")?null:this._destringify(_bbd[i]);}return _bbd;},_destringify:function(_bbe){if(dojo.isString(_bbe)&&(/^string:/.test(_bbe))){_bbe=_bbe.substring("string:".length);}else{_bbe=dojo.fromJson(_bbe);}return _bbe;},getKeys:function(_bbf){if(!_bbf){_bbf=_baa.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_bbf)){throw new Error("Invalid namespace given: "+_bbf);}var _bc0=_baa.flash.comm.getKeys(_bbf);if(_bc0==null||_bc0=="null"){_bc0="";}_bc0=_bc0.split(",");_bc0.sort();return _bc0;},getNamespaces:function(){var _bc1=_baa.flash.comm.getNamespaces();if(_bc1==null||_bc1=="null"){_bc1=_baa.storage.DEFAULT_NAMESPACE;}_bc1=_bc1.split(",");_bc1.sort();return _bc1;},clear:function(_bc2){if(!_bc2){_bc2=_baa.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_bc2)){throw new Error("Invalid namespace given: "+_bc2);}_baa.flash.comm.clear(_bc2);},remove:function(key,_bc3){if(!_bc3){_bc3=_baa.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_bc3)){throw new Error("Invalid namespace given: "+_bc3);}_baa.flash.comm.remove(key,_bc3);},removeMultiple:function(keys,_bc4){if(!this.isValidKeyArray(keys)){dojo.raise("Invalid key array given: "+keys);}if(!_bc4){_bc4=_baa.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_bc4)){throw new Error("Invalid namespace given: "+_bc4);}var _bc5=keys.join(",");_baa.flash.comm.removeMultiple(_bc5,_bc4);},isPermanent:function(){return true;},getMaximumSize:function(){return _baa.storage.SIZE_NO_LIMIT;},hasSettingsUI:function(){return true;},showSettingsUI:function(){_baa.flash.comm.showSettings();_baa.flash.obj.setVisible(true);_baa.flash.obj.center();},hideSettingsUI:function(){_baa.flash.obj.setVisible(false);if(dojo.isFunction(_baa.storage.onHideSettingsUI)){_baa.storage.onHideSettingsUI.call(null);}},getResourceList:function(){return [];},_loaded:function(){this._allNamespaces=this.getNamespaces();this.initialized=true;_baa.storage.manager.loaded();},_onStatus:function(_bc6,key,_bc7){var ds=_baa.storage;var dfo=_baa.flash.obj;if(_bc6==ds.PENDING){dfo.center();dfo.setVisible(true);}else{dfo.setVisible(false);}if(ds._statusHandler){ds._statusHandler.call(null,_bc6,key,null,_bc7);}}});_baa.storage.manager.register("dojox.storage.FlashStorageProvider",new _baa.storage.FlashStorageProvider());});},"url:esriviewer/ui/draw/configure/template/ConfigureDrawTemplate.html":"<div>\r\n    <div data-dojo-attach-point=\"annotationOptionsButtons\" class=\"annotationOptionButtons\">\r\n        <div title=\"Set Point Symbol\"\r\n             data-bind=\"click: showPointConfiguration, css:{pointSelected: pointConfigurationActive}\"\r\n             class=\"annotationOptionButton pointUnselected\"></div>\r\n        <div title=\"Set Line Symbol\"\r\n             data-bind=\"click: showLineConfiguration, css:{polylineSelected: lineConfigurationActive}\"\r\n                    class=\"annotationOptionButton polylineUnselected\"></div>\r\n        <div title=\"Set Polygon Symbol\"\r\n             data-bind=\"click: showPolygonConfiguration, css:{polygonSelected: polygonConfigurationActive}\"\r\n             class=\"annotationOptionButton polygonUnselected\"></div>\r\n        <div title=\"Set Rectangle Symbol\"\r\n             data-bind=\"click: showRectangleConfiguration, css:{rectangleSelected: rectangleConfigurationActive}\"\r\n             class=\"annotationOptionButton rectangleUnselected\"></div>\r\n        <div title=\"Set Text Symbol\"\r\n             data-bind=\"click: showTextConfiguration, css:{textSelected: textConfigurationActive}\"\r\n             class=\"annotationOptionButton textUnselected\"></div>\r\n    </div>\r\n    <div data-dojo-attach-point=\"configurePointWidgetContainer\" data-bind=\"visible:pointConfigurationActive\"></div>\r\n    <div data-dojo-attach-point=\"configureLineWidgetContainer\" data-bind=\"visible:lineConfigurationActive\"></div>\r\n    <div data-dojo-attach-point=\"configureRectangleWidgetContainer\" data-bind=\"visible:rectangleConfigurationActive\"></div>\r\n    <div data-dojo-attach-point=\"configurePolygonWidgetContainer\" data-bind=\"visible:polygonConfigurationActive\"></div>\r\n\r\n    <div data-dojo-attach-point=\"configureTextWidgetContainer\" data-bind=\"visible:textConfigurationActive\"></div>\r\n\r\n</div>","url:dijit/form/templates/Select.html":"<table class=\"dijit dijitReset dijitInline dijitLeft\"\n\tdata-dojo-attach-point=\"_buttonNode,tableNode,focusNode\" cellspacing='0' cellpadding='0'\n\trole=\"listbox\" aria-haspopup=\"true\"\n\t><tbody role=\"presentation\"><tr role=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonContents\" role=\"presentation\"\n\t\t\t><div class=\"dijitReset dijitInputField dijitButtonText\"  data-dojo-attach-point=\"containerNode,_popupStateNode\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitValidationContainer\"\n\t\t\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t/></div\n\t\t\t><input type=\"hidden\" ${!nameAttrSetting} data-dojo-attach-point=\"valueNode\" value=\"${value}\" aria-hidden=\"true\"\n\t\t/></td\n\t\t><td class=\"dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\"\n\t\t\tdata-dojo-attach-point=\"titleNode\" role=\"presentation\"\n\t\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t${_buttonInputDisabled}\n\t\t/></td\n\t></tr></tbody\n></table>\n","esriviewer/ui/transparency/LayersTransparencyWindowWidget":function(){define("esriviewer/ui/transparency/LayersTransparencyWindowWidget",["dojo/_base/declare","dojo/topic","dojo/dom-class","dojo/_base/lang","../window/WindowWidget"],function(_bc8,_bc9,_bca,lang,_bcb){return _bc8([_bcb],{defaultPositioning:{x:700,y:50},windowHeight:"250px",windowWidth:"300px",windowHeaderText:"Layer Transparency",windowIconAltText:"Layer Transparency",windowIconClass:"commonIcons16 slider",positioningParamName:"layerTransparency",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_bca.add(this.windowContent,"layerTransparencyWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/transparency/LayersTransparencyWidget"],lang.hitch(this,function(_bcc){this.layersTransparencyWidget=new _bcc();this.setContent(this.layersTransparencyWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_bc9.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.TRANSPARENCY.WINDOW.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_bc9.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.TRANSPARENCY.WINDOW.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_bc9.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.TRANSPARENCY.WINDOW.TOGGLE,lang.hitch(this,this.toggle)));}});});},"esriviewer/ui/messaging/MessagingWidget":function(){require({cache:{"url:esriviewer/ui/messaging/template/MessagingWidgetTemplate.html":"<div class=\"defaultBorder defaultBackground statusMessageContainer threePixelBorderRadius defaultBoxShadow\"\r\n     data-bind=\"visible:visible\">\r\n    <div class=\"commonIcons16 infoBlock messagingIcon\"></div>\r\n    <div class=\"statusDivInner threePixelBorderRadius\">\r\n        <div class=\"statusDivMessage\" data-bind=\"text:message\"></div>\r\n    </div>\r\n</div>"}});define("esriviewer/ui/messaging/MessagingWidget",["dojo/_base/declare","dojo/text!./template/MessagingWidgetTemplate.html","dojo/topic","dojo/_base/lang","../base/UITemplatedWidget","dojox/timing","./model/MessagingWidgetViewModel"],function(_bcd,_bce,_bcf,lang,_bd0,_bd1,_bd2){return _bcd([_bd0],{templateString:_bce,defaultTimerInterval:4000,isPositionedByConfig:true,defaultPositioning:{x:375,y:50},positioningParamName:"messaging",postCreate:function(){this.inherited(arguments);this.viewModel=new _bd2();ko.applyBindings(this.viewModel,this.domNode);this.messageTimer=new dojox.timing.Timer(this.defaultTimerInterval);this.messageTimer.onTick=lang.hitch(this,this.hideMessage);this.hideMessage();},initListeners:function(){this.inherited(arguments);_bcf.subscribe(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,lang.hitch(this,this.showMessage));_bcf.subscribe(VIEWER_GLOBALS.EVENTS.MESSAGING.HIDE,lang.hitch(this,this.hideMessage));},showMessage:function(_bd3,_bd4){this.viewModel.showMessage(_bd3);_bd4=(_bd4==null)?this.defaultTimerInterval:_bd4;this.messageTimer.setInterval(_bd4);this.messageTimer.start();},hideMessage:function(){if(this.messageTimer){this.messageTimer.stop();}this.viewModel.hideMessage();}});});},"url:esriviewer/ui/window/template/WindowWidgetTemplate.html":"<div class=\"windowContainer defaultBorder fivePixelBorderRadius defaultBoxShadow\">\r\n    <div data-dojo-attach-point=\"windowHeader\" class=\"windowHeader\">\r\n        <div class=\"windowCloseImg windowAction close\" data-dojo-attach-point=\"windowCloseImg\"\r\n             title=\"Close\"></div>\r\n        <div class=\"windowMinimizeImg windowAction minimize\" data-dojo-attach-point=\"windowMinimizeImg\"\r\n             title=\"Minimize\"></div>\r\n        <div data-dojo-attach-point=\"headerMoverContainer\" class=\"headerMoverContainer\">\r\n            <div class=\"windowIcon ${windowIconClass}\" title=\"${windowIconAltText}\"></div>\r\n            <span class=\"windowHeaderText\">${windowHeaderText}</span>\r\n        </div>\r\n    </div>\r\n    <div class=\"windowContentOuter\" data-dojo-attach-point=\"windowContentOuter\">\r\n        <div data-dojo-attach-point=\"windowContent\" class=\"windowContent\">\r\n            <div data-dojo-attach-point=\"windowLoadingThrobber\" class=\"windowLoadingThrobber\"></div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n</div>","esriviewer/ui/messaging/model/MessagingWidgetViewModel":function(){define("esriviewer/ui/messaging/model/MessagingWidgetViewModel",["dojo/_base/declare"],function(_bd5){return _bd5([],{constructor:function(){this.message=ko.observable("");this.visible=ko.observable(false);},showMessage:function(_bd6){if(_bd6!=null&&_bd6!=""){this.visible(true);this.message(_bd6);}},hideMessage:function(){this.visible(false);}});});},"dojo/request/notify":function(){define("dojo/request/notify",["../Evented","../_base/lang","./util"],function(_bd7,lang,util){var _bd8=0,_bd9=[].slice;var hub=lang.mixin(new _bd7,{onsend:function(data){if(!_bd8){this.emit("start");}_bd8++;},_onload:function(data){this.emit("done",data);},_onerror:function(data){this.emit("done",data);},_ondone:function(data){if(--_bd8<=0){_bd8=0;this.emit("stop");}},emit:function(type,_bda){var _bdb=_bd7.prototype.emit.apply(this,arguments);if(this["_on"+type]){this["_on"+type].apply(this,_bd9.call(arguments,1));}return _bdb;}});function _bdc(type,_bdd){return hub.on(type,_bdd);};_bdc.emit=function(type,_bde,_bdf){return hub.emit(type,_bde,_bdf);};return util.notify=_bdc;});},"esriviewer/ui/draw/configure/geometry/model/ConfigureLineViewModel":function(){define("esriviewer/ui/draw/configure/geometry/model/ConfigureLineViewModel",["dojo/_base/declare","esri/symbols/SimpleLineSymbol"],function(_be0,_be1){return _be0([],{lineStyles:ko.observableArray([{value:_be1.STYLE_DASH,label:"Dashed Line"},{value:_be1.STYLE_DASHDOT,label:"Dash Dot Line"},{value:_be1.STYLE_DASHDOTDOT,label:"Dash Dot Dot Line"},{value:_be1.STYLE_DOT,label:"Dotted Line"},{value:_be1.STYLE_SOLID,label:"Solid Line"},{value:_be1.STYLE_NULL,label:"None"}]),lineWidths:ko.observableArray([1,2,3,4,5,6,7,8,9,10,15,20,25,30,40,50]),constructor:function(){this.selectedLineStyle=ko.observable(_be1.STYLE_SOLID);this.selectedWidth=ko.observable(2);}});});},"url:esriviewer/ui/layers/template/LayersTocWidgetTemplate.html":"<div>\r\n    <div class=\"tocRightClickLbl\">Right click for actions</div>\r\n    <div data-dojo-attach-point=\"tocContainer\" class=\"tocContainer\">\r\n\r\n\r\n    </div>\r\n</div>","dijit/form/HorizontalSlider":function(){require({cache:{"url:dijit/form/templates/HorizontalSlider.html":"<table class=\"dijit dijitReset dijitSlider dijitSliderH\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" rules=\"none\" data-dojo-attach-event=\"onkeypress:_onKeyPress,onkeyup:_onKeyUp\"\n\trole=\"presentation\"\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td data-dojo-attach-point=\"topDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\n\t\t\t><div class=\"dijitSliderDecrementIconH\" style=\"display:none\" data-dojo-attach-point=\"decrementButton\"><span class=\"dijitSliderButtonInner\">-</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper\" data-dojo-attach-event=\"press:_onClkDecBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><input data-dojo-attach-point=\"valueNode\" type=\"hidden\" ${!nameAttrSetting}\n\t\t\t/><div class=\"dijitReset dijitSliderBarContainerH\" role=\"presentation\" data-dojo-attach-point=\"sliderBarContainer\"\n\t\t\t\t><div role=\"presentation\" data-dojo-attach-point=\"progressBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH\" data-dojo-attach-event=\"press:_onBarClick\"\n\t\t\t\t\t><div class=\"dijitSliderMoveable dijitSliderMoveableH\"\n\t\t\t\t\t\t><div data-dojo-attach-point=\"sliderHandle,focusNode\" class=\"dijitSliderImageHandle dijitSliderImageHandleH\" data-dojo-attach-event=\"press:_onHandleClick\" role=\"slider\"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t\t><div role=\"presentation\" data-dojo-attach-point=\"remainingBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH\" data-dojo-attach-event=\"press:_onBarClick\"></div\n\t\t\t></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper\" data-dojo-attach-event=\"press:_onClkIncBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\n\t\t\t><div class=\"dijitSliderIncrementIconH\" style=\"display:none\" data-dojo-attach-point=\"incrementButton\"><span class=\"dijitSliderButtonInner\">+</span></div\n\t\t></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td data-dojo-attach-point=\"containerNode,bottomDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n></table>\n"}});define("dijit/form/HorizontalSlider",["dojo/_base/array","dojo/_base/declare","dojo/dnd/move","dojo/_base/event","dojo/_base/fx","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/dnd/Moveable","dojo/dnd/Mover","dojo/query","dojo/mouse","../registry","../focus","../typematic","./Button","./_FormValueWidget","../_Container","dojo/text!./templates/HorizontalSlider.html"],function(_be2,_be3,move,_be4,fx,_be5,_be6,keys,lang,has,_be7,_be8,_be9,_bea,_beb,_bec,_bed,_bee,_bef,_bf0,_bf1){var _bf2=_be3("dijit.form._SliderMover",_be8,{onMouseMove:function(e){var _bf3=this.widget;var _bf4=_bf3._abspos;if(!_bf4){_bf4=_bf3._abspos=_be5.position(_bf3.sliderBarContainer,true);_bf3._setPixelValue_=lang.hitch(_bf3,"_setPixelValue");_bf3._isReversed_=_bf3._isReversed();}var _bf5=e[_bf3._mousePixelCoord]-_bf4[_bf3._startingPixelCoord];_bf3._setPixelValue_(_bf3._isReversed_?(_bf4[_bf3._pixelCount]-_bf5):_bf5,_bf4[_bf3._pixelCount],false);},destroy:function(e){_be8.prototype.destroy.apply(this,arguments);var _bf6=this.widget;_bf6._abspos=null;_bf6._setValueAttr(_bf6.value,true);}});var _bf7=_be3("dijit.form.HorizontalSlider",[_bef,_bf0],{templateString:_bf1,value:0,showButtons:true,minimum:0,maximum:100,discreteValues:Infinity,pageIncrement:2,clickSelect:true,slideDuration:_beb.defaultDuration,_setIdAttr:"",baseClass:"dijitSlider",cssStateNodes:{incrementButton:"dijitSliderIncrementButton",decrementButton:"dijitSliderDecrementButton",focusNode:"dijitSliderThumb"},_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_handleOffsetCoord:"left",_progressPixelSize:"width",_onKeyUp:function(e){if(this.disabled||this.readOnly||e.altKey||e.ctrlKey||e.metaKey){return;}this._setValueAttr(this.value,true);},_onKeyPress:function(e){if(this.disabled||this.readOnly||e.altKey||e.ctrlKey||e.metaKey){return;}switch(e.charOrCode){case keys.HOME:this._setValueAttr(this.minimum,false);break;case keys.END:this._setValueAttr(this.maximum,false);break;case ((this._descending||this.isLeftToRight())?keys.RIGHT_ARROW:keys.LEFT_ARROW):case (this._descending===false?keys.DOWN_ARROW:keys.UP_ARROW):case (this._descending===false?keys.PAGE_DOWN:keys.PAGE_UP):this.increment(e);break;case ((this._descending||this.isLeftToRight())?keys.LEFT_ARROW:keys.RIGHT_ARROW):case (this._descending===false?keys.UP_ARROW:keys.DOWN_ARROW):case (this._descending===false?keys.PAGE_UP:keys.PAGE_DOWN):this.decrement(e);break;default:return;}_be4.stop(e);},_onHandleClick:function(e){if(this.disabled||this.readOnly){return;}if(!has("ie")){_bec.focus(this.sliderHandle);}_be4.stop(e);},_isReversed:function(){return !this.isLeftToRight();},_onBarClick:function(e){if(this.disabled||this.readOnly||!this.clickSelect){return;}_bec.focus(this.sliderHandle);_be4.stop(e);var _bf8=_be5.position(this.sliderBarContainer,true);var _bf9=e[this._mousePixelCoord]-_bf8[this._startingPixelCoord];this._setPixelValue(this._isReversed()?(_bf8[this._pixelCount]-_bf9):_bf9,_bf8[this._pixelCount],true);this._movable.onMouseDown(e);},_setPixelValue:function(_bfa,_bfb,_bfc){if(this.disabled||this.readOnly){return;}var _bfd=this.discreteValues;if(_bfd<=1||_bfd==Infinity){_bfd=_bfb;}_bfd--;var _bfe=_bfb/_bfd;var _bff=Math.round(_bfa/_bfe);this._setValueAttr(Math.max(Math.min((this.maximum-this.minimum)*_bff/_bfd+this.minimum,this.maximum),this.minimum),_bfc);},_setValueAttr:function(_c00,_c01){this._set("value",_c00);this.valueNode.value=_c00;this.focusNode.setAttribute("aria-valuenow",_c00);this.inherited(arguments);var _c02=(_c00-this.minimum)/(this.maximum-this.minimum);var _c03=(this._descending===false)?this.remainingBar:this.progressBar;var _c04=(this._descending===false)?this.progressBar:this.remainingBar;if(this._inProgressAnim&&this._inProgressAnim.status!="stopped"){this._inProgressAnim.stop(true);}if(_c01&&this.slideDuration>0&&_c03.style[this._progressPixelSize]){var _c05=this;var _c06={};var _c07=parseFloat(_c03.style[this._progressPixelSize]);var _c08=this.slideDuration*(_c02-_c07/100);if(_c08==0){return;}if(_c08<0){_c08=0-_c08;}_c06[this._progressPixelSize]={start:_c07,end:_c02*100,units:"%"};this._inProgressAnim=fx.animateProperty({node:_c03,duration:_c08,onAnimate:function(v){_c04.style[_c05._progressPixelSize]=(100-parseFloat(v[_c05._progressPixelSize]))+"%";},onEnd:function(){delete _c05._inProgressAnim;},properties:_c06});this._inProgressAnim.play();}else{_c03.style[this._progressPixelSize]=(_c02*100)+"%";_c04.style[this._progressPixelSize]=((1-_c02)*100)+"%";}},_bumpValue:function(_c09,_c0a){if(this.disabled||this.readOnly){return;}var s=_be6.getComputedStyle(this.sliderBarContainer);var c=_be5.getContentBox(this.sliderBarContainer,s);var _c0b=this.discreteValues;if(_c0b<=1||_c0b==Infinity){_c0b=c[this._pixelCount];}_c0b--;var _c0c=(this.value-this.minimum)*_c0b/(this.maximum-this.minimum)+_c09;if(_c0c<0){_c0c=0;}if(_c0c>_c0b){_c0c=_c0b;}_c0c=_c0c*(this.maximum-this.minimum)/_c0b+this.minimum;this._setValueAttr(_c0c,_c0a);},_onClkBumper:function(val){if(this.disabled||this.readOnly||!this.clickSelect){return;}this._setValueAttr(val,true);},_onClkIncBumper:function(){this._onClkBumper(this._descending===false?this.minimum:this.maximum);},_onClkDecBumper:function(){this._onClkBumper(this._descending===false?this.maximum:this.minimum);},decrement:function(e){this._bumpValue(e.charOrCode==keys.PAGE_DOWN?-this.pageIncrement:-1);},increment:function(e){this._bumpValue(e.charOrCode==keys.PAGE_UP?this.pageIncrement:1);},_mouseWheeled:function(evt){_be4.stop(evt);this._bumpValue(evt.wheelDelta<0?-1:1,true);},startup:function(){if(this._started){return;}_be2.forEach(this.getChildren(),function(_c0d){if(this[_c0d.container]!=this.containerNode){this[_c0d.container].appendChild(_c0d.domNode);}},this);this.inherited(arguments);},_typematicCallback:function(_c0e,_c0f,e){if(_c0e==-1){this._setValueAttr(this.value,true);}else{this[(_c0f==(this._descending?this.incrementButton:this.decrementButton))?"decrement":"increment"](e);}},buildRendering:function(){this.inherited(arguments);if(this.showButtons){this.incrementButton.style.display="";this.decrementButton.style.display="";}var _c10=_be9("label[for=\""+this.id+"\"]");if(_c10.length){if(!_c10[0].id){_c10[0].id=this.id+"_label";}this.focusNode.setAttribute("aria-labelledby",_c10[0].id);}this.focusNode.setAttribute("aria-valuemin",this.minimum);this.focusNode.setAttribute("aria-valuemax",this.maximum);},postCreate:function(){this.inherited(arguments);if(this.showButtons){this.own(_bed.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500),_bed.addMouseListener(this.incrementButton,this,"_typematicCallback",25,500));}this.connect(this.domNode,_bea.wheel,"_mouseWheeled");var _c11=_be3(_bf2,{widget:this});this._movable=new _be7(this.sliderHandle,{mover:_c11});this._layoutHackIE7();},destroy:function(){this._movable.destroy();if(this._inProgressAnim&&this._inProgressAnim.status!="stopped"){this._inProgressAnim.stop(true);}this.inherited(arguments);}});_bf7._Mover=_bf2;return _bf7;});},"dojox/layout/ResizeHandle":function(){define("dojox/layout/ResizeHandle",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/connect","dojo/_base/array","dojo/_base/event","dojo/_base/fx","dojo/_base/window","dojo/fx","dojo/window","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dijit/_base/manager","dijit/_Widget","dijit/_TemplatedMixin","dojo/_base/declare"],function(_c12,lang,_c13,_c14,_c15,_c16,_c17,_c18,_c19,_c1a,_c1b,_c1c,_c1d,_c1e,_c1f,_c20,_c21){_c12.experimental("dojox.layout.ResizeHandle");var _c22=_c21("dojox.layout.ResizeHandle",[_c1f,_c20],{targetId:"",targetContainer:null,resizeAxis:"xy",activeResize:false,activeResizeClass:"dojoxResizeHandleClone",animateSizing:true,animateMethod:"chain",animateDuration:225,minHeight:100,minWidth:100,constrainMax:false,maxHeight:0,maxWidth:0,fixedAspect:false,intermediateChanges:false,startTopic:"/dojo/resize/start",endTopic:"/dojo/resize/stop",templateString:"<div dojoAttachPoint=\"resizeHandle\" class=\"dojoxResizeHandle\"><div></div></div>",postCreate:function(){this.connect(this.resizeHandle,"onmousedown","_beginSizing");if(!this.activeResize){this._resizeHelper=_c1e.byId("dojoxGlobalResizeHelper");if(!this._resizeHelper){this._resizeHelper=new _c23({id:"dojoxGlobalResizeHelper"}).placeAt(_c17.body());_c1b.add(this._resizeHelper.domNode,this.activeResizeClass);}}else{this.animateSizing=false;}if(!this.minSize){this.minSize={w:this.minWidth,h:this.minHeight};}if(this.constrainMax){this.maxSize={w:this.maxWidth,h:this.maxHeight};}this._resizeX=this._resizeY=false;var _c24=lang.partial(_c1b.add,this.resizeHandle);switch(this.resizeAxis.toLowerCase()){case "xy":this._resizeX=this._resizeY=true;_c24("dojoxResizeNW");break;case "x":this._resizeX=true;_c24("dojoxResizeW");break;case "y":this._resizeY=true;_c24("dojoxResizeN");break;}},_beginSizing:function(e){if(this._isSizing){return;}_c13.publish(this.startTopic,[this]);this.targetWidget=_c1e.byId(this.targetId);this.targetDomNode=this.targetWidget?this.targetWidget.domNode:_c1a.byId(this.targetId);if(this.targetContainer){this.targetDomNode=this.targetContainer;}if(!this.targetDomNode){return;}if(!this.activeResize){var c=_c1c.position(this.targetDomNode,true);this._resizeHelper.resize({l:c.x,t:c.y,w:c.w,h:c.h});this._resizeHelper.show();if(!this.isLeftToRight()){this._resizeHelper.startPosition={l:c.x,t:c.y};}}this._isSizing=true;this.startPoint={x:e.clientX,y:e.clientY};var _c25=_c1d.getComputedStyle(this.targetDomNode),_c26=_c1c.boxModel==="border-model",_c27=_c26?{w:0,h:0}:_c1c.getPadBorderExtents(this.targetDomNode,_c25),_c28=_c1c.getMarginExtents(this.targetDomNode,_c25),mb;mb=this.startSize={w:_c1d.get(this.targetDomNode,"width",_c25),h:_c1d.get(this.targetDomNode,"height",_c25),pbw:_c27.w,pbh:_c27.h,mw:_c28.w,mh:_c28.h};if(!this.isLeftToRight()&&dojo.style(this.targetDomNode,"position")=="absolute"){var p=_c1c.position(this.targetDomNode,true);this.startPosition={l:p.x,t:p.y};}this._pconnects=[_c13.connect(_c17.doc,"onmousemove",this,"_updateSizing"),_c13.connect(_c17.doc,"onmouseup",this,"_endSizing")];_c15.stop(e);},_updateSizing:function(e){if(this.activeResize){this._changeSizing(e);}else{var tmp=this._getNewCoords(e,"border",this._resizeHelper.startPosition);if(tmp===false){return;}this._resizeHelper.resize(tmp);}e.preventDefault();},_getNewCoords:function(e,box,_c29){try{if(!e.clientX||!e.clientY){return false;}}catch(e){return false;}this._activeResizeLastEvent=e;var dx=(this.isLeftToRight()?1:-1)*(this.startPoint.x-e.clientX),dy=this.startPoint.y-e.clientY,newW=this.startSize.w-(this._resizeX?dx:0),newH=this.startSize.h-(this._resizeY?dy:0),r=this._checkConstraints(newW,newH);_c29=(_c29||this.startPosition);if(_c29&&this._resizeX){r.l=_c29.l+dx;if(r.w!=newW){r.l+=(newW-r.w);}r.t=_c29.t;}switch(box){case "margin":r.w+=this.startSize.mw;r.h+=this.startSize.mh;case "border":r.w+=this.startSize.pbw;r.h+=this.startSize.pbh;break;}return r;},_checkConstraints:function(newW,newH){if(this.minSize){var tm=this.minSize;if(newW<tm.w){newW=tm.w;}if(newH<tm.h){newH=tm.h;}}if(this.constrainMax&&this.maxSize){var ms=this.maxSize;if(newW>ms.w){newW=ms.w;}if(newH>ms.h){newH=ms.h;}}if(this.fixedAspect){var w=this.startSize.w,h=this.startSize.h,_c2a=w*newH-h*newW;if(_c2a<0){newW=newH*w/h;}else{if(_c2a>0){newH=newW*h/w;}}}return {w:newW,h:newH};},_changeSizing:function(e){var _c2b=this.targetWidget&&lang.isFunction(this.targetWidget.resize),tmp=this._getNewCoords(e,_c2b&&"margin");if(tmp===false){return;}if(_c2b){this.targetWidget.resize(tmp);}else{if(this.animateSizing){var anim=_c18[this.animateMethod]([_c16.animateProperty({node:this.targetDomNode,properties:{width:{start:this.startSize.w,end:tmp.w}},duration:this.animateDuration}),_c16.animateProperty({node:this.targetDomNode,properties:{height:{start:this.startSize.h,end:tmp.h}},duration:this.animateDuration})]);anim.play();}else{_c1d.set(this.targetDomNode,{width:tmp.w+"px",height:tmp.h+"px"});}}if(this.intermediateChanges){this.onResize(e);}},_endSizing:function(e){_c14.forEach(this._pconnects,_c13.disconnect);var pub=lang.partial(_c13.publish,this.endTopic,[this]);if(!this.activeResize){this._resizeHelper.hide();this._changeSizing(e);setTimeout(pub,this.animateDuration+15);}else{pub();}this._isSizing=false;this.onResize(e);},onResize:function(e){}});var _c23=dojo.declare("dojox.layout._ResizeHelper",_c1f,{show:function(){_c1d.set(this.domNode,"display","");},hide:function(){_c1d.set(this.domNode,"display","none");},resize:function(dim){_c1c.setMarginBox(this.domNode,dim);}});return _c22;});},"dijit/Tree":function(){require({cache:{"url:dijit/templates/TreeNode.html":"<div class=\"dijitTreeNode\" role=\"presentation\"\n\t><div data-dojo-attach-point=\"rowNode\" class=\"dijitTreeRow dijitInline\" role=\"presentation\"\n\t\t><div data-dojo-attach-point=\"indentNode\" class=\"dijitInline\"></div\n\t\t><img src=\"${_blankGif}\" alt=\"\" data-dojo-attach-point=\"expandoNode\" class=\"dijitTreeExpando\" role=\"presentation\"\n\t\t/><span data-dojo-attach-point=\"expandoNodeText\" class=\"dijitExpandoText\" role=\"presentation\"\n\t\t></span\n\t\t><span data-dojo-attach-point=\"contentNode\"\n\t\t\tclass=\"dijitTreeContent\" role=\"presentation\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" data-dojo-attach-point=\"iconNode\" class=\"dijitIcon dijitTreeIcon\" role=\"presentation\"\n\t\t\t/><span data-dojo-attach-point=\"labelNode\" class=\"dijitTreeLabel\" role=\"treeitem\" tabindex=\"-1\" aria-selected=\"false\"></span>\n\t\t</span\n\t></div>\n\t<div data-dojo-attach-point=\"containerNode\" class=\"dijitTreeContainer\" role=\"presentation\" style=\"display: none;\"></div>\n</div>\n","url:dijit/templates/Tree.html":"<div class=\"dijitTree dijitTreeContainer\" role=\"tree\">\n\t<div class=\"dijitInline dijitTreeIndent\" style=\"position: absolute; top: -9999px\" data-dojo-attach-point=\"indentDetector\"></div>\n</div>\n"}});define("dijit/Tree",["dojo/_base/array","dojo/_base/connect","dojo/cookie","dojo/_base/declare","dojo/Deferred","dojo/DeferredList","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/errors/create","dojo/fx","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/topic","dojo/touch","dojo/when","./focus","./registry","./_base/manager","./_Widget","./_TemplatedMixin","./_Container","./_Contained","./_CssStateMixin","dojo/text!./templates/TreeNode.html","dojo/text!./templates/Tree.html","./tree/TreeStoreModel","./tree/ForestStoreModel","./tree/_dndSelector"],function(_c2c,_c2d,_c2e,_c2f,_c30,_c31,dom,_c32,_c33,_c34,_c35,_c36,_c37,_c38,keys,lang,on,_c39,_c3a,when,_c3b,_c3c,_c3d,_c3e,_c3f,_c40,_c41,_c42,_c43,_c44,_c45,_c46,_c47){_c30=_c2f(_c30,{addCallback:function(_c48){this.then(_c48);},addErrback:function(_c49){this.then(null,_c49);}});var _c4a=_c2f("dijit._TreeNode",[_c3e,_c3f,_c40,_c41,_c42],{item:null,isTreeNode:true,label:"",_setLabelAttr:{node:"labelNode",type:"innerText"},isExpandable:null,isExpanded:false,state:"UNCHECKED",templateString:_c43,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);if(this.isExpandable){this.labelNode.setAttribute("aria-expanded",this.isExpanded);}this.setSelected(false);},_setIndentAttr:function(_c4b){var _c4c=(Math.max(_c4b,0)*this.tree._nodePixelIndent)+"px";_c34.set(this.domNode,"backgroundPosition",_c4c+" 0px");_c34.set(this.indentNode,this.isLeftToRight()?"paddingLeft":"paddingRight",_c4c);_c2c.forEach(this.getChildren(),function(_c4d){_c4d.set("indent",_c4b+1);});this._set("indent",_c4b);},markProcessing:function(){this.state="LOADING";this._setExpando(true);},unmarkProcessing:function(){this._setExpando(false);},_updateItemClasses:function(item){var tree=this.tree,_c4e=tree.model;if(tree._v10Compat&&item===_c4e.root){item=null;}this._applyClassAndStyle(item,"icon","Icon");this._applyClassAndStyle(item,"label","Label");this._applyClassAndStyle(item,"row","Row");this.tree._startPaint(true);},_applyClassAndStyle:function(item,_c4f,_c50){var _c51="_"+_c4f+"Class";var _c52=_c4f+"Node";var _c53=this[_c51];this[_c51]=this.tree["get"+_c50+"Class"](item,this.isExpanded);_c32.replace(this[_c52],this[_c51]||"",_c53||"");_c34.set(this[_c52],this.tree["get"+_c50+"Style"](item,this.isExpanded)||{});},_updateLayout:function(){var _c54=this.getParent();if(!_c54||!_c54.rowNode||_c54.rowNode.style.display=="none"){_c32.add(this.domNode,"dijitTreeIsRoot");}else{_c32.toggle(this.domNode,"dijitTreeIsLast",!this.getNextSibling());}},_setExpando:function(_c55){var _c56=["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"],_c57=["*","-","+","*"],idx=_c55?0:(this.isExpandable?(this.isExpanded?1:2):3);_c32.replace(this.expandoNode,_c56[idx],_c56);this.expandoNodeText.innerHTML=_c57[idx];},expand:function(){if(this._expandDeferred){return this._expandDeferred;}if(this._collapseDeferred){this._collapseDeferred.cancel();delete this._collapseDeferred;}this.isExpanded=true;this.labelNode.setAttribute("aria-expanded","true");if(this.tree.showRoot||this!==this.tree.rootNode){this.containerNode.setAttribute("role","group");}_c32.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);if(this==this.tree.rootNode&&this.tree.showRoot){this.tree.domNode.setAttribute("aria-expanded","true");}var def,_c58=_c37.wipeIn({node:this.containerNode,duration:_c3d.defaultDuration,onEnd:function(){def.resolve(true);}});def=(this._expandDeferred=new _c30(function(){_c58.stop();}));_c58.play();return def;},collapse:function(){if(this._collapseDeferred){return this._collapseDeferred;}if(this._expandDeferred){this._expandDeferred.cancel();delete this._expandDeferred;}this.isExpanded=false;this.labelNode.setAttribute("aria-expanded","false");if(this==this.tree.rootNode&&this.tree.showRoot){this.tree.domNode.setAttribute("aria-expanded","false");}_c32.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var def,_c59=_c37.wipeOut({node:this.containerNode,duration:_c3d.defaultDuration,onEnd:function(){def.resolve(true);}});def=(this._collapseDeferred=new _c30(function(){_c59.stop();}));_c59.play();return def;},indent:0,setChildItems:function(_c5a){var tree=this.tree,_c5b=tree.model,defs=[];var _c5c=this.getChildren();_c2c.forEach(_c5c,function(_c5d){_c40.prototype.removeChild.call(this,_c5d);},this);this.defer(function(){_c2c.forEach(_c5c,function(node){if(!node._destroyed&&!node.getParent()){tree.dndController.removeTreeNode(node);var id=_c5b.getIdentity(node.item),ary=tree._itemNodesMap[id];if(ary.length==1){delete tree._itemNodesMap[id];}else{var _c5e=_c2c.indexOf(ary,node);if(_c5e!=-1){ary.splice(_c5e,1);}}node.destroyRecursive();}});});this.state="LOADED";if(_c5a&&_c5a.length>0){this.isExpandable=true;_c2c.forEach(_c5a,function(item){var id=_c5b.getIdentity(item),_c5f=tree._itemNodesMap[id],node;if(_c5f){for(var i=0;i<_c5f.length;i++){if(_c5f[i]&&!_c5f[i].getParent()){node=_c5f[i];node.set("indent",this.indent+1);break;}}}if(!node){node=this.tree._createTreeNode({item:item,tree:tree,isExpandable:_c5b.mayHaveChildren(item),label:tree.getLabel(item),tooltip:tree.getTooltip(item),ownerDocument:tree.ownerDocument,dir:tree.dir,lang:tree.lang,textDir:tree.textDir,indent:this.indent+1});if(_c5f){_c5f.push(node);}else{tree._itemNodesMap[id]=[node];}}this.addChild(node);if(this.tree.autoExpand||this.tree._state(node)){defs.push(tree._expandNode(node));}},this);_c2c.forEach(this.getChildren(),function(_c60){_c60._updateLayout();});}else{this.isExpandable=false;}if(this._setExpando){this._setExpando(false);}this._updateItemClasses(this.item);if(this==tree.rootNode){var fc=this.tree.showRoot?this:this.getChildren()[0];if(fc){fc.setFocusable(true);tree.lastFocused=fc;}else{tree.domNode.setAttribute("tabIndex","0");}}var def=new _c31(defs);this.tree._startPaint(def);return def;},getTreePath:function(){var node=this;var path=[];while(node&&node!==this.tree.rootNode){path.unshift(node.item);node=node.getParent();}path.unshift(this.tree.rootNode.item);return path;},getIdentity:function(){return this.tree.model.getIdentity(this.item);},removeChild:function(node){this.inherited(arguments);var _c61=this.getChildren();if(_c61.length==0){this.isExpandable=false;this.collapse();}_c2c.forEach(_c61,function(_c62){_c62._updateLayout();});},makeExpandable:function(){this.isExpandable=true;this._setExpando(false);},setSelected:function(_c63){this.labelNode.setAttribute("aria-selected",_c63?"true":"false");_c32.toggle(this.rowNode,"dijitTreeRowSelected",_c63);},setFocusable:function(_c64){this.labelNode.setAttribute("tabIndex",_c64?"0":"-1");},_setTextDirAttr:function(_c65){if(_c65&&((this.textDir!=_c65)||!this._created)){this._set("textDir",_c65);this.applyTextDir(this.labelNode,this.labelNode.innerText||this.labelNode.textContent||"");_c2c.forEach(this.getChildren(),function(_c66){_c66.set("textDir",_c65);},this);}}});var Tree=_c2f("dijit.Tree",[_c3e,_c3f],{store:null,model:null,query:null,label:"",showRoot:true,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:false,openOnDblClick:false,templateString:_c44,persist:true,autoExpand:false,dndController:_c47,dndParams:["onDndDrop","itemCreator","onDndCancel","checkAcceptance","checkItemAcceptance","dragThreshold","betweenThreshold"],onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(_c67,_c68){_c39.publish(this.id,lang.mixin({tree:this,event:_c67},_c68||{}));},postMixInProperties:function(){this.tree=this;if(this.autoExpand){this.persist=false;}this._itemNodesMap={};if(!this.cookieName&&this.id){this.cookieName=this.id+"SaveStateCookie";}this.expandChildrenDeferred=new _c30();this.pendingCommandsDeferred=this.expandChildrenDeferred;this.inherited(arguments);},postCreate:function(){this._initState();var self=this;this.own(on(this.domNode,on.selector(".dijitTreeNode",_c3a.enter),function(evt){self._onNodeMouseEnter(_c3c.byNode(this),evt);}),on(this.domNode,on.selector(".dijitTreeNode",_c3a.leave),function(evt){self._onNodeMouseLeave(_c3c.byNode(this),evt);}),on(this.domNode,on.selector(".dijitTreeNode","click"),function(evt){self._onClick(_c3c.byNode(this),evt);}),on(this.domNode,on.selector(".dijitTreeNode","dblclick"),function(evt){self._onDblClick(_c3c.byNode(this),evt);}),on(this.domNode,on.selector(".dijitTreeNode","keypress"),function(evt){self._onKeyPress(_c3c.byNode(this),evt);}),on(this.domNode,on.selector(".dijitTreeNode","keydown"),function(evt){self._onKeyDown(_c3c.byNode(this),evt);}),on(this.domNode,on.selector(".dijitTreeRow","focusin"),function(evt){self._onNodeFocus(_c3c.getEnclosingWidget(this),evt);}));if(!this.model){this._store2model();}this.connect(this.model,"onChange","_onItemChange");this.connect(this.model,"onChildrenChange","_onItemChildrenChange");this.connect(this.model,"onDelete","_onItemDelete");this.inherited(arguments);if(this.dndController){if(lang.isString(this.dndController)){this.dndController=lang.getObject(this.dndController);}var _c69={};for(var i=0;i<this.dndParams.length;i++){if(this[this.dndParams[i]]){_c69[this.dndParams[i]]=this[this.dndParams[i]];}}this.dndController=new this.dndController(this,_c69);}this._load();if(!this.params.path&&!this.params.paths&&this.persist){this.set("paths",this.dndController._getSavedPaths());}this.onLoadDeferred=this.pendingCommandsDeferred;this.onLoadDeferred.then(lang.hitch(this,"onLoad"));},_store2model:function(){this._v10Compat=true;_c38.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var _c6a={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};if(this.params.mayHaveChildren){_c6a.mayHaveChildren=lang.hitch(this,"mayHaveChildren");}if(this.params.getItemChildren){_c6a.getChildren=lang.hitch(this,function(item,_c6b,_c6c){this.getItemChildren((this._v10Compat&&item===this.model.root)?null:item,_c6b,_c6c);});}this.model=new _c46(_c6a);this.showRoot=Boolean(this.label);},onLoad:function(){},_load:function(){this.model.getRoot(lang.hitch(this,function(item){var rn=(this.rootNode=this.tree._createTreeNode({item:item,tree:this,isExpandable:true,label:this.label||this.getLabel(item),textDir:this.textDir,indent:this.showRoot?0:-1}));if(!this.showRoot){rn.rowNode.style.display="none";this.domNode.setAttribute("role","presentation");this.domNode.removeAttribute("aria-expanded");this.domNode.removeAttribute("aria-multiselectable");rn.labelNode.setAttribute("role","presentation");rn.containerNode.setAttribute("role","tree");rn.containerNode.setAttribute("aria-expanded","true");rn.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular);}else{this.domNode.setAttribute("aria-multiselectable",!this.dndController.singular);}this.domNode.appendChild(rn.domNode);var _c6d=this.model.getIdentity(item);if(this._itemNodesMap[_c6d]){this._itemNodesMap[_c6d].push(rn);}else{this._itemNodesMap[_c6d]=[rn];}rn._updateLayout();this._expandNode(rn).then(lang.hitch(this,function(){this.expandChildrenDeferred.resolve(true);}));}),lang.hitch(this,function(err){}));},getNodesByItem:function(item){if(!item){return [];}var _c6e=lang.isString(item)?item:this.model.getIdentity(item);return [].concat(this._itemNodesMap[_c6e]);},_setSelectedItemAttr:function(item){this.set("selectedItems",[item]);},_setSelectedItemsAttr:function(_c6f){var tree=this;return this.pendingCommandsDeferred=this.pendingCommandsDeferred.then(lang.hitch(this,function(){var _c70=_c2c.map(_c6f,function(item){return (!item||lang.isString(item))?item:tree.model.getIdentity(item);});var _c71=[];_c2c.forEach(_c70,function(id){_c71=_c71.concat(tree._itemNodesMap[id]||[]);});this.set("selectedNodes",_c71);}));},_setPathAttr:function(path){if(path.length){return this.set("paths",[path]);}else{return this.set("paths",[]);}},_setPathsAttr:function(_c72){var tree=this;return this.pendingCommandsDeferred=this.pendingCommandsDeferred.then(function(){return new _c31(_c2c.map(_c72,function(path){var d=new _c30();path=_c2c.map(path,function(item){return lang.isString(item)?item:tree.model.getIdentity(item);});if(path.length){_c73(path,[tree.rootNode],d);}else{d.reject(new Tree.PathError("Empty path"));}return d;}));}).then(_c74);function _c73(path,_c75,def){var _c76=path.shift();var _c77=_c2c.filter(_c75,function(node){return node.getIdentity()==_c76;})[0];if(!!_c77){if(path.length){tree._expandNode(_c77).then(function(){_c73(path,_c77.getChildren(),def);});}else{def.resolve(_c77);}}else{def.reject(new Tree.PathError("Could not expand path at "+_c76));}};function _c74(_c78){tree.set("selectedNodes",_c2c.map(_c2c.filter(_c78,function(x){return x[0];}),function(x){return x[1];}));};},_setSelectedNodeAttr:function(node){this.set("selectedNodes",[node]);},_setSelectedNodesAttr:function(_c79){this.dndController.setSelection(_c79);},expandAll:function(){var _c7a=this;function _c7b(node){var def=new dojo.Deferred();_c7a._expandNode(node).then(function(){var _c7c=_c2c.filter(node.getChildren()||[],function(node){return node.isExpandable;}),defs=_c2c.map(_c7c,_c7b);new dojo.DeferredList(defs).then(function(){def.resolve(true);});});return def;};return _c7b(this.rootNode);},collapseAll:function(){var _c7d=this;function _c7e(node){var def=new dojo.Deferred();def.label="collapseAllDeferred";var _c7f=_c2c.filter(node.getChildren()||[],function(node){return node.isExpandable;}),defs=_c2c.map(_c7f,_c7e);new dojo.DeferredList(defs).then(function(){if(!node.isExpanded||(node==_c7d.rootNode&&!_c7d.showRoot)){def.resolve(true);}else{_c7d._collapseNode(node).then(function(){def.resolve(true);});}});return def;};return _c7e(this.rootNode);},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(item){return this.model.getLabel(item);},getIconClass:function(item,_c80){return (!item||this.model.mayHaveChildren(item))?(_c80?"dijitFolderOpened":"dijitFolderClosed"):"dijitLeaf";},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return "";},_onKeyPress:function(_c81,e){if(e.charCode<=32){return;}if(!e.altKey&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey){var c=String.fromCharCode(e.charCode);this._onLetterKeyNav({node:_c81,key:c.toLowerCase()});_c35.stop(e);}},_onKeyDown:function(_c82,e){var key=e.keyCode;var map=this._keyHandlerMap;if(!map){map={};map[keys.ENTER]=map[keys.SPACE]=map[" "]="_onEnterKey";map[this.isLeftToRight()?keys.LEFT_ARROW:keys.RIGHT_ARROW]="_onLeftArrow";map[this.isLeftToRight()?keys.RIGHT_ARROW:keys.LEFT_ARROW]="_onRightArrow";map[keys.UP_ARROW]="_onUpArrow";map[keys.DOWN_ARROW]="_onDownArrow";map[keys.HOME]="_onHomeKey";map[keys.END]="_onEndKey";this._keyHandlerMap=map;}if(this._keyHandlerMap[key]){if(this._curSearch){this._curSearch.timer.remove();delete this._curSearch;}this[this._keyHandlerMap[key]]({node:_c82,item:_c82.item,evt:e});_c35.stop(e);}},_onEnterKey:function(_c83){this._publish("execute",{item:_c83.item,node:_c83.node});this.dndController.userSelect(_c83.node,_c2d.isCopyKey(_c83.evt),_c83.evt.shiftKey);this.onClick(_c83.item,_c83.node,_c83.evt);},_onDownArrow:function(_c84){var node=this._getNextNode(_c84.node);if(node&&node.isTreeNode){this.focusNode(node);}},_onUpArrow:function(_c85){var node=_c85.node;var _c86=node.getPreviousSibling();if(_c86){node=_c86;while(node.isExpandable&&node.isExpanded&&node.hasChildren()){var _c87=node.getChildren();node=_c87[_c87.length-1];}}else{var _c88=node.getParent();if(!(!this.showRoot&&_c88===this.rootNode)){node=_c88;}}if(node&&node.isTreeNode){this.focusNode(node);}},_onRightArrow:function(_c89){var node=_c89.node;if(node.isExpandable&&!node.isExpanded){this._expandNode(node);}else{if(node.hasChildren()){node=node.getChildren()[0];if(node&&node.isTreeNode){this.focusNode(node);}}}},_onLeftArrow:function(_c8a){var node=_c8a.node;if(node.isExpandable&&node.isExpanded){this._collapseNode(node);}else{var _c8b=node.getParent();if(_c8b&&_c8b.isTreeNode&&!(!this.showRoot&&_c8b===this.rootNode)){this.focusNode(_c8b);}}},_onHomeKey:function(){var node=this._getRootOrFirstNode();if(node){this.focusNode(node);}},_onEndKey:function(){var node=this.rootNode;while(node.isExpanded){var c=node.getChildren();node=c[c.length-1];}if(node&&node.isTreeNode){this.focusNode(node);}},multiCharSearchDuration:250,_onLetterKeyNav:function(_c8c){var cs=this._curSearch;if(cs){cs.pattern=cs.pattern+_c8c.key;cs.timer.remove();}else{cs=this._curSearch={pattern:_c8c.key,startNode:_c8c.node};}cs.timer=this.defer(function(){delete this._curSearch;},this.multiCharSearchDuration);var node=cs.startNode;do{node=this._getNextNode(node);if(!node){node=this._getRootOrFirstNode();}}while(node!==cs.startNode&&(node.label.toLowerCase().substr(0,cs.pattern.length)!=cs.pattern));if(node&&node.isTreeNode){if(node!==cs.startNode){this.focusNode(node);}}},isExpandoNode:function(node,_c8d){return dom.isDescendant(node,_c8d.expandoNode)||dom.isDescendant(node,_c8d.expandoNodeText);},_onClick:function(_c8e,e){var _c8f=e.target,_c90=this.isExpandoNode(_c8f,_c8e);if((this.openOnClick&&_c8e.isExpandable)||_c90){if(_c8e.isExpandable){this._onExpandoClick({node:_c8e});}}else{this._publish("execute",{item:_c8e.item,node:_c8e,evt:e});this.onClick(_c8e.item,_c8e,e);this.focusNode(_c8e);}_c35.stop(e);},_onDblClick:function(_c91,e){var _c92=e.target,_c93=(_c92==_c91.expandoNode||_c92==_c91.expandoNodeText);if((this.openOnDblClick&&_c91.isExpandable)||_c93){if(_c91.isExpandable){this._onExpandoClick({node:_c91});}}else{this._publish("execute",{item:_c91.item,node:_c91,evt:e});this.onDblClick(_c91.item,_c91,e);this.focusNode(_c91);}_c35.stop(e);},_onExpandoClick:function(_c94){var node=_c94.node;this.focusNode(node);if(node.isExpanded){this._collapseNode(node);}else{this._expandNode(node);}},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(node){if(node.isExpandable&&node.isExpanded&&node.hasChildren()){return node.getChildren()[0];}else{while(node&&node.isTreeNode){var _c95=node.getNextSibling();if(_c95){return _c95;}node=node.getParent();}return null;}},_getRootOrFirstNode:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0];},_collapseNode:function(node){if(node._expandNodeDeferred){delete node._expandNodeDeferred;}if(node.state=="LOADING"){return;}if(node.isExpanded){var ret=node.collapse();this.onClose(node.item,node);this._state(node,false);this._startPaint(ret);return ret;}},_expandNode:function(node){var def=new _c30();if(node._expandNodeDeferred){return node._expandNodeDeferred;}var _c96=this.model,item=node.item,_c97=this;if(!node._loadDeferred){node.markProcessing();node._loadDeferred=new _c30();_c96.getChildren(item,function(_c98){node.unmarkProcessing();node.setChildItems(_c98).then(function(){node._loadDeferred.resolve(_c98);});},function(err){node._loadDeferred.reject(err);});}node._loadDeferred.then(lang.hitch(this,function(){node.expand().then(function(){def.resolve(true);});this.onOpen(node.item,node);this._state(node,true);}));this._startPaint(def);return def;},focusNode:function(node){_c3b.focus(node.labelNode);},_onNodeFocus:function(node){if(node&&node!=this.lastFocused){if(this.lastFocused&&!this.lastFocused._destroyed){this.lastFocused.setFocusable(false);}node.setFocusable(true);this.lastFocused=node;}},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(item){var _c99=this.model,_c9a=_c99.getIdentity(item),_c9b=this._itemNodesMap[_c9a];if(_c9b){var _c9c=this.getLabel(item),_c9d=this.getTooltip(item);_c2c.forEach(_c9b,function(node){node.set({item:item,label:_c9c,tooltip:_c9d});node._updateItemClasses(item);});}},_onItemChildrenChange:function(_c9e,_c9f){var _ca0=this.model,_ca1=_ca0.getIdentity(_c9e),_ca2=this._itemNodesMap[_ca1];if(_ca2){_c2c.forEach(_ca2,function(_ca3){_ca3.setChildItems(_c9f);});}},_onItemDelete:function(item){var _ca4=this.model,_ca5=_ca4.getIdentity(item),_ca6=this._itemNodesMap[_ca5];if(_ca6){_c2c.forEach(_ca6,function(node){this.dndController.removeTreeNode(node);var _ca7=node.getParent();if(_ca7){_ca7.removeChild(node);}node.destroyRecursive();},this);delete this._itemNodesMap[_ca5];}},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var oreo=_c2e(this.cookieName);if(oreo){_c2c.forEach(oreo.split(","),function(item){this._openedNodes[item]=true;},this);}}},_state:function(node,_ca8){if(!this.persist){return false;}var path=_c2c.map(node.getTreePath(),function(item){return this.model.getIdentity(item);},this).join("/");if(arguments.length===1){return this._openedNodes[path];}else{if(_ca8){this._openedNodes[path]=true;}else{delete this._openedNodes[path];}if(this.persist&&this.cookieName){var ary=[];for(var id in this._openedNodes){ary.push(id);}_c2e(this.cookieName,ary.join(","),{expires:365});}}},destroy:function(){if(this._curSearch){this._curSearch.timer.remove();delete this._curSearch;}if(this.rootNode){this.rootNode.destroyRecursive();}if(this.dndController&&!lang.isString(this.dndController)){this.dndController.destroy();}this.rootNode=null;this.inherited(arguments);},destroyRecursive:function(){this.destroy();},resize:function(_ca9){if(_ca9){_c33.setMarginBox(this.domNode,_ca9);}this._nodePixelIndent=_c33.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(lang.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths();}));},_outstandingPaintOperations:0,_startPaint:function(p){this._outstandingPaintOperations++;if(this._adjustWidthsTimer){this._adjustWidthsTimer.remove();delete this._adjustWidthsTimer;}var oc=lang.hitch(this,function(){this._outstandingPaintOperations--;if(this._outstandingPaintOperations<=0&&!this._adjustWidthsTimer&&this._started){this._adjustWidthsTimer=this.defer("_adjustWidths");}});when(p,oc,oc);},_adjustWidths:function(){if(this._adjustWidthsTimer){this._adjustWidthsTimer.remove();delete this._adjustWidthsTimer;}var _caa=0,_cab=[];function _cac(_cad){var node=_cad.rowNode;node.style.width="auto";_caa=Math.max(_caa,node.clientWidth);_cab.push(node);if(_cad.isExpanded){_c2c.forEach(_cad.getChildren(),_cac);}};_cac(this.rootNode);_caa=Math.max(_caa,_c33.getContentBox(this.domNode).w);_c2c.forEach(_cab,function(node){node.style.width=_caa+"px";});},_createTreeNode:function(args){return new _c4a(args);},_setTextDirAttr:function(_cae){if(_cae&&this.textDir!=_cae){this._set("textDir",_cae);this.rootNode.set("textDir",_cae);}}});Tree.PathError=_c36("TreePathError");Tree._TreeNode=_c4a;return Tree;});},"esriviewer/loader/ViewerLoader":function(){require({cache:{"url:esriviewer/theme/defaults.css":".mapScaleAndCoordsContainer, .mapScaleAndCoordsContainerWithFooter{position:absolute;background-color:#ECECEC;color:#444444;font-size:11px;padding:2px;}.mapScaleAndCoordsContainer{bottom:10px;left:200px;}.mapScaleAndCoordsContainerWithFooter{top:40px;right:10px;}.mapScaleInfoInner, .mapCoordsInfoInner, .mapImageInfoFormatInfo{padding:0 5px;}.legendWidgetContainer{height:100%;overflow:auto;}.legendWindowContent{height:88%;}.esriAttributionLastItem{display:none !important;}html{height:100%;width:100%;}body{margin:0 auto;padding:0;height:100%;width:100%;overflow:hidden;}.mapdiv{overflow:hidden;background-color:ghostwhite;}.confirmTooltipOptionText{color:Blue;margin:0 5px;text-decoration:underline;cursor:pointer;}.confirmTooltipContentLbl{color:#3F3F3F;}.tundra .dijitAccordionTitleSelected, .tundra .dijitAccordionTitle, .windowHeader, .windowHeaderCollapsed{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAABLCAYAAAC1Iz2+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjEwMPRyoQAAAKBJREFUOE+Nx7cNw0AAQ1HuP6ByzlkNBzBcsDjINFR8gg/3fVMhwHVdVPA4z5MKHsdxUOEn9n0nvqP+YNs2Knis60oFj2VZqOAxzzMVAkzTRAWPcRyp8BLDMFAhQN/3VPDouo4KHm3bUsGjaRoqeNR1TQWPqqqo4FGWJRU8iqKggkee51TwyLKMCgHSNKXCSyRJQgWPOI6p8EAURfwGnQc+9GsrqAtrB/gAAAAASUVORK5CYII=);}.headerFooterBg{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAeCAIAAABi9+OQAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABp0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuMTAw9HKhAAAAQklEQVQYV43DQQrAIAwAwf3/X6NEY6IoWuqh5w4M5xz+3Huz1mLOeY8x6L0TEbj7t7WGmVFrpZRyqyo5Z1JKiMj7AcBMV0k74mKnAAAAAElFTkSuQmCC);}.defaultTransparentBackground{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAABHCAYAAAAgPea8AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwAAADsABataJCQAAABp0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuMTAw9HKhAAAAIklEQVQ4T2P4/PnzB2TMMCowGh6IJDGaHEazB1IJMViSAwDPQTM5L90PTQAAAABJRU5ErkJggg==);}.defaultBackground{background:#F7F7F7;}.blueBoxShadow{-moz-box-shadow:2px 5px 5px #E8F3FF;-webkit-box-shadow:2px 5px 5px #E8F3FF;box-shadow:2px 5px 5px #E8F3FF;}.defaultBoxShadow{-webkit-box-shadow:0 6px 10px rgba(0, 0, 0, 0.4);-moz-box-shadow:0 6px 10px rgba(0, 0, 0, 0.4);box-shadow:0 6px 10px rgba(0, 0, 0, 0.4);}.threePixelBorderRadius{-moz-border-radius:3px 3px 3px 3px;-webkit-border-radius:3px 3px 3px 3px;border-radius:3px 3px 3px 3px;}.fourPixelBorderRadius{-moz-border-radius:4px 4px 4px 4px;-webkit-border-radius:4px 4px 4px 4px;border-radius:4px 4px 4px 4px;}.fivePixelBorderRadius{-moz-border-radius:5px 5px 5px 5px;-webkit-border-radius:5px 5px 5px 5px;border-radius:5px 5px 5px 5px;}.defaultBorder{border:1px solid #D3D3D3;}.defaultTwoPixelBorder{border:2px solid #666666;}.defaultTextColor{color:#666666;}.defaultFont{font-family:tahoma, sans-serif;}.defaultFontSize{font-size:.8em;}.defaultTabContainer{line-height:26px;font-weight:normal;margin-bottom:25px;}.defaultTabContainer span{border:1px solid #DFDFDF;border-top:0;cursor:pointer;padding:5px;margin:0 3px;-moz-border-radius:0 0 3px 3px;-webkit-border-radius:0 0 3px 3px;border-radius:0 0 3px 3px;}.selectedTab{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAyCAIAAAASmSbdAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjEwMPRyoQAAAL1JREFUGFcNw4lSAXEAwOHfo5VJMbmahElohKZkKpniRSp0kbtTpXQ8k3Zdu3bt8v9mPnJ/M7K/M85+TE6/TTJdk5OuQfrL4PjT4Kgz5VBMfUw5eNdJvunst3X22hq7rxqJF43484SYuPM0Ifqosv2gEmmphFsKoabCVkMhWB+zKQZqY/zVEb7KiA3Rez9kvTxkrTTAI7rvBrhu+zhv+jjE1WsZ+5WMrSizUpRYLkhY8xJLl/9YxMWLHgvnvTkWQmMz2A2w4gAAAABJRU5ErkJggg==);color:white;}.noTopPadding{padding-top:0;}.viewerList{list-style-type:none;margin:0;padding:0;}.viewerList li{border:1px solid #9AAEC5;padding:3px;margin:5px 0;background:#FAFAFA;}.viewerListEntryRemoveIcon{margin-right:8px;vertical-align:bottom;float:left;}.viewerListGenericIcon{margin-right:8px;vertical-align:bottom;float:left;}.tundra .dijitSliderFocused{border-color:#767676 !important;}.tundra .dijitSliderProgressBarV{background:#767676;border-color:#767676;}.tundra .dijitSplitterV, .tundra .dijitGutterV{background:none;}.dijitSliderBar{border-style:solid;border-color:black;cursor:pointer;}.dijitSliderBarContainerV{position:relative;height:100%;z-index:1;}.dijitSliderBarV{width:2px;border-width:0 1px;}.dijitSliderBumperV{width:2px;height:5px;border-width:0 1px;}.dijitSliderProgressBar{background-color:red;z-index:1;}*:focus{outline:none;}.tundra .dijitButton .dijitButtonNode, .tundra .dijitDropDownButton .dijitButtonNode, .tundra .dijitComboButton .dijitButtonNode, .tundra .dijitToggleButton .dijitButtonNode{color:#666666;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAdCAIAAADkY5E+AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABp0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuMTAw9HKhAAAATUlEQVQYVx2Ntw0AMADC/P+vidJ7ExlYEDbsvVlrMedkjEFrjVorpRRyzsQYCSHgvcc5h7UWY8zvU0p/o60YRXzv/bvkVOTXzzmHe+8D+WJUATkGV+sAAAAASUVORK5CYII=);padding:3px 5px;}.tundra .dijitButtonHover .dijitButtonNode,.tundra .dijitDropDownButtonHover .dijitButtonNode,.tundra .dijitComboButton .dijitButtonNodeHover,.tundra .dijitComboButton .dijitDownArrowButtonHover,.tundra .dijitToggleButtonHover .dijitButtonNode{color:#0026FF;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAdCAIAAADkY5E+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjEwMPRyoQAAAE5JREFUGFcdjTcOADEAwvz/vyZK7+WODCwIG+69nHPYe7PWYs75Msag905rjVrrSymFnDMpJWKMGGOw1uKcw3tPCOH12mgrRrxccsr//3wZsVQBIQOEBQAAAABJRU5ErkJggg==);padding:3px 5px;}.tundra .dijitMenu, .tundra .dijitMenuBar{color:#666666;margin-top:5px;-moz-border-radius:5px 5px 5px 5px;-webkit-border-radius:5px 5px 5px 5px;border-radius:5px 5px 5px 5px;-webkit-box-shadow:0 1px 3px rgba(0, 0, 0, .3);-moz-box-shadow:0 1px 3px rgba(0, 0, 0, .3);box-shadow:0 1px 3px rgba(0, 0, 0, .3);border:0;padding:0 5px;}.tundra .dijitMenuItem .dijitMenuItemIconCell{padding-top:0;}.tundra .dijitTreeNodeHover, .tundra .dijitTreeLabelFocused{background:transparent none !important;}.tundra .dijitTreeLabel, .tundra .dijitTreeRow, .tundra .dijitTreeIcon, .tundra .dijitTreeExpando{cursor:pointer;}.esriOverviewMap.ovwBR .ovwContainer{border:1px solid #D3D3D3;}.esriOverviewMap .ovwContainer{background:#F7F7F7;}.tundra .dijitTooltipContainer{-moz-border-radius:3px 3px 3px 3px;-webkit-border-radius:3px 3px 3px 3px;border-radius:3px 3px 3px 3px;}button:hover{color:blue;}.dijitTextBox input{color:black;}.dijitPlaceHolder{font-style:normal;}.tundra .dijitButtonText{color:#666666 !important;}.esriSimpleSliderTL{top:125px !important;}.esriLargeSliderTL{left:10px;top:120px;}.smallWindowHeaderContainer{position:absolute;left:10px;top:2px;z-index:2;}.smallWindowHeaderContainer span{vertical-align:12px;margin-left:5px;font-size:1em;letter-spacing:2px;}","url:dojox/layout/resources/ResizeHandle.css":".dojoxResizeHandle{float:right;position:absolute;right:2px;bottom:2px;width:13px;height:13px;z-index:20;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAABGdBTUEAALGOfPtRkwAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAtUlEQVR42mL8//8/AyUAIICYGCgEAAFEtAFnz551AuKTQJyALA4QQKS4oA6IzYC4C1kQIIBIMWAZEP+F0nAAEECMlAYiQACx4PMzkGoH4unGxsYLZs2aBeenpaUtgKkDCCAmEvyMNQwAAoiJBD9jDQOAAKI4DAACiAlXPKenpzsB8UkgBvMZGRmdgPgkEKOkA4AAYiLBz1jDACCAmEjwM9YwAAggisMAIIAozkwAAUSxAQABBgCBl0L7jJdTdgAAAABJRU5ErkJggg==);line-height:0px;}.dijitRtl .dojoxResizeHandle{float:right;left:0px;right:auto;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9oFFA0aMPbGg3UAAACNSURBVDjLzdOxDUIxDATQO8RGkRggk6TKiRFoGIARMgBj/D7FjYRCgxDoC4WfUHCN5caynmy21jCTHSbzNsB2sl1tx9ENLgAOAM6jA64Abo/6VTiLuH9tSikJwBHAKee82H72IYRlxKBr0jPomvCnh0QykawkIwBISpKqpPjpTrYarEy2GqxM+F/PNJI7XEZC+6MN6oYAAAAASUVORK5CYII=);}.dojoxResizeNW{cursor:nw-resize;}.dijitRtl .dojoxResizeNW{cursor:ne-resize;}.dojoxResizeNE{cursor:ne-resize;}.dijitRtl .dojoxResizeNE{cursor:nw-resize;}.dojoxResizeW{cursor:w-resize;}.dojoxResizeN{cursor:n-resize;}.dojoxResizeHandleClone{position:absolute;top:0;left:0;border:1px dashed #666;z-index:999;}"}});define("esriviewer/loader/ViewerLoader",["dojo/_base/declare","xstyle/css!../theme/defaults.css","dojo/Deferred","dojo/_base/window","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/dom-construct","../base/ViewerGlobals","../manager/ViewerManagerSidebar","../manager/ViewerManagerWindow","../util/RegExpUtils","../util/ViewerUtils","../util/GeometryUtils","../map/geometry/base/ProjectionUtils","dojo/on","dojo/io-query","xstyle/css","./base/ViewerPlacementWindow","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/layout/StackController","dijit/layout/AccordionPane","xstyle/css!dojox/layout/resources/ResizeHandle.css"],function(_caf,_cb0,_cb1,_cb2,lang,_cb3,_cb4,_cb5,_cb6,_cb7,_cb8,_cb9,_cba,_cbb,_cbc,on,_cbd,Css,_cbe){return _caf([],{isDebug:false,constructor:function(_cbf){lang.mixin(this,_cbf||{});this.initPageResizeListener();this.viewerConfigurationParameters={useProxyForConfig:false};this.createGlobalClasses();this.initCss();this.processConfigurationSettings();this.initViewerPlacement().then(lang.hitch(this,function(){this.createViewerManager();this.tweakUI();}));},initPageResizeListener:function(){on(window,"resize",lang.hitch(this,function(){_cb3.publish(VIEWER_GLOBALS.EVENTS.WINDOW.REPOSITION_ALL);}));},initCss:function(){Css.load("dijit/themes/tundra/tundra.css",require,function(){});Css.load("esri/css/esri.css",require,function(){});Css.load("esriviewer/theme/coreUITheme.css",require,lang.hitch(this,function(){var _cc0=location.pathname.replace(/[^\/]+$/,"")+"css/overrides.css";Css.load(_cc0,require,function(){});_cb3.publish(VIEWER_GLOBALS.EVENTS.CSS.CORE_UI_THEME_LOADED);}));},initViewerPlacement:function(){if(this.viewerMode==null||(this.viewerMode!=VIEWER_GLOBALS.VIEWER_MODES.WINDOW&&this.viewerMode!=VIEWER_GLOBALS.VIEWER_MODES.SIDEBAR)){this.viewerMode=VIEWER_GLOBALS.VIEWER_MODES.WINDOW;}var _cc1;if(this.viewerMode==VIEWER_GLOBALS.VIEWER_MODES.WINDOW){_cc1=this.createViewerPlacementWindow();}else{if(this.viewerMode==VIEWER_GLOBALS.VIEWER_MODES.SIDEBAR){_cc1=this.createViewerPlacementSidebar();}else{_cc1=this.createViewerPlacementWindow();}}return _cc1;},_handleViewModePlacementRequireLoaded:function(_cc2){this.viewPlacement=new _cc2();window.VIEWER_MODE_SETTINGS={label:this.viewPlacement.label,isAbsolutePositioned:this.viewPlacement.isAbsolutePositioned,isWindowless:this.viewPlacement.isWindowless};},createViewerPlacementSidebar:function(){var _cc3=new _cb1();require(["esriviewer/loader/base/ViewerPlacementSidebar"],lang.hitch(this,function(_cc4){this._handleViewModePlacementRequireLoaded(_cc4);_cc3.resolve("success");}));return _cc3.promise;},createViewerPlacementWindow:function(){var _cc5=new _cb1();this._handleViewModePlacementRequireLoaded(_cbe);_cc5.resolve("success");return _cc5.promise;},tweakUI:function(){_cb4.add(_cb2.body(),["defaultTextColor","defaultFont","defaultFontSize"]);},createGlobalClasses:function(){window.VIEWER_GLOBALS=this.createGlobals();window.VIEWER_UTILS=this.createUtils();window.GEOMETRY_UTILS=this.createGeometryUtils();window.REG_EXP_UTILS=this.createRegExpUtils();window.PROJECTION_UTILS=new _cbc();},processConfigurationSettings:function(){if(window&&window.location&&window.location.href){var _cc6=window.location.href.substring(window.location.href.indexOf("?")+1,window.location.href.length);this.windowQueryObject=_cbd.queryToObject(_cc6);if(this.windowQueryObject!=null&&lang.isObject(this.windowQueryObject)){if(this.windowQueryObject.viewerConfig!=null){this.viewerConfigurationParameters.configUrl=this.windowQueryObject.viewerConfig;this.viewerConfigurationParameters.useProxyForConfig=true;}if(this.windowQueryObject.viewerPositionConfig!=null){this.viewerConfigurationParameters.viewerPositioningConfigUrl=this.windowQueryObject.viewerPositionConfig;this.viewerConfigurationParameters.useProxyForPositionConfig=true;}if(this.windowQueryObject.mode!=null){var _cc7=this.windowQueryObject.mode.toLowerCase();if(_cc7==VIEWER_GLOBALS.VIEWER_MODES.SIDEBAR){this.viewerMode=VIEWER_GLOBALS.VIEWER_MODES.SIDEBAR;}if(_cc7==VIEWER_GLOBALS.VIEWER_MODES.WINDOW){this.viewerMode=VIEWER_GLOBALS.VIEWER_MODES.WINDOW;}}}}},createGlobals:function(){return new _cb6();},createGeometryUtils:function(){return new _cbb();},createUtils:function(){return new _cba({isDebug:this.isDebug});},createRegExpUtils:function(){return new _cb9();},createViewerManager:function(){var _cc8;if(this.viewerMode==VIEWER_GLOBALS.VIEWER_MODES.SIDEBAR){_cc8=this.createViewerManagerSidebar();}else{_cc8=this.createViewerManagerWindow();}window.VIEWER_MANAGER=_cc8;return window.VIEWER_MANAGER;},createViewerManagerSidebar:function(){return new _cb7(this.viewerConfigurationParameters);},createViewerManagerWindow:function(){return new _cb8(this.viewerConfigurationParameters);}});});},"*now":function(r){r(["dojo/i18n!*preload*esriviewer/nls/esriviewer*[\"ar\",\"ca\",\"cs\",\"da\",\"de\",\"el\",\"en-gb\",\"en-us\",\"es-es\",\"fi-fi\",\"fr-fr\",\"he-il\",\"hu\",\"it-it\",\"ja-jp\",\"ko-kr\",\"nl-nl\",\"nb\",\"pl\",\"pt-br\",\"pt-pt\",\"ru\",\"sk\",\"sl\",\"sv\",\"th\",\"tr\",\"zh-tw\",\"zh-cn\",\"ROOT\"]"]);}}});define("esriviewer/esriviewer",[],1);