//>>built
require({cache:{"esriviewer/ui/footer/FooterTogglerWidget":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/text!./template/FooterTogglerTemplate.html","../base/UITemplatedWidget","dojo/dom-construct","./model/FooterTogglerViewModel"],function(_1,_2,_3,_4,_5,_6,_7){return _1([_5],{firstFooterShow:true,templateString:_4,postCreate:function(){this.inherited(arguments);this.viewModel=new _7();ko.applyBindings(this.viewModel,this.domNode);},initListeners:function(){this.inherited(arguments);_2.subscribe(VIEWER_GLOBALS.EVENTS.FOOTER.TOGGLE,_3.hitch(this,this.toggle));_2.subscribe(VIEWER_GLOBALS.EVENTS.FOOTER.COLLAPSE,_3.hitch(this,this.collapse));_2.subscribe(VIEWER_GLOBALS.EVENTS.FOOTER.EXPAND,_3.hitch(this,this.expand));_2.subscribe(VIEWER_GLOBALS.EVENTS.FOOTER.IS_EXPANDED,_3.hitch(this,this._handleIsExpanded));},_handleIsExpanded:function(_8){if(_8!=null&&_3.isFunction(_8)){_8(this.viewModel.expanded());}},toggle:function(){if(this.viewModel.expanded()){this.collapse();}else{this.expand();}},collapse:function(){if(this.viewModel.expanded()){this.viewModel.expanded(false);_2.publish(VIEWER_GLOBALS.EVENTS.FOOTER.COLLAPSED);}},expand:function(){if(!this.viewModel.expanded()){this.viewModel.expanded(true);if(this.firstFooterShow){this.onFirstFooterShow();this.firstFooterShow=false;}_2.publish(VIEWER_GLOBALS.EVENTS.FOOTER.EXPANDED);}},setContent:function(_9){_6.place(_9,this.footerContent);},onFirstFooterShow:function(){}});});},"esriviewer/ui/editor/FeatureServiceEditorWindowWidget":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/dom-style","../window/WindowWidget"],function(_a,_b,_c,_d,_e){return _a([_e],{defaultPositioning:{x:600,y:50},windowWidth:"310px",windowHeaderText:"Feature Edit",windowIconAltText:"Feature Edit",positioningParamName:"featureEdit",windowIconClass:"commonIcons16 pencil",constructor:function(){this.firstShowListener=this.on("firstWindowShow",_c.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/editor/FeatureServiceEditor"],_c.hitch(this,function(_f){this.featureServiceEditor=new _f();this.featureServiceEditor.on("setParentWidth",_c.hitch(this,this.setWindowWidthFromInt));this.setContent(this.featureServiceEditor.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_b.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.FEATURE_EDITOR.SHOW,_c.hitch(this,this.show)));this.subscribes.push(_b.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.FEATURE_EDITOR.HIDE,_c.hitch(this,this.hide)));this.subscribes.push(_b.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.FEATURE_EDITOR.TOGGLE,_c.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.featureServiceEditor){if(this.featureServiceEditor.currentDrawType!=null){this.featureServiceEditor.clearDraw();}}},show:function(){this.inherited(arguments);if(this.featureServiceEditor){this.featureServiceEditor.showFeatureLayers();}}});});},"esriviewer/map/base/LayerQueryTools":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","esri/tasks/QueryTask","esri/tasks/query","esri/tasks/StatisticDefinition","./DistinctQuery"],function(_10,_11,_12,_13,_14,_15,_16){return _10([],{constructor:function(){this.layerFieldsCache={};this.initListeners();},initListeners:function(){this.inherited(arguments);_12.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.QUERY_LAYER,_11.hitch(this,this.handleQueryLayer));_12.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.GET_MIN_MAX_FOR_FIELD,_11.hitch(this,this._handleGetMinMaxForField));_12.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.GET_DISTINCT_FIELD_VALUES,_11.hitch(this,this._handleGetDistinctFieldValues));},_handleGetDistinctFieldValues:function(_17){if(!this._validateParameters(_17)){return;}var _18=new _16();_18.returnGeometry=false;if(_17.whereClause!=null&&_17.whereClause.length>0){_18.where=_17.whereClause;}else{_18.where="1 = 1";}if(_17.geometry!=null){_18.geometry=_17.geometry;}if(_17.distinctField!=null){_18.orderByFields=[_17.distinctField];_18.outFields=[_17.distinctField];}else{if(_17.errback!=null&&_11.isFunction(_17.errback)){_17.errback("Must supply distinct field");return;}}var _19=this._getQueryTask(_17);this._performQuery(_19,_18,function(res){if(!_17.processResponse){_17.callback(res);}else{var _1a=[];if(res&&res.features&&res.features.length>0){var _1b;for(var i=0;i<res.features.length;i++){_1b=res.features[i].attributes;_1a.push(_1b[_17.distinctField]);}}_17.callback(_1a);}},_17.errback);},_validateParameters:function(_1c){if(_1c.layer==null||_1c.layer.url==null){if(_1c.errback!=null&&_11.isFunction(_1c.errback)){_1c.errback("There is no query layer");}return false;}if(_1c.callback==null||!_11.isFunction(_1c.callback)){return false;}if(_1c.errback==null){_1c.errback=_11.hitch(this,this._handleQueryLayerDefaultErrback,_1c.layer);}return true;},_getQueryTask:function(_1d){var _1e=_1d.layer.url;if(_1d.layerId!=null){_1e=VIEWER_UTILS.joinUrl(_1e,_1d.layerId);}return new _13(_1e);},_handleGetMinMaxForField:function(_1f){if(!this._validateParameters(_1f)){return;}var _20=this._getQueryTask(_1f);var _21=new _14();_21.returnGeometry=false;var _22=[];var _23=new _15();_23.onStatisticField=_1f.minFieldName;_23.outStatisticFieldName="min";_23.statisticType="min";var _24=new _15();_24.onStatisticField=_1f.maxFieldName;_24.outStatisticFieldName="max";_24.statisticType="max";_22.push(_23);_22.push(_24);_21.outStatistics=_22;this._performQuery(_20,_21,function(res){var min=null;var max=null;if(res&&res.features&&res.features.length>0){min=res.features[0].attributes.min;max=res.features[0].attributes.max;}_1f.callback({min:min,max:max});},_1f.errback);},handleQueryLayer:function(_25){if(!this._validateParameters(_25)){return;}var _26=this._getQueryTask(_25);var _27=new _14();_27.returnGeometry=_25.returnGeometry;if(_25.whereClause!=null&&_25.whereClause.length>0){_27.where=_25.whereClause;}if(_25.geometry!=null){_27.geometry=_25.geometry;}if(_25.outFields!=null){_27.outFields=_25.outFields;}else{if(_25.returnGeometry){_27.outFields=["*"];}else{var _28=queryUrl.toLowerCase();if(this.layerFieldsCache[_28]==null){if(_25.layerId!=null){var _29=_25.callback;var _2a=_25.errback;VIEWER_UTILS.getLayerInfoFromService(_25.layer.url,_25.layerId,_11.hitch(this,function(_2b){var _2c=this._generateOutFieldsFromLayer(_2b);this.layerFieldsCache[_28]=_2c;_27.outFields=_2c;this._performQuery(_26,_27,_29,_2a);}));return;}else{var _2d=this._generateOutFieldsFromLayer(_25.layer);this.layerFieldsCache[_28]=_2d;_27.outFields=_2d;}}else{_27.outFields=this.layerFieldsCache[_28];}}}this._performQuery(_26,_27,_25.callback,_25.errback);},_generateOutFieldsFromLayer:function(_2e){if(_2e==null||!_11.isObject(_2e)||_2e.fields==null||!_11.isArray(_2e.fields)){return ["*"];}var _2f=[];var _30;for(var i=0;i<_2e.fields.length;i++){_30=_2e.fields[i];if(_30.type!=VIEWER_GLOBALS.ESRI_FIELD_TYPES.GEOMETRY){_2f.push(_30.name);}}return _2f;},_performQuery:function(_31,_32,_33,_34){_31.execute(_32,_33,_34);},_handleQueryLayerDefaultErrback:function(_35,err){VIEWER_UTILS.log("Could not perform layer query",VIEWER_GLOBALS.LOG_TYPE.ERROR);_12.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Could not perform layer query");}});});},"esriviewer/ui/toolbar/base/BasemapListingWidget":function(){define(["dojo/_base/declare","dojo/text!./template/BasemapsListingTemplate.html","dojo/topic","dojo/_base/lang","dojo/on","dojo/dom-construct","dojo/dom-class","dojo/dom-style","../../base/UITemplatedWidget","./model/BasemapsListingViewModel"],function(_36,_37,_38,_39,on,_3a,_3b,_3c,_3d,_3e){return _36([_3d],{templateString:_37,defaultBasemapIcon:"images/thumbs/genericThumbnail.png",postCreate:function(){this.viewModel=new _3e();ko.applyBindings(this.viewModel,this.domNode);this.inherited(arguments);},isVisible:function(){return this.viewModel.visible();},toggle:function(){this.viewModel.visible(!this.viewModel.visible());},show:function(){this.viewModel.visible(true);},hide:function(){this.viewModel.visible(false);},initListeners:function(){this.inherited(arguments);_38.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.ADDED,_39.hitch(this,this.addBasemap));_38.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.REMOVED,_39.hitch(this,this.handleBasemapRemoved));},setBasemaps:function(_3f){var _40;for(var key in _3f){_40=_3f[key];this.addBasemap(_40,key);}_38.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GET_CURRENT,_39.hitch(this,this.handleGetCurrentBasemapResponse));},handleBasemapRemoved:function(key){var _41=this.viewModel.removeBasemap(key);if(_41){_38.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GET_CURRENT,_39.hitch(this,this.handleGetCurrentBasemapResponse));}},addBasemap:function(_42,key){var _43=_42.icon!=null?_42.icon:this.defaultBasemapIcon;this.viewModel.addBasemap({thumbnail:_43,label:(_42.label?_42.label:"Basemap"),key:key});},handleGetCurrentBasemapResponse:function(_44){this.viewModel.setCurrentBasemap(_44);}});});},"esriviewer/base/ConfigurationEntryMixin":function(){define(["dojo/_base/declare"],function(_45){return _45([],{constructor:function(){},loadViewerConfigurationData:function(){}});});},"esriviewer/ui/tools/ViewerDefaultTools":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","dijit/MenuItem"],function(_46,_47,_48,_49){return _46([],{showPlottingWindowMenuIcon:false,showPrintWindowMenuIcon:false,showPortalPublisherWindowMenuIcon:false,showSocialMediaWindowMenuIcon:false,showConfigureWindowMenuItem:false,showLegendWindowMenuItem:false,showPointUploadWindowMenuItem:false,showLoggingWindowMenuItem:false,showDrawWindowMenuItem:false,showTimeSliderMenuItem:false,showFeatureEditorMenuItem:false,showIdentifyMenuItem:false,showQueryBuilderMenuItem:false,showMeasureMenuItem:false,showReverseGeocodeMenuItem:false,showZoomToMenuItem:false,showPortalSearchMenuItem:false,showLayerTransparencyMenuItem:false,showWeatherWindowMenuItem:false,showReflectivityWindowMenuItem:false,constructor:function(_4a){_48.mixin(this,_4a||{});this.toolsToAdd=[];this.loadViewerConfigurationData();this._createDefaultToolMenuItems();},_createDefaultToolMenuItems:function(){if(this.showDrawWindowMenuItem){this._createMenuItem("commonIcons16 pencil","Draw",_48.hitch(this,this.handleDrawMenuClick));}if(this.showMeasureMenuItem){this._createMenuItem("commonIcons16 triangle","Measure",_48.hitch(this,this.handleMeasureMenuClick));}if(this.showPortalSearchMenuItem){this._createMenuItem("commonIcons16 magnifyingGlass","Search Portal",_48.hitch(this,this.handlePortalSearchMenuClick));}if(this.showZoomToMenuItem){this._createMenuItem("commonIcons16 magnifyingGlass","Zoom To Location",_48.hitch(this,this.handleZoomToLocationClick));}if(this.showIdentifyMenuItem){this._createMenuItem("commonIcons16 information","Identify",_48.hitch(this,this.handleIdentifyMenuClick));}if(this.showWeatherWindowMenuItem){this._createMenuItem("commonIcons16 weather","Weather",_48.hitch(this,this.handleWeatherMenuClick));}if(VIEWER_UTILS.isHtml5FileUploadSupported()&&this.showPointUploadWindowMenuItem){this._createMenuItem("commonIcons16 upload","CSV Point Upload",_48.hitch(this,this.handlePointUploadMenuClick));}if(this.showLegendWindowMenuItem){this._createMenuItem("commonIcons16 list","Legend",_48.hitch(this,this.handleLegendMenuClick));}if(this.showLoggingWindowMenuItem){this._createMenuItem("commonIcons16 list","Logging",_48.hitch(this,this.handleLoggingMenuClick));}if(this.showTimeSliderMenuItem){this._createMenuItem("commonIcons16 clock","Time Slider",_48.hitch(this,this.handleTimeSliderMenuClick));}if(this.showFeatureEditorMenuItem){this._createMenuItem("commonIcons16 pencil","Feature Editor",_48.hitch(this,this.handleFeatureEditorMenuClick));}if(this.showQueryBuilderMenuItem){this._createMenuItem("commonIcons16 sql","Query Builder",_48.hitch(this,this.handleQueryBuilderMenuClick));}if(this.showReverseGeocodeMenuItem){this._createMenuItem("commonIcons16 information","Find Address",_48.hitch(this,this.handleReverseGeocodeMenuClick));}if(this.showSocialMediaWindowMenuIcon){this._createMenuItem("commonIcons16 binoculars","Social Media",_48.hitch(this,this.handleSocialMediaMenuClick));}if(this.showReflectivityWindowMenuItem){this._createMenuItem("commonIcons16 weather","Reflectivity",_48.hitch(this,this.handleReflectivityMenuClick));}if(this.showLayerTransparencyMenuItem){this._createMenuItem("commonIcons16 slider","Transparency",_48.hitch(this,this.handleLayerTransparencyMenuClick));}if(this.showPortalPublisherWindowMenuIcon){this._createMenuItem("commonIcons16 worldAdd","Publish Web Map",_48.hitch(this,this.handlePortalPublisherMenuClick));}if(this.showPrintWindowMenuIcon){this._createMenuItem("commonIcons16 print","Print",_48.hitch(this,this.handlePrintMenuClick));}if(this.showPlottingWindowMenuIcon){this._createMenuItem("commonIcons16 pushpin","Plotting",_48.hitch(this,this.handlePlottingMenuClick));}this.sortAndAddTools();},sortAndAddTools:function(){this.toolsToAdd.sort(function(a,b){return a.label.localeCompare(b.label);});for(var i=0;i<this.toolsToAdd.length;i++){_47.publish(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.ADD_TOOL,this.toolsToAdd[i]);}},_createMenuItem:function(_4b,_4c,_4d){var _4e=new _49({iconClass:_4b,label:_4c,onClick:_4d});this.toolsToAdd.push(_4e);},handleTimeSliderMenuClick:function(){_47.publish(VIEWER_GLOBALS.EVENTS.MAP.TIME.SHOW_TIME_SLIDER);},handleLayerTransparencyMenuClick:function(){_47.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.TRANSPARENCY.WINDOW.SHOW);},handleDrawMenuClick:function(){_47.publish(VIEWER_GLOBALS.EVENTS.WINDOW.DRAW.SHOW);},handleFeatureEditorMenuClick:function(){_47.publish(VIEWER_GLOBALS.EVENTS.WINDOW.FEATURE_EDITOR.SHOW);},handleQueryBuilderMenuClick:function(){_47.publish(VIEWER_GLOBALS.EVENTS.WINDOW.QUERY_BUILDER.SHOW);},handleMeasureMenuClick:function(){_47.publish(VIEWER_GLOBALS.EVENTS.WINDOW.MEASURE.SHOW);},handleIdentifyMenuClick:function(){_47.publish(VIEWER_GLOBALS.EVENTS.WINDOW.IDENTIFY.SHOW);},handleReverseGeocodeMenuClick:function(){_47.publish(VIEWER_GLOBALS.EVENTS.WINDOW.REVERSE_GEOCODE.SHOW);},handlePortalSearchMenuClick:function(){_47.publish(VIEWER_GLOBALS.EVENTS.WINDOW.PORTAL_SEARCH.SHOW);},loadViewerConfigurationData:function(){var _4f=null;_47.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"logging",function(_50){_4f=_50;});if(_4f&&_48.isObject(_4f)&&_4f.window!=null){this.showLoggingWindowMenuItem=_4f.window.create==null?false:_4f.window.create;}var _51=null;_47.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"configureWidget",function(_52){_51=_52;});if(_51){this.showConfigureWindowMenuItem=_51.create==null||_51.create!=false;}var _53=null;_47.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_54){_53=_54;});if(_53){if(_53.legend==null||_53.legend.create!=false){this.showLegendWindowMenuItem=true;}}var _55=null;_47.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"socialMediaWidget",function(_56){_55=_56;});if(_55!=null&&_48.isObject(_55)&&_55.create==true){this.showSocialMediaWindowMenuIcon=true;}var _57=null;_47.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"drawWidget",function(_58){_57=_58;});if(_57!=null&&_48.isObject(_57)&&_57.create==true){this.showDrawWindowMenuItem=true;}var _59=null;_47.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"timeSliderWidget",function(_5a){_59=_5a;});if(_59!=null&&_48.isObject(_59)&&_59.create==true){this.showTimeSliderMenuItem=true;}var _5b=null;_47.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"featureEditorWidget",function(_5c){_5b=_5c;});this.showFeatureEditorMenuItem=_5b&&_5b.service&&_5b.service.url;var _5d=null;_47.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"identifyWidget",function(_5e){_5d=_5e;});if(_5d!=null&&_48.isObject(_5d)&&_5d.create==true){this.showIdentifyMenuItem=true;}var _5f=null;_47.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"layersTransparencyWidget",function(_60){_5f=_60;});if(_5f!=null&&_48.isObject(_5f)&&_5f.create==true){this.showLayerTransparencyMenuItem=true;}var _61=null;_47.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"zoomToWidget",function(_62){_61=_62;});if(_61!=null&&_48.isObject(_61)&&_61.create==true){this.showZoomToMenuItem=true;}var _63=null;_47.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"reflectivityWidget",function(_64){_63=_64;});this.showReflectivityWindowMenuItem=_63!=null&&_48.isObject(_63)&&_63.create===true;var _65=null;_47.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"weatherWidget",function(_66){_65=_66;});this.showWeatherWindowMenuItem=_65!=null&&_48.isObject(_65)&&_65.create===true;var _67=null;_47.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"printWidget",function(_68){_67=_68;});this.showPrintWindowMenuIcon=_67!=null&&_48.isObject(_67)&&_67.create===true&&_67.printTaskUrl!=null;var _69=null;_47.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"pointUploadWidget",function(_6a){_69=_6a;});this.showPointUploadWindowMenuItem=_69!=null&&_48.isObject(_69)&&_69.create===true;var _6b=null;_47.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"queryBuilder",function(_6c){_6b=_6c;});this.showQueryBuilderMenuItem=_6b!=null&&_48.isObject(_6b)&&_6b.create===true;var _6d=null;_47.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"geometryServiceUrl",function(_6e){_6d=_6e;});if(_6d!=null){var _6f=null;_47.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"measureWidget",function(_70){_6f=_70;});if(_6f&&_48.isObject(_6f)){if(_6f.create==true){this.showMeasureMenuItem=true;}}}var _71=null;_47.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"locators",function(_72){_71=_72;});if(_71==null||!_48.isArray(_71)||_71.length==0){this.showReverseGeocodeMenuItem=false;}else{var _73=null;_47.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"reverseGeocodeWidget",function(_74){_73=_74;});this.showReverseGeocodeMenuItem=_73&&_48.isObject(_73)&&_73.create==true;}var _75=null;_47.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"portal",function(_76){_75=_76;});if(_75==null||!_48.isObject(_75)){this.showPortalSearchMenuItem=false;this.showPortalPublisherWindowMenuIcon=false;}else{var _77=null;_47.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"portalSearchWidget",function(_78){_77=_78;});this.showPortalSearchMenuItem=_77&&_48.isObject(_77)&&_77.create==true;var _79=null;_47.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"portalPublisher",function(_7a){_79=_7a;});this.showPortalPublisherWindowMenuIcon=_79&&_48.isObject(_79)&&_79.window&&_79.window.create==true;}var _7b=null;_47.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"plottingWidget",function(_7c){_7b=_7c;});this.showPlottingWindowMenuIcon=_7b&&_48.isObject(_7b)&&_7b.create==true;},createConfigurationMenuItem:function(){if(this.showConfigureWindowMenuItem!=false){this._createConfigureMenuItem();}},handlePortalPublisherMenuClick:function(){_47.publish(VIEWER_GLOBALS.EVENTS.WINDOW.PORTAL_PUBLISH.SHOW);},handlePrintMenuClick:function(){_47.publish(VIEWER_GLOBALS.EVENTS.WINDOW.PRINT.SHOW);},handlePlottingMenuClick:function(){_47.publish(VIEWER_GLOBALS.EVENTS.WINDOW.PLOTTING.SHOW);},handleLoggingMenuClick:function(){_47.publish(VIEWER_GLOBALS.EVENTS.LOGGING.WINDOW.SHOW);},handleZoomToLocationClick:function(){_47.publish(VIEWER_GLOBALS.EVENTS.WINDOW.ZOOM_TO.SHOW);},handleSocialMediaMenuClick:function(){_47.publish(VIEWER_GLOBALS.EVENTS.WINDOW.SOCIAL_MEDIA.SHOW);},handleReflectivityMenuClick:function(){_47.publish(VIEWER_GLOBALS.EVENTS.WINDOW.REFLECTIVITY.SHOW);},handlePointUploadMenuClick:function(){_47.publish(VIEWER_GLOBALS.EVENTS.WINDOW.POINT_UPLOAD.SHOW);},handleWeatherMenuClick:function(){_47.publish(VIEWER_GLOBALS.EVENTS.WINDOW.WEATHER.SHOW);},handleLegendMenuClick:function(){_47.publish(VIEWER_GLOBALS.EVENTS.WINDOW.LEGEND.SHOW);},_createConfigureMenuItem:function(){var _7d=new _49({iconClass:"commonIcons16 gear",label:"Configure",onClick:_48.hitch(this,this.handleConfigureMenuClick)});_47.publish(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.ADD_TOOL,_7d);},handleConfigureMenuClick:function(){_47.publish(VIEWER_GLOBALS.EVENTS.CONFIGURE.WINDOW.SHOW);}});});},"esriviewer/ui/draw/base/GraphicsListWidget":function(){define(["dojo/_base/declare","dojo/text!./template/GraphicsListingTemplate.html","dojo/topic","../../base/UITemplatedWidget","dojo/_base/lang","dojo/on","../../tooltip/ConfirmTooltip","./model/GraphicsListViewModel","dijit/form/TextBox","dijit/form/Button"],function(_7e,_7f,_80,_81,_82,on,_83,_84,_85,_86){return _7e([_81],{templateString:_7f,graphicsCount:0,saveSupported:false,allGraphicsOff:false,constructor:function(_87){_82.mixin(this,_87||{});this.typeLabelLookup={};this.typeLabelLookup[VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT]="Point";this.typeLabelLookup[VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE]="Line";this.typeLabelLookup[VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON]="Polygon";this.typeLabelLookup[VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_RECTANGLE]="Rectangle";this.typeLabelLookup[VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT]="Text Label";},postCreate:function(){this.inherited(arguments);this.viewModel=new _84();this.viewModel.saveGraphicsIconVisible(this.saveSupported);this.viewModel.on(this.viewModel.REMOVE_ALL_GRAPHICS,_82.hitch(this,this.handleRemoveAllGraphics));this.viewModel.on(this.viewModel.REMOVE_GRAPHIC,_82.hitch(this,this.handleRemoveGraphic));ko.applyBindings(this.viewModel,this.domNode);},handleRemoveAllGraphics:function(){this.onRemoveAllGraphics();},onRemoveAllGraphics:function(){},handleRemoveGraphic:function(_88){this.onRemoveGraphic(_88);},onRemoveGraphic:function(_89){},addGraphic:function(_8a){this.viewModel.addedGraphics.push({label:_8a.label?_8a.label:(this.typeLabelLookup[_8a.type]+" "+VIEWER_UTILS.getTimeStamp()),graphic:_8a.graphic});},showConfirmRemoveAllTooltip:function(){if(this.confirmDeleteAllTooltip==null){this.createConfirmDeleteBookmarkTooltip();}if(this.confirmDeleteAllTooltip){this.confirmDeleteAllTooltip.show();}},createConfirmDeleteBookmarkTooltip:function(){this.confirmDeleteAllTooltip=new _83({confirmCallback:_82.hitch(this.viewModel,this.viewModel.removeAllGraphics),aroundNode:this.removeAllGraphicsIcon,displayText:"Delete Graphics? "});this.confirmDeleteAllTooltip.on("hide",_82.hitch(this,function(){this.deleteBookmarkConfirmedCallback=null;}));},hidePopups:function(){if(this.confirmDeleteAllTooltip){this.confirmDeleteAllTooltip.hide();}},handleSaveGraphicsKeyUp:function(e){if(VIEWER_UTILS.isEnterKey(e)){this.handleSaveGraphics();}},handleSaveGraphics:function(){var _8b=this.userSaveGraphicsNameInput.get("value");if(_8b!=null&&_8b!=""){this.onSaveGraphics(_8b,this.viewModel.addedGraphics());this.viewModel.saveGraphicsInputVisible(false);this.userSaveGraphicsNameInput.set("value","");}},getGraphics:function(){var _8c=this.viewModel.addedGraphics();var _8d=[];for(var i=0;i<_8c.length;i++){_8d.push(_8c[i].graphic);}return _8d;},onSaveGraphics:function(_8e,_8f){}});});},"esriviewer/ui/layers/LayersWindowWidget":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/window","dojo/dom-style","dojo/dom-class","../window/WindowWidget","./LayersWidget"],function(_90,_91,_92,_93,_94,_95,_96,_97){return _90([_96],{defaultPositioning:{x:700,y:50},windowWidth:null,windowHeaderText:"Map Layers",windowIconAltText:"Map Layers",windowIconClass:"commonIcons16 layerList",positioningParamName:"layers",constructor:function(){this.firstShowListener=this.on("firstWindowShow",_92.hitch(this,this.handleFirstWindowShow));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_91.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.WIDGET.SHOW,_92.hitch(this,this.show)));},handleFirstWindowShow:function(){this.firstShowListener.remove();this.setContent(this.layersWidget.domNode);},postCreate:function(){_95.add(this.domNode,"layersWindow");_95.add(this.windowContent,"layersWindowContent");this.layersWidget=new _97();this.inherited(arguments);},show:function(){this.inherited(arguments);this.layersWidget.showLayerList();},hidePopups:function(){this.inherited(arguments);if(this.layersWidget){this.layersWidget.hidePopups();}}});});},"esriviewer/map/base/MapUtils":function(){define(["dojo/_base/declare"],function(_98){return _98([],{});});},"esriviewer/ui/base/UITemplatedWidget":function(){define(["dojo/_base/declare","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","./UIWidget"],function(_99,_9a,_9b,_9c){return _99([_9c,_9a,_9b],{widgetsInTemplate:true});});},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(_9d,_9e,_9f,_a0){return _9f("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:false,constructor:function(_a1){_a0.mixin(this,_a1);this.connects=[];var _a2=this.store;if(!_a2.getFeatures()["dojo.data.api.Identity"]){throw new Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");}if(_a2.getFeatures()["dojo.data.api.Notification"]){this.connects=this.connects.concat([_9e.after(_a2,"onNew",_a0.hitch(this,"onNewItem"),true),_9e.after(_a2,"onDelete",_a0.hitch(this,"onDeleteItem"),true),_9e.after(_a2,"onSet",_a0.hitch(this,"onSetItem"),true)]);}},destroy:function(){var h;while(h=this.connects.pop()){h.remove();}},getRoot:function(_a3,_a4){if(this.root){_a3(this.root);}else{this.store.fetch({query:this.query,onComplete:_a0.hitch(this,function(_a5){if(_a5.length!=1){throw new Error("dijit.tree.TreeStoreModel: root query returned "+_a5.length+" items, but must return exactly one");}this.root=_a5[0];_a3(this.root);}),onError:_a4});}},mayHaveChildren:function(_a6){return _9d.some(this.childrenAttrs,function(_a7){return this.store.hasAttribute(_a6,_a7);},this);},getChildren:function(_a8,_a9,_aa){var _ab=this.store;if(!_ab.isItemLoaded(_a8)){var _ac=_a0.hitch(this,arguments.callee);_ab.loadItem({item:_a8,onItem:function(_ad){_ac(_ad,_a9,_aa);},onError:_aa});return;}var _ae=[];for(var i=0;i<this.childrenAttrs.length;i++){var _af=_ab.getValues(_a8,this.childrenAttrs[i]);_ae=_ae.concat(_af);}var _b0=0;if(!this.deferItemLoadingUntilExpand){_9d.forEach(_ae,function(_b1){if(!_ab.isItemLoaded(_b1)){_b0++;}});}if(_b0==0){_a9(_ae);}else{_9d.forEach(_ae,function(_b2,idx){if(!_ab.isItemLoaded(_b2)){_ab.loadItem({item:_b2,onItem:function(_b3){_ae[idx]=_b3;if(--_b0==0){_a9(_ae);}},onError:_aa});}});}},isItem:function(_b4){return this.store.isItem(_b4);},fetchItemByIdentity:function(_b5){this.store.fetchItemByIdentity(_b5);},getIdentity:function(_b6){return this.store.getIdentity(_b6);},getLabel:function(_b7){if(this.labelAttr){return this.store.getValue(_b7,this.labelAttr);}else{return this.store.getLabel(_b7);}},newItem:function(_b8,_b9,_ba){var _bb={parent:_b9,attribute:this.childrenAttrs[0]},_bc;if(this.newItemIdAttr&&_b8[this.newItemIdAttr]){this.fetchItemByIdentity({identity:_b8[this.newItemIdAttr],scope:this,onItem:function(_bd){if(_bd){this.pasteItem(_bd,null,_b9,true,_ba);}else{_bc=this.store.newItem(_b8,_bb);if(_bc&&(_ba!=undefined)){this.pasteItem(_bc,_b9,_b9,false,_ba);}}}});}else{_bc=this.store.newItem(_b8,_bb);if(_bc&&(_ba!=undefined)){this.pasteItem(_bc,_b9,_b9,false,_ba);}}},pasteItem:function(_be,_bf,_c0,_c1,_c2){var _c3=this.store,_c4=this.childrenAttrs[0];if(_bf){_9d.forEach(this.childrenAttrs,function(_c5){if(_c3.containsValue(_bf,_c5,_be)){if(!_c1){var _c6=_9d.filter(_c3.getValues(_bf,_c5),function(x){return x!=_be;});_c3.setValues(_bf,_c5,_c6);}_c4=_c5;}});}if(_c0){if(typeof _c2=="number"){var _c7=_c3.getValues(_c0,_c4).slice();_c7.splice(_c2,0,_be);_c3.setValues(_c0,_c4,_c7);}else{_c3.setValues(_c0,_c4,_c3.getValues(_c0,_c4).concat(_be));}}},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(_c8,_c9){if(!_c9){return;}this.getChildren(_c9.item,_a0.hitch(this,function(_ca){this.onChildrenChange(_c9.item,_ca);}));},onDeleteItem:function(_cb){this.onDelete(_cb);},onSetItem:function(_cc,_cd){if(_9d.indexOf(this.childrenAttrs,_cd)!=-1){this.getChildren(_cc,_a0.hitch(this,function(_ce){this.onChildrenChange(_cc,_ce);}));}else{this.onChange(_cc);}}});});},"dijit/_MenuBase":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/lang","dojo/mouse","dojo/on","dojo/window","./a11yclick","./registry","./_Widget","./_CssStateMixin","./_KeyNavContainer","./_TemplatedMixin"],function(_cf,_d0,dom,_d1,_d2,_d3,_d4,on,_d5,_d6,_d7,_d8,_d9,_da,_db){return _d0("dijit._MenuBase",[_d8,_db,_da,_d9],{selected:null,_setSelectedAttr:function(_dc){if(this.selected!=_dc){if(this.selected){this.selected._setSelected(false);this._onChildDeselect(this.selected);}if(_dc){_dc._setSelected(true);}this._set("selected",_dc);}},activated:false,_setActivatedAttr:function(val){_d2.toggle(this.domNode,"dijitMenuActive",val);_d2.toggle(this.domNode,"dijitMenuPassive",!val);this._set("activated",val);},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:false,childSelector:function(_dd){var _de=_d7.byNode(_dd);return _dd.parentNode==this.containerNode&&_de&&_de.focus;},postCreate:function(){var _df=this,_e0=typeof this.childSelector=="string"?this.childSelector:_d3.hitch(this,"childSelector");this.own(on(this.containerNode,on.selector(_e0,_d4.enter),function(){_df.onItemHover(_d7.byNode(this));}),on(this.containerNode,on.selector(_e0,_d4.leave),function(){_df.onItemUnhover(_d7.byNode(this));}),on(this.containerNode,on.selector(_e0,_d6),function(evt){_df.onItemClick(_d7.byNode(this),evt);evt.stopPropagation();evt.preventDefault();}));this.inherited(arguments);},onKeyboardSearch:function(_e1,evt,_e2,_e3){this.inherited(arguments);if(!!_e1&&(_e3==-1||(!!_e1.popup&&_e3==1))){this.onItemClick(_e1,evt);}},_keyboardSearchCompare:function(_e4,_e5){if(!!_e4.shortcutKey){return _e5==_e4.shortcutKey.toLowerCase()?-1:0;}return this.inherited(arguments)?1:0;},onExecute:function(){},onCancel:function(){},_moveToPopup:function(evt){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled){this.onItemClick(this.focusedChild,evt);}else{var _e6=this._getTopMenu();if(_e6&&_e6._isMenuBar){_e6.focusNext();}}},_onPopupHover:function(){this.set("selected",this.currentPopupItem);this._stopPendingCloseTimer();},onItemHover:function(_e7){if(this.activated){this.set("selected",_e7);if(_e7.popup&&!_e7.disabled&&!this.hover_timer){this.hover_timer=this.defer(function(){this._openItemPopup(_e7);},this.popupDelay);}}else{if(this.passivePopupDelay<Infinity){if(this.passive_hover_timer){this.passive_hover_timer.remove();}this.passive_hover_timer=this.defer(function(){this.onItemClick(_e7,{type:"click"});},this.passivePopupDelay);}}this._hoveredChild=_e7;_e7._set("hovering",true);},_onChildDeselect:function(_e8){this._stopPopupTimer();if(this.currentPopupItem==_e8){this._stopPendingCloseTimer();this._pendingClose_timer=this.defer(function(){this._pendingClose_timer=null;this.currentPopupItem=null;_e8._closePopup();},this.popupDelay);}},onItemUnhover:function(_e9){if(this._hoveredChild==_e9){this._hoveredChild=null;}if(this.passive_hover_timer){this.passive_hover_timer.remove();this.passive_hover_timer=null;}_e9._set("hovering",false);},_stopPopupTimer:function(){if(this.hover_timer){this.hover_timer=this.hover_timer.remove();}},_stopPendingCloseTimer:function(){if(this._pendingClose_timer){this._pendingClose_timer=this._pendingClose_timer.remove();}},_getTopMenu:function(){for(var top=this;top.parentMenu;top=top.parentMenu){}return top;},onItemClick:function(_ea,evt){if(this.passive_hover_timer){this.passive_hover_timer.remove();}this.focusChild(_ea);if(_ea.disabled){return false;}if(_ea.popup){this.set("selected",_ea);this.set("activated",true);var _eb=/^key/.test(evt._origType||evt.type)||(evt.clientX==0&&evt.clientY==0);this._openItemPopup(_ea,_eb);}else{this.onExecute();_ea._onClick?_ea._onClick(evt):_ea.onClick(evt);}},_openItemPopup:function(_ec,_ed){if(_ec==this.currentPopupItem){return;}if(this.currentPopupItem){this._stopPendingCloseTimer();this.currentPopupItem._closePopup();}this._stopPopupTimer();var _ee=_ec.popup;_ee.parentMenu=this;this.own(this._mouseoverHandle=on.once(_ee.domNode,"mouseover",_d3.hitch(this,"_onPopupHover")));var _ef=this;_ec._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){if(_ed){_ef.focusChild(_ec);}_ef._cleanUp();},onExecute:_d3.hitch(this,"_cleanUp",true),onClose:function(){if(_ef._mouseoverHandle){_ef._mouseoverHandle.remove();delete _ef._mouseoverHandle;}}},_ed);this.currentPopupItem=_ec;},onOpen:function(){this.isShowingNow=true;this.set("activated",true);},onClose:function(){this.set("activated",false);this.set("selected",null);this.isShowingNow=false;this.parentMenu=null;},_closeChild:function(){this._stopPopupTimer();if(this.currentPopupItem){if(this.focused){_d1.set(this.selected.focusNode,"tabIndex",this.tabIndex);this.selected.focusNode.focus();}this.currentPopupItem._closePopup();this.currentPopupItem=null;}},_onItemFocus:function(_f0){if(this._hoveredChild&&this._hoveredChild!=_f0){this.onItemUnhover(this._hoveredChild);}this.set("selected",_f0);},_onBlur:function(){this._cleanUp(true);this.inherited(arguments);},_cleanUp:function(_f1){this._closeChild();if(typeof this.isShowingNow=="undefined"){this.set("activated",false);}if(_f1){this.set("selected",null);}}});});},"esriviewer/ui/logging/model/LoggingViewModel":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(_f2,_f3){return _f2([],{constructor:function(){this.infoDisplayed=ko.observable(false);this.warningDisplayed=ko.observable(true);this.errorDisplayed=ko.observable(true);this.logEntries=ko.observableArray();this.hasLogEntries=ko.computed(_f3.hitch(this,this._hasEntries));this.filteredEntries=ko.computed(_f3.hitch(this,this._filteredEntries));},_hasEntries:function(){return this.logEntries().length>0;},_filteredEntries:function(){var _f4=[];var _f5=this.logEntries();var _f6;for(var i=0;i<_f5.length;i++){_f6=_f5[i];if(_f6.type===VIEWER_GLOBALS.LOG_TYPE.ERROR&&this.errorDisplayed()){_f4.push(_f6);}else{if(_f6.type===VIEWER_GLOBALS.LOG_TYPE.WARNING&&this.warningDisplayed()){_f4.push(_f6);}else{if(_f6.type===VIEWER_GLOBALS.LOG_TYPE.INFO&&this.infoDisplayed()){_f4.push(_f6);}}}}return _f4;}});});},"esriviewer/ui/tooltip/ConfirmTooltip":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","dojo/dom-construct","dijit/TooltipDialog","../base/UIWidget"],function(_f7,_f8,on,_f9,_fa,_fb){return _f7([_fb],{optionClassName:"confirmTooltipOptionText",contentHeaderLabelClassName:"confirmTooltipContentLbl",defaultYesLabel:"Yes",defaultNoLabel:"No",defaultDisplayText:"Confirm:",visible:false,constructor:function(_fc){this.confirmCallback=null;_f8.mixin(this,_fc||{});this._createTooltip();},getYesLabel:function(){return this.yesLabel==null?this.defaultYesLabel:this.yesLabel;},getNoLabel:function(){return this.noLabel==null?this.defaultNoLabel:this.noLabel;},getDisplayText:function(){return this.displayText==null?this.defaultDisplayText:this.displayText;},getConfirmCallback:function(){return this.confirmCallback;},hasConfirmCallback:function(){return this.confirmCallback!=null&&_f8.isFunction(this.confirmCallback);},onTooltipCreated:function(_fd){},setAtMouseEvent:function(evt){this.aroundNode=null;this.mouseEvent=evt;},setAroundNode:function(_fe){this.aroundNode=_fe;this.mouseEvent=null;},hasAroundNode:function(){return this.aroundNode!=null;},hasMouseEvent:function(){return this.mouseEvent!=null;},_createTooltip:function(){if(!this.hasConfirmCallback()){this.onError("must provide a confirm callback");return;}var _ff=_f9.create("div");var _100=_f9.create("span",{innerHTML:this.getDisplayText(),className:this.contentHeaderLabelClassName});var _101=_f9.create("span",{innerHTML:this.getYesLabel(),className:this.optionClassName});var _102=_f9.create("span",{innerHTML:this.getNoLabel(),className:this.optionClassName});_f9.place(_100,_ff);_f9.place(_101,_ff);_f9.place(_102,_ff);this.tooltip=new _fa({content:_ff});this.tooltip.on("close",_f8.hitch(this,function(){this.visible=false;}));var _103=this.getConfirmCallback();var _104=_f8.hitch(this,function(){this.confirmCallback();this.hide();});on(_101,"click",_104);on(_102,"click",_f8.hitch(this,this.hide));this.onTooltipCreated(this.tooltip);},show:function(){if(!this.hasAroundNode()&&!this.hasMouseEvent()){this.onError("No Position passed for popup");return;}var _105={popup:this.tooltip};if(this.aroundNode){_105.around=this.aroundNode;}if(this.mouseEvent){_105.x=(this.mouseEvent.pageX!=null?this.mouseEvent.pageX:this.mouseEvent.clientX)+5;_105.y=(this.mouseEvent.pageY!=null?this.mouseEvent.pageY:this.mouseEvent.clientY)+5;}if(this.tooltip){dijit.popup.open(_105);this.visible=true;}},hide:function(){if(this.tooltip){dijit.popup.close(this.tooltip);this.onHide();this.visible=false;}},onHide:function(){},onError:function(_106){}});});},"esriviewer/ui/bookmark/BookmarkController":function(){define(["dojo/_base/declare","dojo/topic","dojo/has","dojo/cookie","dojo/_base/json","dojo/_base/lang","dojo/_base/window","dojo/dom-construct","./CreateBookmarkWidget"],function(_107,_108,has,_109,json,lang,_10a,_10b,_10c){return _107([],{cookieExpiration:365,cookieMode:false,constructor:function(){this.initListeners();if(!(has("ie")<8)){this.storageProvider=dojox.storage.manager.getProvider();this.cookieMode=false;}else{this.storageProvider=null;this.cookieMode=true;}this.bookmarks=this.initializeBookmarks();if(this.bookmarks==null||!lang.isObject(this.bookmarks)){this.bookmarks={};}},initListeners:function(){_108.subscribe(VIEWER_GLOBALS.EVENTS.BOOKMARK.CREATED,lang.hitch(this,this.handleSaveBookmark));_108.subscribe(VIEWER_GLOBALS.EVENTS.BOOKMARK.STORAGE.GET,lang.hitch(this,this.handleGetBookmarks));_108.subscribe(VIEWER_GLOBALS.EVENTS.BOOKMARK.CREATE_WINDOW.SHOW,lang.hitch(this,this.showCreateBookmarkDisplay));_108.subscribe(VIEWER_GLOBALS.EVENTS.BOOKMARK.REMOVED,lang.hitch(this,this.removeBookmark));},removeBookmark:function(_10d){if(this.bookmarks!=null&&lang.isObject(this.bookmarks)&&this.bookmarks[_10d]!=null){delete this.bookmarks[_10d];this._persistBookmarks();}},handleSaveBookmark:function(_10e){if(_10e==null||!lang.isObject(_10e)){return;}var _10f=false;for(var key in _10e){this.bookmarks[key]=_10e[key];_10f=true;}if(_10f){this._persistBookmarks();}},_persistBookmarks:function(){if(!this.cookieMode){this._persistToLocalStorage();}else{this._persistToCookies();}},_persistToLocalStorage:function(){this.storageProvider.put(VIEWER_GLOBALS.STORAGE.LABELS.BOOKMARKS,this.bookmarks);},_persistToCookies:function(){_109(VIEWER_GLOBALS.STORAGE.LABELS.BOOKMARKS,json.toJson(this.bookmarks),{expires:this.cookieExpiration});},handleGetBookmarks:function(_110){if(_110==null||!lang.isFunction(_110)){return;}_110(this.bookmarks);},initializeBookmarks:function(){if(!this.cookieMode){return this._initializeLocalStorageBookmarks();}else{return this._initializeCookieBookmarks();}},_initializeCookieBookmarks:function(){var _111=_109(VIEWER_GLOBALS.STORAGE.LABELS.BOOKMARKS);if(_111!=null&&_111!=""){return json.fromJson(_111);}return {};},_initializeLocalStorageBookmarks:function(){if(this.storageProvider.hasKey(VIEWER_GLOBALS.STORAGE.LABELS.BOOKMARKS)){return this.storageProvider.get(VIEWER_GLOBALS.STORAGE.LABELS.BOOKMARKS);}return {};},showCreateBookmarkDisplay:function(){if(this.createBookmarkWidget==null){this.createBookmarkWidget=new _10c();_108.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.CREATE_BOOOKMARK,this.createBookmarkWidget);}this.createBookmarkWidget.show();}});});},"esriviewer/ui/plotting/PlottingWidgetWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/window","dojo/dom-class","../window/WindowWidget"],function(_112,lang,_113,_114,_115,_116){return _112([_116],{defaultPositioning:{x:600,y:125},windowWidth:"300px",windowHeaderText:"Plot Coordinates",windowIconAltText:"Plot Coordinates",windowIconClass:"commonIcons16 pushpin",positioningParamName:"plotting",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_115.add(this.windowContent,"plottingWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/plotting/PlottingWidget"],lang.hitch(this,function(_117){this.plottingWidget=new _117();this.setContent(this.plottingWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_113.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PLOTTING.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_113.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PLOTTING.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_113.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PLOTTING.TOGGLE,lang.hitch(this,this.toggle)));}});});},"esriviewer/ui/toolbar/base/BookmarkListingWidget":function(){define(["dojo/_base/declare","dojo/text!./template/BookmarkListingTemplate.html","dojo/topic","dojo/_base/lang","dojo/on","../../tooltip/ConfirmTooltip","../../base/UITemplatedWidget","./model/BookmarkListingViewModel","esri/geometry/Point"],function(_118,_119,_11a,lang,on,_11b,_11c,_11d,_11e){return _118([_11c],{allowBookmarkCreation:true,templateString:_119,initListeners:function(){this.inherited(arguments);_11a.subscribe(VIEWER_GLOBALS.EVENTS.BOOKMARK.CREATED,lang.hitch(this,this.handleBookmarkCreated));},postCreate:function(){this.inherited(arguments);this.viewModel=new _11d();this.viewModel.showCreateBookmarkIcon(this.allowBookmarkCreation);this.viewModel.on(this.viewModel.SHOW_CREATE_BOOKMARK,lang.hitch(this,this.handleShowCreateBookmarkView));this.viewModel.on(this.viewModel.REMOVE_BOOKMARK_REQUEST,lang.hitch(this,this.handleRemoveBookmarkRequest));ko.applyBindings(this.viewModel,this.domNode);},loadViewerConfigurationData:function(){var _11f=null;_11a.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"bookmarks",function(_120){_11f=_120;});if(_11f&&_11f.allowCreation!=null&&_11f.allowCreation==false){this.allowBookmarkCreation=false;}},isVisible:function(){return this.viewModel.visible();},toggle:function(){if(this.viewModel.visible()){this.hide();}else{this.show();}},show:function(){this.viewModel.visible(true);},hide:function(){this.hidePopups();this.viewModel.visible(false);},handleBookmarkCreated:function(_121){this.addBookmarks(_121,true);this.viewModel.sortRemovable();},addStaticBookmarks:function(_122){this.addBookmarks(_122,false);this.viewModel.sortStatic();this.viewModel.ignoreAddAnimation=false;},addBookmarks:function(_123,_124){if(_124==null){_124=false;}var _125;for(var key in _123){_125=_123[key];if(!this.isValidBookmark(_125)){continue;}var _126=lang.mixin({key:key},_125);_126.point=new _11e({x:_125.point.x,y:_125.point.y,spatialReference:_125.point.spatialReference});if(_124){this.viewModel.addRemovableBookmark(_126);}else{this.viewModel.addBookmark(_126);}}},isValidBookmark:function(_127){if(_127.label!=null&&_127.label!=""){if(_127.zoomLevel!=null){var pt=_127.point;if(pt.x!=null&&pt.y!=null&&pt.spatialReference!=null&&pt.spatialReference.wkid!=null){return true;}}}return false;},handleRemoveBookmarkRequest:function(_128,evt){if(_128!=null){this.deleteBookmarkConfirmedCallback=lang.hitch(this,function(_129){VIEWER_UTILS.log("Bookmark Deleted: "+_129.label,VIEWER_GLOBALS.LOG_TYPE.INFO);_11a.publish(VIEWER_GLOBALS.EVENTS.BOOKMARK.REMOVED,_129.key);this.viewModel.removeBookmark(_129);},_128);this.showDeleteBookmarkTooltip(evt);}},loadCookieBookmarks:function(){_11a.publish(VIEWER_GLOBALS.EVENTS.BOOKMARK.STORAGE.GET,lang.hitch(this,this.handleLocalStorageBookmarksLoaded));},handleLocalStorageBookmarksLoaded:function(_12a){this.addBookmarks(_12a,true);this.viewModel.sortRemovable();},handleShowCreateBookmarkView:function(){_11a.publish(VIEWER_GLOBALS.EVENTS.BOOKMARK.CREATE_WINDOW.SHOW);},createConfirmDeleteBookmarkTooltip:function(){this.confirmDeleteBookmarkTooltip=new _11b({confirmCallback:lang.hitch(this,this.handleConfirmedBookmarkDelete)});this.confirmDeleteBookmarkTooltip.on("hide",lang.hitch(this,function(){this.deleteBookmarkConfirmedCallback=null;}));},handleConfirmedBookmarkDelete:function(){if(this.deleteBookmarkConfirmedCallback!=null&&lang.isFunction(this.deleteBookmarkConfirmedCallback)){this.deleteBookmarkConfirmedCallback();this.deleteBookmarkConfirmedCallback=null;}},showDeleteBookmarkTooltip:function(evt){if(this.confirmDeleteBookmarkTooltip==null){this.createConfirmDeleteBookmarkTooltip();}if(this.confirmDeleteBookmarkTooltip){this.confirmDeleteBookmarkTooltip.setAtMouseEvent(evt);this.confirmDeleteBookmarkTooltip.show();}},hidePopups:function(){if(this.confirmDeleteBookmarkTooltip){this.confirmDeleteBookmarkTooltip.hide();}}});});},"dojox/storage/WhatWGStorageProvider":function(){define(["dijit","dojo","dojox","dojo/require!dojox/storage/Provider,dojox/storage/manager"],function(_12b,dojo,_12c){dojo.provide("dojox.storage.WhatWGStorageProvider");dojo.require("dojox.storage.Provider");dojo.require("dojox.storage.manager");dojo.declare("dojox.storage.WhatWGStorageProvider",[_12c.storage.Provider],{initialized:false,_domain:null,_available:null,_statusHandler:null,_allNamespaces:null,_storageEventListener:null,initialize:function(){if(dojo.config["disableWhatWGStorage"]==true){return;}this._domain=location.hostname;this.initialized=true;_12c.storage.manager.loaded();},isAvailable:function(){try{var _12d=globalStorage[location.hostname];}catch(e){this._available=false;return this._available;}this._available=true;return this._available;},put:function(key,_12e,_12f,_130){if(this.isValidKey(key)==false){throw new Error("Invalid key given: "+key);}_130=_130||this.DEFAULT_NAMESPACE;key=this.getFullKey(key,_130);this._statusHandler=_12f;if(dojo.isString(_12e)){_12e="string:"+_12e;}else{_12e=dojo.toJson(_12e);}var _131=dojo.hitch(this,function(evt){window.removeEventListener("storage",_131,false);if(_12f){_12f.call(null,this.SUCCESS,key,null,_130);}});window.addEventListener("storage",_131,false);try{var _132=globalStorage[this._domain];_132.setItem(key,_12e);}catch(e){this._statusHandler.call(null,this.FAILED,key,e.toString(),_130);}},get:function(key,_133){if(this.isValidKey(key)==false){throw new Error("Invalid key given: "+key);}_133=_133||this.DEFAULT_NAMESPACE;key=this.getFullKey(key,_133);var _134=globalStorage[this._domain];var _135=_134.getItem(key);if(_135==null||_135==""){return null;}_135=_135.value;if(dojo.isString(_135)&&(/^string:/.test(_135))){_135=_135.substring("string:".length);}else{_135=dojo.fromJson(_135);}return _135;},getNamespaces:function(){var _136=[this.DEFAULT_NAMESPACE];var _137={};var _138=globalStorage[this._domain];var _139=/^__([^_]*)_/;for(var i=0;i<_138.length;i++){var _13a=_138.key(i);if(_139.test(_13a)==true){var _13b=_13a.match(_139)[1];if(typeof _137[_13b]=="undefined"){_137[_13b]=true;_136.push(_13b);}}}return _136;},getKeys:function(_13c){_13c=_13c||this.DEFAULT_NAMESPACE;if(this.isValidKey(_13c)==false){throw new Error("Invalid namespace given: "+_13c);}var _13d;if(_13c==this.DEFAULT_NAMESPACE){_13d=new RegExp("^([^_]{2}.*)$");}else{_13d=new RegExp("^__"+_13c+"_(.*)$");}var _13e=globalStorage[this._domain];var _13f=[];for(var i=0;i<_13e.length;i++){var _140=_13e.key(i);if(_13d.test(_140)==true){_140=_140.match(_13d)[1];_13f.push(_140);}}return _13f;},clear:function(_141){_141=_141||this.DEFAULT_NAMESPACE;if(this.isValidKey(_141)==false){throw new Error("Invalid namespace given: "+_141);}var _142;if(_141==this.DEFAULT_NAMESPACE){_142=new RegExp("^[^_]{2}");}else{_142=new RegExp("^__"+_141+"_");}var _143=globalStorage[this._domain];var keys=[];for(var i=0;i<_143.length;i++){if(_142.test(_143.key(i))==true){keys[keys.length]=_143.key(i);}}dojo.forEach(keys,dojo.hitch(_143,"removeItem"));},remove:function(key,_144){key=this.getFullKey(key,_144);var _145=globalStorage[this._domain];_145.removeItem(key);},isPermanent:function(){return true;},getMaximumSize:function(){return this.SIZE_NO_LIMIT;},hasSettingsUI:function(){return false;},showSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},hideSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},getFullKey:function(key,_146){_146=_146||this.DEFAULT_NAMESPACE;if(this.isValidKey(_146)==false){throw new Error("Invalid namespace given: "+_146);}if(_146==this.DEFAULT_NAMESPACE){return key;}else{return "__"+_146+"_"+key;}}});_12c.storage.manager.register("dojox.storage.WhatWGStorageProvider",new _12c.storage.WhatWGStorageProvider());});},"esriviewer/ui/toolbar/base/LocatorToolbarSupportMixin":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/on","dojo/dom-attr","dojo/dom-construct","dojo/dom-style","../../../base/LocationSupport","dijit/TooltipDialog","dijit/form/RadioButton","esri/geometry/Extent","esri/SpatialReference"],function(_147,_148,lang,on,_149,_14a,_14b,_14c,_14d,_14e,_14f,_150){return _147([_14c],{showLocator:true,pointAddressAttributeLabel:"PointAddress",candidateAttributeLocationWKID:4326,constructor:function(){this.locatorLookup={};},onLocateBlur:function(){var val=_149.get(this.locateTextBox,"value");if(val==""){_149.set(this.locateTextBox,"value",this.locateDefaultInput);_14b.set(this.locateTextBox,"color","#878787");}},initLocatorListeners:function(){on(this.locateTextBox,"blur",lang.hitch(this,this.onLocateBlur));on(this.locateTextBox,"focus",lang.hitch(this,this.onLocateFocus));on(this.locateTextBox,"keyup",lang.hitch(this,this.onLocateTextKeyUp));on(this.locateButton,"click",lang.hitch(this,this.handleLocationSearchRequest));_148.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_ADDED,lang.hitch(this,this.handleLocatorAdded));_148.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_REMOVED,lang.hitch(this,this.handleLocatorRemoved));},loadCurrentLocators:function(){var _151=null;_148.publish(VIEWER_GLOBALS.EVENTS.LOCATOR.GET_LOCATORS,function(_152){_151=_152;});if(_151!=null&&lang.isArray(_151)&&_151.length>0){for(var i=0;i<_151.length;i++){this._addLocatorToLocatorConfiguration(_151[i].locator,_151[i].label);}if(this.showLocator){_14b.set(this.locateToolbarContainer,"display","inline");}}else{}},handleLocatorAdded:function(_153){if(this.showLocator){_14b.set(this.locateToolbarContainer,"display","inline");}this._addLocatorToLocatorConfiguration(_153.locator,_153.label);},_addLocatorToLocatorConfiguration:function(_154,_155){if(this.configureLocatorTooltip==null){this.createConfigureLocatorTooltip();}var _156=_154.url.toLowerCase();if(this.locatorLookup[_156]!=null){return;}var _157=new _14e({name:"locatorConfigureRadioEntry"});var _158=(_155!=null&&_155!="")?_155:REG_EXP_UTILS.getServiceNameFromUrl(_154.url);var _159=_14a.create("span",{innerHTML:_158,className:"locatorConfigurationEntryLabel"});var _15a=_14a.create("div",{className:"locatorConfigurationEntry"});_14a.place(_157.domNode,_15a);_14a.place(_159,_15a);_14a.place(_15a,this.configureLocatorContent);_14b.set(this.configureLocatorNoLocatorsText,"display","none");this.locatorLookup[_156]={locator:_154,container:_15a,radio:_157};var _15b=0;for(var key in this.locatorLookup){_15b++;}if(_15b==1){_157.set("checked","true");}},handleLocatorRemoved:function(_15c){if(this.locatorLookup[_15c]!=null){_14a.destroy(this.locatorLookup[_15c].container);delete this.locatorLookup[_15c];var _15d=false;for(var key in this.locatorLookup){_15d=true;break;}if(_15d){_14b.set(this.configureLocatorNoLocatorsText,"display","none");}else{_14b.set(this.configureLocatorNoLocatorsText,"display","block");}}},onLocateFocus:function(){var val=_149.get(this.locateTextBox,"value");if(val==this.locateDefaultInput){_149.set(this.locateTextBox,"value","");_14b.set(this.locateTextBox,"color","black");}},onLocateTextKeyUp:function(e){if(VIEWER_UTILS.isEnterKey(e)){this.handleLocationSearchRequest();}},handleLocationSearchRequest:function(){var _15e=_149.get(this.locateTextBox,"value");if(_15e!=null&&_15e!=""&&_15e!=this.locateDefaultInput){var _15f;var _160;for(var key in this.locatorLookup){_15f=this.locatorLookup[key];if(_15f.radio.get("checked")){_160=_15f;break;}}if(_160){this.handleLocate(_15e,_160.locator);}}},handleLocationResponse:function(_161){if(lang.isArray(_161)&&_161.length>0){var _162=_161[0];if(lang.isObject(_162.attributes)){var _163;var _164;var _165;var _166;var _167;if(_162.attributes.North_Lat!=null&&_162.attributes.South_Lat!=null&&_162.attributes.West_Lon!=null&&_162.attributes.East_Lon!=null){try{_163=parseFloat(_162.attributes.West_Lon);_164=parseFloat(_162.attributes.South_Lat);_165=parseFloat(_162.attributes.East_Lon);_166=parseFloat(_162.attributes.North_Lat);_167=new _14f(_163,_164,_165,_166,new _150(this.candidateAttributeLocationWKID));_148.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,_167);return;}catch(err){}}if(_162.attributes.Ymax!=null&&_162.attributes.Xmax!=null&&_162.attributes.Xmin!=null&&_162.attributes.Ymin!=null){try{_163=parseFloat(_162.attributes.Xmin);_164=parseFloat(_162.attributes.Ymin);_165=parseFloat(_162.attributes.Xmax);_166=parseFloat(_162.attributes.Ymax);_167=new _14f(_163,_164,_165,_166,new _150(this.candidateAttributeLocationWKID));_148.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,_167);return;}catch(err){}}if(_162.attributes.MatchLevel!=null&&_162.location){var _168=_162.attributes.MatchLevel;var _169=null;if(_168!=null){if(_168===this.pointAddressAttributeLabel){_169={};_169.deepest=true;}}_148.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PAN_TO,_162.location,_169);return;}}if(_162.location!=null){_148.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PAN_TO,_162.location);}}},createConfigureLocatorTooltip:function(){this.configureLocatorContent=_14a.create("div");this.configureLocatorNoLocatorsText=_14a.create("div",{className:"noLocatorsText",innerHTML:"No Locators Configured"});_14a.place(this.configureLocatorNoLocatorsText,this.configureLocatorContent);this.configureLocatorTooltip=new _14d({content:this.configureLocatorContent});},toggleConfigureLocatorTooltip:function(){if(!this.configureLocatorTooltipVisible){this.showConfigureLocatorTooltip();this.configureLocatorTooltipVisible=true;}else{this.hideConfigureLocatorTooltip();this.configureLocatorTooltipVisible=false;}},showConfigureLocatorTooltip:function(){if(this.configureLocatorTooltip==null){this.createConfigureLocatorTooltip();}if(this.configureLocatorTooltip){dijit.popup.open({popup:this.configureLocatorTooltip,around:this.configureLocateButton});}},hideConfigureLocatorTooltip:function(){if(this.configureLocatorTooltip){dijit.popup.close(this.configureLocatorTooltip);}}});});},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(_16a,_16b,_16c,lang,_16d){return _16b("dijit.tree.ForestStoreModel",_16d,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(_16e){this.root={store:this,root:true,id:_16e.rootId,label:_16e.rootLabel,children:_16e.rootChildren};},mayHaveChildren:function(item){return item===this.root||this.inherited(arguments);},getChildren:function(_16f,_170,_171){if(_16f===this.root){if(this.root.children){_170(this.root.children);}else{this.store.fetch({query:this.query,onComplete:lang.hitch(this,function(_172){this.root.children=_172;_170(_172);}),onError:_171});}}else{this.inherited(arguments);}},isItem:function(_173){return (_173===this.root)?true:this.inherited(arguments);},fetchItemByIdentity:function(_174){if(_174.identity==this.root.id){var _175=_174.scope||_16c.global;if(_174.onItem){_174.onItem.call(_175,this.root);}}else{this.inherited(arguments);}},getIdentity:function(item){return (item===this.root)?this.root.id:this.inherited(arguments);},getLabel:function(item){return (item===this.root)?this.root.label:this.inherited(arguments);},newItem:function(args,_176,_177){if(_176===this.root){this.onNewRootItem(args);return this.store.newItem(args);}else{return this.inherited(arguments);}},onNewRootItem:function(){},pasteItem:function(_178,_179,_17a,_17b,_17c){if(_179===this.root){if(!_17b){this.onLeaveRoot(_178);}}this.inherited(arguments,[_178,_179===this.root?null:_179,_17a===this.root?null:_17a,_17b,_17c]);if(_17a===this.root){this.onAddToRoot(_178);}},onAddToRoot:function(item){},onLeaveRoot:function(item){},_requeryTop:function(){var _17d=this.root.children||[];this.store.fetch({query:this.query,onComplete:lang.hitch(this,function(_17e){this.root.children=_17e;if(_17d.length!=_17e.length||_16a.some(_17d,function(item,idx){return _17e[idx]!=item;})){this.onChildrenChange(this.root,_17e);}})});},onNewItem:function(item,_17f){this._requeryTop();this.inherited(arguments);},onDeleteItem:function(item){if(_16a.indexOf(this.root.children,item)!=-1){this._requeryTop();}this.inherited(arguments);},onSetItem:function(item,_180,_181,_182){this._requeryTop();this.inherited(arguments);}});});},"dojox/html/metrics":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/sniff","dojo/ready","dojo/_base/unload","dojo/_base/window","dojo/dom-geometry"],function(_183,lang,has,_184,_185,_186,_187){var dhm=lang.getObject("dojox.html.metrics",true);var _188=lang.getObject("dojox");dhm.getFontMeasurements=function(){var _189={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,"small":0,"medium":0,"large":0,"x-large":0,"xx-large":0};if(has("ie")){_186.doc.documentElement.style.fontSize="100%";}var div=_186.doc.createElement("div");var ds=div.style;ds.position="absolute";ds.left="-100px";ds.top="0";ds.width="30px";ds.height="1000em";ds.borderWidth="0";ds.margin="0";ds.padding="0";ds.outline="0";ds.lineHeight="1";ds.overflow="hidden";_186.body().appendChild(div);for(var p in _189){ds.fontSize=p;_189[p]=Math.round(div.offsetHeight*12/16)*16/12/1000;}_186.body().removeChild(div);div=null;return _189;};var _18a=null;dhm.getCachedFontMeasurements=function(_18b){if(_18b||!_18a){_18a=dhm.getFontMeasurements();}return _18a;};var _18c=null,_18d={};dhm.getTextBox=function(text,_18e,_18f){var m,s;if(!_18c){m=_18c=_186.doc.createElement("div");var c=_186.doc.createElement("div");c.appendChild(m);s=c.style;s.overflow="scroll";s.position="absolute";s.left="0px";s.top="-10000px";s.width="1px";s.height="1px";s.visibility="hidden";s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";_186.body().appendChild(c);}else{m=_18c;}m.className="";s=m.style;s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";if(arguments.length>1&&_18e){for(var i in _18e){if(i in _18d){continue;}s[i]=_18e[i];}}if(arguments.length>2&&_18f){m.className=_18f;}m.innerHTML=text;var box=_187.position(m);box.w=m.parentNode.scrollWidth;return box;};var _190={w:16,h:16};dhm.getScrollbar=function(){return {w:_190.w,h:_190.h};};dhm._fontResizeNode=null;dhm.initOnFontResize=function(_191){var f=dhm._fontResizeNode=_186.doc.createElement("iframe");var fs=f.style;fs.position="absolute";fs.width="5em";fs.height="10em";fs.top="-10000px";fs.display="none";if(has("ie")){f.onreadystatechange=function(){if(f.contentWindow.document.readyState=="complete"){f.onresize=f.contentWindow.parent[_188._scopeName].html.metrics._fontresize;}};}else{f.onload=function(){f.contentWindow.onresize=f.contentWindow.parent[_188._scopeName].html.metrics._fontresize;};}f.setAttribute("src","javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}</script></head><body></body></html>'");_186.body().appendChild(f);dhm.initOnFontResize=function(){};};dhm.onFontResize=function(){};dhm._fontresize=function(){dhm.onFontResize();};_185.addOnUnload(function(){var f=dhm._fontResizeNode;if(f){if(has("ie")&&f.onresize){f.onresize=null;}else{if(f.contentWindow&&f.contentWindow.onresize){f.contentWindow.onresize=null;}}dhm._fontResizeNode=null;}});_184(function(){try{var n=_186.doc.createElement("div");n.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";_186.body().appendChild(n);_190.w=n.offsetWidth-n.clientWidth;_190.h=n.offsetHeight-n.clientHeight;_186.body().removeChild(n);delete n;}catch(e){}if("fontSizeWatch" in _183.config&&!!_183.config.fontSizeWatch){dhm.initOnFontResize();}});return dhm;});},"esriviewer/manager/base/IdentityManagerMixin":function(){define(["dojo/_base/declare","esri/IdentityManager","esri/kernel","dojo/_base/lang","dojo/cookie","dojo/json","dojo/_base/unload"],function(_192,_193,_194,lang,_195,JSON,_196){return _192([],{cred:"esri_jsapi_id_manager_data",constructor:function(){_196.addOnUnload(lang.hitch(this,this._storeCredentials));this._loadCredentials();},_loadCredentials:function(){var _197,_198;if(this._supportsLocalStorage()){_197=window.localStorage.getItem(this.cred);}else{_197=_195(cred);}if(_197&&_197!="null"&&_197.length>4){_198=JSON.parse(_197);_194.id.initialize(_198);}else{}},_storeCredentials:function(){if(_194.id.credentials.length===0){return;}var _199=JSON.stringify(_194.id.toJson());if(this._supportsLocalStorage()){window.localStorage.setItem(this.cred,_199);}else{_195(cred,_199,{expires:1});}},_supportsLocalStorage:function(){try{return "localStorage" in window&&window["localStorage"]!==null;}catch(e){return false;}}});});},"esriviewer/ui/draw/base/model/GraphicsListViewModel":function(){define(["dojo/_base/declare","dojo/topic","dojo/Evented"],function(_19a,_19b,_19c){return _19a([_19c],{REMOVE_GRAPHIC:"removeGraphic",REMOVE_ALL_GRAPHICS:"removeAllGraphics",constructor:function(){var self=this;this.saveGraphicsIconVisible=ko.observable(false);this.saveGraphicsInputVisible=ko.observable(false);this.allGraphicsVisible=ko.observable(true);this.addedGraphics=ko.observableArray();var _19d=function(){return self.addedGraphics().length>0;};this.hasGraphics=ko.computed(_19d);this.removeGraphic=function(_19e){if(_19e==null){return;}self.emit(self.REMOVE_GRAPHIC,_19e.graphic);self.addedGraphics.remove(_19e);};this.zoomToGraphic=function(_19f){_19b.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.CENTER_AND_FLASH,_19f.graphic);};},removeAllGraphics:function(){var _1a0=this.addedGraphics();this.emit(this.REMOVE_ALL_GRAPHICS);for(var i=0;i<_1a0.length;i++){}this.addedGraphics.removeAll();},toggleAllGraphics:function(){var _1a1=this.addedGraphics();var i;if(!this.allGraphicsVisible()){for(i=0;i<_1a1.length;i++){_1a1[i].graphic.show();}this.allGraphicsVisible(true);}else{for(i=0;i<_1a1.length;i++){_1a1[i].graphic.hide();}this.allGraphicsVisible(false);}},toggleSaveGraphics:function(){this.saveGraphicsInputVisible(!this.saveGraphicsInputVisible());}});});},"esriviewer/ui/draw/configure/geometry/ConfigurePointWidget":function(){define(["dojo/_base/declare","dojo/text!./template/ConfigurePointTemplate.html","dojo/_base/Color","dojo/topic","dojo/_base/lang","./model/ConfigurePointViewModel","./BaseGeometryConfigurationWidget","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol"],function(_1a2,_1a3,_1a4,_1a5,lang,_1a6,_1a7,_1a8,_1a9){return _1a2([_1a7],{templateString:_1a3,postCreate:function(){this.inherited(arguments);this.viewModel=new _1a6();this.viewModel.selectedMarkerStyle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedMarkerSize.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedAngle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedOutlineWidth.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedOutlineStyle.subscribe(lang.hitch(this,this.processChange));this.viewModel.markerColorActive.subscribe(lang.hitch(this,this.handleMarkerColorToggled));this.markerColor=new _1a4([255,0,0,this.getTransparency()/100]);this.outlineColor=new _1a4([255,0,0,this.getTransparency()/100]);this.colorPicker.set("value",this.markerColor.toHex());ko.applyBindings(this.viewModel,this.domNode);},handleTransparencyChanged:function(){var _1aa=this.getTransparency()/100;this.outlineColor=new _1a4([this.outlineColor.r,this.outlineColor.g,this.outlineColor.b,_1aa]);this.markerColor=new _1a4([this.markerColor.r,this.markerColor.g,this.markerColor.b,_1aa]);this.inherited(arguments);},handleMarkerColorToggled:function(_1ab){if(_1ab){this.colorPicker.set("value",this.markerColor.toHex());}else{this.colorPicker.set("value",this.outlineColor.toHex());}},handleColorPickerChanged:function(){if(this.viewModel.outlineColorActive()){this.outlineColor=this.getColor();}else{this.markerColor=this.getColor();}this.processChange();},processChange:function(){this.onChange(this.getSymbol());},getSymbol:function(){return new _1a8(this.viewModel.selectedMarkerStyle(),parseInt(this.viewModel.selectedMarkerSize(),10),new _1a9(this.viewModel.selectedOutlineStyle(),this.outlineColor,this.viewModel.selectedOutlineWidth()),this.markerColor).setAngle(this.viewModel.selectedAngle());}});});},"esriviewer/ui/draw/configure/geometry/model/ConfigurePointViewModel":function(){define(["dojo/_base/declare","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol"],function(_1ac,_1ad,_1ae){return _1ac([],{pointColorTypes:{outline:"outline",fill:"fill"},markerStyles:ko.observableArray([{value:_1ad.STYLE_CIRCLE,label:"Circle"},{value:_1ad.STYLE_CROSS,label:"Cross"},{value:_1ad.STYLE_DIAMOND,label:"Diamond"},{value:_1ad.STYLE_SQUARE,label:"Square"},{value:_1ad.STYLE_X,label:"X"}]),outlineStyles:ko.observableArray([{value:_1ae.STYLE_DASH,label:"Dashed Line"},{value:_1ae.STYLE_DASHDOT,label:"Dash Dot Line"},{value:_1ae.STYLE_DASHDOTDOT,label:"Dash Dot Dot Line"},{value:_1ae.STYLE_DOT,label:"Dotted Line"},{value:_1ae.STYLE_SOLID,label:"Solid Line"},{value:_1ae.STYLE_NULL,label:"None"}]),markerSizes:ko.observableArray([1,2,3,4,5,6,7,8,9,10,15,20,25,30,40,50,75]),outlineWidths:ko.observableArray([1,2,3,4,5,6,7,8,9,10]),angles:ko.observableArray([0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85]),constructor:function(){this.selectedMarkerStyle=ko.observable(_1ad.STYLE_CIRCLE);this.selectedMarkerSize=ko.observable(10);this.selectedAngle=ko.observable(0);this.selectedOutlineStyle=ko.observable(_1ae.STYLE_SOLID);this.selectedOutlineWidth=ko.observable(1);this.markerColorActive=ko.observable(true);this.outlineColorActive=ko.observable(false);},setOutlineColorMode:function(){this.outlineColorActive(true);this.markerColorActive(false);},setMarkerColorMode:function(){this.outlineColorActive(false);this.markerColorActive(true);}});});},"dojo/dnd/Manager":function(){define(["../_base/array","../_base/declare","../_base/lang","../_base/window","../dom-class","../Evented","../has","../keys","../on","../topic","../touch","./common","./autoscroll","./Avatar"],function(_1af,_1b0,lang,win,_1b1,_1b2,has,keys,on,_1b3,_1b4,dnd,_1b5,_1b6){var _1b7=_1b0("dojo.dnd.Manager",[_1b2],{constructor:function(){this.avatar=null;this.source=null;this.nodes=[];this.copy=true;this.target=null;this.canDropFlag=false;this.events=[];},OFFSET_X:has("touch")?0:16,OFFSET_Y:has("touch")?-64:16,overSource:function(_1b8){if(this.avatar){this.target=(_1b8&&_1b8.targetState!="Disabled")?_1b8:null;this.canDropFlag=Boolean(this.target);this.avatar.update();}_1b3.publish("/dnd/source/over",_1b8);},outSource:function(_1b9){if(this.avatar){if(this.target==_1b9){this.target=null;this.canDropFlag=false;this.avatar.update();_1b3.publish("/dnd/source/over",null);}}else{_1b3.publish("/dnd/source/over",null);}},startDrag:function(_1ba,_1bb,copy){_1b5.autoScrollStart(win.doc);this.source=_1ba;this.nodes=_1bb;this.copy=Boolean(copy);this.avatar=this.makeAvatar();win.body().appendChild(this.avatar.node);_1b3.publish("/dnd/start",_1ba,_1bb,this.copy);function _1bc(e){e.preventDefault();e.stopPropagation();};this.events=[on(win.doc,_1b4.move,lang.hitch(this,"onMouseMove")),on(win.doc,_1b4.release,lang.hitch(this,"onMouseUp")),on(win.doc,"keydown",lang.hitch(this,"onKeyDown")),on(win.doc,"keyup",lang.hitch(this,"onKeyUp")),on(win.doc,"dragstart",_1bc),on(win.body(),"selectstart",_1bc)];var c="dojoDnd"+(copy?"Copy":"Move");_1b1.add(win.body(),c);},canDrop:function(flag){var _1bd=Boolean(this.target&&flag);if(this.canDropFlag!=_1bd){this.canDropFlag=_1bd;this.avatar.update();}},stopDrag:function(){_1b1.remove(win.body(),["dojoDndCopy","dojoDndMove"]);_1af.forEach(this.events,function(_1be){_1be.remove();});this.events=[];this.avatar.destroy();this.avatar=null;this.source=this.target=null;this.nodes=[];},makeAvatar:function(){return new _1b6(this);},updateAvatar:function(){this.avatar.update();},onMouseMove:function(e){var a=this.avatar;if(a){_1b5.autoScrollNodes(e);var s=a.node.style;s.left=(e.pageX+this.OFFSET_X)+"px";s.top=(e.pageY+this.OFFSET_Y)+"px";var copy=Boolean(this.source.copyState(dnd.getCopyKeyState(e)));if(this.copy!=copy){this._setCopyStatus(copy);}}if(has("touch")){e.preventDefault();}},onMouseUp:function(e){if(this.avatar){if(this.target&&this.canDropFlag){var copy=Boolean(this.source.copyState(dnd.getCopyKeyState(e)));_1b3.publish("/dnd/drop/before",this.source,this.nodes,copy,this.target,e);_1b3.publish("/dnd/drop",this.source,this.nodes,copy,this.target,e);}else{_1b3.publish("/dnd/cancel");}this.stopDrag();}},onKeyDown:function(e){if(this.avatar){switch(e.keyCode){case keys.CTRL:var copy=Boolean(this.source.copyState(true));if(this.copy!=copy){this._setCopyStatus(copy);}break;case keys.ESCAPE:_1b3.publish("/dnd/cancel");this.stopDrag();break;}}},onKeyUp:function(e){if(this.avatar&&e.keyCode==keys.CTRL){var copy=Boolean(this.source.copyState(false));if(this.copy!=copy){this._setCopyStatus(copy);}}},_setCopyStatus:function(copy){this.copy=copy;this.source._markDndStatus(this.copy);this.updateAvatar();_1b1.replace(win.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"));}});dnd._manager=null;_1b7.manager=dnd.manager=function(){if(!dnd._manager){dnd._manager=new _1b7();}return dnd._manager;};return _1b7;});},"esriviewer/ui/bookmark/CreateBookmarkWidget":function(){define(["dojo/_base/declare","dojo/text!./template/CreateBookmarkTemplate.html","dojo/topic","../base/UITemplatedWidget","dojo/dom-style","dojo/dom-class","dojox/timing","dijit/form/TextBox","dijit/form/Button"],function(_1bf,_1c0,_1c1,_1c2,_1c3,_1c4,_1c5,_1c6,_1c7){return _1bf([_1c2],{animate:true,animateOnPlace:false,templateString:_1c0,postCreate:function(){this.inherited(arguments);this._hideNoAnim();},loadViewerConfigurationData:function(){var _1c8=null;_1c1.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"animationsEnabled",function(_1c9){_1c8=_1c9;});if(_1c8!=null){this.animate=_1c8;}},show:function(){_1c4.remove(this.domNode,"createBookmarkWindowHidden");if(this.animate){this._removeAnimationClasses();this.animation=VIEWER_GLOBALS.ANIMATIONS.LIGHT_SPEED.IN;this._animateWidget();}this.bookmarkLabelElement.focus();},_hideNoAnim:function(){_1c4.add(this.domNode,"createBookmarkWindowHidden");this.bookmarkLabelElement.set("value","");},hide:function(){if(this.animate){this._removeAnimationClasses();this.animation=VIEWER_GLOBALS.ANIMATIONS.LIGHT_SPEED.OUT;this._animateWidget();var _1ca=new _1c5.Timer(VIEWER_GLOBALS.ANIMATIONS.LIGHT_SPEED.DURATION);var self=this;_1ca.onTick=function(){_1c4.add(self.domNode,"createBookmarkWindowHidden");_1ca.stop();_1ca=null;};_1ca.start();}else{_1c4.add(this.domNode,"createBookmarkWindowHidden");}this.bookmarkLabelElement.set("value","");},onBookmarkLabelKeyUp:function(e){if(VIEWER_UTILS.isEnterKey(e)){this.createBookmark();}},createBookmark:function(){var _1cb=this.bookmarkLabelElement.get("value");if(_1cb==""){return;}var _1cc;var _1cd;_1c1.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_CENTER,function(_1ce){_1cc=_1ce;});_1c1.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_LEVEL,function(_1cf){_1cd=_1cf;});var _1d0={x:_1cc.x,y:_1cc.y,spatialReference:{wkid:_1cc.spatialReference.wkid}};var id=VIEWER_UTILS.generateUUID();var _1d1={label:_1cb,zoomLevel:_1cd,point:_1d0};var _1d2={};_1d2[id]=_1d1;VIEWER_UTILS.log("Bookmark Created: "+_1cb,VIEWER_GLOBALS.LOG_TYPE.INFO);_1c1.publish(VIEWER_GLOBALS.EVENTS.BOOKMARK.CREATED,_1d2);this.hide();}});});},"esriviewer/ui/print/PrintWidgetWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/window","dojo/dom-style","../window/WindowWidget"],function(_1d3,lang,_1d4,_1d5,_1d6,_1d7){return _1d3([_1d7],{defaultPositioning:{x:500,y:125},windowWidth:"300px",windowHeaderText:"Print",windowIconAltText:"Print",windowIconClass:"commonIcons16 print",positioningParamName:"print",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/print/PrintWidget"],lang.hitch(this,function(_1d8){this.printWidget=new _1d8();this.setContent(this.printWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_1d4.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PRINT.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_1d4.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PRINT.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_1d4.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PRINT.TOGGLE,lang.hitch(this,this.toggle)));}});});},"esriviewer/manager/base/WebMapTemplateConfigurationUtil":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Deferred","esri/request","dojo/_base/array","../../base/DataLoaderSupport","esri/arcgis/utils"],function(_1d9,lang,_1da,_1db,_1dc,_1dd,_1de){return _1d9([_1dd],{showOverviewParameter:"showOverview",showLegendParameter:"showLegend",showHeaderParameter:"showHeader",headerTextParameter:"headerText",helpLinkParameter:"helpUrl",contactUsParameter:"contactUsUrl",ignoreProcessingConfigurationEntries:["webmap","geometryServiceUrl","locators","baseViewer","showOverview","showLegend"],appConfigToViewerWindowWidgetConfigLookup:{logging:"logging"},appConfigToViewerWidgetConfigLookup:{pointUploadWidget:"pointUploadWidget",drawWidget:"drawWidget",plottingWidget:"plottingWidget",reverseGeocodeWidget:"reverseGeocodeWidget",portalSearchWidget:"portalSearchWidget",reflectivityWidget:"reflectivityWidget",zoomToWidget:"zoomToWidget",timeSliderWidget:"timeSliderWidget",identifyWidget:"identifyWidget",configureWidget:"configureWidget",measureWidget:"measureWidget",socialMediaWidget:"socialMediaWidget",printWidget:"printWidget",weatherWidget:"weatherWidget"},defaultConfigFile:"config/portal/config.json",constructor:function(){this.init();},init:function(){},loadConfiguration:function(_1df){this.appId=_1df;this.deferred=new _1da();this._loadDefaultConfiguration();return this.deferred.promise;},_loadDefaultConfiguration:function(){this.loadJson(this.defaultConfigFile,lang.hitch(this,this._handleDefaultConfigurationLoaded),lang.hitch(this,this._handleDefaultConfigurationLoadError));},_loadTemplateConfiguration:function(){var _1e0=_1db({url:_1de.arcgisUrl+"/"+this.appId+"/data",content:{f:"json"},callbackParamName:"callback",load:lang.hitch(this,this.handleTemplateResponse),error:lang.hitch(this,this.handleTemplateErrorResponse)},{useProxy:true});},handleTemplateErrorResponse:function(err){alert("Could not load application data from "+_1de.arcgisUrl);},handleTemplateResponse:function(_1e1){this.templateResponse=_1e1;this.appConfig={};for(var key in _1e1.values){if(_1e1.values[key]!==undefined){this.appConfig[key]=_1e1.values[key];}}this._loadWebMapItem(this.appConfig.webmap);},_loadWebMapItem:function(_1e2){_1de.getItem(_1e2).then(lang.hitch(this,this.handleWebMapItemLoaded));},handleWebMapItemLoaded:function(_1e3){this.webMapItem=_1e3;var _1e4=lang.mixin(this.defaultConfiguration.values,this.appConfig);this.viewerConfiguration=this._applicationConfigurationToViewerConfiguration(_1e4);this.viewerConfiguration.webMapItem=this.webMapItem;this.handleWebMapConfigurationComplete();},_handleDefaultConfigurationLoaded:function(_1e5){this.defaultConfiguration=_1e5;this.portalUrl=this.defaultConfiguration.values.portalConfiguration.url;_1de.arcgisUrl=VIEWER_UTILS.joinUrl(this.portalUrl,this.defaultConfiguration.values.portalConfiguration.itemsPath);this._loadTemplateConfiguration();},handleWebMapConfigurationComplete:function(){this.finalizeLoad();},finalizeLoad:function(){this.deferred.resolve(this.viewerConfiguration);},_handleDefaultConfigurationLoadError:function(){alert("Could not load default configuration");},_applicationConfigurationToViewerConfiguration:function(_1e6){var _1e7={small:true,display:true,headerText:"Mapping Application",headerImage:"images/logoSmall.png",contact:{label:"Contact Us",url:"http://www.esri.com/about-esri/contact"},help:{label:"Help",url:"http://support.esri.com/en/"}};var _1e8={webMapItem:_1e6.webmap,header:_1e7};for(var key in _1e6){if(_1dc.indexOf(this.ignoreProcessingConfigurationEntries,key)>-1){continue;}else{if(key===this.showHeaderParameter){_1e8.header.display=_1e6[key];}else{if(key===this.headerTextParameter){_1e8.header.headerText=_1e6[key];}else{if(key===this.helpLinkParameter){_1e8.header.contact.url=_1e6[key];}else{if(key===this.contactUsParameter){_1e8.header.help.url=_1e6[key];}else{if(this.appConfigToViewerWidgetConfigLookup[key]){_1e8[key]={create:_1e6[key]};}else{if(this.appConfigToViewerWindowWidgetConfigLookup[key]){_1e8[key]={window:{create:_1e6[key]}};}else{_1e8[key]={create:false};}}}}}}}}this._applyWebMappingApplicationDefaults(_1e6,_1e8);return _1e8;},_applyWebMappingApplicationDefaults:function(_1e9,_1ea){var _1eb=_1e9[this.showOverviewParameter]!=null&&_1e9[this.showOverviewParameter];var _1ec=_1e9[this.showLegendParameter]!=null&&_1e9[this.showLegendParameter];_1ea.map={overview:{create:_1eb},useBasemapGallery:true,legend:{create:_1ec}};_1ea.toolsBar={showToolsDropdown:true,showLayersButton:true,showConfigureLocatorsIcon:false,showBookmarksButton:true};_1ea.toolsAccordion={create:false};if(this.portalUrl){_1ea.portal={url:this.portalUrl};}if(_1e9.geometryServiceUrl){_1ea.geometryServiceUrl=_1e9.geometryServiceUrl;}if(_1e9.locators){_1ea.locators=_1e9.locators;}var _1ed=_1ea[this.appConfigToViewerWidgetConfigLookup.socialMediaWidget];if(_1ed){if(_1ed.create){_1ed.configurationUrl=this.defaultConfiguration.values.baseViewer.socialMediaWidgetConfiguration.configurationUrl;}}var _1ee=_1ea[this.appConfigToViewerWidgetConfigLookup.weatherWidget];if(_1ee){if(_1ee.create){_1ee.configurationUrl=this.defaultConfiguration.values.baseViewer.weatherWidgetConfiguration.configurationUrl;}}var _1ef=_1ea[this.appConfigToViewerWidgetConfigLookup.printWidget];if(_1ef){if(_1ef.create){_1ef.printTaskUrl=this.defaultConfiguration.values.baseViewer.printWidgetConfiguration.printTaskUrl;}}var _1f0=_1ea[this.appConfigToViewerWidgetConfigLookup.zoomToWidget];if(_1f0){if(_1f0.create){_1f0.stateJson=this.defaultConfiguration.values.baseViewer.zoomToWidgetConfiguration.stateJson;_1f0.countyJson=this.defaultConfiguration.values.baseViewer.zoomToWidgetConfiguration.countyJson;}}}});});},"dojox/storage/BehaviorStorageProvider":function(){define(["dijit","dojo","dojox","dojo/require!dojox/storage/Provider,dojox/storage/manager"],function(_1f1,dojo,_1f2){dojo.provide("dojox.storage.BehaviorStorageProvider");dojo.require("dojox.storage.Provider");dojo.require("dojox.storage.manager");dojo.declare("dojox.storage.BehaviorStorageProvider",[_1f2.storage.Provider],{store:null,storeName:"__dojox_BehaviorStorage",keys:[],initialize:function(){try{this.store=this._createStore();this.store.load(this.storeName);}catch(e){throw new Error("Store is not available: "+e);}var keys=this.get("keys","dojoxSystemNS");this.keys=keys||[];this.initialized=true;_1f2.storage.manager.loaded();},isAvailable:function(){return dojo.isIE&&dojo.isIE>=5;},_createStore:function(){var _1f3=dojo.create("link",{id:this.storeName+"Node",style:{"display":"none"}},dojo.query("head")[0]);_1f3.addBehavior("#default#userdata");return _1f3;},put:function(key,_1f4,_1f5,_1f6){this._assertIsValidKey(key);_1f6=_1f6||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_1f6);var _1f7=this.getFullKey(key,_1f6);_1f4=dojo.toJson(_1f4);this.store.setAttribute(_1f7,_1f4);this.store.save(this.storeName);var _1f8=this.store.getAttribute(_1f7)===_1f4;if(_1f8){this._addKey(_1f7);this.store.setAttribute("__dojoxSystemNS_keys",dojo.toJson(this.keys));this.store.save(this.storeName);}if(_1f5){_1f5(_1f8?this.SUCCESS:this.FAILED,key,null,_1f6);}},get:function(key,_1f9){this._assertIsValidKey(key);_1f9=_1f9||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_1f9);key=this.getFullKey(key,_1f9);return dojo.fromJson(this.store.getAttribute(key));},getKeys:function(_1fa){_1fa=_1fa||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_1fa);_1fa="__"+_1fa+"_";var keys=[];for(var i=0;i<this.keys.length;i++){var _1fb=this.keys[i];if(this._beginsWith(_1fb,_1fa)){_1fb=_1fb.substring(_1fa.length);keys.push(_1fb);}}return keys;},clear:function(_1fc){_1fc=_1fc||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_1fc);_1fc="__"+_1fc+"_";var keys=[];for(var i=0;i<this.keys.length;i++){var _1fd=this.keys[i];if(this._beginsWith(_1fd,_1fc)){keys.push(_1fd);}}dojo.forEach(keys,function(key){this.store.removeAttribute(key);this._removeKey(key);},this);this.put("keys",this.keys,null,"dojoxSystemNS");this.store.save(this.storeName);},remove:function(key,_1fe){this._assertIsValidKey(key);_1fe=_1fe||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_1fe);key=this.getFullKey(key,_1fe);this.store.removeAttribute(key);this._removeKey(key);this.put("keys",this.keys,null,"dojoxSystemNS");this.store.save(this.storeName);},getNamespaces:function(){var _1ff=[this.DEFAULT_NAMESPACE];var _200={};_200[this.DEFAULT_NAMESPACE]=true;var _201=/^__([^_]*)_/;for(var i=0;i<this.keys.length;i++){var _202=this.keys[i];if(_201.test(_202)==true){var _203=_202.match(_201)[1];if(typeof _200[_203]=="undefined"){_200[_203]=true;_1ff.push(_203);}}}return _1ff;},isPermanent:function(){return true;},getMaximumSize:function(){return 64;},hasSettingsUI:function(){return false;},isValidKey:function(_204){if(_204===null||_204===undefined){return false;}return /^[0-9A-Za-z_-]*$/.test(_204);},isValidNamespace:function(_205){if(_205===null||_205===undefined){return false;}return /^[0-9A-Za-z-]*$/.test(_205);},getFullKey:function(key,_206){return "__"+_206+"_"+key;},_beginsWith:function(_207,_208){if(_208.length>_207.length){return false;}return _207.substring(0,_208.length)===_208;},_assertIsValidNamespace:function(_209){if(this.isValidNamespace(_209)===false){throw new Error("Invalid namespace given: "+_209);}},_assertIsValidKey:function(key){if(this.isValidKey(key)===false){throw new Error("Invalid key given: "+key);}},_addKey:function(key){this._removeKey(key);this.keys.push(key);},_removeKey:function(key){this.keys=dojo.filter(this.keys,function(item){return item!==key;},this);}});_1f2.storage.manager.register("dojox.storage.BehaviorStorageProvider",new _1f2.storage.BehaviorStorageProvider());});},"dijit/layout/AccordionContainer":function(){define(["require","dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/topic","../focus","../_base/manager","dojo/ready","../_Widget","../_Container","../_TemplatedMixin","../_CssStateMixin","./StackContainer","./ContentPane","dojo/text!./templates/AccordionButton.html","../a11yclick"],function(_20a,_20b,_20c,fx,dom,_20d,_20e,_20f,_210,keys,lang,has,_211,_212,_213,_214,_215,_216,_217,_218,_219,_21a,_21b){var _21c=_20c("dijit.layout._AccordionButton",[_215,_217,_218],{templateString:_21b,label:"",_setLabelAttr:{node:"titleTextNode",type:"innerHTML"},title:"",_setTitleAttr:{node:"titleTextNode",type:"attribute",attribute:"title"},iconClassAttr:"",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitAccordionTitle",getParent:function(){return this.parent;},buildRendering:function(){this.inherited(arguments);var _21d=this.id.replace(" ","_");_20d.set(this.titleTextNode,"id",_21d+"_title");this.focusNode.setAttribute("aria-labelledby",_20d.get(this.titleTextNode,"id"));dom.setSelectable(this.domNode,false);},getTitleHeight:function(){return _210.getMarginSize(this.domNode).h;},_onTitleClick:function(){var _21e=this.getParent();_21e.selectChild(this.contentWidget,true);_212.focus(this.focusNode);},_onTitleKeyDown:function(evt){return this.getParent()._onKeyDown(evt,this.contentWidget);},_setSelectedAttr:function(_21f){this._set("selected",_21f);this.focusNode.setAttribute("aria-expanded",_21f?"true":"false");this.focusNode.setAttribute("aria-selected",_21f?"true":"false");this.focusNode.setAttribute("tabIndex",_21f?"0":"-1");}});if(has("dojo-bidi")){_21c.extend({_setLabelAttr:function(_220){this._set("label",_220);_20d.set(this.titleTextNode,"innerHTML",_220);this.applyTextDir(this.titleTextNode);},_setTitleAttr:function(_221){this._set("title",_221);_20d.set(this.titleTextNode,"title",_221);this.applyTextDir(this.titleTextNode);}});}var _222=_20c("dijit.layout._AccordionInnerContainer"+(has("dojo-bidi")?"_NoBidi":""),[_215,_218],{baseClass:"dijitAccordionInnerContainer",isLayoutContainer:true,buildRendering:function(){this.domNode=_20f.place("<div class='"+this.baseClass+"' role='presentation'>",this.contentWidget.domNode,"after");var _223=this.contentWidget,cls=lang.isString(this.buttonWidget)?lang.getObject(this.buttonWidget):this.buttonWidget;this.button=_223._buttonWidget=(new cls({contentWidget:_223,label:_223.title,title:_223.tooltip,dir:_223.dir,lang:_223.lang,textDir:_223.textDir||this.textDir,iconClass:_223.iconClass,id:_223.id+"_button",parent:this.parent})).placeAt(this.domNode);this.containerNode=_20f.place("<div class='dijitAccordionChildWrapper' role='tabpanel' style='display:none'>",this.domNode);this.containerNode.setAttribute("aria-labelledby",this.button.id);_20f.place(this.contentWidget.domNode,this.containerNode);},postCreate:function(){this.inherited(arguments);var _224=this.button,cw=this.contentWidget;this._contentWidgetWatches=[cw.watch("title",lang.hitch(this,function(name,_225,_226){_224.set("label",_226);})),cw.watch("tooltip",lang.hitch(this,function(name,_227,_228){_224.set("title",_228);})),cw.watch("iconClass",lang.hitch(this,function(name,_229,_22a){_224.set("iconClass",_22a);}))];},_setSelectedAttr:function(_22b){this._set("selected",_22b);this.button.set("selected",_22b);if(_22b){var cw=this.contentWidget;if(cw.onSelected){cw.onSelected();}}},startup:function(){this.contentWidget.startup();},destroy:function(){this.button.destroyRecursive();_20b.forEach(this._contentWidgetWatches||[],function(w){w.unwatch();});delete this.contentWidget._buttonWidget;delete this.contentWidget._wrapperWidget;this.inherited(arguments);},destroyDescendants:function(_22c){this.contentWidget.destroyRecursive(_22c);}});if(has("dojo-bidi")){_222=_20c("dijit.layout._AccordionInnerContainer",_222,{postCreate:function(){this.inherited(arguments);var _22d=this.button;this._contentWidgetWatches.push(this.contentWidget.watch("textDir",function(name,_22e,_22f){_22d.set("textDir",_22f);}));}});}var _230=_20c("dijit.layout.AccordionContainer",_219,{duration:_213.defaultDuration,buttonWidget:_21c,baseClass:"dijitAccordionContainer",buildRendering:function(){this.inherited(arguments);this.domNode.style.overflow="hidden";this.domNode.setAttribute("role","tablist");},startup:function(){if(this._started){return;}this.inherited(arguments);if(this.selectedChildWidget){this.selectedChildWidget._wrapperWidget.set("selected",true);}},layout:function(){var _231=this.selectedChildWidget;if(!_231){return;}var _232=_231._wrapperWidget.domNode,_233=_210.getMarginExtents(_232),_234=_210.getPadBorderExtents(_232),_235=_231._wrapperWidget.containerNode,_236=_210.getMarginExtents(_235),_237=_210.getPadBorderExtents(_235),_238=this._contentBox;var _239=0;_20b.forEach(this.getChildren(),function(_23a){if(_23a!=_231){_239+=_210.getMarginSize(_23a._wrapperWidget.domNode).h;}});this._verticalSpace=_238.h-_239-_233.h-_234.h-_236.h-_237.h-_231._buttonWidget.getTitleHeight();this._containerContentBox={h:this._verticalSpace,w:this._contentBox.w-_233.w-_234.w-_236.w-_237.w};if(_231){_231.resize(this._containerContentBox);}},_setupChild:function(_23b){_23b._wrapperWidget=_222({contentWidget:_23b,buttonWidget:this.buttonWidget,id:_23b.id+"_wrapper",dir:_23b.dir,lang:_23b.lang,textDir:_23b.textDir||this.textDir,parent:this});this.inherited(arguments);_20f.place(_23b.domNode,_23b._wrapper,"replace");},removeChild:function(_23c){if(_23c._wrapperWidget){_20f.place(_23c.domNode,_23c._wrapperWidget.domNode,"after");_23c._wrapperWidget.destroy();delete _23c._wrapperWidget;}_20e.remove(_23c.domNode,"dijitHidden");this.inherited(arguments);},getChildren:function(){return _20b.map(this.inherited(arguments),function(_23d){return _23d.declaredClass=="dijit.layout._AccordionInnerContainer"?_23d.contentWidget:_23d;},this);},destroy:function(){if(this._animation){this._animation.stop();}_20b.forEach(this.getChildren(),function(_23e){if(_23e._wrapperWidget){_23e._wrapperWidget.destroy();}else{_23e.destroyRecursive();}});this.inherited(arguments);},_showChild:function(_23f){_23f._wrapperWidget.containerNode.style.display="block";return this.inherited(arguments);},_hideChild:function(_240){_240._wrapperWidget.containerNode.style.display="none";this.inherited(arguments);},_transition:function(_241,_242,_243){if(has("ie")<8){_243=false;}if(this._animation){this._animation.stop(true);delete this._animation;}var self=this;if(_241){_241._wrapperWidget.set("selected",true);var d=this._showChild(_241);if(this.doLayout&&_241.resize){_241.resize(this._containerContentBox);}}if(_242){_242._wrapperWidget.set("selected",false);if(!_243){this._hideChild(_242);}}if(_243){var _244=_241._wrapperWidget.containerNode,_245=_242._wrapperWidget.containerNode;var _246=_241._wrapperWidget.containerNode,_247=_210.getMarginExtents(_246),_248=_210.getPadBorderExtents(_246),_249=_247.h+_248.h;_245.style.height=(self._verticalSpace-_249)+"px";this._animation=new fx.Animation({node:_244,duration:this.duration,curve:[1,this._verticalSpace-_249-1],onAnimate:function(_24a){_24a=Math.floor(_24a);_244.style.height=_24a+"px";_245.style.height=(self._verticalSpace-_249-_24a)+"px";},onEnd:function(){delete self._animation;_244.style.height="auto";_242._wrapperWidget.containerNode.style.display="none";_245.style.height="auto";self._hideChild(_242);}});this._animation.onStop=this._animation.onEnd;this._animation.play();}return d;},_onKeyDown:function(e,_24b){if(this.disabled||e.altKey||!(_24b||e.ctrlKey)){return;}var c=e.keyCode;if((_24b&&(c==keys.LEFT_ARROW||c==keys.UP_ARROW))||(e.ctrlKey&&c==keys.PAGE_UP)){this._adjacent(false)._buttonWidget._onTitleClick();e.stopPropagation();e.preventDefault();}else{if((_24b&&(c==keys.RIGHT_ARROW||c==keys.DOWN_ARROW))||(e.ctrlKey&&(c==keys.PAGE_DOWN||c==keys.TAB))){this._adjacent(true)._buttonWidget._onTitleClick();e.stopPropagation();e.preventDefault();}}}});if(has("dijit-legacy-requires")){_214(0,function(){var _24c=["dijit/layout/AccordionPane"];_20a(_24c);});}_230._InnerContainer=_222;_230._Button=_21c;return _230;});},"esriviewer/portal/PortalSearcher":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","../base/ConfigurationEntryMixin"],function(_24d,_24e,lang,_24f){return _24d([_24f],{_defaultMaxResults:50,_defaultSortField:"avgRating",constructor:function(){this.initListeners();},initListeners:function(){_24e.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_WEBMAPS,lang.hitch(this,this.searchWebmaps));_24e.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_GEOCODE_SERVICES,lang.hitch(this,this.searchGeocodeServices));_24e.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_IMAGE_SERVICES,lang.hitch(this,this.searchImageServices));_24e.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_FEATURE_SERVICE_LAYERS,lang.hitch(this,this.searchFeatureServiceLayers));_24e.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_FEATURE_SERVICES,lang.hitch(this,this.searchFeatureServices));_24e.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_MAP_SERVICES,lang.hitch(this,this.searchMapServices));},searchGeocodeServices:function(_250,_251,_252,_253,_254,_255){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.GEOCODE_SERVICE,_250,_251,_252,_253,_254,_255);},searchFeatureServiceLayers:function(_256,_257,_258,_259,_25a,_25b){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.FEATURE_SERVICE_LAYER,_256,_257,_258,_259,_25a,_25b);},searchImageServices:function(_25c,_25d,_25e,_25f,_260,_261){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.IMAGE_SERVICE,_25c,_25d,_25e,_25f,_260,_261);},searchFeatureServices:function(_262,_263,_264,_265,_266,_267){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.FEATURE_SERVICE,_262,_263,_264,_265,_266,_267);},searchMapServices:function(_268,_269,_26a,_26b,_26c,_26d){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.MAP_SERVICE,_268,_269,_26a,_26b,_26c,_26d);},searchWebmaps:function(_26e,_26f,_270,_271,_272,_273){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.WEB_MAP,_26e,_26f,_270,_271,_272,_273);},_performSearch:function(_274,_275,_276,_277,_278,_279,_27a){if(_279==null||!lang.isFunction(_279)){return;}if(_276==null){_276=this._defaultMaxResults;}if(_277==null||_277==""){_277=this._defaultSortField;}if(_278==null){_278=0;}var _27b={};_27b.q=_275+this._getItemTypeAppend(_274);_27b.sortField=_277;_27b.start=_278;this._search(_27b,_279,_27a);},_getItemTypeAppend:function(_27c){if(_27c==null){return "";}return " AND (type: \""+_27c+"\") AND NOT (type: \""+VIEWER_GLOBALS.AGS_PORTAL_TYPES.MAPPING_APPLICATION+"\")";},_search:function(_27d,_27e,_27f){var _280=null;_24e.publish(VIEWER_GLOBALS.EVENTS.PORTAL.GET_INSTANCE,function(_281){_280=_281;});if(_280){var _282=_27e;_280.queryItems(_27d).then(function(_283){_282(_283);});}else{if(_27f!=null&&lang.isFunction(_27f)){_27f("Portal is not configured");}}}});});},"esriviewer/manager/ViewerManagerWindow":function(){define(["dojo/_base/declare","dojo/on","dojo/dom-style","dojo/_base/window","dojo/dom-construct","./base/ViewerManager","../ui/identify/IdentifyWindowWidget","../ui/measure/MeasureWindow","../ui/editor/FeatureServiceEditorWindowWidget","../ui/time/TimeSliderWindow","../ui/transparency/LayersTransparencyWindowWidget","../ui/geocode/ReverseGeocodeWindowWidget","../ui/query/QueryBuilderWindowWidget","../ui/draw/DrawWindow","../ui/logging/LoggingWidgetWindow","../ui/layers/LayersWindowWidget","../ui/legend/MapLegendWindow","../ui/zoomto/ZoomToWidgetWindow","../ui/configure/ConfigureViewerWindow","../ui/weather/conditions/WeatherWidgetWindow","../ui/weather/reflectivity/ReflectivityWidgetWindow","../ui/portal/PortalPublisherWindowWidget","../ui/plotting/PlottingWidgetWindow","../ui/print/PrintWidgetWindow","../ui/pointupload/PointUploadWindow","../ui/social/SocialMediaWidgetWindow"],function(_284,on,_285,_286,_287,_288,_289,_28a,_28b,_28c,_28d,_28e,_28f,_290,_291,_292,_293,_294,_295,_296,_297,_298,_299,_29a,_29b,_29c){return _284([_288],{createPlottingWidget:function(){new _299();},createSocialMediaWidget:function(){new _29c();},createReflectivityWidget:function(){new _297();},createWeatherWidget:function(){new _296();},createIdentifyWidget:function(){new _289();},createMeasureWidget:function(){new _28a();},createFeatureEditorWidget:function(){new _28b();},createTimeSliderWidget:function(){new _28c();},createLayersTransparencyWidget:function(){new _28d();},createConfigureViewerWidget:function(){new _295();},createReverseGeocodeWidget:function(){new _28e();},createQueryBuilderWidget:function(){new _28f();},createDrawWidget:function(){new _290();},createLoggingWidget:function(){new _291();},createLayersWidget:function(){new _292();},createLegendWidget:function(){new _293();},createZoomToWidget:function(){new _294();},createPortalPublisherWidget:function(){new _298();},createPrintWidget:function(){new _29a();},createPointUploadWidget:function(){new _29b();},_createHeaderLogo:function(){if(this.viewerConfig.header.small===true){var _29d=_287.create("span",{className:"smallWindowHeaderContainer"});var _29e=_287.create("img",{src:this.viewerConfig.header.headerImage});var _29f=_287.create("span",{innerHTML:this.viewerConfig.header.headerText});_287.place(_29e,_29d);_287.place(_29f,_29d);_287.place(_29d,_286.body());if(this.viewerConfig.header.contact&&this.viewerConfig.header.contact.url){_285.set(_29d,"cursor","pointer");var _2a0=this.viewerConfig.header.contact.url;on(_29d,"click",function(){window.open(_2a0);});}}else{this.inherited(arguments);}}});});},"esriviewer/ui/throbber/ThrobberWidget":function(){define(["dojo/_base/declare","dojo/text!./template/ThrobberTemplate.html","dojo/topic","../base/UITemplatedWidget","dojo/_base/lang","dojo/_base/window","dojo/request/notify"],function(_2a1,_2a2,_2a3,_2a4,lang,_2a5,_2a6){return _2a1([_2a4],{blockHideEnabled:false,defaultPositioning:{x:10,y:10,alignX:"left",alignY:"bottom"},positioningParamName:"throbber",isPositionedByConfig:true,templateString:_2a2,postCreate:function(){this.inherited(arguments);_2a6("start",lang.hitch(this,this.show));_2a6("done",lang.hitch(this,this.hide));},initListeners:function(){this.inherited(arguments);_2a3.subscribe(VIEWER_GLOBALS.EVENTS.THROBBER.SHOW,lang.hitch(this,this.show));_2a3.subscribe(VIEWER_GLOBALS.EVENTS.THROBBER.HIDE,lang.hitch(this,this.hide));_2a3.subscribe(VIEWER_GLOBALS.EVENTS.THROBBER.BLOCK_HIDE,lang.hitch(this,this._blockHide));_2a3.subscribe(VIEWER_GLOBALS.EVENTS.THROBBER.RELEASE_HIDE_BLOCK,lang.hitch(this,this._releaseHideBlock));},_blockHide:function(){this.blockHideEnabled=true;},_releaseHideBlock:function(){this.blockHideEnabled=false;this.hide();},hide:function(){if(!this.blockHideEnabled){this.inherited(arguments);}}});});},"esriviewer/ui/draw/configure/geometry/ConfigureTextWidget":function(){define(["dojo/_base/declare","dojo/text!./template/ConfigureTextTemplate.html","dojo/topic","dojo/_base/lang","./model/ConfigureTextViewModel","./BaseGeometryConfigurationWidget","esri/symbols/Font","esri/symbols/TextSymbol"],function(_2a7,_2a8,_2a9,lang,_2aa,_2ab,Font,_2ac){return _2a7([_2ab],{templateString:_2a8,postCreate:function(){this.inherited(arguments);this.viewModel=new _2aa();this.viewModel.selectedAngle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedTextAlign.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedTextSize.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedTextWeight.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedFontFace.subscribe(lang.hitch(this,this.processChange));ko.applyBindings(this.viewModel,this.domNode);},processChange:function(){this.onChange(this.getSymbol());},getSymbol:function(){var font=new Font(this.viewModel.selectedTextSize());font.setWeight(this.viewModel.selectedTextWeight());font.setStyle(this.viewModel.selectedFontFace());return new _2ac("").setColor(this.getColor()).setAlign(this.viewModel.selectedTextAlign()).setAngle(parseInt(this.viewModel.selectedAngle(),10)).setFont(font);}});});},"esriviewer/ui/layers/LayersWidget":function(){define(["dojo/_base/declare","dojo/text!./template/LayersWidgetTemplate.html","dojo/topic","dojo/_base/connect","dojo/_base/lang","dojo/on","dojo/dom-style","dojo/dom-class","dojo/dom-construct","../base/UITemplatedWidget","../tooltip/ConfirmTooltip","./base/LayersLocalStorageMixin","./model/LayersWidgetViewModel","./LayersTocWidget","./base/UserPersistedLayersListWidget","dijit/form/TextBox","dijit/form/Select","dijit/form/Button"],function(_2ad,_2ae,_2af,con,lang,on,_2b0,_2b1,_2b2,_2b3,_2b4,_2b5,_2b6,_2b7,_2b8,_2b9,_2ba,_2bb){return _2ad([_2b3,_2b5],{firstAddLayerDisplay:true,errorMessageDelay:5000,successMessageDelay:2000,allowAddLayers:true,templateString:_2ae,constructor:function(_2bc){lang.mixin(this,_2bc||{});this.addedLayers={};},postCreate:function(){this.inherited(arguments);this.viewModel=new _2b6();this.viewModel.showUserPersistedLayersIcon(this.localStoragePersistSupported);this.viewModel.layersListVisible.subscribe(lang.hitch(this,this.handleLayerListVisibilityChanged));this.viewModel.addlayersVisible.subscribe(lang.hitch(this,this.handleAddLayersVisibilityChanged));this.viewModel.persistedLayersVisible.subscribe(lang.hitch(this,this.handlePersistedLayersVisibilityChanged));this.viewModel.on(this.viewModel.ADD_LAYERS_VISIBLE,lang.hitch(this,this.handleAddLayersVisible));ko.applyBindings(this.viewModel,this.domNode);this.createLayersTocWidget();_2b0.set(this.domNode,"minHeight","250px");if(this.allowAddLayers){this.populateLayerTypesDropdown();}else{_2b0.set(this.layersTabContainer,"display","none");}this.manualLayerLoadedSuccessCallback=lang.hitch(this,this.handleManualLayerLoadedCallback);this.manualLayerLoadedErrCallback=lang.hitch(this,this.handleManualLayerLoadErrorCallback);if(this.localStoragePersistSupported){this.createUserPersistedLayerListWidget();}},handleLayerListVisibilityChanged:function(_2bd){this._handleContentAnimation(_2bd,this.layerTocContainer);},handleAddLayersVisibilityChanged:function(_2be){this._handleContentAnimation(_2be,this.addLayerContainer);},handlePersistedLayersVisibilityChanged:function(_2bf){this._handleContentAnimation(_2bf,this.userPersistedLayersContainer);},handleAddLayersVisible:function(){this.addLayerTextInput.set("value","");this.addLayerLabelInput.set("value","");this.addLayerTextInput.focus();},createLayersTocWidget:function(){this.layersTocWidget=new _2b7();_2b2.place(this.layersTocWidget.domNode,this.layerTocContainer);},createUserPersistedLayerListWidget:function(){if(this.userPersistedLayersListWidget==null){this.userPersistedLayersListWidget=new _2b8();this.userPersistedLayersListWidget.placeAt(this.userPersistedLayersContainer);this.userPersistedLayersListWidget.on("removeUserPersistedGraphics",lang.hitch(this,this.handleRemoveUserPersistedLayer));this.userPersistedLayersListWidget.on("addUserPersistedLayerToMap",lang.hitch(this,this.handleAddUserPersistedLayerToMap));this.userPersistedLayersListWidget.on("removeAllUserPersistedGraphics",lang.hitch(this,this.handleRemoveAllUserPersistedLayers));this.userPersistedLayersListWidget.addExistingPersistedLayerItems(this.persistedUserLayers);}},showLayerList:function(){this.viewModel.showLayersList();},handleRemoveAllUserPersistedLayers:function(){this.removeAllLayers();},handleRemoveUserPersistedLayer:function(_2c0){if(_2c0!=null&&_2c0!=""){this.deleteUserPersistedLayer(_2c0);}},handleAddUserPersistedLayerToMap:function(_2c1,_2c2){if(_2c1!=null&&_2c1!=""){this._addLayer(_2c1,_2c2);}},loadViewerConfigurationData:function(){var _2c3=null;_2af.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"layersWidget",function(_2c4){_2c3=_2c4;});if(_2c3){for(var key in _2c3){if(key==null||key.toString()==null){continue;}if(key.toString().toLowerCase()=="allowAddLayers".toLowerCase()){this.allowAddLayers=_2c3[key];}else{if(key.toString().toLowerCase()=="showWKIDInAddLayers".toLowerCase()){if(_2c3[key]==false){this.viewModel.showWKIDInAddLayers(false);}}}}}},handleManualLayerLoadedCallback:function(){_2af.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Layer Added");VIEWER_UTILS.log("Layer Added",VIEWER_GLOBALS.LOG_TYPE.INFO);},handleManualLayerLoadErrorCallback:function(msg){if(msg!=null&&lang.isString(msg)){VIEWER_UTILS.log("Could not add layer: "+msg,VIEWER_GLOBALS.LOG_TYPE.ERROR);}else{VIEWER_UTILS.log("Add Layer Failed",VIEWER_GLOBALS.LOG_TYPE.ERROR);}},initListeners:function(){this.inherited(arguments);_2af.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADDED,lang.hitch(this,this.addLayer));_2af.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVED,lang.hitch(this,this.handleLayerRemoved));},populateLayerTypesDropdown:function(){var _2c5;for(var key in VIEWER_GLOBALS.LAYER_TYPES){_2c5=VIEWER_GLOBALS.LAYER_TYPES[key];var _2c6={label:_2c5.LABEL,value:_2c5.VALUE};this.addLayerTypeSelect.addOption(_2c6);}},handleAddLayers:function(_2c7){if(_2c7!=null&&lang.isArray(_2c7)){for(var i=0;i<_2c7.length;i++){this.addLayer(_2c7[i]);}}},addLayer:function(_2c8){if(_2c8==null){return;}var _2c9=VIEWER_UTILS.getLayerUniqueId(_2c8);if(_2c9==null||this.addedLayers[_2c9]!=null){return;}this.layersTocWidget.addLayer(_2c8);this.addedLayers[_2c9]={layer:_2c8};if(_2c8.url&&this.localStoragePersistSupported){this.saveLayer(_2c8);}},saveLayer:function(_2ca){var _2cb=this.persistUserLayer(_2ca);if(_2cb&&_2cb.url){this.userPersistedLayersListWidget.addPersistedLayer(_2cb);}},handleToggleLayerVisibility:function(_2cc){if(_2cc.visible){_2cc.hide();}else{_2cc.show();}},handleZoomToLayer:function(_2cd){_2af.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,_2cd.fullExtent);},handleLayerAddUrlKeyUp:function(e){if(VIEWER_UTILS.isEnterKey(e)){this.addManualLayer();}else{var url=this.addLayerTextInput.get("value");if(url==""){return;}var _2ce=VIEWER_UTILS.getServiceTypeFromUrl(url);if(_2ce!=null){if(_2ce===VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER){this.addLayerTypeSelect.set("value",VIEWER_GLOBALS.LAYER_TYPES.IMAGE_SERVER.VALUE);}else{if(_2ce===VIEWER_GLOBALS.SERVICE_TYPES.FEATURE_SERVER){this.addLayerTypeSelect.set("value",VIEWER_GLOBALS.LAYER_TYPES.FEATURE_LAYER.VALUE);}else{if(_2ce===VIEWER_GLOBALS.SERVICE_TYPES.KML){this.addLayerTypeSelect.set("value",VIEWER_GLOBALS.LAYER_TYPES.KML.VALUE);}else{if(_2ce===VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER){var _2cf=REG_EXP_UTILS.featureLayerRegExp.test(url);if(_2cf){this.addLayerTypeSelect.set("value",VIEWER_GLOBALS.LAYER_TYPES.FEATURE_LAYER.VALUE);}else{this.addLayerTypeSelect.set("value",VIEWER_GLOBALS.LAYER_TYPES.MAP_SERVER.VALUE);}}}}}}}},addManualLayer:function(){var url=this.addLayerTextInput.get("value");if(url!=""){if(VIEWER_UTILS.endsWith(url,"/")){url=url.substring(0,url.length-1);}this._addLayer(url);}},_addLayer:function(_2d0,_2d1){var _2d2=_2d1;if(_2d2==null||_2d2==""){_2d2=this.addLayerLabelInput.get("value");}_2af.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_FROM_URL,_2d0,{isOperationalLayer:true,canRemove:true,label:_2d2},this.manualLayerLoadedSuccessCallback,this.manualLayerLoadedErrCallback);},showConfirmDeleteLayerTooltip:function(_2d3,_2d4){this.deleteLayerConfirmedCallback=lang.hitch(this,this.handleRemoveLayerFromClick,_2d3);this.showDeleteLayerTooltip(_2d4);},handleRemoveLayerFromClick:function(_2d5){_2af.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE,_2d5);},createConfirmDeleteLayerTooltip:function(){this.confirmDeleteLayerTooltip=new _2b4({confirmCallback:lang.hitch(this,this.handleConfirmedLayerDelete)});this.confirmDeleteLayerTooltip.on("hide",lang.hitch(this,function(){this.deleteLayerConfirmedCallback=null;}));},handleConfirmedLayerDelete:function(){if(lang.isFunction(this.deleteLayerConfirmedCallback)){this.deleteLayerConfirmedCallback();}this.deleteLayerConfirmedCallback=null;},showDeleteLayerTooltip:function(_2d6){if(_2d6==null){return;}if(this.confirmDeleteLayerTooltip==null){this.createConfirmDeleteLayerTooltip();}if(this.confirmDeleteLayerTooltip){this.confirmDeleteLayerTooltip.setAroundNode(_2d6);this.confirmDeleteLayerTooltip.show();}},handleLayerRemoved:function(_2d7){if(_2d7==null){return;}var _2d8=VIEWER_UTILS.getLayerUniqueId(_2d7);if(_2d8==null){return;}if(this.addedLayers[_2d8]!=null){this.layersTocWidget.removeLayer(_2d7);delete this.addedLayers[_2d8];}},hidePopups:function(){if(this.confirmDeleteLayerTooltip){this.confirmDeleteLayerTooltip.hide();}}});});},"esriviewer/loader/base/ViewerPlacementWindow":function(){define(["dojo/_base/declare","dojo/_base/window","dojo/topic","dojo/_base/lang","dojo/dom-construct","./BaseViewerPlacement"],function(_2d9,_2da,_2db,lang,_2dc,_2dd){return _2d9([_2dd],{label:"window",isAbsolutePositioned:true,isWindowless:false,initUI:function(){this.inherited(arguments);_2dc.place(this.mapDiv,_2da.body());},placeNavigationToolbar:function(_2de){if(_2de){_2de.placeAt(_2da.body());}},placeHeader:function(_2df){if(_2df){_2df.placeAt(_2da.body());}},placeViewerAccordion:function(_2e0){if(_2e0){_2e0.placeAt(_2da.body());}},placeMainToolbar:function(_2e1){if(_2e1){_2e1.placeAt(_2da.body());}},placeMainToolbarDropdown:function(_2e2){if(_2e2){_2dc.place(_2e2,_2da.body());}},placeMessagingWidget:function(_2e3){if(_2e3){_2e3.placeAt(_2da.body());}},placeThrobberWidget:function(_2e4){if(_2e4){_2e4.placeAt(_2da.body());}},placeBasemapGallery:function(_2e5){if(_2e5){_2e5.placeAt(_2da.body());}},placeMapScaleAndCoordinates:function(_2e6){if(_2e6!=null){_2dc.place(_2e6,_2da.body());}},placeCreateBookmarkWidget:function(_2e7){if(_2e7){_2e7.placeAt(_2da.body());}},placeMenuBarWidget:function(_2e8){if(_2e8){_2e8.placeAt(_2da.body());}},placeZoomToWidget:function(_2e9){if(_2e9){_2e9.placeAt(_2da.body());}}});});},"esriviewer/ui/draw/base/UserPersistedGraphicsListWidget":function(){define(["dojo/_base/declare","dojo/text!./template/UserPersistedGrahicsListingTemplate.html","dojo/topic","../../base/UITemplatedWidget","dojo/_base/lang","./model/UserPersistedGraphicsListViewModel"],function(_2ea,_2eb,_2ec,_2ed,lang,_2ee){return _2ea([_2ed],{bindingsApplied:false,templateString:_2eb,constructor:function(){this.userPersistedGraphics={};},postCreate:function(){this.inherited(arguments);this.viewModel=new _2ee();this.viewModel.on(this.viewModel.REMOVE_USER_PERSISTED_GRAPHICS,lang.hitch(this,this.handleRemoveUserPersistedGraphics));this.viewModel.on(this.viewModel.ADD_USER_PERSISTED_GRAPHICS_TO_MAP,lang.hitch(this,this.handleAddUserPersistedGraphicsToMap));},applyBindings:function(){if(!this.bindingsApplied){this.bindingsApplied=true;ko.applyBindings(this.viewModel,this.domNode);}},handleAddUserPersistedGraphicsToMap:function(_2ef){if(_2ef&&lang.isObject(_2ef)){this.onAddUserPersistedGraphicsToMap(_2ef);}},onAddUserPersistedGraphicsToMap:function(_2f0){},handleRemoveUserPersistedGraphics:function(_2f1){if(_2f1&&lang.isObject(_2f1)&&_2f1.label!=null&&_2f1.label!=""){this.onRemoveUserPersistedGraphics(_2f1.label);}},onRemoveUserPersistedGraphics:function(_2f2){},addExistingPersistedGraphicsItems:function(_2f3){for(var key in _2f3){this.viewModel.addedUserPersistedGraphics.push(_2f3[key]);}this.viewModel.sort();this.applyBindings();},addUserPersistedGraphics:function(_2f4){this.viewModel.addedUserPersistedGraphics.push(_2f4);this.viewModel.sort();}});});},"esriviewer/manager/base/ViewerManager":function(){define(["dojo/_base/declare","dojox/storage","dojo/topic","dojo/_base/window","dojo/_base/lang","./IdentityManagerMixin","../../base/Configurable","../../base/LocationServiceSupport","../../base/DataLoaderSupport","../../ui/tools/ViewerDefaultTools","../../map/MapManager","../../ui/toolbar/ActionsToolbarWidget","../../ui/bookmark/BookmarkController","../../portal/PortalViewerManagerSupportMixin","../../map/geometry/GeometryServiceController","../../ui/accordion/ToolsAccordion","./ViewerManagerUI","esri/SpatialReference","esri/geometry/Extent","./WebMapTemplateConfigurationUtil","esri/urlUtils","esri/arcgis/utils","../../map/base/LayerQueryTools"],function(_2f5,_2f6,_2f7,_2f8,lang,_2f9,_2fa,_2fb,_2fc,_2fd,_2fe,_2ff,_300,_301,_302,_303,_304,_305,_306,_307,_308,_309,_30a){return _2f5([_301,_2fa,_2fb,_2fc,_304,_2f9],{portalSharingRestUrl:"/sharing/rest",portalContentUrl:"/sharing/rest/content/items",baseConfigurationLoaded:false,forceHideCoreTimeSlider:false,useProxyForConfig:false,useProxyForPositionConfig:false,allowAccordionMove:true,allowAccordionCollapse:true,forceHideAccordionTab:false,configUrl:"config/baseConfig.json",viewerPositioningConfigUrl:"config/viewerPositioning.json",constructor:function(_30b){lang.mixin(this,_30b||{});this._initializeStorageProvider();var _30c=_308.urlToObject(document.location.href);this.appId=_30c.query?_30c.query.appid:null;this.processConfig();},processConfig:function(){if(this.appId!=null){var _30d=new _307();_30d.loadConfiguration(this.appId).then(lang.hitch(this,this._handleWebMapTemplateConfigurationLoaded));}else{if(this.useProxyForConfig){this.loadProxiedConfig();}else{this.loadConfig();}}},_handleWebMapTemplateConfigurationLoaded:function(_30e){this.handleConfigLoaded(_30e);},handleConfigLoaded:function(_30f){VIEWER_UTILS.debug("Configuration Loaded");this.viewerConfig=_30f;if(_30f.windowTitle){_2f8.doc.title=_30f.windowTitle;}else{_2f8.doc.title="JavaScript Map Viewer";}if(this.viewerConfig&&this.viewerConfig.portal!=null&&lang.isObject(this.viewerConfig.portal)&&this.viewerConfig.portal.url){var _310=this.viewerConfig.portal.url;var _311=_310.toLowerCase();if(_311.indexOf("http://")<0&&_311.indexOf("https://")<0){_310="http://"+_310;}_309.arcgisUrl=VIEWER_UTILS.joinUrl(_310,this.portalContentUrl);}if(this.useProxyForPositionConfig){this.loadProxiedJson(this.viewerPositioningConfigUrl,lang.hitch(this,this.handleWindowPositionsConfigLoaded),lang.hitch(this,this.handleWindowPositionsConfigLoadFailed));}else{this.loadJson(this.viewerPositioningConfigUrl,lang.hitch(this,this.handleWindowPositionsConfigLoaded),lang.hitch(this,this.handleWindowPositionsConfigLoadFailed));}},startupViewer:function(){this._initListeners();this.initListeners();this._createViewerManager();this.createLayerQueryTools();},createLayerQueryTools:function(){this.layerQueryTools=new _30a();},initListeners:function(){},_initListeners:function(){this.inherited(arguments);_2f7.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LOADED,lang.hitch(this,this.handleMapLoaded));_2f7.subscribe(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET,lang.hitch(this,this.handleGetConfiguration));_2f7.subscribe(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,lang.hitch(this,this.handleGetConfigurationKey));},handleGetConfiguration:function(_312){if(_312&&lang.isFunction(_312)){_312(this.viewerConfig);}},handleGetConfigurationKey:function(key,_313){if(key!=null&&key!=""&&_313&&lang.isFunction(_313)){_313(this.viewerConfig[key]);}},handleMapLoaded:function(map){this.map=map;PROJECTION_UTILS.setMapSpatialReference(map.spatialReference);this.loadControllers();this.loadUI();},loadUI:function(){this.inherited(arguments);},_initializePortalSupport:function(){return this.inherited(arguments);},loadControllers:function(){if(this.viewerConfig.geometryServiceUrl!=null&&this.viewerConfig.geometryServiceUrl){this.geometryServiceController=new _302();}else{_2f7.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.EXISTS,lang.hitch(this,function(_314){if(_314!=null&&lang.isFunction(_314)){_314(false);}}));}if(this.viewerConfig.locators!=null&&lang.isArray(this.viewerConfig.locators)){for(var i=0;i<this.viewerConfig.locators.length;i++){this.addLocator(this.viewerConfig.locators[i].url,this.viewerConfig.locators[i].label);}}this._createBookmarkController();},handleWindowPositionsConfigLoaded:function(_315){VIEWER_GLOBALS.windowPositioning=_315;this.createMessagingAndLogging();if(!this.baseConfigurationLoaded){this.handleBaseConfigurationsLoaded();}},handleWindowPositionsConfigLoadFailed:function(){VIEWER_GLOBALS.windowPositioning={};this.createMessagingAndLogging();if(!this.baseConfigurationLoaded){this.handleBaseConfigurationsLoaded();}},createMessagingAndLogging:function(){this._createLoggingWidget();this._createMessagingWidget();},handleBaseConfigurationsLoaded:function(){this.baseConfigurationLoaded=true;this.startupViewer();},_createViewerManager:function(){this._createLayersWidget();if(this._initializePortalSupport!=null&&lang.isFunction(this._initializePortalSupport)){_2f7.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.INITIALIZED,lang.hitch(this,function(){this.mapManager=new _2fe({webMapItem:this.viewerConfig.webMapItem});}));var _316=this._initializePortalSupport();if(!_316){this.mapManager=new _2fe();}}else{this.mapManager=new _2fe();}},_createLayersWidget:function(){this.createLayersWidget();},createLayersWidget:function(){},_createBookmarkController:function(){this.bookmarkController=new _300();},_loadBookmarks:function(){if(lang.isObject(this.viewerConfig.bookmarks)&&this.viewerConfig.bookmarks.url!=null){var _317=lang.hitch(this,function(_318){this._setServerBookmarks(_318);});this.loadJson(this.viewerConfig.bookmarks.url,_317);}this.mainToolbar.loadCookieBookmarks();},_setServerBookmarks:function(_319){this.mainToolbar.addStaticBookmarks(_319);},_initializeStorageProvider:function(){var _31a=dojox.storage.manager.getProvider();_31a.initialize();},processNavigationToolbarAddons:function(){},createViewerDefaultTools:function(){this.viewerDefaultTools=new _2fd();this.createAddonTools();this.viewerDefaultTools.createConfigurationMenuItem();},_createViewerAccordion:function(){if(this.viewerConfig.toolsAccordion.create==null||this.viewerConfig.toolsAccordion.create!=false){_2f7.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.LOAD_DEFAULT_TOOLS,lang.hitch(this,this.createDefaultAccordionTools));this.viewerAccordion=new _303({allowCollapse:this.allowAccordionCollapse,movable:this.allowAccordionMove});_2f7.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.VIEWER_ACCORDION,this.viewerAccordion);}},_createViewerMainToolbar:function(){this.mainToolbar=new _2ff();_2f7.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAIN_TOOLBAR,this.mainToolbar);if(lang.isObject(this.viewerConfig.map)){this.mainToolbar.setBasemaps(this.viewerConfig.map.basemaps);}},createDefaultAccordionTools:function(){},handleToggleAccordion:function(){this.viewerAccordion.toggle();},createAddonTools:function(){}});});},"esriviewer/map/base/MapLayersTools":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/dom-construct","esri/layers/OpenStreetMapLayer","esri/layers/FeatureLayer","esri/layers/GraphicsLayer","esri/layers/ArcGISImageServiceLayer","esri/layers/KMLLayer","esri/layers/WMSLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/layers/ArcGISDynamicMapServiceLayer"],function(_31b,_31c,lang,_31d,_31e,_31f,_320,_321,_322,_323,_324,_325){return _31b([],{labelServicesVisible:false,constructor:function(_326){lang.mixin(this,_326);this.loadViewerConfigurationData();this.currrentBasemapKey=null;this.labelServices={};this.timeEnabledLayers=[];this.operationalLayers={};this.graphicsLayers={};this.initListeners();},loadViewerConfigurationData:function(){if(this.mapConfiguration==null){var _327;_31c.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_328){_327=_328;});if(_327){this.mapConfiguration=_327;}}},initListeners:function(){_31c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.REMOVE,lang.hitch(this,this.handleRemoveBasemap));_31c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_GRAPHICS_LAYER,lang.hitch(this,this.handleAddGraphicsLayer));_31c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.ADD,lang.hitch(this,this.handleAddBasemap));_31c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.SET,lang.hitch(this,this.changeBaseMaps));_31c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GET_CURRENT_URL,lang.hitch(this,this.handleGetCurrentBasemapUrl));_31c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GET_CURRENT,lang.hitch(this,this.handleGetCurrentBasemap));_31c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.SHOW,lang.hitch(this,this.showLabelServices));_31c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.HIDE,lang.hitch(this,this.hideLabelServices));_31c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.SERVICE_EXISTS,lang.hitch(this,this.handleLabelServiceExists));_31c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.TIME.GET_TIME_ENABLED_SERVICES,lang.hitch(this,this.handleGetTimeEnabledLayers));_31c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.OPERATIONAL.GET,lang.hitch(this,this.handleGetOperationalLayers));_31c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_FROM_URL,lang.hitch(this,this.handleAddLayerFromUrl));_31c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD,lang.hitch(this,this.handleAddLayer));_31c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_EXTERNAL_MANAGED_LAYER,lang.hitch(this,this.handleAddExternalManagedLayer));_31c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE_EXTERNAL_MANAGED_LAYER,lang.hitch(this,this.handleRemoveExternalManagedLayer));_31c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.GET_FEATURE_LAYER_IF_EXISTS,lang.hitch(this,this.handleGetFeatureLayerIfExists));_31c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE,lang.hitch(this,this.handleRemoveLayer));_31c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_REFERENCE_LAYER,lang.hitch(this,this.handleAddReferenceLayerRequest));_31c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE_REFERENCE_LAYER,lang.hitch(this,this.handleRemoveReferenceLayerRequest));_31c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.MOVE_LAYER_TO_TOP,lang.hitch(this,this.handleMoveLayerToTop));_31c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.MAKE_VISIBLE,lang.hitch(this,this.handleMakeLayerVisible));_31c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.MAKE_INVISIBLE,lang.hitch(this,this.handleMakeLayerInvisible));this.map.on("layer-add",lang.hitch(this,this._handleLayerAdded));},handleMakeLayerVisible:function(_329){if(_329!=null){_329.show();}},handleMakeLayerInvisible:function(_32a){if(_32a!=null){_32a.hide();}},handleMoveLayerToTop:function(_32b){if(_32b){this.map.reorderLayer(_32b,this.map.layerIds.length);}},_handleLayerAdded:function(evt){if(evt==null||evt.layer==null){return;}var _32c=evt.layer;if(_32c!=null&&_32c.isReferenceLayer==null||!_32c.isReferenceLayer){if(_32c.timeInfo!=null){this.timeEnabledLayers.push(_32c);VIEWER_UTILS.log("Found time enabled layer",VIEWER_GLOBALS.LOG_TYPE.INFO);_31c.publish(VIEWER_GLOBALS.EVENTS.MAP.TIME.TIME_LAYER_FOUND,_32c);}}if(_32c.isOperationalLayer!=null&&_32c.isOperationalLayer===true){VIEWER_UTILS.log("Added operational layer",VIEWER_GLOBALS.LOG_TYPE.INFO);_31c.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADDED,_32c);}},handleGetFeatureLayerIfExists:function(_32d,_32e){if(_32d==null||_32d==""||_32e==null||!lang.isFunction(_32e)){return;}var _32f=_32d.toLowerCase();_32e(this.operationalLayers[_32f]);},handleAddGraphicsLayer:function(_330){if(_330!=null){this.map.addLayer(_330);var uuid=VIEWER_UTILS.generateUUID();_330.id=uuid;this.graphicsLayers[uuid]=_330;}},handleAddBasemap:function(_331,_332,_333){var id=_331.toLowerCase();if(this.basemaps[id]!=null){_333("Basemap Already Exists");}var _334=lang.hitch(this,this._handleBaseMapServiceDescriptionLoaded,_331,_332,_333);VIEWER_UTILS.getServiceDescription(_331,_334);},_handleBaseMapServiceDescriptionLoaded:function(_335,_336,_337,_338){if(this.isServiceTiledAndInMapSR(_338)){var id=_335.toLowerCase();var _339={id:id,label:REG_EXP_UTILS.getServiceNameFromUrl(_335),url:_335};this.basemaps[id]=_339;VIEWER_UTILS.debug("Added Basemap: "+id);_31c.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.ADDED,_339,id);if(_336!=null&&lang.isFunction(_336)){_336(_339);}}else{if(_337!=null&&lang.isFunction(_337)){_337("Could not add basemap. Is the service cached and in the map spatial reference ("+this.map.spatialReference.wkid+")?");}}},handleRemoveLayer:function(_33a){if(_33a==null){return;}var _33b=VIEWER_UTILS.getLayerUniqueId(_33a);if(_33b!=null){if(this.operationalLayers[_33b]){delete this.operationalLayers[_33b];}}if(_33a instanceof _320){if(this.graphicsLayers[_33a.id]!=null){delete this.graphicsLayers[_33a.id];}}this.map.removeLayer(_33a);VIEWER_UTILS.debug("Removed Layer: "+_33a.name);_31c.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVED,_33a);},handleGetOperationalLayers:function(_33c){if(_33c!=null&&lang.isFunction(_33c)){var _33d=[];for(var key in this.operationalLayers){_33d.push(this.operationalLayers[key]);}_33c(_33d);}},handleGetTimeEnabledLayers:function(_33e){if(_33e!=null&&lang.isFunction(_33e)){_33e(this.timeEnabledLayers);}},handleRemoveExternalManagedLayer:function(_33f){this.map.removeLayer(_33f);},handleAddExternalManagedLayer:function(_340){this.map.addLayer(_340);},handleAddLayer:function(_341,_342,_343,_344){if(_342&&_342.isOperationalLayer!=false){var _345=VIEWER_UTILS.getLayerUniqueId(_341);if(_345!=null){if(this.operationalLayers[_345]!=null){return;}}this.operationalLayers[_345]=_341;_341.isOperationalLayer=true;}else{_341.isOperationalLayer=false;}_341.canRemove=_342!=null&&_342.canRemove!=false;this.map.addLayer(_341);if(_343!=null&&lang.isFunction(_343)){_341.on("load",_343);}if(_344!=null&&lang.isFunction(_344)){var _346=function(){_344(_341);};_341.on("error",lang.hitch(this,_346));}VIEWER_UTILS.debug("Added Layer: "+_345);},handleAddLayerFromUrl:function(_347,_348,_349,_34a){var _34b=VIEWER_UTILS.getLayerUniqueId(_347);if(this.operationalLayers[_34b]!=null){if(_34a!=null&&lang.isFunction(_34a)){_34a("Layer has already been added to the map");}else{_31c.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Layer has already been added to the map");}return;}var _34c=null;var type=VIEWER_UTILS.getServiceTypeFromUrl(_347);if(type){if(type==VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER){if(REG_EXP_UTILS.isFeatureLayer(_347)){_34c=new _31f(_347,lang.mixin({mode:_31f.MODE_ONDEMAND},_348||{}));}else{this._handleAddMapServiceLayer(_347,_348,_349,_34a);return;}}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.KML){_34c=new _322(_347);}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER){_34c=new _321(_347);}else{if(type===VIEWER_GLOBALS.SERVICE_TYPES.FEATURE_SERVER){_34c=new _31f(_347,lang.mixin({mode:_31f.MODE_ONDEMAND},_348||{}));}}}}}else{if(_347.indexOf("/wms/")>-1){_34c=new _323(_347,_348);}}if(_34c){_34c.canRemove=_348!=null&&_348.canRemove!=false;_34c.isOperationalLayer=_348!=null&&_348.isOperationalLayer!=null&&_348.isOperationalLayer!=false;_34c.layerAliasName=(_348&&_348.label)?_348.label:REG_EXP_UTILS.getServiceNameFromUrl(_347);if(_349!=null&&lang.isFunction(_349)){_34c.on("load",_349);}if(_34a!=null&&lang.isFunction(_34a)){_34c.on("error",_34a);}var _34d=this.operationalLayers;_34c.on("load",function(){_34d[_34b]=_34c;});VIEWER_UTILS.debug("Added Layer from URL: "+_347);this.map.addLayer(_34c);}else{if(lang.isFunction(_34a)){_34a("Could Not Add Layer");}}},_handleAddMapServiceLayer:function(_34e,_34f,_350,_351){var _352=lang.hitch(this,lang.hitch(this,this._handleAddMapServiceServiceDescriptionLoaded,_34e,_34f,_350,_351));VIEWER_UTILS.getServiceDescription(_34e,_352,_351);},_handleAddMapServiceServiceDescriptionLoaded:function(_353,_354,_355,_356,_357){var _358;if(_357!=null&&lang.isObject(_357)){if(this.isServiceTiledAndInMapSR(_357)){_358=new _324(_353);}else{_358=new _325(_353);}_358.isOperationalLayer=_354!=null&&_354.isOperationalLayer!=null&&_354.isOperationalLayer!=false;var _359=this.operationalLayers;_358.on("load",function(){_359[_358.url.toLowerCase()]=_358;});_358.serviceDescription=_357;}if(_358!=null){_358.name=REG_EXP_UTILS.getServiceNameFromUrl(_353);if(_354!=null&&_354.canRemove!=null){_358.canRemove=true;}if(_355!=null&&lang.isFunction(_355)){_358.on("load",_355);}if(_356!=null&&lang.isFunction(_356)){_358.on("error",_356);}VIEWER_UTILS.debug("Added Layer: "+_358.url);this.map.addLayer(_358);}},isServiceTiledAndInMapSR:function(_35a){if(_35a!=null&&lang.isObject(_35a)){return _35a.tileInfo!=null&&_35a.spatialReference!=null&&_35a.spatialReference.wkid==this.map.spatialReference.wkid;}return false;},handleLabelServiceExists:function(_35b){if(_35b!=null&&lang.isFunction(_35b)){var _35c=false;for(var key in this.labelServices){_35c=true;break;}_35b(_35c);}},handleRemoveBasemap:function(id){var _35d=this.basemaps[id];if(this.basemaps[id]!=null){if(this.currrentBasemapKey!=null&&this.currrentBasemapKey===id){this.map.removeLayer(this.currentBasemap);for(var key in this.basemaps){this.changeBaseMaps(key);break;}}delete this.basemaps[id];VIEWER_UTILS.debug("Removed Basemap: "+id);_31c.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.REMOVED,id);}},changeBaseMaps:function(key){var _35e=this.basemaps[key];if(_35e){if(this.currrentBasemapKey!=null&&this.currrentBasemapKey===key){return;}if(this.currentBasemap!=null){this.map.removeLayer(this.currentBasemap);}if(_35e.isOpenStreetMap==null||_35e.isOpenStreetMap==false){this.currentBasemap=new _324(_35e.url);}else{this.currentBasemap=new _31e();}this.map.addLayer(this.currentBasemap,0);VIEWER_UTILS.debug("Changed Basemap: "+key);this.currrentBasemapKey=key;}},handleGetCurrentBasemapUrl:function(_35f){if(_35f!=null&&lang.isFunction(_35f)){if(this.mapConfiguration.useBasemapGallery==null||this.mapConfiguration.useBasemapGallery!=true){_35f(this.basemaps[this.currrentBasemapKey].url);return;}else{var _360;_31c.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.GET,function(_361){_360=_361;});if(_360){var _362=_360.getSelected();if(_362==null){if(this.webMapItem&&this.webMapItem.itemData&&this.webMapItem.itemData.baseMap&&this.webMapItem.itemData.baseMap.baseMapLayers&&this.webMapItem.itemData.baseMap.baseMapLayers&&lang.isArray(this.webMapItem.itemData.baseMap.baseMapLayers)&&this.webMapItem.itemData.baseMap.baseMapLayers.length>0){_35f(this.webMapItem.itemData.baseMap.baseMapLayers[0].url);return;}}else{if(_362&&_362.layers&&lang.isArray(_362.layers)&&_362.layers.length>0){_35f(_362.layers[0].url);return;}}}}_35f(null);}},handleGetCurrentBasemap:function(_363){if(_363!=null&&lang.isFunction(_363)){if(this.mapConfiguration.useBasemapGallery==null||this.mapConfiguration.useBasemapGallery!=true){_363(this.currrentBasemapKey);return;}else{var _364;_31c.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.GET,function(_365){_364=_365;});if(_364){var _366=_364.getSelected();if(_366==null){if(this.webMapItem&&this.webMapItem.itemData&&this.webMapItem.itemData.baseMap&&this.webMapItem.itemData.baseMap.baseMapLayers&&this.webMapItem.itemData.baseMap.baseMapLayers&&lang.isArray(this.webMapItem.itemData.baseMap.baseMapLayers)&&this.webMapItem.itemData.baseMap.baseMapLayers.length>0){_363(new _324(this.webMapItem.itemData.baseMap.baseMapLayers[0].url));return;}}else{_363(_366);return;}}}}_363(null);},showLabelServices:function(){var _367;for(var key in this.labelServices){_367=this.labelServices[key];_367.show();this.handleMoveLayerToTop(_367);}VIEWER_UTILS.debug("Displayed Label Services");this.labelServicesVisible=true;},hideLabelServices:function(){for(var key in this.labelServices){this.labelServices[key].hide();}VIEWER_UTILS.debug("Hid Label Services");this.labelServicesVisible=false;},handleAddReferenceLayerRequest:function(_368,_369,_36a){if(_368==null||_368.url==null||_368.url==""){if(_36a!=null&&lang.isFunction(_36a)){_36a("Invalid Reference Layer");}}var id=VIEWER_UTILS.getLayerUniqueId(_368);if(this.labelServices[id]!=null){if(_36a!=null&&lang.isFunction(_36a)){_36a("Reference Layer Already Exists");}}var _36b=this._addReferenceLayer(_368);if(_36b!=null){if(_369!=null&&lang.isFunction(_369)){_369(_36b);}}else{if(_36a!=null&&lang.isFunction(_36a)){_36a("Could not add reference layer");}}},_addReferenceLayers:function(){if(this.mapConfiguration.referenceLayers!=null&&lang.isArray(this.mapConfiguration.referenceLayers)){var _36c;for(var i=0;i<this.mapConfiguration.referenceLayers.length;i++){_36c=this.mapConfiguration.referenceLayers[i];this._addReferenceLayer(_36c);}}},_addReferenceLayer:function(_36d){var _36e=this._getMapLayerFromLayerObject(_36d);if(_36e!=null){if(!this.labelServicesVisible){_36e.hide();}else{_36e.show();}var id=VIEWER_UTILS.getLayerUniqueId(_36e);if(id==null){return;}this.labelServices[id]=_36e;_36e.isReferenceLayer=true;this.map.addLayer(_36e);VIEWER_UTILS.log("Added Reference Layer: "+_36e.url,VIEWER_GLOBALS.LOG_TYPE.INFO);_31c.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REFERENCE_LAYER_ADDED,_36e);return _36e;}return null;},handleRemoveReferenceLayerRequest:function(_36f){var id=VIEWER_UTILS.getLayerUniqueId(_36f);if(id==null){return;}if(this.labelServices[id]!=null){this.map.removeLayer(_36f);delete this.labelServices[id];var _370=false;for(var key in this.labelServices){_370=true;break;}VIEWER_UTILS.log("Removed reference layer",VIEWER_GLOBALS.LOG_TYPE.INFO);_31c.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REFERENCE_LAYER_REMOVED,_36f,_370);}},addWebMapOperationalLayers:function(_371){var _372;var _373;for(var i=0;i<_371.itemData.operationalLayers.length;i++){_372=_371.itemData.operationalLayers[i];_373=_372.layerObject;_373.name=REG_EXP_UTILS.getServiceNameFromUrl(_373.url);_373.isOperationalLayer=true;var _374=VIEWER_UTILS.getLayerUniqueId(_373);if(this.operationalLayers[_374]==null){this.operationalLayers[_374]=_373;}VIEWER_UTILS.getServiceDescription(_373.url,lang.hitch(this,function(_375,_376){_375.serviceDescription=_376;this.handleLayerAdded(_375);},_373));}},_addOperationalLayers:function(){if(this.mapConfiguration.operationalLayers!=null&&lang.isArray(this.mapConfiguration.operationalLayers)){var _377;for(var i=0;i<this.mapConfiguration.operationalLayers.length;i++){_377=this.mapConfiguration.operationalLayers[i];var _378=this._getMapLayerFromLayerObject(_377);if(_378!=null){VIEWER_UTILS.getServiceDescription(_377.url,lang.hitch(this,function(_379,_37a){_379.serviceDescription=_37a;},_378));_378.name=REG_EXP_UTILS.getServiceNameFromUrl(_377.url);if(_377.label!=null&&_377.label!=""){_378.layerAliasName=_377.label;}this.map.addLayer(_378);_378.isOperationalLayer=true;var _37b=VIEWER_UTILS.getLayerUniqueId(_378);if(this.operationalLayers[_37b]==null){this.operationalLayers[_37b]=_378;}}}}},_getMapLayerFromLayerObject:function(_37c){if(_37c.type==null||_37c.type==""||_37c.url==null||_37c.url==""){return null;}var _37d={};if(_37c.visible!=null){_37d.visible=_37c.visible;}var _37e=_37c.type.toLowerCase();if(_37e==="tiled"){return new _324(_37c.url,_37d);}else{if(_37e==="dynamic"){var _37f=new _325(_37c.url,_37d);if(_37c.visibleLayerIds!=null&&lang.isArray(_37c.visibleLayerIds)){_37f.setVisibleLayers(_37c.visibleLayerIds);}return _37f;}else{if(_37e==="image"){return new _321(_37c.url,_37d);}else{if(_37e==="feature"){_37d=lang.mixin(_37d,{mode:_31f.MODE_ONDEMAND,outFields:["*"]});var _380=new _31f(_37c.url,_37d);if(_37c.mapLabel!=null&&_37c.mapLabel.field!=null&&_37c.mapLabel.field!=""){this._createFeatureLayerLabels(_380,_37c.mapLabel);}return _380;}else{if(_37e==="kml"){return new _322(_37c.url);}}}}}},loadMapConfigurationLayers:function(){this._addReferenceLayers();this._addOperationalLayers();},_createFeatureLayerLabels:function(_381,_382){require(["esri/layers/LabelLayer","dojo/_base/Color","esri/renderers/SimpleRenderer","esri/symbols/TextSymbol"],lang.hitch(this,function(_383,_384,_385,_386){var _387=_382.color!=null?_382.color:"#000";var _388=new _383({id:VIEWER_UTILS.generateUUID()});var _389=new _386().setColor(new _384(_387));var _38a=_382.fontSize!=null?_382.fontSize:"12pt";_389.font.setSize(_38a);var _38b=_382.fontFamily!=null?_382.fontFamily:"arial";_389.font.setFamily(_38b);var _38c=new _385(_389);_388.addFeatureLayer(_381,_38c,"${"+_382.field+"}");this.map.addLayer(_388);_381.on("visibility-change",lang.hitch(this,function(_38d,e){if(e&&e.visible){_38d.show();}else{_38d.hide();}},_388));_381.on("opacity-change",lang.hitch(this,function(_38e,e){if(e&&e.opacity!=null){_388.setOpacity(e.opacity);}},_388));}));}});});},"esriviewer/map/base/MapDisplayWidgets":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/window","dojo/dom-attr","dojo/dom-construct","dojo/dom-class","dojo/topic","esri/geometry/webMercatorUtils","esri/geometry/scaleUtils","esri/dijit/Scalebar"],function(_38f,lang,_390,_391,_392,_393,_394,_395,_396,_397){return _38f([],{useFooterCoordPosition:false,_defaultMgrsPrecision:6,showMgrs:false,showUTM:false,showLatLong:true,hideMapScale:false,showScaleBar:false,constructor:function(_398){lang.mixin(this,_398);this.mgrsPrecision=this._defaultMgrsPrecision;this.loadViewerConfigurationData();this.createMapScaleAndCoordsElement();this.initListeners();},loadViewerConfigurationData:function(){var _399=null;_394.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_39a){_399=_39a;});if(_399&&lang.isObject(_399)){if(_399.display!=null&&lang.isObject(_399.display)){if(_399.display.showScale!=null&&_399.display.showScale===false){this.hideMapScale=true;}if(_399.display.showScaleBar!=null&&_399.display.showScaleBar===true){this.showScaleBar=true;}if(_399.display.showMGRS!=null&&_399.display.showMGRS===true){this.showMgrs=true;}if(_399.display.showUTM!=null&&_399.display.showUTM===true){this.showUTM=true;}if(_399.display.showLatLong!=null&&_399.display.showLatLong===false){this.showLatLong=false;}if(_399.display.mgrsPrecision!=null){this.mgrsPrecision=parseInt(_399.display.mgrsPrecision,10);}}}var _39b=null;_394.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"footerTogglerWidget",function(_39c){_39b=_39c;});this.useFooterCoordPosition=_39b!=null&&lang.isObject(_39b)&&_39b.create;},initListeners:function(){_394.subscribe(VIEWER_GLOBALS.EVENTS.MAP.INFO_WINDOW.HIDE,lang.hitch(this,this.handleHideInfoWindow));if(this.showLatLong||this.showMgrs||this.showUTM){this.map.on("mouse-move",lang.hitch(this,this.showCoords));}},handleHideInfoWindow:function(){if(this.map&&this.map.infoWindow&&this.map.infoWindow.isShowing){this.map.infoWindow.hide();}},createMapScaleAndCoordsElement:function(){var _39d=_392.create("div",{className:"threePixelBorderRadius mapalmanac defaultBackground"});if(this.useFooterCoordPosition){_393.add(_39d,"mapScaleAndCoordsContainerWithFooter");}else{_393.add(_39d,"mapScaleAndCoordsContainer");}if(!this.hideMapScale){this.scaleInfoElement=_392.create("span",{className:"mapScaleInfoInner"});_392.place(this.scaleInfoElement,_39d);}if(this.showScaleBar){var _39e=_392.create("div",{className:"threePixelBorderRadius  defaultBackground"});if(this.useFooterCoordPosition){_393.add(_39e,"esriScalebarContainerWithFooter");}else{_393.add(_39e,"esriScalebarContainer");}var _39f=_392.create("div");_392.place(_39f,_39e);_392.place(_39e,_390.body());var _3a0=new _397({map:this.map,scalebarUnit:"dual"},_39f);}if(this.showLatLong||this.showMgrs||this.showUTM){if(!this.hideMapScale){_392.place(_392.create("span",{innerHTML:"|"}),_39d);}if(this.showLatLong){this.latLongCoordsInfoElement=_392.create("span",{className:"mapCoordsInfoInner"});_392.place(this.latLongCoordsInfoElement,_39d);}if(this.showMgrs){if(this.showLatLong){_392.place(_392.create("span",{innerHTML:"|"}),_39d);}this.mrgsCoordsInfoElement=_392.create("span",{className:"mapCoordsInfoInner"});_392.place(this.mrgsCoordsInfoElement,_39d);}if(this.showUTM){if(this.showLatLong||this.showMgrs){_392.place(_392.create("span",{innerHTML:"|"}),_39d);}this.utmCoordsInfoElement=_392.create("span",{className:"mapCoordsInfoInner"});_392.place(this.utmCoordsInfoElement,_39d);}}_394.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAP_SCALE_AND_COORDINATES,_39d);},showCoords:function(evt){try{if(this.latLongCoordsInfoElement||this.mrgsCoordsInfoElement||this.utmCoordsInfoElement){var pnt=_395.webMercatorToGeographic(evt.mapPoint||evt);if(this.latLongCoordsInfoElement){if(pnt===null||pnt===undefined){return;}_391.set(this.latLongCoordsInfoElement,"innerHTML","Lat: "+pnt.y.toFixed(2)+"&deg"+((pnt.y<0)?"S":"N")+"  Lon: "+pnt.x.toFixed(2)+"&deg"+((pnt.x<0)?"W":"E"));}if(this.mrgsCoordsInfoElement){_391.set(this.mrgsCoordsInfoElement,"innerHTML","<span style='font-weight:bold'>MGRS</span> "+PROJECTION_UTILS.LLtoMGRS(pnt.y,pnt.x,this.mgrsPrecision));}if(this.utmCoordsInfoElement){var _3a1=PROJECTION_UTILS.LLtoUTM(pnt.y,pnt.x);if(_3a1.northing==null||isNaN(_3a1.northing)){_3a1.northing="?";}else{_3a1.northing=_3a1.northing.toFixed(3);}if(_3a1.easting==null||isNaN(_3a1.easting)){_3a1.easting="?";}else{_3a1.easting=_3a1.easting.toFixed(3);}_391.set(this.utmCoordsInfoElement,"innerHTML","<span style='font-weight:bold'>UTM</span> "+"N: "+_3a1.northing+" E: "+_3a1.easting+"   Z: "+_3a1.zone);}}}catch(e){}},showScale:function(){var a=Math.round(_396.getScale(this.map));a>999&&a<=999999?a=Math.round(a/1000)+" K":a>999999?a=Math.round(a/1000000)+" M":a>0&&a<=999&&(a=Math.round(a)+" Ft");_391.set(this.scaleInfoElement,"innerHTML","<span style='font-weight:bold'>Scale</span> 1 <b>:</b> "+a);}});});},"dijit/PopupMenuItem":function(){define(["dojo/_base/declare","dojo/dom-style","dojo/_base/lang","dojo/query","./popup","./registry","./MenuItem","./hccss"],function(_3a2,_3a3,lang,_3a4,pm,_3a5,_3a6){return _3a2("dijit.PopupMenuItem",_3a6,{_fillContent:function(){if(this.srcNodeRef){var _3a7=_3a4("*",this.srcNodeRef);this.inherited(arguments,[_3a7[0]]);this.dropDownContainer=this.srcNodeRef;}},_openPopup:function(_3a8,_3a9){var _3aa=this.popup;pm.open(lang.delegate(_3a8,{popup:this.popup,around:this.domNode}));if(_3a9&&_3aa.focus){_3aa.focus();}},_closePopup:function(){pm.close(this.popup);this.popup.parentMenu=null;},startup:function(){if(this._started){return;}this.inherited(arguments);if(!this.popup){var node=_3a4("[widgetId]",this.dropDownContainer)[0];this.popup=_3a5.byNode(node);}this.ownerDocumentBody.appendChild(this.popup.domNode);this.popup.domNode.setAttribute("aria-labelledby",this.containerNode.id);this.popup.startup();this.popup.domNode.style.display="none";if(this.arrowWrapper){_3a3.set(this.arrowWrapper,"visibility","");}this.focusNode.setAttribute("aria-haspopup","true");},destroyDescendants:function(_3ab){if(this.popup){if(!this.popup._destroyed){this.popup.destroyRecursive(_3ab);}delete this.popup;}this.inherited(arguments);}});});},"dojox/flash":function(){define(["./flash/_base"],function(){});},"dijit/form/RadioButton":function(){define(["dojo/_base/declare","./CheckBox","./_RadioButtonMixin"],function(_3ac,_3ad,_3ae){return _3ac("dijit.form.RadioButton",[_3ad,_3ae],{baseClass:"dijitRadio"});});},"esriviewer/ui/layers/base/LayersLocalStorageMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has"],function(_3af,lang,has){return _3af([],{localStoragePersistSupported:true,constructor:function(){if(!(has("ie")<8)){this.localStoragePersistSupported=false;}this.storageProvider=dojox.storage.manager.getProvider();if(this.storageProvider){this.localStoragePersistSupported=true;}this.persistedUserLayers=this.loadPersistedUserLayers();},deleteUserPersistedLayer:function(_3b0){if(_3b0!=null&&_3b0!=""){if(this.persistUserLayerExists(_3b0)){var _3b1=_3b0.toLowerCase();delete this.persistedUserLayers[_3b1];this.persist();}}},removeAllLayers:function(){this.persistedUserLayers={};this.persist();},persistUserLayerExists:function(_3b2){if(_3b2==null||_3b2==""){return true;}return this.persistedUserLayers[_3b2]!=null;},persistUserLayer:function(_3b3){if(_3b3==null||_3b3.url==null){return;}var _3b4=_3b3.url.toLowerCase();if(_3b4==null){return null;}if(this.persistUserLayerExists(_3b4)){return null;}else{var name=VIEWER_UTILS.getLayerNameFromLayer(_3b3);var _3b5={url:_3b3.url,name:name};this.persistedUserLayers[_3b4]=_3b5;this.persist();return _3b5;}},loadPersistedUserLayers:function(){if(this.storageProvider){if(this.storageProvider.hasKey(VIEWER_GLOBALS.STORAGE.LABELS.LAYERS)){return this.storageProvider.get(VIEWER_GLOBALS.STORAGE.LABELS.LAYERS);}}return {};},persist:function(){this.storageProvider.put(VIEWER_GLOBALS.STORAGE.LABELS.LAYERS,this.persistedUserLayers);}});});},"esriviewer/ui/layers/base/LayersTocWidgetContextMenu":function(){define(["dojo/_base/declare","dojo/topic","dojo/on","dojo/_base/lang","dojo/dom-style","dojo/dom-attr","dijit/Menu","dijit/MenuItem","dijit/PopupMenuItem","dijit/registry","dojo/_base/connect","esri/layers/ArcGISImageServiceLayer","esri/layers/FeatureLayer","esri/layers/ArcGISDynamicMapServiceLayer"],function(_3b6,_3b7,on,lang,_3b8,_3b9,Menu,_3ba,_3bb,_3bc,con,_3bd,_3be,_3bf){return _3b6([],{createQueryBuilderMenuItems:false,showRemoveMenuItems:true,constructor:function(_3c0){lang.mixin(this,_3c0);this.initialize();},initialize:function(){this.loadViewerConfigurationData();this.createServerMenu();this.createGroupLayerMenu();this.createLayerMenu();this.createGraphicsLayerMenu();this.initListeners();},initListeners:function(){this.zoomToExtentMenuItem.on("click",lang.hitch(this,this.handleZoomToExtent));if(this.createQueryBuilderMenuItems){this.queryServiceMenuItem.on("click",lang.hitch(this,this.handleQueryBuilderServiceClick));this.queryLayerMenuItem.on("click",lang.hitch(this,this.handleQueryBuilderLayerClick));}this.openMapServiceDescriptionMenu.on("click",lang.hitch(this,this.handleOpenMapServerDescriptionMenuRequest));this.confirmRemoveLayerMenuItem.on("click",lang.hitch(this,this.handleRemoveLayer));this.confirmRemoveGraphicLayerMenuItem.on("click",lang.hitch(this,this.handleRemoveGraphicsLayer));con.connect(this.serverNodeMenu,"_openMyself",lang.hitch(this,this.handleServerMenuOpen));con.connect(this.groupNodeMenu,"_openMyself",lang.hitch(this,this.handleGroupMenuOpen));con.connect(this.graphicsLayerMenu,"_openMyself",lang.hitch(this,this.handleGraphicsLayerMenuOpen));con.connect(this.layerNodeMenu,"_openMyself",lang.hitch(this,this.handleLayerMenuOpen));},loadViewerConfigurationData:function(){var _3c1=null;_3b7.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"queryBuilder",function(_3c2){_3c1=_3c2;});if(_3c1&&lang.isObject(_3c1)){this.createQueryBuilderMenuItems=_3c1.create===true;}},createServerMenu:function(){this.serverNodeMenu=new Menu();this.zoomToExtentMenuItem=new _3ba({label:"Zoom To Extent",iconClass:"commonIcons16 locationGoTo"});this.serverNodeMenu.addChild(this.zoomToExtentMenuItem);if(this.createQueryBuilderMenuItems){this.queryServiceMenuItem=new _3ba({label:"Query Builder",iconClass:"commonIcons16 sql"});this.serverNodeMenu.addChild(this.queryServiceMenuItem);}this.openMapServiceDescriptionMenu=new _3ba({label:"View Service Description",iconClass:"serviceDescriptionIcon"});this.serverNodeMenu.addChild(this.openMapServiceDescriptionMenu);var _3c3=new Menu();this.confirmRemoveLayerMenuItem=new _3ba({label:"Confirm",iconClass:"commonIcons16 question"});_3c3.addChild(this.confirmRemoveLayerMenuItem);this.removeServiceMenuItem=new _3bb({iconClass:"commonIcons16 delete",label:"Remove Layer",popup:_3c3});this.serverNodeMenu.addChild(this.removeServiceMenuItem);this.serverNodeMenu.startup();},createGraphicsLayerMenu:function(){this.graphicsLayerMenu=new Menu();var _3c4=new Menu();this.confirmRemoveGraphicLayerMenuItem=new _3ba({label:"Confirm",iconClass:"commonIcons16 question"});_3c4.addChild(this.confirmRemoveGraphicLayerMenuItem);this.removeGraphicLayerMenuItem=new _3bb({iconClass:"commonIcons16 delete",label:"Remove Graphics Layer",popup:_3c4});this.graphicsLayerMenu.addChild(this.removeGraphicLayerMenuItem);this.graphicsLayerMenu.startup();},createLayerMenu:function(){this.layerNodeMenu=new Menu();if(this.createQueryBuilderMenuItems){this.queryLayerMenuItem=new _3ba({label:"Query Builder",iconClass:"commonIcons16 sql"});this.layerNodeMenu.addChild(this.queryLayerMenuItem);}this.layerNodeMenu.startup();},createGroupLayerMenu:function(){this.groupNodeMenu=new Menu();this.groupNodeMenu.startup();_3b8.set(this.groupNodeMenu.domNode,"display","none");},handleGroupMenuOpen:function(){_3b8.set(this.groupNodeMenu.domNode,"display","none");return false;},bindNodeToGraphicsLayerMenu:function(node){this.bindNode(node,this.graphicsLayerMenu);},bindNodeToServerMenu:function(node){this.bindNode(node,this.serverNodeMenu);},bindNodeToGroupMenu:function(node){this.bindNode(node,this.groupNodeMenu);},bindNodeToLayerMenu:function(node){this.bindNode(node,this.layerNodeMenu);},bindNodeToNoContentMenu:function(node){on(node,"contextmenu",function(e){e.stopPropagation();});},bindNode:function(node,menu){if(node&&menu&&menu.bindDomNode){menu.bindDomNode(node);}},handleRemoveGraphicsLayer:function(){if(this.currentGraphicsLayerNodeFromMenu&&this.currentGraphicsLayerNodeFromMenu.item){var _3c5=this.getTreeStore().getValue(this.currentGraphicsLayerNodeFromMenu.item,"layer");if(_3c5){_3b7.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE,_3c5);}}},handleGraphicsLayerMenuOpen:function(e){this.currentGraphicsLayerNodeFromMenu=_3bc.getEnclosingWidget(e.target);if(this.currentGraphicsLayerNodeFromMenu&&this.currentGraphicsLayerNodeFromMenu.item){var _3c6=this.getTreeStore().getValue(this.currentGraphicsLayerNodeFromMenu.item,"layer");if(_3c6){if(_3c6.removable!=null&&_3c6.removable===true){this.removeGraphicLayerMenuItem.attr("disabled",false);}else{this.removeGraphicLayerMenuItem.attr("disabled",true);}}}},handleLayerMenuOpen:function(e){if(this.queryLayerMenuItem){this.currentLayerNodeFromMenu=_3bc.getEnclosingWidget(e.target);if(this.currentLayerNodeFromMenu&&this.currentLayerNodeFromMenu.item){var _3c7=this.getTreeStore().getValue(this.currentLayerNodeFromMenu.item,"layer");if(_3c7){this.queryLayerMenuItem.attr("disabled",_3c7.capabilities.indexOf("Query")<0);}}}},handleServerMenuOpen:function(e){this.currentServerNodeFromMenu=_3bc.getEnclosingWidget(e.target);if(this.currentServerNodeFromMenu&&this.currentServerNodeFromMenu.item){var _3c8=this.getTreeStore().getValue(this.currentServerNodeFromMenu.item,"layer");if(_3c8){if(_3c8.canRemove!=null&&_3c8.canRemove===true){this.removeServiceMenuItem.attr("disabled",false);}else{this.removeServiceMenuItem.attr("disabled",true);}if(this.queryServiceMenuItem){var _3c9=false;if(_3c8 instanceof _3bf){_3c9=false;}else{_3c9=_3c8 instanceof _3bd||(_3c8.capabilities&&_3c8.capabilities.indexOf("Query")>-1);}this.queryServiceMenuItem.attr("disabled",!_3c9);}}}},handleZoomToExtent:function(){if(this.currentServerNodeFromMenu&&this.currentServerNodeFromMenu.item){var _3ca=this.getTreeStore().getValue(this.currentServerNodeFromMenu.item,"layer");if(_3ca&&_3ca.initialExtent&&!isNaN(_3ca.initialExtent.xmin)&&!isNaN(_3ca.initialExtent.xmax)&&!isNaN(_3ca.initialExtent.xmax)&&!isNaN(_3ca.initialExtent.ymax)){_3b7.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,_3ca.initialExtent);}}this.currentServerNodeFromMenu=null;},handleRemoveLayer:function(){if(this.currentServerNodeFromMenu&&this.currentServerNodeFromMenu.item){var _3cb=this.getTreeStore().getValue(this.currentServerNodeFromMenu.item,"layer");if(_3cb){if(_3cb.canRemove!=null&&_3cb.canRemove===true){_3b7.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE,_3cb);}}}this.currentServerNodeFromMenu=null;},handleOpenMapServerDescriptionMenuRequest:function(){if(this.currentServerNodeFromMenu&&this.currentServerNodeFromMenu.item){var _3cc=this.getTreeStore().getValue(this.currentServerNodeFromMenu.item,"layer");if(_3cc&&_3cc.url){this.openUrlInWindow(_3cc.url);}}this.currentMapServerNodeFromMenu=null;},handleQueryBuilderServiceClick:function(){if(this.currentServerNodeFromMenu&&this.currentServerNodeFromMenu.item){var _3cd=this.getTreeStore().getValue(this.currentServerNodeFromMenu.item,"layer");if(_3cd){if(_3cd instanceof _3bd){_3b7.publish(VIEWER_GLOBALS.EVENTS.QUERY_BUILDER.SET_IMAGE_SERVICE_LAYER,_3cd);}else{if(_3cd instanceof _3be){_3b7.publish(VIEWER_GLOBALS.EVENTS.QUERY_BUILDER.SET_FEATURE_SERVICE_LAYER,_3cd);}}}}this.currentMapServerNodeFromMenu=null;},handleQueryBuilderLayerClick:function(){if(this.currentLayerNodeFromMenu&&this.currentLayerNodeFromMenu.item){var _3ce=this.getTreeStore().getValue(this.currentLayerNodeFromMenu.item,"layer");var _3cf=this.getTreeStore().getValue(this.currentLayerNodeFromMenu.item,"info");_3b7.publish(VIEWER_GLOBALS.EVENTS.QUERY_BUILDER.SET_MAP_SERVICE_LAYER,_3ce,_3cf);}this.currentMapServerNodeFromMenu=null;},openUrlInWindow:function(url){if(url){window.open(url);}},getTreeStore:function(){return this.tree.model.store;}});});},"esriviewer/ui/draw/base/MapDrawSupport":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/Color","dojo/_base/lang","dojo/dom-construct","dijit/form/TextBox","dijit/TooltipDialog","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Extent","esri/geometry/screenUtils","esri/graphic","esri/symbols/TextSymbol","esri/symbols/Font"],function(_3d0,_3d1,_3d2,lang,_3d3,_3d4,_3d5,_3d6,_3d7,_3d8,_3d9,_3da,_3db,_3dc,Font){return _3d0([],{constructor:function(){this.polygonOptions={};this.pointOptions={};this.envelopeOptions={};this.lineOptions={};this.geometryAddedCallback=lang.hitch(this,this.geometryAdded);},clearDraw:function(){this.currentDrawType=null;},setDraw:function(type){if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT){this.activatePointDraw();}else{if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE){this.activatePolylineDraw(this.freehandActive);}else{if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_LINE){this.activateLineDraw();}else{if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON){this.activatePolygonDraw(this.freehandActive);}else{if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_RECTANGLE){this.activateRectangleDraw();}else{if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT){this.activatePointDraw();}}}}}}this.currentDrawType=type;},activatePointDraw:function(){this.cancelDrawChangeListener();_3d1.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.POINT_INPUT,this.geometryAddedCallback,this.pointOptions);this.setupClearDrawCallback();},activateLineDraw:function(){this.cancelDrawChangeListener();_3d1.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.LINE_INPUT,this.geometryAddedCallback,this.lineOptions);this.setupClearDrawCallback();},activatePolylineDraw:function(_3dd){this.cancelDrawChangeListener();if(_3dd==null||_3dd===false){_3d1.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.POLYLINE_INPUT,this.geometryAddedCallback,this.lineOptions);}else{_3d1.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.FREEHAND_POLYLINE_INPUT,this.geometryAddedCallback,this.lineOptions);}this.setupClearDrawCallback();},activatePolygonDraw:function(_3de){this.cancelDrawChangeListener();if(_3de==null||_3de===false){_3d1.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.POLYGON_INPUT,this.geometryAddedCallback,this.polygonOptions);}else{_3d1.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.FREEHAND_POLYGON_INPUT,this.geometryAddedCallback,this.polygonOptions);}this.setupClearDrawCallback();},activateRectangleDraw:function(){this.cancelDrawChangeListener();_3d1.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.RECTANGLE_INPUT,this.geometryAddedCallback,this.envelopeOptions);this.setupClearDrawCallback();},cancelDrawChangeListener:function(){if(this.toolChangeConnect){this.toolChangeConnect.remove();this.toolChangeConnect=null;}},geometryAdded:function(_3df){if(_3df==null){return;}var _3e0=null;var type=null;if(_3df instanceof _3d6){type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT;if(this.currentDrawType==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT){type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT;_3e0=this.cloneTextSymbol(this.textSymbol);_3e0.setText("");var _3e1;var _3e2;_3d1.publish(VIEWER_GLOBALS.EVENTS.MAP.DIMENSIONS.GET,function(_3e3){_3e1=_3e3;});_3d1.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,function(_3e4){_3e2=_3e4;});var _3e5=_3da.toScreenPoint(_3e2,_3e1.width,_3e1.height,_3df);this.showTextSymbolTooltip(_3e5);}else{type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT;_3e0=this.pointSymbol;}}else{if(_3df instanceof _3d7){_3e0=this.lineSymbol;type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE;}else{if(_3df instanceof _3d8){_3e0=this.polygonSymbol;type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON;}else{if(_3df instanceof _3d9){_3e0=this.envelopeSymbol;type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_RECTANGLE;}}}}if(_3e0!=null&&type!=null){if(type===VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT){this.currentTextGraphic=new _3db(_3df,_3e0);}else{var _3e6=new _3db(_3df,_3e0);var uuid=VIEWER_UTILS.generateUUID();this.onAnnotationCreated({id:uuid,type:type,graphic:_3e6});}}},onClearDraw:function(){},onAnnotationCreated:function(_3e7){},setupClearDrawCallback:function(){this.toolChangeConnect=_3d1.subscribe(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,lang.hitch(this,this.handleClearDraw));},handleClearDraw:function(){this.cancelDrawChangeListener();this.clearDraw();this.onClearDraw();},createTextSymbolLabelTooltip:function(){var _3e8=_3d3.create("div");var _3e9=_3d3.create("span",{innerHTML:"Label: ",className:"textSymbolInputLabel"});this.textSymbolLabelInput=new _3d4({value:"Label"});this.textSymbolLabelInput.on("keyUp",lang.hitch(this,this.handleTextSymbolKeyUp));_3d3.place(_3e9,_3e8);_3d3.place(this.textSymbolLabelInput.domNode,_3e8);this.textSymbolLabelTooltip=new _3d5({content:_3e8});},handleTextSymbolKeyUp:function(e){if(VIEWER_UTILS.isEnterKey(e)){this.finalizeTextSymbol();this.hideTextSymbolTooltip();}},finalizeTextSymbol:function(){if(this.currentTextGraphic==null||this.currentTextGraphic.symbol==null){return;}var _3ea=this.textSymbolLabelInput.get("value");if(_3ea==""){_3ea="Label";}this.currentTextGraphic.symbol.setText(_3ea);var uuid=VIEWER_UTILS.generateUUID();this.onAnnotationCreated({id:uuid,type:VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT,graphic:this.currentTextGraphic});this.currentTextSymbol=null;},showTextSymbolTooltip:function(_3eb){if(this.textSymbolLabelTooltip==null){this.createTextSymbolLabelTooltip();}if(this.textSymbolLabelTooltip){dijit.popup.open({popup:this.textSymbolLabelTooltip,x:_3eb.x,y:_3eb.y});this.textSymbolLabelInput.set("value","");this.textSymbolLabelInput.focus();}},hideTextSymbolTooltip:function(){if(this.textSymbolLabelTooltip){dijit.popup.close(this.textSymbolLabelTooltip);}},cloneTextSymbol:function(){var _3ec=new _3dc("");_3ec.setColor(new _3d2(this.textSymbol.color));_3ec.setAlign(this.textSymbol.align);_3ec.setAngle(this.textSymbol.angle);_3ec.setFont(new Font(this.textSymbol.font.size));_3ec.font.setWeight(this.textSymbol.font.weight);_3ec.font.setStyle(this.textSymbol.font.style);return _3ec;}});});},"esriviewer/map/base/MapTimeTools":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang"],function(_3ed,_3ee,lang){return _3ed([],{constructor:function(_3ef){lang.mixin(this,_3ef);this.initListeners();},initListeners:function(){_3ee.subscribe(VIEWER_GLOBALS.EVENTS.MAP.TIME.CLEAR_TIME_EXTENT,lang.hitch(this,this.handleClearTimeExtent));_3ee.subscribe(VIEWER_GLOBALS.EVENTS.MAP.TIME.SET_MAP_TIME_SLIDER,lang.hitch(this,this.handleSetMapTimeSlider));},handleSetMapTimeSlider:function(_3f0){this.map.setTimeSlider(_3f0);_3ee.publish(VIEWER_GLOBALS.EVENTS.MAP.TIME.MAP_TIME_EXTENT_SET);},handleClearTimeExtent:function(){this.map.setTimeSlider(null);this.map.setTimeExtent(null);_3ee.publish(VIEWER_GLOBALS.EVENTS.MAP.TIME.MAP_TIME_EXTENT_CLEARED);}});});},"dojox/storage/LocalStorageProvider":function(){define(["dijit","dojo","dojox","dojo/require!dojox/storage/Provider,dojox/storage/manager"],function(_3f1,dojo,_3f2){dojo.provide("dojox.storage.LocalStorageProvider");dojo.require("dojox.storage.Provider");dojo.require("dojox.storage.manager");dojo.declare("dojox.storage.LocalStorageProvider",[_3f2.storage.Provider],{store:null,initialize:function(){this.store=localStorage;this.initialized=true;_3f2.storage.manager.loaded();},isAvailable:function(){return typeof localStorage!="undefined";},put:function(key,_3f3,_3f4,_3f5){this._assertIsValidKey(key);_3f5=_3f5||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_3f5);var _3f6=this.getFullKey(key,_3f5);_3f3=dojo.toJson(_3f3);try{this.store.setItem(_3f6,_3f3);if(_3f4){_3f4(this.SUCCESS,key,null,_3f5);}}catch(e){if(_3f4){_3f4(this.FAILED,key,e.toString(),_3f5);}}},get:function(key,_3f7){this._assertIsValidKey(key);_3f7=_3f7||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_3f7);key=this.getFullKey(key,_3f7);return dojo.fromJson(this.store.getItem(key));},getKeys:function(_3f8){_3f8=_3f8||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_3f8);_3f8="__"+_3f8+"_";var keys=[];for(var i=0;i<this.store.length;i++){var _3f9=this.store.key(i);if(this._beginsWith(_3f9,_3f8)){_3f9=_3f9.substring(_3f8.length);keys.push(_3f9);}}return keys;},clear:function(_3fa){_3fa=_3fa||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_3fa);_3fa="__"+_3fa+"_";var keys=[];for(var i=0;i<this.store.length;i++){if(this._beginsWith(this.store.key(i),_3fa)){keys.push(this.store.key(i));}}dojo.forEach(keys,dojo.hitch(this.store,"removeItem"));},remove:function(key,_3fb){_3fb=_3fb||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_3fb);this.store.removeItem(this.getFullKey(key,_3fb));},getNamespaces:function(){var _3fc=[this.DEFAULT_NAMESPACE];var _3fd={};_3fd[this.DEFAULT_NAMESPACE]=true;var _3fe=/^__([^_]*)_/;for(var i=0;i<this.store.length;i++){var _3ff=this.store.key(i);if(_3fe.test(_3ff)==true){var _400=_3ff.match(_3fe)[1];if(typeof _3fd[_400]=="undefined"){_3fd[_400]=true;_3fc.push(_400);}}}return _3fc;},isPermanent:function(){return true;},getMaximumSize:function(){return _3f2.storage.SIZE_NO_LIMIT;},hasSettingsUI:function(){return false;},isValidKey:function(_401){if(_401===null||_401===undefined){return false;}return /^[0-9A-Za-z_-]*$/.test(_401);},isValidNamespace:function(_402){if(_402===null||_402===undefined){return false;}return /^[0-9A-Za-z-]*$/.test(_402);},getFullKey:function(key,_403){return "__"+_403+"_"+key;},_beginsWith:function(_404,_405){if(_405.length>_404.length){return false;}return _404.substring(0,_405.length)===_405;},_assertIsValidNamespace:function(_406){if(this.isValidNamespace(_406)===false){throw new Error("Invalid namespace given: "+_406);}},_assertIsValidKey:function(key){if(this.isValidKey(key)===false){throw new Error("Invalid key given: "+key);}}});_3f2.storage.manager.register("dojox.storage.LocalStorageProvider",new _3f2.storage.LocalStorageProvider());});},"dojox/storage/GearsStorageProvider":function(){define(["dijit","dojo","dojox","dojo/require!dojo/gears,dojox/storage/Provider,dojox/storage/manager,dojox/sql"],function(_407,dojo,_408){dojo.provide("dojox.storage.GearsStorageProvider");dojo.require("dojo.gears");dojo.require("dojox.storage.Provider");dojo.require("dojox.storage.manager");dojo.require("dojox.sql");if(dojo.gears.available){(function(){dojo.declare("dojox.storage.GearsStorageProvider",_408.storage.Provider,{constructor:function(){},TABLE_NAME:"__DOJO_STORAGE",initialized:false,_available:null,_storageReady:false,initialize:function(){if(dojo.config["disableGearsStorage"]==true){return;}this.TABLE_NAME="__DOJO_STORAGE";this.initialized=true;_408.storage.manager.loaded();},isAvailable:function(){return this._available=dojo.gears.available;},put:function(key,_409,_40a,_40b){this._initStorage();if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}_40b=_40b||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_40b)){throw new Error("Invalid namespace given: "+key);}if(dojo.isString(_409)){_409="string:"+_409;}else{_409=dojo.toJson(_409);}try{_408.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND key = ?",_40b,key);_408.sql("INSERT INTO "+this.TABLE_NAME+" VALUES (?, ?, ?)",_40b,key,_409);}catch(e){_40a(this.FAILED,key,e.toString(),_40b);return;}if(_40a){_40a(_408.storage.SUCCESS,key,null,_40b);}},get:function(key,_40c){this._initStorage();if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}_40c=_40c||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_40c)){throw new Error("Invalid namespace given: "+key);}var _40d=_408.sql("SELECT * FROM "+this.TABLE_NAME+" WHERE namespace = ? AND "+" key = ?",_40c,key);if(!_40d.length){return null;}else{_40d=_40d[0].value;}if(dojo.isString(_40d)&&(/^string:/.test(_40d))){_40d=_40d.substring("string:".length);}else{_40d=dojo.fromJson(_40d);}return _40d;},getNamespaces:function(){this._initStorage();var _40e=[_408.storage.DEFAULT_NAMESPACE];var rs=_408.sql("SELECT namespace FROM "+this.TABLE_NAME+" DESC GROUP BY namespace");for(var i=0;i<rs.length;i++){if(rs[i].namespace!=_408.storage.DEFAULT_NAMESPACE){_40e.push(rs[i].namespace);}}return _40e;},getKeys:function(_40f){this._initStorage();_40f=_40f||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_40f)){throw new Error("Invalid namespace given: "+_40f);}var rs=_408.sql("SELECT key FROM "+this.TABLE_NAME+" WHERE namespace = ?",_40f);var _410=[];for(var i=0;i<rs.length;i++){_410.push(rs[i].key);}return _410;},clear:function(_411){this._initStorage();_411=_411||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_411)){throw new Error("Invalid namespace given: "+_411);}_408.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ?",_411);},remove:function(key,_412){this._initStorage();if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}_412=_412||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_412)){throw new Error("Invalid namespace given: "+key);}_408.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND"+" key = ?",_412,key);},putMultiple:function(keys,_413,_414,_415){this._initStorage();if(!this.isValidKeyArray(keys)||!_413 instanceof Array||keys.length!=_413.length){throw new Error("Invalid arguments: keys = ["+keys+"], values = ["+_413+"]");}if(_415==null||typeof _415=="undefined"){_415=_408.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_415)){throw new Error("Invalid namespace given: "+_415);}this._statusHandler=_414;try{_408.sql.open();_408.sql.db.execute("BEGIN TRANSACTION");var _416="REPLACE INTO "+this.TABLE_NAME+" VALUES (?, ?, ?)";for(var i=0;i<keys.length;i++){var _417=_413[i];if(dojo.isString(_417)){_417="string:"+_417;}else{_417=dojo.toJson(_417);}_408.sql.db.execute(_416,[_415,keys[i],_417]);}_408.sql.db.execute("COMMIT TRANSACTION");_408.sql.close();}catch(e){if(_414){_414(this.FAILED,keys,e.toString(),_415);}return;}if(_414){_414(_408.storage.SUCCESS,keys,null,_415);}},getMultiple:function(keys,_418){this._initStorage();if(!this.isValidKeyArray(keys)){throw new ("Invalid key array given: "+keys);}if(_418==null||typeof _418=="undefined"){_418=_408.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_418)){throw new Error("Invalid namespace given: "+_418);}var _419="SELECT * FROM "+this.TABLE_NAME+" WHERE namespace = ? AND "+" key = ?";var _41a=[];for(var i=0;i<keys.length;i++){var _41b=_408.sql(_419,_418,keys[i]);if(!_41b.length){_41a[i]=null;}else{_41b=_41b[0].value;if(dojo.isString(_41b)&&(/^string:/.test(_41b))){_41a[i]=_41b.substring("string:".length);}else{_41a[i]=dojo.fromJson(_41b);}}}return _41a;},removeMultiple:function(keys,_41c){this._initStorage();if(!this.isValidKeyArray(keys)){throw new Error("Invalid arguments: keys = ["+keys+"]");}if(_41c==null||typeof _41c=="undefined"){_41c=_408.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_41c)){throw new Error("Invalid namespace given: "+_41c);}_408.sql.open();_408.sql.db.execute("BEGIN TRANSACTION");var _41d="DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND key = ?";for(var i=0;i<keys.length;i++){_408.sql.db.execute(_41d,[_41c,keys[i]]);}_408.sql.db.execute("COMMIT TRANSACTION");_408.sql.close();},isPermanent:function(){return true;},getMaximumSize:function(){return this.SIZE_NO_LIMIT;},hasSettingsUI:function(){return false;},showSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},hideSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},_initStorage:function(){if(this._storageReady){return;}if(!google.gears.factory.hasPermission){var _41e=null;var icon=null;var msg="This site would like to use Google Gears to enable "+"enhanced functionality.";var _41f=google.gears.factory.getPermission(_41e,icon,msg);if(!_41f){throw new Error("You must give permission to use Gears in order to "+"store data");}}try{_408.sql("CREATE TABLE IF NOT EXISTS "+this.TABLE_NAME+"( "+" namespace TEXT, "+" key TEXT, "+" value TEXT "+")");_408.sql("CREATE UNIQUE INDEX IF NOT EXISTS namespace_key_index"+" ON "+this.TABLE_NAME+" (namespace, key)");}catch(e){throw new Error("Unable to create storage tables for Gears in "+"Dojo Storage");}this._storageReady=true;}});_408.storage.manager.register("dojox.storage.GearsStorageProvider",new _408.storage.GearsStorageProvider());})();}});},"esriviewer/base/LocationSupport":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic"],function(_420,lang,_421){return _420([],{handleLocate:function(_422,_423){this.currentLocateRequestId=VIEWER_UTILS.generateUUID();this.requestCompleteHandle=_421.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_REQUEST_COMPLETE,lang.hitch(this,this._handleLocateRequestComplete));this.requreErrorHandle=_421.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_REQUEST_ERROR,lang.hitch(this,this._handleLocateRequestError));VIEWER_UTILS.log("Locating: "+_422,VIEWER_GLOBALS.LOG_TYPE.INFO);_421.publish(VIEWER_GLOBALS.EVENTS.LOCATOR.SINGLE_LINE_ADDRESS_TO_LOCATION,_422,this.currentLocateRequestId,_423);},_handleLocateRequestComplete:function(_424){if(_424.requestId==this.currentLocateRequestId){this.handleLocationResponse(_424.addressCandidates);this.requestCompleteHandle.remove();this.requreErrorHandle.remove();}},_handleLocateRequestError:function(_425){VIEWER_UTILS.log("Locator Failed",VIEWER_GLOBALS.LOG_TYPE.ERROR);this.requestCompleteHandle.remove();this.requreErrorHandle.remove();},handleLocationResponse:function(_426){}});});},"esriviewer/ui/draw/base/model/UserPersistedGraphicsListViewModel":function(){define(["dojo/_base/declare","dojo/topic","dojo/Evented"],function(_427,_428,_429){return _427([_429],{REMOVE_USER_PERSISTED_GRAPHICS:"removeUserPersistedGraphic",ADD_USER_PERSISTED_GRAPHICS_TO_MAP:"addUserPersistedGraphicsToMap",constructor:function(){var self=this;this.addedUserPersistedGraphics=ko.observableArray();this.removeUserPersistedGraphic=function(_42a){if(_42a==null){return;}self.emit(self.REMOVE_USER_PERSISTED_GRAPHICS,_42a);self.addedUserPersistedGraphics.remove(_42a);};this.addSavedGraphics=function(_42b){if(_42b==null){return;}self.emit(self.ADD_USER_PERSISTED_GRAPHICS_TO_MAP,_42b);};},sort:function(){this.addedUserPersistedGraphics.sort(function(left,_42c){var _42d=left.label.toLowerCase();var _42e=_42c.label.toLowerCase();return _42d==_42e?0:(_42d<_42e?-1:1);});}});});},"esriviewer/base/ViewerGlobals":function(){define(["dojo/_base/declare"],function(_42f){return _42f([],{EVENTS:{CSS:{CORE_UI_THEME_LOADED:"css:coreUILoaded"},MAP:{GET_MAP_DIV:"map:getMapDiv",GET:"map:get",INFO_WINDOW:{HIDE:"mapInfoWin:hide"},LEGEND:{CREATE:"legend:create"},RESIZE:"map:resize",LOADED:"map:loaded",ACTIONS:{TOOL_CHANGED:"MapMan:tlChngd"},FLASH:{POINT:"mapFlash:point"},LAYERS:{TRANSPARENCY:{WINDOW:{SHOW:"layerTransWindow:show",HIDE:"layerTransWindow:hide",TOGGLE:"layerTransWindow:toggle"},SET:"layerTrans:setTransparency"},WIDGET:{SHOW:"layersWidget:show"},OPERATIONAL:{GET:"operationalLayers:get"},ADD_GRAPHICS_LAYER:"layers:addGraphicsLayer",ADD_FROM_URL:"layers:addFromUrl",ADD:"layers:add",REMOVE:"layers:remove",REMOVED:"layers:removed",ADDED:"layers:added",ADD_REFERENCE_LAYER:"reference:addLayer",REMOVE_REFERENCE_LAYER:"reference:removeLayer",REFERENCE_LAYER_ADDED:"reference:added",REFERENCE_LAYER_REMOVED:"reference:removed",ADD_EXTERNAL_MANAGED_LAYER:"layers:addExternalManagedLayer",REMOVE_EXTERNAL_MANAGED_LAYER:"layers:removeExternalManagedLayer",GET_FEATURE_LAYER_IF_EXISTS:"layers:getFeatureLayerIfExists",MOVE_LAYER_TO_TOP:"layers:moveLayerToTop",QUERY_LAYER:"layers:queryLayer",MAKE_VISIBLE:"layers:makeLayerVisible",MAKE_INVISIBLE:"layers:makeLayerInvisible",GET_MIN_MAX_FOR_FIELD:"layers:getMinMax",GET_DISTINCT_FIELD_VALUES:"layers:getDistinctFieldValues"},TOOLS:{DRAW_POINT:"tldr:dPt",DRAW_POLYGON:"tldr:dPoly",DRAW_RECTANGLE:"tldr:dRect",DRAW_FREEHAND_POLYGON:"tldr:dFPoly",DRAW_FREEHAND_LINE:"tldr:dFln",DRAW_LINE:"tldr:dLn",DRAW_POLYLINE:"tldr:dPLn",DRAW_TEXT:"tldr:dTx"},GRAPHICS:{ADD:"mapGraphics:add",REMOVE:"mapGraphics:remove",CENTER_AND_FLASH:"mapGraphics:centerAndFlash"},BASEMAP:{SET:"map:setBasemap",GET_CURRENT:"map:getCurrentBasemap",GET_CURRENT_URL:"map:getCurrentBasemapUrl",ADD:"map:addBasemap",ADDED:"map:basemapAdded",REMOVE:"map:removeBasemap",REMOVED:"map:basemapRemoved",GALLERY:{TOGGLE:"map:basemapGalleryToggle",HIDE:"map:basemapGalleryHide",SHOW:"map:basemapGalleryShow",IS_HIDDEN:"map:basemapGalleryIsHidden",GET:"map:basemapGalleryGet"},CHANGED:"map:basemapChanged"},EXTENT:{GET_EXTENT:"extent:getExtent",GET_CENTER:"extent:getCenter",GET_LEVEL:"extent:getLevel",SET_LEVEL:"extent:setLevel",PAN_TO:"extent:panTo",SET_EXTENT:"extent:setExtent",CHANGED:"extent:changed",GO_PREV_EXTENT:"extent:prevExtent",GO_NEXT_EXTENT:"extent:nextExtent",GO_INITIAL_EXTENT:"extent:initialExtent",GO_LAST_EXTENT:"extent:lastExtent",PREV_EXTENT_EXISTS:"extent:prevExtentExists",NEXT_EXTENT_EXISTS:"extent:nextExtentExists"},LEVEL:{CHANGED:"zoomLevel:changed",GET_LEVEL_COUNT:"zoomLevel:getCount",LEVEL_COUNT_CHANGED:"zoomLevel:lvlCountChanged"},LABEL_SERVICES:{SHOW:"lblServices:show",HIDE:"lblServices:hide",SERVICE_EXISTS:"lblServices:exist"},DIMENSIONS:{GET:"dimensions:get"},TIME:{TIME_LAYER_FOUND:"time:timeLayerFound",GET_TIME_ENABLED_SERVICES:"time:getTimeEnabledServices",SHOW_TIME_SLIDER:"time:showTimeSlider",TOGGLE_TIME_SLIDER:"time:toggleTimeSlider",MAP_TIME_EXTENT_CLEARED:"map:timeExtentCleared",CLEAR_TIME_EXTENT:"time:clearTimeExtent",SET_MAP_TIME_SLIDER:"time:setMapTimeSlider",MAP_TIME_EXTENT_SET:"time:mapTimeExtentSet",MAP_TIME_CHANGED:"time:mapTimeChanged"}},PORTAL:{INITIALIZED:"portal:initialized",USER_LOGGED_OUT:"portal:userLoggedOut",USER_LOGGED_IN:"portal:userLoggedIn",IS_USER_LOGGED_IN:"portal:isUserLoggedIn",LOG_IN:"portal:logIn",LOG_OUT:"portal:logOut",SEARCH_WEBMAPS:"portal:searchWebmaps",SEARCH_FEATURE_SERVICES:"portal:searchFeatureServices",SEARCH_MAP_SERVICES:"portal:searchMapServices",SEARCH_IMAGE_SERVICES:"portal:searchImageServices",SEARCH_FEATURE_SERVICE_LAYERS:"portal:searchFeatureServiceLayers",SEARCH_GEOCODE_SERVICES:"portal:searchGeocodeServices",GET_INSTANCE:"portal:getInstance",GET_BASEMAPS:"portal:getBasemaps"},TOOLS:{ACCORDION:{TOGGLE:"accordion:toggle",SHOW:"accordion:show",HIDE:"accordion:hide",ADD_ITEM:"accordion:addItem",LOAD_DEFAULT_TOOLS:"accordion:loadDefaultTools",HIDE_COMPLETE:"accordion:hideComplete"},MENU:{ADD_TOOL:"toolMenu:addTool",HIDE_TOOLS_BUTTON:"toolMenu:hideToolsButton",SHOW_TOOLS_BUTTON:"toolMenu:showToolsButton",HIDE_LAYERS_BUTTON:"toolMenu:hideLayersButton",SHOW_LAYERS_BUTTON:"toolMenu:showLayersButton"}},QUERY_BUILDER:{SET_IMAGE_SERVICE_LAYER:"queryBuilder:setImgSrvLyr",SET_MAP_SERVICE_LAYER:"queryBuilder:setMapServiceLayer",SET_FEATURE_SERVICE_LAYER:"queryBuilder:setFeatureServiceLayer"},WINDOW:{REPOSITION_ALL:"window:repositionAll",SOCIAL_MEDIA:{SHOW:"socialMedia:show",HIDE:"socialMedia:hide",TOGGLE:"socialMedia:toggle"},POINT_UPLOAD:{SHOW:"ptUploadWindow:show",HIDE:"ptUploadWindow:hide",TOGGLE:"ptUploadWindow:toggle"},WEATHER:{SHOW:"weatherWindow:show",HIDE:"weatherWindow:hide",TOGGLE:"weatherWindow:toggle"},DRAW:{SHOW:"drawWindow:show",HIDE:"drawWindow:hide",TOGGLE:"drawWindow:toggle"},LEGEND:{SHOW:"legendWindow:show",HIDE:"legendWindow:hide"},QUERY_BUILDER:{SHOW:"queryBuilder:show",HIDE:"queryBuilder:hide",TOGGLE:"queryBuilder:toggle"},FEATURE_EDITOR:{SHOW:"featureEditor:show",HIDE:"featureEditor:hide",TOGGLE:"featureEditor:toggle"},MEASURE:{SHOW:"measureWindow:show",HIDE:"measureWindow:hide",TOGGLE:"measureWindow:toggle"},IDENTIFY:{SHOW:"identifyWindow:show",HIDE:"identifyWindow:hide",TOGGLE:"identifyWindow:toggle"},REVERSE_GEOCODE:{SHOW:"reverseGeocodeWindow:show",HIDE:"reverseGeocodeWindow:hide",TOGGLE:"reverseGeocodeWindow:toggle"},PORTAL_PUBLISH:{SHOW:"portalPublish:show",HIDE:"portalPublish:hide",TOGGLE:"portalPublish:toggle"},PORTAL_SEARCH:{SHOW:"portalSearch:show",HIDE:"portalSearch:hide",TOGGLE:"portalSearch:toggle"},ZOOM_TO:{SHOW:"zoomTo:show",HIDE:"zoomTo:hide",TOGGLE:"zoomTo:toggle"},REFLECTIVITY:{SHOW:"reflect:show",HIDE:"reflect:hide",TOGGLE:"reflect:toggle"},PRINT:{SHOW:"print:show",HIDE:"print:hide",TOGGLE:"print:toggle"},PLOTTING:{SHOW:"plotting:show",HIDE:"plotting:hide",TOGGLE:"plotting:toggle"}},DRAW:{USER:{LINE_INPUT:"draw:usrLnIn",POINT_INPUT:"draw:usrPointIn",POLYGON_INPUT:"draw:usrPolyIn",POLYLINE_INPUT:"draw:usrPLnIn",RECTANGLE_INPUT:"draw:usrRectIn",DRAW_CANCEL:"draw:usrDrawCncl",FREEHAND_POLYLINE_INPUT:"draw:usrFrLnIn",FREEHAND_POLYGON_INPUT:"draw:usrFrPolyIn",GET_USER_GRAPHICS:"draw:usrGGraphics"},SYMBOLOGY:{SET_POLYGON:"drawSym:setPolygon",SET_POINT:"drawSym:setPoint",SET_LINE:"drawSym:setLine",SET_ENVELOPE:"drawSym:setEnvelope",SET_TEXT:"drawSym:setText"},DRAW_GRAPHICS_LAYER_CREATED:"draw:drawGraphicsLayerCreated"},NAVIGATION:{DISABLE:"nav:disable",DISABLE_TOOLBAR:"nav:disableToolbar",ENABLE_TOOLBAR:"nav:enableToolbar",PAN:"nav:pan",ZOOM_IN:"nav:zoomIn",ZOOM_OUT:"nav:zoomOut"},LOCATOR:{REVERSE_GEOCODE:"locator:reverseGeocode",SINGLE_LINE_ADDRESS_TO_LOCATION:"locator:addressToLocation",LOCATOR_REQUEST_COMPLETE:"locator:locatorRequestComplete",LOCATOR_REQUEST_ERROR:"locator:locatorRequestError",ADD_LOCATOR:"locator:addLocator",GET_LOCATORS:"locator:getLocators",LOCATOR_ADDED:"locator:locatorAdded",REMOVE_LOCATOR:"locator:remove",LOCATOR_REMOVED:"locator:removed"},BOOKMARK:{STORAGE:{GET:"bookmark:getBookmarks"},CREATE_WINDOW:{SHOW:"bookmark:show",HIDE:"bookmark:hide"},REMOVED:"bookmark:removed",CREATED:"bookmark:created"},CONFIGURE:{WINDOW:{SHOW:"configureWindow:show",HIDE:"configureWindow:hide"}},THROBBER:{SHOW:"throbber:show",HIDE:"throbber:hide",BLOCK_HIDE:"throbber:blockHide",RELEASE_HIDE_BLOCK:"throbber:unblockHide"},TOOLTIP:{CREATE_CONFIRM:"tooltip:createCOnfirm"},MESSAGING:{SHOW:"messaging:show",HIDE:"messaging:hide"},GEOMETRY_SERVICE:{EXISTS:"geometryService:exists",TASKS:{PROJECT_TO_MAP_SR:"geometry:project",CALCULATE_AREA:"geometry:calculateArea",CALCULATE_DISTANCE:"geometry:calculateDistance",PROJECT_TO_LAT_LON:"geometry:projectToLatLon"},BUFFER_POINT:"geometryService:bufferPoint",MGRS_TO_LAT_LON:"geometryService:mrgsToLatLon"},LOGGING:{ADD:"logging:add",CLEAR:"logging:clear",WINDOW:{SHOW:"logging:windowShow",HIDE:"logging:windowHide",TOGGLE:"logging:windowToggle"}},FOOTER:{TOGGLE:"footer:toggle",COLLAPSE:"footer:collapse",EXPAND:"footer:expand",COLLAPSED:"footer:collapsed",EXPANDED:"footer:expanded",IS_EXPANDED:"footer:isExpanded"},CONFIGURATION:{GET:"config:get",GET_ENTRY:"config:getEntry"},PLACEMENT:{GLOBAL:{PLACE:{NAVIGATION_TOOLBAR:"place:navTool",HEADER:"place:header",VIEWER_ACCORDION:"place:vAccor",MAIN_TOOLBAR:"place:mTbar",MAIN_TOOLBAR_DROP_DOWN:"place:mTbardd",FOOTER:"place:ftr",MESSAGING:"place:msging",THROBBER:"place:throbber",BASEMAP_GALLERY:"place:basemapGallery",MAP_SCALE_AND_COORDINATES:"place:mSACoords",CREATE_BOOOKMARK:"place:createBmrk",MENU_BAR:"place:menuBar",USER_LOCATION:"place:usrLoc"}}}},STORAGE:{LABELS:{BOOKMARKS:"bookmarks",USER_GRAPHICS:"userGraphics","BASEMAPS":"basemaps","LOCATORS":"locators","REFERENCE_LAYERS":"referenceLayers","LAYERS":"userLayers"}},SERVICE_TYPES:{GEOMETRY_SERVER:"GeometryServer",GLOBE_SERVER:"GlobeServer",GP_SERVER:"GPServer",GP_TASK:"GPTask",IMAGE_SERVER:"ImageServer",MAP_SERVER:"MapServer",WEB_MAP:"WebMap",PORTAL_SERVER:"PortalServer",GEOCODE_SERVER:"GeocodeServer",FEATURE_LAYER:"FeatureLayer",FEATURE_SERVER:"FeatureServer",KML:"KMLLayer",OPEN_STREET_MAP:"OpenStreetMap",WMS_LAYER:"WMSLayer"},LAYER_TYPES:{IMAGE_SERVER:{LABEL:"Image Service",VALUE:"ImageServer"},MAP_SERVER:{LABEL:"Map Service",VALUE:"MapServer"},FEATURE_LAYER:{LABEL:"Feature Layer",VALUE:"FeatureLayer"},KML:{LABEL:"KML Layer",VALUE:"KMLLayer"}},LOG_TYPE:{WARNING:"warning",ERROR:"error",INFO:"info"},ESRI_FIELD_TYPES:{DATE:"esriFieldTypeDate",DOUBLE:"esriFieldTypeDouble",STRING:"esriFieldTypeString",INTEGER:"esriFieldTypeInteger",SMALL_INTEGER:"esriFieldTypeSmallInteger",GEOMETRY:"esriFieldTypeGeometry",OBJECT_ID:"esriFieldTypeOID",GUID:"esriFieldTypeGUID",GLOBAL_ID:"esriFieldTypeGlobalID"},ESRI_GEOMETRY_TYPES:{POINT:"esriGeometryPoint",LINE:"esriGeometryPolyline",POLYGON:"esriGeometryPolygon",ENVELOPE:"esriGeometryEnvelope"},ESRI_LAYER_TYPES:{FEATURE_LAYER:"Feature Layer",RASTER:"Raster Layer"},ESRI_LAYER_DECLARED_CLASSES:{GRAPHICS_LAYER:"esri.layers.GraphicsLayer",FEATURE_LAYER:"esri.layers.FeatureLayer",TILED_MAP_SERVICE:"esri.layers.ArcGISTiledMapServiceLayer",DYNAMIC_MAP_SERVICE:"esri.layers.ArcGISDynamicMapServiceLayer",IMAGE_SERVICE:"esri.layers.ArcGISImageServiceLayer"},ESRI_UNITS:{ACRES:"esriAcres",METERS:"esriMeters",FEET:"esriFeet",YARDS:"esriYards",MILES:"esriMiles",NAUTICAL_MILES:"esriNauticalMiles",MILLIMETERS:"esriMillimeters",CENTIMETERS:"esriCentimeters",DECIMETERS:"esriDecimeters",KILOMETERS:"esriKilometers",SQUARE_MILES:"esriSquareMiles",SQUARE_METERS:"esriSquareMeters",SQUARE_KILOMETERS:"esriSquareKilometers",SQUARE_ARES:"esriAres",SQUARE_HECTARES:"esriHectares",SQUARE_CENTIMETERS:"esriSquareCentimeters",SQUARE_DECIMETERS:"esriSquareDecimeters",SQUARE_FEET:"esriSquareFeet",SQUARE_INCHES:"esriSquareInches",SQUARE_MILLIMETERS:"esriSquareMillimeters",SQUARE_YARDS:"esriSquareYards",SQUARE_UNKNOWN:"esriUnknownAreaUnits",DECIMAL_DEGREES:"esriDUDecimalDegrees",DEGREE_MINUTE_SECONDS:"esriDegreeMinuteSeconds"},AGS_PORTAL_TYPES:{GEOPROCESSING_SERVICE:"Geoprocessing Service",MAP_SERVICE:"Map Service",WEB_MAP:"Web Map",MAPPING_APPLICATION:"Web Mapping Application",FEATURE_SERVICE:"Feature Service",FEATURE_SERVICE_LAYER:"Feature Service Layer",GEOCODE_SERVICE:"Geocoding Service",DESKTOP_TEMPLATE:"Desktop Application Template",FEATURE_COLLECTION_TEMPLATE:"Feature Collection Template",FEATURED_ITEMS:"Featured Items",LAYER_PACKAGE:"Layer Package",IMAGE_SERVICE:"Image Service",GRAPHICS_LAYER:"Graphics Layer",UNKNOWN:"Unknown",OPEN_STREET_MAPS:"OpenStreetMap"},DEFAULT_PORTAL_ENDPOINTS:{SEARCH_URL_PART:"/sharing/search",VIEWER_URL_PART:"home/webmap/viewer.html",CONTENT_URL_PART:"sharing/content",ITEMS_URL_PART:"sharing/content/items",DEFAULT_MAX_RESULTS:15,USER_CONTENT_PREPEND:"sharing/content/users/",USER_GROUPS_PREPEND:"/sharing/community/users",USER_SHARE_APPEND:"/shareItems",ADD_ITEM_PART_APPEND:"/addItem",PRINT_SERVICE_APPEND:"sharing/tools/print",GENERATE_TOKEN_APPEND:"/sharing/generateToken",PORTAL_VALIDATOR_ENDPOINT:"sharing",DATA_APPEND:"data"},ESRI_RENDERER_TYPES:{SIMPLE:"simple",UNIQUE_VALUE:"uniqueValue",CLASS_BREAKS:"classBreaks"},WINDOW:{TOP_POSITION_MOVE_OFFSET:30},VIEWER_MODES:{SIDEBAR:"sidebar",WINDOW:"window",MOBILE:"mobile"},GP_PARAMETER_DIRECTION:{INPUT:"esriGPParameterDirectionInput",OUTPUT:"esriGPParameterDirectionOutput"},GP_MESSAGE_TYPES:{INFO:["esriJobMessageTypeInformative","esriGPMessageTypeInformative"],WARNING:["esriJobMessageTypeWarning","esriGPMessageTypeWarning"],ERROR:["esriJobMessageTypeAbort","esriGPMessageTypeError","esriJobMessageTypeError","esriGPMessageTypeAbort"]},ANIMATIONS:{LIGHT_SPEED:{OUT:"lightSpeedOut animated",IN:"lightSpeedIn animated",DURATION:300},BOUNCE:{IN:"bounceIn animated",IN_DOWN:"bounceInDown animated",IN_RIGHT:"bounceInRight animated",IN_LEFT:"bounceInLeft animated"},FADE:{IN:"fadeIn animated",OUT:"fadeOut animated",IN_DOWN:"fadeInDown animated"},ROTATE:{IN:"rotateIn animated",OUT:"rotateOut animated"}},MIME_TYPES:{TEXT_PLAIN:"text/plain",EXCEL_VND:"application/vnd.ms-excel"},DEFAULT_REVERSE_GEOCODE_DISTANCE:50,PORTAL_SHARING_REST_URL_PART:"/sharing/rest",REFLECTIVITY_HELP_URL:"http://mesonet.agron.iastate.edu/GIS/radview.phtml"});});},"dijit/form/_RadioButtonMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/_base/lang","dojo/query","../registry"],function(_430,_431,_432,lang,_433,_434){return _431("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var ary=[];_433("input[type=radio]",this.focusNode.form||this.ownerDocument).forEach(lang.hitch(this,function(_435){if(_435.name==this.name&&_435.form==this.focusNode.form){var _436=_434.getEnclosingWidget(_435);if(_436){ary.push(_436);}}}));return ary;},_setCheckedAttr:function(_437){this.inherited(arguments);if(!this._created){return;}if(_437){_430.forEach(this._getRelatedWidgets(),lang.hitch(this,function(_438){if(_438!=this&&_438.checked){_438.set("checked",false);}}));}},_getSubmitValue:function(_439){return _439==null?"on":_439;},_onClick:function(e){if(this.checked||this.disabled){e.stopPropagation();e.preventDefault();return false;}if(this.readOnly){e.stopPropagation();e.preventDefault();_430.forEach(this._getRelatedWidgets(),lang.hitch(this,function(_43a){_432.set(this.focusNode||this.domNode,"checked",_43a.checked);}));return false;}return this.inherited(arguments);}});});},"dojo/data/ItemFileWriteStore":function(){define(["../_base/lang","../_base/declare","../_base/array","../_base/json","../_base/kernel","./ItemFileReadStore","../date/stamp"],function(lang,_43b,_43c,_43d,_43e,_43f,_440){return _43b("dojo.data.ItemFileWriteStore",_43f,{constructor:function(_441){this._features["dojo.data.api.Write"]=true;this._features["dojo.data.api.Notification"]=true;this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};if(!this._datatypeMap["Date"].serialize){this._datatypeMap["Date"].serialize=function(obj){return _440.toISOString(obj,{zulu:true});};}if(_441&&(_441.referenceIntegrity===false)){this.referenceIntegrity=false;}this._saveInProgress=false;},referenceIntegrity:true,_assert:function(_442){if(!_442){throw new Error("assertion failed in ItemFileWriteStore");}},_getIdentifierAttribute:function(){return this.getFeatures()["dojo.data.api.Identity"];},newItem:function(_443,_444){this._assert(!this._saveInProgress);if(!this._loadFinished){this._forceLoad();}if(typeof _443!="object"&&typeof _443!="undefined"){throw new Error("newItem() was passed something other than an object");}var _445=null;var _446=this._getIdentifierAttribute();if(_446===Number){_445=this._arrayOfAllItems.length;}else{_445=_443[_446];if(typeof _445==="undefined"){throw new Error("newItem() was not passed an identity for the new item");}if(lang.isArray(_445)){throw new Error("newItem() was not passed an single-valued identity");}}if(this._itemsByIdentity){this._assert(typeof this._itemsByIdentity[_445]==="undefined");}this._assert(typeof this._pending._newItems[_445]==="undefined");this._assert(typeof this._pending._deletedItems[_445]==="undefined");var _447={};_447[this._storeRefPropName]=this;_447[this._itemNumPropName]=this._arrayOfAllItems.length;if(this._itemsByIdentity){this._itemsByIdentity[_445]=_447;_447[_446]=[_445];}this._arrayOfAllItems.push(_447);var _448=null;if(_444&&_444.parent&&_444.attribute){_448={item:_444.parent,attribute:_444.attribute,oldValue:undefined};var _449=this.getValues(_444.parent,_444.attribute);if(_449&&_449.length>0){var _44a=_449.slice(0,_449.length);if(_449.length===1){_448.oldValue=_449[0];}else{_448.oldValue=_449.slice(0,_449.length);}_44a.push(_447);this._setValueOrValues(_444.parent,_444.attribute,_44a,false);_448.newValue=this.getValues(_444.parent,_444.attribute);}else{this._setValueOrValues(_444.parent,_444.attribute,_447,false);_448.newValue=_447;}}else{_447[this._rootItemPropName]=true;this._arrayOfTopLevelItems.push(_447);}this._pending._newItems[_445]=_447;for(var key in _443){if(key===this._storeRefPropName||key===this._itemNumPropName){throw new Error("encountered bug in ItemFileWriteStore.newItem");}var _44b=_443[key];if(!lang.isArray(_44b)){_44b=[_44b];}_447[key]=_44b;if(this.referenceIntegrity){for(var i=0;i<_44b.length;i++){var val=_44b[i];if(this.isItem(val)){this._addReferenceToMap(val,_447,key);}}}}this.onNew(_447,_448);return _447;},_removeArrayElement:function(_44c,_44d){var _44e=_43c.indexOf(_44c,_44d);if(_44e!=-1){_44c.splice(_44e,1);return true;}return false;},deleteItem:function(item){this._assert(!this._saveInProgress);this._assertIsItem(item);var _44f=item[this._itemNumPropName];var _450=this.getIdentity(item);if(this.referenceIntegrity){var _451=this.getAttributes(item);if(item[this._reverseRefMap]){item["backup_"+this._reverseRefMap]=lang.clone(item[this._reverseRefMap]);}_43c.forEach(_451,function(_452){_43c.forEach(this.getValues(item,_452),function(_453){if(this.isItem(_453)){if(!item["backupRefs_"+this._reverseRefMap]){item["backupRefs_"+this._reverseRefMap]=[];}item["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(_453),attr:_452});this._removeReferenceFromMap(_453,item,_452);}},this);},this);var _454=item[this._reverseRefMap];if(_454){for(var _455 in _454){var _456=null;if(this._itemsByIdentity){_456=this._itemsByIdentity[_455];}else{_456=this._arrayOfAllItems[_455];}if(_456){for(var _457 in _454[_455]){var _458=this.getValues(_456,_457)||[];var _459=_43c.filter(_458,function(_45a){return !(this.isItem(_45a)&&this.getIdentity(_45a)==_450);},this);this._removeReferenceFromMap(item,_456,_457);if(_459.length<_458.length){this._setValueOrValues(_456,_457,_459,true);}}}}}}this._arrayOfAllItems[_44f]=null;item[this._storeRefPropName]=null;if(this._itemsByIdentity){delete this._itemsByIdentity[_450];}this._pending._deletedItems[_450]=item;if(item[this._rootItemPropName]){this._removeArrayElement(this._arrayOfTopLevelItems,item);}this.onDelete(item);return true;},setValue:function(item,_45b,_45c){return this._setValueOrValues(item,_45b,_45c,true);},setValues:function(item,_45d,_45e){return this._setValueOrValues(item,_45d,_45e,true);},unsetAttribute:function(item,_45f){return this._setValueOrValues(item,_45f,[],true);},_setValueOrValues:function(item,_460,_461,_462){this._assert(!this._saveInProgress);this._assertIsItem(item);this._assert(lang.isString(_460));this._assert(typeof _461!=="undefined");var _463=this._getIdentifierAttribute();if(_460==_463){throw new Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");}var _464=this._getValueOrValues(item,_460);var _465=this.getIdentity(item);if(!this._pending._modifiedItems[_465]){var _466={};for(var key in item){if((key===this._storeRefPropName)||(key===this._itemNumPropName)||(key===this._rootItemPropName)){_466[key]=item[key];}else{if(key===this._reverseRefMap){_466[key]=lang.clone(item[key]);}else{_466[key]=item[key].slice(0,item[key].length);}}}this._pending._modifiedItems[_465]=_466;}var _467=false;if(lang.isArray(_461)&&_461.length===0){_467=delete item[_460];_461=undefined;if(this.referenceIntegrity&&_464){var _468=_464;if(!lang.isArray(_468)){_468=[_468];}for(var i=0;i<_468.length;i++){var _469=_468[i];if(this.isItem(_469)){this._removeReferenceFromMap(_469,item,_460);}}}}else{var _46a;if(lang.isArray(_461)){_46a=_461.slice(0,_461.length);}else{_46a=[_461];}if(this.referenceIntegrity){if(_464){var _468=_464;if(!lang.isArray(_468)){_468=[_468];}var map={};_43c.forEach(_468,function(_46b){if(this.isItem(_46b)){var id=this.getIdentity(_46b);map[id.toString()]=true;}},this);_43c.forEach(_46a,function(_46c){if(this.isItem(_46c)){var id=this.getIdentity(_46c);if(map[id.toString()]){delete map[id.toString()];}else{this._addReferenceToMap(_46c,item,_460);}}},this);for(var rId in map){var _46d;if(this._itemsByIdentity){_46d=this._itemsByIdentity[rId];}else{_46d=this._arrayOfAllItems[rId];}this._removeReferenceFromMap(_46d,item,_460);}}else{for(var i=0;i<_46a.length;i++){var _469=_46a[i];if(this.isItem(_469)){this._addReferenceToMap(_469,item,_460);}}}}item[_460]=_46a;_467=true;}if(_462){this.onSet(item,_460,_464,_461);}return _467;},_addReferenceToMap:function(_46e,_46f,_470){var _471=this.getIdentity(_46f);var _472=_46e[this._reverseRefMap];if(!_472){_472=_46e[this._reverseRefMap]={};}var _473=_472[_471];if(!_473){_473=_472[_471]={};}_473[_470]=true;},_removeReferenceFromMap:function(_474,_475,_476){var _477=this.getIdentity(_475);var _478=_474[this._reverseRefMap];var _479;if(_478){for(_479 in _478){if(_479==_477){delete _478[_479][_476];if(this._isEmpty(_478[_479])){delete _478[_479];}}}if(this._isEmpty(_478)){delete _474[this._reverseRefMap];}}},_dumpReferenceMap:function(){var i;for(i=0;i<this._arrayOfAllItems.length;i++){var item=this._arrayOfAllItems[i];if(item&&item[this._reverseRefMap]){}}},_getValueOrValues:function(item,_47a){var _47b=undefined;if(this.hasAttribute(item,_47a)){var _47c=this.getValues(item,_47a);if(_47c.length==1){_47b=_47c[0];}else{_47b=_47c;}}return _47b;},_flatten:function(_47d){if(this.isItem(_47d)){return {_reference:this.getIdentity(_47d)};}else{if(typeof _47d==="object"){for(var type in this._datatypeMap){var _47e=this._datatypeMap[type];if(lang.isObject(_47e)&&!lang.isFunction(_47e)){if(_47d instanceof _47e.type){if(!_47e.serialize){throw new Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+type+"]");}return {_type:type,_value:_47e.serialize(_47d)};}}else{if(_47d instanceof _47e){return {_type:type,_value:_47d.toString()};}}}}return _47d;}},_getNewFileContentString:function(){var _47f={};var _480=this._getIdentifierAttribute();if(_480!==Number){_47f.identifier=_480;}if(this._labelAttr){_47f.label=this._labelAttr;}_47f.items=[];for(var i=0;i<this._arrayOfAllItems.length;++i){var item=this._arrayOfAllItems[i];if(item!==null){var _481={};for(var key in item){if(key!==this._storeRefPropName&&key!==this._itemNumPropName&&key!==this._reverseRefMap&&key!==this._rootItemPropName){var _482=this.getValues(item,key);if(_482.length==1){_481[key]=this._flatten(_482[0]);}else{var _483=[];for(var j=0;j<_482.length;++j){_483.push(this._flatten(_482[j]));_481[key]=_483;}}}}_47f.items.push(_481);}}var _484=true;return _43d.toJson(_47f,_484);},_isEmpty:function(_485){var _486=true;if(lang.isObject(_485)){var i;for(i in _485){_486=false;break;}}else{if(lang.isArray(_485)){if(_485.length>0){_486=false;}}}return _486;},save:function(_487){this._assert(!this._saveInProgress);this._saveInProgress=true;var self=this;var _488=function(){self._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};self._saveInProgress=false;if(_487&&_487.onComplete){var _489=_487.scope||_43e.global;_487.onComplete.call(_489);}};var _48a=function(err){self._saveInProgress=false;if(_487&&_487.onError){var _48b=_487.scope||_43e.global;_487.onError.call(_48b,err);}};if(this._saveEverything){var _48c=this._getNewFileContentString();this._saveEverything(_488,_48a,_48c);}if(this._saveCustom){this._saveCustom(_488,_48a);}if(!this._saveEverything&&!this._saveCustom){_488();}},revert:function(){this._assert(!this._saveInProgress);var _48d;for(_48d in this._pending._modifiedItems){var _48e=this._pending._modifiedItems[_48d];var _48f=null;if(this._itemsByIdentity){_48f=this._itemsByIdentity[_48d];}else{_48f=this._arrayOfAllItems[_48d];}_48e[this._storeRefPropName]=this;for(var key in _48f){delete _48f[key];}lang.mixin(_48f,_48e);}var _490;for(_48d in this._pending._deletedItems){_490=this._pending._deletedItems[_48d];_490[this._storeRefPropName]=this;var _491=_490[this._itemNumPropName];if(_490["backup_"+this._reverseRefMap]){_490[this._reverseRefMap]=_490["backup_"+this._reverseRefMap];delete _490["backup_"+this._reverseRefMap];}this._arrayOfAllItems[_491]=_490;if(this._itemsByIdentity){this._itemsByIdentity[_48d]=_490;}if(_490[this._rootItemPropName]){this._arrayOfTopLevelItems.push(_490);}}for(_48d in this._pending._deletedItems){_490=this._pending._deletedItems[_48d];if(_490["backupRefs_"+this._reverseRefMap]){_43c.forEach(_490["backupRefs_"+this._reverseRefMap],function(_492){var _493;if(this._itemsByIdentity){_493=this._itemsByIdentity[_492.id];}else{_493=this._arrayOfAllItems[_492.id];}this._addReferenceToMap(_493,_490,_492.attr);},this);delete _490["backupRefs_"+this._reverseRefMap];}}for(_48d in this._pending._newItems){var _494=this._pending._newItems[_48d];_494[this._storeRefPropName]=null;this._arrayOfAllItems[_494[this._itemNumPropName]]=null;if(_494[this._rootItemPropName]){this._removeArrayElement(this._arrayOfTopLevelItems,_494);}if(this._itemsByIdentity){delete this._itemsByIdentity[_48d];}}this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};return true;},isDirty:function(item){if(item){var _495=this.getIdentity(item);return new Boolean(this._pending._newItems[_495]||this._pending._modifiedItems[_495]||this._pending._deletedItems[_495]).valueOf();}else{return !this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems);}},onSet:function(item,_496,_497,_498){},onNew:function(_499,_49a){},onDelete:function(_49b){},close:function(_49c){if(this.clearOnClose){if(!this.isDirty()){this.inherited(arguments);}else{throw new Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");}}}});});},"dojox/storage/Provider":function(){define(["dijit","dojo","dojox"],function(_49d,dojo,_49e){dojo.provide("dojox.storage.Provider");dojo.declare("dojox.storage.Provider",null,{constructor:function(){},SUCCESS:"success",FAILED:"failed",PENDING:"pending",SIZE_NOT_AVAILABLE:"Size not available",SIZE_NO_LIMIT:"No size limit",DEFAULT_NAMESPACE:"default",onHideSettingsUI:null,initialize:function(){},isAvailable:function(){},put:function(key,_49f,_4a0,_4a1){},get:function(key,_4a2){},hasKey:function(key,_4a3){return !!this.get(key,_4a3);},getKeys:function(_4a4){},clear:function(_4a5){},remove:function(key,_4a6){},getNamespaces:function(){},isPermanent:function(){},getMaximumSize:function(){},putMultiple:function(keys,_4a7,_4a8,_4a9){for(var i=0;i<keys.length;i++){_49e.storage.put(keys[i],_4a7[i],_4a8,_4a9);}},getMultiple:function(keys,_4aa){var _4ab=[];for(var i=0;i<keys.length;i++){_4ab.push(_49e.storage.get(keys[i],_4aa));}return _4ab;},removeMultiple:function(keys,_4ac){for(var i=0;i<keys.length;i++){_49e.storage.remove(keys[i],_4ac);}},isValidKeyArray:function(keys){if(keys===null||keys===undefined||!dojo.isArray(keys)){return false;}return !dojo.some(keys,function(key){return !this.isValidKey(key);},this);},hasSettingsUI:function(){return false;},showSettingsUI:function(){},hideSettingsUI:function(){},isValidKey:function(_4ad){if(_4ad===null||_4ad===undefined){return false;}return /^[0-9A-Za-z_]*$/.test(_4ad);},getResourceList:function(){return [];}});});},"esriviewer/map/MapManager":function(){define(["dojo/_base/declare","dojo/on","dojo/dom-construct","dojo/has","dojo/topic","dojo/_base/lang","dojo/dom","./base/MapUtils","./base/MapExtentTools","./base/MapLayersTools","./base/MapDisplayWidgets","./base/MapNavDrawTools","./base/MapTimeTools","dijit/layout/ContentPane","../ui/basemap/BasemapGalleryWidget","esri/dijit/OverviewMap","esri/config","esri/geometry/Extent","esri/map","esri/urlUtils","esri/arcgis/utils"],function(_4ae,on,_4af,has,_4b0,lang,dom,_4b1,_4b2,_4b3,_4b4,_4b5,_4b6,_4b7,_4b8,_4b9,_4ba,_4bb,Map,_4bc,_4bd){return _4ae([],{__defaultZoomSliderPosition:{x:10,y:120},hasGeometryService:false,maxClientZoom:null,hideLatLongDisplay:false,hideMGRSDisplay:true,disableKeyboardNavigation:true,hideMapScale:false,constructor:function(_4be){lang.mixin(this,_4be||{});this.mapInitializationParameters={wrapAround180:true,force3DTransforms:false,navigationMode:"classic"};this.loadViewerConfigurationData();this.initMap();},loadViewerConfigurationData:function(){var _4bf=null;_4b0.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"geometryService",function(_4c0){_4bf=_4c0;});this.hasGeometryService=_4bf!=null;var _4c1;_4b0.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_4c2){_4c1=_4c2;});if(_4c1&&lang.isObject(_4c1)){this.mapConfiguration=_4c1;this.basemaps=this.mapConfiguration.basemaps;var _4c3=false;if(this.mapConfiguration.display!=null&&lang.isObject(this.mapConfiguration.display)&&this.mapConfiguration.display.showScale!=null&&this.mapConfiguration.display.showScale==false){this.hideMapScale=true;}if(this.mapConfiguration.disableKeyboardNavigation!=null&&this.mapConfiguration.disableKeyboardNavigation==false){this.disableKeyboardNavigation=false;}if(this.mapConfiguration.maxClientZoom!=null){try{this.maxClientZoom=parseInt(this.mapConfiguration.maxClientZoom,10);}catch(err){}}lang.mixin(this.mapInitializationParameters,this.mapConfiguration.initializationParameters||{});}},initListeners:function(){this.map.on("load",lang.hitch(this,this.handleMapLoaded));this.map.on("update-start",function(){_4b0.publish(VIEWER_GLOBALS.EVENTS.THROBBER.SHOW);});this.map.on("zoom-end",lang.hitch(this,this.handleZoomLevelChanged));this.map.on("update-end",function(){_4b0.publish(VIEWER_GLOBALS.EVENTS.THROBBER.HIDE);});this.map.on("extent-change",lang.hitch(this,this.handleMapExtentChange));_4b0.subscribe(VIEWER_GLOBALS.EVENTS.MAP.GET,lang.hitch(this,this.handleGetMap));on(window,"resize",lang.hitch(this,function(){this.map.resize();}));},handleMapExtentChange:function(evt){if(!this.hideMapScale){this.mapExtentTools.handleMapExtentChanged();}_4b0.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.CHANGED,evt);},handleGetMap:function(_4c4){if(_4c4!=null&&lang.isFunction(_4c4)){_4c4(this.map);}},initMap:function(){var _4c5;_4b0.publish(VIEWER_GLOBALS.EVENTS.MAP.GET_MAP_DIV,function(mD){_4c5=mD;});this.mapDiv=_4c5;new _4b7({region:"center",style:"height: 100%; width: 100%; margin: 0; padding: 0; overflow: hidden;"},this.mapDiv);if(this.mapConfiguration.zoomSlider==null||this.mapConfiguration.zoomSlider.create!=false){var _4c6=this.__defaultZoomSliderPosition.x;var _4c7=this.__defaultZoomSliderPosition.y;if(VIEWER_GLOBALS&&VIEWER_GLOBALS.windowPositioning&&VIEWER_GLOBALS.windowPositioning.zoomSlider&&lang.isObject(VIEWER_GLOBALS.windowPositioning.zoomSlider)){_4c6=VIEWER_GLOBALS.windowPositioning.zoomSlider.x;_4c7=VIEWER_GLOBALS.windowPositioning.zoomSlider.y;var _4c8="left";var _4c9="top";if(VIEWER_GLOBALS.windowPositioning.zoomSlider.alignY!=null&&lang.isString(VIEWER_GLOBALS.windowPositioning.zoomSlider.alignY)){var _4ca=VIEWER_GLOBALS.windowPositioning.zoomSlider.alignY.toLowerCase();if(_4ca==="top"||_4ca==="bottom"){_4c9=_4ca;}}if(VIEWER_GLOBALS.windowPositioning.zoomSlider.alignX!=null&&lang.isString(VIEWER_GLOBALS.windowPositioning.zoomSlider.alignX)){var _4cb=VIEWER_GLOBALS.windowPositioning.zoomSlider.alignX.toLowerCase();if(_4cb==="left"||_4cb==="right"){_4c8=_4cb;}}}var _4cc={width:null,height:"150px"};_4cc[_4c8]=_4c6+"px";_4cc[_4c9]=_4c7+"px";if(has("ie")){_4cc.height="80px";}_4ba.defaults.map.slider=_4cc;}else{this.mapInitializationParameters.slider=false;}if(this.mapConfiguration.initialExtent!=null&&lang.isObject(this.mapConfiguration.initialExtent)){var _4cd=this.mapConfiguration.initialExtent;this.initialExtent=new _4bb({xmin:_4cd.xmin,ymin:_4cd.ymin,xmax:_4cd.xmax,ymax:_4cd.ymax,spatialReference:_4cd.spatialReference});this.mapInitializationParameters.extent=this.initialExtent;}if(lang.isArray(this.mapConfiguration.lods)){this.mapInitializationParameters.lods=this.mapConfiguration.lods;}if(this.webMapItem){this.map=_4bd.createMap(this.webMapItem,this.mapDiv).then(lang.hitch(this,function(_4ce){this.mapCreated(_4ce.map);this.handleMapLoaded();}));}else{var map=new Map(this.mapDiv,this.mapInitializationParameters);if(this.disableKeyboardNavigation){map.disableKeyboardNavigation();}this.mapCreated(map);}},mapCreated:function(map){this.map=map;this.mapDisplayWidgets=new _4b4({map:this.map,mapDiv:this.mapDiv});this.mapExtentTools=new _4b2({mapDisplayWidgets:this.mapDisplayWidgets,map:this.map,mapUtils:this.mapUtils,maxClientZoom:this.maxClientZoom});this.mapLayersTools=new _4b3({map:this.map,basemaps:this.basemaps,mapConfiguration:this.mapConfiguration,webMapItem:this.webMapItem});this.mapUtils=new _4b1({map:this.map,mapDiv:this.mapDiv,operationalLayers:this.mapLayersTools.operationalLayers});this.mapNavDrawTools=new _4b5({map:this.map});this.mapTimeTools=new _4b6({map:this.map});this.initListeners();this.initBasemaps();},initBasemaps:function(){if(this.mapConfiguration.useBasemapGallery==null||this.mapConfiguration.useBasemapGallery!=true){for(var key in this.basemaps){this.mapLayersTools.changeBaseMaps(key);break;}}else{this.basemapGalleryWidget=new _4b8();}},handleMapLoaded:function(){if(this.webMapItem&&this.webMapItem.itemData){this.mapLayersTools.addWebMapOperationalLayers(this.webMapItem);}else{this.mapLayersTools.loadMapConfigurationLayers();}if(this.mapConfiguration.overview==null||this.mapConfiguration.overview.create!=false){this.overviewMapDijit=new _4b9({attachTo:"bottom-right",color:"#D84E13",opacity:0.4,map:this.map,visible:true,width:225,height:175});this.overviewMapDijit.startup();}_4b0.publish(VIEWER_GLOBALS.EVENTS.MAP.LOADED,this.map);this.onMapLoaded();},handleZoomLevelChanged:function(evt){if(evt==null){return;}var _4cf=evt.extent;var _4d0=evt.zoomFactor;var _4d1=evt.anchor;var _4d2=evt.level;_4b0.publish(VIEWER_GLOBALS.EVENTS.MAP.LEVEL.CHANGED,_4cf,_4d0,_4d1,_4d2);},onMapLoaded:function(){}});});},"esriviewer/util/GeometryUtils":function(){define(["dojo/_base/declare"],function(_4d3){return _4d3([],{polygonIntersectsPoint:function(pt,_4d4){var ext=_4d4.getExtent();return (pt.x>=ext.xmin&&pt.y>=ext.ymin&&pt.x<=ext.xmax&&pt.y<=ext.ymax);},ddToDMSString:function(_4d5){var _4d6;var _4d7=false;if(_4d5<0){_4d7=true;_4d5=Math.abs(_4d5);}_4d6=Math.floor(_4d5)+""+Math.floor((_4d5-Math.floor(_4d5))*60)+"'"+Math.floor(((_4d5-Math.floor(_4d5))*60-Math.floor((_4d5-Math.floor(_4d5))*60))*60)+"\"";if(_4d7){_4d6="-"+_4d6;}return _4d6;}});});},"esriviewer/ui/weather/conditions/WeatherWidgetWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/window","dojo/dom-style","../../window/WindowWidget"],function(_4d8,lang,_4d9,_4da,_4db,_4dc){return _4d8([_4dc],{defaultPositioning:{x:400,y:125},windowWidth:"350px",windowHeaderText:"Weather",windowIconAltText:"Weather",windowIconClass:"commonIcons16 weather",positioningParamName:"weather",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/weather/conditions/WeatherWidget"],lang.hitch(this,function(_4dd){this.weatherWidget=new _4dd();this.setContent(this.weatherWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_4d9.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.WEATHER.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_4d9.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.WEATHER.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_4d9.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.WEATHER.TOGGLE,lang.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.weatherWidget){this.weatherWidget.clearDraw();}}});});},"esriviewer/ui/draw/configure/geometry/ConfigurePolygonWidget":function(){define(["dojo/_base/declare","dojo/text!./template/ConfigurePolygonTemplate.html","dojo/topic","dojo/_base/lang","dojo/_base/Color","./model/ConfigurePolygonViewModel","./BaseGeometryConfigurationWidget","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol"],function(_4de,_4df,_4e0,lang,_4e1,_4e2,_4e3,_4e4,_4e5){return _4de([_4e3],{defaultTransparency:50,templateString:_4df,postCreate:function(){this.inherited(arguments);this.viewModel=new _4e2();this.viewModel.fillColorActive.subscribe(lang.hitch(this,this.handleFillColorToggled));this.viewModel.selectedAngle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedFillStyle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedOutlineStyle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedAngle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedOutlineWidth.subscribe(lang.hitch(this,this.processChange));this.outlineColor=new _4e1([255,0,0,this.getTransparency()/100]);this.fillColor=new _4e1([255,0,0,this.getTransparency()/100]);this.colorPicker.set("value",this.outlineColor.toHex());ko.applyBindings(this.viewModel,this.domNode);},handleTransparencyChanged:function(){var _4e6=this.getTransparency()/100;this.outlineColor=new _4e1([this.outlineColor.r,this.outlineColor.g,this.outlineColor.b,_4e6]);this.fillColor=new _4e1([this.fillColor.r,this.fillColor.g,this.fillColor.b,_4e6]);this.inherited(arguments);},handleFillColorToggled:function(_4e7){if(_4e7){this.colorPicker.set("value",this.fillColor.toHex());}else{this.colorPicker.set("value",this.outlineColor.toHex());}},handleColorPickerChanged:function(){if(this.viewModel.outlineColorActive()){this.outlineColor=this.getColor();}else{this.fillColor=this.getColor();}this.processChange();},processChange:function(){this.onChange(this.getSymbol());},getSymbol:function(){return new _4e4(this.viewModel.selectedFillStyle(),new _4e5(this.viewModel.selectedOutlineStyle(),this.outlineColor,this.viewModel.selectedOutlineWidth()),this.fillColor);}});});},"esriviewer/ui/draw/configure/ConfigureDrawWidget":function(){define(["dojo/_base/declare","dojo/text!./template/ConfigureDrawTemplate.html","dojo/_base/lang","dojo/on","../../base/UITemplatedWidget","./model/ConfigureDrawViewModel","./geometry/ConfigurePointWidget","./geometry/ConfigureLineWidget","./geometry/ConfigureTextWidget","./geometry/ConfigurePolygonWidget"],function(_4e8,_4e9,lang,on,_4ea,_4eb,_4ec,_4ed,_4ee,_4ef){return _4e8([_4ea],{showConfigureGeometryIcons:true,showTextIcon:true,showEnvelopeIcon:true,templateString:_4e9,postCreate:function(){this.inherited(arguments);this.viewModel=new _4eb();this.viewModel.showEnvelopeIcon(this.showEnvelopeIcon);this.viewModel.showTextIcon(this.showTextIcon);this.viewModel.showConfigureGeometryIcons(this.showConfigureGeometryIcons);ko.applyBindings(this.viewModel,this.domNode);this.createConfigurationWidgets();},createConfigurationWidgets:function(){this.pointConfigurationWidget=new _4ec();this.pointConfigurationWidget.placeAt(this.configurePointWidgetContainer);this.pointConfigurationWidget.on("change",lang.hitch(this,this.handlePointSymbolChanged));this.lineConfigurationWidget=new _4ed();this.lineConfigurationWidget.placeAt(this.configureLineWidgetContainer);this.lineConfigurationWidget.on("change",lang.hitch(this,this.handleLineSymbolChanged));this.rectangleConfigurationWidget=new _4ef();this.rectangleConfigurationWidget.placeAt(this.configureRectangleWidgetContainer);this.rectangleConfigurationWidget.on("change",lang.hitch(this,this.handleRectangleSymbolChanged));this.configureTextWidget=new _4ee();this.configureTextWidget.placeAt(this.configureTextWidgetContainer);this.configureTextWidget.on("change",lang.hitch(this,this.handleTextSymbolChanged));this.configurePolygonWidget=new _4ef();this.configurePolygonWidget.placeAt(this.configurePolygonWidgetContainer);this.configurePolygonWidget.on("change",lang.hitch(this,this.handlePolygonSymbolChanged));},handlePointSymbolChanged:function(_4f0){this.onPointSymbolChanged(_4f0);},handleLineSymbolChanged:function(_4f1){this.onLineSymbolChanged(_4f1);},handlePolygonSymbolChanged:function(_4f2){this.onPolygonSymbolChanged(_4f2);},handleTextSymbolChanged:function(_4f3){this.onTextSymbolChanged(_4f3);},handleRectangleSymbolChanged:function(_4f4){this.onRectangleSymbolChanged(_4f4);},onPointSymbolChanged:function(_4f5){},onLineSymbolChanged:function(_4f6){},onPolygonSymbolChanged:function(_4f7){},onTextSymbolChanged:function(_4f8){},onRectangleSymbolChanged:function(_4f9){}});});},"esriviewer/ui/draw/configure/geometry/ConfigureLineWidget":function(){define(["dojo/_base/declare","dojo/text!./template/ConfigureLineTemplate.html","dojo/topic","dojo/_base/lang","dojo/_base/Color","./model/ConfigureLineViewModel","./BaseGeometryConfigurationWidget","esri/symbols/SimpleLineSymbol"],function(_4fa,_4fb,_4fc,lang,_4fd,_4fe,_4ff,_500){return _4fa([_4ff],{templateString:_4fb,postCreate:function(){this.inherited(arguments);this.viewModel=new _4fe();this.viewModel.selectedLineStyle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedWidth.subscribe(lang.hitch(this,this.processChange));ko.applyBindings(this.viewModel,this.domNode);},processChange:function(){this.onChange(this.getSymbol());},getSymbol:function(){return new _500(this.viewModel.selectedLineStyle(),this.getColor(),this.viewModel.selectedWidth());}});});},"esriviewer/ui/layers/LayersTocWidget":function(){define(["dojo/_base/declare","dojo/text!./template/LayersTocWidgetTemplate.html","dojo/_base/array","dojo/topic","dojo/_base/lang","dojo/dom-style","dojo/dom-class","dojo/dom-construct","dijit/Tree","dijit/tree/ForestStoreModel","dijit/tree/dndSource","dojo/dnd/Avatar","dojo/dnd/Manager","dojo/data/ItemFileWriteStore","./base/LayersTocWidgetContextMenu","../base/UITemplatedWidget","esri/layers/ArcGISTiledMapServiceLayer"],function(_501,_502,_503,_504,lang,_505,_506,_507,Tree,_508,_509,_50a,_50b,_50c,_50d,_50e,_50f){return _501([_50e],{templateString:_502,constructor:function(){this.treeStore=new _50c({data:{items:[],identifier:"id",label:"label"}});this.treeModel=new _508({store:this.treeStore,openOnClick:true});this.tree=new Tree({model:this.treeModel,getIconClass:lang.hitch(this,this.getTreeIcon),showRoot:false});_505.set(this.tree.domNode,"height","100%");this.treeContextMenu=new _50d({tree:this.tree});this.treeContextMenu.bindNodeToNoContentMenu(this.tree.rootNode.domNode);},postCreate:function(){this.inherited(arguments);_507.place(this.tree.domNode,this.tocContainer);},initListeners:function(){this.tree.on("click",lang.hitch(this,this.treeClickHandler));},getNodeFromItem:function(item){var _510=item.id[0];return this.tree._itemNodesMap[_510][0];},getTreeIcon:function(item,_511){if(item.root){return "tocIcons layerService";}var _512=null;var _513=null;if(item.layer){_512=this.treeStore.getValue(item,"layer");}if(item.layerId){_513=this.treeStore.getValue(item,"layerId");}if(_512){if(_513!=null){var _514=this.treeStore.getValue(item,"info");if(lang.isArray(_514.subLayerIds)&&_514.subLayerIds.length>0){if(_511){return "tocIcons folderOpen";}else{return "tocIcons folderClosed";}}else{var _515=_503.indexOf(_512.visibleLayers,_513)>-1;if(lang.isObject(_514.metadata)){var _516=_514.metadata;if(_516.geometryType!=""){if(_516.geometryType==VIEWER_GLOBALS.ESRI_GEOMETRY_TYPES.POINT){if(_512.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.TILED_MAP_SERVICE){return "tocIcons layerPoint";}if(_515){return "tocIcons layerPointChecked";}else{return "tocIcons layerPointUnchecked";}}else{if(_516.geometryType==VIEWER_GLOBALS.ESRI_GEOMETRY_TYPES.LINE){if(_512.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.TILED_MAP_SERVICE){return "tocIcons layerLine";}if(_515){return "tocIcons layerLineChecked";}else{return "tocIcons layerLineUnchecked";}}else{if(_516.geometryType==VIEWER_GLOBALS.ESRI_GEOMETRY_TYPES.POLYGON){if(_512.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.TILED_MAP_SERVICE){return "tocIcons layerPolygon";}if(_515){return "tocIcons layerPolygonChecked";}else{return "tocIcons layerPolygonUnchecked";}}else{if(_512.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.TILED_MAP_SERVICE){return "tocIcons layerGeneric";}if(_515){return "layerGenericChecked";}else{return "layerGenericUnchecked";}}}}}else{if(_516.type==VIEWER_GLOBALS.ESRI_LAYER_TYPES.RASTER){if(_512 instanceof _50f){return "tocIcons layerRasterIcon";}if(_515){return "tocIcons layerRasterIconChecked";}else{return "tocIcons layerRasterIconUnchecked";}}else{return _515?"tocIcons layerGenericChecked":"tocIcons layerGenericUnchecked";}}}else{if(_512.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.IMAGE_SERVICE){return "genericLayerIcon";}else{return _515?"tocIcons layerGenericChecked":"tocIcons layerGenericUnchecked";}}}}else{if(_512.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.IMAGE_SERVICE){if(_512.visible){return "tocIcons imageServiceChecked";}else{return "tocIcons imageServiceUnchecked";}}else{if(_512.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.DYNAMIC_MAP_SERVICE){if(_512.visible){return "tocIcons globeChecked";}else{return "tocIcons globeUnchecked";}}else{if(_512.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.TILED_MAP_SERVICE){if(_512.visible){return "tocIcons layerRasterChecked";}else{return "tocIcons layerRasterUnchecked";}}else{if(_512.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.FEATURE_LAYER){if(_512.visible){return "tocIcons layerGenericChecked";}else{return "tocIcons layerGenericUnchecked";}}else{if(_512.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.GRAPHICS_LAYER){if(_512.visible){return "tocIcons graphicsLayerChecked";}else{return "tocIcons graphicsLayerUnchecked";}}else{if(_512.visible){return "tocIcons layerGenericChecked";}else{return "tocIcons layerGenericUnchecked";}}}}}}}}return "tocIcons layerGeneric";},addTreeNode:function(item,_517){var _518={children:[]};_518.parent=_517;if(_517.children!=null){_518.attribute="children";}return this.treeStore.newItem(item,_518);},addLayer:function(_519){if(_519==null||!_519.isOperationalLayer){return;}var _51a=VIEWER_UTILS.getLayerNameFromLayer(_519);var _51b={label:_51a,serviceId:_519.id,layer:_519,id:VIEWER_UTILS.generateUUID()};if(lang.isArray(_519.layerInfos)&&_519.layerInfos.length>0){_51b.children=[];}var _51c=this.addTreeNode(_51b,this.tree.rootNode);var _51d=this.getNodeFromItem(_51c);if(!(_519.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.GRAPHICS_LAYER)||(_519.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.FEATURE_LAYER)){this.treeContextMenu.bindNodeToServerMenu(_51d.domNode);}else{this.treeContextMenu.bindNodeToGraphicsLayerMenu(_51d.domNode);}this.checkForChildLayers(_519,_51c);},checkForChildLayers:function(_51e,_51f){var _520={};var _521=_51e.layerInfos;if(lang.isArray(_521)){var _522=_51f;var _523;for(var i=0;i<_521.length;i++){_523=false;var info=_521[i];if(info==null){continue;}var name=info.name;var _524={id:VIEWER_UTILS.generateUUID(),label:name,layerId:info.id,serviceId:_51e.id,layer:_51e,info:info};if(lang.isArray(info.subLayerIds)){_524.children=[];_523=true;}if(info.parentLayerId>-1){_522=_520[info.parentLayerId];if(_522==null){return;}}var _525=this.addTreeNode(_524,_522);var _526=this.getNodeFromItem(_525);if(_523){_520[info.id]=_525;this.treeContextMenu.bindNodeToGroupMenu(_526.domNode);}else{this.treeContextMenu.bindNodeToLayerMenu(_526.domNode);}}}},removeLayer:function(_527){if(_527==null){return;}var _528;this.treeStore.fetch({query:{serviceId:_527.id},queryOptions:{deep:false},onComplete:lang.hitch(this,this.deleteNodes)});},deleteNodes:function(_529){for(var i=0;i<_529.length;i++){this.deleteNode(_529[i]);}},deleteChildNodes:function(item){var _52a=this.treeStore.getValue(item,"isPersistedToCookie");if(_52a){var url=this.treeStore.getValue(item,"url");}var node=this.getNodeFromItem(item);var _52b=node.getChildren();for(var i=0;i<_52b.length;i++){this.deleteNode(_52b[i].item);}this.treeStore.save();},deleteNode:function(item){this.deleteChildNodes(item);this.treeStore.deleteItem(item);this.treeStore.save();},treeClickHandler:function(item,node,_52c){var _52d=null;var _52e=null;if(item.layer){_52d=this.treeStore.getValue(item,"layer");}if(item.layerId){_52e=this.treeStore.getValue(item,"layerId");}if(_52d instanceof _50f&&item.layerId!=null){return;}if(_52d&&_52e==null){if(_52d.visible){_52d.hide();}else{_52d.show();}}else{if(_52d&&_52e!=null){this.toggleDynamicSubLayerItem(_52d,_52e);this.processVisibleLayers(_52d);}}node._updateItemClasses(item);},processVisibleLayers:function(_52f){if(_52f.visibleLayers.length==0){_52f.setVisibleLayers([-1]);}else{var _530=VIEWER_UTILS.sortIntegerArray(_52f.visibleLayers);_52f.setVisibleLayers(_530);}},toggleDynamicSubLayerItem:function(_531,_532){if(_531==null){return;}var _533=_503.indexOf(_531.visibleLayers,_532)>-1;if(_533){var _534=_503.indexOf(_531.visibleLayers,_532);if(_534>-1){_531.visibleLayers.splice(_534,1);}}else{_531.visibleLayers.push(_532);}}});});},"esriviewer/map/base/MapNavDrawTools":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/connect","dojo/_base/lang","dojox/timing","dojo/_base/Color","esri/toolbars/draw","esri/graphic","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Extent","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol"],function(_535,_536,con,lang,_537,_538,Draw,_539,_53a,_53b,_53c,_53d,_53e,_53f){return _535([],{CROSSHAIR:"crosshair",DEFAULT:"default",MOVE:"move",POINTER:"pointer",currentGraphicFlashCount:0,maxGraphicFlashCount:3,currentFlashGraphicVisible:false,constructor:function(_540){lang.mixin(this,_540);this.initListeners();this.createDrawToolbar();},createDrawToolbar:function(){this.drawToolbar=new Draw(this.map,{showTooltips:true});},initListeners:function(){_536.subscribe(VIEWER_GLOBALS.EVENTS.MAP.FLASH.POINT,lang.hitch(this,this.flashPoint));_536.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.DRAW_CANCEL,lang.hitch(this,this.handleDrawCancel));_536.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.RECTANGLE_INPUT,lang.hitch(this,this.handleUserRectangleDrawInput));_536.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.POLYLINE_INPUT,lang.hitch(this,this.handleUserPolyLineDrawInput));_536.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.LINE_INPUT,lang.hitch(this,this.handleUserLineDrawInput));_536.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.POINT_INPUT,lang.hitch(this,this.handleUserPointClickInput));_536.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.POLYGON_INPUT,lang.hitch(this,this.handleUserPolygonClickInput));_536.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.FREEHAND_POLYLINE_INPUT,lang.hitch(this,this.handleUserFreehandLineDrawInput));_536.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.FREEHAND_POLYGON_INPUT,lang.hitch(this,this.handleUserFreehandPolygonDrawInput));_536.subscribe(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.ADD,lang.hitch(this,this.handleAddGraphic));_536.subscribe(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.REMOVE,lang.hitch(this,this.removeGraphic));_536.subscribe(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.CENTER_AND_FLASH,lang.hitch(this,this.handleCenterAndFlashGraphic));},handleAddGraphic:function(_541){if(this.map&&this.map.graphics){this.map.graphics.add(_541);}},removeGraphic:function(_542){if(this.map&&this.map.graphics){this.map.graphics.remove(_542);}},handleDrawCancel:function(){this.drawToolbar.deactivate();if(this._drawEventHandle){con.disconnect(this._drawEventHandle);this._drawEventHandle=null;}this.map.enableMapNavigation();this.map.setMapCursor(this.DEFAULT);},handleUserRectangleDrawInput:function(_543,_544){_536.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_RECTANGLE);this._userRectangleDrawInput(_543,_544);},handleUserLineDrawInput:function(_545,_546){_536.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_LINE);this._userLineDrawInput(_545,_546);},handleUserPolyLineDrawInput:function(_547,_548){_536.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_POLYLINE);this._userPolylineDrawInput(_547,_548);},handleUserPointClickInput:function(_549,_54a){_536.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_POINT);this._userPointDrawInput(_549,_54a);},handleUserPolygonClickInput:function(_54b,_54c){_536.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_POLYGON);this._userPolygonDrawInput(_54b,_54c);},handleUserFreehandLineDrawInput:function(_54d,_54e){_536.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_FREEHAND_LINE);this._userFreehandLineDrawInput(_54d,_54e);},handleUserFreehandPolygonDrawInput:function(_54f,_550){_536.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_FREEHAND_POLYGON);this._userFreehandPolygonDrawInput(_54f,_550);},_userFreehandPolygonDrawInput:function(_551,_552){this.userDrawCancel();var _553=_552&&_552.cursor?_552.cursor:this.CROSSHAIR;this.map.setMapCursor(_553);this.activateDraw(Draw.FREEHAND_POLYGON,_551,_552);},_userFreehandLineDrawInput:function(_554,_555){this.userDrawCancel();var _556=_555&&_555.cursor?_555.cursor:this.CROSSHAIR;this.map.setMapCursor(_556);this.activateDraw(Draw.FREEHAND_POLYLINE,_554,_555);},_userRectangleDrawInput:function(_557,_558){this.userDrawCancel();var _559=_558&&_558.cursor?_558.cursor:this.CROSSHAIR;this.map.setMapCursor(_559);this.activateDraw(Draw.EXTENT,_557,_558);},_userLineDrawInput:function(_55a,_55b){this.userDrawCancel();var _55c=_55b&&_55b.cursor?_55b.cursor:this.CROSSHAIR;this.map.setMapCursor(_55c);this.activateDraw(Draw.LINE,_55a,_55b);},_userPolylineDrawInput:function(_55d,_55e){this.userDrawCancel();var _55f=_55e&&_55e.cursor?_55e.cursor:this.CROSSHAIR;this.map.setMapCursor(_55f);this.activateDraw(Draw.POLYLINE,_55d,_55e);},_userPointDrawInput:function(_560,_561){this.userDrawCancel();var _562=_561&&_561.cursor?_561.cursor:this.POINTER;this.map.setMapCursor(_562);this.activateDraw(Draw.POINT,_560,_561);},_userPolygonDrawInput:function(_563,_564){this.userDrawCancel();var _565=_564&&_564.cursor?_564.cursor:this.CROSSHAIR;this.map.setMapCursor(_565);this.activateDraw(Draw.POLYGON,_563,_564);},activateDraw:function(type,_566,_567){if(_567==null){_567={};}if(_566!=null&&lang.isFunction(_566)){this._drawEventHandle=con.connect(this.drawToolbar,"onDrawEnd",lang.hitch(this,this._internalDrawComplete,_566));}_567.showTooltips=_567.showTooltips==null?true:_567.showTooltips;this.drawToolbar.activate(type,_567);this.map.disableMapNavigation();},_internalDrawComplete:function(_568,_569){this.drawToolbar.deactivate();this.map.setMapCursor(this.DEFAULT);this.map.enableMapNavigation();if(_568!=null&&lang.isFunction(_568)){_568(_569);}},userDrawCancel:function(){this.drawToolbar.deactivate();if(this._drawEventHandle){con.disconnect(this._drawEventHandle);this._drawEventHandle=null;}this.map.setMapCursor(this.DEFAULT);},handleCenterAndFlashGraphic:function(_56a){this.centerMapAtGraphic(_56a);this.flashGraphic(_56a);},centerMapAtGraphic:function(_56b){var _56c=this.getGraphicCenter(_56b);if(_56c){this.centerMapAtPoint(_56c);}},centerMapAtPoint:function(_56d){this.map.centerAt(_56d);},flashGraphic:function(_56e){if(_56e==null||!(_56e instanceof _539)||this.graphicFlashInProgress){return;}this.currentGraphicFlashCount=0;this.currentFlashGraphic=_56e;this.graphicFlashTimer=new _537.Timer(500);var _56f=_56e.visible;_56e.hide();this.graphicFlashTimer.onTick=lang.hitch(this,function(_570){try{if(this.currentGraphicFlashCount==this.maxGraphicFlashCount){this.currentGraphicFlashCount=0;this.graphicFlashTimer.stop();this.graphicFlashInProgress=false;if(_570){this.currentFlashGraphic.show();}else{this.currentFlashGraphic.hide();}}else{if(this.currentFlashGraphic.visible){if(this.currentFlashGraphic!=null){this.currentFlashGraphic.hide();}}else{if(this.currentFlashGraphic!=null){this.currentFlashGraphic.show();this.currentGraphicFlashCount++;}}}}catch(err){}},_56f);this.graphicFlashInProgress=true;this.graphicFlashTimer.start();},getGraphicCenter:function(_571){if(_571==null){return;}if(_571.geometry==null){return;}var _572=_571.geometry;if(_572 instanceof _53a){return _572;}else{if(_572 instanceof _53b||_572 instanceof _53c){var _573=_572.getExtent();return _573.getCenter();}else{if(_572 instanceof _53d){return _572.getCenter();}}}return null;},flashPoint:function(pt,_574){if(_574==null){_574=20;}var _575;if(pt==null||!(pt instanceof _53a)){return;}var _576=new _53e(_53e.STYLE_X,2,new _53f(_53f.STYLE_SOLID,new _538([255,0,0])));_575=new _539(pt,_576);var opac=1;setTimeout(function(){_536.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.ADD,_575);var i_id=setInterval(function(){_576.setColor(new _538([255,0,0,opac]));_575.setSymbol(_576);if(opac<0.01){clearInterval(i_id);_536.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.REMOVE,_575);}opac-=0.01;},_574);},700);}});});},"dijit/ColorPalette":function(){define(["require","dojo/text!./templates/ColorPalette.html","./_Widget","./_TemplatedMixin","./_PaletteMixin","./hccss","dojo/i18n","dojo/_base/Color","dojo/_base/declare","dojo/dom-construct","dojo/string","dojo/i18n!dojo/nls/colors","dojo/colors"],function(_577,_578,_579,_57a,_57b,has,i18n,_57c,_57d,_57e,_57f){var _580=_57d("dijit.ColorPalette",[_579,_57a,_57b],{palette:"7x10",_palettes:{"7x10":[["white","seashell","cornsilk","lemonchiffon","lightyellow","palegreen","paleturquoise","lightcyan","lavender","plum"],["lightgray","pink","bisque","moccasin","khaki","lightgreen","lightseagreen","lightskyblue","cornflowerblue","violet"],["silver","lightcoral","sandybrown","orange","palegoldenrod","chartreuse","mediumturquoise","skyblue","mediumslateblue","orchid"],["gray","red","orangered","darkorange","yellow","limegreen","darkseagreen","royalblue","slateblue","mediumorchid"],["dimgray","crimson","chocolate","coral","gold","forestgreen","seagreen","blue","blueviolet","darkorchid"],["darkslategray","firebrick","saddlebrown","sienna","olive","green","darkcyan","mediumblue","darkslateblue","darkmagenta"],["black","darkred","maroon","brown","darkolivegreen","darkgreen","midnightblue","navy","indigo","purple"]],"3x4":[["white","lime","green","blue"],["silver","yellow","fuchsia","navy"],["gray","red","purple","black"]]},templateString:_578,baseClass:"dijitColorPalette",_dyeFactory:function(_581,row,col,_582){return new this._dyeClass(_581,row,col,_582);},buildRendering:function(){this.inherited(arguments);this._dyeClass=_57d(_580._Color,{palette:this.palette});this._preparePalette(this._palettes[this.palette],i18n.getLocalization("dojo","colors",this.lang));}});_580._Color=_57d("dijit._Color",_57c,{template:"<span class='dijitInline dijitPaletteImg'>"+"<img src='${blankGif}' alt='${alt}' title='${title}' class='dijitColorPaletteSwatch' style='background-color: ${color}'/>"+"</span>",hcTemplate:"<span class='dijitInline dijitPaletteImg' style='position: relative; overflow: hidden; height: 12px; width: 14px;'>"+"<img src='${image}' alt='${alt}' title='${title}' style='position: absolute; left: ${left}px; top: ${top}px; ${size}'/>"+"</span>",_imagePaths:{"7x10":_577.toUrl("./themes/a11y/colors7x10.png"),"3x4":_577.toUrl("./themes/a11y/colors3x4.png")},constructor:function(_583,row,col,_584){this._title=_584;this._row=row;this._col=col;this.setColor(_57c.named[_583]);},getValue:function(){return this.toHex();},fillCell:function(cell,_585){var html=_57f.substitute(has("highcontrast")?this.hcTemplate:this.template,{color:this.toHex(),blankGif:_585,alt:this._title,title:this._title,image:this._imagePaths[this.palette].toString(),left:this._col*-20-5,top:this._row*-20-5,size:this.palette=="7x10"?"height: 145px; width: 206px":"height: 64px; width: 86px"});_57e.place(html,cell);}});return _580;});},"esriviewer/ui/base/UIWidget":function(){define(["dojo/_base/declare","dijit/_Widget","dojo/_base/lang","dojo/_base/connect","dojo/dom-class","dojo/dom-construct","dojo/dom-style","../../base/ConfigurationEntryMixin"],function(_586,_587,lang,con,_588,_589,_58a,_58b){return _586([_587,_58b],{defaultPositioning:{x:0,y:0},animateOnPlace:true,animate:false,animation:"fadeIn animated",positioningParamName:null,isPositionedByConfig:false,LEFT_LOWER:"left",RIGHT_LOWER:"right",TOP_LOWER:"top",BOTTOM_LOWER:"bottom",constructor:function(){this.creationPositioning=lang.mixin({},this.defaultPositioning);this.connects=[];this.subscribes=[];},postCreate:function(){this.loadViewerConfigurationData();this.initListeners();if(this.isPositionedByConfig){this.positionNode();}},initListeners:function(){},destroy:function(){this.clearSubscribes();this.clearConnects();},placeAt:function(node){_589.place(this.domNode,node);if(this.animate&&this.animateOnPlace){this._animateWidget();}return this;},clearSubscribes:function(){if(lang.isArray(this.subscribes)){for(var i=0;i<this.subscribes.length;i++){this.subscribes[i].remove();}}},positionNode:function(){_58a.set(this.domNode,"position","absolute");var _58c=VIEWER_GLOBALS.windowPositioning[this.positioningParamName];var _58d=(_58c!=null&&_58c.x!=null)?_58c.x:this.defaultPositioning.x;var _58e=(_58c!=null&&_58c.y!=null)?_58c.y:this.defaultPositioning.y;var _58f="left";var _590="top";if(_58c){if(_58c.alignY!=null&&lang.isString(_58c.alignY)){var _591=_58c.alignY.toLowerCase();if(_591===this.TOP_LOWER||_591===this.BOTTOM_LOWER){_590=_591;}}if(_58c.alignX!=null&&lang.isString(_58c.alignX)){var _592=_58c.alignX.toLowerCase();if(_592===this.LEFT_LOWER||_592===this.RIGHT_LOWER){_58f=_592;}}}_58a.set(this.domNode,_58f,_58d+"px");_58a.set(this.domNode,_590,_58e+"px");this.creationPositioning={x:_58d,y:_58e,alignX:_58f,alignY:_590};},clearConnects:function(){if(lang.isArray(this.connects)){for(var i=0;i<this.connects.length;i++){if(this.connects[i].remove!=null&&lang.isFunction(this.connects[i].remove)){this.connects[i].remove();}else{con.disconnect(this.connects[i]);}}}},show:function(){_58a.set(this.domNode,"display","block");},hide:function(){_58a.set(this.domNode,"display","none");},hidePopups:function(){},_animateWidget:function(){this._removeAnimationClasses();_588.add(this.domNode,this.animation);},_removeAnimationClasses:function(){_588.remove(this.domNode,this.animation);},_handleContentAnimation:function(_593,node){if(_593){_588.add(node,VIEWER_GLOBALS.ANIMATIONS.FADE.IN);}else{_588.remove(node,VIEWER_GLOBALS.ANIMATIONS.FADE.IN);}}});});},"dojox/storage":function(){define(["./storage/_common"],function(){});},"dojox/main":function(){define(["dojo/_base/kernel"],function(dojo){return dojo.dojox;});},"esriviewer/ui/measure/MeasureWidget":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/topic","../base/UITemplatedWidget","dojo/text!./template/MeasureWidgetTemplate.html","./model/MeasureWidgetViewModel","../draw/base/MapDrawSupport","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleMarkerSymbol"],function(_594,lang,_595,_596,_597,_598,_599,_59a,_59b,_59c,_59d,_59e,_59f,_5a0){return _594([_597,_59a],{measureFloatPrecision:2,locationFloatPrecision:3,templateString:_598,AREA:"area",DISTANCE:"distance",LOCATION:"location",constructor:function(){this.currentGeometry=null;this.currentGraphic=null;},postCreate:function(){this.distanceResponseCallback=lang.hitch(this,this.handleDistanceResponse);this.areaResponseCallback=lang.hitch(this,this.handleAreaResponse);this.locationResponseCallback=lang.hitch(this,this.handleLocationResponse);this.initSymbology();this.viewModel=new _599();this.viewModel.areaActive.subscribe(lang.hitch(this,this.handleAreaActiveChanged));this.viewModel.distanceActive.subscribe(lang.hitch(this,this.handleDistanceActiveChanged));this.viewModel.locationActive.subscribe(lang.hitch(this,this.handleLocationActiveChanged));this.viewModel.selectedAreaUnits.subscribe(lang.hitch(this,this.handleSelectedAreaUnitsChanged));this.viewModel.selectedDistanceUnits.subscribe(lang.hitch(this,this.handleSelectedDistanceUnitsChanged));this.viewModel.selectedLocationUnits.subscribe(lang.hitch(this,this.handleSelectedLocationUnitsChanged));ko.applyBindings(this.viewModel,this.domNode);},handleSelectedLocationUnitsChanged:function(_5a1){if(this.currentGeometry&&this.currentGeometry instanceof _59b){_596.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_LAT_LON,this.currentGeometry,this.locationResponseCallback);}},handleSelectedDistanceUnitsChanged:function(_5a2){if(this.currentGeometry&&this.currentGeometry instanceof _59c){_596.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_DISTANCE,this.currentGeometry,_5a2,this.distanceResponseCallback);}},handleSelectedAreaUnitsChanged:function(_5a3){if(this.currentGeometry&&this.currentGeometry instanceof _59d){_596.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_AREA,this.currentGeometry,_5a3,this.areaResponseCallback);}},initSymbology:function(){this.polygonSymbol=new _59e(_59e.STYLE_SOLID,new _59f(_59f.STYLE_SOLID,new _595([0,0,255]),1),new _595([0,0,255,0]));this.pointSymbol=new _5a0(_5a0.STYLE_X,1,new _59f(_59f.STYLE_SOLID,new _595("blue")));this.lineSymbol=new _59f(_59f.STYLE_SOLID,new _595([0,0,255]),1);},handleAreaActiveChanged:function(_5a4){if(_5a4){this.handlePolygonDraw();this.activeMode=this.AREA;}else{if(this.activeMode==this.AREA){this.activeMode="";this.clearCurrentGraphic();this.clearDraw();}}},handleDistanceActiveChanged:function(_5a5){if(_5a5){this.handleLineDraw();this.activeMode=this.DISTANCE;}else{if(this.activeMode==this.DISTANCE){this.activeMode="";this.clearCurrentGraphic();this.clearDraw();}}},handleLocationActiveChanged:function(_5a6){if(_5a6){this.handlePointDraw();this.activeMode=this.LOCATION;}else{if(this.activeMode==this.LOCATION){this.activeMode="";this.clearCurrentGraphic();this.clearDraw();}}},clearDraw:function(){this.inherited(arguments);this.viewModel.areaActive(false);this.viewModel.distanceActive(false);this.viewModel.locationActive(false);this.viewModel.measureMethodText("");this.viewModel.unitsText("");this.viewModel.resultsText("");_596.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.DRAW_CANCEL);},clearCurrentGraphic:function(){if(this.currentGraphic){_596.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.REMOVE,this.currentGraphic);this.currentGraphic=null;}},handleLineDraw:function(){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_LINE);},handlePolygonDraw:function(){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON);},handlePointDraw:function(){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT);},geometryAdded:function(_5a7){this.currentGeometry=_5a7;this.inherited(arguments);if(this.viewModel.locationActive()){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT);_596.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_LAT_LON,_5a7,this.locationResponseCallback);}if(this.viewModel.areaActive()){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON);_596.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_AREA,_5a7,this.viewModel.selectedAreaUnits(),this.areaResponseCallback);}if(this.viewModel.distanceActive()){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_LINE);_596.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_DISTANCE,_5a7,this.viewModel.selectedDistanceUnits(),this.distanceResponseCallback);}},handleDistanceResponse:function(_5a8){if(_5a8==null||!lang.isObject(_5a8)||_5a8.lengths==null||!lang.isArray(_5a8.lengths)||_5a8.lengths.length<1){return;}this.viewModel.measureMethodText("Distance: ");this.viewModel.resultsText(REG_EXP_UTILS.numberToStringWithCommas(_5a8.lengths[0].toFixed(this.measureFloatPrecision)));this.viewModel.unitsText(this.viewModel.getLabelForDistanceValue(this.viewModel.selectedDistanceUnits()));},handleAreaResponse:function(_5a9){if(_5a9==null||!lang.isObject(_5a9)||_5a9.areas==null||!lang.isArray(_5a9.areas)||_5a9.areas.length<1){return;}var area=_5a9.areas[0];this.viewModel.measureMethodText("Area: ");this.viewModel.unitsText(this.viewModel.getLabelForAreaValue(this.viewModel.selectedAreaUnits()));this.viewModel.resultsText(REG_EXP_UTILS.numberToStringWithCommas(area.toFixed(this.measureFloatPrecision)));},handleLocationResponse:function(_5aa){if(_5aa==null||!lang.isArray(_5aa)||_5aa.length<1){return;}var pt=_5aa[0];this.viewModel.measureMethodText("");this.viewModel.unitsText("");if(this.viewModel.selectedLocationUnits()==VIEWER_GLOBALS.ESRI_UNITS.DEGREE_MINUTE_SECONDS){this.viewModel.resultsText("Latitude: "+GEOMETRY_UTILS.ddToDMSString(pt.y)+" Longitude:"+GEOMETRY_UTILS.ddToDMSString(pt.x));}else{this.viewModel.resultsText("Latitude: "+pt.y.toFixed(this.locationFloatPrecision)+" Longitude: "+pt.x.toFixed(this.locationFloatPrecision));}},onAnnotationCreated:function(_5ab){if(_5ab!=null&&_5ab.graphic!=null){this.inherited(arguments);this.clearCurrentGraphic();this.currentGraphic=_5ab.graphic;_596.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.ADD,_5ab.graphic);}},reset:function(){this.clearCurrentGraphic();this.clearDraw();}});});},"esriviewer/map/geometry/base/ProjectionUtils":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","esri/geometry/webMercatorUtils","esri/geometry/Point","esri/SpatialReference"],function(_5ac,lang,_5ad,_5ae,_5af,_5b0){return _5ac([],{DEG_2_RAD:Math.PI/180,BLOCK_SIZE:100000,GRIDSQUARE_SET_COL_SIZE:8,GRIDSQUARE_SET_ROW_SIZE:20,UNDEFINED_STR:"undefined",WEB_MERCATOR_WKID:102100,WGS_84_WKID:4326,EASTING_OFFSET:500000,NORTHING_OFFSET:10000000,k0:0.9996,RAD_2_DEG:(180/Math.PI),EQUATORIAL_RADIUS_NAD83:6378137,EQUATORIAL_RADIUS_NAD27:6378206.4,ECC_SQUARED_NAD83:0.006694380023,ECC_SQUARED_NAD27:0.006768658,UTMGzdLetters:"NPQRSTUVWX",USNGSqEast:"ABCDEFGHJKLMNPQRSTUVWXYZ",USNGSqLetOdd:"ABCDEFGHJKLMNPQRSTUV",USNGSqLetEven:"FGHJKLMNPQRSTUVABCDE",zoneBase:[1.1,2,2.9,3.8,4.7,5.6,6.5,7.3,8.2,9.1,0,0.8,1.7,2.6,3.5,4.4,5.3,6.2,7,7.9],segBase:[0,2,2,2,4,4,6,6,8,8,0,0,0,2,2,4,4,6,6,6],isNad83Mode:true,constructor:function(){if(this.isNad83Mode){this.EQUATORIAL_RADIUS=this.EQUATORIAL_RADIUS_NAD83;this.ECC_SQUARED=this.ECC_SQUARED_NAD83;}else{this.EQUATORIAL_RADIUS=this.EQUATORIAL_RADIUS_NAD27;this.ECC_SQUARED=this.ECC_SQUARED_NAD27;}this.ECC_PRIME_SQUARED=this.ECC_SQUARED/(1-this.ECC_SQUARED);this.E1=(1-Math.sqrt(1-this.ECC_SQUARED))/(1+Math.sqrt(1-this.ECC_SQUARED));},setMapSpatialReference:function(_5b1){this.mapSpatialReference=_5b1;},graphicsToMapSpatialReference:function(_5b2){if(_5b2==null){return null;}if(!lang.isArray(_5b2)){_5b2=[_5b2];}if(_5b2.length<1){return [];}if((this.mapSpatialReference.wkid===this.WEB_MERCATOR_WKID||this.mapSpatialReference.wkid===this.WGS_84_WKID)&&_5b2[0].geometry.spatialReference.wkid===this.WEB_MERCATOR_WKID||_5b2[0].geometry.spatialReference.wkid===this.WGS_84_WKID){var _5b3=null;if(this.mapSpatialReference.wkid===this.WEB_MERCATOR_WKID&&_5b2[0].geometry.spatialReference.wkid===this.WGS_84_WKID){_5b3=_5ae.geographicToWebMercator;}else{if(_5b2[0].geometry.spatialReference.wkid===this.WEB_MERCATOR_WKID&&this.mapSpatialReference.wkid===this.WGS_84_WKID){_5b3=_5ae.webMercatorToGeographic;}}if(lang.isFunction(_5b3)){var _5b4;for(var i=0;i<_5b2.length;i++){_5b4=_5b2[i];_5b4.geometry=_5b3(_5b4.geometry);}}}return _5b2;},geometryToMapSpatialReference:function(_5b5){if(_5b5==null){return null;}if(!lang.isArray(_5b5)){_5b5=[_5b5];}if(_5b5.length<1){return [];}if(this.mapSpatialReference.wkid==_5b5[0].spatialReference.wkid){return _5b5;}var _5b6=null;if((this.mapSpatialReference.wkid===this.WEB_MERCATOR_WKID||this.mapSpatialReference.wkid===this.WGS_84_WKID)&&_5b5[0].spatialReference.wkid===this.WEB_MERCATOR_WKID||_5b5[0].spatialReference.wkid===this.WGS_84_WKID){var _5b7=null;if(this.mapSpatialReference.wkid===this.WEB_MERCATOR_WKID&&_5b5[0].spatialReference.wkid===this.WGS_84_WKID){_5b7=_5ae.geographicToWebMercator;}else{if(_5b5[0].spatialReference.wkid===this.WEB_MERCATOR_WKID&&this.mapSpatialReference.wkid===this.WGS_84_WKID){_5b7=_5ae.webMercatorToGeographic;}}if(lang.isFunction(_5b7)){_5b6=[];for(var i=0;i<_5b5.length;i++){_5b6.push(_5b7(_5b5[i]));}}}return _5b6;},USNGtoLL:function(_5b8,_5b9){var _5ba=[];var _5bb={};this.parseUSNG_str(_5b8,_5bb);var _5bc={};this.USNGtoUTM(_5bb.zone,_5bb.letN,_5bb.sq1,_5bb.sq2,_5bb.east,_5bb.north,_5bc);if(_5bb.letN<"N"){_5bc.N-=this.NORTHING_OFFSET;}this.UTMtoLL(_5bc.N,_5bc.E,_5bb.zone,_5bc);_5ba[0]=_5bc.lat;_5ba[1]=_5bc.lon;var _5bd=new _5af(_5bc.lon,_5bc.lat,new _5b0(4326));if(_5b9&&lang.isFunction(_5b9)){_5b9(_5bd);}else{return _5bd;}},USNGtoUTM:function(zone,letN,sq1,sq2,east,_5be,ret){var _5bf=this.USNGSqEast.indexOf(sq1);var _5c0=1+_5bf%8;var _5c1;var _5c2="CDEFGHJKLMNPQRSTUVWX".indexOf(letN);if(zone%2){_5c1="ABCDEFGHJKLMNPQRSTUV".indexOf(sq2);}else{_5c1="FGHJKLMNPQRSTUVABCDE".indexOf(sq2);}var _5c3=this.zoneBase[_5c2];var _5c4=Number(this.segBase[_5c2])+_5c1/10;if(_5c4<_5c3){_5c4+=2;}ret.N=_5c4*1000000+Number(_5be)*Math.pow(10,5-_5be.length);ret.E=_5c0*100000+Number(east)*Math.pow(10,5-east.length);ret.zone=zone;ret.letter=letN;},parseUSNG_str:function(_5c5,_5c6){var j=0;var k;var _5c7=[];var _5c8=[];_5c8=_5c5.toUpperCase();var _5c9=/%20/g;_5c7=_5c8.replace(_5c9,"");_5c9=/ /g;_5c7=_5c8.replace(_5c9,"");if(_5c7.length<7){return 0;}_5c6.zone=_5c7.charAt(j++)*10+_5c7.charAt(j++)*1;_5c6.letN=_5c7.charAt(j++);_5c6.sq1=_5c7.charAt(j++);_5c6.sq2=_5c7.charAt(j++);_5c6.precision=(_5c7.length-j)/2;_5c6.east="";_5c6.north="";for(k=0;k<_5c6.precision;k++){_5c6.east+=_5c7.charAt(j++);}if(_5c7[j]==" "){j++;}for(k=0;k<_5c6.precision;k++){_5c6.north+=_5c7.charAt(j++);}},UTMtoLL:function(_5ca,_5cb,_5cc,ret){var xUTM=parseFloat(_5cb)-this.EASTING_OFFSET;var yUTM=parseFloat(_5ca);var _5cd=parseInt(_5cc,10);var _5ce=(_5cd-1)*6-180+3;var M=yUTM/this.k0;var mu=M/(this.EQUATORIAL_RADIUS*(1-this.ECC_SQUARED/4-3*this.ECC_SQUARED*this.ECC_SQUARED/64-5*this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED/256));var _5cf=mu+(3*this.E1/2-27*this.E1*this.E1*this.E1/32)*Math.sin(2*mu)+(21*this.E1*this.E1/16-55*this.E1*this.E1*this.E1*this.E1/32)*Math.sin(4*mu)+(151*this.E1*this.E1*this.E1/96)*Math.sin(6*mu);var phi1=_5cf*this.RAD_2_DEG;var N1=this.EQUATORIAL_RADIUS/Math.sqrt(1-this.ECC_SQUARED*Math.sin(_5cf)*Math.sin(_5cf));var T1=Math.tan(_5cf)*Math.tan(_5cf);var C1=this.ECC_PRIME_SQUARED*Math.cos(_5cf)*Math.cos(_5cf);var R1=this.EQUATORIAL_RADIUS*(1-this.ECC_SQUARED)/Math.pow(1-this.ECC_SQUARED*Math.sin(_5cf)*Math.sin(_5cf),1.5);var D=xUTM/(N1*this.k0);var lat=_5cf-(N1*Math.tan(_5cf)/R1)*(D*D/2-(5+3*T1+10*C1-4*C1*C1-9*this.ECC_PRIME_SQUARED)*D*D*D*D/24+(61+90*T1+298*C1+45*T1*T1-252*this.ECC_PRIME_SQUARED-3*C1*C1)*D*D*D*D*D*D/720);lat=lat*this.RAD_2_DEG;var lon=(D-(1+2*T1+C1)*D*D*D/6+(5-2*C1+28*T1-3*C1*C1+8*this.ECC_PRIME_SQUARED+24*T1*T1)*D*D*D*D*D/120)/Math.cos(_5cf);lon=_5ce+lon*this.RAD_2_DEG;ret.lat=lat;ret.lon=lon;},LLtoMGRS:function(lat,lon,_5d0){var _5d1="";var _5d2=this.LLtoUSNG(lat,lon,_5d0);var _5d3=/ /g;return _5d2.replace(_5d3,"");},LLtoUSNG:function(lat,lon,_5d4){var USNG;lat=parseFloat(lat);lon=parseFloat(lon);var _5d5=this.LLtoUTM(lat,lon);var _5d6=_5d5.easting;var _5d7=_5d5.northing;if(lat<0){_5d7+=this.NORTHING_OFFSET;}var _5d8=this.getZoneNumber(lat,lon);var _5d9=this.findGridLetters(_5d8,_5d7,_5d6);var _5da=Math.round(_5d7)%this.BLOCK_SIZE;var _5db=Math.round(_5d6)%this.BLOCK_SIZE;_5da=Math.floor(_5da/Math.pow(10,(5-_5d4)));_5db=Math.floor(_5db/Math.pow(10,(5-_5d4)));USNG=this.getZoneNumber(lat,lon)+this.UTMLetterDesignator(lat)+" "+_5d9+" ";var i;for(i=String(_5db).length;i<_5d4;i++){USNG+="0";}USNG+=_5db+" ";for(i=String(_5da).length;i<_5d4;i++){USNG+="0";}return USNG;},LLtoUTM:function(lat,lon,zone){lat=parseFloat(lat);lon=parseFloat(lon);if(lat>84||lat<-80){return this.UNDEFINED_STR;}var _5dc=(lon+180)-parseInt((lon+180)/360,10)*360-180;var _5dd=lat*this.DEG_2_RAD;var _5de=_5dc*this.DEG_2_RAD;var _5df=this.getZoneNumber(lat,lon);var _5e0=(_5df-1)*6-180+3;var _5e1=_5e0*this.DEG_2_RAD;var _5e2=_5df+""+this.UTMLetterDesignator(lat)+" ";var N=this.EQUATORIAL_RADIUS/Math.sqrt(1-this.ECC_SQUARED*Math.sin(_5dd)*Math.sin(_5dd));var T=Math.tan(_5dd)*Math.tan(_5dd);var C=this.ECC_PRIME_SQUARED*Math.cos(_5dd)*Math.cos(_5dd);var A=Math.cos(_5dd)*(_5de-_5e1);var M=this.EQUATORIAL_RADIUS*((1-this.ECC_SQUARED/4-3*(this.ECC_SQUARED*this.ECC_SQUARED)/64-5*(this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED)/256)*_5dd-(3*this.ECC_SQUARED/8+3*this.ECC_SQUARED*this.ECC_SQUARED/32+45*this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED/1024)*Math.sin(2*_5dd)+(15*this.ECC_SQUARED*this.ECC_SQUARED/256+45*this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED/1024)*Math.sin(4*_5dd)-(35*this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED/3072)*Math.sin(6*_5dd));var _5e3=(this.k0*N*(A+(1-T+C)*(A*A*A)/6+(5-18*T+T*T+72*C-58*this.ECC_PRIME_SQUARED)*(A*A*A*A*A)/120)+this.EASTING_OFFSET);var _5e4=(this.k0*(M+N*Math.tan(_5dd)*((A*A)/2+(5-T+9*C+4*C*C)*(A*A*A*A)/24+(61-58*T+T*T+600*C-330*this.ECC_PRIME_SQUARED)*(A*A*A*A*A*A)/720)));return {easting:_5e3,northing:_5e4,zone:_5df};},getZoneNumber:function(lat,lon){lat=parseFloat(lat);lon=parseFloat(lon);var _5e5=(lon+180)-parseInt((lon+180)/360,10)*360-180;var _5e6=parseInt((_5e5+180)/6,10)+1;if(lat>=56&&lat<64&&_5e5>=3&&_5e5<12){_5e6=32;}if(lat>=72&&lat<84){if(_5e5>=0&&_5e5<9){_5e6=31;}else{if(_5e5>=9&&_5e5<21){_5e6=33;}else{if(_5e5>=21&&_5e5<33){_5e6=35;}else{if(_5e5>=33&&_5e5<42){_5e6=37;}}}}}return _5e6;},findGridLetters:function(_5e7,_5e8,_5e9){_5e7=parseInt(_5e7,10);_5e8=parseFloat(_5e8);_5e9=parseFloat(_5e9);row=1;var _5ea=Math.round(_5e8);while(_5ea>=this.BLOCK_SIZE){_5ea=_5ea-this.BLOCK_SIZE;row++;}var row=row%this.GRIDSQUARE_SET_ROW_SIZE;var col=0;var _5eb=Math.round(_5e9);while(_5eb>=this.BLOCK_SIZE){_5eb=_5eb-this.BLOCK_SIZE;col++;}col=col%this.GRIDSQUARE_SET_COL_SIZE;return this.lettersHelper(this.findSet(_5e7),row,col);},findSet:function(_5ec){_5ec=parseInt(_5ec,10);_5ec=_5ec%6;switch(_5ec){case 0:return 6;break;case 1:return 1;break;case 2:return 2;break;case 3:return 3;break;case 4:return 4;break;case 5:return 5;break;default:return -1;break;}},lettersHelper:function(set,row,col){if(row==0){row=this.GRIDSQUARE_SET_ROW_SIZE-1;}else{row--;}if(col==0){col=this.GRIDSQUARE_SET_COL_SIZE-1;}else{col--;}var l1;var l2;switch(set){case 1:l1="ABCDEFGH";l2="ABCDEFGHJKLMNPQRSTUV";return l1.charAt(col)+l2.charAt(row);break;case 2:l1="JKLMNPQR";l2="FGHJKLMNPQRSTUVABCDE";return l1.charAt(col)+l2.charAt(row);break;case 3:l1="STUVWXYZ";l2="ABCDEFGHJKLMNPQRSTUV";return l1.charAt(col)+l2.charAt(row);break;case 4:l1="ABCDEFGH";l2="FGHJKLMNPQRSTUVABCDE";return l1.charAt(col)+l2.charAt(row);break;case 5:l1="JKLMNPQR";l2="ABCDEFGHJKLMNPQRSTUV";return l1.charAt(col)+l2.charAt(row);break;case 6:l1="STUVWXYZ";l2="FGHJKLMNPQRSTUVABCDE";return l1.charAt(col)+l2.charAt(row);break;}},UTMLetterDesignator:function(lat){lat=parseFloat(lat);var _5ed;if((84>=lat)&&(lat>=72)){_5ed="X";}else{if((72>lat)&&(lat>=64)){_5ed="W";}else{if((64>lat)&&(lat>=56)){_5ed="V";}else{if((56>lat)&&(lat>=48)){_5ed="U";}else{if((48>lat)&&(lat>=40)){_5ed="T";}else{if((40>lat)&&(lat>=32)){_5ed="S";}else{if((32>lat)&&(lat>=24)){_5ed="R";}else{if((24>lat)&&(lat>=16)){_5ed="Q";}else{if((16>lat)&&(lat>=8)){_5ed="P";}else{if((8>lat)&&(lat>=0)){_5ed="N";}else{if((0>lat)&&(lat>=-8)){_5ed="M";}else{if((-8>lat)&&(lat>=-16)){_5ed="L";}else{if((-16>lat)&&(lat>=-24)){_5ed="K";}else{if((-24>lat)&&(lat>=-32)){_5ed="J";}else{if((-32>lat)&&(lat>=-40)){_5ed="H";}else{if((-40>lat)&&(lat>=-48)){_5ed="G";}else{if((-48>lat)&&(lat>=-56)){_5ed="F";}else{if((-56>lat)&&(lat>=-64)){_5ed="E";}else{if((-64>lat)&&(lat>=-72)){_5ed="D";}else{if((-72>lat)&&(lat>=-80)){_5ed="C";}else{_5ed="Z";}}}}}}}}}}}}}}}}}}}}return _5ed;}});});},"esriviewer/ui/toolbar/model/ActionsToolbarViewModel":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang"],function(_5ee,_5ef,lang){return _5ee([],{showLabelsButton:ko.observable(true),showBookmarksButton:ko.observable(true),showLocator:ko.observable(true),showConfigureLocatorsButton:ko.observable(true),showExtentActionsToolbar:ko.observable(true),prevExtentEnabled:ko.observable(false),nextExtentEnabled:ko.observable(false),constructor:function(){this.toolsButtonVisible=ko.observable(true);this.layersButtonVisible=ko.observable(true);_5ef.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PREV_EXTENT_EXISTS,lang.hitch(this,this.updatePrevExtentEnabled));_5ef.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.NEXT_EXTENT_EXISTS,lang.hitch(this,this.updateNextExtentEnabled));},updatePrevExtentEnabled:function(_5f0){this.prevExtentEnabled(_5f0);},updateNextExtentEnabled:function(_5f1){this.nextExtentEnabled(_5f1);}});});},"esriviewer/ui/navigation/model/NavigationWidgetViewModel":function(){define(["dojo/_base/declare"],function(_5f2){return _5f2([],{constructor:function(){this.visible=ko.observable(true);}});});},"dojox/uuid/generateTimeBasedUuid":function(){define(["dojo/_base/lang","./_base"],function(lang){dojox.uuid.generateTimeBasedUuid=function(node){var _5f3=dojox.uuid.generateTimeBasedUuid._generator.generateUuidString(node);return _5f3;};dojox.uuid.generateTimeBasedUuid.isValidNode=function(node){var _5f4=16;var _5f5=parseInt(node,_5f4);var _5f6=lang.isString(node)&&node.length==12&&isFinite(_5f5);return _5f6;};dojox.uuid.generateTimeBasedUuid.setNode=function(node){dojox.uuid.assert((node===null)||this.isValidNode(node));this._uniformNode=node;};dojox.uuid.generateTimeBasedUuid.getNode=function(){return this._uniformNode;};dojox.uuid.generateTimeBasedUuid._generator=new function(){this.GREGORIAN_CHANGE_OFFSET_IN_HOURS=3394248;var _5f7=null;var _5f8=null;var _5f9=null;var _5fa=0;var _5fb=null;var _5fc=null;var _5fd=16;function _5fe(_5ff){_5ff[2]+=_5ff[3]>>>16;_5ff[3]&=65535;_5ff[1]+=_5ff[2]>>>16;_5ff[2]&=65535;_5ff[0]+=_5ff[1]>>>16;_5ff[1]&=65535;dojox.uuid.assert((_5ff[0]>>>16)===0);};function _600(x){var _601=new Array(0,0,0,0);_601[3]=x%65536;x-=_601[3];x/=65536;_601[2]=x%65536;x-=_601[2];x/=65536;_601[1]=x%65536;x-=_601[1];x/=65536;_601[0]=x;return _601;};function _602(_603,_604){dojox.uuid.assert(lang.isArray(_603));dojox.uuid.assert(lang.isArray(_604));dojox.uuid.assert(_603.length==4);dojox.uuid.assert(_604.length==4);var _605=new Array(0,0,0,0);_605[3]=_603[3]+_604[3];_605[2]=_603[2]+_604[2];_605[1]=_603[1]+_604[1];_605[0]=_603[0]+_604[0];_5fe(_605);return _605;};function _606(_607,_608){dojox.uuid.assert(lang.isArray(_607));dojox.uuid.assert(lang.isArray(_608));dojox.uuid.assert(_607.length==4);dojox.uuid.assert(_608.length==4);var _609=false;if(_607[0]*_608[0]!==0){_609=true;}if(_607[0]*_608[1]!==0){_609=true;}if(_607[0]*_608[2]!==0){_609=true;}if(_607[1]*_608[0]!==0){_609=true;}if(_607[1]*_608[1]!==0){_609=true;}if(_607[2]*_608[0]!==0){_609=true;}dojox.uuid.assert(!_609);var _60a=new Array(0,0,0,0);_60a[0]+=_607[0]*_608[3];_5fe(_60a);_60a[0]+=_607[1]*_608[2];_5fe(_60a);_60a[0]+=_607[2]*_608[1];_5fe(_60a);_60a[0]+=_607[3]*_608[0];_5fe(_60a);_60a[1]+=_607[1]*_608[3];_5fe(_60a);_60a[1]+=_607[2]*_608[2];_5fe(_60a);_60a[1]+=_607[3]*_608[1];_5fe(_60a);_60a[2]+=_607[2]*_608[3];_5fe(_60a);_60a[2]+=_607[3]*_608[2];_5fe(_60a);_60a[3]+=_607[3]*_608[3];_5fe(_60a);return _60a;};function _60b(_60c,_60d){while(_60c.length<_60d){_60c="0"+_60c;}return _60c;};function _60e(){var _60f=Math.floor((Math.random()%1)*Math.pow(2,32));var _610=_60f.toString(_5fd);while(_610.length<8){_610="0"+_610;}return _610;};this.generateUuidString=function(node){if(node){dojox.uuid.assert(dojox.uuid.generateTimeBasedUuid.isValidNode(node));}else{if(dojox.uuid.generateTimeBasedUuid._uniformNode){node=dojox.uuid.generateTimeBasedUuid._uniformNode;}else{if(!_5f7){var _611=32768;var _612=Math.floor((Math.random()%1)*Math.pow(2,15));var _613=(_611|_612).toString(_5fd);_5f7=_613+_60e();}node=_5f7;}}if(!_5f8){var _614=32768;var _615=Math.floor((Math.random()%1)*Math.pow(2,14));_5f8=(_614|_615).toString(_5fd);}var now=new Date();var _616=now.valueOf();var _617=_600(_616);if(!_5fb){var _618=_600(60*60);var _619=_600(dojox.uuid.generateTimeBasedUuid._generator.GREGORIAN_CHANGE_OFFSET_IN_HOURS);var _61a=_606(_619,_618);var _61b=_600(1000);_5fb=_606(_61a,_61b);_5fc=_600(10000);}var _61c=_617;var _61d=_602(_5fb,_61c);var _61e=_606(_61d,_5fc);if(now.valueOf()==_5f9){_61e[3]+=_5fa;_5fe(_61e);_5fa+=1;if(_5fa==10000){while(now.valueOf()==_5f9){now=new Date();}}}else{_5f9=now.valueOf();_5fa=1;}var _61f=_61e[2].toString(_5fd);var _620=_61e[3].toString(_5fd);var _621=_60b(_61f,4)+_60b(_620,4);var _622=_61e[1].toString(_5fd);_622=_60b(_622,4);var _623=_61e[0].toString(_5fd);_623=_60b(_623,3);var _624="-";var _625="1";var _626=_621+_624+_622+_624+_625+_623+_624+_5f8+_624+node;_626=_626.toLowerCase();return _626;};}();return dojox.uuid.generateTimeBasedUuid;});},"dojo/gears":function(){define(["./_base/lang","./sniff"],function(lang,has){var _627={};lang.setObject("dojo.gears",_627);_627._gearsObject=function(){var _628;var _629=lang.getObject("google.gears");if(_629){return _629;}if(typeof GearsFactory!="undefined"){_628=new GearsFactory();}else{if(has("ie")){try{_628=new ActiveXObject("Gears.Factory");}catch(e){}}else{if(navigator.mimeTypes["application/x-googlegears"]){_628=document.createElement("object");_628.setAttribute("type","application/x-googlegears");_628.setAttribute("width",0);_628.setAttribute("height",0);_628.style.display="none";document.documentElement.appendChild(_628);}}}if(!_628){return null;}lang.setObject("google.gears.factory",_628);return lang.getObject("google.gears");};_627.available=(!!_627._gearsObject())||0;return _627;});},"esriviewer/ui/identify/IdentifyWindowWidget":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/window","dojo/dom-class","../window/WindowWidget"],function(_62a,lang,_62b,_62c,_62d,_62e){return _62a([_62e],{defaultPositioning:{x:400,y:125},windowWidth:"310px",windowHeaderText:"Identify",windowIconAltText:"Identify",windowIconClass:"commonIcons16 information",positioningParamName:"identify",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_62d.add(this.windowContent,"identifyWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/identify/IdentifyWidget"],lang.hitch(this,function(_62f){this.identifyWidget=new _62f();this.setContent(this.identifyWidget.domNode);this.identifyWidget.showQueryView();}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_62b.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.IDENTIFY.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_62b.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.IDENTIFY.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_62b.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.IDENTIFY.TOGGLE,lang.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.identifyWidget){this.identifyWidget.reset();}},show:function(){this.inherited(arguments);if(this.identifyWidget){this.identifyWidget.showQueryView();}}});});},"dijit/layout/AccordionPane":function(){define(["dojo/_base/declare","dojo/_base/kernel","./ContentPane"],function(_630,_631,_632){return _630("dijit.layout.AccordionPane",_632,{constructor:function(){_631.deprecated("dijit.layout.AccordionPane deprecated, use ContentPane instead","","2.0");},onSelected:function(){}});});},"esriviewer/portal/PortalViewerManagerSupportMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","./PortalSupport"],function(_633,lang,_634){return _633([],{portalSupported:false,_initializePortalSupport:function(){if(this.viewerConfig.portal!=null&&lang.isObject(this.viewerConfig.portal)&&this.viewerConfig.portal.url!=null&&this.viewerConfig.portal.url!=""){this.portalSupported=true;new _634();this._createPortalSearchWidget();return true;}return false;},_createPortalSearchWidget:function(){if(this.portalSupported){if(this.viewerConfig.portalSearchWidget!=null&&this.viewerConfig.portalSearchWidget.create!=null&&this.viewerConfig.portalSearchWidget.create==true){require(["esriviewer/ui/portal/PortalSearchWidgetWindow"],function(_635){this.portalSearchWidgetWindow=new _635();});}}}});});},"dojox/storage/_common":function(){define(["dijit","dojo","dojox","dojo/require!dojox/storage/Provider,dojox/storage/manager,dojox/storage/LocalStorageProvider,dojox/storage/GearsStorageProvider,dojox/storage/WhatWGStorageProvider,dojox/storage/FlashStorageProvider,dojox/storage/BehaviorStorageProvider,dojox/storage/CookieStorageProvider"],function(_636,dojo,_637){dojo.provide("dojox.storage._common");dojo.require("dojox.storage.Provider");dojo.require("dojox.storage.manager");dojo.require("dojox.storage.LocalStorageProvider");dojo.require("dojox.storage.GearsStorageProvider");dojo.require("dojox.storage.WhatWGStorageProvider");dojo.require("dojox.storage.FlashStorageProvider");dojo.require("dojox.storage.BehaviorStorageProvider");dojo.require("dojox.storage.CookieStorageProvider");_637.storage.manager.initialize();});},"dojox/sql":function(){define(["./sql/_base"],function(){});},"esriviewer/ui/toolbar/ActionsToolbarWidget":function(){define(["dojo/_base/declare","dojo/text!./template/ActionsToolbarWidgetTemplate.html","dojo/topic","dojo/_base/lang","dojo/on","dojo/window","dojo/_base/window","dojo/has","dojo/dom-style","dojo/dom-class","dojo/dom-construct","dijit/Menu","dijit/MenuItem","../base/UITemplatedWidget","./base/BookmarkListingWidget","./base/LocatorToolbarSupportMixin","./model/ActionsToolbarViewModel","./base/BasemapListingWidget","dijit/form/DropDownButton","dijit/form/ToggleButton"],function(_638,_639,_63a,lang,on,_63b,_63c,has,_63d,_63e,_63f,Menu,_640,_641,_642,_643,_644,_645,_646,_647){return _638([_641,_643],{animateOnPlace:false,animate:true,showExtentActions:true,useBasemapGallery:false,basemapsDropdownWidth:"125px",bookmarksDropdownWidth:"224px",showLabelServicesButton:true,showConfigureLocatorsIcon:true,showLayersButton:true,showBookmarksButton:true,showToolsDropdownButton:true,configureLocatorTooltipVisible:false,locateDefaultInput:"Enter a location...",templateString:_639,constructor:function(_648){lang.mixin(this,_648||{});},postCreate:function(){this.inherited(arguments);this.viewModel=new _644();this.viewModel.showExtentActionsToolbar(this.showExtentActions);this.toolsDropDownMenu=new Menu({});this.toolsDropDownButton.dropDown=this.toolsDropDownMenu;if(!this.showToolsDropdownButton){this.handleHideToolsButton();}else{this.handleShowToolsButton();}if(this.showLabelServicesButton){var _649=false;_63a.publish(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.SERVICE_EXISTS,function(_64a){_649=_64a;});if(!_649){this.viewModel.showLabelsButton(false);}}else{this.viewModel.showLabelsButton(false);}if(!this.showLayersButton){this.viewModel.layersButtonVisible(false);}if(!this.showBookmarksButton){this.viewModel.showBookmarksButton(false);}if(!this.showLocator){this.viewModel.showLocator(false);}if(!this.showConfigureLocatorsIcon){this.viewModel.showConfigureLocatorsButton(false);}ko.applyBindings(this.viewModel,this.domNode);this.createToolbarDropDown();this.tweakUI();},loadViewerConfigurationData:function(){var _64b=null;_63a.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"animationsEnabled",function(_64c){_64b=_64c;});if(_64b!=null){this.animate=_64b;}var _64d=null;_63a.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"toolsBar",function(_64e){_64d=_64e;});if(_64d&&lang.isObject(_64d)){if(_64d.showExtentActions!=null&&_64d.showExtentActions===false){this.showExtentActions=false;}if(_64d.showToolsDropdown!=null&&_64d.showToolsDropdown===false){this.showToolsDropdownButton=false;}if(_64d.showLayersButton!=null&&_64d.showLayersButton===false){this.showLayersButton=false;}if(_64d.showConfigureLocatorsIcon!=null&&_64d.showConfigureLocatorsIcon===false){this.showConfigureLocatorsIcon=false;}if(_64d.showBookmarksButton!=null&&_64d.showBookmarksButton===false){this.showBookmarksButton=false;}if(_64d.showLocator!=null&&_64d.showLocator===false){this.showLocator=false;}}var _64f=null;_63a.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_650){_64f=_650;});if(_64f!=null&&lang.isObject(_64f)){if(_64f.useBasemapGallery!=null&&_64f.useBasemapGallery===true){this.useBasemapGallery=true;}}},handleBookmarksWidgetVisibilityChanged:function(_651){if(_651){if(!this.useBasemapGallery){this.basemapListingWidget.hide();}else{var _652;_63a.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.IS_HIDDEN,function(_653){_652=_653;});if(!_652){_63a.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.HIDE);}}this.handleDropdownContentVisiblility(true,this.bookmarksDropdownWidth);}else{if(!this.useBasemapGallery){if(!this.basemapListingWidget.viewModel.visible()){this.handleDropdownContentVisiblility(false);}}else{this.handleDropdownContentVisiblility(false);}}},handleBasemapsWidgetVisibilityChanged:function(_654){if(_654){this.bookmarkListingWidget.hide();if(!this.useBasemapGallery){this.handleDropdownContentVisiblility(true,this.basemapsDropdownWidth);}}else{if(!this.bookmarkListingWidget.viewModel.visible()){this.handleDropdownContentVisiblility(false);}}},handleDropdownContentVisiblility:function(_655,_656){if(!_655){this._showDropdownContent();}else{this._hideDropdownContent(_656);}},_hideDropdownContent:function(_657){if(_657!=null){_63d.set(this.toolbarDropdownElement,"width",_657);}_63d.set(this.toolbarDropdownElement,"display","block");if(this.animate){_63e.add(this.toolbarDropdownElement,VIEWER_GLOBALS.ANIMATIONS.FADE.IN);}},_showDropdownContent:function(){_63d.set(this.toolbarDropdownElement,"display","none");if(this.animate){_63e.remove(this.toolbarDropdownElement,VIEWER_GLOBALS.ANIMATIONS.FADE.IN);}},toggleBasemapsListing:function(){if(!this.useBasemapGallery){this.basemapListingWidget.toggle();}else{var _658;_63a.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.IS_HIDDEN,function(_659){_658=_659;});if(_658){_63a.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.SHOW);if(this.bookmarkListingWidget.viewModel.visible()){this.bookmarkListingWidget.hide();}}else{_63a.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.HIDE);}}},toggleBookmarksListing:function(){this.bookmarkListingWidget.toggle();},initListeners:function(){this.inherited(arguments);if(this.showToolsDropdownButton){_63a.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.ADD_TOOL,lang.hitch(this,this.handleAddToolToMenu));}this.initLocatorListeners();if(this.showLabelServicesButton){_63a.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REFERENCE_LAYER_ADDED,lang.hitch(this,this.handleReferenceLayerAdded));_63a.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REFERENCE_LAYER_REMOVED,lang.hitch(this,this.handleReferenceLayerRemoved));this.labelsButton.on("change",lang.hitch(this,this.handleToggleLabels));on(this.layersButton,"click",lang.hitch(this,this.handleShowLayersWindow));}_63a.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.HIDE_TOOLS_BUTTON,lang.hitch(this,this.handleHideToolsButton));_63a.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.SHOW_TOOLS_BUTTON,lang.hitch(this,this.handleShowToolsButton));_63a.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.HIDE_LAYERS_BUTTON,lang.hitch(this,this.handleHideLayersButton));_63a.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.SHOW_LAYERS_BUTTON,lang.hitch(this,this.handleShowLayersButton));this.loadCurrentLocators();},handleShowLayersButton:function(){this.viewModel.layersButtonVisible(true);},handleHideLayersButton:function(){this.viewModel.layersButtonVisible(false);},handleShowToolsButton:function(){this.viewModel.toolsButtonVisible(true);},handleHideToolsButton:function(){this.viewModel.toolsButtonVisible(false);},handleShowLayersWindow:function(){_63a.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.WIDGET.SHOW);},handleToggleLabels:function(_65a){if(_65a){_63a.publish(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.SHOW);}else{_63a.publish(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.HIDE);}},handleReferenceLayerRemoved:function(_65b,_65c){if(!_65c){this.viewModel.showLabelsButton(false);}},handleReferenceLayerAdded:function(){var _65d=_63d.get(this.labelsButton.domNode,"display");if(_65d.toLowerCase()==="none"){this.viewModel.showLabelsButton(true);}},setBasemaps:function(_65e){if(!this.useBasemapGallery){this.basemapListingWidget.setBasemaps(_65e);}},addStaticBookmarks:function(_65f){if(this.bookmarkListingWidget){this.bookmarkListingWidget.addStaticBookmarks(_65f,false);}},loadCookieBookmarks:function(){if(this.bookmarkListingWidget){this.bookmarkListingWidget.loadCookieBookmarks();}},createToolbarDropDown:function(){this.toolbarDropdownElement=_63f.create("div",{className:"defaultBorder threePixelBorderRadius defaultBoxShadow toolbarDropdownContainer",style:{display:"none"}});_63a.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAIN_TOOLBAR_DROP_DOWN,this.toolbarDropdownElement);this.bookmarkListingWidget=new _642();this.bookmarkListingWidget.placeAt(this.toolbarDropdownElement);this.bookmarkListingWidget.viewModel.visible.subscribe(lang.hitch(this,this.handleBookmarksWidgetVisibilityChanged));if(!this.useBasemapGallery){this.basemapListingWidget=new _645();this.basemapListingWidget.placeAt(this.toolbarDropdownElement);this.basemapListingWidget.viewModel.visible.subscribe(lang.hitch(this,this.handleBasemapsWidgetVisibilityChanged));}},tweakUI:function(){this.inherited(arguments);if(has("ie")<9){_63d.set(this.locateButton,"position","relative");_63d.set(this.locateButton,"top","-2px");_63d.set(this.configureLocateButton,"position","relative");_63d.set(this.configureLocateButton,"top","-2px");}else{if(has("ie")>=9){_63d.set(this.locateButton,"height","17px");_63d.set(this.configureLocateButton,"height","17px");_63d.set(this.locateButton,"marginTop","0");_63d.set(this.configureLocateButton,"marginTop","0");}else{if(has("ff")){_63d.set(this.locateButton,"marginTop","0");_63d.set(this.configureLocateButton,"marginTop","0");}}}if(this.toolsDropDownButton){_63d.set(this.toolsDropDownButton.domNode,"float","right");_63d.set(this.toolsDropDownButton.domNode.firstChild,"background","none");_63d.set(this.toolsDropDownButton.domNode.firstChild,"border","none");}_63d.set(this.labelsButton.domNode,"float","right");_63d.set(this.labelsButton.domNode,"marginRight","20px");_63e.add(this.labelsButton.domNode,"defaultTextColor");_63d.set(this.labelsButton.domNode.firstChild,"background","none");_63d.set(this.labelsButton.domNode.firstChild,"border","none");},handleAddToolToMenu:function(_660){if(_660 instanceof _640&&this.toolsDropDownMenu){this.toolsDropDownMenu.addChild(_660);}},handleGotoPrevExtent:function(){_63a.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_PREV_EXTENT);},handleGotoNextExtent:function(){_63a.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_NEXT_EXTENT);},handleGotoFullExtent:function(){var _661;_63a.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,function(ext){_661=ext;var _662=lang.clone(_661);_662.xmin=-25924231.641352512;_662.xmax=24169539.215607613;_662.ymin=-12751827.549115097;_662.ymax=22157269.016828995;_63a.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,_662);});},handleGotoInitialExtent:function(){_63a.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_INITIAL_EXTENT);},handleGotoLastExtent:function(){_63a.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_LAST_EXTENT);}});});},"esriviewer/ui/time/TimeSliderWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/window","dojo/dom-style","../window/WindowWidget"],function(_663,lang,_664,_665,_666,_667){return _663([_667],{defaultPositioning:{x:10,y:50},windowWidth:"450px",windowHeaderText:"Time Slider",windowIconAltText:"Time Slider",windowIconClass:"commonIcons16 clock",positioningParamName:"time",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/time/TimeSliderWidget"],lang.hitch(this,function(_668){this.timeSliderWidget=new _668();this.setContent(this.timeSliderWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_664.subscribe(VIEWER_GLOBALS.EVENTS.MAP.TIME.SHOW_TIME_SLIDER,lang.hitch(this,this.show)));this.subscribes.push(_664.subscribe(VIEWER_GLOBALS.EVENTS.MAP.TIME.TOGGLE_TIME_SLIDER,lang.hitch(this,this.toggle)));},postCreate:function(){var _669=_665.getBox();if(_669.w>1600){_666.set(this.domNode,"width","25%");}else{_666.set(this.domNode,"width","35%");}this.inherited(arguments);},hide:function(){this.inherited(arguments);if(this.timeSliderWidget){this.timeSliderWidget.clearTimeSlider();}}});});},"dijit/MenuItem":function(){define(["dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/kernel","dojo/sniff","dojo/_base/lang","./_Widget","./_TemplatedMixin","./_Contained","./_CssStateMixin","dojo/text!./templates/MenuItem.html"],function(_66a,dom,_66b,_66c,_66d,has,lang,_66e,_66f,_670,_671,_672){var _673=_66a("dijit.MenuItem"+(has("dojo-bidi")?"_NoBidi":""),[_66e,_66f,_670,_671],{templateString:_672,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(val){this._set("label",val);var _674="";var text;var ndx=val.search(/{\S}/);if(ndx>=0){_674=val.charAt(ndx+1);var _675=val.substr(0,ndx);var _676=val.substr(ndx+3);text=_675+_674+_676;val=_675+"<span class=\"dijitMenuItemShortcutKey\">"+_674+"</span>"+_676;}else{text=val;}this.domNode.setAttribute("aria-label",text+" "+this.accelKey);this.containerNode.innerHTML=val;this._set("shortcutKey",_674);},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:false,_fillContent:function(_677){if(_677&&!("label" in this.params)){this._set("label",_677.innerHTML);}},buildRendering:function(){this.inherited(arguments);var _678=this.id+"_text";_66b.set(this.containerNode,"id",_678);if(this.accelKeyNode){_66b.set(this.accelKeyNode,"id",this.id+"_accel");}dom.setSelectable(this.domNode,false);},onClick:function(){},focus:function(){try{if(has("ie")==8){this.containerNode.focus();}this.focusNode.focus();}catch(e){}},_onFocus:function(){this.getParent()._onItemFocus(this);this.inherited(arguments);},_setSelected:function(_679){_66c.toggle(this.domNode,"dijitMenuItemSelected",_679);},setLabel:function(_67a){_66d.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_67a);},setDisabled:function(_67b){_66d.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",_67b);},_setDisabledAttr:function(_67c){this.focusNode.setAttribute("aria-disabled",_67c?"true":"false");this._set("disabled",_67c);},_setAccelKeyAttr:function(_67d){if(this.accelKeyNode){this.accelKeyNode.style.display=_67d?"":"none";this.accelKeyNode.innerHTML=_67d;_66b.set(this.containerNode,"colSpan",_67d?"1":"2");}this._set("accelKey",_67d);}});if(has("dojo-bidi")){_673=_66a("dijit.MenuItem",_673,{_setLabelAttr:function(val){this.inherited(arguments);if(this.textDir==="auto"){this.applyTextDir(this.textDirNode);}}});}return _673;});},"esriviewer/ui/measure/MeasureWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","../window/WindowWidget","./MeasureWidget"],function(_67e,lang,_67f,_680,_681){return _67e([_680],{defaultPositioning:{x:50,y:50},windowWidth:"300px",windowHeaderText:"Measure",windowIconAltText:"Measure",windowIconClass:"commonIcons16 triangle",positioningParamName:"measure",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/measure/MeasureWidget"],lang.hitch(this,function(_682){this.measureWidget=new _682();this.setContent(this.measureWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_67f.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.MEASURE.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_67f.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.MEASURE.TOGGLE,lang.hitch(this,this.toggle)));this.subscribes.push(_67f.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.MEASURE.HIDE,lang.hitch(this,this.hide)));},hide:function(){this.inherited(arguments);if(this.measureWidget){this.measureWidget.reset();}}});});},"esriviewer/map/geometry/GeometryServiceController":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","esri/tasks/GeometryService","esri/config","esri/tasks/AreasAndLengthsParameters","esri/tasks/LengthsParameters","esri/tasks/BufferParameters","esri/tasks/ProjectParameters","esri/geometry/webMercatorUtils","esri/SpatialReference"],function(_683,_684,lang,_685,_686,_687,_688,_689,_68a,_68b,_68c){return _683([],{constructor:function(_68d){lang.mixin(this,_68d||{});this.init();},init:function(){this.loadViewerConfigurationData();if(this.geometryService==null){return;}else{this.initListeners();}var _68e=null;_684.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,function(ext){_68e=ext;});if(_68e&&_68e.spatialReference&&_68e.spatialReference!=null){this.mapSpatialReference=_68e.spatialReference;}this.createMapConfigGeometryService();},loadViewerConfigurationData:function(){var _68f=null;_684.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"geometryServiceUrl",function(_690){_68f=_690;});this.geometryServiceUrl=_68f;if(this.geometryServiceUrl!=null&&this.geometryServiceUrl!=""){this.geometryService=new _685(this.geometryServiceUrl);}else{_684.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"No Geometry Service in configuration. Service disabled");VIEWER_UTILS.log("No Geometry Service in configuration. Service disabled",VIEWER_GLOBALS.LOG_TYPE.WARNING);}},createMapConfigGeometryService:function(){if(this.geometryServiceUrl){if(_686&&_686.defaults){_686.defaults.geometryService=new _685(this.geometryServiceUrl);}}},initListeners:function(){_684.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_LAT_LON,lang.hitch(this,this.handleProjectGeometriesToLatLon));_684.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.MGRS_TO_LAT_LON,lang.hitch(this,this.handleMgrsToLatLon));_684.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_MAP_SR,lang.hitch(this,this.handleProjectGeometriesToMapSR));_684.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_AREA,lang.hitch(this,this.handleCalculateArea));_684.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_DISTANCE,lang.hitch(this,this.handleCalculateDistance));_684.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.EXISTS,lang.hitch(this,this.handleGeometryServiceExists));_684.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.BUFFER_POINT,lang.hitch(this,this.handleBufferPoint));this.projectErrorDefaultCallback=lang.hitch(this,this.handleProjectionError);},handleCalculateArea:function(_691,_692,_693){if(_693!=null&&lang.isFunction(_693)){var _694=new _687();_694.areaUnit=_692;_694.polygons=[_691];this.geometryService.areasAndLengths(_694,_693,_693);}},handleCalculateDistance:function(_695,_696,_697){if(_697!=null&&lang.isFunction(_697)){var _698=new _688();_698.lengthUnit=_696;_698.polylines=[_695];_698.geodesic=true;this.geometryService.lengths(_698,_697,_697);}},handleMgrsToLatLon:function(_699,_69a){PROJECTION_UTILS.USNGtoLL(_699,_69a);},handleBufferPoint:function(pt,_69b,_69c,_69d){if(pt==null||_69b==null||_69b.distance==null||_69b.units==null){return;}if(_69c==null||!lang.isFunction(_69c)||this.mapSpatialReference==null){return;}var _69e=new _689();_69e.geometries=[pt];_69e.distances=[_69b.distance];_69e.unit=_69b.units;_69e.bufferSpatialReference=pt.spatialReference;_69e.outSpatialReference=this.mapSpatialReference;this.geometryService.buffer(_69e,_69c,_69d);},handleProjectGeometriesToLatLon:function(_69f,_6a0){if(_6a0==null||!lang.isFunction(_6a0)||_69f==null){return;}if(!lang.isArray(_69f)){_69f=[_69f];}if(_69f.length==0){_6a0([]);}var _6a1=false;var _6a2=[];if(_69f[0].spatialReference.wkid===PROJECTION_UTILS.WEB_MERCATOR_WKID||_69f[0].spatialReference.wkid===PROJECTION_UTILS.WGS_84_WKID){if(_69f[0].spatialReference.wkid===PROJECTION_UTILS.WGS_84_WKID){_6a0(_69f);}var _6a3=_68b.webMercatorToGeographic;if(lang.isFunction(_6a3)){for(var i=0;i<_69f.length;i++){_6a2.push(_6a3(_69f[i]));}}}if(_6a2.length>0){_6a0(_6a2);}else{var _6a4=new _68a();_6a4.geometries=_69f;_6a4.outSR=new _68c({wkid:PROJECTION_UTILS.WGS_84_WKID});this.geometryService.project(_6a4,_6a0,_6a0);}},handleProjectGeometriesToMapSR:function(_6a5,_6a6,_6a7,_6a8){if(_6a5==null){if(_6a8&&lang.isFunction(_6a8)){_6a8("No geometries to project");}return;}if(_6a6==null||!lang.isFunction(_6a6)||this.mapSpatialReference==null){if(_6a8&&lang.isFunction(_6a8)){_6a8("Cannot process project");}return;}if(!lang.isArray(_6a5)){_6a5=[_6a5];}if(_6a5.length<0){_6a6([]);}var _6a9=PROJECTION_UTILS.geometryToMapSpatialReference(_6a5);if(_6a9!=null&&lang.isArray(_6a9)){_6a6(_6a9);}else{this._handleServerSideProject(_6a5,_6a6,_6a7,_6a8);}},_handleServerSideProject:function(_6aa,_6ab,_6ac,_6ad){if(_6ac==null){_6ac={};}var _6ae=new _68a();_6ae.geometries=_6aa;_6ae.outSR=this.mapSpatialReference;if(_6ac.transformation){_6ae.transformation=_6ac.transformation;}if(_6ad==null||!lang.isFunction(_6ad)){_6ad=this.projectErrorDefaultCallback;}this.geometryService.project(_6ae,_6ab,_6ad);},handleProjectionError:function(err){VIEWER_UTILS.log("Error Projecting data",VIEWER_GLOBALS.LOG_TYPE.ERROR);},handleGeometryServiceExists:function(_6af){if(_6af!=null&&lang.isFunction(_6af)){_6af(this.geometryService!=null);}}});});},"esriviewer/base/LocationServiceSupport":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","esri/tasks/locator"],function(_6b0,_6b1,lang,_6b2){return _6b0([],{constructor:function(){this.locatorLookup={};},_initListeners:function(){_6b1.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.SINGLE_LINE_ADDRESS_TO_LOCATION,lang.hitch(this,this._handleSingleAddressLineAddressToLocations));_6b1.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.REVERSE_GEOCODE,lang.hitch(this,this.handleReverseGeocode));_6b1.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.ADD_LOCATOR,lang.hitch(this,this.handleAddLocatorRequest));_6b1.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.REMOVE_LOCATOR,lang.hitch(this,this.handleRemoveLocatorRequest));_6b1.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.GET_LOCATORS,lang.hitch(this,this.handleGetLocators));},handleGetLocators:function(_6b3){if(_6b3!=null&&lang.isFunction(_6b3)){var _6b4=[];for(var key in this.locatorLookup){_6b4.push(this.locatorLookup[key]);}_6b3(_6b4);}},handleReverseGeocode:function(_6b5,_6b6,_6b7,_6b8){if(_6b7!=null&&lang.isFunction(_6b7)){var _6b9;var _6ba=null;for(var key in this.locatorLookup){_6b9=this.locatorLookup[key];if(_6b9!=null&&_6b9.locator!=null&&lang.isFunction(_6b9.locator.locationToAddress)){_6ba=_6b9.locator;break;}}if(_6ba==null){if(_6b8!=null&&lang.isFunction(_6b8)){_6b8("Reverse Geocode Not Supported");return;}}if(_6b6==null){_6b6=VIEWER_GLOBALS.DEFAULT_REVERSE_GEOCODE_DISTANCE;}_6ba.locationToAddress(_6b5,_6b6,_6b7,_6b8);}},_handleSingleAddressLineAddressToLocations:function(_6bb,_6bc,_6bd){this.singleLineAddressToLocations(_6bb,_6bc,_6bd);},handleRemoveLocatorRequest:function(_6be){if(this.locatorLookup[_6be]!=null){delete this.locatorLookup[_6be];_6b1.publish(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_REMOVED,_6be);}},handleAddLocatorRequest:function(_6bf,_6c0,_6c1){this.addLocator(_6bf,null,function(id){if(id!=null){if(_6c0!=null&&lang.isFunction(_6c0)){_6c0(id,_6bf);}}else{if(_6c1!=null&&lang.isFunction(_6c1)){_6c1("Locator Exists");}}});},addLocator:function(_6c2,_6c3,_6c4){var id=_6c2.toLowerCase();if(this.locatorLookup[id]==null){var _6c5=new _6b2(_6c2);var _6c6={locator:_6c5,label:(_6c3!=null&&_6c3!="")?_6c3:REG_EXP_UTILS.getServiceNameFromUrl(_6c5.url)};var _6c7=null;_6b1.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,function(ext){_6c7=ext;});if(_6c7&&_6c7.spatialReference){_6c5.setOutSpatialReference(_6c7.spatialReference);}var _6c8=_6c4;var _6c9=this.locatorLookup;VIEWER_UTILS.getServiceDescription(_6c2,function(_6ca){if(_6ca!=null&&lang.isObject(_6ca)){if(_6ca.singleLineAddressField!=null&&lang.isObject(_6ca.singleLineAddressField)&&_6ca.singleLineAddressField.name!=null&&_6ca.singleLineAddressField.name!=""){_6c5.serviceDescription=_6ca;_6c9[id]=_6c6;_6b1.publish(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_ADDED,_6c6);if(_6c8!=null&&lang.isFunction(_6c8)){_6c8(id);}}else{_6b1.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Locator does not support single line address.");}}});}else{VIEWER_UTILS.log("Locator Already Exists: "+_6c2,VIEWER_GLOBALS.LOG_TYPE.ERROR);_6b1.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Locator already exists.");return null;}},singleLineAddressToLocations:function(_6cb,_6cc,_6cd){if(_6cd!=null){var _6ce={};_6ce[_6cd.serviceDescription.singleLineAddressField.name]=VIEWER_UTILS.trim(_6cb);var _6cf=lang.hitch(this,this._handleLocatorResponse,_6cd.url.toLowerCase(),_6cc);var _6d0=lang.hitch(this,this._handleLocatorError,_6cd.url.toLowerCase(),_6cc);_6cd.addressToLocations(_6ce,["*"],_6cf,_6d0);}},_handleLocatorResponse:function(_6d1,_6d2,_6d3){_6b1.publish(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_REQUEST_COMPLETE,{addressCandidates:_6d3,locatorId:_6d1,requestId:_6d2});},_handleLocatorError:function(_6d4,_6d5,_6d6){_6b1.publish(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_REQUEST_ERROR,{error:_6d6,locatorId:_6d4,requestId:_6d5});VIEWER_UTILS.log("Could not perform locate",VIEWER_GLOBALS.LOG_TYPE.ERROR);_6b1.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Could not perform locate");}});});},"esriviewer/ui/zoomto/ZoomToWidgetWindow":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/dom-style","../window/WindowWidget"],function(_6d7,_6d8,lang,_6d9,_6da,_6db){return _6d7([_6da],{defaultPositioning:{x:10,y:240},windowWidth:"275px",windowHeaderText:"Zoom To",windowIconAltText:"Zoom To",windowIconClass:"commonIcons16 magnifyingGlass",positioningParamName:"zoomTo",initListeners:function(){this.inherited(arguments);this.subscribes.push(_6d8.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.ZOOM_TO.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_6d8.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.ZOOM_TO.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_6d8.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.ZOOM_TO.TOGGLE,lang.hitch(this,this.toggle)));this.firstShowListener=this.on("firstWindowShow",lang.hitch(this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/zoomto/ZoomToWidget"],lang.hitch(this,function(_6dc){this.zoomToWidget=new _6dc();this.setContent(this.zoomToWidget.domNode);}));}});});},"dijit/layout/_LayoutWidget":function(){define(["dojo/_base/lang","../_Widget","../_Container","../_Contained","../Viewport","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style"],function(lang,_6dd,_6de,_6df,_6e0,_6e1,_6e2,_6e3,_6e4){return _6e1("dijit.layout._LayoutWidget",[_6dd,_6de,_6df],{baseClass:"dijitLayoutContainer",isLayoutContainer:true,buildRendering:function(){this.inherited(arguments);_6e2.add(this.domNode,"dijitContainer");},startup:function(){if(this._started){return;}this.inherited(arguments);var _6e5=this.getParent&&this.getParent();if(!(_6e5&&_6e5.isLayoutContainer)){this.resize();this.own(_6e0.on("resize",lang.hitch(this,"resize")));}},resize:function(_6e6,_6e7){var node=this.domNode;if(_6e6){_6e3.setMarginBox(node,_6e6);}var mb=_6e7||{};lang.mixin(mb,_6e6||{});if(!("h" in mb)||!("w" in mb)){mb=lang.mixin(_6e3.getMarginBox(node),mb);}var cs=_6e4.getComputedStyle(node);var me=_6e3.getMarginExtents(node,cs);var be=_6e3.getBorderExtents(node,cs);var bb=(this._borderBox={w:mb.w-(me.w+be.w),h:mb.h-(me.h+be.h)});var pe=_6e3.getPadExtents(node,cs);this._contentBox={l:_6e4.toPixelValue(node,cs.paddingLeft),t:_6e4.toPixelValue(node,cs.paddingTop),w:bb.w-pe.w,h:bb.h-pe.h};this.layout();},layout:function(){},_setupChild:function(_6e8){var cls=this.baseClass+"-child "+(_6e8.baseClass?this.baseClass+"-"+_6e8.baseClass:"");_6e2.add(_6e8.domNode,cls);},addChild:function(_6e9,_6ea){this.inherited(arguments);if(this._started){this._setupChild(_6e9);}},removeChild:function(_6eb){var cls=this.baseClass+"-child"+(_6eb.baseClass?" "+this.baseClass+"-"+_6eb.baseClass:"");_6e2.remove(_6eb.domNode,cls);this.inherited(arguments);}});});},"dojox/uuid/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang"],function(dojo){dojo.getObject("uuid",true,dojox);dojox.uuid.NIL_UUID="00000000-0000-0000-0000-000000000000";dojox.uuid.version={UNKNOWN:0,TIME_BASED:1,DCE_SECURITY:2,NAME_BASED_MD5:3,RANDOM:4,NAME_BASED_SHA1:5};dojox.uuid.variant={NCS:"0",DCE:"10",MICROSOFT:"110",UNKNOWN:"111"};dojox.uuid.assert=function(_6ec,_6ed){if(!_6ec){if(!_6ed){_6ed="An assert statement failed.\n"+"The method dojox.uuid.assert() was called with a 'false' value.\n";}throw new Error(_6ed);}};dojox.uuid.generateNilUuid=function(){return dojox.uuid.NIL_UUID;};dojox.uuid.isValid=function(_6ee){_6ee=_6ee.toString();var _6ef=(dojo.isString(_6ee)&&(_6ee.length==36)&&(_6ee==_6ee.toLowerCase()));if(_6ef){var _6f0=_6ee.split("-");_6ef=((_6f0.length==5)&&(_6f0[0].length==8)&&(_6f0[1].length==4)&&(_6f0[2].length==4)&&(_6f0[3].length==4)&&(_6f0[4].length==12));var _6f1=16;for(var i in _6f0){var part=_6f0[i];var _6f2=parseInt(part,_6f1);_6ef=_6ef&&isFinite(_6f2);}}return _6ef;};dojox.uuid.getVariant=function(_6f3){if(!dojox.uuid._ourVariantLookupTable){var _6f4=dojox.uuid.variant;var _6f5=[];_6f5[0]=_6f4.NCS;_6f5[1]=_6f4.NCS;_6f5[2]=_6f4.NCS;_6f5[3]=_6f4.NCS;_6f5[4]=_6f4.NCS;_6f5[5]=_6f4.NCS;_6f5[6]=_6f4.NCS;_6f5[7]=_6f4.NCS;_6f5[8]=_6f4.DCE;_6f5[9]=_6f4.DCE;_6f5[10]=_6f4.DCE;_6f5[11]=_6f4.DCE;_6f5[12]=_6f4.MICROSOFT;_6f5[13]=_6f4.MICROSOFT;_6f5[14]=_6f4.UNKNOWN;_6f5[15]=_6f4.UNKNOWN;dojox.uuid._ourVariantLookupTable=_6f5;}_6f3=_6f3.toString();var _6f6=_6f3.charAt(19);var _6f7=16;var _6f8=parseInt(_6f6,_6f7);dojox.uuid.assert((_6f8>=0)&&(_6f8<=16));return dojox.uuid._ourVariantLookupTable[_6f8];};dojox.uuid.getVersion=function(_6f9){var _6fa="dojox.uuid.getVersion() was not passed a DCE Variant UUID.";dojox.uuid.assert(dojox.uuid.getVariant(_6f9)==dojox.uuid.variant.DCE,_6fa);_6f9=_6f9.toString();var _6fb=_6f9.charAt(14);var _6fc=16;var _6fd=parseInt(_6fb,_6fc);return _6fd;};dojox.uuid.getNode=function(_6fe){var _6ff="dojox.uuid.getNode() was not passed a TIME_BASED UUID.";dojox.uuid.assert(dojox.uuid.getVersion(_6fe)==dojox.uuid.version.TIME_BASED,_6ff);_6fe=_6fe.toString();var _700=_6fe.split("-");var _701=_700[4];return _701;};dojox.uuid.getTimestamp=function(_702,_703){var _704="dojox.uuid.getTimestamp() was not passed a TIME_BASED UUID.";dojox.uuid.assert(dojox.uuid.getVersion(_702)==dojox.uuid.version.TIME_BASED,_704);_702=_702.toString();if(!_703){_703=null;}switch(_703){case "string":case String:return dojox.uuid.getTimestamp(_702,Date).toUTCString();break;case "hex":var _705=_702.split("-");var _706=_705[0];var _707=_705[1];var _708=_705[2];_708=_708.slice(1);var _709=_708+_707+_706;dojox.uuid.assert(_709.length==15);return _709;break;case null:case "date":case Date:var _70a=3394248;var _70b=16;var _70c=_702.split("-");var _70d=parseInt(_70c[0],_70b);var _70e=parseInt(_70c[1],_70b);var _70f=parseInt(_70c[2],_70b);var _710=_70f&4095;_710<<=16;_710+=_70e;_710*=4294967296;_710+=_70d;var _711=_710/10000;var _712=60*60;var _713=_70a;var _714=_713*_712;var _715=_714*1000;var _716=_711-_715;var _717=new Date(_716);return _717;break;default:dojox.uuid.assert(false,"dojox.uuid.getTimestamp was not passed a valid returnType: "+_703);break;}};return dojox.uuid;});},"esriviewer/ui/user/location/UserLocationWidget":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-class","dojo/_base/lang","dojo/on","dojo/topic","../../base/UIWidget","esri/geometry/Point","esri/SpatialReference"],function(_718,_719,_71a,lang,on,_71b,_71c,_71d,_71e){return _718([_71c],{defaultPositioning:{x:20,y:205},browserLocationWkid:4326,isPositionedByConfig:true,positioningParamName:"zoomToUserLocation",maximumAge:0,timeout:6000,enableHighAccuracy:true,postCreate:function(){this.inherited(arguments);_71a.add(this.domNode,"userLocationCrosshairContainer fivePixelBorderRadius defaultTwoPixelBorder defaultBackground");var _71f=_719.create("div",{className:"commonIcons32 locationCrosshair"});_719.place(_71f,this.domNode);on(_71f,"click",lang.hitch(this,this.handleZoomToCurrentLocation));this.handleProjectResponse=lang.hitch(this,this._handleProjectResponse);this.zoomToCurrentLocation=lang.hitch(this,this._zoomToCurrentLocation);this.zoomToCurrentLocationError=lang.hitch(this,this._zoomToCurrentLocationError);},handleZoomToCurrentLocation:function(){if(navigator&&navigator.geolocation){navigator.geolocation.getCurrentPosition(this.zoomToCurrentLocation,this.zoomToCurrentLocationError,{maximumAge:this.maximumAge,timeout:this.timeout,enableHighAccuracy:this.enableHighAccuracy});}},_zoomToCurrentLocation:function(_720){if(_720!=null&&lang.isObject(_720)&&_720.coords){var pt=new _71d(_720.coords.longitude,_720.coords.latitude,new _71e({wkid:this.browserLocationWkid}));_71b.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_MAP_SR,pt,this.handleProjectResponse);}},_handleProjectResponse:function(_721){if(_721!=null&&lang.isArray(_721)&&_721.length>0){_71b.publish(VIEWER_GLOBALS.EVENTS.MAP.FLASH.POINT,_721[0]);_71b.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PAN_TO,_721[0],{deepest:true});}},_zoomToCurrentLocationError:function(){_71b.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Could not zoom to current location");VIEWER_UTILS.log("Could not get users current location");}});});},"esriviewer/ui/geocode/ReverseGeocodeWindowWidget":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/dom-style","../window/WindowWidget"],function(_722,_723,lang,_724,_725){return _722([_725],{defaultPositioning:{x:600,y:150},windowWidth:"310px",windowHeaderText:"Find Address By Point",windowIconAltText:"Find Address By Point",positioningParamName:"reverseGeocode",windowIconClass:"commonIcons16 binoculars",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/geocode/ReverseGeocodeWidget"],lang.hitch(this,function(_726){this.reverseGeocodeWidget=new _726();this.setContent(this.reverseGeocodeWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_723.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REVERSE_GEOCODE.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_723.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REVERSE_GEOCODE.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_723.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REVERSE_GEOCODE.TOGGLE,lang.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.reverseGeocodeWidget){this.reverseGeocodeWidget.reset();}}});});},"esriviewer/ui/logging/LoggingWidget":function(){define(["dojo/_base/declare","dojo/text!./template/LoggingWidgetTemplate.html","dojo/topic","../base/UITemplatedWidget","dojo/_base/lang","dojo/on","../tooltip/ConfirmTooltip","./model/LoggingViewModel"],function(_727,_728,_729,_72a,lang,on,_72b,_72c){return _727([_72a],{templateString:_728,initListeners:function(){this.inherited(arguments);this.subscribes.push(_729.subscribe(VIEWER_GLOBALS.EVENTS.LOGGING.ADD,lang.hitch(this,this._addLogging)));this.subscribes.push(_729.subscribe(VIEWER_GLOBALS.EVENTS.LOGGING.CLEAR,lang.hitch(this,this._clearLogging)));},postCreate:function(){this.inherited(arguments);this.viewModel=new _72c();ko.applyBindings(this.viewModel,this.domNode);},_addLogging:function(_72d,type){if(type!=null&&type!=""){type=type.toLowerCase();}if(type===VIEWER_GLOBALS.LOG_TYPE.WARNING){this._createWarningMessage(_72d);}else{if(type===VIEWER_GLOBALS.LOG_TYPE.ERROR){this._createErrorMessage(_72d);}else{this._createInfoMessage(_72d);}}},_createErrorMessage:function(_72e){this._createMessage(_72e,"commonIcons16 error","loggingErrorMessage",VIEWER_GLOBALS.LOG_TYPE.ERROR);},_createInfoMessage:function(_72f){this._createMessage(_72f,"commonIcons16 information","loggingInfoMessage",VIEWER_GLOBALS.LOG_TYPE.INFO);},_createWarningMessage:function(_730){this._createMessage(_730,"commonIcons16 warning","loggingWarningMessage",VIEWER_GLOBALS.LOG_TYPE.WARNING);},_createMessage:function(_731,_732,_733,type){this.viewModel.logEntries.push({message:_731,messageStyleClass:_733,iconClass:_732,time:VIEWER_UTILS.getTimeStamp(),type:type});},_clearLogging:function(){this.viewModel.logEntries.removeAll();},_createDeleteAllMessagesTooltip:function(){this.confirmClearLogTooltip=new _72b({confirmCallback:lang.hitch(this,this._clearLogging),aroundNode:this.clearLogIcon,displayText:"Clear Log? "});},_showConfirmLogTooltip:function(){if(this.confirmClearLogTooltip==null){this._createDeleteAllMessagesTooltip();}if(this.confirmClearLogTooltip){this.confirmClearLogTooltip.show();}},hidePopups:function(){if(this.confirmClearLogTooltip){this.confirmClearLogTooltip.hide();}}});});},"dijit/layout/StackController":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/keys","dojo/_base/lang","dojo/on","dojo/topic","../focus","../registry","../_Widget","../_TemplatedMixin","../_Container","../form/ToggleButton","dojo/touch","dojo/i18n!../nls/common"],function(_734,_735,_736,_737,keys,lang,on,_738,_739,_73a,_73b,_73c,_73d,_73e){var _73f=_735("dijit.layout._StackButton",_73e,{tabIndex:"-1",closeButton:false,_aria_attr:"aria-selected",buildRendering:function(evt){this.inherited(arguments);(this.focusNode||this.domNode).setAttribute("role","tab");}});var _740=_735("dijit.layout.StackController",[_73b,_73c,_73d],{baseClass:"dijitStackController",templateString:"<span role='tablist' data-dojo-attach-event='onkeydown'></span>",containerId:"",buttonWidget:_73f,buttonWidgetCloseClass:"dijitStackCloseButton",pane2button:function(id){return _73a.byId(this.id+"_"+id);},postCreate:function(){this.inherited(arguments);this.own(_738.subscribe(this.containerId+"-startup",lang.hitch(this,"onStartup")),_738.subscribe(this.containerId+"-addChild",lang.hitch(this,"onAddChild")),_738.subscribe(this.containerId+"-removeChild",lang.hitch(this,"onRemoveChild")),_738.subscribe(this.containerId+"-selectChild",lang.hitch(this,"onSelectChild")),_738.subscribe(this.containerId+"-containerKeyDown",lang.hitch(this,"onContainerKeyDown")));this.containerNode.dojoClick=true;this.own(on(this.containerNode,"click",lang.hitch(this,function(evt){var _741=_73a.getEnclosingWidget(evt.target);if(_741!=this.containerNode&&!_741.disabled&&_741.page){for(var _742=evt.target;_742!==this.containerNode;_742=_742.parentNode){if(_736.contains(_742,this.buttonWidgetCloseClass)){this.onCloseButtonClick(_741.page);break;}else{if(_742==_741.domNode){this.onButtonClick(_741.page);break;}}}}})));},onStartup:function(info){this.textDir=info.textDir;_734.forEach(info.children,this.onAddChild,this);if(info.selected){this.onSelectChild(info.selected);}var _743=_73a.byId(this.containerId).containerNode,_744=lang.hitch(this,"pane2button"),_745={"title":"label","showtitle":"showLabel","iconclass":"iconClass","closable":"closeButton","tooltip":"title","disabled":"disabled","textdir":"textdir"},_746=function(attr,_747){return on(_743,"attrmodified-"+attr,function(evt){var _748=_744(evt.detail&&evt.detail.widget&&evt.detail.widget.id);if(_748){_748.set(_747,evt.detail.newValue);}});};for(var attr in _745){this.own(_746(attr,_745[attr]));}},destroy:function(_749){this.destroyDescendants(_749);this.inherited(arguments);},onAddChild:function(page,_74a){var Cls=lang.isString(this.buttonWidget)?lang.getObject(this.buttonWidget):this.buttonWidget;var _74b=new Cls({id:this.id+"_"+page.id,name:this.id+"_"+page.id,label:page.title,disabled:page.disabled,ownerDocument:this.ownerDocument,dir:page.dir,lang:page.lang,textDir:page.textDir||this.textDir,showLabel:page.showTitle,iconClass:page.iconClass,closeButton:page.closable,title:page.tooltip,page:page});this.addChild(_74b,_74a);page.controlButton=_74b;if(!this._currentChild){this.onSelectChild(page);}var _74c=page._wrapper.getAttribute("aria-labelledby")?page._wrapper.getAttribute("aria-labelledby")+" "+_74b.id:_74b.id;page._wrapper.removeAttribute("aria-label");page._wrapper.setAttribute("aria-labelledby",_74c);},onRemoveChild:function(page){if(this._currentChild===page){this._currentChild=null;}var _74d=this.pane2button(page.id);if(_74d){this.removeChild(_74d);_74d.destroy();}delete page.controlButton;},onSelectChild:function(page){if(!page){return;}if(this._currentChild){var _74e=this.pane2button(this._currentChild.id);_74e.set("checked",false);_74e.focusNode.setAttribute("tabIndex","-1");}var _74f=this.pane2button(page.id);_74f.set("checked",true);this._currentChild=page;_74f.focusNode.setAttribute("tabIndex","0");var _750=_73a.byId(this.containerId);},onButtonClick:function(page){var _751=this.pane2button(page.id);_739.focus(_751.focusNode);if(this._currentChild&&this._currentChild.id===page.id){_751.set("checked",true);}var _752=_73a.byId(this.containerId);_752.selectChild(page);},onCloseButtonClick:function(page){var _753=_73a.byId(this.containerId);_753.closeChild(page);if(this._currentChild){var b=this.pane2button(this._currentChild.id);if(b){_739.focus(b.focusNode||b.domNode);}}},adjacent:function(_754){if(!this.isLeftToRight()&&(!this.tabPosition||/top|bottom/.test(this.tabPosition))){_754=!_754;}var _755=this.getChildren();var idx=_734.indexOf(_755,this.pane2button(this._currentChild.id)),_756=_755[idx];var _757;do{idx=(idx+(_754?1:_755.length-1))%_755.length;_757=_755[idx];}while(_757.disabled&&_757!=_756);return _757;},onkeydown:function(e,_758){if(this.disabled||e.altKey){return;}var _759=null;if(e.ctrlKey||!e._djpage){switch(e.keyCode){case keys.LEFT_ARROW:case keys.UP_ARROW:if(!e._djpage){_759=false;}break;case keys.PAGE_UP:if(e.ctrlKey){_759=false;}break;case keys.RIGHT_ARROW:case keys.DOWN_ARROW:if(!e._djpage){_759=true;}break;case keys.PAGE_DOWN:if(e.ctrlKey){_759=true;}break;case keys.HOME:var _75a=this.getChildren();for(var idx=0;idx<_75a.length;idx++){var _75b=_75a[idx];if(!_75b.disabled){this.onButtonClick(_75b.page);break;}}e.stopPropagation();e.preventDefault();break;case keys.END:var _75a=this.getChildren();for(var idx=_75a.length-1;idx>=0;idx--){var _75b=_75a[idx];if(!_75b.disabled){this.onButtonClick(_75b.page);break;}}e.stopPropagation();e.preventDefault();break;case keys.DELETE:case "W".charCodeAt(0):if(this._currentChild.closable&&(e.keyCode==keys.DELETE||e.ctrlKey)){this.onCloseButtonClick(this._currentChild);}e.stopPropagation();e.preventDefault();break;case keys.TAB:if(e.ctrlKey){this.onButtonClick(this.adjacent(!e.shiftKey).page);e.stopPropagation();e.preventDefault();}break;}if(_759!==null){this.onButtonClick(this.adjacent(_759).page);e.stopPropagation();e.preventDefault();}}},onContainerKeyDown:function(info){info.e._djpage=info.page;this.onkeydown(info.e);}});_740.StackButton=_73f;return _740;});},"esriviewer/ui/header/model/HeaderLogoViewModel":function(){define(["dojo/_base/declare"],function(_75c){return _75c([],{constructor:function(){this.showHeaderIcon=ko.observable(true);this.headerIconUrl=ko.observable();this.headerMainText=ko.observable("Esri Map Viewer");this.helpUrl=ko.observable("http://www.esri.com");this.contactUrl=ko.observable("http://www.esri.com/about-esri/contact");this.contactText=ko.observable("Contact Esri");this.helpText=ko.observable("Help");}});});},"esriviewer/ui/basemap/BasemapGalleryWidget":function(){define(["dojo/_base/declare","dojo/text!./template/BasemapGalleryTemplate.html","dojo/_base/lang","dojo/_base/connect","dojo/topic","dojo/_base/window","dojo/dom-class","dojo/dom-construct","../base/UITemplatedWidget","./model/BasemapGalleryViewModel","esri/dijit/BasemapGallery","esri/arcgis/utils"],function(_75d,_75e,lang,con,_75f,_760,_761,_762,_763,_764,_765,_766){return _75d([_763],{animateOnPlace:false,usePortalBasemaps:false,animate:true,templateString:_75e,constructor:function(){this.animation=VIEWER_GLOBALS.ANIMATIONS.FADE.IN;},initListeners:function(){_75f.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.TOGGLE,lang.hitch(this,this.handleToggleBasemapGallery));_75f.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.SHOW,lang.hitch(this,this.handleShowBasemapGallery));_75f.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.HIDE,lang.hitch(this,this.handleHideBasemapGallery));_75f.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.IS_HIDDEN,lang.hitch(this,this.handleBasemapGalleryIsHidden));_75f.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.GET,lang.hitch(this,this.handleGetBasemapGallery));},handleGetBasemapGallery:function(_767){if(_767!=null&&lang.isFunction(_767)){_767(this.basemapGallery);}},loadViewerConfigurationData:function(){var _768;_75f.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_769){_768=_769;});if(_768){if(_768.useConfiguredPortalBasemaps!=null){this.usePortalBasemaps=_768.useConfiguredPortalBasemaps;}}var _76a=null;_75f.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"animationsEnabled",function(_76b){_76a=_76b;});if(_76a!=null){this.animate=_76a;}},handleBasemapGalleryIsHidden:function(_76c){if(_76c!=null&&lang.isFunction(_76c)){_76c(!this.viewModel.visible());}},handleHideBasemapGallery:function(){if(this.viewModel.visible()){this.viewModel.visible(false);if(this.animate){this._removeAnimationClasses();}}},handleShowBasemapGallery:function(){if(!this.viewModel.visible()){this.viewModel.visible(true);if(this.animate){this._animateWidget();}}},handleToggleBasemapGallery:function(){if(!this.viewModel.visible()){this.handleShowBasemapGallery();}else{this.handleHideBasemapGallery();}},postCreate:function(){this.inherited(arguments);this.viewModel=new _764();ko.applyBindings(this.viewModel,this.domNode);_75f.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.BASEMAP_GALLERY,this);var map;dojo.publish(VIEWER_GLOBALS.EVENTS.MAP.GET,function(_76d){map=_76d;});var _76e={map:map,showArcGISBasemaps:true};var _76f;_75f.publish(VIEWER_GLOBALS.EVENTS.PORTAL.GET_INSTANCE,function(_770){_76f=_770;});if(this.usePortalBasemaps&&_76f){var _771;_75f.publish(VIEWER_GLOBALS.EVENTS.PORTAL.GET_BASEMAPS,lang.hitch(this,function(_772){_771=_772;if(_771&&_771.length>0){_76e.showArcGISBasemaps=false;_76e.basemaps=_771;}this._initGallery(_76e);}));}else{this._initGallery(_76e);}},_initGallery:function(_773){this.basemapGallery=new _765(_773,this.basemapGalleryContents);this.basemapGallery.on("load",lang.hitch(this,this.handleBasemapGalleryLoaded));con.connect(this.basemapGallery,"onSelectionChange",lang.hitch(this,this.handleBasemapSelectionChanged));this.basemapGallery.startup();},handleBasemapSelectionChanged:function(){this.handleHideBasemapGallery();_75f.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.CHANGED);},handleBasemapGalleryLoaded:function(){}});});},"dojo/dnd/Avatar":function(){define(["../_base/declare","../_base/window","../dom","../dom-attr","../dom-class","../dom-construct","../hccss","../query"],function(_774,win,dom,_775,_776,_777,has,_778){return _774("dojo.dnd.Avatar",null,{constructor:function(_779){this.manager=_779;this.construct();},construct:function(){var a=_777.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),_77a=this.manager.source,node,b=_777.create("tbody",null,a),tr=_777.create("tr",null,b),td=_777.create("td",null,tr),k=Math.min(5,this.manager.nodes.length),i=0;if(has("highcontrast")){_777.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"<"},td);}_777.create("span",{innerHTML:_77a.generateText?this._generateText():""},td);_775.set(tr,{"class":"dojoDndAvatarHeader",style:{opacity:0.9}});for(;i<k;++i){if(_77a.creator){node=_77a._normalizedCreator(_77a.getItem(this.manager.nodes[i].id).data,"avatar").node;}else{node=this.manager.nodes[i].cloneNode(true);if(node.tagName.toLowerCase()=="tr"){var _77b=_777.create("table"),_77c=_777.create("tbody",null,_77b);_77c.appendChild(node);node=_77b;}}node.id="";tr=_777.create("tr",null,b);td=_777.create("td",null,tr);td.appendChild(node);_775.set(tr,{"class":"dojoDndAvatarItem",style:{opacity:(9-i)/10}});}this.node=a;},destroy:function(){_777.destroy(this.node);this.node=false;},update:function(){_776.toggle(this.node,"dojoDndAvatarCanDrop",this.manager.canDropFlag);if(has("highcontrast")){var icon=dom.byId("a11yIcon");var text="+";if(this.manager.canDropFlag&&!this.manager.copy){text="< ";}else{if(!this.manager.canDropFlag&&!this.manager.copy){text="o";}else{if(!this.manager.canDropFlag){text="x";}}}icon.innerHTML=text;}_778(("tr.dojoDndAvatarHeader td span"+(has("highcontrast")?" span":"")),this.node).forEach(function(node){node.innerHTML=this.manager.source.generateText?this._generateText():"";},this);},_generateText:function(){return this.manager.nodes.length.toString();}});});},"dojo/dnd/move":function(){define(["../_base/declare","../dom-geometry","../dom-style","./common","./Mover","./Moveable"],function(_77d,_77e,_77f,dnd,_780,_781){var _782=_77d("dojo.dnd.move.constrainedMoveable",_781,{constraints:function(){},within:false,constructor:function(node,_783){if(!_783){_783={};}this.constraints=_783.constraints;this.within=_783.within;},onFirstMove:function(_784){var c=this.constraintBox=this.constraints.call(this,_784);c.r=c.l+c.w;c.b=c.t+c.h;if(this.within){var mb=_77e.getMarginSize(_784.node);c.r-=mb.w;c.b-=mb.h;}},onMove:function(_785,_786){var c=this.constraintBox,s=_785.node.style;this.onMoving(_785,_786);_786.l=_786.l<c.l?c.l:c.r<_786.l?c.r:_786.l;_786.t=_786.t<c.t?c.t:c.b<_786.t?c.b:_786.t;s.left=_786.l+"px";s.top=_786.t+"px";this.onMoved(_785,_786);}});var _787=_77d("dojo.dnd.move.boxConstrainedMoveable",_782,{box:{},constructor:function(node,_788){var box=_788&&_788.box;this.constraints=function(){return box;};}});var _789=_77d("dojo.dnd.move.parentConstrainedMoveable",_782,{area:"content",constructor:function(node,_78a){var area=_78a&&_78a.area;this.constraints=function(){var n=this.node.parentNode,s=_77f.getComputedStyle(n),mb=_77e.getMarginBox(n,s);if(area=="margin"){return mb;}var t=_77e.getMarginExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="border"){return mb;}t=_77e.getBorderExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="padding"){return mb;}t=_77e.getPadExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;return mb;};}});return {constrainedMoveable:_782,boxConstrainedMoveable:_787,parentConstrainedMoveable:_789};});},"esriviewer/portal/PortalSupport":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/connect","dojo/_base/lang","esri/arcgis/Portal","../base/ConfigurationEntryMixin","./PortalSearcher","../base/DataLoaderSupport","esri/dijit/Basemap","esri/dijit/BasemapLayer"],function(_78b,_78c,con,lang,_78d,_78e,_78f,_790,_791,_792){return _78b([_78e,_790],{constructor:function(){this.portalConfiguration=null;this.loadViewerConfigurationData();if(this.portalConfiguration!=null&&lang.isObject(this.portalConfiguration)&&this.portalConfiguration.url!=null&&this.portalConfiguration.url!=""){this.initPortal();}else{VIEWER_UTILS.log("Portal Configuration not found",VIEWER_GLOBALS.LOG_TYPE.ERROR);_78c.publish(VIEWER_GLOBALS.EVENTS.PORTAL.INITIALIZED);}},initPortal:function(){this.portal=new _78d.Portal(this.portalConfiguration.url);con.connect(this.portal,"onLoad",lang.hitch(this,this._handlePortalLoaded));},_handlePortalLoaded:function(_793){this._createPortalSearcher();this.initListeners();_78c.publish(VIEWER_GLOBALS.EVENTS.PORTAL.INITIALIZED);},initListeners:function(){_78c.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.GET_INSTANCE,lang.hitch(this,this.handleGetPortalInstance));_78c.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.LOG_IN,lang.hitch(this,this.handlePortalLogIn));_78c.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.LOG_OUT,lang.hitch(this,this.handlePortalLogOut));_78c.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.IS_USER_LOGGED_IN,lang.hitch(this,this.handleIsUserLoggedIn));_78c.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.GET_BASEMAPS,lang.hitch(this,this.getBasemaps));},getBasemaps:function(_794){if(_794!=null&&lang.isFunction(_794)){var self=this;var _795=[];if(this.portal&&this.portal.basemapGalleryGroupQuery){var _796=this.portal.basemapGalleryGroupQuery.replace("id:","group:");_78c.publish(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_WEBMAPS,_796,null,null,null,function(_797){if(_797&&_797.results){var _798;var _799={f:"json"};for(var i=0;i<_797.results.length;i++){_798=_797.results[i];self.loadJsonP(_798.itemDataUrl,_799,lang.partial(function(item,_79a){var _79b=[];for(var j=0;j<_79a.baseMap.baseMapLayers.length;j++){var _79c=new _792({url:_79a.baseMap.baseMapLayers[j].url});_79b.push(_79c);}var _79d=new _791({thumbnailUrl:item.thumbnailUrl,title:item.title,layers:_79b});_795.push(_79d);if(_795.length==_797.results.length){_794(_795);}},_798));}}});}}},handleIsUserLoggedIn:function(_79e){if(_79e!=null&&lang.isFunction(_79e)){_79e(this.portal&&this.portal.getPortalUser()!=null);}},handlePortalLogOut:function(){this.portal.signOut();_78c.publish(VIEWER_GLOBALS.EVENTS.PORTAL.USER_LOGGED_OUT);},handlePortalLogIn:function(_79f){this.portal.signIn().then(lang.hitch(this,function(user){_78c.publish(VIEWER_GLOBALS.EVENTS.PORTAL.USER_LOGGED_IN,user);if(_79f!=null&&lang.isFunction(_79f)){_79f(user);}}));},loadViewerConfigurationData:function(){var _7a0;_78c.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"portal",function(_7a1){_7a0=_7a1;});this.portalConfiguration=_7a0;},handleGetPortalInstance:function(_7a2){if(_7a2!=null&&lang.isFunction(_7a2)){_7a2(this.portal);}},_createPortalSearcher:function(){this.portalSearcher=new _78f();}});});},"dojox/sql/_crypto":function(){define(["dijit","dojo","dojox"],function(_7a3,dojo,_7a4){dojo.provide("dojox.sql._crypto");dojo.mixin(_7a4.sql._crypto,{_POOL_SIZE:100,encrypt:function(_7a5,_7a6,_7a7){this._initWorkerPool();var msg={plaintext:_7a5,password:_7a6};msg=dojo.toJson(msg);msg="encr:"+String(msg);this._assignWork(msg,_7a7);},decrypt:function(_7a8,_7a9,_7aa){this._initWorkerPool();var msg={ciphertext:_7a8,password:_7a9};msg=dojo.toJson(msg);msg="decr:"+String(msg);this._assignWork(msg,_7aa);},_initWorkerPool:function(){if(!this._manager){try{this._manager=google.gears.factory.create("beta.workerpool","1.0");this._unemployed=[];this._employed={};this._handleMessage=[];var self=this;this._manager.onmessage=function(msg,_7ab){var _7ac=self._employed["_"+_7ab];self._employed["_"+_7ab]=undefined;self._unemployed.push("_"+_7ab);if(self._handleMessage.length){var _7ad=self._handleMessage.shift();self._assignWork(_7ad.msg,_7ad.callback);}_7ac(msg);};var _7ae="function _workerInit(){"+"gearsWorkerPool.onmessage = "+String(this._workerHandler)+";"+"}";var code=_7ae+" _workerInit();";for(var i=0;i<this._POOL_SIZE;i++){this._unemployed.push("_"+this._manager.createWorker(code));}}catch(exp){throw exp.message||exp;}}},_assignWork:function(msg,_7af){if(!this._handleMessage.length&&this._unemployed.length){var _7b0=this._unemployed.shift().substring(1);this._employed["_"+_7b0]=_7af;this._manager.sendMessage(msg,parseInt(_7b0,10));}else{this._handleMessage={msg:msg,callback:_7af};}},_workerHandler:function(msg,_7b1){var Sbox=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22];var Rcon=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]];function _7b2(_7b3,w){var Nb=4;var Nr=w.length/Nb-1;var _7b4=[[],[],[],[]];for(var i=0;i<4*Nb;i++){_7b4[i%4][Math.floor(i/4)]=_7b3[i];}_7b4=_7b5(_7b4,w,0,Nb);for(var _7b6=1;_7b6<Nr;_7b6++){_7b4=_7b7(_7b4,Nb);_7b4=_7b8(_7b4,Nb);_7b4=_7b9(_7b4,Nb);_7b4=_7b5(_7b4,w,_7b6,Nb);}_7b4=_7b7(_7b4,Nb);_7b4=_7b8(_7b4,Nb);_7b4=_7b5(_7b4,w,Nr,Nb);var _7ba=new Array(4*Nb);for(var i=0;i<4*Nb;i++){_7ba[i]=_7b4[i%4][Math.floor(i/4)];}return _7ba;};function _7b7(s,Nb){for(var r=0;r<4;r++){for(var c=0;c<Nb;c++){s[r][c]=Sbox[s[r][c]];}}return s;};function _7b8(s,Nb){var t=new Array(4);for(var r=1;r<4;r++){for(var c=0;c<4;c++){t[c]=s[r][(c+r)%Nb];}for(var c=0;c<4;c++){s[r][c]=t[c];}}return s;};function _7b9(s,Nb){for(var c=0;c<4;c++){var a=new Array(4);var b=new Array(4);for(var i=0;i<4;i++){a[i]=s[i][c];b[i]=s[i][c]&128?s[i][c]<<1^283:s[i][c]<<1;}s[0][c]=b[0]^a[1]^b[1]^a[2]^a[3];s[1][c]=a[0]^b[1]^a[2]^b[2]^a[3];s[2][c]=a[0]^a[1]^b[2]^a[3]^b[3];s[3][c]=a[0]^b[0]^a[1]^a[2]^b[3];}return s;};function _7b5(_7bb,w,rnd,Nb){for(var r=0;r<4;r++){for(var c=0;c<Nb;c++){_7bb[r][c]^=w[rnd*4+c][r];}}return _7bb;};function _7bc(key){var Nb=4;var Nk=key.length/4;var Nr=Nk+6;var w=new Array(Nb*(Nr+1));var temp=new Array(4);for(var i=0;i<Nk;i++){var r=[key[4*i],key[4*i+1],key[4*i+2],key[4*i+3]];w[i]=r;}for(var i=Nk;i<(Nb*(Nr+1));i++){w[i]=new Array(4);for(var t=0;t<4;t++){temp[t]=w[i-1][t];}if(i%Nk==0){temp=_7bd(_7be(temp));for(var t=0;t<4;t++){temp[t]^=Rcon[i/Nk][t];}}else{if(Nk>6&&i%Nk==4){temp=_7bd(temp);}}for(var t=0;t<4;t++){w[i][t]=w[i-Nk][t]^temp[t];}}return w;};function _7bd(w){for(var i=0;i<4;i++){w[i]=Sbox[w[i]];}return w;};function _7be(w){w[4]=w[0];for(var i=0;i<4;i++){w[i]=w[i+1];}return w;};function _7bf(_7c0,_7c1,_7c2){if(!(_7c2==128||_7c2==192||_7c2==256)){return "";}var _7c3=_7c2/8;var _7c4=new Array(_7c3);for(var i=0;i<_7c3;i++){_7c4[i]=_7c1.charCodeAt(i)&255;}var key=_7b2(_7c4,_7bc(_7c4));key=key.concat(key.slice(0,_7c3-16));var _7c5=16;var _7c6=new Array(_7c5);var _7c7=(new Date()).getTime();for(var i=0;i<4;i++){_7c6[i]=(_7c7>>>i*8)&255;}for(var i=0;i<4;i++){_7c6[i+4]=(_7c7/4294967296>>>i*8)&255;}var _7c8=_7bc(key);var _7c9=Math.ceil(_7c0.length/_7c5);var _7ca=new Array(_7c9);for(var b=0;b<_7c9;b++){for(var c=0;c<4;c++){_7c6[15-c]=(b>>>c*8)&255;}for(var c=0;c<4;c++){_7c6[15-c-4]=(b/4294967296>>>c*8);}var _7cb=_7b2(_7c6,_7c8);var _7cc=b<_7c9-1?_7c5:(_7c0.length-1)%_7c5+1;var ct="";for(var i=0;i<_7cc;i++){var _7cd=_7c0.charCodeAt(b*_7c5+i);var _7ce=_7cd^_7cb[i];ct+=String.fromCharCode(_7ce);}_7ca[b]=_7cf(ct);}var _7d0="";for(var i=0;i<8;i++){_7d0+=String.fromCharCode(_7c6[i]);}_7d0=_7cf(_7d0);return _7d0+"-"+_7ca.join("-");};function _7d1(_7d2,_7d3,_7d4){if(!(_7d4==128||_7d4==192||_7d4==256)){return "";}var _7d5=_7d4/8;var _7d6=new Array(_7d5);for(var i=0;i<_7d5;i++){_7d6[i]=_7d3.charCodeAt(i)&255;}var _7d7=_7bc(_7d6);var key=_7b2(_7d6,_7d7);key=key.concat(key.slice(0,_7d5-16));var _7d8=_7bc(key);_7d2=_7d2.split("-");var _7d9=16;var _7da=new Array(_7d9);var _7db=_7dc(_7d2[0]);for(var i=0;i<8;i++){_7da[i]=_7db.charCodeAt(i);}var _7dd=new Array(_7d2.length-1);for(var b=1;b<_7d2.length;b++){for(var c=0;c<4;c++){_7da[15-c]=((b-1)>>>c*8)&255;}for(var c=0;c<4;c++){_7da[15-c-4]=((b/4294967296-1)>>>c*8)&255;}var _7de=_7b2(_7da,_7d8);_7d2[b]=_7dc(_7d2[b]);var pt="";for(var i=0;i<_7d2[b].length;i++){var _7df=_7d2[b].charCodeAt(i);var _7e0=_7df^_7de[i];pt+=String.fromCharCode(_7e0);}_7dd[b-1]=pt;}return _7dd.join("");};function _7cf(str){return str.replace(/[\0\t\n\v\f\r\xa0!-]/g,function(c){return "!"+c.charCodeAt(0)+"!";});};function _7dc(str){return str.replace(/!\d\d?\d?!/g,function(c){return String.fromCharCode(c.slice(1,-1));});};function _7e1(_7e2,_7e3){return _7bf(_7e2,_7e3,256);};function _7e4(_7e5,_7e6){return _7d1(_7e5,_7e6,256);};var cmd=msg.substr(0,4);var arg=msg.substr(5);if(cmd=="encr"){arg=eval("("+arg+")");var _7e7=arg.plaintext;var _7e8=arg.password;var _7e9=_7e1(_7e7,_7e8);gearsWorkerPool.sendMessage(String(_7e9),_7b1);}else{if(cmd=="decr"){arg=eval("("+arg+")");var _7ea=arg.ciphertext;var _7e8=arg.password;var _7e9=_7e4(_7ea,_7e8);gearsWorkerPool.sendMessage(String(_7e9),_7b1);}}}});});},"esriviewer/ui/layers/base/model/UserPersistedLayersListViewModel":function(){define(["dojo/_base/declare","dojo/topic","dojo/Evented","dojo/has"],function(_7eb,_7ec,_7ed,has){return _7eb([_7ed],{persistedInfoIconDefaultClasses:"commonIcons16 information",CLEAR_USER_PERSISTED_LAYERS:"clearUserPersistedLayers",REMOVE_USER_PERSISTED_LAYER:"removeUserPersistedLayer",ADD_USER_PERSISTED_LAYER_TO_MAP:"addUserPersistedLayerToMap",constructor:function(){this.persistedLayerInfoIconClass=ko.observable();if((has("ie")<8)){this.persistedLayerInfoIconClass(this.persistedInfoIconDefaultClasses+" userPersistedLayersInfoIconIEHack");}else{this.persistedLayerInfoIconClass(this.persistedInfoIconDefaultClasses+" userPersistedLayersInfoIcon");}var self=this;this.addedUserPersistedLayers=ko.observableArray();this.removeUserPersistedLayer=function(_7ee){if(_7ee==null){return;}self.emit(self.REMOVE_USER_PERSISTED_LAYER,_7ee);self.addedUserPersistedLayers.remove(_7ee);};this.addPersistedLayerToMap=function(_7ef){if(_7ef==null){return;}self.emit(self.ADD_USER_PERSISTED_LAYER_TO_MAP,_7ef);};this.hasEntries=ko.computed(function(){return self.addedUserPersistedLayers().length>0;});},sort:function(){this.addedUserPersistedLayers.sort(function(left,_7f0){var _7f1=left.name.toLowerCase();var _7f2=_7f0.name.toLowerCase();return _7f1==_7f2?0:(_7f1<_7f2?-1:1);});},clearEntries:function(){this.addedUserPersistedLayers.removeAll();this.emit(this.CLEAR_USER_PERSISTED_LAYERS);}});});},"esriviewer/manager/base/ViewerManagerUI":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","dojo/topic","./../../ui/user/location/UserLocationWidget","../../ui/footer/FooterTogglerWidget","../../ui/header/HeaderLogo","../../ui/messaging/MessagingWidget","../../ui/navigation/NavigationWidget","../../ui/throbber/ThrobberWidget","dojo/Evented"],function(_7f3,lang,on,_7f4,_7f5,_7f6,_7f7,_7f8,_7f9,_7fa,_7fb){return _7f3([_7fb],{FINALIZE_UI_LOAD_COMPLETE:"finalizeUILoadComplete",loadUI:function(){var _7fc=true;if(lang.isObject(this.viewerConfig.header)){if(this.viewerConfig.header.display!=null){_7fc=!(String(this.viewerConfig.header.display).toLowerCase()=="false");}}if(_7fc){this._createHeaderLogo();}this._createIdentifyWidget();this._createMeasureWidget();this._createQueryBuilderWidget();this._createReverseGeocodeWidget();this.createFooterWidget();this._createConfigureViewerWidget();this._createDrawWidget();this._createLegendWidget();this._createReflectivityWidget();this._createViewerMainToolbar();this.createViewerDefaultTools();this._createNavigationToolbar();this._createWeatherWidget();this._createTimeSliderWidget();if(VIEWER_UTILS.isHtml5FileUploadSupported()){this._createPointUploadWidget();}else{VIEWER_UTILS.log("Point upload widget disabled. HTML 5 not supported",VIEWER_GLOBALS.LOG_TYPE.WARNING);}this._createFeatureEditorWidget();this._createSocialMediaWidget();this._createPrintWidget();this._createZoomToWidget();this._createZoomToUserLocationWidget();this._createLayersTransparencyWidget();this._createViewerAccordion();this._createPortalPublisherWidget();this._createPlottingWidget();this.finalizeUILoad();},finalizeUILoad:function(){if(this.viewerAccordion!=null){this.viewerAccordion.startup();var _7fd=true;}if(this.bookmarkController!=null){this._loadBookmarks();}this.createThrobberWidget();this.emit(this.FINALIZE_UI_LOAD_COMPLETE);},_createHeaderLogo:function(){this.headerLogo=new _7f7();_7f4.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.HEADER,this.headerLogo);},_createIdentifyWidget:function(){if(this.viewerConfig.identifyWidget!=null&&lang.isObject(this.viewerConfig.identifyWidget)&&this.viewerConfig.identifyWidget.create!=null&&this.viewerConfig.identifyWidget.create==true){this.createIdentifyWidget();}},createIdentifyWidget:function(){},_createMeasureWidget:function(){if(this.viewerConfig.geometryServiceUrl!=null&&this.viewerConfig.geometryServiceUrl){if(this.viewerConfig.measureWidget==null||(lang.isObject(this.viewerConfig.measureWidget)&&this.viewerConfig.measureWidget.create!=false)){this.createMeasureWidget();}}},createMeasureWidget:function(){},_createPrintWidget:function(){if(this.viewerConfig.printWidget==null||(lang.isObject(this.viewerConfig.printWidget)&&this.viewerConfig.printWidget.create!=null&&this.viewerConfig.printWidget.create&&this.viewerConfig.printWidget.printTaskUrl!=null)){this.createPrintWidget();}},createPrintWidget:function(){},_createSocialMediaWidget:function(){if(this.viewerConfig.socialMediaWidget==null||(lang.isObject(this.viewerConfig.socialMediaWidget)&&this.viewerConfig.socialMediaWidget.create!=null&&this.viewerConfig.socialMediaWidget.create)){this.createSocialMediaWidget();}},createSocialMediaWidget:function(){},_createFeatureEditorWidget:function(){if(this.viewerConfig.featureEditorWidget!=null&&this.viewerConfig.featureEditorWidget.service!=null&&this.viewerConfig.featureEditorWidget.service.url!=""){this.createFeatureEditorWidget();}},createFeatureEditorWidget:function(){},_createZoomToUserLocationWidget:function(){if(navigator&&navigator.geolocation&&this.viewerConfig.zoomToUserLocationWidget!=null&&lang.isObject(this.viewerConfig.zoomToUserLocationWidget)&&this.viewerConfig.zoomToUserLocationWidget.create===true){this.createZoomToUserLocationWidget();}},createZoomToUserLocationWidget:function(){this.userLocationWidget=new _7f5();_7f4.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.USER_LOCATION,this.userLocationWidget);},_createZoomToWidget:function(){if(this.viewerConfig.zoomToWidget==null||(lang.isObject(this.viewerConfig.zoomToWidget)&&this.viewerConfig.zoomToWidget.create!=null&&this.viewerConfig.zoomToWidget.create)){this.createZoomToWidget();}},createZoomToWidget:function(){},_createPointUploadWidget:function(){if(this.viewerConfig.pointUploadWidget!=null&&this.viewerConfig.pointUploadWidget.create==true){this.createPointUploadWidget();}},createPointUploadWidget:function(){},_createTimeSliderWidget:function(){if(!this.forceHideCoreTimeSlider&&(this.viewerConfig.timeSliderWidget!=null&&this.viewerConfig.timeSliderWidget.create!=false)){this.createTimeSliderWidget();}},createTimeSliderWidget:function(){},_createLayersTransparencyWidget:function(){if(this.viewerConfig.layersTransparencyWidget==null||(lang.isObject(this.viewerConfig.layersTransparencyWidget)&&this.viewerConfig.layersTransparencyWidget.create!=null&&this.viewerConfig.layersTransparencyWidget.create)){this.createLayersTransparencyWidget();}},createLayersTransparencyWidget:function(){},_createConfigureViewerWidget:function(){if(this.viewerConfig.configureWidget==null||this.viewerConfig.configureWidget.create==null||this.viewerConfig.configureWidget.create==true){this.createConfigureViewerWidget();}},createConfigureViewerWidget:function(){},_createReverseGeocodeWidget:function(){if(this.viewerConfig.reverseGeocodeWidget==null||this.viewerConfig.reverseGeocodeWidget.create==null||this.viewerConfig.reverseGeocodeWidget.create==true){if(this.viewerConfig.locators!=null&&lang.isArray(this.viewerConfig.locators)&&this.viewerConfig.locators.length>0){this.createReverseGeocodeWidget();}}},createReverseGeocodeWidget:function(){},_createQueryBuilderWidget:function(){if(this.viewerConfig.queryBuilder&&this.viewerConfig.queryBuilder.create!=null&&this.viewerConfig.queryBuilder.create){this.createQueryBuilderWidget();}},createQueryBuilderWidget:function(){},_createWeatherWidget:function(){if(lang.isObject(this.viewerConfig.weatherWidget)&&this.viewerConfig.weatherWidget.create!=null&&this.viewerConfig.weatherWidget.create==true){this.createWeatherWidget();}},createWeatherWidget:function(){},_createPlottingWidget:function(){if(lang.isObject(this.viewerConfig.plottingWidget)&&this.viewerConfig.plottingWidget.create!=null&&this.viewerConfig.plottingWidget.create==true){this.createPlottingWidget();}},createPlottingWidget:function(){},_createPortalPublisherWidget:function(){if(this.viewerConfig.portal!=null&&lang.isObject(this.viewerConfig.portal)&&this.viewerConfig.portal.url){if(this.viewerConfig.portalPublisher&&this.viewerConfig.portalPublisher.window&&this.viewerConfig.portalPublisher.window.create){this.createPortalPublisherWidget();}}},createPortalPublisherWidget:function(){},createFooterWidget:function(){var _7fe=false;if(lang.isObject(this.viewerConfig.footerTogglerWidget)){if(this.viewerConfig.footerTogglerWidget.create!=null){_7fe=!(String(this.viewerConfig.footerTogglerWidget.create).toLowerCase()=="false");}}if(_7fe){this.footerTogglerWidget=new _7f6();this.footerTogglerWidget.on("firstFooterShow",lang.hitch(this,this.handleFirstFooterShow));_7f4.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.FOOTER,this.footerTogglerWidget);}},handleFirstFooterShow:function(){},_createLoggingWidget:function(){if(this.viewerConfig.logging&&this.viewerConfig.logging.window&&this.viewerConfig.logging.window.create){this.createLoggingWidget();}},createLoggingWidget:function(){},_createMessagingWidget:function(){this.messagingWidget=new _7f8();_7f4.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MESSAGING,this.messagingWidget);},createThrobberWidget:function(){this.loadingThrobber=new _7fa();_7f4.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.THROBBER,this.loadingThrobber);},_createReflectivityWidget:function(){if(this.viewerConfig.reflectivityWidget!=null&&lang.isObject(this.viewerConfig.reflectivityWidget)&&this.viewerConfig.reflectivityWidget.create==true){this.createReflectivityWidget();}},createReflectivityWidget:function(){},_createLegendWidget:function(){if(this.viewerConfig.map.legend==null||this.viewerConfig.map.legend.create==true){this.createLegendWidget();}},createLegendWidget:function(){},_createNavigationToolbar:function(){this.createNavigationToolbar();if(this.navigationToolbar){_7f4.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.NAVIGATION_TOOLBAR,this.navigationToolbar);}this.processNavigationToolbarAddons();},createNavigationToolbar:function(){this.navigationToolbar=new _7f9();},_createDrawWidget:function(){if(this.viewerConfig.drawWidget==null||!lang.isObject(this.viewerConfig.drawWidget)||this.viewerConfig.drawWidget.create==null||this.viewerConfig.drawWidget.create!=false){this.createDrawWidget();}},createDrawWidget:function(){}});});},"esriviewer/ui/measure/model/MeasureWidgetViewModel":function(){define(["dojo/_base/declare","esri/tasks/GeometryService"],function(_7ff,_800){return _7ff([],{constructor:function(){this.areaMeasurementUnits=ko.observableArray([{label:"Acres",value:_800.UNIT_ACRES},{label:"Sq Miles",value:_800.UNIT_SQUARE_MILES},{label:"Sq Kilometers",value:_800.UNIT_SQUARE_KILOMETERS},{label:"Hectares",value:_800.UNIT_HECTARES},{label:"Sq Yards",value:_800.UNIT_SQUARE_YARDS},{label:"Sq Feet",value:_800.UNIT_SQUARE_FEET},{label:"Sq Meters",value:_800.UNIT_SQUARE_METERS}]);this.distanceMeasurementUnits=ko.observableArray([{label:"Miles",value:_800.UNIT_STATUTE_MILE},{label:"Kilometers",value:_800.UNIT_KILOMETER},{label:"Feet",value:_800.UNIT_FOOT},{label:"Meters",value:_800.UNIT_METER}]);this.locationUnits=ko.observableArray([{label:"Degrees",value:VIEWER_GLOBALS.ESRI_UNITS.DECIMAL_DEGREES},{label:"DMS",value:VIEWER_GLOBALS.ESRI_UNITS.DEGREE_MINUTE_SECONDS}]);this.measureMethodText=ko.observable("");this.unitsText=ko.observable("");this.resultsText=ko.observable("");this.selectedAreaUnits=ko.observable("");this.selectedDistanceUnits=ko.observable("");this.selectedLocationUnits=ko.observable("");this.areaActive=ko.observable(false);this.distanceActive=ko.observable(false);this.locationActive=ko.observable(false);this.measurementResult=ko.observable("");},handleAreaButtonClick:function(){var _801=this.areaActive();this.areaActive(!_801);this.distanceActive(false);this.locationActive(false);},handleDistanceButtonClick:function(){var _802=this.distanceActive();this.distanceActive(!_802);this.areaActive(false);this.locationActive(false);},handleLocationButtonClick:function(){var _803=this.locationActive();this.locationActive(!_803);this.areaActive(false);this.distanceActive(false);},getLabelForDistanceValue:function(_804){var _805=this.distanceMeasurementUnits();for(var i=0;i<_805.length;i++){if(_805[i].value==_804){return _805[i].label;}}return "Unknown";},getLabelForLocationValue:function(_806){var _807=this.locationUnits();for(var i=0;i<_807.length;i++){if(_807[i].value==_806){return _807[i].label;}}return "Unknown";},getLabelForAreaValue:function(_808){var _809=this.areaMeasurementUnits();for(var i=0;i<_809.length;i++){if(_809[i].value==_808){return _809[i].label;}}return "Unknown";}});});},"esriviewer/ui/weather/reflectivity/ReflectivityWidgetWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/window","dojo/dom-style","../../window/WindowWidget"],function(_80a,lang,_80b,_80c,_80d,_80e){return _80a([_80e],{defaultPositioning:{x:400,y:125},windowWidth:"300px",windowHeaderText:"NEXRAD Reflectance",windowIconAltText:"Alt Text",windowIconClass:"commonIcons16 weather",positioningParamName:"reflectance",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/weather/reflectivity/ReflectivityWidget"],lang.hitch(this,function(_80f){this.reflectivityWidget=new _80f();this.setContent(this.reflectivityWidget.domNode);if(this.reflectivityWidget){this.reflectivityWidget.showWmsLayer();}}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_80b.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REFLECTIVITY.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_80b.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REFLECTIVITY.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_80b.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REFLECTIVITY.TOGGLE,lang.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.reflectivityWidget&&this.reflectivityWidget){this.reflectivityWidget.hideWmsLayer();}},show:function(){this.inherited(arguments);if(this.reflectivityWidget){this.reflectivityWidget.showWmsLayer();}}});});},"esri/dijit/Scalebar":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/query","esri/kernel","esri/lang","esri/domUtils","esri/units","esri/SpatialReference","esri/WKIDUnitConversion","esri/geometry/Point","esri/geometry/ScreenPoint","esri/geometry/Polyline","esri/geometry/geodesicUtils","esri/geometry/webMercatorUtils","esri/geometry/screenUtils","esri/geometry/normalizeUtils"],function(_810,lang,_811,conn,_812,_813,_814,_815,has,_816,_817,_818,_819,_81a,_81b,_81c,_81d,_81e,_81f,_820,_821,_822,_823){var _824=_810(null,{declaredClass:"esri.dijit.Scalebar",map:null,mapUnit:null,scalebarUnit:null,unitsDictionary:[],domNode:null,screenPt1:null,screenPt2:null,constructor:function(_825,_826){this.metricScalebar=_813.create("div",{innerHTML:"<div class='esriScaleLabelDiv'><div class='esriScalebarLabel esriScalebarLineLabel esriScalebarSecondNumber'></div></div><div class='esriScalebarLine esriScalebarMetricLine'></div>"});this.englishScalebar=_813.create("div",{innerHTML:"<div class='esriScalebarLine esriScalebarEnglishLine'></div><div class='esriScaleLabelDiv'><div class='esriScalebarLabel esriScalebarLineLabel esriScalebarSecondNumber'></div></div>"});this.domNode=_813.create("div");_825=_825||{};if(!_825.map){return;}if(!_825.scalebarUnit){this.scalebarUnit="english";}else{if(_825.scalebarUnit!=="english"&&_825.scalebarUnit!=="metric"&&_825.scalebarUnit!=="dual"){return;}else{this.scalebarUnit=_825.scalebarUnit;}}if(!_825.scalebarStyle){this.scalebarStyle="ruler";}else{if(_825.scalebarStyle!=="ruler"&&_825.scalebarStyle!=="line"){return;}else{this.scalebarStyle=_825.scalebarStyle;}}this.background=_825.background;switch(this.scalebarUnit){case "english":if(this.scalebarStyle==="ruler"){this.englishScalebar.innerHTML="<div class='esriScalebarRuler'><div class='esriScalebarRulerBlock upper_firstpiece'></div><div class='esriScalebarRulerBlock upper_secondpiece'></div><div class='esriScalebarRulerBlock lower_firstpiece'></div><div class='esriScalebarRulerBlock lower_secondpiece'></div></div><div class='scaleLabelDiv'><div class='esriScalebarLabel' style='left: -3%'>0</div><div class='esriScalebarLabel esriScalebarFirstNumber'></div><div class='esriScalebarLabel esriScalebarSecondNumber'></div></div>";}this.domNode.appendChild(this.englishScalebar);break;case "metric":if(this.scalebarStyle==="ruler"){this.metricScalebar.innerHTML="<div class='esriScalebarRuler'><div class='esriScalebarRulerBlock upper_firstpiece'></div><div class='esriScalebarRulerBlock upper_secondpiece'></div><div class='esriScalebarRulerBlock lower_firstpiece'></div><div class='esriScalebarRulerBlock lower_secondpiece'></div></div><div class='scaleLabelDiv'><div class='esriScalebarLabel' style='left: -3%'>0</div><div class='esriScalebarLabel esriScalebarFirstNumber'></div><div class='esriScalebarLabel esriScalebarSecondNumber'></div></div>";}this.domNode.appendChild(this.metricScalebar);break;case "dual":this.domNode.appendChild(this.metricScalebar);this.domNode.appendChild(this.englishScalebar);break;}this.map=_825.map;if(_826){_826.appendChild(this.domNode);}else{this.map.container.appendChild(this.domNode);if(_825.attachTo){_812.add(this.domNode,"scalebar_"+_825.attachTo);}else{_812.add(this.domNode,"scalebar_bottom-left");}}_812.add(this.domNode,"esriScalebar");if(this.map.loaded){this._getDistance(this.map.extent);this._checkBingMaps();}else{var _827=conn.connect(this.map,"onLoad",this,function(){conn.disconnect(_827);_827=null;this._getDistance(this.map.extent);this._checkBingMaps();});}this._mapOnPan=conn.connect(this.map,"onPan",this,this._getDistance);this._mapOnExtentChange=conn.connect(this.map,"onExtentChange",this,this._getDistance);_811.forEach(this.map.layerIds,function(_828,idx){if(this.map.getLayer(_828).declaredClass==="esri.virtualearth.VETiledLayer"){conn.connect(this.map.getLayer(_828),"onVisibilityChange",lang.hitch(this,function(_829){this._checkBingMaps();}));}},this);this._mapOnLayerAdd=conn.connect(this.map,"onLayerAdd",lang.hitch(this,function(_82a){if(_82a.declaredClass==="esri.virtualearth.VETiledLayer"){conn.connect(_82a,"onVisibilityChange",lang.hitch(this,function(_82b){this._checkBingMaps();}));}this._checkBingMaps();}));this._mapOnLayerRemove=conn.connect(this.map,"onLayerRemove",lang.hitch(this,this._checkBingMaps));},hide:function(){this._hidden=true;_819.hide(this.domNode);},show:function(){this._hidden=false;_819.show(this.domNode);},destroy:function(){conn.disconnect(this._mapOnPan);conn.disconnect(this._mapOnExtentChange);conn.disconnect(this._mapOnLayerAdd);conn.disconnect(this._mapOnLayerRemove);this.hide();this.map=null;_813.destroy(this.domNode);},_checkBingMaps:function(){if(_812.contains(this.domNode,"scalebar_bottom-left")){_815.set(this.domNode,"left","25px");_811.forEach(this.map.layerIds,function(_82c,idx){if(this.map.getLayer(_82c).declaredClass==="esri.virtualearth.VETiledLayer"&&this.map.getLayer(_82c).visible){var _82d="95px";if(this.map._mapParams.nav){_82d="115px";}_815.set(this.domNode,"left",_82d);}},this);}},_getDistance:function(_82e){var _82f=_814.position(this.domNode,true);var _830=_82f.y-this.map.position.y;_830=(_830>this.map.height)?this.map.height:_830;_830=(_830<0)?0:_830;var _831=new _81e(0,_830);var _832=new _81e(this.map.width,_830);var _833,_834,_835,_836;this.mapUnit="esriDecimalDegrees";var pt1=_822.toMapPoint(_82e,this.map.width,this.map.height,_831);var pt2=_822.toMapPoint(_82e,this.map.width,this.map.height,_832);var _837=new _81d(_82e.xmin,(_82e.ymin+_82e.ymax)/2,this.map.spatialReference);var _838=new _81d(_82e.xmax,(_82e.ymin+_82e.ymax)/2,this.map.spatialReference);if(this.map.spatialReference.wkid===3857||this.map.spatialReference.wkid===102100||this.map.spatialReference.wkid===102113||(this.map.spatialReference.wkt&&this.map.spatialReference.wkt.indexOf("WGS_1984_Web_Mercator")!=-1)){pt1=_821.webMercatorToGeographic(pt1,true);pt2=_821.webMercatorToGeographic(pt2,true);_837=_821.webMercatorToGeographic(_837,true);_838=_821.webMercatorToGeographic(_838,true);}else{if(_818.isDefined(_81c[this.map.spatialReference.wkid])||(this.map.spatialReference.wkt&&this.map.spatialReference.wkt.indexOf("PROJCS")===0)){this.mapUnit="linearUnit";_833=Math.abs(_82e.xmax-_82e.xmin);var _839;if(_818.isDefined(_81c[this.map.spatialReference.wkid])){_839=_81c.values[_81c[this.map.spatialReference.wkid]];}else{var wkt=this.map.spatialReference.wkt;var _83a=wkt.lastIndexOf(",")+1;var end=wkt.lastIndexOf("]]");_839=parseFloat(wkt.substring(_83a,end));}_833*=_839;_836=_833/1609;_835=_833/1000;_833/=1000;}}if(this.mapUnit==="esriDecimalDegrees"){var line=new _81f(new _81b({wkid:4326}));line.addPath([pt1,pt2]);var _83b=_823._straightLineDensify(line,10);_833=_820.geodesicLengths([_83b],_81a.KILOMETERS)[0];var _83c=new _81f(new _81b({wkid:4326}));_83c.addPath([_837,_838]);var _83d=_823._straightLineDensify(_83c,10);_834=_820.geodesicLengths([_83d],_81a.KILOMETERS)[0];_836=_833/1.609;_834/=1.609;_835=_833;}if(this.scalebarUnit==="english"){this._getScaleBarLength(_836,"mi");}else{if(this.scalebarUnit==="metric"){this._getScaleBarLength(_835,"km");}else{if(this.scalebarUnit==="dual"){this._getScaleBarLength(_836,"mi");this._getScaleBarLength(_835,"km");}}}},_getScaleBarLength:function(_83e,unit){var _83f=50;var _840=_83f*_83e/this.map.width;var i=0;var _841=unit;if(_840<0.1){if(unit==="mi"){_840*=5280;_841="ft";}else{if(unit==="km"){_840*=1000;_841="m";}}}while(_840>=1){_840/=10;i++;}var _842,_843;if(_840>0.5){_842=1;_843=0.5;}else{if(_840>0.3){_842=0.5;_843=0.3;}else{if(_840>0.2){_842=0.3;_843=0.2;}else{if(_840>0.15){_842=0.2;_843=0.15;}else{if(_840>0.1){_842=0.15;_843=0.1;}}}}}var _844=((_842/_840)>=(_840/_843))?_843:_842;var _845=_844/_840;var _846=_83f*_845;var _847=Math.pow(10,i)*_844;this._drawScaleBar(_846,_847,_841);},_drawScaleBar:function(_848,_849,_84a){var _84b=2*Math.round(_848),_84c,_84d,_84e;if(_84a==="mi"||_84a==="ft"){this.englishScalebar.style.width=_84b+"px";_84c=_816(".esriScalebarFirstNumber",this.englishScalebar);_84d=_816(".esriScalebarSecondNumber",this.englishScalebar);_84e=_816(".esriScalebarMetricLineBackground",this.englishScalebar);}else{this.metricScalebar.style.width=_84b+"px";_84c=_816(".esriScalebarFirstNumber",this.metricScalebar);_84d=_816(".esriScalebarSecondNumber",this.metricScalebar);_84e=_816(".esriScalebarMetricLineBackground",this.metricScalebar);}_811.forEach(_84e,function(_84f,idx){_84f.style.width=_84b-2+"px";},this);_811.forEach(_84c,function(_850,idx){_850.innerHTML=_849;},this);_811.forEach(_84d,function(_851,idx){if(this.mapUnit!=="esriUnknown"){_851.innerHTML=2*_849+_84a;}else{_851.innerHTML=2*_849+"Unknown Unit";}},this);}});if(has("extend-esri")){lang.setObject("dijit.Scalebar",_824,_817);}return _824;});},"dijit/layout/StackContainer":function(){define(["dojo/_base/array","dojo/cookie","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/has","dojo/_base/lang","dojo/on","dojo/ready","dojo/topic","dojo/when","../registry","../_WidgetBase","./_LayoutWidget","dojo/i18n!../nls/common"],function(_852,_853,_854,_855,_856,has,lang,on,_857,_858,when,_859,_85a,_85b){if(has("dijit-legacy-requires")){_857(0,function(){var _85c=["dijit/layout/StackController"];require(_85c);});}var _85d=_854("dijit.layout.StackContainer",_85b,{doLayout:true,persist:false,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);_855.add(this.domNode,"dijitLayoutContainer");},postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,"keydown",lang.hitch(this,"_onKeyDown")));},startup:function(){if(this._started){return;}var _85e=this.getChildren();_852.forEach(_85e,this._setupChild,this);if(this.persist){this.selectedChildWidget=_859.byId(_853(this.id+"_selectedChild"));}else{_852.some(_85e,function(_85f){if(_85f.selected){this.selectedChildWidget=_85f;}return _85f.selected;},this);}var _860=this.selectedChildWidget;if(!_860&&_85e[0]){_860=this.selectedChildWidget=_85e[0];_860.selected=true;}_858.publish(this.id+"-startup",{children:_85e,selected:_860,textDir:this.textDir});this.inherited(arguments);},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=true;var _861=this.selectedChildWidget;if(_861){this._showChild(_861);}}this.inherited(arguments);},_setupChild:function(_862){var _863=_862.domNode,_864=_856.place("<div role='tabpanel' class='"+this.baseClass+"ChildWrapper dijitHidden'>",_862.domNode,"replace"),_865=_862["aria-label"]||_862.title||_862.label;if(_865){_864.setAttribute("aria-label",_865);}_856.place(_863,_864);_862._wrapper=_864;this.inherited(arguments);if(_863.style.display=="none"){_863.style.display="block";}_862.domNode.title="";},addChild:function(_866,_867){this.inherited(arguments);if(this._started){_858.publish(this.id+"-addChild",_866,_867);this.layout();if(!this.selectedChildWidget){this.selectChild(_866);}}},removeChild:function(page){var idx=_852.indexOf(this.getChildren(),page);this.inherited(arguments);_856.destroy(page._wrapper);delete page._wrapper;if(this._started){_858.publish(this.id+"-removeChild",page);}if(this._descendantsBeingDestroyed){return;}if(this.selectedChildWidget===page){this.selectedChildWidget=undefined;if(this._started){var _868=this.getChildren();if(_868.length){this.selectChild(_868[Math.max(idx-1,0)]);}}}if(this._started){this.layout();}},selectChild:function(page,_869){var d;page=_859.byId(page);if(this.selectedChildWidget!=page){d=this._transition(page,this.selectedChildWidget,_869);this._set("selectedChildWidget",page);_858.publish(this.id+"-selectChild",page);if(this.persist){_853(this.id+"_selectedChild",this.selectedChildWidget.id);}}return when(d||true);},_transition:function(_86a,_86b){if(_86b){this._hideChild(_86b);}var d=this._showChild(_86a);if(_86a.resize){if(this.doLayout){_86a.resize(this._containerContentBox||this._contentBox);}else{_86a.resize();}}return d;},_adjacent:function(_86c){var _86d=this.getChildren();var _86e=_852.indexOf(_86d,this.selectedChildWidget);_86e+=_86c?1:_86d.length-1;return _86d[_86e%_86d.length];},forward:function(){return this.selectChild(this._adjacent(true),true);},back:function(){return this.selectChild(this._adjacent(false),true);},_onKeyDown:function(e){_858.publish(this.id+"-containerKeyDown",{e:e,page:this});},layout:function(){var _86f=this.selectedChildWidget;if(_86f&&_86f.resize){if(this.doLayout){_86f.resize(this._containerContentBox||this._contentBox);}else{_86f.resize();}}},_showChild:function(page){var _870=this.getChildren();page.isFirstChild=(page==_870[0]);page.isLastChild=(page==_870[_870.length-1]);page._set("selected",true);if(page._wrapper){_855.replace(page._wrapper,"dijitVisible","dijitHidden");}return (page._onShow&&page._onShow())||true;},_hideChild:function(page){page._set("selected",false);if(page._wrapper){_855.replace(page._wrapper,"dijitHidden","dijitVisible");}page.onHide&&page.onHide();},closeChild:function(page){var _871=page.onClose&&page.onClose(this,page);if(_871){this.removeChild(page);page.destroyRecursive();}},destroyDescendants:function(_872){this._descendantsBeingDestroyed=true;this.selectedChildWidget=undefined;_852.forEach(this.getChildren(),function(_873){if(!_872){this.removeChild(_873);}_873.destroyRecursive(_872);},this);this._descendantsBeingDestroyed=false;}});_85d.ChildWidgetProperties={selected:false,disabled:false,closable:false,iconClass:"dijitNoIcon",showTitle:true};lang.extend(_85a,_85d.ChildWidgetProperties);return _85d;});},"esriviewer/ui/window/WindowWidget":function(){define(["dojo/_base/declare","dojo/text!./template/WindowWidgetTemplate.html","dojo/topic","dojo/_base/window","dojo/_base/lang","dojo/on","dojo/dom-construct","dojo/dom-class","dojo/dom-style","../base/UITemplatedWidget","dojo/dnd/Moveable","dojox/layout/ResizeHandle","dojo/_base/connect","dojo/dom-geometry"],function(_874,_875,_876,_877,lang,on,_878,_879,_87a,_87b,_87c,_87d,con,_87e){return _874([_87b],{resizeAxis:"xy",animate:true,resizable:false,isPositionedByConfig:true,firstShow:true,showOnLoad:false,visible:false,movable:true,canMinimize:true,windowHeight:null,windowWidth:"35%",positioningParamName:"",windowHeaderText:"Window",windowIconClass:"commonIcons16 application",templateString:_875,closeWindowTitle:"Close Window",windowIconAltText:"Window",constructor:function(){this.animation=VIEWER_GLOBALS.ANIMATIONS.FADE.IN;this.windowTopOffset=(VIEWER_GLOBALS.WINDOW&&VIEWER_GLOBALS.WINDOW.TOP_POSITION_MOVE_OFFSET)?(VIEWER_GLOBALS.WINDOW.TOP_POSITION_MOVE_OFFSET):3;},postCreate:function(){this.inherited(arguments);_878.place(this.domNode,_877.body());this.visible=false;_879.add(this.domNode,"windowHidden");if(this.movable){this._initMover();}else{_87a.set(this.windowHeader,"cursor","default");}if(this.windowHeight!=null){_87a.set(this.domNode,"height",this.windowHeight);}if(this.windowWidth!=null){_87a.set(this.domNode,"width",this.windowWidth);}if(this.resizable){var _87f={targetId:this.id,activeResize:true};if(this.minWidth!=null){_87f["minWidth"]=this.minWidth;}if(this.minHeight!=null){_87f["minHeight"]=this.minHeight;}if(this.resizeAxis){_87f["resizeAxis"]=this.resizeAxis;}this.handle=new _87d(_87f).placeAt(this.domNode);}if(!this.canMinimize){_87a.set(this.windowMinimizeImg,"display","none");}if(!this.showOnLoad){this.hide();}else{this.show();}},initListeners:function(){this.inherited(arguments);this.connects.push(on(this.windowCloseImg,"click",lang.hitch(this,this.hide,0)));this.connects.push(on(this.windowMinimizeImg,"click",lang.hitch(this,this.toggleContent)));this.subscribes.push(_876.subscribe("/dojo/resize/stop",lang.hitch(this,this.handleGlobalResizeFired)));this.subscribes.push(_876.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REPOSITION_ALL,lang.hitch(this,this.handleReposition)));},loadViewerConfigurationData:function(){var _880=null;_876.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"animationsEnabled",function(_881){_880=_881;});if(_880!=null){this.animate=_880;}},handleReposition:function(){var pos=_87e.position(this.domNode);if(pos.y<this.windowTopOffset){_87a.set(this.domNode,"top",this.windowTopOffset+"px");}},handleGlobalResizeFired:function(_882){if(this.handle){if(_882.id===this.handle.id){this.onWindowResize();}}},setContent:function(_883){_878.empty(this.windowContent);_878.place(_883,this.windowContent);},toggle:function(){if(this.visible){this.hide();}else{this.show();}},show:function(){if(!this.visible){this.onBeforeWindowShow();_879.remove(this.domNode,"windowHidden");if(this.animate){this._animateWidget();}this.visible=true;if(this.firstShow){this.firstShow=false;this.onFirstWindowShow();}this.onAfterWindowShow();}},hide:function(){if(this.visible){this.onBeforeWindowHide();_879.add(this.domNode,"windowHidden");if(this.animate){this._removeAnimationClasses();}this.visible=false;this.hidePopups();this.onAfterWindowHide();}},_initMover:function(){this.mover=new _87c(this.domNode,{handle:this.headerMoverContainer});con.connect(this.mover,"onMove",VIEWER_UTILS,VIEWER_UTILS.handleContainerMoved);},toggleContent:function(){var _884=_87a.get(this.windowContentOuter,"display");if(_884=="none"){this._expand();}else{this._collapse();}},_expand:function(){_879.remove(this.windowHeader,"windowHeaderCollapsed");_87a.set(this.windowContentOuter,"display","block");_879.add(this.windowHeader,"windowHeader");if(this.windowHeight!=null){_87a.set(this.domNode,"height",this.windowHeight);}this.onWindowExpanded();if(this.handle&&this.handle.resizeHandle){this.handle.resizeHandle.style.display="block";}},_collapse:function(){_879.add(this.windowHeader,"windowHeaderCollapsed");_879.remove(this.windowHeader,"windowHeader");_87a.set(this.windowContentOuter,"display","none");if(this.windowHeight!=null){_87a.set(this.domNode,"height",null);}this.hidePopups();this.onWindowCollapsed();if(this.handle&&this.handle.resizeHandle){this.handle.resizeHandle.style.display="none";}},hidePopups:function(){},setWindowWidthFromInt:function(_885){_87a.set(this.domNode,"width",_885+"px");},onWindowExpanded:function(){},onWindowCollapsed:function(){},onWindowResize:function(){},onBeforeWindowShow:function(){},onBeforeWindowHide:function(){},onAfterWindowShow:function(){},onAfterWindowHide:function(){},onFirstWindowShow:function(){}});});},"esriviewer/ui/toolbar/base/model/BookmarkListingViewModel":function(){define(["dojo/_base/declare","dojo/topic","dojo/Evented","dojo/dom-construct","dojo/dom-class","dojox/timing"],function(_886,_887,_888,_889,_88a,_88b){return _886([_888],{animate:true,SHOW_CREATE_BOOKMARK:"showCreateBookmark",REMOVE_BOOKMARK_REQUEST:"removeBookmarkRequest",ignoreAddAnimation:true,constructor:function(){this.loadViewerConfigurationData();var self=this;this.showCreateBookmarkIcon=ko.observable(true);this.visible=ko.observable(false);this._removableBookmarks=ko.observableArray();this._bookmarks=ko.observableArray();this.removeClick=function(item,evt){self._removeClick(item,evt);};this.handleBeforeRemoveBookmark=function(_88c){if(self.animate){_88a.add(_88c,VIEWER_GLOBALS.ANIMATIONS.LIGHT_SPEED.OUT);var _88d=new _88b.Timer(VIEWER_GLOBALS.ANIMATIONS.LIGHT_SPEED.DURATION);_88d.onTick=function(){_889.destroy(_88c);_88d.stop();_88d=null;};_88d.start();}else{_889.destroy(_88c);}};this.handleAfterAddBookmark=function(e){if(!self.ignoreAddAnimation&&self.animate){_88a.add(e,VIEWER_GLOBALS.ANIMATIONS.LIGHT_SPEED.IN);var _88e=new _88b.Timer(VIEWER_GLOBALS.ANIMATIONS.LIGHT_SPEED.DURATION);_88e.onTick=function(){_88a.remove(e,VIEWER_GLOBALS.ANIMATIONS.LIGHT_SPEED.IN);_88e.stop();_88e=null;};_88e.start();}};},loadViewerConfigurationData:function(){var _88f=null;_887.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"animationsEnabled",function(_890){_88f=_890;});if(_88f!=null){this.animate=_88f;}},handleBookmarkClick:function(_891){if(_891==null){return;}_887.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PAN_TO,_891.point,{zoomLevel:_891.zoomLevel});},addRemovableBookmark:function(_892){if(this._removableBookmarks.indexOf(_892)>-1){return;}this._removableBookmarks.push(_892);this._removableBookmarks.sort(this._bookmarkSorter);},addBookmark:function(_893){if(this._bookmarks.indexOf(_893)>-1){return;}this._bookmarks.push(_893);this._bookmarks.sort(this._bookmarkSorter);},_bookmarkSorter:function(left,_894){return left.label==_894.label?0:(left.label<_894.label?-1:1);},showCreateBookmark:function(){this.emit(this.SHOW_CREATE_BOOKMARK);},_removeClick:function(_895,evt){if(_895!=null){this.emit(this.REMOVE_BOOKMARK_REQUEST,_895,evt);}},removeBookmark:function(_896){this._removableBookmarks.remove(_896);},sortStatic:function(){this._bookmarks.sort(function(left,_897){var _898=left.label.toLowerCase();var _899=_897.label.toLowerCase();return _898==_899?0:(_898<_899?-1:1);});},sortRemovable:function(){this._removableBookmarks.sort(function(left,_89a){var _89b=left.label.toLowerCase();var _89c=_89a.label.toLowerCase();return _89b==_89c?0:(_89b<_89c?-1:1);});},sortAll:function(){this.sortRemovable();this.sortStatic();}});});},"esriviewer/ui/layers/base/UserPersistedLayersListWidget":function(){define(["dojo/_base/declare","dojo/text!./template/UserPersistedLayersListingTemplate.html","dojo/topic","../../base/UITemplatedWidget","dojo/_base/lang","./model/UserPersistedLayersListViewModel"],function(_89d,_89e,_89f,_8a0,lang,_8a1){return _89d([_8a0],{bindingsApplied:false,templateString:_89e,constructor:function(){this.userPersistedGraphics={};},postCreate:function(){this.inherited(arguments);this.viewModel=new _8a1();this.viewModel.on(this.viewModel.REMOVE_USER_PERSISTED_LAYER,lang.hitch(this,this.handleRemoveUserPersistedLayer));this.viewModel.on(this.viewModel.ADD_USER_PERSISTED_LAYER_TO_MAP,lang.hitch(this,this.handleAddUserPersistedLayerToMap));this.viewModel.on(this.viewModel.CLEAR_USER_PERSISTED_LAYERS,lang.hitch(this,this.handleClearUserPersistedLayers));},applyBindings:function(){if(!this.bindingsApplied){this.bindingsApplied=true;ko.applyBindings(this.viewModel,this.domNode);}},handleAddUserPersistedLayerToMap:function(_8a2){if(_8a2==null||!lang.isObject(_8a2)||_8a2.url==null||_8a2.url==""){return;}this.onAddUserPersistedLayerToMap(_8a2.url,_8a2.name);},onAddUserPersistedLayerToMap:function(_8a3,_8a4){},handleClearUserPersistedLayers:function(){this.onRemoveAllUserPersistedGraphics();},handleRemoveUserPersistedLayer:function(_8a5){if(_8a5&&lang.isObject(_8a5)){var id=VIEWER_UTILS.getLayerUniqueId(_8a5);if(id==null){return;}this.onRemoveUserPersistedGraphics(id);}},onRemoveAllUserPersistedGraphics:function(){},onRemoveUserPersistedGraphics:function(_8a6){},addExistingPersistedLayerItems:function(_8a7){for(var key in _8a7){this.viewModel.addedUserPersistedLayers.push(_8a7[key]);}this.viewModel.sort();this.applyBindings();},addPersistedLayer:function(_8a8){this.viewModel.addedUserPersistedLayers.push(_8a8);this.viewModel.sort();}});});},"dijit/DropDownMenu":function(){define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_OnDijitClickMixin","./_MenuBase"],function(_8a9,keys,_8aa,_8ab,_8ac){return _8a9("dijit.DropDownMenu",[_8ac,_8ab],{templateString:_8aa,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev();},_onDownArrow:function(){this.focusNext();},_onRightArrow:function(evt){this._moveToPopup(evt);evt.stopPropagation();evt.preventDefault();},_onLeftArrow:function(){if(this.parentMenu){if(this.parentMenu._isMenuBar){this.parentMenu.focusPrev();}else{this.onCancel(false);}}else{evt.stopPropagation();evt.preventDefault();}}});});},"dijit/Menu":function(){define(["require","dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window","dojo/window","./popup","./DropDownMenu","dojo/ready"],function(_8ad,_8ae,_8af,dom,_8b0,_8b1,_8b2,keys,lang,on,has,win,_8b3,pm,_8b4,_8b5){if(has("dijit-legacy-requires")){_8b5(0,function(){var _8b6=["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"];_8ad(_8b6);});}return _8af("dijit.Menu",_8b4,{constructor:function(){this._bindings=[];},targetNodeIds:[],selector:"",contextMenuForWindow:false,leftClickToOpen:false,refocus:true,postCreate:function(){if(this.contextMenuForWindow){this.bindDomNode(this.ownerDocumentBody);}else{_8ae.forEach(this.targetNodeIds,this.bindDomNode,this);}this.inherited(arguments);},_iframeContentWindow:function(_8b7){return _8b3.get(this._iframeContentDocument(_8b7))||this._iframeContentDocument(_8b7)["__parent__"]||(_8b7.name&&document.frames[_8b7.name])||null;},_iframeContentDocument:function(_8b8){return _8b8.contentDocument||(_8b8.contentWindow&&_8b8.contentWindow.document)||(_8b8.name&&document.frames[_8b8.name]&&document.frames[_8b8.name].document)||null;},bindDomNode:function(node){node=dom.byId(node,this.ownerDocument);var cn;if(node.tagName.toLowerCase()=="iframe"){var _8b9=node,_8ba=this._iframeContentWindow(_8b9);cn=win.body(_8ba.document);}else{cn=(node==win.body(this.ownerDocument)?this.ownerDocument.documentElement:node);}var _8bb={node:node,iframe:_8b9};_8b0.set(node,"_dijitMenu"+this.id,this._bindings.push(_8bb));var _8bc=lang.hitch(this,function(cn){var _8bd=this.selector,_8be=_8bd?function(_8bf){return on.selector(_8bd,_8bf);}:function(_8c0){return _8c0;},self=this;return [on(cn,_8be(this.leftClickToOpen?"click":"contextmenu"),function(evt){evt.stopPropagation();evt.preventDefault();self._scheduleOpen(this,_8b9,{x:evt.pageX,y:evt.pageY});}),on(cn,_8be("keydown"),function(evt){if(evt.shiftKey&&evt.keyCode==keys.F10){evt.stopPropagation();evt.preventDefault();self._scheduleOpen(this,_8b9);}})];});_8bb.connects=cn?_8bc(cn):[];if(_8b9){_8bb.onloadHandler=lang.hitch(this,function(){var _8c1=this._iframeContentWindow(_8b9),cn=win.body(_8c1.document);_8bb.connects=_8bc(cn);});if(_8b9.addEventListener){_8b9.addEventListener("load",_8bb.onloadHandler,false);}else{_8b9.attachEvent("onload",_8bb.onloadHandler);}}},unBindDomNode:function(_8c2){var node;try{node=dom.byId(_8c2,this.ownerDocument);}catch(e){return;}var _8c3="_dijitMenu"+this.id;if(node&&_8b0.has(node,_8c3)){var bid=_8b0.get(node,_8c3)-1,b=this._bindings[bid],h;while((h=b.connects.pop())){h.remove();}var _8c4=b.iframe;if(_8c4){if(_8c4.removeEventListener){_8c4.removeEventListener("load",b.onloadHandler,false);}else{_8c4.detachEvent("onload",b.onloadHandler);}}_8b0.remove(node,_8c3);delete this._bindings[bid];}},_scheduleOpen:function(_8c5,_8c6,_8c7){if(!this._openTimer){this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:_8c5,iframe:_8c6,coords:_8c7});},1);}},_openMyself:function(args){var _8c8=args.target,_8c9=args.iframe,_8ca=args.coords,_8cb=!_8ca;this.currentTarget=_8c8;if(_8ca){if(_8c9){var ifc=_8b1.position(_8c9,true),_8cc=this._iframeContentWindow(_8c9),_8cd=_8b1.docScroll(_8cc.document);var cs=_8b2.getComputedStyle(_8c9),tp=_8b2.toPixelValue,left=(has("ie")&&has("quirks")?0:tp(_8c9,cs.paddingLeft))+(has("ie")&&has("quirks")?tp(_8c9,cs.borderLeftWidth):0),top=(has("ie")&&has("quirks")?0:tp(_8c9,cs.paddingTop))+(has("ie")&&has("quirks")?tp(_8c9,cs.borderTopWidth):0);_8ca.x+=ifc.x+left-_8cd.x;_8ca.y+=ifc.y+top-_8cd.y;}}else{_8ca=_8b1.position(_8c8,true);_8ca.x+=10;_8ca.y+=10;}var self=this;var _8ce=this._focusManager.get("prevNode");var _8cf=this._focusManager.get("curNode");var _8d0=!_8cf||(dom.isDescendant(_8cf,this.domNode))?_8ce:_8cf;function _8d1(){if(self.refocus&&_8d0){_8d0.focus();}pm.close(self);};pm.open({popup:this,x:_8ca.x,y:_8ca.y,onExecute:_8d1,onCancel:_8d1,orient:this.isLeftToRight()?"L":"R"});this.focus();if(!_8cb){this.defer(function(){this._cleanUp(true);});}this._onBlur=function(){this.inherited("_onBlur",arguments);pm.close(this);};},destroy:function(){_8ae.forEach(this._bindings,function(b){if(b){this.unBindDomNode(b.node);}},this);this.inherited(arguments);}});});},"dijit/form/_CheckBoxMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(_8d2,_8d3){return _8d2("dijit.form._CheckBoxMixin",null,{type:"checkbox",value:"on",readOnly:false,_aria_attr:"aria-checked",_setReadOnlyAttr:function(_8d4){this._set("readOnly",_8d4);_8d3.set(this.focusNode,"readOnly",_8d4);},_setLabelAttr:undefined,_getSubmitValue:function(_8d5){return (_8d5==null||_8d5==="")?"on":_8d5;},_setValueAttr:function(_8d6){_8d6=this._getSubmitValue(_8d6);this._set("value",_8d6);_8d3.set(this.focusNode,"value",_8d6);},reset:function(){this.inherited(arguments);this._set("value",this._getSubmitValue(this.params.value));_8d3.set(this.focusNode,"value",this.value);},_onClick:function(e){if(this.readOnly){e.stopPropagation();e.preventDefault();return false;}return this.inherited(arguments);}});});},"esriviewer/ui/footer/model/FooterTogglerViewModel":function(){define(["dojo/_base/declare"],function(_8d7){return _8d7([],{constructor:function(){this.expanded=ko.observable(false);}});});},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(_8d8,_8d9){return _8d8("dijit._Contained",null,{_getSibling:function(_8da){var node=this.domNode;do{node=node[_8da+"Sibling"];}while(node&&node.nodeType!=1);return node&&_8d9.byNode(node);},getPreviousSibling:function(){return this._getSibling("previous");},getNextSibling:function(){return this._getSibling("next");},getIndexInParent:function(){var p=this.getParent();if(!p||!p.getIndexOfChild){return -1;}return p.getIndexOfChild(this);}});});},"dijit/_KeyNavContainer":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/_base/kernel","dojo/keys","dojo/_base/lang","./registry","./_Container","./_FocusMixin","./_KeyNavMixin"],function(_8db,_8dc,_8dd,_8de,keys,lang,_8df,_8e0,_8e1,_8e2){return _8dc("dijit._KeyNavContainer",[_8e1,_8e2,_8e0],{connectKeyNavHandlers:function(_8e3,_8e4){var _8e5=(this._keyNavCodes={});var prev=lang.hitch(this,"focusPrev");var next=lang.hitch(this,"focusNext");_8db.forEach(_8e3,function(code){_8e5[code]=prev;});_8db.forEach(_8e4,function(code){_8e5[code]=next;});_8e5[keys.HOME]=lang.hitch(this,"focusFirstChild");_8e5[keys.END]=lang.hitch(this,"focusLastChild");},startupKeyNavChildren:function(){_8de.deprecated("startupKeyNavChildren() call no longer needed","","2.0");},startup:function(){this.inherited(arguments);_8db.forEach(this.getChildren(),lang.hitch(this,"_startupChild"));},addChild:function(_8e6,_8e7){this.inherited(arguments);this._startupChild(_8e6);},_startupChild:function(_8e8){_8e8.set("tabIndex","-1");},_getFirst:function(){var _8e9=this.getChildren();return _8e9.length?_8e9[0]:null;},_getLast:function(){var _8ea=this.getChildren();return _8ea.length?_8ea[_8ea.length-1]:null;},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1));},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),true);},childSelector:function(node){var node=_8df.byNode(node);return node&&node.getParent()==this;}});});},"esriviewer/ui/draw/configure/model/ConfigureDrawViewModel":function(){define(["dojo/_base/declare"],function(_8eb){return _8eb([],{constructor:function(){this.showConfigureGeometryIcons=ko.observable(true);this.showEnvelopeIcon=ko.observable(true);this.showTextIcon=ko.observable(true);this.pointConfigurationActive=ko.observable(true);this.lineConfigurationActive=ko.observable(false);this.rectangleConfigurationActive=ko.observable(false);this.polygonConfigurationActive=ko.observable(false);this.textConfigurationActive=ko.observable(false);},showPointConfiguration:function(){this.pointConfigurationActive(true);this.lineConfigurationActive(false);this.rectangleConfigurationActive(false);this.polygonConfigurationActive(false);this.textConfigurationActive(false);},showLineConfiguration:function(){this.lineConfigurationActive(true);this.pointConfigurationActive(false);this.rectangleConfigurationActive(false);this.polygonConfigurationActive(false);this.textConfigurationActive(false);},showRectangleConfiguration:function(){this.rectangleConfigurationActive(true);this.lineConfigurationActive(false);this.pointConfigurationActive(false);this.polygonConfigurationActive(false);this.textConfigurationActive(false);},showPolygonConfiguration:function(){this.polygonConfigurationActive(true);this.rectangleConfigurationActive(false);this.lineConfigurationActive(false);this.pointConfigurationActive(false);this.textConfigurationActive(false);},showTextConfiguration:function(){this.textConfigurationActive(true);this.polygonConfigurationActive(false);this.rectangleConfigurationActive(false);this.lineConfigurationActive(false);this.pointConfigurationActive(false);}});});},"esriviewer/ui/layers/model/LayersWidgetViewModel":function(){define(["dojo/_base/declare","dojo/topic","dojo/Evented"],function(_8ec,_8ed,_8ee){return _8ec([_8ee],{ADD_LAYERS_VISIBLE:"addLayersVisible",constructor:function(){this.firstAddLayersDisplay=true;this.layersListVisible=ko.observable(true);this.addlayersVisible=ko.observable(false);this.persistedLayersVisible=ko.observable(false);this.showWKIDInAddLayers=ko.observable(true);this.showUserPersistedLayersIcon=ko.observable(true);this.viewerWKID=ko.observable("");},showLayersList:function(){this.layersListVisible(true);this.addlayersVisible(false);this.persistedLayersVisible(false);},showAddLayers:function(){if(this.addlayersVisible()){return;}if(this.firstAddLayersDisplay){var _8ef=null;_8ed.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,function(ext){_8ef=ext;});if(_8ef&&_8ef.spatialReference&&_8ef.spatialReference.wkid!=null){this.viewerWKID(_8ef.spatialReference.wkid.toString());}this.firstAddLayersDisplay=false;}this.layersListVisible(false);this.addlayersVisible(true);this.persistedLayersVisible(false);this.emit(this.ADD_LAYERS_VISIBLE);},showUserPersistedLayers:function(){this.layersListVisible(false);this.addlayersVisible(false);this.persistedLayersVisible(true);}});});},"dojox/sql/_base":function(){define(["dijit","dojo","dojox","dojo/require!dojox/sql/_crypto"],function(_8f0,dojo,_8f1){dojo.provide("dojox.sql._base");dojo.require("dojox.sql._crypto");dojo.mixin(_8f1.sql,{dbName:null,debug:(dojo.exists("dojox.sql.debug")?_8f1.sql.debug:false),open:function(_8f2){if(this._dbOpen&&(!_8f2||_8f2==this.dbName)){return;}if(!this.dbName){this.dbName="dot_store_"+window.location.href.replace(/[^0-9A-Za-z_]/g,"_");if(this.dbName.length>63){this.dbName=this.dbName.substring(0,63);}}if(!_8f2){_8f2=this.dbName;}try{this._initDb();this.db.open(_8f2);this._dbOpen=true;}catch(exp){throw exp.message||exp;}},close:function(_8f3){if(dojo.isIE){return;}if(!this._dbOpen&&(!_8f3||_8f3==this.dbName)){return;}if(!_8f3){_8f3=this.dbName;}try{this.db.close(_8f3);this._dbOpen=false;}catch(exp){throw exp.message||exp;}},_exec:function(_8f4){try{this._initDb();if(!this._dbOpen){this.open();this._autoClose=true;}var sql=null;var _8f5=null;var _8f6=null;var args=dojo._toArray(_8f4);sql=args.splice(0,1)[0];if(this._needsEncrypt(sql)||this._needsDecrypt(sql)){_8f5=args.splice(args.length-1,1)[0];_8f6=args.splice(args.length-1,1)[0];}if(this.debug){this._printDebugSQL(sql,args);}var _8f7;if(this._needsEncrypt(sql)){_8f7=new _8f1.sql._SQLCrypto("encrypt",sql,_8f6,args,_8f5);return null;}else{if(this._needsDecrypt(sql)){_8f7=new _8f1.sql._SQLCrypto("decrypt",sql,_8f6,args,_8f5);return null;}}var rs=this.db.execute(sql,args);rs=this._normalizeResults(rs);if(this._autoClose){this.close();}return rs;}catch(exp){exp=exp.message||exp;if(this._autoClose){try{this.close();}catch(e){}}throw exp;}return null;},_initDb:function(){if(!this.db){try{this.db=google.gears.factory.create("beta.database","1.0");}catch(exp){dojo.setObject("google.gears.denied",true);if(_8f1.off){_8f1.off.onFrameworkEvent("coreOperationFailed");}throw "Google Gears must be allowed to run";}}},_printDebugSQL:function(sql,args){var msg="dojox.sql(\""+sql+"\"";for(var i=0;i<args.length;i++){if(typeof args[i]=="string"){msg+=", \""+args[i]+"\"";}else{msg+=", "+args[i];}}msg+=")";},_normalizeResults:function(rs){var _8f8=[];if(!rs){return [];}while(rs.isValidRow()){var row={};for(var i=0;i<rs.fieldCount();i++){var _8f9=rs.fieldName(i);var _8fa=rs.field(i);row[_8f9]=_8fa;}_8f8.push(row);rs.next();}rs.close();return _8f8;},_needsEncrypt:function(sql){return /encrypt\([^\)]*\)/i.test(sql);},_needsDecrypt:function(sql){return /decrypt\([^\)]*\)/i.test(sql);}});dojo.declare("dojox.sql._SQLCrypto",null,{constructor:function(_8fb,sql,_8fc,args,_8fd){if(_8fb=="encrypt"){this._execEncryptSQL(sql,_8fc,args,_8fd);}else{this._execDecryptSQL(sql,_8fc,args,_8fd);}},_execEncryptSQL:function(sql,_8fe,args,_8ff){var _900=this._stripCryptoSQL(sql);var _901=this._flagEncryptedArgs(sql,args);var self=this;this._encrypt(_900,_8fe,args,_901,function(_902){var _903=false;var _904=[];var exp=null;try{_904=_8f1.sql.db.execute(_900,_902);}catch(execError){_903=true;exp=execError.message||execError;}if(exp!=null){if(_8f1.sql._autoClose){try{_8f1.sql.close();}catch(e){}}_8ff(null,true,exp.toString());return;}_904=_8f1.sql._normalizeResults(_904);if(_8f1.sql._autoClose){_8f1.sql.close();}if(_8f1.sql._needsDecrypt(sql)){var _905=self._determineDecryptedColumns(sql);self._decrypt(_904,_905,_8fe,function(_906){_8ff(_906,false,null);});}else{_8ff(_904,false,null);}});},_execDecryptSQL:function(sql,_907,args,_908){var _909=this._stripCryptoSQL(sql);var _90a=this._determineDecryptedColumns(sql);var _90b=false;var _90c=[];var exp=null;try{_90c=_8f1.sql.db.execute(_909,args);}catch(execError){_90b=true;exp=execError.message||execError;}if(exp!=null){if(_8f1.sql._autoClose){try{_8f1.sql.close();}catch(e){}}_908(_90c,true,exp.toString());return;}_90c=_8f1.sql._normalizeResults(_90c);if(_8f1.sql._autoClose){_8f1.sql.close();}this._decrypt(_90c,_90a,_907,function(_90d){_908(_90d,false,null);});},_encrypt:function(sql,_90e,args,_90f,_910){this._totalCrypto=0;this._finishedCrypto=0;this._finishedSpawningCrypto=false;this._finalArgs=args;for(var i=0;i<args.length;i++){if(_90f[i]){var _911=args[i];var _912=i;this._totalCrypto++;_8f1.sql._crypto.encrypt(_911,_90e,dojo.hitch(this,function(_913){this._finalArgs[_912]=_913;this._finishedCrypto++;if(this._finishedCrypto>=this._totalCrypto&&this._finishedSpawningCrypto){_910(this._finalArgs);}}));}}this._finishedSpawningCrypto=true;},_decrypt:function(_914,_915,_916,_917){this._totalCrypto=0;this._finishedCrypto=0;this._finishedSpawningCrypto=false;this._finalResultSet=_914;for(var i=0;i<_914.length;i++){var row=_914[i];for(var _918 in row){if(_915=="*"||_915[_918]){this._totalCrypto++;var _919=row[_918];this._decryptSingleColumn(_918,_919,_916,i,function(_91a){_917(_91a);});}}}this._finishedSpawningCrypto=true;},_stripCryptoSQL:function(sql){sql=sql.replace(/DECRYPT\(\*\)/ig,"*");var _91b=sql.match(/ENCRYPT\([^\)]*\)/ig);if(_91b!=null){for(var i=0;i<_91b.length;i++){var _91c=_91b[i];var _91d=_91c.match(/ENCRYPT\(([^\)]*)\)/i)[1];sql=sql.replace(_91c,_91d);}}_91b=sql.match(/DECRYPT\([^\)]*\)/ig);if(_91b!=null){for(i=0;i<_91b.length;i++){var _91e=_91b[i];var _91f=_91e.match(/DECRYPT\(([^\)]*)\)/i)[1];sql=sql.replace(_91e,_91f);}}return sql;},_flagEncryptedArgs:function(sql,args){var _920=new RegExp(/([\"][^\"]*\?[^\"]*[\"])|([\'][^\']*\?[^\']*[\'])|(\?)/ig);var _921;var _922=0;var _923=[];while((_921=_920.exec(sql))!=null){var _924=RegExp.lastMatch+"";if(/^[\"\']/.test(_924)){continue;}var _925=false;if(/ENCRYPT\([^\)]*$/i.test(RegExp.leftContext)){_925=true;}_923[_922]=_925;_922++;}return _923;},_determineDecryptedColumns:function(sql){var _926={};if(/DECRYPT\(\*\)/i.test(sql)){_926="*";}else{var _927=/DECRYPT\((?:\s*\w*\s*\,?)*\)/ig;var _928=_927.exec(sql);while(_928){var _929=new String(RegExp.lastMatch);var _92a=_929.replace(/DECRYPT\(/i,"");_92a=_92a.replace(/\)/,"");_92a=_92a.split(/\s*,\s*/);dojo.forEach(_92a,function(_92b){if(/\s*\w* AS (\w*)/i.test(_92b)){_92b=_92b.match(/\s*\w* AS (\w*)/i)[1];}_926[_92b]=true;});_928=_927.exec(sql);}}return _926;},_decryptSingleColumn:function(_92c,_92d,_92e,_92f,_930){_8f1.sql._crypto.decrypt(_92d,_92e,dojo.hitch(this,function(_931){this._finalResultSet[_92f][_92c]=_931;this._finishedCrypto++;if(this._finishedCrypto>=this._totalCrypto&&this._finishedSpawningCrypto){_930(this._finalResultSet);}}));}});(function(){var _932=_8f1.sql;_8f1.sql=new Function("return dojox.sql._exec(arguments);");dojo.mixin(_8f1.sql,_932);})();});},"dojox/timing/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang"],function(dojo){dojo.experimental("dojox.timing");dojo.getObject("timing",true,dojox);dojox.timing.Timer=function(_933){this.timer=null;this.isRunning=false;this.interval=_933;this.onStart=null;this.onStop=null;};dojo.extend(dojox.timing.Timer,{onTick:function(){},setInterval:function(_934){if(this.isRunning){window.clearInterval(this.timer);}this.interval=_934;if(this.isRunning){this.timer=window.setInterval(dojo.hitch(this,"onTick"),this.interval);}},start:function(){if(typeof this.onStart=="function"){this.onStart();}this.isRunning=true;this.timer=window.setInterval(dojo.hitch(this,"onTick"),this.interval);},stop:function(){if(typeof this.onStop=="function"){this.onStop();}this.isRunning=false;window.clearInterval(this.timer);}});return dojox.timing;});},"dijit/form/CheckBox":function(){define(["require","dojo/_base/declare","dojo/dom-attr","dojo/has","dojo/query","dojo/ready","./ToggleButton","./_CheckBoxMixin","dojo/text!./templates/CheckBox.html","dojo/NodeList-dom","../a11yclick"],function(_935,_936,_937,has,_938,_939,_93a,_93b,_93c){if(has("dijit-legacy-requires")){_939(0,function(){var _93d=["dijit/form/RadioButton"];_935(_93d);});}return _936("dijit.form.CheckBox",[_93a,_93b],{templateString:_93c,baseClass:"dijitCheckBox",_setValueAttr:function(_93e,_93f){if(typeof _93e=="string"){this.inherited(arguments);_93e=true;}if(this._created){this.set("checked",_93e,_93f);}},_getValueAttr:function(){return this.checked&&this._get("value");},_setIconClassAttr:null,_setNameAttr:"focusNode",postMixInProperties:function(){this.inherited(arguments);this.checkedAttrSetting="";},_fillContent:function(){},_onFocus:function(){if(this.id){_938("label[for='"+this.id+"']").addClass("dijitFocusedLabel");}this.inherited(arguments);},_onBlur:function(){if(this.id){_938("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");}this.inherited(arguments);}});});},"dojox/storage/manager":function(){define(["dijit","dojo","dojox"],function(_940,dojo,_941){dojo.provide("dojox.storage.manager");_941.storage.manager=new function(){this.currentProvider=null;this.available=false;this.providers=[];this._initialized=false;this._onLoadListeners=[];this.initialize=function(){this.autodetect();};this.register=function(name,_942){this.providers.push(_942);this.providers[name]=_942;};this.setProvider=function(_943){};this.autodetect=function(){if(this._initialized){return;}var _944=dojo.config["forceStorageProvider"]||false;var _945;for(var i=0;i<this.providers.length;i++){_945=this.providers[i];if(_944&&_944==_945.declaredClass){_945.isAvailable();break;}else{if(!_944&&_945.isAvailable()){break;}}}if(!_945){this._initialized=true;this.available=false;this.currentProvider=null;this.loaded();return;}this.currentProvider=_945;dojo.mixin(_941.storage,this.currentProvider);_941.storage.initialize();this._initialized=true;this.available=true;};this.isAvailable=function(){return this.available;};this.addOnLoad=function(func){this._onLoadListeners.push(func);if(this.isInitialized()){this._fireLoaded();}};this.removeOnLoad=function(func){for(var i=0;i<this._onLoadListeners.length;i++){if(func==this._onLoadListeners[i]){this._onLoadListeners.splice(i,1);break;}}};this.isInitialized=function(){if(this.currentProvider!=null&&this.currentProvider.declaredClass=="dojox.storage.FlashStorageProvider"&&_941.flash.ready==false){return false;}else{return this._initialized;}};this.supportsProvider=function(_946){try{var _947=eval("new "+_946+"()");var _948=_947.isAvailable();if(!_948){return false;}return _948;}catch(e){return false;}};this.getProvider=function(){return this.currentProvider;};this.loaded=function(){this._fireLoaded();};this._fireLoaded=function(){dojo.forEach(this._onLoadListeners,function(i){try{i();}catch(e){}});};this.getResourceList=function(){var _949=[];dojo.forEach(_941.storage.manager.providers,function(_94a){_949=_949.concat(_94a.getResourceList());});return _949;};};});},"dijit/tree/_dndSelector":function(){define(["dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/dom","dojo/mouse","dojo/on","dojo/touch","../a11yclick","./_dndContainer"],function(_94b,_94c,_94d,_94e,lang,dom,_94f,on,_950,_951,_952){return _94d("dijit.tree._dndSelector",_952,{constructor:function(){this.selection={};this.anchor=null;this.events.push(on(this.tree.domNode,_950.press,lang.hitch(this,"onMouseDown")),on(this.tree.domNode,_950.release,lang.hitch(this,"onMouseUp")),on(this.tree.domNode,_950.move,lang.hitch(this,"onMouseMove")),on(this.tree.domNode,_951.press,lang.hitch(this,"onClickPress")),on(this.tree.domNode,_951.release,lang.hitch(this,"onClickRelease")));},singular:false,getSelectedTreeNodes:function(){var _953=[],sel=this.selection;for(var i in sel){_953.push(sel[i]);}return _953;},selectNone:function(){this.setSelection([]);return this;},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null;},addTreeNode:function(node,_954){this.setSelection(this.getSelectedTreeNodes().concat([node]));if(_954){this.anchor=node;}return node;},removeTreeNode:function(node){var _955=_94b.filter(this.getSelectedTreeNodes(),function(_956){return !dom.isDescendant(_956.domNode,node.domNode);});this.setSelection(_955);return node;},isTreeNodeSelected:function(node){return node.id&&!!this.selection[node.id];},setSelection:function(_957){var _958=this.getSelectedTreeNodes();_94b.forEach(this._setDifference(_958,_957),lang.hitch(this,function(node){node.setSelected(false);if(this.anchor==node){delete this.anchor;}delete this.selection[node.id];}));_94b.forEach(this._setDifference(_957,_958),lang.hitch(this,function(node){node.setSelected(true);this.selection[node.id]=node;}));this._updateSelectionProperties();},_setDifference:function(xs,ys){_94b.forEach(ys,function(y){y.__exclude__=true;});var ret=_94b.filter(xs,function(x){return !x.__exclude__;});_94b.forEach(ys,function(y){delete y["__exclude__"];});return ret;},_updateSelectionProperties:function(){var _959=this.getSelectedTreeNodes();var _95a=[],_95b=[],_95c=[];_94b.forEach(_959,function(node){var ary=node.getTreePath(),_95d=this.tree.model;_95b.push(node);_95a.push(ary);ary=_94b.map(ary,function(item){return _95d.getIdentity(item);},this);_95c.push(ary.join("/"));},this);var _95e=_94b.map(_95b,function(node){return node.item;});this.tree._set("paths",_95a);this.tree._set("path",_95a[0]||[]);this.tree._set("selectedNodes",_95b);this.tree._set("selectedNode",_95b[0]||null);this.tree._set("selectedItems",_95e);this.tree._set("selectedItem",_95e[0]||null);},onClickPress:function(e){if(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(e.target,this.current)){return;}if(_94f.isLeft(e)){e.preventDefault();}var _95f=e.type=="keydown"?this.tree.focusedChild:this.current;if(!_95f){return;}var copy=_94c.isCopyKey(e),id=_95f.id;if(!this.singular&&!e.shiftKey&&this.selection[id]){this._doDeselect=true;return;}else{this._doDeselect=false;}this.userSelect(_95f,copy,e.shiftKey);},onClickRelease:function(e){if(!this._doDeselect){return;}this._doDeselect=false;this.userSelect(e.type=="keyup"?this.tree.focusedChild:this.current,_94c.isCopyKey(e),e.shiftKey);},onMouseMove:function(){this._doDeselect=false;},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(n1,n2){if(n1===n2){return 0;}if("sourceIndex" in document.documentElement){return n1.sourceIndex-n2.sourceIndex;}else{if("compareDocumentPosition" in document.documentElement){return n1.compareDocumentPosition(n2)&2?1:-1;}else{if(document.createRange){var r1=doc.createRange();r1.setStartBefore(n1);var r2=doc.createRange();r2.setStartBefore(n2);return r1.compareBoundaryPoints(r1.END_TO_END,r2);}else{throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");}}}},userSelect:function(node,_960,_961){if(this.singular){if(this.anchor==node&&_960){this.selectNone();}else{this.setSelection([node]);this.anchor=node;}}else{if(_961&&this.anchor){var cr=this._compareNodes(this.anchor.rowNode,node.rowNode),_962,end,_963=this.anchor;if(cr<0){_962=_963;end=node;}else{_962=node;end=_963;}var _964=[];while(_962!=end){_964.push(_962);_962=this.tree._getNext(_962);}_964.push(end);this.setSelection(_964);}else{if(this.selection[node.id]&&_960){this.removeTreeNode(node);}else{if(_960){this.addTreeNode(node,true);}else{this.setSelection([node]);this.anchor=node;}}}}},getItem:function(key){var _965=this.selection[key];return {data:_965,type:["treeNode"]};},forInSelectedItems:function(f,o){o=o||_94e.global;for(var id in this.selection){f.call(o,this.getItem(id),id,this);}}});});},"dojox/flash/_base":function(){define(["dijit","dojo","dojox","dojo/require!dojo/window"],function(_966,dojo,_967){dojo.provide("dojox.flash._base");dojo.experimental("dojox.flash");dojo.require("dojo.window");_967.flash={ready:false,url:null,_visible:true,_loadedListeners:[],_installingListeners:[],setSwf:function(url,_968){this.url=url;this._visible=true;if(_968!==null&&_968!==undefined){this._visible=_968;}this._initialize();},addLoadedListener:function(_969){this._loadedListeners.push(_969);},addInstallingListener:function(_96a){this._installingListeners.push(_96a);},loaded:function(){_967.flash.ready=true;if(_967.flash._loadedListeners.length){for(var i=0;i<_967.flash._loadedListeners.length;i++){_967.flash._loadedListeners[i].call(null);}}},installing:function(){if(_967.flash._installingListeners.length){for(var i=0;i<_967.flash._installingListeners.length;i++){_967.flash._installingListeners[i].call(null);}}},_initialize:function(){var _96b=new _967.flash.Install();_967.flash.installer=_96b;if(_96b.needed()){_96b.install();}else{_967.flash.obj=new _967.flash.Embed(this._visible);_967.flash.obj.write();_967.flash.comm=new _967.flash.Communicator();}}};_967.flash.Info=function(){this._detectVersion();};_967.flash.Info.prototype={version:-1,versionMajor:-1,versionMinor:-1,versionRevision:-1,capable:false,installing:false,isVersionOrAbove:function(_96c,_96d,_96e){_96e=parseFloat("."+_96e);if(this.versionMajor>=_96c&&this.versionMinor>=_96d&&this.versionRevision>=_96e){return true;}else{return false;}},_detectVersion:function(){var _96f;for(var _970=25;_970>0;_970--){if(dojo.isIE){var axo;try{if(_970>6){axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_970);}else{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}if(typeof axo=="object"){if(_970==6){axo.AllowScriptAccess="always";}_96f=axo.GetVariable("$version");}}catch(e){continue;}}else{_96f=this._JSFlashInfo(_970);}if(_96f==-1){this.capable=false;return;}else{if(_96f!=0){var _971;if(dojo.isIE){var _972=_96f.split(" ");var _973=_972[1];_971=_973.split(",");}else{_971=_96f.split(".");}this.versionMajor=_971[0];this.versionMinor=_971[1];this.versionRevision=_971[2];var _974=this.versionMajor+"."+this.versionRevision;this.version=parseFloat(_974);this.capable=true;break;}}}},_JSFlashInfo:function(_975){if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var _976=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"";var _977=navigator.plugins["Shockwave Flash"+_976].description;var _978=_977.split(" ");var _979=_978[2].split(".");var _97a=_979[0];var _97b=_979[1];var _97c=(_978[3]||_978[4]).split("r");var _97d=_97c[1]>0?_97c[1]:0;var _97e=_97a+"."+_97b+"."+_97d;return _97e;}}return -1;}};_967.flash.Embed=function(_97f){this._visible=_97f;};_967.flash.Embed.prototype={width:215,height:138,id:"flashObject",_visible:true,protocol:function(){switch(window.location.protocol){case "https:":return "https";break;default:return "http";break;}},write:function(_980){var _981;var _982=_967.flash.url;var _983=_982;var _984=_982;var _985=dojo.baseUrl;var _986=document.location.protocol+"//"+document.location.host;if(_980){var _987=escape(window.location);document.title=document.title.slice(0,47)+" - Flash Player Installation";var _988=escape(document.title);_983+="?MMredirectURL="+_987+"&MMplayerType=ActiveX"+"&MMdoctitle="+_988+"&baseUrl="+escape(_985)+"&xdomain="+escape(_986);_984+="?MMredirectURL="+_987+"&MMplayerType=PlugIn"+"&baseUrl="+escape(_985)+"&xdomain="+escape(_986);}else{_983+="?cachebust="+new Date().getTime();_983+="&baseUrl="+escape(_985);_983+="&xdomain="+escape(_986);}if(_984.indexOf("?")==-1){_984+="?baseUrl="+escape(_985);}else{_984+="&baseUrl="+escape(_985);}_984+="&xdomain="+escape(_986);_981="<object classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" "+"codebase=\""+this.protocol()+"://fpdownload.macromedia.com/pub/shockwave/cabs/flash/"+"swflash.cab#version=8,0,0,0\"\n "+"width=\""+this.width+"\"\n "+"height=\""+this.height+"\"\n "+"id=\""+this.id+"\"\n "+"name=\""+this.id+"\"\n "+"align=\"middle\">\n "+"<param name=\"allowScriptAccess\" value=\"always\"></param>\n "+"<param name=\"movie\" value=\""+_983+"\"></param>\n "+"<param name=\"quality\" value=\"high\"></param>\n "+"<param name=\"bgcolor\" value=\"#ffffff\"></param>\n "+"<embed src=\""+_984+"\" "+"quality=\"high\" "+"bgcolor=\"#ffffff\" "+"width=\""+this.width+"\" "+"height=\""+this.height+"\" "+"id=\""+this.id+"Embed"+"\" "+"name=\""+this.id+"\" "+"swLiveConnect=\"true\" "+"align=\"middle\" "+"allowScriptAccess=\"always\" "+"type=\"application/x-shockwave-flash\" "+"pluginspage=\""+this.protocol()+"://www.macromedia.com/go/getflashplayer\" "+"></embed>\n"+"</object>\n";dojo.connect(dojo,"loaded",dojo.hitch(this,function(){var _989=this.id+"Container";if(dojo.byId(_989)){return;}var div=document.createElement("div");div.id=this.id+"Container";div.style.width=this.width+"px";div.style.height=this.height+"px";if(!this._visible){div.style.position="absolute";div.style.zIndex="10000";div.style.top="-1000px";}div.innerHTML=_981;var body=document.getElementsByTagName("body");if(!body||!body.length){throw new Error("No body tag for this page");}body=body[0];body.appendChild(div);}));},get:function(){if(dojo.isIE||dojo.isWebKit){return dojo.byId(this.id);}else{return document[this.id+"Embed"];}},setVisible:function(_98a){var _98b=dojo.byId(this.id+"Container");if(_98a){_98b.style.position="absolute";_98b.style.visibility="visible";}else{_98b.style.position="absolute";_98b.style.y="-1000px";_98b.style.visibility="hidden";}},center:function(){var _98c=this.width;var _98d=this.height;var _98e=dojo.window.getBox();var x=_98e.l+(_98e.w-_98c)/2;var y=_98e.t+(_98e.h-_98d)/2;var _98f=dojo.byId(this.id+"Container");_98f.style.top=y+"px";_98f.style.left=x+"px";}};_967.flash.Communicator=function(){};_967.flash.Communicator.prototype={_addExternalInterfaceCallback:function(_990){var _991=dojo.hitch(this,function(){var _992=new Array(arguments.length);for(var i=0;i<arguments.length;i++){_992[i]=this._encodeData(arguments[i]);}var _993=this._execFlash(_990,_992);_993=this._decodeData(_993);return _993;});this[_990]=_991;},_encodeData:function(data){if(!data||typeof data!="string"){return data;}data=data.replace("\\","&custom_backslash;");data=data.replace(/\0/g,"&custom_null;");return data;},_decodeData:function(data){if(data&&data.length&&typeof data!="string"){data=data[0];}if(!data||typeof data!="string"){return data;}data=data.replace(/\&custom_null\;/g,"\x00");data=data.replace(/\&custom_lt\;/g,"<").replace(/\&custom_gt\;/g,">").replace(/\&custom_backslash\;/g,"\\");return data;},_execFlash:function(_994,_995){var _996=_967.flash.obj.get();_995=(_995)?_995:[];for(var i=0;i<_995;i++){if(typeof _995[i]=="string"){_995[i]=this._encodeData(_995[i]);}}var _997=function(){return eval(_996.CallFunction("<invoke name=\""+_994+"\" returntype=\"javascript\">"+__flash__argumentsToXML(_995,0)+"</invoke>"));};var _998=_997.call(_995);if(typeof _998=="string"){_998=this._decodeData(_998);}return _998;}};_967.flash.Install=function(){};_967.flash.Install.prototype={needed:function(){if(!_967.flash.info.capable){return true;}if(!_967.flash.info.isVersionOrAbove(8,0,0)){return true;}return false;},install:function(){var _999;_967.flash.info.installing=true;_967.flash.installing();if(_967.flash.info.capable==false){_999=new _967.flash.Embed(false);_999.write();}else{if(_967.flash.info.isVersionOrAbove(6,0,65)){_999=new _967.flash.Embed(false);_999.write(true);_999.setVisible(true);_999.center();}else{alert("This content requires a more recent version of the Macromedia "+" Flash Player.");window.location.href=+_967.flash.Embed.protocol()+"://www.macromedia.com/go/getflashplayer";}}},_onInstallStatus:function(msg){if(msg=="Download.Complete"){_967.flash._initialize();}else{if(msg=="Download.Cancelled"){alert("This content requires a more recent version of the Macromedia "+" Flash Player.");window.location.href=_967.flash.Embed.protocol()+"://www.macromedia.com/go/getflashplayer";}else{if(msg=="Download.Failed"){alert("There was an error downloading the Flash Player update. "+"Please try again later, or visit macromedia.com to download "+"the latest version of the Flash plugin.");}}}}};_967.flash.info=new _967.flash.Info();});},"esriviewer/ui/basemap/model/BasemapGalleryViewModel":function(){define(["dojo/_base/declare"],function(_99a){return _99a([],{constructor:function(){this.visible=ko.observable(false);}});});},"dojo/data/ItemFileReadStore":function(){define(["../_base/kernel","../_base/lang","../_base/declare","../_base/array","../_base/xhr","../Evented","./util/filter","./util/simpleFetch","../date/stamp"],function(_99b,lang,_99c,_99d,xhr,_99e,_99f,_9a0,_9a1){var _9a2=_99c("dojo.data.ItemFileReadStore",[_99e],{constructor:function(_9a3){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=_9a3.url;this._ccUrl=_9a3.url;this.url=_9a3.url;this._jsonData=_9a3.data;this.data=null;this._datatypeMap=_9a3.typeMap||{};if(!this._datatypeMap["Date"]){this._datatypeMap["Date"]={type:Date,deserialize:function(_9a4){return _9a1.fromISOString(_9a4);}};}this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(_9a3.urlPreventCache!==undefined){this.urlPreventCache=_9a3.urlPreventCache?true:false;}if(_9a3.hierarchical!==undefined){this.hierarchical=_9a3.hierarchical?true:false;}if(_9a3.clearOnClose){this.clearOnClose=true;}if("failOk" in _9a3){this.failOk=_9a3.failOk?true:false;}},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,failOk:false,hierarchical:true,_assertIsItem:function(item){if(!this.isItem(item)){throw new Error(this.declaredClass+": Invalid item argument.");}},_assertIsAttribute:function(_9a5){if(typeof _9a5!=="string"){throw new Error(this.declaredClass+": Invalid attribute argument.");}},getValue:function(item,_9a6,_9a7){var _9a8=this.getValues(item,_9a6);return (_9a8.length>0)?_9a8[0]:_9a7;},getValues:function(item,_9a9){this._assertIsItem(item);this._assertIsAttribute(_9a9);return (item[_9a9]||[]).slice(0);},getAttributes:function(item){this._assertIsItem(item);var _9aa=[];for(var key in item){if((key!==this._storeRefPropName)&&(key!==this._itemNumPropName)&&(key!==this._rootItemPropName)&&(key!==this._reverseRefMap)){_9aa.push(key);}}return _9aa;},hasAttribute:function(item,_9ab){this._assertIsItem(item);this._assertIsAttribute(_9ab);return (_9ab in item);},containsValue:function(item,_9ac,_9ad){var _9ae=undefined;if(typeof _9ad==="string"){_9ae=_99f.patternToRegExp(_9ad,false);}return this._containsValue(item,_9ac,_9ad,_9ae);},_containsValue:function(item,_9af,_9b0,_9b1){return _99d.some(this.getValues(item,_9af),function(_9b2){if(_9b2!==null&&!lang.isObject(_9b2)&&_9b1){if(_9b2.toString().match(_9b1)){return true;}}else{if(_9b0===_9b2){return true;}}});},isItem:function(_9b3){if(_9b3&&_9b3[this._storeRefPropName]===this){if(this._arrayOfAllItems[_9b3[this._itemNumPropName]]===_9b3){return true;}}return false;},isItemLoaded:function(_9b4){return this.isItem(_9b4);},loadItem:function(_9b5){this._assertIsItem(_9b5.item);},getFeatures:function(){return this._features;},getLabel:function(item){if(this._labelAttr&&this.isItem(item)){return this.getValue(item,this._labelAttr);}return undefined;},getLabelAttributes:function(item){if(this._labelAttr){return [this._labelAttr];}return null;},filter:function(_9b6,_9b7,_9b8){var _9b9=[],i,key;if(_9b6.query){var _9ba,_9bb=_9b6.queryOptions?_9b6.queryOptions.ignoreCase:false;var _9bc={};for(key in _9b6.query){_9ba=_9b6.query[key];if(typeof _9ba==="string"){_9bc[key]=_99f.patternToRegExp(_9ba,_9bb);}else{if(_9ba instanceof RegExp){_9bc[key]=_9ba;}}}for(i=0;i<_9b7.length;++i){var _9bd=true;var _9be=_9b7[i];if(_9be===null){_9bd=false;}else{for(key in _9b6.query){_9ba=_9b6.query[key];if(!this._containsValue(_9be,key,_9ba,_9bc[key])){_9bd=false;}}}if(_9bd){_9b9.push(_9be);}}_9b8(_9b9,_9b6);}else{for(i=0;i<_9b7.length;++i){var item=_9b7[i];if(item!==null){_9b9.push(item);}}_9b8(_9b9,_9b6);}},_fetchItems:function(_9bf,_9c0,_9c1){var self=this;if(this._loadFinished){this.filter(_9bf,this._getItemsArray(_9bf.queryOptions),_9c0);}else{if(this._jsonFileUrl!==this._ccUrl){_99b.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_9bf,filter:lang.hitch(self,"filter"),findCallback:lang.hitch(self,_9c0)});}else{this._loadInProgress=true;var _9c2={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _9c3=xhr.get(_9c2);_9c3.addCallback(function(data){try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;self.filter(_9bf,self._getItemsArray(_9bf.queryOptions),_9c0);self._handleQueuedFetches();}catch(e){self._loadFinished=true;self._loadInProgress=false;_9c1(e,_9bf);}});_9c3.addErrback(function(_9c4){self._loadInProgress=false;_9c1(_9c4,_9bf);});var _9c5=null;if(_9bf.abort){_9c5=_9bf.abort;}_9bf.abort=function(){var df=_9c3;if(df&&df.fired===-1){df.cancel();df=null;}if(_9c5){_9c5.call(_9bf);}};}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;self.filter(_9bf,this._getItemsArray(_9bf.queryOptions),_9c0);}catch(e){_9c1(e,_9bf);}}else{_9c1(new Error(this.declaredClass+": No JSON source data was provided as either URL or a nested Javascript object."),_9bf);}}}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var i=0;i<this._queuedFetches.length;i++){var _9c6=this._queuedFetches[i],_9c7=_9c6.args,_9c8=_9c6.filter,_9c9=_9c6.findCallback;if(_9c8){_9c8(_9c7,this._getItemsArray(_9c7.queryOptions),_9c9);}else{this.fetchItemByIdentity(_9c7);}}this._queuedFetches=[];}},_getItemsArray:function(_9ca){if(_9ca&&_9ca.deep){return this._arrayOfAllItems;}return this._arrayOfTopLevelItems;},close:function(_9cb){if(this.clearOnClose&&this._loadFinished&&!this._loadInProgress){if(((this._jsonFileUrl==""||this._jsonFileUrl==null)&&(this.url==""||this.url==null))&&this.data==null){}this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[];}},_getItemsFromLoadedData:function(_9cc){var _9cd=false,self=this;function _9ce(_9cf){return (_9cf!==null)&&(typeof _9cf==="object")&&(!lang.isArray(_9cf)||_9cd)&&(!lang.isFunction(_9cf))&&(_9cf.constructor==Object||lang.isArray(_9cf))&&(typeof _9cf._reference==="undefined")&&(typeof _9cf._type==="undefined")&&(typeof _9cf._value==="undefined")&&self.hierarchical;};function _9d0(_9d1){self._arrayOfAllItems.push(_9d1);for(var _9d2 in _9d1){var _9d3=_9d1[_9d2];if(_9d3){if(lang.isArray(_9d3)){var _9d4=_9d3;for(var k=0;k<_9d4.length;++k){var _9d5=_9d4[k];if(_9ce(_9d5)){_9d0(_9d5);}}}else{if(_9ce(_9d3)){_9d0(_9d3);}}}}};this._labelAttr=_9cc.label;var i,item;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=_9cc.items;for(i=0;i<this._arrayOfTopLevelItems.length;++i){item=this._arrayOfTopLevelItems[i];if(lang.isArray(item)){_9cd=true;}_9d0(item);item[this._rootItemPropName]=true;}var _9d6={},key;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){if(key!==this._rootItemPropName){var _9d7=item[key];if(_9d7!==null){if(!lang.isArray(_9d7)){item[key]=[_9d7];}}else{item[key]=[null];}}_9d6[key]=key;}}while(_9d6[this._storeRefPropName]){this._storeRefPropName+="_";}while(_9d6[this._itemNumPropName]){this._itemNumPropName+="_";}while(_9d6[this._reverseRefMap]){this._reverseRefMap+="_";}var _9d8;var _9d9=_9cc.identifier;if(_9d9){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=_9d9;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];_9d8=item[_9d9];var _9da=_9d8[0];if(!Object.hasOwnProperty.call(this._itemsByIdentity,_9da)){this._itemsByIdentity[_9da]=item;}else{if(this._jsonFileUrl){throw new Error(this.declaredClass+":  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+_9d9+"].  Value collided: ["+_9da+"]");}else{if(this._jsonData){throw new Error(this.declaredClass+":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+_9d9+"].  Value collided: ["+_9da+"]");}}}}}else{this._features["dojo.data.api.Identity"]=Number;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];item[this._storeRefPropName]=this;item[this._itemNumPropName]=i;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){_9d8=item[key];for(var j=0;j<_9d8.length;++j){_9d7=_9d8[j];if(_9d7!==null&&typeof _9d7=="object"){if(("_type" in _9d7)&&("_value" in _9d7)){var type=_9d7._type;var _9db=this._datatypeMap[type];if(!_9db){throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+type+"'");}else{if(lang.isFunction(_9db)){_9d8[j]=new _9db(_9d7._value);}else{if(lang.isFunction(_9db.deserialize)){_9d8[j]=_9db.deserialize(_9d7._value);}else{throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");}}}}if(_9d7._reference){var _9dc=_9d7._reference;if(!lang.isObject(_9dc)){_9d8[j]=this._getItemByIdentity(_9dc);}else{for(var k=0;k<this._arrayOfAllItems.length;++k){var _9dd=this._arrayOfAllItems[k],_9de=true;for(var _9df in _9dc){if(_9dd[_9df]!=_9dc[_9df]){_9de=false;}}if(_9de){_9d8[j]=_9dd;}}}if(this.referenceIntegrity){var _9e0=_9d8[j];if(this.isItem(_9e0)){this._addReferenceToMap(_9e0,item,key);}}}else{if(this.isItem(_9d7)){if(this.referenceIntegrity){this._addReferenceToMap(_9d7,item,key);}}}}}}}},_addReferenceToMap:function(_9e1,_9e2,_9e3){},getIdentity:function(item){var _9e4=this._features["dojo.data.api.Identity"];if(_9e4===Number){return item[this._itemNumPropName];}else{var _9e5=item[_9e4];if(_9e5){return _9e5[0];}}return null;},fetchItemByIdentity:function(_9e6){var item,_9e7;if(!this._loadFinished){var self=this;if(this._jsonFileUrl!==this._ccUrl){_99b.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_9e6});}else{this._loadInProgress=true;var _9e8={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _9e9=xhr.get(_9e8);_9e9.addCallback(function(data){var _9ea=_9e6.scope?_9e6.scope:_99b.global;try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;item=self._getItemByIdentity(_9e6.identity);if(_9e6.onItem){_9e6.onItem.call(_9ea,item);}self._handleQueuedFetches();}catch(error){self._loadInProgress=false;if(_9e6.onError){_9e6.onError.call(_9ea,error);}}});_9e9.addErrback(function(_9eb){self._loadInProgress=false;if(_9e6.onError){var _9ec=_9e6.scope?_9e6.scope:_99b.global;_9e6.onError.call(_9ec,_9eb);}});}}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;item=self._getItemByIdentity(_9e6.identity);if(_9e6.onItem){_9e7=_9e6.scope?_9e6.scope:_99b.global;_9e6.onItem.call(_9e7,item);}}}}else{item=this._getItemByIdentity(_9e6.identity);if(_9e6.onItem){_9e7=_9e6.scope?_9e6.scope:_99b.global;_9e6.onItem.call(_9e7,item);}}},_getItemByIdentity:function(_9ed){var item=null;if(this._itemsByIdentity){if(Object.hasOwnProperty.call(this._itemsByIdentity,_9ed)){item=this._itemsByIdentity[_9ed];}}else{if(Object.hasOwnProperty.call(this._arrayOfAllItems,_9ed)){item=this._arrayOfAllItems[_9ed];}}if(item===undefined){item=null;}return item;},getIdentityAttributes:function(item){var _9ee=this._features["dojo.data.api.Identity"];if(_9ee===Number){return null;}else{return [_9ee];}},_forceLoad:function(){var self=this;if(this._jsonFileUrl!==this._ccUrl){_99b.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){var _9ef={url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:true};var _9f0=xhr.get(_9ef);_9f0.addCallback(function(data){try{if(self._loadInProgress!==true&&!self._loadFinished){self._getItemsFromLoadedData(data);self._loadFinished=true;}else{if(self._loadInProgress){throw new Error(this.declaredClass+":  Unable to perform a synchronous load, an async load is in progress.");}}}catch(e){throw e;}});_9f0.addErrback(function(_9f1){throw _9f1;});}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;}}}});lang.extend(_9a2,_9a0);return _9a2;});},"dijit/_PaletteMixin":function(){define(["dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/keys","dojo/_base/lang","dojo/on","./_CssStateMixin","./a11yclick","./focus","./typematic"],function(_9f2,_9f3,_9f4,_9f5,keys,lang,on,_9f6,_9f7,_9f8,_9f9){var _9fa=_9f2("dijit._PaletteMixin",_9f6,{defaultTimeout:500,timeoutChangeRate:0.9,value:"",_selectedCell:-1,tabIndex:"0",cellClass:"dijitPaletteCell",dyeClass:null,_dyeFactory:function(_9fb){var _9fc=typeof this.dyeClass=="string"?lang.getObject(this.dyeClass):this.dyeClass;return new _9fc(_9fb);},_preparePalette:function(_9fd,_9fe){this._cells=[];var url=this._blankGif;this.own(on(this.gridNode,_9f7,lang.hitch(this,"_onCellClick")));for(var row=0;row<_9fd.length;row++){var _9ff=_9f5.create("tr",{tabIndex:"-1",role:"row"},this.gridNode);for(var col=0;col<_9fd[row].length;col++){var _a00=_9fd[row][col];if(_a00){var _a01=this._dyeFactory(_a00,row,col,_9fe[_a00]);var _a02=_9f5.create("td",{"class":this.cellClass,tabIndex:"-1",title:_9fe[_a00],role:"gridcell"},_9ff);_a01.fillCell(_a02,url);_a02.idx=this._cells.length;this._cells.push({node:_a02,dye:_a01});}}}this._xDim=_9fd[0].length;this._yDim=_9fd.length;var _a03={UP_ARROW:-this._xDim,DOWN_ARROW:this._xDim,RIGHT_ARROW:this.isLeftToRight()?1:-1,LEFT_ARROW:this.isLeftToRight()?-1:1};for(var key in _a03){this.own(_9f9.addKeyListener(this.domNode,{keyCode:keys[key],ctrlKey:false,altKey:false,shiftKey:false},this,function(){var _a04=_a03[key];return function(_a05){this._navigateByKey(_a04,_a05);};}(),this.timeoutChangeRate,this.defaultTimeout));}},postCreate:function(){this.inherited(arguments);this._setCurrent(this._cells[0].node);},focus:function(){_9f8.focus(this._currentFocus);},_onCellClick:function(evt){var _a06=evt.target;while(_a06.tagName!="TD"){if(!_a06.parentNode||_a06==this.gridNode){return;}_a06=_a06.parentNode;}var _a07=this._getDye(_a06).getValue();this._setCurrent(_a06);_9f8.focus(_a06);this._setValueAttr(_a07,true);evt.stopPropagation();evt.preventDefault();},_setCurrent:function(node){if("_currentFocus" in this){_9f3.set(this._currentFocus,"tabIndex","-1");}this._currentFocus=node;if(node){_9f3.set(node,"tabIndex",this.tabIndex);}},_setValueAttr:function(_a08,_a09){if(this._selectedCell>=0){_9f4.remove(this._cells[this._selectedCell].node,this.cellClass+"Selected");}this._selectedCell=-1;if(_a08){for(var i=0;i<this._cells.length;i++){if(_a08==this._cells[i].dye.getValue()){this._selectedCell=i;_9f4.add(this._cells[i].node,this.cellClass+"Selected");break;}}}this._set("value",this._selectedCell>=0?_a08:null);if(_a09||_a09===undefined){this.onChange(_a08);}},onChange:function(){},_navigateByKey:function(_a0a,_a0b){if(_a0b==-1){return;}var _a0c=this._currentFocus.idx+_a0a;if(_a0c<this._cells.length&&_a0c>-1){var _a0d=this._cells[_a0c].node;this._setCurrent(_a0d);this.defer(lang.hitch(_9f8,"focus",_a0d));}},_getDye:function(cell){return this._cells[cell.idx].dye;}});return _9fa;});},"esriviewer/base/Configurable":function(){define(["dojo/_base/declare","dojo/_base/xhr","dojo/_base/lang","./DataLoaderSupport"],function(_a0e,xhr,lang,_a0f){return _a0e([_a0f],{configUrl:"",loadConfig:function(){xhr.get({url:this.configUrl,handleAs:"json",load:lang.hitch(this,this.handleConfigLoaded),error:lang.hitch(this,this.handleConfigLoadError)});},loadProxiedConfig:function(){this.loadProxiedJson(this.configUrl,lang.hitch(this,this.handleConfigLoaded),lang.hitch(this,this.handleConfigLoadError));},handleConfigLoaded:function(_a10){},handleConfigLoadError:function(err){}});});},"esriviewer/util/ViewerUtils":function(){define(["dojo/_base/declare","dojo/keys","dojo/_base/lang","dojo/dom-style","dojox/uuid/Uuid","dojox/uuid/generateTimeBasedUuid","dojo/Deferred","dojo/topic","esri/request"],function(_a11,keys,lang,_a12,Uuid,_a13,_a14,_a15,_a16){return _a11([],{isDebug:false,constructor:function(_a17){this.html5UploadSupported=window.File&&window.FileReader&&window.FileList&&window.Blob;lang.mixin(this,_a17||{});Uuid.setGenerator(_a13);},isHtml5FileUploadSupported:function(){return this.html5UploadSupported;},debug:function(_a18){if(this.isDebug){this.log(_a18,VIEWER_GLOBALS.LOG_TYPE.INFO);}},log:function(_a19,type){if(_a19==null||_a19===""){return;}_a15.publish(VIEWER_GLOBALS.EVENTS.LOGGING.ADD,_a19,type);},handleContainerMoved:function(_a1a,_a1b){var _a1c=false;var _a1d=false;if(_a1b.l<3){_a12.set(_a1a.node,"left","3px");_a1c=true;}var _a1e=(VIEWER_GLOBALS.WINDOW&&VIEWER_GLOBALS.WINDOW.TOP_POSITION_MOVE_OFFSET)?(VIEWER_GLOBALS.WINDOW.TOP_POSITION_MOVE_OFFSET):3;if(_a1b.t<_a1e){_a12.set(_a1a.node,"top",_a1e+"px");_a1d=true;}if(_a1c&&_a1d){return;}var _a1f=dijit.getViewport();if(!_a1c){var _a20=_a12.get(_a1a.node,"width");var _a21=_a12.get(_a1a.node,"left");var _a22=_a21+_a20;if(_a22>(_a1f.w-3)){_a12.set(_a1a.node,"left",(_a1f.w-_a20-3)+"px");}}if(!_a1d){var _a23=_a12.get(_a1a.node,"height");var _a24=_a12.get(_a1a.node,"top");var _a25=_a24+_a23;if(_a25>(_a1f.h-3)){_a12.set(_a1a.node,"top",(_a1f.h-_a23-5)+"px");}}},generateUUID:function(){var uuid=new Uuid();return uuid.toString();},getTimeStamp:function(){var date=new Date();var _a26=date.getHours();if(_a26<12){if(_a26==0){_a26=12;}}else{if(_a26!=12){_a26=_a26-12;}}_a26=_a26.toString();if(_a26.length<2){_a26="0"+_a26;}var _a27=date.getMinutes().toString();if(_a27.length<2){_a27="0"+_a27;}var _a28=date.getSeconds().toString();if(_a28.length<2){_a28="0"+_a28;}return _a26+":"+_a27+":"+_a28;},sendJsonPQuery:function(url,_a29,_a2a,_a2b,_a2c){if(_a2b==null){_a2b=lang.hitch(this,function(_a2d){var msg="Could not resource : "+url+". Please verify URL is accessible.";VIEWER_UTILS.log(msg,VIEWER_GLOBALS.LOG_TYPE.ERROR);_a15.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,msg);});}if(_a2c==null){_a2c="callback";}var _a2e={callbackParamName:_a2c,content:_a29,url:url};_a16(_a2e).then(_a2a,_a2b);},isEnterKey:function(e){return e.keyCode==keys.ENTER;},joinUrl:function(url,_a2f){var _a30=url.lastIndexOf("/")==url.length-1;if(!_a30){url+="/";}if(_a2f[0]==="/"){_a2f=_a2f.substring(1);}return url+_a2f;},getLayerInfoFromService:function(_a31,_a32,_a33,_a34){if(_a34==null){_a34="callback";}var _a35=lang.hitch(this,function(_a36){var msg="could not load layer from service: "+_a37;VIEWER_UTILS.log(msg,VIEWER_GLOBALS.LOG_TYPE.ERROR);_a15.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,msg);});if(_a31!=null&&_a32!=null&&_a33){var _a37=_a31+"/"+_a32;}var _a38={callbackParamName:_a34,content:{f:"json"},url:_a37};_a16(_a38).then(_a33,_a35);},endsWith:function(_a39,_a3a){var _a3b=_a39.lastIndexOf(_a3a);return (_a3b!=-1)&&(_a3b+_a3a.length==_a39.length);},getFileExtension:function(_a3c){var _a3d=_a3c.lastIndexOf(".");if(_a3d<0||_a3d===_a3c.length-1){return "";}return _a3c.substr(_a3d+1);},getFileExtensionLower:function(_a3e){return this.getFileExtension(_a3e).toLowerCase();},getServiceTypeFromUrl:function(url){if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER;}else{if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER;}else{if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GP_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GP_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.GP_SERVER;}else{if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GLOBE_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GLOBE_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.GLOBE_SERVER;}else{if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GEOCODE_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GEOCODE_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.GEOCODE_SERVER;}else{if(REG_EXP_UTILS.isKMLExtension(url)){return VIEWER_GLOBALS.SERVICE_TYPES.KML;}else{if(REG_EXP_UTILS.isFeatureLayer(url)){return VIEWER_GLOBALS.SERVICE_TYPES.FEATURE_SERVER;}else{return null;}}}}}}}},getServiceDescription:function(_a3f,_a40,_a41,_a42){if(_a42==null){_a42="callback";}if(_a41==null){_a41=lang.hitch(this,function(_a43){var msg="Could not load service description for : "+_a3f+". Please verify service is online.";});}if(_a3f!=null&&_a40){var _a44={callbackParamName:_a42,content:{f:"json"},url:_a3f};_a16(_a44).then(_a40,_a41);}},getLayerNameFromLayer:function(_a45){if(_a45.layerAliasName!=null&&_a45.layerAliasName!=""){return _a45.layerAliasName;}else{if(_a45.name!=null&&_a45.name!=""){return _a45.name;}else{if(_a45.id!=null){return _a45.id;}else{if(_a45.url!=null){return _a45.url;}}}}return "Layer";},getLabelForEsriUnit:function(_a46){if(_a46===VIEWER_GLOBALS.ESRI_UNITS.METERS){return "meters";}else{if(_a46===VIEWER_GLOBALS.ESRI_UNITS.FEET){return "feet";}else{if(_a46===VIEWER_GLOBALS.ESRI_UNITS.YARDS){return "yards";}else{if(_a46===VIEWER_GLOBALS.ESRI_UNITS.MILES){return "miles";}else{if(_a46===VIEWER_GLOBALS.ESRI_UNITS.NAUTICAL_MILES){return "nautical miles";}else{if(_a46===VIEWER_GLOBALS.ESRI_UNITS.MILLIMETERS){return "millimeters";}else{if(_a46===VIEWER_GLOBALS.ESRI_UNITS.CENTIMETERS){return "centimeters";}else{if(_a46===VIEWER_GLOBALS.ESRI_UNITS.DECIMETERS){return "decimeters";}else{if(_a46===VIEWER_GLOBALS.ESRI_UNITS.KILOMETERS){return "kilometers";}else{if(_a46===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_MILES){return "square miles";}else{if(_a46===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_METERS){return "square meters";}else{if(_a46===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_KILOMETERS){return "square kilometers";}else{if(_a46===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_ARES){return "square ares";}else{if(_a46===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_HECTARES){return "square hectares";}else{if(_a46===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_CENTIMETERS){return "square centimeters";}else{if(_a46===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_DECIMETERS){return "square decimeters";}else{if(_a46===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_FEET){return "square feet";}else{if(_a46===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_INCHES){return "square inches";}else{if(_a46===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_MILLIMETERS){return "square millimeters";}else{if(_a46===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_YARDS){return "square yards";}else{if(_a46===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_UNKNOWN){return "square unknown";}else{if(_a46===VIEWER_GLOBALS.ESRI_UNITS.DECIMAL_DEGREES){return "decimal degrees";}}}}}}}}}}}}}}}}}}}}}}return "unknown";},getShortLabelForEsriUnit:function(_a47){if(_a47===VIEWER_GLOBALS.ESRI_UNITS.METERS){return "m";}else{if(_a47===VIEWER_GLOBALS.ESRI_UNITS.FEET){return "f";}else{if(_a47===VIEWER_GLOBALS.ESRI_UNITS.YARDS){return "y";}else{if(_a47===VIEWER_GLOBALS.ESRI_UNITS.MILES){return "M";}else{if(_a47===VIEWER_GLOBALS.ESRI_UNITS.NAUTICAL_MILES){return "NM";}else{if(_a47===VIEWER_GLOBALS.ESRI_UNITS.MILLIMETERS){return "mm";}else{if(_a47===VIEWER_GLOBALS.ESRI_UNITS.CENTIMETERS){return "cm";}else{if(_a47===VIEWER_GLOBALS.ESRI_UNITS.DECIMETERS){return "dm";}else{if(_a47===VIEWER_GLOBALS.ESRI_UNITS.KILOMETERS){return "KM";}else{if(_a47===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_MILES){return "square miles";}else{if(_a47===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_METERS){return "Sq m";}else{if(_a47===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_KILOMETERS){return "Sq KM";}else{if(_a47===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_ARES){return "Sq Ares";}else{if(_a47===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_HECTARES){return "Sq Hectares";}else{if(_a47===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_CENTIMETERS){return "Sq cm";}else{if(_a47===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_DECIMETERS){return "Sq dm";}else{if(_a47===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_FEET){return "Sq f";}else{if(_a47===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_INCHES){return "Sq in";}else{if(_a47===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_MILLIMETERS){return "Sq mm";}else{if(_a47===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_YARDS){return "Sq y";}else{if(_a47===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_UNKNOWN){return "Sq unknown";}else{if(_a47===VIEWER_GLOBALS.ESRI_UNITS.DECIMAL_DEGREES){return "Dec. Deg.";}}}}}}}}}}}}}}}}}}}}}}return "Unknown";},getFieldTypeFromLayer:function(_a48,_a49){var _a4a=_a49.fields?_a49.fields:(_a49.serviceDescription?_a49.serviceDescription.fields:[]);if(_a49&&_a4a&&_a48){for(var i=0;i<_a4a.length;i++){if(_a4a[i].alias===_a48||_a4a[i].name===_a48){return _a4a[i].type;}}}return null;},getFileNameFromAtEndOfUrl:function(_a4b){if(_a4b==null||_a4b.lastIndexOf("/")<0){return "";}_a4b=_a4b.substring(0,(_a4b.indexOf("#")==-1)?_a4b.length:_a4b.indexOf("#"));_a4b=_a4b.substring(0,(_a4b.indexOf("?")==-1)?_a4b.length:_a4b.indexOf("?"));return _a4b.substring(_a4b.lastIndexOf("/")+1,_a4b.length);},getFileNameFromAtEndOfPath:function(_a4c){if(_a4c==null||_a4c.lastIndexOf("\\")<0){return "";}return _a4c.substring(_a4c.lastIndexOf("\\")+1,_a4c.length);},_intSorter:function(a,b){return a-b;},sortIntegerArray:function(arr){return arr.sort(this._intSorter);},validateUrl:function(url){var def=new _a14();def.resolve(true);return def;},trim:function(str){return str.replace(/^\s*/,"").replace(/\s*$/,"");},getLayerUniqueId:function(_a4d){if(_a4d==null){return null;}if(lang.isString(_a4d)){return _a4d.toLowerCase();}var id;if(_a4d.url){id=_a4d.url.toLowerCase();}else{if(_a4d.id!=null){id=_a4d.id;}else{id="lyr_"+VIEWER_UTILS.generateUUID();_a4d.id=id;}}return id;}});});},"esriviewer/map/base/MapExtentTools":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","esri/geometry/Extent","esri/geometry/Point"],function(_a4e,_a4f,lang,_a50,_a51){return _a4e([],{maxClientZoom:null,extentArray:[],currentExtentIdx:0,extentActionInProgress:false,constructor:function(_a52){lang.mixin(this,_a52);this.initListeners();},initListeners:function(){_a4f.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.CHANGED,lang.hitch(this,this.handleBasemapChanged));_a4f.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PAN_TO,lang.hitch(this,this.panToPoint));_a4f.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_CENTER,lang.hitch(this,this.handleGetCenter));_a4f.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,lang.hitch(this,this.handleGetExtent));_a4f.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_LEVEL,lang.hitch(this,this.handleGetLevel));_a4f.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_LEVEL,lang.hitch(this,this.handleSetLevel));_a4f.subscribe(VIEWER_GLOBALS.EVENTS.MAP.DIMENSIONS.GET,lang.hitch(this,this.handleGetMapDimensions));_a4f.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,lang.hitch(this,this.setMapExtent));_a4f.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LEVEL.GET_LEVEL_COUNT,lang.hitch(this,this.getZoomLevelCount));_a4f.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_PREV_EXTENT,lang.hitch(this,this.handleGotoPrevExtent));_a4f.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_NEXT_EXTENT,lang.hitch(this,this.handleGotoNextExtent));_a4f.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.CHANGED,lang.hitch(this,this.handleRecordNewMapExtent));_a4f.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_INITIAL_EXTENT,lang.hitch(this,this.handleGotoInitialExtent));_a4f.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_LAST_EXTENT,lang.hitch(this,this.handleGotoLastExtent));},handleBasemapChanged:function(){var _a53=this.getZoomLevelCount();_a4f.publish(VIEWER_GLOBALS.EVENTS.MAP.LEVEL.LEVEL_COUNT_CHANGED,_a53);},getZoomLevelCount:function(_a54){var _a55=null;if(lang.isObject(this.map.__tileInfo)&&lang.isArray(this.map.__tileInfo.lods)){_a55=this.map.__tileInfo.lods.length-1;}var _a56={count:_a55,current:this.map.getLevel()};if(_a54!=null&&lang.isFunction(_a54)){_a54(_a56);}else{return _a56;}return null;},setMapExtent:function(_a57){if(_a57!=null&&_a57 instanceof _a50){if(_a57.spatialReference.wkid==this.map.spatialReference.wkid){this.map.setExtent(_a57);}else{_a4f.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_MAP_SR,_a57,lang.hitch(this,function(_a58){if(lang.isArray(_a58)&&_a58.length>0){if(this.maxClientZoom!=null){this.map.setLevel(this.maxClientZoom);}this.map.setExtent(_a58[0]);}}));}}},handleGetMapDimensions:function(_a59){if(_a59!=null&&lang.isFunction(_a59)){_a59({width:this.map.width,height:this.map.height});}},handleMapExtentChanged:function(){this.mapDisplayWidgets.showScale();},panToPoint:function(_a5a,_a5b){var _a5c;if(!(_a5a instanceof _a51)){return;}if(_a5b!=null&&lang.isObject(_a5b)){if(_a5b.zoomTo!=null&&_a5b.zoomTo===false){this.map.centerAt(_a5a);}else{if(_a5b.deepest!=null&&_a5b.deepest==true){if(lang.isObject(this.map.__tileInfo)&&lang.isArray(this.map.__tileInfo.lods)){_a5c=this.map.__tileInfo.lods.length-1;}}else{if(_a5b.zoomLevel!=null&&lang.isObject(this.map.__tileInfo)&&lang.isArray(this.map.__tileInfo.lods)){if(_a5c>=this.map.__tileInfo.lods.length){_a5c=this.map.__tileInfo.lods.length-1;}else{_a5c=_a5b.zoomLevel;}}}if(_a5c!=null){this.map.centerAndZoom(_a5a,_a5c);}}}else{if(this.map.getLevel()<8||this.map.getLevel()>15){_a5c=7;}else{_a5c=this.map.getLevel();}if(this.map.getLevel()==_a5c){this.map.centerAt(_a5a);}else{this.map.centerAndZoom(_a5a,_a5c);}}},handleSetLevel:function(_a5d){if(_a5d<this.map.__tileInfo.lods.length){this.map.setLevel(_a5d);}},handleGetLevel:function(_a5e){if(_a5e==null||!lang.isFunction(_a5e)){return;}_a5e(this.map.getLevel());},handleGetExtent:function(_a5f){if(_a5f==null||!lang.isFunction(_a5f)){return;}_a5f(this.map.extent);},handleGetCenter:function(_a60){if(_a60==null||!lang.isFunction(_a60)){return;}_a60(this.map.extent.getCenter());},handleRecordNewMapExtent:function(){if(arguments&&arguments[0]&&arguments[0].extent){if(!this.extentActionInProgress){if(this.currentExtentIdx<(this.extentArray.length-1)){this.extentArray.splice(this.currentExtentIdx+1,this.extentArray.length-(this.currentExtentIdx+1));}this.extentArray.push(arguments[0].extent);this.currentExtentIdx=this.extentArray.length-1;_a4f.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PREV_EXTENT_EXISTS,(this.currentExtentIdx>0));_a4f.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.NEXT_EXTENT_EXISTS,(this.currentExtentIdx<(this.extentArray.length-1)));}else{this.extentActionInProgress=false;}}},handleGotoPrevExtent:function(){if(this.currentExtentIdx>0){this.currentExtentIdx-=1;this.extentActionInProgress=true;_a4f.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,this.extentArray[this.currentExtentIdx]);_a4f.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PREV_EXTENT_EXISTS,(this.currentExtentIdx>0));_a4f.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.NEXT_EXTENT_EXISTS,(this.currentExtentIdx<(this.extentArray.length-1)));}},handleGotoNextExtent:function(){if(this.currentExtentIdx<this.extentArray.length-1){this.currentExtentIdx+=1;this.extentActionInProgress=true;_a4f.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,this.extentArray[this.currentExtentIdx]);_a4f.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PREV_EXTENT_EXISTS,(this.currentExtentIdx>0));_a4f.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.NEXT_EXTENT_EXISTS,(this.currentExtentIdx<(this.extentArray.length-1)));}},handleGotoInitialExtent:function(){this.currentExtentIdx=0;this.extentActionInProgress=true;_a4f.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,this.extentArray[this.currentExtentIdx]);_a4f.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PREV_EXTENT_EXISTS,(this.currentExtentIdx>0));_a4f.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.NEXT_EXTENT_EXISTS,(this.currentExtentIdx<(this.extentArray.length-1)));},handleGotoLastExtent:function(){this.currentExtentIdx=this.extentArray.length-1;this.extentActionInProgress=true;_a4f.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,this.extentArray[this.currentExtentIdx]);_a4f.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PREV_EXTENT_EXISTS,(this.currentExtentIdx>0));_a4f.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.NEXT_EXTENT_EXISTS,(this.currentExtentIdx<(this.extentArray.length-1)));}});});},"dojox/timing":function(){define(["./timing/_base"],function(_a61){return _a61;});},"esriviewer/util/RegExpUtils":function(){define(["dojo/_base/declare"],function(_a62){return _a62([],{URLRegExp:new RegExp(/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/),xmlExtensionRegExp:new RegExp(/\.xml$/i),jsonExtensionRegExp:new RegExp(/\.json$/i),kmlExtensionRegExp:new RegExp(/\.kml/i),featureLayerRegExp:new RegExp(/\/[0-9]+$/i),dateRegexp:new RegExp(/\d+\/\d+\/\d{4}/),numberRegExp:new RegExp(/^[+-]?\d*\.?\d*$/),numericRegexp:new RegExp(/[^0-9\.]/g),unsignedNumberRegExp:new RegExp(/^\d*\.?\d*$/),mapServiceNameRegExp:new RegExp(/.*\/(.*)\/MapServer\/?$/),geocodeServiceNameRegExp:new RegExp(/.*\/(.*)\/GeocodeServer\/?$/),imageServiceNameRegExp:new RegExp(/.*\/(.*)\/ImageServer\/?$/),globeServiceNameRegExp:new RegExp(/.*\/(.*)\/GlobeServer\/?$/),gpServerServiceNameRegExp:new RegExp(/.*\/(.*)\/GPServer\/?$/),featureServerServiceNameRegExp:new RegExp(/.*\/(.*)\/FeatureServer\/?$/),numberToStringWithCommasRegexp:new RegExp(/\B(?=(\d{3})+(?!\d))/g),whitespaceRegexp:new RegExp(/\s*/g),isUrl:function(_a63){return this.URLRegExp.test(_a63);},isFeatureLayer:function(url){var _a64=url.indexOf("/"+VIEWER_GLOBALS.SERVICE_TYPES.FEATURE_SERVER+"/")>-1;var _a65=url.indexOf("/"+VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER+"/")>-1;if(_a64||_a65){return this.featureLayerRegExp.test(url);}},isXmlExtension:function(_a66){return this.xmlExtensionRegExp.test(_a66);},isJsonExtension:function(_a67){return this.jsonExtensionRegExp.test(_a67);},isKMLExtension:function(_a68){return this.kmlExtensionRegExp.test(_a68);},isDate:function(_a69){return this.dateRegexp.test(_a69);},isNumber:function(_a6a){return this.numberRegExp.test(_a6a);},isUnsignedNumber:function(_a6b){return this.unsignedNumberRegExp.test(_a6b);},stripNonNumeric:function(_a6c){var _a6d=_a6c.toString();var _a6e=false;if(_a6d.length>0&&_a6d[0]==="-"){_a6e=true;}var res=_a6d.replace(this.numericRegexp,"");if(_a6e){res="-"+res;}return res;},stripWhitespace:function(_a6f){return _a6f.toString().replace(this.whitespaceRegexp,"");},getCharacterOccurrenceCount:function(_a70,_a71){return this.getCharacterOccuranceCount(_a70,_a71);},getCharacterOccuranceCount:function(_a72,_a73){return _a73.split(_a72).length-1;},getServiceNameFromUrl:function(url){var type=VIEWER_UTILS.getServiceTypeFromUrl(url);if(type){var _a74=null;if(type==VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER){_a74=this.mapServiceNameRegExp;}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER){_a74=this.imageServiceNameRegExp;}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.GP_SERVER){_a74=this.gpServerServiceNameRegExp;}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.GLOBE_SERVER){_a74=this.globeServiceNameRegExp;}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.FEATURE_SERVER){_a74=this.featureServerServiceNameRegExp;}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.GEOCODE_SERVER){_a74=this.geocodeServiceNameRegExp;}else{return url;}}}}}}var res=_a74.exec(url);if(res!=undefined&&res[1]!=undefined){return res[1].replace("_"," ");}return url;}else{return url;}},numberToStringWithCommas:function(x){var _a75=x.toString().split(".");_a75[0]=_a75[0].replace(this.numberToStringWithCommasRegexp,",");return _a75.join(".");}});});},"esriviewer/ui/draw/DrawWidget":function(){define(["dojo/_base/declare","dojo/text!./template/DrawWidgetTemplate.html","dojo/topic","dojo/_base/lang","../base/UITemplatedWidget","./base/MapDrawSupport","./configure/ConfigureDrawWidget","./base/GraphicsListWidget","./model/DrawWidgetViewModel","./base/GraphicsLocalStorageMixin","./base/UserPersistedGraphicsListWidget","dijit/form/CheckBox","esri/layers/GraphicsLayer","esri/graphic"],function(_a76,_a77,_a78,lang,_a79,_a7a,_a7b,_a7c,_a7d,_a7e,_a7f,_a80,_a81,_a82){return _a76([_a79,_a7a,_a7e],{bindingsApplied:false,templateString:_a77,constructor:function(){this.freehandActive=false;},initListeners:function(){this.inherited(arguments);_a78.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.GET_USER_GRAPHICS,lang.hitch(this,this.getUserGraphics));},postCreate:function(){this.viewModel=new _a7d();this.viewModel.drawVisible.subscribe(lang.hitch(this,this._handleDrawVisibilityChanged));this.viewModel.configurationVisible.subscribe(lang.hitch(this,this._handleConfigurationVisibilityChanged));this.viewModel.graphicsListVisible.subscribe(lang.hitch(this,this._handleGraphicsListVisibilityChanged));this.viewModel.userPersistedGraphicsVisible.subscribe(lang.hitch(this,this._handleUserPersistedVisibilityChanged));this.viewModel.showUserPersistedGraphicsIcon(this.localStoragePersistSupported);var _a83=false;for(var key in this.persistedUserGraphics){_a83=true;break;}this.viewModel.showSavedGraphicsTab(_a83);this.applyBindings();this._createConfigureDrawWidget();this._createGraphicsListWidget();if(this.localStoragePersistSupported){this._createUserPersistedGraphicsListWidget();}this.inherited(arguments);this.drawGraphicsLayer=_a81();_a78.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_EXTERNAL_MANAGED_LAYER,this.drawGraphicsLayer);_a78.publish(VIEWER_GLOBALS.EVENTS.DRAW.DRAW_GRAPHICS_LAYER_CREATED);},_handleConfigurationVisibilityChanged:function(_a84){this._handleContentAnimation(_a84,this.drawWindowConfigureContainer);},_handleGraphicsListVisibilityChanged:function(_a85){this._handleContentAnimation(_a85,this.drawWindowGraphicsListContainer);},_handleUserPersistedVisibilityChanged:function(_a86){this._handleContentAnimation(_a86,this.drawWindowUserPersistedGraphicsContainer);},_handleDrawVisibilityChanged:function(_a87){this._handleContentAnimation(_a87,this.drawWindowInputIconsContainer);},applyBindings:function(){if(!this.bindingsApplied){this._applyBindings();}},_applyBindings:function(){if(!this.bindingsApplied){ko.applyBindings(this.viewModel,this.domNode);this.bindingsApplied=true;}},_createConfigureDrawWidget:function(){if(this.configureDrawWidget==null){this.configureDrawWidget=new _a7b();this.configureDrawWidget.placeAt(this.drawWindowConfigureContainer);this.configureDrawWidget.on("pointSymbolChanged",lang.hitch(this,this.handlePointSymbolChanged));this.configureDrawWidget.on("lineSymbolChanged",lang.hitch(this,this.handleLineSymbolChanged));this.configureDrawWidget.on("polygonSymbolChanged",lang.hitch(this,this.handlePolygonSymbolChanged));this.configureDrawWidget.on("rectangleSymbolChanged",lang.hitch(this,this.handleRectangleSymbolChanged));this.configureDrawWidget.on("textSymbolChanged",lang.hitch(this,this.handleTextSymbolChanged));this.pointSymbol=this.configureDrawWidget.pointConfigurationWidget.getSymbol();this.lineSymbol=this.configureDrawWidget.lineConfigurationWidget.getSymbol();this.envelopeSymbol=this.configureDrawWidget.rectangleConfigurationWidget.getSymbol();this.textSymbol=this.configureDrawWidget.configureTextWidget.getSymbol();this.polygonSymbol=this.configureDrawWidget.configurePolygonWidget.getSymbol();}},handlePointSymbolChanged:function(_a88){this.pointSymbol=_a88;},handleLineSymbolChanged:function(_a89){this.lineSymbol=_a89;},handlePolygonSymbolChanged:function(_a8a){this.polygonSymbol=_a8a;},handleRectangleSymbolChanged:function(_a8b){this.envelopeSymbol=_a8b;},handleTextSymbolChanged:function(_a8c){this.textSymbol=_a8c;},_createUserPersistedGraphicsListWidget:function(){if(this.userPersistedGraphicsListWidget==null){this.userPersistedGraphicsListWidget=new _a7f();this.userPersistedGraphicsListWidget.placeAt(this.drawWindowUserPersistedGraphicsContainer);this.userPersistedGraphicsListWidget.on("removeUserPersistedGraphics",lang.hitch(this,this.removeUserPersistedGraphics));this.userPersistedGraphicsListWidget.on("addUserPersistedGraphicsToMap",lang.hitch(this,this.addUserPersistedGraphicsToMap));this.userPersistedGraphicsListWidget.addExistingPersistedGraphicsItems(this.persistedUserGraphics);}},_createGraphicsListWidget:function(){if(this.graphicsListWidget==null){this.graphicsListWidget=new _a7c({saveSupported:this.localStoragePersistSupported});this.graphicsListWidget.placeAt(this.drawWindowGraphicsListContainer);this.graphicsListWidget.viewModel.hasGraphics.subscribe(lang.hitch(this,this._handleCheckForExistingGraphics));this.graphicsListWidget.on("removeAllGraphics",lang.hitch(this,this.removeAllGraphics));this.graphicsListWidget.on("removeGraphic",lang.hitch(this,this.removeGraphic));this.graphicsListWidget.on("saveGraphics",lang.hitch(this,this.saveUserGraphics));}},saveUserGraphics:function(_a8d,_a8e){var _a8f=this.persistUserGraphics(_a8d,_a8e);if(_a8f){this.userPersistedGraphicsListWidget.addUserPersistedGraphics(_a8f);this.viewModel.showSavedGraphicsTab(true);}},addUserPersistedGraphicsToMap:function(_a90){if(_a90==null||!lang.isObject(_a90)){return;}if(_a90.graphics==null||!lang.isArray(_a90.graphics)){return;}var _a91;for(var i=0;i<_a90.graphics.length;i++){_a91=_a90.graphics[i].graphic;var _a92=new _a82(_a91);var _a93={label:_a90.graphics[i].label,graphic:_a92};this.onAnnotationCreated(_a93);}},removeUserPersistedGraphics:function(_a94){var _a95=this.deleteUserPersistedGraphics(_a94);this.viewModel.showSavedGraphicsTab(_a95);},removeAllGraphics:function(){this.drawGraphicsLayer.clear();},removeGraphic:function(_a96){if(_a96){this.drawGraphicsLayer.remove(_a96);}},getUserGraphics:function(_a97){if(_a97&&lang.isFunction(_a97)){_a97(this.graphicsListWidget.getGraphics());}},_handleCheckForExistingGraphics:function(_a98){if(!_a98){this.viewModel.graphicsListTabVisible(false);this.viewModel.showDraw();}else{this.viewModel.graphicsListTabVisible(true);}},handlePointDrawClick:function(){var _a99=this.viewModel.pointActive();this.clearDraw();if(!_a99){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT);this.viewModel.setDrawMode(this.viewModel.drawModes.point);}},handleTextDrawClick:function(){var _a9a=this.viewModel.textActive();this.clearDraw();if(!_a9a){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT);this.viewModel.setDrawMode(this.viewModel.drawModes.text);}},handleLineDrawClick:function(){var _a9b=this.viewModel.lineActive();this.clearDraw();if(!_a9b){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_LINE);this.viewModel.setDrawMode(this.viewModel.drawModes.line);}},handlePolylineDrawClick:function(){var _a9c=this.viewModel.polylineActive();this.clearDraw();if(!_a9c){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE);this.viewModel.setDrawMode(this.viewModel.drawModes.polyline);}},handlePolygonDrawClick:function(){var _a9d=this.viewModel.polygonActive();this.clearDraw();if(!_a9d){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON);this.viewModel.setDrawMode(this.viewModel.drawModes.polygon);}},handleRectangleDrawClick:function(){var _a9e=this.viewModel.rectangleActive();this.clearDraw();if(!_a9e){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_RECTANGLE);this.viewModel.setDrawMode(this.viewModel.drawModes.rectangle);}},clearDraw:function(){this.inherited(arguments);this.viewModel.setDrawMode(null);_a78.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.DRAW_CANCEL);},geometryAdded:function(_a9f){this.inherited(arguments);var _aa0=this.viewModel.getCurrentDrawType();this.clearDraw();if(_aa0!=null){if(_aa0===this.viewModel.drawModes.rectangle){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_RECTANGLE);this.viewModel.setDrawMode(this.viewModel.drawModes.rectangle);}if(_aa0===this.viewModel.drawModes.point){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT);this.viewModel.setDrawMode(this.viewModel.drawModes.point);}if(_aa0===this.viewModel.drawModes.polygon){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON);this.viewModel.setDrawMode(this.viewModel.drawModes.polygon);}if(_aa0===this.viewModel.drawModes.polyline){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE);this.viewModel.setDrawMode(this.viewModel.drawModes.polyline);}if(_aa0===this.viewModel.drawModes.line){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_LINE);this.viewModel.setDrawMode(this.viewModel.drawModes.line);}if(_aa0===this.viewModel.drawModes.text){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT);this.viewModel.setDrawMode(this.viewModel.drawModes.text);}}},toggleFreehand:function(){this.freeHandDrawCheckbox.set("checked",!this.freeHandDrawCheckbox.get("checked"));},handleFreehandToggled:function(){this.freehandActive=this.freeHandDrawCheckbox.get("checked");var _aa1=this.viewModel.getCurrentDrawType();if(_aa1===this.viewModel.drawModes.polygon){this.clearDraw();this.viewModel.setDrawMode(this.viewModel.drawModes.polygon);this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON);}if(_aa1===this.viewModel.drawModes.polyline){this.clearDraw();this.viewModel.setDrawMode(this.viewModel.drawModes.polyline);this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE);}},onAnnotationCreated:function(_aa2){this.inherited(arguments);this.graphicsListWidget.addGraphic(_aa2);this.drawGraphicsLayer.add(_aa2.graphic);},hidePopups:function(){if(this.graphicsListWidget){this.graphicsListWidget.hidePopups();}}});});},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(dojo,lang,_aa3,_aa4){var _aa5={};lang.setObject("dojo.colors",_aa5);var _aa6=function(m1,m2,h){if(h<0){++h;}if(h>1){--h;}var h6=6*h;if(h6<1){return m1+(m2-m1)*h6;}if(2*h<1){return m2;}if(3*h<2){return m1+(m2-m1)*(2/3-h)*6;}return m1;};dojo.colorFromRgb=_aa3.fromRgb=function(_aa7,obj){var m=_aa7.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(m){var c=m[2].split(/\s*,\s*/),l=c.length,t=m[1],a;if((t=="rgb"&&l==3)||(t=="rgba"&&l==4)){var r=c[0];if(r.charAt(r.length-1)=="%"){a=_aa4.map(c,function(x){return parseFloat(x)*2.56;});if(l==4){a[3]=c[3];}return _aa3.fromArray(a,obj);}return _aa3.fromArray(c,obj);}if((t=="hsl"&&l==3)||(t=="hsla"&&l==4)){var H=((parseFloat(c[0])%360)+360)%360/360,S=parseFloat(c[1])/100,L=parseFloat(c[2])/100,m2=L<=0.5?L*(S+1):L+S-L*S,m1=2*L-m2;a=[_aa6(m1,m2,H+1/3)*256,_aa6(m1,m2,H)*256,_aa6(m1,m2,H-1/3)*256,1];if(l==4){a[3]=c[3];}return _aa3.fromArray(a,obj);}}return null;};var _aa8=function(c,low,high){c=Number(c);return isNaN(c)?high:c<low?low:c>high?high:c;};_aa3.prototype.sanitize=function(){var t=this;t.r=Math.round(_aa8(t.r,0,255));t.g=Math.round(_aa8(t.g,0,255));t.b=Math.round(_aa8(t.b,0,255));t.a=_aa8(t.a,0,1);return this;};_aa5.makeGrey=_aa3.makeGrey=function(g,a){return _aa3.fromArray([g,g,g,a]);};lang.mixin(_aa3.named,{"aliceblue":[240,248,255],"antiquewhite":[250,235,215],"aquamarine":[127,255,212],"azure":[240,255,255],"beige":[245,245,220],"bisque":[255,228,196],"blanchedalmond":[255,235,205],"blueviolet":[138,43,226],"brown":[165,42,42],"burlywood":[222,184,135],"cadetblue":[95,158,160],"chartreuse":[127,255,0],"chocolate":[210,105,30],"coral":[255,127,80],"cornflowerblue":[100,149,237],"cornsilk":[255,248,220],"crimson":[220,20,60],"cyan":[0,255,255],"darkblue":[0,0,139],"darkcyan":[0,139,139],"darkgoldenrod":[184,134,11],"darkgray":[169,169,169],"darkgreen":[0,100,0],"darkgrey":[169,169,169],"darkkhaki":[189,183,107],"darkmagenta":[139,0,139],"darkolivegreen":[85,107,47],"darkorange":[255,140,0],"darkorchid":[153,50,204],"darkred":[139,0,0],"darksalmon":[233,150,122],"darkseagreen":[143,188,143],"darkslateblue":[72,61,139],"darkslategray":[47,79,79],"darkslategrey":[47,79,79],"darkturquoise":[0,206,209],"darkviolet":[148,0,211],"deeppink":[255,20,147],"deepskyblue":[0,191,255],"dimgray":[105,105,105],"dimgrey":[105,105,105],"dodgerblue":[30,144,255],"firebrick":[178,34,34],"floralwhite":[255,250,240],"forestgreen":[34,139,34],"gainsboro":[220,220,220],"ghostwhite":[248,248,255],"gold":[255,215,0],"goldenrod":[218,165,32],"greenyellow":[173,255,47],"grey":[128,128,128],"honeydew":[240,255,240],"hotpink":[255,105,180],"indianred":[205,92,92],"indigo":[75,0,130],"ivory":[255,255,240],"khaki":[240,230,140],"lavender":[230,230,250],"lavenderblush":[255,240,245],"lawngreen":[124,252,0],"lemonchiffon":[255,250,205],"lightblue":[173,216,230],"lightcoral":[240,128,128],"lightcyan":[224,255,255],"lightgoldenrodyellow":[250,250,210],"lightgray":[211,211,211],"lightgreen":[144,238,144],"lightgrey":[211,211,211],"lightpink":[255,182,193],"lightsalmon":[255,160,122],"lightseagreen":[32,178,170],"lightskyblue":[135,206,250],"lightslategray":[119,136,153],"lightslategrey":[119,136,153],"lightsteelblue":[176,196,222],"lightyellow":[255,255,224],"limegreen":[50,205,50],"linen":[250,240,230],"magenta":[255,0,255],"mediumaquamarine":[102,205,170],"mediumblue":[0,0,205],"mediumorchid":[186,85,211],"mediumpurple":[147,112,219],"mediumseagreen":[60,179,113],"mediumslateblue":[123,104,238],"mediumspringgreen":[0,250,154],"mediumturquoise":[72,209,204],"mediumvioletred":[199,21,133],"midnightblue":[25,25,112],"mintcream":[245,255,250],"mistyrose":[255,228,225],"moccasin":[255,228,181],"navajowhite":[255,222,173],"oldlace":[253,245,230],"olivedrab":[107,142,35],"orange":[255,165,0],"orangered":[255,69,0],"orchid":[218,112,214],"palegoldenrod":[238,232,170],"palegreen":[152,251,152],"paleturquoise":[175,238,238],"palevioletred":[219,112,147],"papayawhip":[255,239,213],"peachpuff":[255,218,185],"peru":[205,133,63],"pink":[255,192,203],"plum":[221,160,221],"powderblue":[176,224,230],"rosybrown":[188,143,143],"royalblue":[65,105,225],"saddlebrown":[139,69,19],"salmon":[250,128,114],"sandybrown":[244,164,96],"seagreen":[46,139,87],"seashell":[255,245,238],"sienna":[160,82,45],"skyblue":[135,206,235],"slateblue":[106,90,205],"slategray":[112,128,144],"slategrey":[112,128,144],"snow":[255,250,250],"springgreen":[0,255,127],"steelblue":[70,130,180],"tan":[210,180,140],"thistle":[216,191,216],"tomato":[255,99,71],"turquoise":[64,224,208],"violet":[238,130,238],"wheat":[245,222,179],"whitesmoke":[245,245,245],"yellowgreen":[154,205,50]});return _aa3;});},"dojox/uuid/Uuid":function(){define(["dojo/_base/lang","./_base"],function(dojo,uuid){dojox.uuid.Uuid=function(_aa9){this._uuidString=dojox.uuid.NIL_UUID;if(_aa9){dojox.uuid.assert(dojo.isString(_aa9));this._uuidString=_aa9.toLowerCase();dojox.uuid.assert(this.isValid());}else{var _aaa=dojox.uuid.Uuid.getGenerator();if(_aaa){this._uuidString=_aaa();dojox.uuid.assert(this.isValid());}}};dojox.uuid.Uuid.compare=function(_aab,_aac){var _aad=_aab.toString();var _aae=_aac.toString();if(_aad>_aae){return 1;}if(_aad<_aae){return -1;}return 0;};dojox.uuid.Uuid.setGenerator=function(_aaf){dojox.uuid.assert(!_aaf||dojo.isFunction(_aaf));dojox.uuid.Uuid._ourGenerator=_aaf;};dojox.uuid.Uuid.getGenerator=function(){return dojox.uuid.Uuid._ourGenerator;};dojox.uuid.Uuid.prototype.toString=function(){return this._uuidString;};dojox.uuid.Uuid.prototype.compare=function(_ab0){return dojox.uuid.Uuid.compare(this,_ab0);};dojox.uuid.Uuid.prototype.isEqual=function(_ab1){return (this.compare(_ab1)==0);};dojox.uuid.Uuid.prototype.isValid=function(){return dojox.uuid.isValid(this);};dojox.uuid.Uuid.prototype.getVariant=function(){return dojox.uuid.getVariant(this);};dojox.uuid.Uuid.prototype.getVersion=function(){if(!this._versionNumber){this._versionNumber=dojox.uuid.getVersion(this);}return this._versionNumber;};dojox.uuid.Uuid.prototype.getNode=function(){if(!this._nodeString){this._nodeString=dojox.uuid.getNode(this);}return this._nodeString;};dojox.uuid.Uuid.prototype.getTimestamp=function(_ab2){if(!_ab2){_ab2=null;}switch(_ab2){case "string":case String:return this.getTimestamp(Date).toUTCString();break;case "hex":if(!this._timestampAsHexString){this._timestampAsHexString=dojox.uuid.getTimestamp(this,"hex");}return this._timestampAsHexString;break;case null:case "date":case Date:if(!this._timestampAsDate){this._timestampAsDate=dojox.uuid.getTimestamp(this,Date);}return this._timestampAsDate;break;default:dojox.uuid.assert(false,"The getTimestamp() method dojox.uuid.Uuid was passed a bogus returnType: "+_ab2);break;}};return dojox.uuid.Uuid;});},"esriviewer/ui/social/SocialMediaWidgetWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/window","dojo/dom-class","../window/WindowWidget"],function(_ab3,lang,_ab4,_ab5,_ab6,_ab7){return _ab3([_ab7],{defaultPositioning:{x:400,y:125},constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/social/SocialMediaWidget"],lang.hitch(this,function(_ab8){this.socialMediaWidget=new _ab8();this.setContent(this.socialMediaWidget.domNode);this.socialMediaWidget.listenForMapCursor();}));},windowWidth:"400px",windowHeaderText:"Search Social Media",windowIconAltText:"Search Social Media",windowIconClass:"commonIcons16 binoculars",positioningParamName:"socialMedia",postCreate:function(){this.inherited(arguments);_ab6.add(this.windowContent,"socialMediaWindowContent");},initListeners:function(){this.inherited(arguments);this.subscribes.push(_ab4.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.SOCIAL_MEDIA.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_ab4.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.SOCIAL_MEDIA.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_ab4.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.SOCIAL_MEDIA.TOGGLE,lang.hitch(this,this.toggle)));},show:function(){this.inherited(arguments);if(this.socialMediaWidget){this.socialMediaWidget.listenForMapCursor();}},hide:function(){this.inherited(arguments);if(this.socialMediaWidget){this.socialMediaWidget.stopMapCursorListener();}}});});},"esriviewer/ui/toolbar/base/model/BasemapsListingViewModel":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic"],function(_ab9,lang,_aba){return _ab9([],{constructor:function(){this.basemapKeyLookup={};this.visible=ko.observable(false);this.basemaps=ko.observableArray();this.handleBasemapClick=lang.hitch(this,this._handleBaseMapClick);},addBasemap:function(_abb){var _abc=lang.mixin({selected:ko.observable(false)},_abb);this.basemaps.push(_abc);this.basemapKeyLookup[_abc.key]=_abc;},_handleBaseMapClick:function(_abd){if(_abd==null){return;}this.setCurrentBasemap(_abd.key);this.visible(false);},removeBasemap:function(key){var _abe=this.basemapKeyLookup[key];if(_abe==null){return false;}delete this.basemapKeyLookup[key];this.basemaps.remove(_abe);return true;},setCurrentBasemap:function(key){var _abf=this.basemapKeyLookup[key];if(_abf==null){return;}_abf.selected(true);var _ac0=this.basemaps.indexOf(_abf);var _ac1=this.basemaps();for(var i=0;i<_ac1.length;i++){if(i!=_ac0){_ac1[i].selected(false);}}_aba.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.SET,key);}});});},"dijit/tree/_dndContainer":function(){define(["dojo/aspect","dojo/_base/declare","dojo/dom-class","dojo/_base/lang","dojo/on","dojo/touch"],function(_ac2,_ac3,_ac4,lang,on,_ac5){return _ac3("dijit.tree._dndContainer",null,{constructor:function(tree,_ac6){this.tree=tree;this.node=tree.domNode;lang.mixin(this,_ac6);this.containerState="";_ac4.add(this.node,"dojoDndContainer");this.events=[on(this.node,_ac5.enter,lang.hitch(this,"onOverEvent")),on(this.node,_ac5.leave,lang.hitch(this,"onOutEvent")),_ac2.after(this.tree,"_onNodeMouseEnter",lang.hitch(this,"onMouseOver"),true),_ac2.after(this.tree,"_onNodeMouseLeave",lang.hitch(this,"onMouseOut"),true),on(this.node,"dragstart, selectstart",function(evt){evt.preventDefault();})];},destroy:function(){var h;while(h=this.events.pop()){h.remove();}this.node=this.parent=null;},onMouseOver:function(_ac7){this.current=_ac7;},onMouseOut:function(){this.current=null;},_changeState:function(type,_ac8){var _ac9="dojoDnd"+type;var _aca=type.toLowerCase()+"State";_ac4.replace(this.node,_ac9+_ac8,_ac9+this[_aca]);this[_aca]=_ac8;},_addItemClass:function(node,type){_ac4.add(node,"dojoDndItem"+type);},_removeItemClass:function(node,type){_ac4.remove(node,"dojoDndItem"+type);},onOverEvent:function(){this._changeState("Container","Over");},onOutEvent:function(){this._changeState("Container","");}});});},"dijit/form/_FormSelectWidget":function(){define(["dojo/_base/array","dojo/_base/Deferred","dojo/aspect","dojo/data/util/sorter","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/when","dojo/store/util/QueryResults","./_FormValueWidget"],function(_acb,_acc,_acd,_ace,_acf,dom,_ad0,_ad1,lang,_ad2,when,_ad3,_ad4){var _ad5=_acf("dijit.form._FormSelectWidget",_ad4,{multiple:false,options:null,store:null,query:null,queryOptions:null,labelAttr:"",onFetch:null,sortByLabel:true,loadChildrenOnOpen:false,onLoadDeferred:null,getOptions:function(_ad6){var opts=this.options||[];if(_ad6==null){return opts;}if(lang.isArray(_ad6)){return _acb.map(_ad6,"return this.getOptions(item);",this);}if(lang.isString(_ad6)){_ad6={value:_ad6};}if(lang.isObject(_ad6)){if(!_acb.some(opts,function(_ad7,idx){for(var a in _ad6){if(!(a in _ad7)||_ad7[a]!=_ad6[a]){return false;}}_ad6=idx;return true;})){_ad6=-1;}}if(_ad6>=0&&_ad6<opts.length){return opts[_ad6];}return null;},addOption:function(_ad8){_acb.forEach(lang.isArray(_ad8)?_ad8:[_ad8],function(i){if(i&&lang.isObject(i)){this.options.push(i);}},this);this._loadChildren();},removeOption:function(_ad9){var _ada=this.getOptions(lang.isArray(_ad9)?_ad9:[_ad9]);_acb.forEach(_ada,function(_adb){if(_adb){this.options=_acb.filter(this.options,function(node){return (node.value!==_adb.value||node.label!==_adb.label);});this._removeOptionItem(_adb);}},this);this._loadChildren();},updateOption:function(_adc){_acb.forEach(lang.isArray(_adc)?_adc:[_adc],function(i){var _add=this.getOptions({value:i.value}),k;if(_add){for(k in i){_add[k]=i[k];}}},this);this._loadChildren();},setStore:function(_ade,_adf,_ae0){var _ae1=this.store;_ae0=_ae0||{};if(_ae1!==_ade){var h;while((h=this._notifyConnections.pop())){h.remove();}if(!_ade.get){lang.mixin(_ade,{_oldAPI:true,get:function(id){var _ae2=new _acc();this.fetchItemByIdentity({identity:id,onItem:function(_ae3){_ae2.resolve(_ae3);},onError:function(_ae4){_ae2.reject(_ae4);}});return _ae2.promise;},query:function(_ae5,_ae6){var _ae7=new _acc(function(){if(_ae8.abort){_ae8.abort();}});_ae7.total=new _acc();var _ae8=this.fetch(lang.mixin({query:_ae5,onBegin:function(_ae9){_ae7.total.resolve(_ae9);},onComplete:function(_aea){_ae7.resolve(_aea);},onError:function(_aeb){_ae7.reject(_aeb);}},_ae6));return new _ad3(_ae7);}});if(_ade.getFeatures()["dojo.data.api.Notification"]){this._notifyConnections=[_acd.after(_ade,"onNew",lang.hitch(this,"_onNewItem"),true),_acd.after(_ade,"onDelete",lang.hitch(this,"_onDeleteItem"),true),_acd.after(_ade,"onSet",lang.hitch(this,"_onSetItem"),true)];}}this._set("store",_ade);}if(this.options&&this.options.length){this.removeOption(this.options);}if(this._queryRes&&this._queryRes.close){this._queryRes.close();}if(_ae0.query){this._set("query",_ae0.query);this._set("queryOptions",_ae0.queryOptions);}if(_ade){this._loadingStore=true;this.onLoadDeferred=new _acc();this._queryRes=_ade.query(this.query,this.queryOptions);when(this._queryRes,lang.hitch(this,function(_aec){if(this.sortByLabel&&!_ae0.sort&&_aec.length){if(_ade.getValue){_aec.sort(_ace.createSortFunction([{attribute:_ade.getLabelAttributes(_aec[0])[0]}],_ade));}else{var _aed=this.labelAttr;_aec.sort(function(a,b){return a[_aed]>b[_aed]?1:b[_aed]>a[_aed]?-1:0;});}}if(_ae0.onFetch){_aec=_ae0.onFetch.call(this,_aec,_ae0);}_acb.forEach(_aec,function(i){this._addOptionForItem(i);},this);if(this._queryRes.observe){this._queryRes.observe(lang.hitch(this,function(_aee,_aef,_af0){if(_aef==_af0){this._onSetItem(_aee);}else{if(_aef!=-1){this._onDeleteItem(_aee);}if(_af0!=-1){this._onNewItem(_aee);}}}),true);}this._loadingStore=false;this.set("value","_pendingValue" in this?this._pendingValue:_adf);delete this._pendingValue;if(!this.loadChildrenOnOpen){this._loadChildren();}else{this._pseudoLoadChildren(_aec);}this.onLoadDeferred.resolve(true);this.onSetStore();}),function(err){this.onLoadDeferred.reject(err);});}return _ae1;},_setValueAttr:function(_af1,_af2){if(!this._onChangeActive){_af2=null;}if(this._loadingStore){this._pendingValue=_af1;return;}if(_af1==null){return;}if(lang.isArray(_af1)){_af1=_acb.map(_af1,function(_af3){return lang.isObject(_af3)?_af3:{value:_af3};});}else{if(lang.isObject(_af1)){_af1=[_af1];}else{_af1=[{value:_af1}];}}_af1=_acb.filter(this.getOptions(_af1),function(i){return i&&i.value;});var opts=this.getOptions()||[];if(!this.multiple&&(!_af1[0]||!_af1[0].value)&&!!opts.length){_af1[0]=opts[0];}_acb.forEach(opts,function(opt){opt.selected=_acb.some(_af1,function(v){return v.value===opt.value;});});var val=_acb.map(_af1,function(opt){return opt.value;});if(typeof val=="undefined"||typeof val[0]=="undefined"){return;}var disp=_acb.map(_af1,function(opt){return opt.label;});this._setDisplay(this.multiple?disp:disp[0]);this.inherited(arguments,[this.multiple?val:val[0],_af2]);this._updateSelection();},_getDisplayedValueAttr:function(){var ret=_acb.map([].concat(this.get("selectedOptions")),function(v){if(v&&"label" in v){return v.label;}else{if(v){return v.value;}}return null;},this);return this.multiple?ret:ret[0];},_setDisplayedValueAttr:function(_af4){this.set("value",this.getOptions(typeof _af4=="string"?{label:_af4}:_af4));},_loadChildren:function(){if(this._loadingStore){return;}_acb.forEach(this._getChildren(),function(_af5){_af5.destroyRecursive();});_acb.forEach(this.options,this._addOptionItem,this);this._updateSelection();},_updateSelection:function(){this.focusedChild=null;this._set("value",this._getValueFromOpts());var val=[].concat(this.value);if(val&&val[0]){var self=this;_acb.forEach(this._getChildren(),function(_af6){var _af7=_acb.some(val,function(v){return _af6.option&&(v===_af6.option.value);});if(_af7&&!self.multiple){self.focusedChild=_af6;}_ad0.toggle(_af6.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),_af7);_af6.domNode.setAttribute("aria-selected",_af7?"true":"false");},this);}},_getValueFromOpts:function(){var opts=this.getOptions()||[];if(!this.multiple&&opts.length){var opt=_acb.filter(opts,function(i){return i.selected;})[0];if(opt&&opt.value){return opt.value;}else{opts[0].selected=true;return opts[0].value;}}else{if(this.multiple){return _acb.map(_acb.filter(opts,function(i){return i.selected;}),function(i){return i.value;})||[];}}return "";},_onNewItem:function(item,_af8){if(!_af8||!_af8.parent){this._addOptionForItem(item);}},_onDeleteItem:function(item){var _af9=this.store;this.removeOption({value:_af9.getIdentity(item)});},_onSetItem:function(item){this.updateOption(this._getOptionObjForItem(item));},_getOptionObjForItem:function(item){var _afa=this.store,_afb=(this.labelAttr&&this.labelAttr in item)?item[this.labelAttr]:_afa.getLabel(item),_afc=(_afb?_afa.getIdentity(item):null);return {value:_afc,label:_afb,item:item};},_addOptionForItem:function(item){var _afd=this.store;if(_afd.isItemLoaded&&!_afd.isItemLoaded(item)){_afd.loadItem({item:item,onItem:function(i){this._addOptionForItem(i);},scope:this});return;}var _afe=this._getOptionObjForItem(item);this.addOption(_afe);},constructor:function(_aff){this._oValue=(_aff||{}).value||null;this._notifyConnections=[];},buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.focusNode,false);},_fillContent:function(){if(!this.options){this.options=this.srcNodeRef?_ad2("> *",this.srcNodeRef).map(function(node){if(node.getAttribute("type")==="separator"){return {value:"",label:"",selected:false,disabled:false};}return {value:(node.getAttribute("data-"+_ad1._scopeName+"-value")||node.getAttribute("value")),label:String(node.innerHTML),selected:node.getAttribute("selected")||false,disabled:node.getAttribute("disabled")||false};},this):[];}if(!this.value){this._set("value",this._getValueFromOpts());}else{if(this.multiple&&typeof this.value=="string"){this._set("value",this.value.split(","));}}},postCreate:function(){this.inherited(arguments);_acd.after(this,"onChange",lang.hitch(this,"_updateSelection"));var _b00=this.store;if(_b00&&(_b00.getIdentity||_b00.getFeatures()["dojo.data.api.Identity"])){this.store=null;this.setStore(_b00,this._oValue);}},startup:function(){this._loadChildren();this.inherited(arguments);},destroy:function(){var h;while((h=this._notifyConnections.pop())){h.remove();}if(this._queryRes&&this._queryRes.close){this._queryRes.close();}this.inherited(arguments);},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return [];},_getSelectedOptionsAttr:function(){return this.getOptions({selected:true});},_pseudoLoadChildren:function(){},onSetStore:function(){}});return _ad5;});},"esriviewer/ui/configure/ConfigureViewerWindow":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/dom-class","../window/WindowWidget"],function(_b01,_b02,lang,_b03,_b04){return _b01([_b04],{defaultPositioning:{x:500,y:50},constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/configure/ConfigureViewerWidget"],lang.hitch(this,function(_b05){this.configureViewerWidget=new _b05();this.setContent(this.configureViewerWidget.domNode);}));},isPositionedByConfig:true,canMinimize:false,windowHeaderText:"Configure Viewer",windowIconAltText:"Configure Viewer",windowIconClass:"commonIcons16 gear",postCreate:function(){this.inherited(arguments);_b03.add(this.windowContent,"configureWindowContent");},initListeners:function(){this.inherited(arguments);this.subscribes.push(_b02.subscribe(VIEWER_GLOBALS.EVENTS.CONFIGURE.WINDOW.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_b02.subscribe(VIEWER_GLOBALS.EVENTS.CONFIGURE.WINDOW.HIDE,lang.hitch(this,this.hide)));},hidePopups:function(){this.inherited(arguments);if(this.configureViewerWidget){this.configureViewerWidget.hidePopups();}}});});},"dijit/form/Select":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/i18n","dojo/_base/lang","dojo/on","dojo/sniff","./_FormSelectWidget","../_HasDropDown","../DropDownMenu","../MenuItem","../MenuSeparator","../Tooltip","../_KeyNavMixin","../registry","dojo/text!./templates/Select.html","dojo/i18n!./nls/validate"],function(_b06,_b07,_b08,_b09,_b0a,i18n,lang,on,has,_b0b,_b0c,_b0d,_b0e,_b0f,_b10,_b11,_b12,_b13){var _b14=_b07("dijit.form._SelectMenu",_b0d,{autoFocus:true,buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("role","listbox");},postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,"selectstart",function(evt){evt.preventDefault();evt.stopPropagation();}));},focus:function(){var _b15=false,val=this.parentWidget.value;if(lang.isArray(val)){val=val[val.length-1];}if(val){_b06.forEach(this.parentWidget._getChildren(),function(_b16){if(_b16.option&&(val===_b16.option.value)){_b15=true;this.focusChild(_b16,false);}},this);}if(!_b15){this.inherited(arguments);}}});var _b17=_b07("dijit.form.Select"+(has("dojo-bidi")?"_NoBidi":""),[_b0b,_b0c,_b11],{baseClass:"dijitSelect dijitValidationTextBox",templateString:_b13,_buttonInputDisabled:has("ie")?"disabled":"",required:false,state:"",message:"",tooltipPosition:[],emptyLabel:"&#160;",_isLoaded:false,_childrenLoaded:false,_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var si=this.srcNodeRef.selectedIndex||0;this._set("value",this.options[si>=0?si:0].value);}this.dropDown=new _b14({id:this.id+"_menu",parentWidget:this});_b09.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "));},_getMenuItemForOption:function(_b18){if(!_b18.value&&!_b18.label){return new _b0f({ownerDocument:this.ownerDocument});}else{var _b19=lang.hitch(this,"_setValueAttr",_b18);var item=new _b0e({option:_b18,label:_b18.label||this.emptyLabel,onClick:_b19,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:_b18.disabled||false});item.focusNode.setAttribute("role","option");return item;}},_addOptionItem:function(_b1a){if(this.dropDown){this.dropDown.addChild(this._getMenuItemForOption(_b1a));}},_getChildren:function(){if(!this.dropDown){return [];}return this.dropDown.getChildren();},focus:function(){if(!this.disabled&&this.focusNode.focus){try{this.focusNode.focus();}catch(e){}}},focusChild:function(_b1b){if(_b1b){this.set("value",_b1b.option);}},_getFirst:function(){var _b1c=this._getChildren();return _b1c.length?_b1c[0]:null;},_getLast:function(){var _b1d=this._getChildren();return _b1d.length?_b1d[_b1d.length-1]:null;},childSelector:function(node){var node=_b12.byNode(node);return node&&node.getParent()==this.dropDown;},onKeyboardSearch:function(item,evt,_b1e,_b1f){if(item){this.focusChild(item);}},_loadChildren:function(_b20){if(_b20===true){if(this.dropDown){delete this.dropDown.focusedChild;this.focusedChild=null;}if(this.options.length){this.inherited(arguments);}else{_b06.forEach(this._getChildren(),function(_b21){_b21.destroyRecursive();});var item=new _b0e({ownerDocument:this.ownerDocument,label:this.emptyLabel});this.dropDown.addChild(item);}}else{this._updateSelection();}this._isLoaded=false;this._childrenLoaded=true;if(!this._loadingStore){this._setValueAttr(this.value,false);}},_refreshState:function(){if(this._started){this.validate(this.focused);}},startup:function(){this.inherited(arguments);this._refreshState();},_setValueAttr:function(_b22){this.inherited(arguments);_b08.set(this.valueNode,"value",this.get("value"));this._refreshState();},_setNameAttr:"valueNode",_setDisabledAttr:function(_b23){this.inherited(arguments);this._refreshState();},_setRequiredAttr:function(_b24){this._set("required",_b24);this.focusNode.setAttribute("aria-required",_b24);this._refreshState();},_setOptionsAttr:function(_b25){this._isLoaded=false;this._set("options",_b25);},_setDisplay:function(_b26){var lbl=_b26||this.emptyLabel;this.containerNode.innerHTML="<span role=\"option\" class=\"dijitReset dijitInline "+this.baseClass.replace(/\s+|$/g,"Label ")+"\">"+lbl+"</span>";},validate:function(_b27){var _b28=this.disabled||this.isValid(_b27);this._set("state",_b28?"":(this._hasBeenBlurred?"Error":"Incomplete"));this.focusNode.setAttribute("aria-invalid",_b28?"false":"true");var _b29=_b28?"":this._missingMsg;if(_b29&&this.focused&&this._hasBeenBlurred){_b10.show(_b29,this.domNode,this.tooltipPosition,!this.isLeftToRight());}else{_b10.hide(this.domNode);}this._set("message",_b29);return _b28;},isValid:function(){return (!this.required||this.value===0||!(/^\s*$/.test(this.value||"")));},reset:function(){this.inherited(arguments);_b10.hide(this.domNode);this._refreshState();},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=i18n.getLocalization("dijit.form","validate",this.lang).missingMessage;},postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,"selectstart",function(evt){evt.preventDefault();evt.stopPropagation();}));this.domNode.setAttribute("aria-expanded","false");if(has("ie")<9){this.defer(function(){try{var s=domStyle.getComputedStyle(this.domNode);if(s){var ff=s.fontFamily;if(ff){var _b2a=this.domNode.getElementsByTagName("INPUT");if(_b2a){for(var i=0;i<_b2a.length;i++){_b2a[i].style.fontFamily=ff;}}}}}catch(e){}});}},_setStyleAttr:function(_b2b){this.inherited(arguments);_b09.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width);},isLoaded:function(){return this._isLoaded;},loadDropDown:function(_b2c){this._loadChildren(true);this._isLoaded=true;_b2c();},destroy:function(_b2d){if(this.dropDown&&!this.dropDown._destroyed){this.dropDown.destroyRecursive(_b2d);delete this.dropDown;}this.inherited(arguments);},_onFocus:function(){this.validate(true);this.inherited(arguments);},_onBlur:function(){_b10.hide(this.domNode);this.inherited(arguments);this.validate(false);}});if(has("dojo-bidi")){_b17=_b07("dijit.form.Select",_b17,{_setDisplay:function(_b2e){this.inherited(arguments);this.applyTextDir(this.containerNode);}});}_b17._Menu=_b14;function _b2f(_b30){return function(evt){if(!this._isLoaded){this.loadDropDown(lang.hitch(this,_b30,evt));}else{this.inherited(_b30,arguments);}};};_b17.prototype._onContainerKeydown=_b2f("_onContainerKeydown");_b17.prototype._onContainerKeypress=_b2f("_onContainerKeypress");return _b17;});},"esriviewer/loader/base/BaseViewerPlacement":function(){define(["dojo/_base/declare","dojo/_base/window","dojo/topic","dojo/_base/lang","dojo/dom-construct"],function(_b31,_b32,_b33,lang,_b34){return _b31([],{label:"unknown",isAbsolutePositioned:false,isWindowless:true,MAP_DIV_CLASS:"mapdiv",constructor:function(){this.initUI();this.initListeners();},initUI:function(){this.mapDiv=_b34.create("div",{className:this.MAP_DIV_CLASS});},initListeners:function(){_b33.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAIN_TOOLBAR,lang.hitch(this,this.placeMainToolbar));_b33.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAIN_TOOLBAR_DROP_DOWN,lang.hitch(this,this.placeMainToolbarDropdown));_b33.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.NAVIGATION_TOOLBAR,lang.hitch(this,this.placeNavigationToolbar));_b33.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.HEADER,lang.hitch(this,this.placeHeader));_b33.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.VIEWER_ACCORDION,lang.hitch(this,this.placeViewerAccordion));_b33.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.FOOTER,lang.hitch(this,this.placeFooterWidget));_b33.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MESSAGING,lang.hitch(this,this.placeMessagingWidget));_b33.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.THROBBER,lang.hitch(this,this.placeThrobberWidget));_b33.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.BASEMAP_GALLERY,lang.hitch(this,this.placeBasemapGallery));_b33.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAP_SCALE_AND_COORDINATES,lang.hitch(this,this.placeMapScaleAndCoordinates));_b33.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.CREATE_BOOOKMARK,lang.hitch(this,this.placeCreateBookmarkWidget));_b33.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MENU_BAR,lang.hitch(this,this.placeMenuBarWidget));_b33.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.USER_LOCATION,lang.hitch(this,this.placeUserLocationWidget));_b33.subscribe(VIEWER_GLOBALS.EVENTS.MAP.GET_MAP_DIV,lang.hitch(this,this.handleGetMapDiv));},handleGetMapDiv:function(_b35){if(_b35!=null&&lang.isFunction(_b35)){_b35(this.mapDiv);}},placeMainToolbarDropdown:function(_b36){},placeMenuBarWidget:function(_b37){},placeCreateBookmarkWidget:function(_b38){},placeMapScaleAndCoordinates:function(_b39){},placeBasemapGallery:function(_b3a){},placeNavigationToolbar:function(_b3b){},placeHeader:function(_b3c){},placeViewerAccordion:function(_b3d){},placeMainToolbar:function(_b3e){},placeUserLocationWidget:function(_b3f){if(_b3f){var _b40=this._getMapContainer();if(_b40){_b3f.placeAt(_b40);}}},placeFooterWidget:function(_b41){if(_b41){_b41.placeAt(_b32.body());}},placeMessagingWidget:function(_b42){},placeThrobberWidget:function(_b43){},_getMapContainer:function(){if(this.mapContainer==null){var _b44;_b33.publish(VIEWER_GLOBALS.EVENTS.MAP.GET_MAP_DIV,function(mDiv){_b44=mDiv;});this.mapContainer=_b44;}return this.mapContainer;}});});},"esriviewer/ui/draw/configure/geometry/BaseGeometryConfigurationWidget":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/form/HorizontalSlider","dojo/_base/Color","dijit/ColorPalette","dojo/dom-attr","dojo/dom-style","dojo/dom-construct","dojo/dom-class","../../../base/UITemplatedWidget"],function(_b45,lang,_b46,_b47,_b48,_b49,_b4a,_b4b,_b4c,_b4d){return _b45([_b4d],{defaultColor:"#ff0000",transparencySliderContainer:null,colorPickerContainer:null,defaultTransparency:75,postCreate:function(){this.inherited(arguments);if(this.transparencySliderContainer!=null){this.createTransparencySlider();}if(this.colorPickerContainer!=null){this.createColorPicker();}},createTransparencySlider:function(){this.transparencySliderLabel=_b4b.create("div");_b4a.set(this.transparencySliderLabel,"margin","8px 0 5px 0");_b49.set(this.transparencySliderLabel,"innerHTML","Opacity - "+this.defaultTransparency+"%");_b4c.add(this.transparencySliderLabel,"configureGeometryOpacityLabel");_b4b.place(this.transparencySliderLabel,this.transparencySliderContainer);var _b4e=_b4b.create("div");_b4b.place(_b4e,this.transparencySliderContainer);this.transparencySlider=new _b46({value:this.defaultTransparency,maximum:100,minimum:5,showButtons:false,pageIncrement:10,style:"width:195px"},_b4e);this.transparencySlider.on("change",lang.hitch(this,this.handleTransparencyChanged));this.transparencySlider.startup();},createColorPicker:function(){var _b4f=_b4b.create("div");_b4b.place(_b4f,this.colorPickerContainer);this.colorPicker=new _b48({value:this.defaultColor},_b4f);this.colorPicker.on("change",lang.hitch(this,this.handleColorPickerChanged));},handleTransparencyChanged:function(_b50){_b49.set(this.transparencySliderLabel,"innerHTML","Opacity - "+Math.ceil(_b50)+" %");this.processChange();},handleColorPickerChanged:function(_b51){this.processChange();},getTransparency:function(){if(this.transparencySlider==null){return 100;}else{return Math.ceil(this.transparencySlider.get("value"));}},getColor:function(){var _b52=_b47.fromHex(this.colorPicker.get("value"));var _b53=this.getTransparency()/100;return new _b47([_b52.r,_b52.g,_b52.b,_b53]);},processChange:function(){},onChange:function(_b54){},getSymbol:function(){return null;}});});},"dijit/_KeyNavMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","dijit/registry","dijit/_FocusMixin"],function(_b55,_b56,_b57,keys,lang,on,_b58,_b59){return _b56("dijit._KeyNavMixin",_b59,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments);_b57.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var _b5a=this._keyNavCodes={};_b5a[keys.HOME]=lang.hitch(this,"focusFirstChild");_b5a[keys.END]=lang.hitch(this,"focusLastChild");_b5a[this.isLeftToRight()?keys.LEFT_ARROW:keys.RIGHT_ARROW]=lang.hitch(this,"_onLeftArrow");_b5a[this.isLeftToRight()?keys.RIGHT_ARROW:keys.LEFT_ARROW]=lang.hitch(this,"_onRightArrow");_b5a[keys.UP_ARROW]=lang.hitch(this,"_onUpArrow");_b5a[keys.DOWN_ARROW]=lang.hitch(this,"_onDownArrow");}var self=this,_b5b=typeof this.childSelector=="string"?this.childSelector:lang.hitch(this,"childSelector");this.own(on(this.domNode,"keypress",lang.hitch(this,"_onContainerKeypress")),on(this.domNode,"keydown",lang.hitch(this,"_onContainerKeydown")),on(this.domNode,"focus",lang.hitch(this,"_onContainerFocus")),on(this.containerNode,on.selector(_b5b,"focusin"),function(evt){self._onChildFocus(_b58.getEnclosingWidget(this),evt);}));},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild();},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1);},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1);},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild());},focusLastChild:function(){this.focusChild(this._getLastFocusableChild());},focusChild:function(_b5c,last){if(!_b5c){return;}if(this.focusedChild&&_b5c!==this.focusedChild){this._onChildBlur(this.focusedChild);}_b5c.set("tabIndex",this.tabIndex);_b5c.focus(last?"end":"start");},_onContainerFocus:function(evt){if(evt.target!==this.domNode||this.focusedChild){return;}this.focus();},_onFocus:function(){_b57.set(this.domNode,"tabIndex","-1");this.inherited(arguments);},_onBlur:function(evt){_b57.set(this.domNode,"tabIndex",this.tabIndex);if(this.focusedChild){this.focusedChild.set("tabIndex","-1");this.lastFocusedChild=this.focusedChild;this._set("focusedChild",null);}this.inherited(arguments);},_onChildFocus:function(_b5d){if(_b5d&&_b5d!=this.focusedChild){if(this.focusedChild&&!this.focusedChild._destroyed){this.focusedChild.set("tabIndex","-1");}_b5d.set("tabIndex",this.tabIndex);this.lastFocused=_b5d;this._set("focusedChild",_b5d);}},_searchString:"",multiCharSearchDuration:1000,onKeyboardSearch:function(item,evt,_b5e,_b5f){if(item){this.focusChild(item);}},_keyboardSearchCompare:function(item,_b60){var _b61=item.domNode,text=item.label||(_b61.focusNode?_b61.focusNode.label:"")||_b61.innerText||_b61.textContent||"",_b62=text.replace(/^\s+/,"").substr(0,_b60.length).toLowerCase();return (!!_b60.length&&_b62==_b60)?-1:0;},_onContainerKeydown:function(evt){var func=this._keyNavCodes[evt.keyCode];if(func){func(evt,this.focusedChild);evt.stopPropagation();evt.preventDefault();this._searchString="";}else{if(evt.keyCode==keys.SPACE&&this._searchTimer&&!(evt.ctrlKey||evt.altKey||evt.metaKey)){evt.stopImmediatePropagation();evt.preventDefault();this._keyboardSearch(evt," ");}}},_onContainerKeypress:function(evt){if(evt.charCode<keys.SPACE||evt.ctrlKey||evt.altKey||evt.metaKey||(evt.charCode==keys.SPACE&&this._searchTimer)){return;}evt.preventDefault();evt.stopPropagation();this._keyboardSearch(evt,String.fromCharCode(evt.charCode).toLowerCase());},_keyboardSearch:function(evt,_b63){var _b64=null,_b65,_b66=0,_b67=lang.hitch(this,function(){if(this._searchTimer){this._searchTimer.remove();}this._searchString+=_b63;var _b68=/^(.)\1*$/.test(this._searchString);var _b69=_b68?1:this._searchString.length;_b65=this._searchString.substr(0,_b69);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString="";},this.multiCharSearchDuration);var _b6a=this.focusedChild||null;if(_b69==1||!_b6a){_b6a=this._getNextFocusableChild(_b6a,1);if(!_b6a){return;}}var stop=_b6a;do{var rc=this._keyboardSearchCompare(_b6a,_b65);if(!!rc&&_b66++==0){_b64=_b6a;}if(rc==-1){_b66=-1;break;}_b6a=this._getNextFocusableChild(_b6a,1);}while(_b6a!=stop);});_b67();this.onKeyboardSearch(_b64,evt,_b65,_b66);},_onChildBlur:function(){},_getNextFocusableChild:function(_b6b,dir){var _b6c=_b6b;do{if(!_b6b){_b6b=this[dir>0?"_getFirst":"_getLast"]();if(!_b6b){break;}}else{_b6b=this._getNext(_b6b,dir);}if(_b6b!=null&&_b6b!=_b6c&&_b6b.isFocusable()){return _b6b;}}while(_b6b!=_b6c);return null;},_getFirst:function(){return null;},_getLast:function(){return null;},_getNext:function(_b6d,dir){if(_b6d){_b6d=_b6d.domNode;while(_b6d){_b6d=_b6d[dir<0?"previousSibling":"nextSibling"];if(_b6d&&"getAttribute" in _b6d){var w=_b58.byNode(_b6d);if(w){return w;}}}}return null;}});});},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../when"],function(_b6e,lang,when){var _b6f=function(_b70){if(!_b70){return _b70;}if(_b70.then){_b70=lang.delegate(_b70);}function _b71(_b72){if(!_b70[_b72]){_b70[_b72]=function(){var args=arguments;return when(_b70,function(_b73){Array.prototype.unshift.call(args,_b73);return _b6f(_b6e[_b72].apply(_b6e,args));});};}};_b71("forEach");_b71("filter");_b71("map");if(!_b70.total){_b70.total=when(_b70,function(_b74){return _b74.length;});}return _b70;};lang.setObject("dojo.store.util.QueryResults",_b6f);return _b6f;});},"xstyle/util/createStyleSheet":function(){define([],function(){function has(){return !document.createStyleSheet;};var head=document.head;return function insertCss(css){if(has("dom-create-style-element")){_b75=document.createElement("style");_b75.setAttribute("type","text/css");_b75.appendChild(document.createTextNode(css));head.insertBefore(_b75,head.firstChild);return _b75;}else{var _b75=document.createStyleSheet();_b75.cssText=css;return _b75.owningElement;}};});},"dijit/CheckedMenuItem":function(){define(["dojo/_base/declare","dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(_b76,_b77,_b78,_b79){return _b76("dijit.CheckedMenuItem",_b78,{baseClass:"dijitCheckedMenuItem",templateString:_b79,checked:false,_setCheckedAttr:function(_b7a){_b77.toggle(this.domNode,this.baseClass+"Checked",_b7a);this.domNode.setAttribute("aria-checked",_b7a?"true":"false");this._set("checked",_b7a);},iconClass:"",role:"menuitemcheckbox",checkedChar:"&#10003;",onChange:function(){},_onClick:function(evt){if(!this.disabled){this.set("checked",!this.checked);this.onChange(this.checked);}this.onClick(evt);}});});},"esriviewer/ui/draw/model/DrawWidgetViewModel":function(){define(["dojo/_base/declare"],function(_b7b){return _b7b([],{drawModes:{"point":"point","line":"line","polyline":"polyline","polygon":"polygon","rectangle":"rectangle","text":"text"},constructor:function(){var self=this;this.showUserPersistedGraphicsIcon=ko.observable(true);this.showDrawWindowActions=ko.observable(true);this.showDrawPolylineIcon=ko.observable(true);this.showDrawTextIcon=ko.observable(true);this.showDrawPointIcon=ko.observable(true);this.showDrawLineIcon=ko.observable(true);this.showDrawPolygonIcon=ko.observable(true);this.showDrawRectangleIcon=ko.observable(true);this.forceHideGraphicsListTab=ko.observable(false);this.polylineActive=ko.observable(false);this.pointActive=ko.observable(false);this.lineActive=ko.observable(false);this.rectangleActive=ko.observable(false);this.polygonActive=ko.observable(false);this.textActive=ko.observable(false);this.graphicsListTabVisible=ko.observable(false);this.freehandContainerVisible=ko.observable(false);this.userPersistedGraphicsVisible=ko.observable(false);this.graphicsListVisible=ko.observable(false);this.configurationVisible=ko.observable(false);this.drawVisible=ko.observable(true);var _b7c=function(){return (!self.forceHideGraphicsListTab())&&self.graphicsListTabVisible();};this.showGraphicsListTab=ko.computed(_b7c);this.showSavedGraphicsTab=ko.observable(false);},showUserPersistedGraphics:function(){this.graphicsListVisible(false);this.configurationVisible(false);this.drawVisible(false);this.userPersistedGraphicsVisible(true);this.freehandContainerVisible(false);},showGraphicsList:function(){this.graphicsListVisible(true);this.configurationVisible(false);this.drawVisible(false);this.userPersistedGraphicsVisible(false);this.freehandContainerVisible(false);},showConfiguration:function(){this.graphicsListVisible(false);this.configurationVisible(true);this.userPersistedGraphicsVisible(false);this.drawVisible(false);this.freehandContainerVisible(false);},showDraw:function(){this.graphicsListVisible(false);this.userPersistedGraphicsVisible(false);this.configurationVisible(false);this.drawVisible(true);this.freehandContainerVisible(this.polygonActive()||this.lineActive());},setDrawMode:function(mode){this.pointActive(false);this.lineActive(false);this.polylineActive(false);this.rectangleActive(false);this.polygonActive(false);this.textActive(false);this.freehandContainerVisible(false);if(mode!=null){if(mode===this.drawModes.point){this.pointActive(true);}else{if(mode===this.drawModes.line){this.lineActive(true);if(this.drawVisible()){this.freehandContainerVisible(false);}}else{if(mode===this.drawModes.polyline){this.polylineActive(true);if(this.drawVisible()){this.freehandContainerVisible(true);}}else{if(mode===this.drawModes.rectangle){this.rectangleActive(true);}else{if(mode===this.drawModes.polygon){this.polygonActive(true);if(this.drawVisible()){this.freehandContainerVisible(true);}}else{if(mode===this.drawModes.text){this.textActive(true);}}}}}}}},getCurrentDrawType:function(){if(this.polygonActive()){return this.drawModes.polygon;}else{if(this.lineActive()){return this.drawModes.line;}else{if(this.rectangleActive()){return this.drawModes.rectangle;}else{if(this.pointActive()){return this.drawModes.point;}else{if(this.polylineActive()){return this.drawModes.polyline;}else{if(this.textActive()){return this.drawModes.text;}else{return null;}}}}}}}});});},"esriviewer/ui/logging/LoggingWidgetWindow":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/dom-style","../window/WindowWidget","./LoggingWidget"],function(_b7d,_b7e,lang,_b7f,_b80,_b81){return _b7d([_b80],{defaultPositioning:{x:10,y:240},windowWidth:"500px",windowHeaderText:"Logging",windowIconAltText:"Logging",windowIconClass:"commonIcons16 list",positioningParamName:"logging",postCreate:function(){this.inherited(arguments);this.loggingWidget=new _b81();this.setContent(this.loggingWidget.domNode);},initListeners:function(){this.inherited(arguments);this.subscribes.push(_b7e.subscribe(VIEWER_GLOBALS.EVENTS.LOGGING.WINDOW.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_b7e.subscribe(VIEWER_GLOBALS.EVENTS.LOGGING.WINDOW.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_b7e.subscribe(VIEWER_GLOBALS.EVENTS.LOGGING.WINDOW.TOGGLE,lang.hitch(this,this.toggle)));},hidePopups:function(){this.inherited(arguments);if(this.loggingWidget){this.loggingWidget.hidePopups();}}});});},"esriviewer/ui/portal/PortalPublisherWindowWidget":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/window","dojo/dom-class","../window/WindowWidget"],function(_b82,lang,_b83,_b84,_b85,_b86){return _b82([_b86],{defaultPositioning:{x:400,y:125},windowWidth:"375px",windowHeaderText:"Publish to Portal",windowIconAltText:"Publish to Portal",windowIconClass:"commonIcons16 worldAdd",positioningParamName:"portalPublisher",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_b85.add(this.windowContent,"portalPublisherWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/portal/PortalPublisherWidget"],lang.hitch(this,function(_b87){this.portalPublisherWidget=new _b87();this.setContent(this.portalPublisherWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_b83.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PORTAL_PUBLISH.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_b83.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PORTAL_PUBLISH.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_b83.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PORTAL_PUBLISH.TOGGLE,lang.hitch(this,this.toggle)));}});});},"esriviewer/ui/legend/MapLegendWindow":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","../window/WindowWidget"],function(_b88,_b89,lang,_b8a){return _b88([_b8a],{defaultPositioning:{x:62,y:150},windowWidth:"300px",windowHeight:"400px",windowHeaderText:"Map Legend",windowIconAltText:"Map Legend",windowIconClass:"commonIcons16 list",positioningParamName:"legend",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/legend/MapLegendWidget"],lang.hitch(this,function(_b8b){this.mapLegendWidget=new _b8b();this.setContent(this.mapLegendWidget.domNode);this.mapLegendWidget.startup();}));},initListeners:function(){this.inherited(arguments);_b89.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.LEGEND.SHOW,lang.hitch(this,this.show));_b89.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.LEGEND.HIDE,lang.hitch(this,this.hide));}});});},"esriviewer/ui/header/HeaderLogo":function(){define(["dojo/_base/declare","dojo/text!./template/HeaderLogoTemplate.html","../base/UITemplatedWidget","dojo/_base/lang","dojo/topic","./model/HeaderLogoViewModel"],function(_b8c,_b8d,_b8e,lang,_b8f,_b90){return _b8c([_b8e],{animate:true,templateString:_b8d,constructor:function(){this.animation=VIEWER_GLOBALS.ANIMATIONS.BOUNCE.IN_DOWN;},postCreate:function(){this.viewModel=new _b90();this.inherited(arguments);ko.applyBindings(this.viewModel,this.domNode);},loadViewerConfigurationData:function(){var _b91=null;_b8f.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"animationsEnabled",function(_b92){_b91=_b92;});if(_b91!=null){this.animate=_b91;}var _b93=null;_b8f.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"header",function(_b94){_b93=_b94;});if(_b93!=null&&lang.isObject(_b93)){if(_b93.headerText){this.viewModel.headerMainText(_b93.headerText);}if(_b93.headerImage!=null&&_b93.headerImage!=""){this.viewModel.headerIconUrl(_b93.headerImage);}else{this.viewModel.showHeaderIcon(false);}if(_b93.contact!=null&&lang.isObject(_b93.contact)){if(_b93.contact.label){this.viewModel.contactText(_b93.contact.label);}if(_b93.contact.url){this.viewModel.contactUrl(_b93.contact.url);}}if(_b93.help!=null&&lang.isObject(_b93.help)){if(_b93.help.label){this.viewModel.helpText(_b93.help.label);}if(_b93.help.url){this.viewModel.helpUrl(_b93.help.url);}}}}});});},"dijit/MenuSeparator":function(){define(["dojo/_base/declare","dojo/dom","./_WidgetBase","./_TemplatedMixin","./_Contained","dojo/text!./templates/MenuSeparator.html"],function(_b95,dom,_b96,_b97,_b98,_b99){return _b95("dijit.MenuSeparator",[_b96,_b97,_b98],{templateString:_b99,buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});});},"esriviewer/ui/draw/configure/geometry/model/ConfigureTextViewModel":function(){define(["dojo/_base/declare","esri/symbols/TextSymbol","esri/symbols/Font"],function(_b9a,_b9b,Font){return _b9a([],{textAligns:ko.observableArray([{value:_b9b.ALIGN_START,label:"Start"},{value:_b9b.ALIGN_MIDDLE,label:"Middle"},{value:_b9b.ALIGN_END,label:"End"}]),textWeights:ko.observableArray([{value:Font.WEIGHT_NORMAL,label:"Normal"},{value:Font.WEIGHT_LIGHTER,label:"Lighter"},{value:Font.WEIGHT_BOLD,label:"Bold"},{value:Font.WEIGHT_BOLDER,label:"Bolder"}]),fontFaces:ko.observableArray([{value:Font.STYLE_NORMAL,label:"Normal"},{value:Font.STYLE_ITALIC,label:"Italic"},{value:Font.STYLE_OBLIQUE,label:"Oblique"}]),textSizes:ko.observableArray([{value:"8pt",label:"8"},{value:"9pt",label:"9"},{value:"10pt",label:"10"},{value:"11pt",label:"11"},{value:"12pt",label:"12"},{value:"13pt",label:"13"},{value:"14pt",label:"14"},{value:"15pt",label:"15"},{value:"20pt",label:"20"},{value:"25pt",label:"25"},{value:"30pt",label:"30"},{value:"50pt",label:"50"},{value:"75pt",label:"75"}]),angles:ko.observableArray([0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85]),constructor:function(){this.selectedTextSize=ko.observable("15pt");this.selectedTextAlign=ko.observable(_b9b.ALIGN_END);this.selectedTextWeight=ko.observable(Font.WEIGHT_NORMAL);this.selectedFontFace=ko.observable(Font.STYLE_NORMAL);this.selectedAngle=ko.observable(0);}});});},"esriviewer/map/base/DistinctQuery":function(){define(["dojo/_base/declare","esri/tasks/query"],function(_b9c,_b9d){return _b9c([_b9d],{toJson:function(){var json=this.inherited(arguments);json.returnDistinctValues=true;return json;}});});},"esriviewer/base/DataLoaderSupport":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/xhr","esri/config","esri/request"],function(_b9e,lang,xhr,_b9f,_ba0){return _b9e([],{loadJson:function(url,_ba1,_ba2){if(url==null||url==""||_ba1==null||!lang.isFunction(_ba1)){return;}var _ba3={url:url,handleAs:"json",load:_ba1};if(_ba2!=null&&lang.isFunction(_ba2)){_ba3.error=_ba2;}xhr.get(_ba3);},loadProxiedJson:function(url,_ba4,_ba5){if(_b9f==null||_b9f.defaults==null||_b9f.defaults.io==null||_b9f.defaults.io.proxyUrl==null){alert("You Must Configure a proxy for this request: "+url);return;}this.loadJson(_b9f.defaults.io.proxyUrl+"?"+url,_ba4,_ba5);},loadJsonP:function(url,_ba6,_ba7,_ba8,_ba9){if(_ba8==null){_ba8=lang.hitch(this,function(_baa){var msg="Could not resource : "+url+". Please verify URL is accessible.";});}if(_ba9==null){_ba9="callback";}var _bab={callbackParamName:_ba9,content:_ba6,url:url};_ba0(_bab).then(_ba7,_ba8);},loadText:function(url,_bac,_bad){if(url==null||url==""||!lang.isFunction(_bac)){return;}var _bae={url:url,handleAs:"text",load:_bac};if(_bad!=null&&lang.isFunction(_bad)){_bae.error=_bad;}xhr.get(_bae);}});});},"esriviewer/ui/draw/DrawWindow":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/dom-class","../window/WindowWidget","./DrawWidget"],function(_baf,_bb0,lang,_bb1,_bb2,_bb3){return _baf([_bb2],{defaultPositioning:{x:500,y:50},windowWidth:"335px",windowHeaderText:"Draw",windowIconAltText:"Draw",positioningParamName:"draw",windowIconClass:"commonIcons16 pencil",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_bb1.add(this.windowContent,"drawWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();this.drawWidget=new _bb3();this.setContent(this.drawWidget.domNode);},initListeners:function(){this.inherited(arguments);this.subscribes.push(_bb0.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.DRAW.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_bb0.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.DRAW.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_bb0.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.DRAW.TOGGLE,lang.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.drawWidget){if(this.drawWidget.currentDrawType!=null){this.drawWidget.clearDraw();}}},hidePopups:function(){this.inherited(arguments);if(this.drawWidget){this.drawWidget.hidePopups();}}});});},"esriviewer/ui/query/QueryBuilderWindowWidget":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/window","dojo/dom-style","dojo/dom-class","../window/WindowWidget","dojox/html/metrics"],function(_bb4,lang,_bb5,_bb6,_bb7,_bb8,_bb9,_bba){return _bb4([_bb9],{defaultPositioning:{x:400,y:125},pendingQueryLayerCallback:null,minWidth:400,resizable:true,resizeAxis:"xy",windowHeight:"38em",windowHeaderText:"Query Builder",windowIconAltText:"Query Builder",windowIconClass:"commonIcons16 sql",positioningParamName:"queryBuilder",constructor:function(){var _bbb=_bba.getFontMeasurements();this.minHeight=38*_bbb["1em"];this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_bb8.add(this.windowContent,"queryBuilderWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/query/QueryBuilderWidget"],lang.hitch(this,function(_bbc){this.queryBuilderWidget=new _bbc();this.setContent(this.queryBuilderWidget.domNode);if(this.pendingQueryLayerCallback!=null&&lang.isFunction(this.pendingQueryLayerCallback)){this.pendingQueryLayerCallback();}}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_bb5.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.QUERY_BUILDER.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_bb5.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.QUERY_BUILDER.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_bb5.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.QUERY_BUILDER.TOGGLE,lang.hitch(this,this.toggle)));_bb5.subscribe(VIEWER_GLOBALS.EVENTS.QUERY_BUILDER.SET_IMAGE_SERVICE_LAYER,lang.hitch(this,this.setImageServiceLayer));_bb5.subscribe(VIEWER_GLOBALS.EVENTS.QUERY_BUILDER.SET_MAP_SERVICE_LAYER,lang.hitch(this,this.setMapServiceLayer));_bb5.subscribe(VIEWER_GLOBALS.EVENTS.QUERY_BUILDER.SET_FEATURE_SERVICE_LAYER,lang.hitch(this,this.setFeatureServiceLayer));},hide:function(){this.inherited(arguments);if(this.queryBuilderWidget){this.queryBuilderWidget.clearGraphics();}},setImageServiceLayer:function(_bbd){if(this.queryBuilderWidget==null){this.pendingQueryLayerCallback=lang.hitch(this,function(_bbe){this.queryBuilderWidget.setImageServiceLayer(_bbe);this.pendingQueryLayerCallback=null;},_bbd);}else{this.queryBuilderWidget.setImageServiceLayer(_bbd);}this.show();},setMapServiceLayer:function(_bbf,_bc0){if(this.queryBuilderWidget==null){this.pendingQueryLayerCallback=lang.hitch(this,function(_bc1,_bc2){this.queryBuilderWidget.setMapServiceLayer(_bc1,_bc2);this.pendingQueryLayerCallback=null;},_bbf,_bc0);}else{this.queryBuilderWidget.setMapServiceLayer(_bbf,_bc0);}this.show();},setFeatureServiceLayer:function(_bc3){if(this.queryBuilderWidget==null){this.pendingQueryLayerCallback=lang.hitch(this,function(_bc4){this.queryBuilderWidget.setFeatureServiceLayer(_bc4);this.pendingQueryLayerCallback=null;},_bc3);}else{this.queryBuilderWidget.setFeatureServiceLayer(_bc3);}this.show();}});});},"dojo/require":function(){define(["./_base/loader"],function(_bc5){return {dynamic:0,normalize:function(id){return id;},load:_bc5.require};});},"xstyle/css":function(){define(["require"],function(_bc6){"use strict";function _bc7(tag,id,_bc8){var _bc9=document.documentElement;var _bca=_bc9.insertBefore(document.createElement(tag),_bc9.firstChild);_bca.id=id;var _bcb=(_bca.currentStyle||getComputedStyle(_bca,null))[_bc8];_bc9.removeChild(_bca);return _bcb;};return {load:function(_bcc,_bcd,_bce,_bcf){var url=_bcd.toUrl(_bcc);var _bd0=_bcd.cache["url:"+url];if(_bd0){if(_bd0.xCss){var _bd1=_bd0.parser;var xCss=_bd0.xCss;_bd0=_bd0.cssText;}_bc6(["./util/createStyleSheet"],function(_bd2){_bd2(_bd0);});if(xCss){}return _bd3();}function _bd3(){var _bd4=_bc7("x-parse",null,"content");if(_bd4&&_bd4!="none"){_bcd([eval(_bd4)],_bce);}else{_bce();}};var _bd5=_bc7("div",_bcc.replace(/\//g,"-").replace(/\..*/,"")+"-loaded","display");if(_bd5=="none"){return _bd3();}_bc6(["./load-css"],function(load){load(url,_bd3);});}};});},"esriviewer/ui/draw/configure/geometry/model/ConfigurePolygonViewModel":function(){define(["dojo/_base/declare","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol"],function(_bd6,_bd7,_bd8){return _bd6([],{fillStyles:ko.observableArray([{value:_bd8.STYLE_BACKWARD_DIAGONAL,label:"Backward Diagonal"},{value:_bd8.STYLE_CROSS,label:"Cross"},{value:_bd8.STYLE_DIAGONAL_CROSS,label:"Diagonal Cross"},{value:_bd8.STYLE_FORWARD_DIAGONAL,label:"Forward Diagonal"},{value:_bd8.STYLE_HORIZONTAL,label:"Horizontal Lines"},{value:_bd8.STYLE_SOLID,label:"Solid"},{value:_bd8.STYLE_VERTICAL,label:"Vertical Lines"},{value:_bd8.STYLE_NULL,label:"None"}]),outlineStyles:ko.observableArray([{value:_bd7.STYLE_DASH,label:"Dashed Line"},{value:_bd7.STYLE_DASHDOT,label:"Dash Dot Line"},{value:_bd7.STYLE_DASHDOTDOT,label:"Dash Dot Dot Line"},{value:_bd7.STYLE_DOT,label:"Dotted Line"},{value:_bd7.STYLE_SOLID,label:"Solid Line"},{value:_bd7.STYLE_NULL,label:"None"}]),outlineWidths:ko.observableArray([1,2,3,4,5,6,7,8,9,10,15,20,25,30,40,50]),angles:ko.observableArray([0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85]),constructor:function(){this.selectedFillStyle=ko.observable(_bd8.STYLE_SOLID);this.selectedOutlineStyle=ko.observable(_bd7.STYLE_SOLID);this.selectedAngle=ko.observable(0);this.selectedOutlineWidth=ko.observable(1);this.outlineColorActive=ko.observable(true);this.fillColorActive=ko.observable(false);},setOutlineColorMode:function(){this.outlineColorActive(true);this.fillColorActive(false);},setFillColorMode:function(){this.outlineColorActive(false);this.fillColorActive(true);}});});},"dijit/tree/dndSource":function(){define(["dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/_base/lang","dojo/on","dojo/touch","dojo/topic","dojo/dnd/Manager","./_dndSelector"],function(_bd9,_bda,_bdb,_bdc,_bdd,lang,on,_bde,_bdf,_be0,_be1){var _be2=_bdb("dijit.tree.dndSource",_be1,{isSource:true,accept:["text","treeNode"],copyOnly:false,dragThreshold:5,betweenThreshold:0,generateText:true,constructor:function(tree,_be3){if(!_be3){_be3={};}lang.mixin(this,_be3);var type=_be3.accept instanceof Array?_be3.accept:["text","treeNode"];this.accept=null;if(type.length){this.accept={};for(var i=0;i<type.length;++i){this.accept[type[i]]=1;}}this.isDragging=false;this.mouseDown=false;this.targetAnchor=null;this.targetBox=null;this.dropPosition="";this._lastX=0;this._lastY=0;this.sourceState="";if(this.isSource){_bdc.add(this.node,"dojoDndSource");}this.targetState="";if(this.accept){_bdc.add(this.node,"dojoDndTarget");}this.topics=[_bdf.subscribe("/dnd/source/over",lang.hitch(this,"onDndSourceOver")),_bdf.subscribe("/dnd/start",lang.hitch(this,"onDndStart")),_bdf.subscribe("/dnd/drop",lang.hitch(this,"onDndDrop")),_bdf.subscribe("/dnd/cancel",lang.hitch(this,"onDndCancel"))];},checkAcceptance:function(){return true;},copyState:function(_be4){return this.copyOnly||_be4;},destroy:function(){this.inherited(arguments);var h;while(h=this.topics.pop()){h.remove();}this.targetAnchor=null;},_onDragMouse:function(e,_be5){var m=_be0.manager(),_be6=this.targetAnchor,_be7=this.current,_be8=this.dropPosition;var _be9="Over";if(_be7&&this.betweenThreshold>0){if(!this.targetBox||_be6!=_be7){this.targetBox=_bdd.position(_be7.rowNode,true);}if((e.pageY-this.targetBox.y)<=this.betweenThreshold){_be9="Before";}else{if((e.pageY-this.targetBox.y)>=(this.targetBox.h-this.betweenThreshold)){_be9="After";}}}if(_be5||_be7!=_be6||_be9!=_be8){if(_be6){this._removeItemClass(_be6.rowNode,_be8);}if(_be7){this._addItemClass(_be7.rowNode,_be9);}if(!_be7){m.canDrop(false);}else{if(_be7==this.tree.rootNode&&_be9!="Over"){m.canDrop(false);}else{var _bea=false;if(m.source==this){for(var _beb in this.selection){var _bec=this.selection[_beb];if(_bec.item===_be7.item){_bea=true;break;}}}if(_bea){m.canDrop(false);}else{if(this.checkItemAcceptance(_be7.rowNode,m.source,_be9.toLowerCase())&&!this._isParentChildDrop(m.source,_be7.rowNode)){m.canDrop(true);}else{m.canDrop(false);}}}}this.targetAnchor=_be7;this.dropPosition=_be9;}},onMouseMove:function(e){if(this.isDragging&&this.targetState=="Disabled"){return;}this.inherited(arguments);var m=_be0.manager();if(this.isDragging){this._onDragMouse(e);}else{if(this.mouseDown&&this.isSource&&(Math.abs(e.pageX-this._lastX)>=this.dragThreshold||Math.abs(e.pageY-this._lastY)>=this.dragThreshold)){var _bed=this.getSelectedTreeNodes();if(_bed.length){if(_bed.length>1){var seen=this.selection,i=0,r=[],n,p;nextitem:while((n=_bed[i++])){for(p=n.getParent();p&&p!==this.tree;p=p.getParent()){if(seen[p.id]){continue nextitem;}}r.push(n);}_bed=r;}_bed=_bd9.map(_bed,function(n){return n.domNode;});m.startDrag(this,_bed,this.copyState(_bda.isCopyKey(e)));this._onDragMouse(e,true);}}}},onMouseDown:function(e){this.mouseDown=true;this.mouseButton=e.button;this._lastX=e.pageX;this._lastY=e.pageY;this.inherited(arguments);},onMouseUp:function(e){if(this.mouseDown){this.mouseDown=false;this.inherited(arguments);}},onMouseOut:function(){this.inherited(arguments);this._unmarkTargetAnchor();},checkItemAcceptance:function(){return true;},onDndSourceOver:function(_bee){if(this!=_bee){this.mouseDown=false;this._unmarkTargetAnchor();}else{if(this.isDragging){var m=_be0.manager();m.canDrop(false);}}},onDndStart:function(_bef,_bf0,copy){if(this.isSource){this._changeState("Source",this==_bef?(copy?"Copied":"Moved"):"");}var _bf1=this.checkAcceptance(_bef,_bf0);this._changeState("Target",_bf1?"":"Disabled");if(this==_bef){_be0.manager().overSource(this);}this.isDragging=true;},itemCreator:function(_bf2){return _bd9.map(_bf2,function(node){return {"id":node.id,"name":node.textContent||node.innerText||""};});},onDndDrop:function(_bf3,_bf4,copy){if(this.containerState=="Over"){var tree=this.tree,_bf5=tree.model,_bf6=this.targetAnchor;this.isDragging=false;var _bf7;var _bf8;var _bf9;_bf7=(_bf6&&_bf6.item)||tree.item;if(this.dropPosition=="Before"||this.dropPosition=="After"){_bf7=(_bf6.getParent()&&_bf6.getParent().item)||tree.item;_bf8=_bf6.getIndexInParent();if(this.dropPosition=="After"){_bf8=_bf6.getIndexInParent()+1;_bf9=_bf6.getNextSibling()&&_bf6.getNextSibling().item;}else{_bf9=_bf6.item;}}else{_bf7=(_bf6&&_bf6.item)||tree.item;}var _bfa;_bd9.forEach(_bf4,function(node,idx){var _bfb=_bf3.getItem(node.id);if(_bd9.indexOf(_bfb.type,"treeNode")!=-1){var _bfc=_bfb.data,_bfd=_bfc.item,_bfe=_bfc.getParent().item;}if(_bf3==this){if(typeof _bf8=="number"){if(_bf7==_bfe&&_bfc.getIndexInParent()<_bf8){_bf8-=1;}}_bf5.pasteItem(_bfd,_bfe,_bf7,copy,_bf8,_bf9);}else{if(_bf5.isItem(_bfd)){_bf5.pasteItem(_bfd,_bfe,_bf7,copy,_bf8,_bf9);}else{if(!_bfa){_bfa=this.itemCreator(_bf4,_bf6.rowNode,_bf3);}_bf5.newItem(_bfa[idx],_bf7,_bf8,_bf9);}}},this);this.tree._expandNode(_bf6);}this.onDndCancel();},onDndCancel:function(){this._unmarkTargetAnchor();this.isDragging=false;this.mouseDown=false;delete this.mouseButton;this._changeState("Source","");this._changeState("Target","");},onOverEvent:function(){this.inherited(arguments);_be0.manager().overSource(this);},onOutEvent:function(){this._unmarkTargetAnchor();var m=_be0.manager();if(this.isDragging){m.canDrop(false);}m.outSource(this);this.inherited(arguments);},_isParentChildDrop:function(_bff,_c00){if(!_bff.tree||_bff.tree!=this.tree){return false;}var root=_bff.tree.domNode;var ids=_bff.selection;var node=_c00.parentNode;while(node!=root&&!ids[node.id]){node=node.parentNode;}return node.id&&ids[node.id];},_unmarkTargetAnchor:function(){if(!this.targetAnchor){return;}this._removeItemClass(this.targetAnchor.rowNode,this.dropPosition);this.targetAnchor=null;this.targetBox=null;this.dropPosition=null;},_markDndStatus:function(copy){this._changeState("Source",copy?"Copied":"Moved");}});return _be2;});},"dojox/storage/CookieStorageProvider":function(){define(["dijit","dojo","dojox","dojo/require!dojox/storage/Provider,dojox/storage/manager,dojo/cookie"],function(_c01,dojo,_c02){dojo.provide("dojox.storage.CookieStorageProvider");dojo.require("dojox.storage.Provider");dojo.require("dojox.storage.manager");dojo.require("dojo.cookie");dojo.declare("dojox.storage.CookieStorageProvider",[_c02.storage.Provider],{store:null,cookieName:"dojoxStorageCookie",storageLife:730,initialize:function(){this.store=dojo.fromJson(dojo.cookie(this.cookieName))||{};this.initialized=true;_c02.storage.manager.loaded();},isAvailable:function(){return dojo.cookie.isSupported();},put:function(key,_c03,_c04,_c05){this._assertIsValidKey(key);_c05=_c05||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_c05);fullKey=this.getFullKey(key,_c05);this.store[fullKey]=dojo.toJson(_c03);this._save();var _c06=dojo.toJson(this.store)===dojo.cookie(this.cookieName);if(!_c06){this.remove(key,_c05);}if(_c04){_c04(_c06?this.SUCCESS:this.FAILED,key,null,_c05);}},get:function(key,_c07){this._assertIsValidKey(key);_c07=_c07||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_c07);key=this.getFullKey(key,_c07);return this.store[key]?dojo.fromJson(this.store[key]):null;},getKeys:function(_c08){_c08=_c08||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_c08);_c08="__"+_c08+"_";var keys=[];for(var _c09 in this.store){if(this._beginsWith(_c09,_c08)){_c09=_c09.substring(_c08.length);keys.push(_c09);}}return keys;},clear:function(_c0a){_c0a=_c0a||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_c0a);_c0a="__"+_c0a+"_";for(var _c0b in this.store){if(this._beginsWith(_c0b,_c0a)){delete (this.store[_c0b]);}}this._save();},remove:function(key,_c0c){_c0c=_c0c||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_c0c);this._assertIsValidKey(key);key=this.getFullKey(key,_c0c);delete this.store[key];this._save();},getNamespaces:function(){var _c0d=[this.DEFAULT_NAMESPACE];var _c0e={};_c0e[this.DEFAULT_NAMESPACE]=true;var _c0f=/^__([^_]*)_/;for(var _c10 in this.store){if(_c0f.test(_c10)==true){var _c11=_c10.match(_c0f)[1];if(typeof _c0e[_c11]=="undefined"){_c0e[_c11]=true;_c0d.push(_c11);}}}return _c0d;},isPermanent:function(){return true;},getMaximumSize:function(){return 4;},hasSettingsUI:function(){return false;},isValidKey:function(_c12){if(_c12===null||_c12===undefined){return false;}return /^[0-9A-Za-z_-]*$/.test(_c12);},isValidNamespace:function(_c13){if(_c13===null||_c13===undefined){return false;}return /^[0-9A-Za-z-]*$/.test(_c13);},getFullKey:function(key,_c14){return "__"+_c14+"_"+key;},_save:function(){dojo.cookie(this.cookieName,dojo.toJson(this.store),{expires:this.storageLife});},_beginsWith:function(_c15,_c16){if(_c16.length>_c15.length){return false;}return _c15.substring(0,_c16.length)===_c16;},_assertIsValidNamespace:function(_c17){if(this.isValidNamespace(_c17)===false){throw new Error("Invalid namespace given: "+_c17);}},_assertIsValidKey:function(key){if(this.isValidKey(key)===false){throw new Error("Invalid key given: "+key);}}});_c02.storage.manager.register("dojox.storage.CookieStorageProvider",new _c02.storage.CookieStorageProvider());});},"esriviewer/ui/accordion/ToolsAccordion":function(){define(["dojo/_base/declare","dojo/text!./template/ToolsAccordionTemplate.html","dojo/topic","dojo/_base/lang","dojo/on","dijit/layout/AccordionContainer","dojo/dom-style","dojo/dom-class","dojo/dom-attr","dojo/dom-construct","dojo/dnd/Moveable","../base/UITemplatedWidget"],function(_c18,_c19,_c1a,lang,on,_c1b,_c1c,_c1d,_c1e,_c1f,_c20,_c21){return _c18([_c21],{templateString:_c19,isPositionedByConfig:true,positionForHeader:false,headerVisiblePositioning:{x:75,y:125},defaultPositioning:{x:75,y:100},allowCollapse:true,movable:false,isFirstAddedItem:true,showOnLoad:true,positioningParamName:"accordion",returnToOriginOnShow:true,constructor:function(){this.accordion=new _c1b();_c1d.add(this.accordion.domNode,"toolsAccordion");this.visible=true;},postCreate:function(){this.inherited(arguments);if(this.allowCollapse){this.addMinimizeIcon();}_c1f.place(this.accordion.domNode,this.domNode);_c1a.publish(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.LOAD_DEFAULT_TOOLS);if(!this.showOnLoad){this.hide();}if(this.positionForHeader){this.creationPositioning.x=this.headerVisiblePositioning.x;this.creationPositioning.y=this.headerVisiblePositioning.y;}this.returnToOrigin();},loadViewerConfigurationData:function(){var _c22=null;_c1a.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"toolsAccordion",function(_c23){_c22=_c23;});if(_c22&&_c22.showOnLoad!=null){this.showOnLoad=_c22.showOnLoad;}var _c24;_c1a.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"header",function(_c25){_c24=_c25;});if(_c24!=null&&lang.isObject(_c24)){this.positionForHeader=_c24.display===true&&_c24.small!=true;}},initMover:function(){var _c26=_c1f.create("div",{title:"Move",className:"accordionMoveIcon accordionAction move"});_c1f.place(_c26,this.domNode);this.mover=new _c20(this.domNode,{handle:_c26});this.mover.on("move",lang.hitch(VIEWER_UTILS,VIEWER_UTILS.handleContainerMoved));},placeAt:function(node){_c1f.place(this.domNode,node);if(this.toolsAccordionActions){_c1f.place(this.toolsAccordionActions,node);}if(this.movable){this.initMover();}},addMinimizeIcon:function(){if(this.minimizeIconElement==null){this.minimizeIconElement=_c1f.create("div",{title:"Minimize",className:"accordionMimimizeIcon accordionAction minimize"});_c1f.place(this.minimizeIconElement,this.domNode);on(this.minimizeIconElement,"click",lang.hitch(this,this.hide));if(!this.movable){_c1c.set(this.minimizeIconElement,"right","5px");}}},addItem:function(_c27){_c1d.add(_c27.domNode,"accordionChild");this.accordion.addChild(_c27);if(this.isFirstAddedItem){this.isFirstAddedItem=false;this.selectedChild=_c27;}},initListeners:function(){this.inherited(arguments);_c1a.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.TOGGLE,lang.hitch(this,this.toggle));_c1a.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.SHOW,lang.hitch(this,this.show));_c1a.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.HIDE,lang.hitch(this,this.hide));_c1a.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.ADD_ITEM,lang.hitch(this,this.addItem));},startup:function(){this.accordion.startup();},destroy:function(){if(this.imageryDisplayWidget){this.imageryDisplayWidget.destroy();}if(this.imageryQueryFilterManager){this.imageryQueryFilterManager.destroy();}},toggle:function(){if(this.visible){this.hide();}else{this.show();}},show:function(){_c1c.set(this.domNode,"display","block");this.visible=true;if(this.toolsAccordionActions){_c1e.set(this.toolsAccordionActions,"title","Collapse Tools");if(!_c1d.contains(this.toolsAccordionActions,"toolsAccordionCollapserExpanded")){_c1d.add(this.toolsAccordionActions,"toolsAccordionCollapserExpanded");}_c1d.remove(this.toolsAccordionActions,"toolsAccordionCollapserCollapsed");}if(this.returnToOriginOnShow){this.returnToOrigin();}},returnToOrigin:function(){_c1c.set(this.domNode,this.creationPositioning.alignX,this.creationPositioning.x+"px");_c1c.set(this.domNode,this.creationPositioning.alignY,this.creationPositioning.y+"px");},hide:function(){_c1c.set(this.domNode,"display","none");this.visible=false;if(this.toolsAccordionActions){_c1e.set(this.toolsAccordionActions,"title","Show Tools");if(!_c1d.contains(this.toolsAccordionActions,"toolsAccordionCollapserCollapsed")){_c1d.add(this.toolsAccordionActions,"toolsAccordionCollapserCollapsed");}_c1d.remove(this.toolsAccordionActions,"toolsAccordionCollapserExpanded");}_c1a.publish(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.HIDE_COMPLETE);},toggleVisibility:function(){if(this.visible){this.hide();}else{this.show();}},selectChild:function(_c28){this.accordion.selectChild(_c28);this.selectedChild=_c28;}});});},"esriviewer/ui/draw/base/GraphicsLocalStorageMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","dojo/topic"],function(_c29,lang,has,_c2a){return _c29([],{localStoragePersistSupported:true,constructor:function(){if(!(has("ie")<8)){this.localStoragePersistSupported=false;}this.storageProvider=dojox.storage.manager.getProvider();if(this.storageProvider){this.localStoragePersistSupported=true;}this.persistedUserGraphics=this.loadPersistedUserGraphics();},deleteUserPersistedGraphics:function(_c2b){if(this.persistUserGraphicsLabelExists(_c2b)){delete this.persistedUserGraphics[_c2b];this.persist();}var _c2c=false;for(var key in this.persistedUserGraphics){_c2c=true;break;}return _c2c;},persistUserGraphicsLabelExists:function(_c2d){return this.persistedUserGraphics[_c2d]!=null;},persistUserGraphics:function(_c2e,_c2f){if(_c2e==null||_c2e==""||_c2f==null||!lang.isArray(_c2f)||_c2f.length==0){return null;}if(this.persistUserGraphicsLabelExists(_c2e)){VIEWER_UTILS.log("Attempted to save graphics with an existing label: "+_c2e,VIEWER_GLOBALS.LOG_TYPE.ERROR);_c2a.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Cannot save graphics. Label already exists.");return null;}else{var _c30=[];for(var i=0;i<_c2f.length;i++){_c30.push({label:_c2f[i].label,graphic:_c2f[i].graphic.toJson()});}var _c31={label:_c2e,graphics:_c30};this.persistedUserGraphics[_c2e]=_c31;this.persist();VIEWER_UTILS.log("Saved graphics with label: "+_c2e,VIEWER_GLOBALS.LOG_TYPE.INFO);_c2a.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Graphics Saved");return _c31;}},loadPersistedUserGraphics:function(){if(this.storageProvider){if(this.storageProvider.hasKey(VIEWER_GLOBALS.STORAGE.LABELS.USER_GRAPHICS)){return this.storageProvider.get(VIEWER_GLOBALS.STORAGE.LABELS.USER_GRAPHICS);}}return {};},persist:function(){this.storageProvider.put(VIEWER_GLOBALS.STORAGE.LABELS.USER_GRAPHICS,this.persistedUserGraphics);}});});},"esriviewer/ui/navigation/NavigationWidget":function(){define(["dojo/_base/declare","dojo/text!./template/NavigationWidgetTemplate.html","dojo/topic","dojo/dom-class","../base/UITemplatedWidget","dojo/_base/lang","dojo/on","./model/NavigationWidgetViewModel"],function(_c32,_c33,_c34,_c35,_c36,lang,on,_c37){return _c32([_c36],{defaultPositioning:{y:5,x:0},positionWithSmallHeader:false,isPositionedByConfig:true,positioningParamName:"navigation",templateString:_c33,constructor:function(_c38){lang.mixin(this,_c38||{});this.visible=true;},postCreate:function(){this.viewModel=new _c37();this.inherited(arguments);ko.applyBindings(this.viewModel,this.domNode);if(this.positionWithSmallHeader){_c35.add(this.navigationToolbar,"navigationWithSmallHeaderPositioning");}this.show();},loadViewerConfigurationData:function(){var _c39;_c34.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"header",function(_c3a){_c39=_c3a;});if(_c39!=null&&lang.isObject(_c39)){this.positionWithSmallHeader=_c39.display===true&&_c39.small===true;}},handleToggle:function(){this.viewModel.visible(!this.viewModel.visible());},show:function(){this.viewModel.visible(true);},hide:function(){this.viewModel.visible(false);}});});},"dojox/storage/FlashStorageProvider":function(){define(["dijit","dojo","dojox","dojo/require!dojox/flash,dojox/storage/manager,dojox/storage/Provider"],function(_c3b,dojo,_c3c){dojo.provide("dojox.storage.FlashStorageProvider");dojo.require("dojox.flash");dojo.require("dojox.storage.manager");dojo.require("dojox.storage.Provider");dojo.declare("dojox.storage.FlashStorageProvider",_c3c.storage.Provider,{initialized:false,_available:null,_statusHandler:null,_flashReady:false,_pageReady:false,initialize:function(){if(dojo.config["disableFlashStorage"]==true){return;}_c3c.flash.addLoadedListener(dojo.hitch(this,function(){this._flashReady=true;if(this._flashReady&&this._pageReady){this._loaded();}}));var _c3d=dojo.moduleUrl("dojox","storage/Storage.swf").toString();_c3c.flash.setSwf(_c3d,false);dojo.connect(dojo,"loaded",this,function(){this._pageReady=true;if(this._flashReady&&this._pageReady){this._loaded();}});},setFlushDelay:function(_c3e){if(_c3e===null||typeof _c3e==="undefined"||isNaN(_c3e)){throw new Error("Invalid argunment: "+_c3e);}_c3c.flash.comm.setFlushDelay(String(_c3e));},getFlushDelay:function(){return Number(_c3c.flash.comm.getFlushDelay());},flush:function(_c3f){if(_c3f==null||typeof _c3f=="undefined"){_c3f=_c3c.storage.DEFAULT_NAMESPACE;}_c3c.flash.comm.flush(_c3f);},isAvailable:function(){return (this._available=!dojo.config["disableFlashStorage"]);},put:function(key,_c40,_c41,_c42){if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}if(!_c42){_c42=_c3c.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_c42)){throw new Error("Invalid namespace given: "+_c42);}this._statusHandler=_c41;if(dojo.isString(_c40)){_c40="string:"+_c40;}else{_c40=dojo.toJson(_c40);}_c3c.flash.comm.put(key,_c40,_c42);},putMultiple:function(keys,_c43,_c44,_c45){if(!this.isValidKeyArray(keys)||!_c43 instanceof Array||keys.length!=_c43.length){throw new Error("Invalid arguments: keys = ["+keys+"], values = ["+_c43+"]");}if(!_c45){_c45=_c3c.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_c45)){throw new Error("Invalid namespace given: "+_c45);}this._statusHandler=_c44;var _c46=keys.join(",");var _c47=[];for(var i=0;i<_c43.length;i++){if(dojo.isString(_c43[i])){_c43[i]="string:"+_c43[i];}else{_c43[i]=dojo.toJson(_c43[i]);}_c47[i]=_c43[i].length;}var _c48=_c43.join("");var _c49=_c47.join(",");_c3c.flash.comm.putMultiple(_c46,_c48,_c49,_c45);},get:function(key,_c4a){if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}if(!_c4a){_c4a=_c3c.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_c4a)){throw new Error("Invalid namespace given: "+_c4a);}var _c4b=_c3c.flash.comm.get(key,_c4a);if(_c4b==""){return null;}return this._destringify(_c4b);},getMultiple:function(keys,_c4c){if(!this.isValidKeyArray(keys)){throw new ("Invalid key array given: "+keys);}if(!_c4c){_c4c=_c3c.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_c4c)){throw new Error("Invalid namespace given: "+_c4c);}var _c4d=keys.join(",");var _c4e=_c3c.flash.comm.getMultiple(_c4d,_c4c);var _c4f=eval("("+_c4e+")");for(var i=0;i<_c4f.length;i++){_c4f[i]=(_c4f[i]=="")?null:this._destringify(_c4f[i]);}return _c4f;},_destringify:function(_c50){if(dojo.isString(_c50)&&(/^string:/.test(_c50))){_c50=_c50.substring("string:".length);}else{_c50=dojo.fromJson(_c50);}return _c50;},getKeys:function(_c51){if(!_c51){_c51=_c3c.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_c51)){throw new Error("Invalid namespace given: "+_c51);}var _c52=_c3c.flash.comm.getKeys(_c51);if(_c52==null||_c52=="null"){_c52="";}_c52=_c52.split(",");_c52.sort();return _c52;},getNamespaces:function(){var _c53=_c3c.flash.comm.getNamespaces();if(_c53==null||_c53=="null"){_c53=_c3c.storage.DEFAULT_NAMESPACE;}_c53=_c53.split(",");_c53.sort();return _c53;},clear:function(_c54){if(!_c54){_c54=_c3c.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_c54)){throw new Error("Invalid namespace given: "+_c54);}_c3c.flash.comm.clear(_c54);},remove:function(key,_c55){if(!_c55){_c55=_c3c.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_c55)){throw new Error("Invalid namespace given: "+_c55);}_c3c.flash.comm.remove(key,_c55);},removeMultiple:function(keys,_c56){if(!this.isValidKeyArray(keys)){dojo.raise("Invalid key array given: "+keys);}if(!_c56){_c56=_c3c.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_c56)){throw new Error("Invalid namespace given: "+_c56);}var _c57=keys.join(",");_c3c.flash.comm.removeMultiple(_c57,_c56);},isPermanent:function(){return true;},getMaximumSize:function(){return _c3c.storage.SIZE_NO_LIMIT;},hasSettingsUI:function(){return true;},showSettingsUI:function(){_c3c.flash.comm.showSettings();_c3c.flash.obj.setVisible(true);_c3c.flash.obj.center();},hideSettingsUI:function(){_c3c.flash.obj.setVisible(false);if(dojo.isFunction(_c3c.storage.onHideSettingsUI)){_c3c.storage.onHideSettingsUI.call(null);}},getResourceList:function(){return [];},_loaded:function(){this._allNamespaces=this.getNamespaces();this.initialized=true;_c3c.storage.manager.loaded();},_onStatus:function(_c58,key,_c59){var ds=_c3c.storage;var dfo=_c3c.flash.obj;if(_c58==ds.PENDING){dfo.center();dfo.setVisible(true);}else{dfo.setVisible(false);}if(ds._statusHandler){ds._statusHandler.call(null,_c58,key,null,_c59);}}});_c3c.storage.manager.register("dojox.storage.FlashStorageProvider",new _c3c.storage.FlashStorageProvider());});},"esriviewer/ui/transparency/LayersTransparencyWindowWidget":function(){define(["dojo/_base/declare","dojo/topic","dojo/dom-class","dojo/_base/lang","../window/WindowWidget"],function(_c5a,_c5b,_c5c,lang,_c5d){return _c5a([_c5d],{defaultPositioning:{x:700,y:50},windowHeight:"250px",windowWidth:"300px",windowHeaderText:"Layer Transparency",windowIconAltText:"Layer Transparency",windowIconClass:"commonIcons16 slider",positioningParamName:"layerTransparency",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_c5c.add(this.windowContent,"layerTransparencyWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/transparency/LayersTransparencyWidget"],lang.hitch(this,function(_c5e){this.layersTransparencyWidget=new _c5e();this.setContent(this.layersTransparencyWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_c5b.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.TRANSPARENCY.WINDOW.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_c5b.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.TRANSPARENCY.WINDOW.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_c5b.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.TRANSPARENCY.WINDOW.TOGGLE,lang.hitch(this,this.toggle)));}});});},"esriviewer/ui/messaging/MessagingWidget":function(){define(["dojo/_base/declare","dojo/text!./template/MessagingWidgetTemplate.html","dojo/topic","dojo/_base/lang","../base/UITemplatedWidget","dojox/timing","./model/MessagingWidgetViewModel"],function(_c5f,_c60,_c61,lang,_c62,_c63,_c64){return _c5f([_c62],{templateString:_c60,defaultTimerInterval:4000,isPositionedByConfig:true,defaultPositioning:{x:375,y:50},positioningParamName:"messaging",postCreate:function(){this.inherited(arguments);this.viewModel=new _c64();ko.applyBindings(this.viewModel,this.domNode);this.messageTimer=new dojox.timing.Timer(this.defaultTimerInterval);this.messageTimer.onTick=lang.hitch(this,this.hideMessage);this.hideMessage();},initListeners:function(){this.inherited(arguments);_c61.subscribe(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,lang.hitch(this,this.showMessage));_c61.subscribe(VIEWER_GLOBALS.EVENTS.MESSAGING.HIDE,lang.hitch(this,this.hideMessage));},showMessage:function(_c65,_c66){this.viewModel.showMessage(_c65);_c66=(_c66==null)?this.defaultTimerInterval:_c66;this.messageTimer.setInterval(_c66);this.messageTimer.start();},hideMessage:function(){if(this.messageTimer){this.messageTimer.stop();}this.viewModel.hideMessage();}});});},"esriviewer/ui/pointupload/PointUploadWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/window","dojo/dom-class","../window/WindowWidget"],function(_c67,lang,_c68,_c69,_c6a,_c6b){return _c67([_c6b],{defaultPositioning:{x:510,y:45},windowWidth:"20%",windowHeaderText:"CSV Point Upload",windowIconAltText:"CSV Point Upload",windowIconClass:"commonIcons16 upload",positioningParamName:"pointUpload",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/pointupload/PointUploadWidget"],lang.hitch(this,function(_c6c){this.pointUploadWidget=new _c6c();this.setContent(this.pointUploadWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_c68.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.POINT_UPLOAD.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_c68.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.POINT_UPLOAD.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_c68.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.POINT_UPLOAD.TOGGLE,lang.hitch(this,this.toggle)));}});});},"esriviewer/ui/messaging/model/MessagingWidgetViewModel":function(){define(["dojo/_base/declare"],function(_c6d){return _c6d([],{constructor:function(){this.message=ko.observable("");this.visible=ko.observable(false);},showMessage:function(_c6e){if(_c6e!=null&&_c6e!=""){this.visible(true);this.message(_c6e);}},hideMessage:function(){this.visible(false);}});});},"dojo/request/notify":function(){define(["../Evented","../_base/lang","./util"],function(_c6f,lang,util){var _c70=0,_c71=[].slice;var hub=lang.mixin(new _c6f,{onsend:function(data){if(!_c70){this.emit("start");}_c70++;},_onload:function(data){this.emit("done",data);},_onerror:function(data){this.emit("done",data);},_ondone:function(data){if(--_c70<=0){_c70=0;this.emit("stop");}},emit:function(type,_c72){var _c73=_c6f.prototype.emit.apply(this,arguments);if(this["_on"+type]){this["_on"+type].apply(this,_c71.call(arguments,1));}return _c73;}});function _c74(type,_c75){return hub.on(type,_c75);};_c74.emit=function(type,_c76,_c77){return hub.emit(type,_c76,_c77);};return util.notify=_c74;});},"esriviewer/ui/draw/configure/geometry/model/ConfigureLineViewModel":function(){define(["dojo/_base/declare","esri/symbols/SimpleLineSymbol"],function(_c78,_c79){return _c78([],{lineStyles:ko.observableArray([{value:_c79.STYLE_DASH,label:"Dashed Line"},{value:_c79.STYLE_DASHDOT,label:"Dash Dot Line"},{value:_c79.STYLE_DASHDOTDOT,label:"Dash Dot Dot Line"},{value:_c79.STYLE_DOT,label:"Dotted Line"},{value:_c79.STYLE_SOLID,label:"Solid Line"},{value:_c79.STYLE_NULL,label:"None"}]),lineWidths:ko.observableArray([1,2,3,4,5,6,7,8,9,10,15,20,25,30,40,50]),constructor:function(){this.selectedLineStyle=ko.observable(_c79.STYLE_SOLID);this.selectedWidth=ko.observable(2);}});});},"dijit/form/HorizontalSlider":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dnd/move","dojo/_base/fx","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/dnd/Moveable","dojo/dnd/Mover","dojo/query","dojo/mouse","dojo/on","../_base/manager","../focus","../typematic","./Button","./_FormValueWidget","../_Container","dojo/text!./templates/HorizontalSlider.html"],function(_c7a,_c7b,move,fx,_c7c,_c7d,keys,lang,has,_c7e,_c7f,_c80,_c81,on,_c82,_c83,_c84,_c85,_c86,_c87,_c88){var _c89=_c7b("dijit.form._SliderMover",_c7f,{onMouseMove:function(e){var _c8a=this.widget;var _c8b=_c8a._abspos;if(!_c8b){_c8b=_c8a._abspos=_c7c.position(_c8a.sliderBarContainer,true);_c8a._setPixelValue_=lang.hitch(_c8a,"_setPixelValue");_c8a._isReversed_=_c8a._isReversed();}var _c8c=e[_c8a._mousePixelCoord]-_c8b[_c8a._startingPixelCoord];_c8a._setPixelValue_(_c8a._isReversed_?(_c8b[_c8a._pixelCount]-_c8c):_c8c,_c8b[_c8a._pixelCount],false);},destroy:function(e){_c7f.prototype.destroy.apply(this,arguments);var _c8d=this.widget;_c8d._abspos=null;_c8d._setValueAttr(_c8d.value,true);}});var _c8e=_c7b("dijit.form.HorizontalSlider",[_c86,_c87],{templateString:_c88,value:0,showButtons:true,minimum:0,maximum:100,discreteValues:Infinity,pageIncrement:2,clickSelect:true,slideDuration:_c82.defaultDuration,_setIdAttr:"",_setNameAttr:"valueNode",baseClass:"dijitSlider",cssStateNodes:{incrementButton:"dijitSliderIncrementButton",decrementButton:"dijitSliderDecrementButton",focusNode:"dijitSliderThumb"},_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_handleOffsetCoord:"left",_progressPixelSize:"width",_onKeyUp:function(e){if(this.disabled||this.readOnly||e.altKey||e.ctrlKey||e.metaKey){return;}this._setValueAttr(this.value,true);},_onKeyDown:function(e){if(this.disabled||this.readOnly||e.altKey||e.ctrlKey||e.metaKey){return;}switch(e.keyCode){case keys.HOME:this._setValueAttr(this.minimum,false);break;case keys.END:this._setValueAttr(this.maximum,false);break;case ((this._descending||this.isLeftToRight())?keys.RIGHT_ARROW:keys.LEFT_ARROW):case (this._descending===false?keys.DOWN_ARROW:keys.UP_ARROW):case (this._descending===false?keys.PAGE_DOWN:keys.PAGE_UP):this.increment(e);break;case ((this._descending||this.isLeftToRight())?keys.LEFT_ARROW:keys.RIGHT_ARROW):case (this._descending===false?keys.UP_ARROW:keys.DOWN_ARROW):case (this._descending===false?keys.PAGE_UP:keys.PAGE_DOWN):this.decrement(e);break;default:return;}e.stopPropagation();e.preventDefault();},_onHandleClick:function(e){if(this.disabled||this.readOnly){return;}if(!has("ie")){_c83.focus(this.sliderHandle);}e.stopPropagation();e.preventDefault();},_isReversed:function(){return !this.isLeftToRight();},_onBarClick:function(e){if(this.disabled||this.readOnly||!this.clickSelect){return;}_c83.focus(this.sliderHandle);e.stopPropagation();e.preventDefault();var _c8f=_c7c.position(this.sliderBarContainer,true);var _c90=e[this._mousePixelCoord]-_c8f[this._startingPixelCoord];this._setPixelValue(this._isReversed()?(_c8f[this._pixelCount]-_c90):_c90,_c8f[this._pixelCount],true);this._movable.onMouseDown(e);},_setPixelValue:function(_c91,_c92,_c93){if(this.disabled||this.readOnly){return;}var _c94=this.discreteValues;if(_c94<=1||_c94==Infinity){_c94=_c92;}_c94--;var _c95=_c92/_c94;var _c96=Math.round(_c91/_c95);this._setValueAttr(Math.max(Math.min((this.maximum-this.minimum)*_c96/_c94+this.minimum,this.maximum),this.minimum),_c93);},_setValueAttr:function(_c97,_c98){this._set("value",_c97);this.valueNode.value=_c97;this.focusNode.setAttribute("aria-valuenow",_c97);this.inherited(arguments);var _c99=(_c97-this.minimum)/(this.maximum-this.minimum);var _c9a=(this._descending===false)?this.remainingBar:this.progressBar;var _c9b=(this._descending===false)?this.progressBar:this.remainingBar;if(this._inProgressAnim&&this._inProgressAnim.status!="stopped"){this._inProgressAnim.stop(true);}if(_c98&&this.slideDuration>0&&_c9a.style[this._progressPixelSize]){var _c9c=this;var _c9d={};var _c9e=parseFloat(_c9a.style[this._progressPixelSize]);var _c9f=this.slideDuration*(_c99-_c9e/100);if(_c9f==0){return;}if(_c9f<0){_c9f=0-_c9f;}_c9d[this._progressPixelSize]={start:_c9e,end:_c99*100,units:"%"};this._inProgressAnim=fx.animateProperty({node:_c9a,duration:_c9f,onAnimate:function(v){_c9b.style[_c9c._progressPixelSize]=(100-parseFloat(v[_c9c._progressPixelSize]))+"%";},onEnd:function(){delete _c9c._inProgressAnim;},properties:_c9d});this._inProgressAnim.play();}else{_c9a.style[this._progressPixelSize]=(_c99*100)+"%";_c9b.style[this._progressPixelSize]=((1-_c99)*100)+"%";}},_bumpValue:function(_ca0,_ca1){if(this.disabled||this.readOnly){return;}var s=_c7d.getComputedStyle(this.sliderBarContainer);var c=_c7c.getContentBox(this.sliderBarContainer,s);var _ca2=this.discreteValues;if(_ca2<=1||_ca2==Infinity){_ca2=c[this._pixelCount];}_ca2--;var _ca3=(this.value-this.minimum)*_ca2/(this.maximum-this.minimum)+_ca0;if(_ca3<0){_ca3=0;}if(_ca3>_ca2){_ca3=_ca2;}_ca3=_ca3*(this.maximum-this.minimum)/_ca2+this.minimum;this._setValueAttr(_ca3,_ca1);},_onClkBumper:function(val){if(this.disabled||this.readOnly||!this.clickSelect){return;}this._setValueAttr(val,true);},_onClkIncBumper:function(){this._onClkBumper(this._descending===false?this.minimum:this.maximum);},_onClkDecBumper:function(){this._onClkBumper(this._descending===false?this.maximum:this.minimum);},decrement:function(e){this._bumpValue(e.keyCode==keys.PAGE_DOWN?-this.pageIncrement:-1);},increment:function(e){this._bumpValue(e.keyCode==keys.PAGE_UP?this.pageIncrement:1);},_mouseWheeled:function(evt){evt.stopPropagation();evt.preventDefault();this._bumpValue(evt.wheelDelta<0?-1:1,true);},startup:function(){if(this._started){return;}_c7a.forEach(this.getChildren(),function(_ca4){if(this[_ca4.container]!=this.containerNode){this[_ca4.container].appendChild(_ca4.domNode);}},this);this.inherited(arguments);},_typematicCallback:function(_ca5,_ca6,e){if(_ca5==-1){this._setValueAttr(this.value,true);}else{this[(_ca6==(this._descending?this.incrementButton:this.decrementButton))?"decrement":"increment"](e);}},buildRendering:function(){this.inherited(arguments);if(this.showButtons){this.incrementButton.style.display="";this.decrementButton.style.display="";}var _ca7=_c80("label[for=\""+this.id+"\"]");if(_ca7.length){if(!_ca7[0].id){_ca7[0].id=this.id+"_label";}this.focusNode.setAttribute("aria-labelledby",_ca7[0].id);}this.focusNode.setAttribute("aria-valuemin",this.minimum);this.focusNode.setAttribute("aria-valuemax",this.maximum);},postCreate:function(){this.inherited(arguments);if(this.showButtons){this.own(_c84.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500),_c84.addMouseListener(this.incrementButton,this,"_typematicCallback",25,500));}this.own(on(this.domNode,_c81.wheel,lang.hitch(this,"_mouseWheeled")));var _ca8=_c7b(_c89,{widget:this});this._movable=new _c7e(this.sliderHandle,{mover:_ca8});this._layoutHackIE7();},destroy:function(){this._movable.destroy();if(this._inProgressAnim&&this._inProgressAnim.status!="stopped"){this._inProgressAnim.stop(true);}this.inherited(arguments);}});_c8e._Mover=_c89;return _c8e;});},"dojox/layout/ResizeHandle":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/connect","dojo/_base/array","dojo/_base/event","dojo/_base/fx","dojo/_base/window","dojo/fx","dojo/window","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dijit/_base/manager","dijit/_Widget","dijit/_TemplatedMixin","dojo/_base/declare"],function(_ca9,lang,_caa,_cab,_cac,_cad,_cae,_caf,_cb0,_cb1,_cb2,_cb3,_cb4,_cb5,_cb6,_cb7,_cb8){_ca9.experimental("dojox.layout.ResizeHandle");var _cb9=_cb8("dojox.layout.ResizeHandle",[_cb6,_cb7],{targetId:"",targetContainer:null,resizeAxis:"xy",activeResize:false,activeResizeClass:"dojoxResizeHandleClone",animateSizing:true,animateMethod:"chain",animateDuration:225,minHeight:100,minWidth:100,constrainMax:false,maxHeight:0,maxWidth:0,fixedAspect:false,intermediateChanges:false,startTopic:"/dojo/resize/start",endTopic:"/dojo/resize/stop",templateString:"<div dojoAttachPoint=\"resizeHandle\" class=\"dojoxResizeHandle\"><div></div></div>",postCreate:function(){this.connect(this.resizeHandle,"onmousedown","_beginSizing");if(!this.activeResize){this._resizeHelper=_cb5.byId("dojoxGlobalResizeHelper");if(!this._resizeHelper){this._resizeHelper=new _cba({id:"dojoxGlobalResizeHelper"}).placeAt(_cae.body());_cb2.add(this._resizeHelper.domNode,this.activeResizeClass);}}else{this.animateSizing=false;}if(!this.minSize){this.minSize={w:this.minWidth,h:this.minHeight};}if(this.constrainMax){this.maxSize={w:this.maxWidth,h:this.maxHeight};}this._resizeX=this._resizeY=false;var _cbb=lang.partial(_cb2.add,this.resizeHandle);switch(this.resizeAxis.toLowerCase()){case "xy":this._resizeX=this._resizeY=true;_cbb("dojoxResizeNW");break;case "x":this._resizeX=true;_cbb("dojoxResizeW");break;case "y":this._resizeY=true;_cbb("dojoxResizeN");break;}},_beginSizing:function(e){if(this._isSizing){return;}_caa.publish(this.startTopic,[this]);this.targetWidget=_cb5.byId(this.targetId);this.targetDomNode=this.targetWidget?this.targetWidget.domNode:_cb1.byId(this.targetId);if(this.targetContainer){this.targetDomNode=this.targetContainer;}if(!this.targetDomNode){return;}if(!this.activeResize){var c=_cb3.position(this.targetDomNode,true);this._resizeHelper.resize({l:c.x,t:c.y,w:c.w,h:c.h});this._resizeHelper.show();if(!this.isLeftToRight()){this._resizeHelper.startPosition={l:c.x,t:c.y};}}this._isSizing=true;this.startPoint={x:e.clientX,y:e.clientY};var _cbc=_cb4.getComputedStyle(this.targetDomNode),_cbd=_cb3.boxModel==="border-model",_cbe=_cbd?{w:0,h:0}:_cb3.getPadBorderExtents(this.targetDomNode,_cbc),_cbf=_cb3.getMarginExtents(this.targetDomNode,_cbc),mb;mb=this.startSize={w:_cb4.get(this.targetDomNode,"width",_cbc),h:_cb4.get(this.targetDomNode,"height",_cbc),pbw:_cbe.w,pbh:_cbe.h,mw:_cbf.w,mh:_cbf.h};if(!this.isLeftToRight()&&dojo.style(this.targetDomNode,"position")=="absolute"){var p=_cb3.position(this.targetDomNode,true);this.startPosition={l:p.x,t:p.y};}this._pconnects=[_caa.connect(_cae.doc,"onmousemove",this,"_updateSizing"),_caa.connect(_cae.doc,"onmouseup",this,"_endSizing")];_cac.stop(e);},_updateSizing:function(e){if(this.activeResize){this._changeSizing(e);}else{var tmp=this._getNewCoords(e,"border",this._resizeHelper.startPosition);if(tmp===false){return;}this._resizeHelper.resize(tmp);}e.preventDefault();},_getNewCoords:function(e,box,_cc0){try{if(!e.clientX||!e.clientY){return false;}}catch(e){return false;}this._activeResizeLastEvent=e;var dx=(this.isLeftToRight()?1:-1)*(this.startPoint.x-e.clientX),dy=this.startPoint.y-e.clientY,newW=this.startSize.w-(this._resizeX?dx:0),newH=this.startSize.h-(this._resizeY?dy:0),r=this._checkConstraints(newW,newH);_cc0=(_cc0||this.startPosition);if(_cc0&&this._resizeX){r.l=_cc0.l+dx;if(r.w!=newW){r.l+=(newW-r.w);}r.t=_cc0.t;}switch(box){case "margin":r.w+=this.startSize.mw;r.h+=this.startSize.mh;case "border":r.w+=this.startSize.pbw;r.h+=this.startSize.pbh;break;}return r;},_checkConstraints:function(newW,newH){if(this.minSize){var tm=this.minSize;if(newW<tm.w){newW=tm.w;}if(newH<tm.h){newH=tm.h;}}if(this.constrainMax&&this.maxSize){var ms=this.maxSize;if(newW>ms.w){newW=ms.w;}if(newH>ms.h){newH=ms.h;}}if(this.fixedAspect){var w=this.startSize.w,h=this.startSize.h,_cc1=w*newH-h*newW;if(_cc1<0){newW=newH*w/h;}else{if(_cc1>0){newH=newW*h/w;}}}return {w:newW,h:newH};},_changeSizing:function(e){var _cc2=this.targetWidget&&lang.isFunction(this.targetWidget.resize),tmp=this._getNewCoords(e,_cc2&&"margin");if(tmp===false){return;}if(_cc2){this.targetWidget.resize(tmp);}else{if(this.animateSizing){var anim=_caf[this.animateMethod]([_cad.animateProperty({node:this.targetDomNode,properties:{width:{start:this.startSize.w,end:tmp.w}},duration:this.animateDuration}),_cad.animateProperty({node:this.targetDomNode,properties:{height:{start:this.startSize.h,end:tmp.h}},duration:this.animateDuration})]);anim.play();}else{_cb4.set(this.targetDomNode,{width:tmp.w+"px",height:tmp.h+"px"});}}if(this.intermediateChanges){this.onResize(e);}},_endSizing:function(e){_cab.forEach(this._pconnects,_caa.disconnect);var pub=lang.partial(_caa.publish,this.endTopic,[this]);if(!this.activeResize){this._resizeHelper.hide();this._changeSizing(e);setTimeout(pub,this.animateDuration+15);}else{pub();}this._isSizing=false;this.onResize(e);},onResize:function(e){}});var _cba=dojo.declare("dojox.layout._ResizeHelper",_cb6,{show:function(){_cb4.set(this.domNode,"display","");},hide:function(){_cb4.set(this.domNode,"display","none");},resize:function(dim){_cb3.setMarginBox(this.domNode,dim);}});return _cb9;});},"dijit/Tree":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/connect","dojo/cookie","dojo/_base/declare","dojo/Deferred","dojo/promise/all","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/errors/create","dojo/fx","dojo/has","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/topic","dojo/touch","dojo/when","./a11yclick","./focus","./registry","./_base/manager","./_Widget","./_TemplatedMixin","./_Container","./_Contained","./_CssStateMixin","./_KeyNavMixin","dojo/text!./templates/TreeNode.html","dojo/text!./templates/Tree.html","./tree/TreeStoreModel","./tree/ForestStoreModel","./tree/_dndSelector","dojo/query!css2"],function(_cc3,_cc4,_cc5,_cc6,_cc7,_cc8,all,dom,_cc9,_cca,_ccb,_ccc,_ccd,has,_cce,keys,lang,on,_ccf,_cd0,when,_cd1,_cd2,_cd3,_cd4,_cd5,_cd6,_cd7,_cd8,_cd9,_cda,_cdb,_cdc,_cdd,_cde,_cdf){function _ce0(d){return lang.delegate(d.promise||d,{addCallback:function(_ce1){this.then(_ce1);},addErrback:function(_ce2){this.otherwise(_ce2);}});};var _ce3=_cc7("dijit._TreeNode",[_cd5,_cd6,_cd7,_cd8,_cd9],{item:null,isTreeNode:true,label:"",_setLabelAttr:function(val){this.labelNode[this.labelType=="html"?"innerHTML":"innerText" in this.labelNode?"innerText":"textContent"]=val;this._set("label",val);},labelType:"text",isExpandable:null,isExpanded:false,state:"NotLoaded",templateString:_cdb,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);if(this.isExpandable){this.labelNode.setAttribute("aria-expanded",this.isExpanded);}this.setSelected(false);},_setIndentAttr:function(_ce4){var _ce5=(Math.max(_ce4,0)*this.tree._nodePixelIndent)+"px";_ccb.set(this.domNode,"backgroundPosition",_ce5+" 0px");_ccb.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",_ce5);_cc3.forEach(this.getChildren(),function(_ce6){_ce6.set("indent",_ce4+1);});this._set("indent",_ce4);},markProcessing:function(){this.state="Loading";this._setExpando(true);},unmarkProcessing:function(){this._setExpando(false);},_updateItemClasses:function(item){var tree=this.tree,_ce7=tree.model;if(tree._v10Compat&&item===_ce7.root){item=null;}this._applyClassAndStyle(item,"icon","Icon");this._applyClassAndStyle(item,"label","Label");this._applyClassAndStyle(item,"row","Row");this.tree._startPaint(true);},_applyClassAndStyle:function(item,_ce8,_ce9){var _cea="_"+_ce8+"Class";var _ceb=_ce8+"Node";var _cec=this[_cea];this[_cea]=this.tree["get"+_ce9+"Class"](item,this.isExpanded);_cc9.replace(this[_ceb],this[_cea]||"",_cec||"");_ccb.set(this[_ceb],this.tree["get"+_ce9+"Style"](item,this.isExpanded)||{});},_updateLayout:function(){var _ced=this.getParent();if(!_ced||!_ced.rowNode||_ced.rowNode.style.display=="none"){_cc9.add(this.domNode,"dijitTreeIsRoot");}else{_cc9.toggle(this.domNode,"dijitTreeIsLast",!this.getNextSibling());}},_setExpando:function(_cee){var _cef=["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"],_cf0=["*","-","+","*"],idx=_cee?0:(this.isExpandable?(this.isExpanded?1:2):3);_cc9.replace(this.expandoNode,_cef[idx],_cef);this.expandoNodeText.innerHTML=_cf0[idx];},expand:function(){if(this._expandDeferred){return _ce0(this._expandDeferred);}if(this._collapseDeferred){this._collapseDeferred.cancel();delete this._collapseDeferred;}this.isExpanded=true;this.labelNode.setAttribute("aria-expanded","true");if(this.tree.showRoot||this!==this.tree.rootNode){this.containerNode.setAttribute("role","group");}_cc9.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);if(this==this.tree.rootNode&&this.tree.showRoot){this.tree.domNode.setAttribute("aria-expanded","true");}var _cf1=_ccd.wipeIn({node:this.containerNode,duration:_cd4.defaultDuration});var def=(this._expandDeferred=new _cc8(function(){_cf1.stop();}));_cc4.after(_cf1,"onEnd",function(){def.resolve(true);},true);_cf1.play();return _ce0(def);},collapse:function(){if(this._collapseDeferred){return _ce0(this._collapseDeferred);}if(this._expandDeferred){this._expandDeferred.cancel();delete this._expandDeferred;}this.isExpanded=false;this.labelNode.setAttribute("aria-expanded","false");if(this==this.tree.rootNode&&this.tree.showRoot){this.tree.domNode.setAttribute("aria-expanded","false");}_cc9.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var _cf2=_ccd.wipeOut({node:this.containerNode,duration:_cd4.defaultDuration});var def=(this._collapseDeferred=new _cc8(function(){_cf2.stop();}));_cc4.after(_cf2,"onEnd",function(){def.resolve(true);},true);_cf2.play();return _ce0(def);},indent:0,setChildItems:function(_cf3){var tree=this.tree,_cf4=tree.model,defs=[];var _cf5=this.getChildren();_cc3.forEach(_cf5,function(_cf6){_cd7.prototype.removeChild.call(this,_cf6);},this);this.defer(function(){_cc3.forEach(_cf5,function(node){if(!node._destroyed&&!node.getParent()){tree.dndController.removeTreeNode(node);function _cf7(node){var id=_cf4.getIdentity(node.item),ary=tree._itemNodesMap[id];if(ary.length==1){delete tree._itemNodesMap[id];}else{var _cf8=_cc3.indexOf(ary,node);if(_cf8!=-1){ary.splice(_cf8,1);}}_cc3.forEach(node.getChildren(),_cf7);};_cf7(node);if(tree.persist){var _cf9=_cc3.map(node.getTreePath(),function(item){return tree.model.getIdentity(item);}).join("/");for(var path in tree._openedNodes){if(path.substr(0,_cf9.length)==_cf9){delete tree._openedNodes[path];}}tree._saveExpandedNodes();}node.destroyRecursive();}});});this.state="Loaded";if(_cf3&&_cf3.length>0){this.isExpandable=true;_cc3.forEach(_cf3,function(item){var id=_cf4.getIdentity(item),_cfa=tree._itemNodesMap[id],node;if(_cfa){for(var i=0;i<_cfa.length;i++){if(_cfa[i]&&!_cfa[i].getParent()){node=_cfa[i];node.set("indent",this.indent+1);break;}}}if(!node){node=this.tree._createTreeNode({item:item,tree:tree,isExpandable:_cf4.mayHaveChildren(item),label:tree.getLabel(item),labelType:(tree.model&&tree.model.labelType)||"text",tooltip:tree.getTooltip(item),ownerDocument:tree.ownerDocument,dir:tree.dir,lang:tree.lang,textDir:tree.textDir,indent:this.indent+1});if(_cfa){_cfa.push(node);}else{tree._itemNodesMap[id]=[node];}}this.addChild(node);if(this.tree.autoExpand||this.tree._state(node)){defs.push(tree._expandNode(node));}},this);_cc3.forEach(this.getChildren(),function(_cfb){_cfb._updateLayout();});}else{this.isExpandable=false;}if(this._setExpando){this._setExpando(false);}this._updateItemClasses(this.item);var def=all(defs);this.tree._startPaint(def);return _ce0(def);},getTreePath:function(){var node=this;var path=[];while(node&&node!==this.tree.rootNode){path.unshift(node.item);node=node.getParent();}path.unshift(this.tree.rootNode.item);return path;},getIdentity:function(){return this.tree.model.getIdentity(this.item);},removeChild:function(node){this.inherited(arguments);var _cfc=this.getChildren();if(_cfc.length==0){this.isExpandable=false;this.collapse();}_cc3.forEach(_cfc,function(_cfd){_cfd._updateLayout();});},makeExpandable:function(){this.isExpandable=true;this._setExpando(false);},setSelected:function(_cfe){this.labelNode.setAttribute("aria-selected",_cfe?"true":"false");_cc9.toggle(this.rowNode,"dijitTreeRowSelected",_cfe);},focus:function(){_cd2.focus(this.focusNode);}});if(has("dojo-bidi")){_ce3.extend({_setTextDirAttr:function(_cff){if(_cff&&((this.textDir!=_cff)||!this._created)){this._set("textDir",_cff);this.applyTextDir(this.labelNode);_cc3.forEach(this.getChildren(),function(_d00){_d00.set("textDir",_cff);},this);}}});}var Tree=_cc7("dijit.Tree",[_cd5,_cda,_cd6,_cd9],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:true,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:false,openOnDblClick:false,templateString:_cdc,persist:false,autoExpand:false,dndController:_cdf,dndParams:["onDndDrop","itemCreator","onDndCancel","checkAcceptance","checkItemAcceptance","dragThreshold","betweenThreshold"],onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(_d01,_d02){_ccf.publish(this.id,lang.mixin({tree:this,event:_d01},_d02||{}));},postMixInProperties:function(){this.tree=this;if(this.autoExpand){this.persist=false;}this._itemNodesMap={};if(!this.cookieName&&this.id){this.cookieName=this.id+"SaveStateCookie";}this.expandChildrenDeferred=new _cc8();this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments);},postCreate:function(){this._initState();var self=this;this.own(on(this.containerNode,on.selector(".dijitTreeNode",_cd0.enter),function(evt){self._onNodeMouseEnter(_cd3.byNode(this),evt);}),on(this.containerNode,on.selector(".dijitTreeNode",_cd0.leave),function(evt){self._onNodeMouseLeave(_cd3.byNode(this),evt);}),on(this.containerNode,_cd1,function(evt){var node=_cd3.getEnclosingWidget(evt.target);if(node.isInstanceOf(_ce3)){self._onClick(node,evt);}}),on(this.containerNode,on.selector(".dijitTreeNode","dblclick"),function(evt){self._onDblClick(_cd3.byNode(this),evt);}));if(!this.model){this._store2model();}this.own(_cc4.after(this.model,"onChange",lang.hitch(this,"_onItemChange"),true),_cc4.after(this.model,"onChildrenChange",lang.hitch(this,"_onItemChildrenChange"),true),_cc4.after(this.model,"onDelete",lang.hitch(this,"_onItemDelete"),true));this.inherited(arguments);if(this.dndController){if(lang.isString(this.dndController)){this.dndController=lang.getObject(this.dndController);}var _d03={};for(var i=0;i<this.dndParams.length;i++){if(this[this.dndParams[i]]){_d03[this.dndParams[i]]=this[this.dndParams[i]];}}this.dndController=new this.dndController(this,_d03);}this._load();this.onLoadDeferred=_ce0(this.pendingCommandsPromise);this.onLoadDeferred.then(lang.hitch(this,"onLoad"));},_store2model:function(){this._v10Compat=true;_cce.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var _d04={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};if(this.params.mayHaveChildren){_d04.mayHaveChildren=lang.hitch(this,"mayHaveChildren");}if(this.params.getItemChildren){_d04.getChildren=lang.hitch(this,function(item,_d05,_d06){this.getItemChildren((this._v10Compat&&item===this.model.root)?null:item,_d05,_d06);});}this.model=new _cde(_d04);this.showRoot=Boolean(this.label);},onLoad:function(){},_load:function(){this.model.getRoot(lang.hitch(this,function(item){var rn=(this.rootNode=this.tree._createTreeNode({item:item,tree:this,isExpandable:true,label:this.label||this.getLabel(item),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1}));if(!this.showRoot){rn.rowNode.style.display="none";this.domNode.setAttribute("role","presentation");this.domNode.removeAttribute("aria-expanded");this.domNode.removeAttribute("aria-multiselectable");if(this["aria-label"]){rn.containerNode.setAttribute("aria-label",this["aria-label"]);this.domNode.removeAttribute("aria-label");}else{if(this["aria-labelledby"]){rn.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]);this.domNode.removeAttribute("aria-labelledby");}}rn.labelNode.setAttribute("role","presentation");rn.containerNode.setAttribute("role","tree");rn.containerNode.setAttribute("aria-expanded","true");rn.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular);}else{this.domNode.setAttribute("aria-multiselectable",!this.dndController.singular);this.rootLoadingIndicator.style.display="none";}this.containerNode.appendChild(rn.domNode);var _d07=this.model.getIdentity(item);if(this._itemNodesMap[_d07]){this._itemNodesMap[_d07].push(rn);}else{this._itemNodesMap[_d07]=[rn];}rn._updateLayout();this._expandNode(rn).then(lang.hitch(this,function(){this.rootLoadingIndicator.style.display="none";this.expandChildrenDeferred.resolve(true);}));}),lang.hitch(this,function(err){}));},getNodesByItem:function(item){if(!item){return [];}var _d08=lang.isString(item)?item:this.model.getIdentity(item);return [].concat(this._itemNodesMap[_d08]);},_setSelectedItemAttr:function(item){this.set("selectedItems",[item]);},_setSelectedItemsAttr:function(_d09){var tree=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(lang.hitch(this,function(){var _d0a=_cc3.map(_d09,function(item){return (!item||lang.isString(item))?item:tree.model.getIdentity(item);});var _d0b=[];_cc3.forEach(_d0a,function(id){_d0b=_d0b.concat(tree._itemNodesMap[id]||[]);});this.set("selectedNodes",_d0b);}));},_setPathAttr:function(path){if(path.length){return _ce0(this.set("paths",[path]).then(function(_d0c){return _d0c[0];}));}else{return _ce0(this.set("paths",[]).then(function(_d0d){return _d0d[0];}));}},_setPathsAttr:function(_d0e){var tree=this;function _d0f(path,_d10){var _d11=path.shift();var _d12=_cc3.filter(_d10,function(node){return node.getIdentity()==_d11;})[0];if(!!_d12){if(path.length){return tree._expandNode(_d12).then(function(){return _d0f(path,_d12.getChildren());});}else{return _d12;}}else{throw new Tree.PathError("Could not expand path at "+_d11);}};return _ce0(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return all(_cc3.map(_d0e,function(path){path=_cc3.map(path,function(item){return lang.isString(item)?item:tree.model.getIdentity(item);});if(path.length){return _d0f(path,[tree.rootNode]);}else{throw new Tree.PathError("Empty path");}}));}).then(function setNodes(_d13){tree.set("selectedNodes",_d13);return tree.paths;}));},_setSelectedNodeAttr:function(node){this.set("selectedNodes",[node]);},_setSelectedNodesAttr:function(_d14){this.dndController.setSelection(_d14);},expandAll:function(){var _d15=this;function _d16(node){return _d15._expandNode(node).then(function(){var _d17=_cc3.filter(node.getChildren()||[],function(node){return node.isExpandable;});return all(_cc3.map(_d17,_d16));});};return _ce0(_d16(this.rootNode));},collapseAll:function(){var _d18=this;function _d19(node){var _d1a=_cc3.filter(node.getChildren()||[],function(node){return node.isExpandable;}),defs=all(_cc3.map(_d1a,_d19));if(!node.isExpanded||(node==_d18.rootNode&&!_d18.showRoot)){return defs;}else{return defs.then(function(){return _d18._collapseNode(node);});}};return _ce0(_d19(this.rootNode));},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(item){return this.model.getLabel(item);},getIconClass:function(item,_d1b){return (!item||this.model.mayHaveChildren(item))?(_d1b?"dijitFolderOpened":"dijitFolderClosed"):"dijitLeaf";},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return "";},_onDownArrow:function(evt,node){var _d1c=this._getNext(node);if(_d1c&&_d1c.isTreeNode){this.focusNode(_d1c);}},_onUpArrow:function(evt,node){var _d1d=node.getPreviousSibling();if(_d1d){node=_d1d;while(node.isExpandable&&node.isExpanded&&node.hasChildren()){var _d1e=node.getChildren();node=_d1e[_d1e.length-1];}}else{var _d1f=node.getParent();if(!(!this.showRoot&&_d1f===this.rootNode)){node=_d1f;}}if(node&&node.isTreeNode){this.focusNode(node);}},_onRightArrow:function(evt,node){if(node.isExpandable&&!node.isExpanded){this._expandNode(node);}else{if(node.hasChildren()){node=node.getChildren()[0];if(node&&node.isTreeNode){this.focusNode(node);}}}},_onLeftArrow:function(evt,node){if(node.isExpandable&&node.isExpanded){this._collapseNode(node);}else{var _d20=node.getParent();if(_d20&&_d20.isTreeNode&&!(!this.showRoot&&_d20===this.rootNode)){this.focusNode(_d20);}}},focusLastChild:function(){var node=this._getLast();if(node&&node.isTreeNode){this.focusNode(node);}},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0];},_getLast:function(){var node=this.rootNode;while(node.isExpanded){var c=node.getChildren();if(!c.length){break;}node=c[c.length-1];}return node;},_getNext:function(node){if(node.isExpandable&&node.isExpanded&&node.hasChildren()){return node.getChildren()[0];}else{while(node&&node.isTreeNode){var _d21=node.getNextSibling();if(_d21){return _d21;}node=node.getParent();}return null;}},childSelector:".dijitTreeRow",isExpandoNode:function(node,_d22){return dom.isDescendant(node,_d22.expandoNode)||dom.isDescendant(node,_d22.expandoNodeText);},__click:function(_d23,e,_d24,func){var _d25=e.target,_d26=this.isExpandoNode(_d25,_d23);if(_d23.isExpandable&&(_d24||_d26)){this._onExpandoClick({node:_d23});}else{this._publish("execute",{item:_d23.item,node:_d23,evt:e});this[func](_d23.item,_d23,e);this.focusNode(_d23);}e.stopPropagation();e.preventDefault();},_onClick:function(_d27,e){this.__click(_d27,e,this.openOnClick,"onClick");},_onDblClick:function(_d28,e){this.__click(_d28,e,this.openOnDblClick,"onDblClick");},_onExpandoClick:function(_d29){var node=_d29.node;this.focusNode(node);if(node.isExpanded){this._collapseNode(node);}else{this._expandNode(node);}},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(node){_cce.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(node);},_getRootOrFirstNode:function(){_cce.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst();},_collapseNode:function(node){if(node._expandNodeDeferred){delete node._expandNodeDeferred;}if(node.state=="Loading"){return;}if(node.isExpanded){var ret=node.collapse();this.onClose(node.item,node);this._state(node,false);this._startPaint(ret);return ret;}},_expandNode:function(node){if(node._expandNodeDeferred){return node._expandNodeDeferred;}var _d2a=this.model,item=node.item,_d2b=this;if(!node._loadDeferred){node.markProcessing();node._loadDeferred=new _cc8();_d2a.getChildren(item,function(_d2c){node.unmarkProcessing();node.setChildItems(_d2c).then(function(){node._loadDeferred.resolve(_d2c);});},function(err){node._loadDeferred.reject(err);});}var def=node._loadDeferred.then(lang.hitch(this,function(){var def2=node.expand();this.onOpen(node.item,node);this._state(node,true);return def2;}));this._startPaint(def);return def;},focusNode:function(node){this.focusChild(node);},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(item){var _d2d=this.model,_d2e=_d2d.getIdentity(item),_d2f=this._itemNodesMap[_d2e];if(_d2f){var _d30=this.getLabel(item),_d31=this.getTooltip(item);_cc3.forEach(_d2f,function(node){node.set({item:item,label:_d30,tooltip:_d31});node._updateItemClasses(item);});}},_onItemChildrenChange:function(_d32,_d33){var _d34=this.model,_d35=_d34.getIdentity(_d32),_d36=this._itemNodesMap[_d35];if(_d36){_cc3.forEach(_d36,function(_d37){_d37.setChildItems(_d33);});}},_onItemDelete:function(item){var _d38=this.model,_d39=_d38.getIdentity(item),_d3a=this._itemNodesMap[_d39];if(_d3a){_cc3.forEach(_d3a,function(node){this.dndController.removeTreeNode(node);var _d3b=node.getParent();if(_d3b){_d3b.removeChild(node);}node.destroyRecursive();},this);delete this._itemNodesMap[_d39];}},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var oreo=_cc6(this.cookieName);if(oreo){_cc3.forEach(oreo.split(","),function(item){this._openedNodes[item]=true;},this);}}},_state:function(node,_d3c){if(!this.persist){return false;}var path=_cc3.map(node.getTreePath(),function(item){return this.model.getIdentity(item);},this).join("/");if(arguments.length===1){return this._openedNodes[path];}else{if(_d3c){this._openedNodes[path]=true;}else{delete this._openedNodes[path];}this._saveExpandedNodes();}},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var ary=[];for(var id in this._openedNodes){ary.push(id);}_cc6(this.cookieName,ary.join(","),{expires:365});}},destroy:function(){if(this._curSearch){this._curSearch.timer.remove();delete this._curSearch;}if(this.rootNode){this.rootNode.destroyRecursive();}if(this.dndController&&!lang.isString(this.dndController)){this.dndController.destroy();}this.rootNode=null;this.inherited(arguments);},destroyRecursive:function(){this.destroy();},resize:function(_d3d){if(_d3d){_cca.setMarginBox(this.domNode,_d3d);}this._nodePixelIndent=_cca.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(lang.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths();}));},_outstandingPaintOperations:0,_startPaint:function(p){this._outstandingPaintOperations++;if(this._adjustWidthsTimer){this._adjustWidthsTimer.remove();delete this._adjustWidthsTimer;}var oc=lang.hitch(this,function(){this._outstandingPaintOperations--;if(this._outstandingPaintOperations<=0&&!this._adjustWidthsTimer&&this._started){this._adjustWidthsTimer=this.defer("_adjustWidths");}});when(p,oc,oc);},_adjustWidths:function(){if(this._adjustWidthsTimer){this._adjustWidthsTimer.remove();delete this._adjustWidthsTimer;}this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%";},_createTreeNode:function(args){return new _ce3(args);},focus:function(){if(this.lastFocusedChild){this.focusNode(this.lastFocusedChild);}else{this.focusFirstChild();}}});if(has("dojo-bidi")){Tree.extend({_setTextDirAttr:function(_d3e){if(_d3e&&this.textDir!=_d3e){this._set("textDir",_d3e);this.rootNode.set("textDir",_d3e);}}});}Tree.PathError=_ccc("TreePathError");Tree._TreeNode=_ce3;return Tree;});},"esriviewer/loader/ViewerLoader":function(){define(["dojo/_base/declare","xstyle/css!../theme/coreTheme.css","dojo/Deferred","dojo/_base/window","dojo/_base/lang","dojo/topic","dojo/_base/connect","dojo/dom-class","dojo/dom-construct","../base/ViewerGlobals","../manager/ViewerManagerWindow","../util/RegExpUtils","../util/ViewerUtils","../util/GeometryUtils","../map/geometry/base/ProjectionUtils","dojo/on","dojo/io-query","xstyle/css","./base/ViewerPlacementWindow","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/layout/StackController","dijit/layout/AccordionPane","xstyle/css!dojox/layout/resources/ResizeHandle.css"],function(_d3f,_d40,_d41,_d42,lang,_d43,con,_d44,_d45,_d46,_d47,_d48,_d49,_d4a,_d4b,on,_d4c,Css,_d4d){return _d3f([],{isDebug:false,constructor:function(_d4e){lang.mixin(this,_d4e||{});this._initPageResizeListener();this.viewerConfigurationParameters={useProxyForConfig:false};this.createGlobalClasses();this.initCss();this.processConfigurationSettings();this.createViewerPlacementWindow();this.createViewerManager();this.tweakUI();},_initPageResizeListener:function(){on(window,"resize",lang.hitch(this,function(){_d43.publish(VIEWER_GLOBALS.EVENTS.WINDOW.REPOSITION_ALL);}));},initCss:function(){Css.load("dijit/themes/tundra/tundra.css",require,function(){});Css.load("esri/css/esri.css",require,function(){});var _d4f=location.pathname.replace(/[^\/]+$/,"")+"css/overrides.css";Css.load(_d4f,require,function(){});_d43.publish(VIEWER_GLOBALS.EVENTS.CSS.CORE_UI_THEME_LOADED);},createViewerPlacementWindow:function(){this.viewPlacement=new _d4d();},tweakUI:function(){if(VIEWER_UTILS.isHtml5FileUploadSupported()){con.connect(_d42.body(),"dragover",function(e){e.stopPropagation();e.preventDefault();e.dataTransfer.effectAllowed=e.dataTransfer.dropEffect="none";});}_d44.add(_d42.body(),["defaultTextColor","defaultFont","defaultFontSize"]);},createGlobalClasses:function(){window.VIEWER_GLOBALS=this.createGlobals();window.VIEWER_UTILS=this.createUtils();window.GEOMETRY_UTILS=this.createGeometryUtils();window.REG_EXP_UTILS=this.createRegExpUtils();window.PROJECTION_UTILS=new _d4b();},processConfigurationSettings:function(){if(window&&window.location&&window.location.href){var _d50=window.location.href.substring(window.location.href.indexOf("?")+1,window.location.href.length);this.windowQueryObject=_d4c.queryToObject(_d50);if(this.windowQueryObject!=null&&lang.isObject(this.windowQueryObject)){if(this.windowQueryObject.viewerConfig!=null){this.viewerConfigurationParameters.configUrl=this.windowQueryObject.viewerConfig;this.viewerConfigurationParameters.useProxyForConfig=true;}if(this.windowQueryObject.viewerPositionConfig!=null){this.viewerConfigurationParameters.viewerPositioningConfigUrl=this.windowQueryObject.viewerPositionConfig;this.viewerConfigurationParameters.useProxyForPositionConfig=true;}}}},createGlobals:function(){return new _d46();},createGeometryUtils:function(){return new _d4a();},createUtils:function(){return new _d49({isDebug:this.isDebug});},createRegExpUtils:function(){return new _d48();},createViewerManager:function(){window.VIEWER_MANAGER=this.createViewerManagerWindow();return window.VIEWER_MANAGER;},createViewerManagerWindow:function(){return new _d47(this.viewerConfigurationParameters);}});});},"url:esriviewer/ui/layers/base/template/UserPersistedLayersListingTemplate.html":"<div>\r\n    <div class=\"userPersistsedLayersClearContainer\" data-bind=\"visible: hasEntries\">\r\n        <div class=\"userPersistsedLayersClearLbl\" data-bind=\"click:clearEntries\">Clear Entries</div>\r\n    </div>\r\n    <div class=\"addedUserPersistedLayersListContainer\" data-dojo-attach-point=\"addedUserPersistedGraphicsListContainer\">\r\n        <ul class=\"viewerList\" data-bind=\"foreach: addedUserPersistedLayers\">\r\n            <li class=\"graphicsListEntry\">\r\n                <div title=\"Delete Layer\" class=\"viewerListEntryRemoveIcon commonIcons16 remove\"\r\n                     data-bind=\"click:$parent.removeUserPersistedLayer\"></div>\r\n                <div title=\"Add Layer To Map\" class=\"viewerListGenericIcon commonIcons16 layerShow\"\r\n                     data-bind=\"click:$parent.addPersistedLayerToMap\"></div>\r\n                <span class=\"graphicsListEntryLabel\" data-bind=\"text: $data.name\"></span>\r\n\r\n                <div data-bind=\"css: $parent.persistedLayerInfoIconClass, attr:{title:$data.url}\"></div>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>","url:esriviewer/ui/draw/configure/geometry/template/ConfigureTextTemplate.html":"<div class=\"configureDrawGeometryContainer\">\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Font Face</span>\r\n        <select data-bind=\"options: fontFaces ,value:selectedFontFace, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Text Align</span>\r\n        <select data-bind=\"options: textAligns ,value:selectedTextAlign, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Weight</span>\r\n        <select data-bind=\"options: textWeights ,value:selectedTextWeight, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Size</span>\r\n        <select data-bind=\"options: textSizes ,value:selectedTextSize, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Angle</span>\r\n        <select data-bind=\"options: angles ,value:selectedAngle\"></select>\r\n    </div>\r\n    <div class=\"configureDrawColorPickerContainer\" data-dojo-attach-point=\"colorPickerContainer\"></div>\r\n\r\n</div>","url:esriviewer/ui/header/template/HeaderLogoTemplate.html":"<div class=\"logoHeaderContainer defaultBoxShadow defaultBackground defaultBorder fourPixelBorderRadius\">\r\n    <img alt=\"header logo\" data-bind=\"visible: showHeaderIcon, attr:{ src: headerIconUrl, alt:headerMainText}\"  class='headerLogoIcon'>\r\n    <span class=\"headerMainText\" data-bind=\"text: headerMainText\"></span>\r\n    <div class=\"logolinks\">\r\n        <a data-bind=\"attr:{href: contactUrl},text: contactText\" target=\"_blank\" title=\"Opens in a new window.\"></a>\r\n        <span class=\"headerLogoLinksSpace\">|</span>\r\n        <a data-bind=\"attr:{href: helpUrl}, text: helpText\" target=\"_blank\" title=\"Opens in a new window.\"></a>\r\n    </div>\r\n</div>","url:dijit/form/templates/Select.html":"<table class=\"dijit dijitReset dijitInline dijitLeft\"\n\tdata-dojo-attach-point=\"_buttonNode,tableNode,focusNode,_popupStateNode\" cellspacing='0' cellpadding='0'\n\trole=\"listbox\" aria-haspopup=\"true\"\n\t><tbody role=\"presentation\"><tr role=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonContents\" role=\"presentation\"\n\t\t\t><div class=\"dijitReset dijitInputField dijitButtonText\"  data-dojo-attach-point=\"containerNode,textDirNode\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitValidationContainer\"\n\t\t\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t/></div\n\t\t\t><input type=\"hidden\" ${!nameAttrSetting} data-dojo-attach-point=\"valueNode\" value=\"${value}\" aria-hidden=\"true\"\n\t\t/></td\n\t\t><td class=\"dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\"\n\t\t\tdata-dojo-attach-point=\"titleNode\" role=\"presentation\"\n\t\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t${_buttonInputDisabled}\n\t\t/></td\n\t></tr></tbody\n></table>\n","url:dijit/layout/templates/AccordionButton.html":"<div data-dojo-attach-event='ondijitclick:_onTitleClick' class='dijitAccordionTitle' role=\"presentation\">\n\t<div data-dojo-attach-point='titleNode,focusNode' data-dojo-attach-event='onkeydown:_onTitleKeyDown'\n\t\t\tclass='dijitAccordionTitleFocus' role=\"tab\" aria-expanded=\"false\"\n\t\t><span class='dijitInline dijitAccordionArrow' role=\"presentation\"></span\n\t\t><span class='arrowTextUp' role=\"presentation\">+</span\n\t\t><span class='arrowTextDown' role=\"presentation\">-</span\n\t\t><span role=\"presentation\" class=\"dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span>\n\t\t<span role=\"presentation\" data-dojo-attach-point='titleTextNode, textDirNode' class='dijitAccordionText'></span>\n\t</div>\n</div>\n","url:dijit/templates/MenuSeparator.html":"<tr class=\"dijitMenuSeparator\" role=\"separator\">\n\t<td class=\"dijitMenuSeparatorIconCell\">\n\t\t<div class=\"dijitMenuSeparatorTop\"></div>\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\n\t</td>\n\t<td colspan=\"3\" class=\"dijitMenuSeparatorLabelCell\">\n\t\t<div class=\"dijitMenuSeparatorTop dijitMenuSeparatorLabel\"></div>\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\n\t</td>\n</tr>\n","url:esriviewer/ui/draw/base/template/UserPersistedGrahicsListingTemplate.html":"<div>\r\n    <div class=\"addedUserPersistedGraphicsListContainer\" data-dojo-attach-point=\"addedUserPersistedGraphicsListContainer\">\r\n        <ul data-dojo-attach-point=\"addedGraphicsList\" class=\"viewerList\" data-bind=\"foreach: addedUserPersistedGraphics\">\r\n            <li class=\"graphicsListEntry\">\r\n                <div title=\"Delete Saved Graphics\" class=\"viewerListEntryRemoveIcon commonIcons16 remove\" data-bind=\"click:$parent.removeUserPersistedGraphic\"></div>\r\n                <div title=\"Add Saved Graphics To Map\" class=\"viewerListGenericIcon commonIcons16 layerShow\" data-bind=\"click:$parent.addSavedGraphics\"></div>\r\n                <span class=\"graphicsListEntryLabel\" data-bind=\"text: $data.label\"></span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>","url:esriviewer/ui/footer/template/FooterTogglerTemplate.html":"<div class=\"footerWidget\" data-dojo-attach-point=\"footerWidget\" data-bind=\"css:{footerExpanded: expanded() == true, footerCollapsed: expanded() != true}\">\r\n    <div class=\"footerExpanderContent headerFooterBg\" data-dojo-attach-point=\"footerExpanderContent\"  data-dojo-attach-event=\"onclick:toggle\">\r\n        <div class=\"footerTogglerArrow\" data-dojo-attach-point=\"footerTogglerArrow\" data-bind=\"css:{footerTogglerDown: expanded() == true, footerTogglerUp: expanded() != true}\"></div>\r\n    </div>\r\n    <div data-dojo-attach-point=\"footerContent\"></div>\r\n</div>","url:esriviewer/ui/toolbar/base/template/BookmarkListingTemplate.html":"<div class=\"bookmarksToolbarDropdown toolbarDropdownContent\" data-bind=\"visible:visible\">\r\n    <div class=\"createBookmarkIcon commonIcons16 add\" title=\"Create Bookmark\"\r\n         data-bind=\"visible:showCreateBookmarkIcon, click:showCreateBookmark\"></div>\r\n    <div class=\"bookmarksToolbarDropdownBookmarkEntries\" data-bind=\"foreach:_bookmarks\">\r\n        <div class=\"threePixelBorderRadius bookmarkToolbarEntry\" data-bind=\"click: $parent.handleBookmarkClick\">\r\n            <span class=\"bookmarkToolbarEntryText\" data-bind=\"text: $data.label\"></span>\r\n        </div>\r\n    </div>\r\n    <div class=\"bookmarksToolbarDropdownBookmarkRemovableEntries\" data-bind=\"template: {foreach:_removableBookmarks, afterAdd:handleAfterAddBookmark, beforeRemove:handleBeforeRemoveBookmark}\">\r\n        <div class=\"bookmarkToolbarEntryOuter\">\r\n            <div title=\"Remove Bookmark\" class=\"commonIcons16 bookmarkToolbarEntryRemoveIcon remove\"\r\n                 data-bind=\"click: $parent.removeClick\"></div>\r\n            <div class=\"threePixelBorderRadius bookmarkToolbarEntry\" data-bind=\"click: $parent.handleBookmarkClick\">\r\n                <span class=\"bookmarkToolbarEntryText\" data-bind=\"text: $data.label\"></span>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</div>","url:esriviewer/ui/messaging/template/MessagingWidgetTemplate.html":"<div class=\"defaultBorder defaultBackground statusMessageContainer threePixelBorderRadius defaultBoxShadow\"\r\n     data-bind=\"visible:visible\">\r\n    <div class=\"commonIcons16 infoBlock messagingIcon\"></div>\r\n    <div class=\"statusDivInner threePixelBorderRadius\">\r\n        <div class=\"statusDivMessage\" data-bind=\"text:message\"></div>\r\n    </div>\r\n</div>","url:dijit/form/templates/HorizontalSlider.html":"<table class=\"dijit dijitReset dijitSlider dijitSliderH\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" rules=\"none\" data-dojo-attach-event=\"onkeydown:_onKeyDown, onkeyup:_onKeyUp\"\n\trole=\"presentation\"\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td data-dojo-attach-point=\"topDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\n\t\t\t><div class=\"dijitSliderDecrementIconH\" style=\"display:none\" data-dojo-attach-point=\"decrementButton\"><span class=\"dijitSliderButtonInner\">-</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper\" data-dojo-attach-event=\"press:_onClkDecBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><input data-dojo-attach-point=\"valueNode\" type=\"hidden\" ${!nameAttrSetting}\n\t\t\t/><div class=\"dijitReset dijitSliderBarContainerH\" role=\"presentation\" data-dojo-attach-point=\"sliderBarContainer\"\n\t\t\t\t><div role=\"presentation\" data-dojo-attach-point=\"progressBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH\" data-dojo-attach-event=\"press:_onBarClick\"\n\t\t\t\t\t><div class=\"dijitSliderMoveable dijitSliderMoveableH\"\n\t\t\t\t\t\t><div data-dojo-attach-point=\"sliderHandle,focusNode\" class=\"dijitSliderImageHandle dijitSliderImageHandleH\" data-dojo-attach-event=\"press:_onHandleClick\" role=\"slider\"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t\t><div role=\"presentation\" data-dojo-attach-point=\"remainingBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH\" data-dojo-attach-event=\"press:_onBarClick\"></div\n\t\t\t></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper\" data-dojo-attach-event=\"press:_onClkIncBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\n\t\t\t><div class=\"dijitSliderIncrementIconH\" style=\"display:none\" data-dojo-attach-point=\"incrementButton\"><span class=\"dijitSliderButtonInner\">+</span></div\n\t\t></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td data-dojo-attach-point=\"containerNode,bottomDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n></table>\n","url:esriviewer/ui/draw/configure/template/ConfigureDrawTemplate.html":"<div>\r\n    <div data-bind=\"visible:showConfigureGeometryIcons\" data-dojo-attach-point=\"annotationOptionsButtons\" class=\"annotationOptionButtons\">\r\n        <div title=\"Set Point Symbol\"\r\n             data-bind=\"click: showPointConfiguration, css:{pointSelected: pointConfigurationActive}\"\r\n             class=\"annotationOptionButton pointUnselected\"></div>\r\n        <div title=\"Set Line Symbol\"\r\n             data-bind=\"click: showLineConfiguration, css:{polylineSelected: lineConfigurationActive}\"\r\n                    class=\"annotationOptionButton polylineUnselected\"></div>\r\n        <div title=\"Set Polygon Symbol\"\r\n             data-bind=\"click: showPolygonConfiguration, css:{polygonSelected: polygonConfigurationActive}\"\r\n             class=\"annotationOptionButton polygonUnselected\"></div>\r\n        <div title=\"Set Rectangle Symbol\"\r\n             data-bind=\"visible: showEnvelopeIcon, click: showRectangleConfiguration, css:{rectangleSelected: rectangleConfigurationActive}\"\r\n             class=\"annotationOptionButton rectangleUnselected\"></div>\r\n        <div title=\"Set Text Symbol\"\r\n             data-bind=\"visible: showTextIcon, click: showTextConfiguration, css:{textSelected: textConfigurationActive}\"\r\n             class=\"annotationOptionButton textUnselected\"></div>\r\n    </div>\r\n    <div data-dojo-attach-point=\"configurePointWidgetContainer\" data-bind=\"visible:pointConfigurationActive\"></div>\r\n    <div data-dojo-attach-point=\"configureLineWidgetContainer\" data-bind=\"visible:lineConfigurationActive\"></div>\r\n    <div data-dojo-attach-point=\"configureRectangleWidgetContainer\" data-bind=\"visible:rectangleConfigurationActive\"></div>\r\n    <div data-dojo-attach-point=\"configurePolygonWidgetContainer\" data-bind=\"visible:polygonConfigurationActive\"></div>\r\n\r\n    <div data-dojo-attach-point=\"configureTextWidgetContainer\" data-bind=\"visible:textConfigurationActive\"></div>\r\n\r\n</div>","url:esriviewer/ui/draw/configure/geometry/template/ConfigurePointTemplate.html":"<div class=\"configureDrawGeometryContainer\">\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Marker Style</span>\r\n        <select data-bind=\"options: markerStyles ,value:selectedMarkerStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Marker Size</span>\r\n        <select data-bind=\"options: markerSizes ,value:selectedMarkerSize\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Outline Style</span>\r\n        <select data-bind=\"options: outlineStyles ,value:selectedOutlineStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Outline Width</span>\r\n        <select data-bind=\"options: outlineWidths ,value:selectedOutlineWidth\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Angle</span>\r\n        <select data-bind=\"options: angles ,value:selectedAngle\"></select>\r\n    </div>\r\n    <div data-dojo-attach-point=\"transparencySliderContainer\"></div>\r\n    <div class=\"colorPickerTextContainer\">\r\n        <span class=\"colorPickerText\"\r\n              data-bind=\"click: setMarkerColorMode,css:{colorPickerTextSelected: markerColorActive}\"> Marker Color</span>\r\n        <span class=\"colorPickerText\"\r\n              data-bind=\"click: setOutlineColorMode,css:{colorPickerTextSelected: outlineColorActive}\"> Outline Color</span>\r\n\r\n    </div>\r\n\r\n    <div class=\"configureDrawColorPickerContainer\" data-dojo-attach-point=\"colorPickerContainer\"></div>\r\n</div>","url:esriviewer/ui/bookmark/template/CreateBookmarkTemplate.html":"<div class=\"createBookmarkWindow fivePixelBorderRadius defaultBorder defaultBoxShadow\">\r\n    <div class=\"createBookmarkHeader\">\r\n    </div>\r\n    <div class=\"createBookmarkContent\">\r\n        <div class=\"createBookmarkLabelEntry createBookmarkEntry\">\r\n            <span class=\"createBookmarkLabel\">Label:</span>\r\n            <div data-dojo-type=\"dijit/form/TextBox\" data-dojo-attach-event=\"onKeyUp: onBookmarkLabelKeyUp\" data-dojo-attach-point=\"bookmarkLabelElement\"></div>\r\n        </div>\r\n    </div>\r\n    <div class=\"createBookmarkActionsContent\">\r\n        <span data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:hide\" class=\"createBookmarkButton\">Cancel</span>\r\n        <span data-dojo-type=\"dijit/form/Button\" class=\"createBookmarkButton\" data-dojo-attach-event=\"onClick:createBookmark\">Create</span>\r\n    </div>\r\n</div>","url:esriviewer/ui/toolbar/template/ActionsToolbarWidgetTemplate.html":"<div class='viewerMainToolbar headerFooterBg'>\r\n    <div class=\"mainToolbarContents\" data-dojo-attach-point=\"mainToolbarContents\">\r\n            <span data-bind=\"visible: toolsButtonVisible\"\r\n                  data-dojo-type=\"dijit/form/DropDownButton\"\r\n                  data-dojo-attach-point=\"toolsDropDownButton\"\r\n                  data-dojo-props=\"iconClass:'commonIcons16 wrench'\">\r\n                <span>Tools</span>\r\n            </span>\r\n\r\n        <div data-dojo-attach-point=\"layersButton\" class=\"actionsToolbarButton\"\r\n             data-bind=\"visible: layersButtonVisible\">\r\n            <div class=\"commonIcons16 layerList actionsToolbarIcon\"></div>\r\n            <div class=\"actionsToolbarText\">Layers</div>\r\n        </div>\r\n        <div data-dojo-attach-point=\"bookmarksButton\" class=\"actionsToolbarButton\"\r\n             data-bind=\"visible:showBookmarksButton\"\r\n             data-dojo-attach-event=\"onclick:toggleBookmarksListing\">\r\n            <div class=\"commonIcons16 bookmark actionsToolbarIcon\"></div>\r\n            <div class=\"actionsToolbarText\">Bookmarks</div>\r\n        </div>\r\n        <div data-dojo-attach-point=\"basemapsButton\" class=\"actionsToolbarButton\"\r\n             data-dojo-attach-event=\"onclick:toggleBasemapsListing\">\r\n            <div class=\"commonIcons16 blocks actionsToolbarIcon\"></div>\r\n            <div class=\"actionsToolbarText\">Basemaps</div>\r\n\r\n        </div>\r\n        <span data-bind=\"visible:showLabelsButton\">\r\n            <span data-dojo-type=\"dijit/form/ToggleButton\"\r\n                  data-dojo-attach-point=\"labelsButton\"\r\n                  data-dojo-props=\"iconClass:'dijitCheckBoxIcon'\">Labels</span>\r\n        </span>\r\n\r\n        <div data-dojo-attach-point=\"addOnContentContainer\"></div>\r\n        <div class=\"locateToolbarContainer locateToolbarContainerOnMap\" data-dojo-attach-point=\"locateToolbarContainer\"\r\n             data-bind=\"visible: showLocator\">\r\n            <input value=\"${locateDefaultInput}\" type=\"text\" class=\"locateTextBox defaultBorder\"\r\n                   data-dojo-attach-point=\"locateTextBox\"/>\r\n\r\n            <div data-dojo-attach-point=\"locateButton\" title=\"Locate\"\r\n                 class=\"defaultBorder searchButton searchButtonIcon\"></div>\r\n            <div data-dojo-attach-point=\"configureLocateButton\"\r\n                 data-bind=\"visible:showConfigureLocatorsButton\"\r\n                 data-dojo-attach-event=\"onclick:toggleConfigureLocatorTooltip\" title=\"Configure Locate\"\r\n                 class=\"defaultBorder configureLocate configureButtonIcon\"></div>\r\n        </div>\r\n        <div class=\"extentActionsToolbar\" data-bind=\"visible:showExtentActionsToolbar\">\r\n            <div class=\"smallActionsToolbarButton\">\r\n                <div data-dojo-attach-point=\"initialExtentButton\" title=\"Initial Extent\"\r\n                     class=\"commonIcons16 firstItem\"\r\n                     data-dojo-attach-event=\"onclick:handleGotoInitialExtent\"></div>\r\n            </div>\r\n            <div class=\"smallActionsToolbarButton\">\r\n                <div data-dojo-attach-point=\"prevExtentButton\" title=\"Previous Extent\"\r\n                     class=\"commonIcons16 previousGray\"\r\n                     data-bind=\"css:{previous: prevExtentEnabled()}\"\r\n                     data-dojo-attach-event=\"onclick:handleGotoPrevExtent\"></div>\r\n            </div>\r\n            <div class=\"smallActionsToolbarButton\">\r\n                <div data-dojo-attach-point=\"nextExtentButton\" title=\"Full Extent\"\r\n                     class=\"commonIcons16 locationGoTo\"\r\n                     data-dojo-attach-event=\"onclick:handleGotoFullExtent\"></div>\r\n            </div>\r\n            <div class=\"smallActionsToolbarButton\">\r\n                <div data-dojo-attach-point=\"nextExtentButton\" title=\"Next Extent\"\r\n                     class=\"commonIcons16 nextGray\"\r\n                     data-bind=\"css:{next: nextExtentEnabled()}\"\r\n                     data-dojo-attach-event=\"onclick:handleGotoNextExtent\"></div>\r\n            </div>\r\n            <div class=\"smallActionsToolbarButton\">\r\n                <div data-dojo-attach-point=\"lastExtentButton\" title=\"Last Extent\"\r\n                     class=\"commonIcons16 lastItem\"\r\n                     data-dojo-attach-event=\"onclick:handleGotoLastExtent\"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","url:dijit/templates/ColorPalette.html":"<div class=\"dijitInline dijitColorPalette\" role=\"grid\">\n\t<table dojoAttachPoint=\"paletteTableNode\" class=\"dijitPaletteTable\" cellSpacing=\"0\" cellPadding=\"0\" role=\"presentation\">\n\t\t<tbody data-dojo-attach-point=\"gridNode\"></tbody>\n\t</table>\n</div>\n","url:esriviewer/ui/draw/template/DrawWidgetTemplate.html":"<div class=\"drawWindow\">\r\n    <div class=\"defaultTabContainer\">\r\n        <span  data-bind=\"click:showDraw, css: {selectedTab: drawVisible}\">Create</span>\r\n        <span data-bind=\"click:showConfiguration, css: {selectedTab: configurationVisible}\">Configure</span>\r\n        <span  data-bind=\"visible:showGraphicsListTab, click:showGraphicsList, css: {selectedTab: graphicsListVisible}\">Added</span>\r\n        <span data-bind=\"visible:showSavedGraphicsTab, click:showUserPersistedGraphics, css: {selectedTab: userPersistedGraphicsVisible}\">Saved</span>\r\n    </div>\r\n    <div class=\"drawWindowInputIconsContainer\" data-dojo-attach-point=\"drawWindowInputIconsContainer\"\r\n         data-bind=\"visible: drawVisible\">\r\n        <div class=\"threePixelBorderRadius commonIcons32 pointUnselected\"\r\n             data-bind=\"visible: showDrawPointIcon, css: {pointSelected: pointActive}\"\r\n             title=\"Draw Point\" data-dojo-attach-event=\"onclick:handlePointDrawClick\"></div>\r\n        <div class=\"threePixelBorderRadius commonIcons32 lineUnselected\"\r\n             data-bind=\"visible: showDrawLineIcon, css: {lineSelected: lineActive}\"\r\n             title=\"Draw Line\" data-dojo-attach-event=\"onclick:handleLineDrawClick\"></div>\r\n        <div class=\"threePixelBorderRadius commonIcons32 polylineUnselected\"\r\n                data-bind=\"visible: showDrawPolylineIcon, css: {polylineSelected: polylineActive}\"\r\n                title=\"Draw Polyline\" data-dojo-attach-event=\"onclick:handlePolylineDrawClick\"></div>\r\n        <div data-bind=\"visible: showDrawPolygonIcon, css: {polygonSelected: polygonActive}\"\r\n             class=\"threePixelBorderRadius commonIcons32 polygonUnselected\"\r\n             title=\"Draw Polygon\" data-dojo-attach-event=\"onclick:handlePolygonDrawClick\"></div>\r\n        <div data-bind=\"visible: showDrawRectangleIcon,css: {rectangleSelected: rectangleActive}\"\r\n             class=\"threePixelBorderRadius commonIcons32 rectangleUnselected\"\r\n             title=\"Draw Rectangle\" data-dojo-attach-event=\"onclick:handleRectangleDrawClick\"></div>\r\n        <div class=\"threePixelBorderRadius commonIcons32 textUnselected\"\r\n             data-bind=\"visible: showDrawTextIcon,css: {textSelected: textActive}\"\r\n             title=\"Draw Text\" data-dojo-attach-event=\"onclick:handleTextDrawClick\"></div>\r\n    </div>\r\n    <div class=\"drawFreehandContainer\"\r\n         data-bind=\"visible: freehandContainerVisible\">\r\n        <span data-dojo-type=\"dijit/form/CheckBox\" data-dojo-attach-event=\"onChange:handleFreehandToggled\"\r\n              data-dojo-attach-point=\"freeHandDrawCheckbox\"></span>\r\n        <span class=\"drawFreehandCheckboxLabel\" data-dojo-attach-event=\"onclick:toggleFreehand\">Freehand</span>\r\n    </div>\r\n    <div class=\"drawWindowConfigureContainer\" data-bind=\"visible: configurationVisible\"\r\n         data-dojo-attach-point=\"drawWindowConfigureContainer\">\r\n    </div>\r\n    <div class=\"drawWindowGraphicsListContainer\" data-dojo-attach-point=\"drawWindowGraphicsListContainer\"\r\n         data-bind=\"visible: graphicsListVisible\">\r\n    </div>\r\n    <div class=\"drawWindowUserPersistedGraphicsContainer\"\r\n         data-dojo-attach-point=\"drawWindowUserPersistedGraphicsContainer\"\r\n         data-bind=\"visible: userPersistedGraphicsVisible\">\r\n    </div>\r\n</div>","url:dijit/templates/Menu.html":"<table class=\"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable\" role=\"menu\" tabIndex=\"${tabIndex}\"\n\t   cellspacing=\"0\">\n\t<tbody class=\"dijitReset\" data-dojo-attach-point=\"containerNode\"></tbody>\n</table>\n","url:esriviewer/ui/logging/template/LoggingWidgetTemplate.html":"<div class=\"loggingWidgetContainer\">\r\n    <div class=\"windowActions\">\r\n        <div class=\"loggingWidgetActionContainerToggleEntry\">\r\n            <div class=\"commonIcons16 information loggingWidgetActionDisplayToggleIcon\"></div>\r\n            <input type=\"checkbox\" data-bind=\"checked:infoDisplayed\"\r\n                   title=\"Toggle Info Messages\"\r\n                   class=\"loggingWidgetActionDisplayCheckbox\"/>\r\n        </div>\r\n        <div class=\"loggingWidgetActionContainerToggleEntry\">\r\n            <div class=\"commonIcons16 warning loggingWidgetActionDisplayToggleIcon\"></div>\r\n            <input type=\"checkbox\" data-bind=\"checked:warningDisplayed\"\r\n                   title=\"Toggle Warning Messages\"\r\n                   class=\"loggingWidgetActionDisplayCheckbox\"/>\r\n        </div>\r\n        <div class=\"loggingWidgetActionContainerToggleEntry\">\r\n            <div class=\"commonIcons16 error loggingWidgetActionDisplayToggleIcon\"></div>\r\n            <input type=\"checkbox\" data-bind=\"checked:errorDisplayed\"\r\n                   title=\"Toggle Error Messages\"\r\n                   class=\"loggingWidgetActionDisplayCheckbox\"/>\r\n\r\n        </div>\r\n        <div class=\"commonIcons16 deleteCross loggingWidgetActionClearIcon\" data-bind=\"visible: hasLogEntries\"\r\n             data-dojo-attach-point=\"clearLogIcon\"\r\n             data-dojo-attach-event=\"onclick: _showConfirmLogTooltip\"></div>\r\n    </div>\r\n    <ul class=\"loggingWidgetEntryList\"\r\n        data-bind=\"foreach: filteredEntries\">\r\n        <li class=\"loggingInfoMessage\" data-bind=\"css: $data.messageStyleClass\">\r\n            <span class=\"loggingMessageTimestamp\"><span>(</span><span\r\n                data-bind=\"text: $data.time\"></span><span>)</span></span>\r\n            <div class=\"loggingWidgetTypeIcon commonIcons16\" data-bind=\"css: $data.iconClass\" style=\"cursor: default\"></div>\r\n            <span class=\"loggingMessageText\" data-bind=\"text:$data.message\"></span>\r\n        </li>\r\n    </ul>\r\n</div>","url:dijit/form/templates/CheckBox.html":"<div class=\"dijit dijitReset dijitInline\" role=\"presentation\"\n\t><input\n\t \t${!nameAttrSetting} type=\"${type}\" role=\"${type}\" aria-checked=\"false\" ${checkedAttrSetting}\n\t\tclass=\"dijitReset dijitCheckBoxInput\"\n\t\tdata-dojo-attach-point=\"focusNode\"\n\t \tdata-dojo-attach-event=\"ondijitclick:_onClick\"\n/></div>\n","url:esriviewer/ui/layers/template/LayersTocWidgetTemplate.html":"<div>\r\n    <div class=\"tocRightClickLbl\">Right click for actions</div>\r\n    <div data-dojo-attach-point=\"tocContainer\" class=\"tocContainer\">\r\n\r\n\r\n    </div>\r\n</div>","url:esriviewer/ui/navigation/template/NavigationWidgetTemplate.html":"<div data-bind=\"visible: visible\" class=\"navigationHorizontalWidgetContainer\">\r\n    <div class=\"navigationTextToolbarHorizontal\">\r\n        <div class=\"navigationTextToolbarHorizontalInner\" data-dojo-attach-point=\"navigationToolbar\">\r\n        </div>\r\n    </div>\r\n</div>\r\n","url:esriviewer/ui/draw/configure/geometry/template/ConfigureLineTemplate.html":"<div class=\"configureDrawGeometryContainer\">\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Line Style</span>\r\n        <select data-bind=\"options: lineStyles ,value:selectedLineStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Width</span>\r\n        <select data-bind=\"options: lineWidths ,value:selectedWidth\"></select>\r\n    </div>\r\n    <div data-dojo-attach-point=\"transparencySliderContainer\"></div>\r\n\r\n    <div class=\"configureDrawColorPickerContainer\" data-dojo-attach-point=\"colorPickerContainer\"></div>\r\n</div>","url:esriviewer/ui/draw/base/template/GraphicsListingTemplate.html":"<div>\r\n    <div class=\"addGraphicsActionsContainer\" data-dojo-attach-point=\"addGraphicsActionsContainer\">\r\n        <div class=\"graphicsListRightIcon commonIcons16 disk\" title=\"Save Graphics\"\r\n             data-bind=\"click:toggleSaveGraphics, visible:saveGraphicsIconVisible\"></div>\r\n        <div class=\"graphicsListLeftIcon commonIcons16 layerHide\" title=\"Toggle Graphics\"\r\n             data-bind=\"click:toggleAllGraphics, css:{layerShow: allGraphicsVisible}\"></div>\r\n        <div class=\"graphicsListLeftIcon commonIcons16 trash\" title=\"Remove All Graphics\"\r\n             data-dojo-attach-event=\"onclick:showConfirmRemoveAllTooltip\"\r\n             data-dojo-attach-point=\"removeAllGraphicsIcon\"\r\n                ></div>\r\n    </div>\r\n    <div class=\"saveGraphicsInputContainer\" data-bind=\"visible: saveGraphicsInputVisible\">\r\n        <input data-dojo-type=\"dijit/form/TextBox\" data-dojo-attach-event=\"onKeyUp: handleSaveGraphicsKeyUp\" data-dojo-attach-point=\"userSaveGraphicsNameInput\" placeholder=\"Enter A Label...\"/>\r\n        <span data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:handleSaveGraphics\">Save</span>\r\n    </div>\r\n\r\n    <div class=\"addedGraphicsListContainer\" data-dojo-attach-point=\"addedGraphicsListContainer\">\r\n        <ul data-dojo-attach-point=\"addedGraphicsList\" class=\"viewerList\" data-bind=\"foreach: addedGraphics\">\r\n            <li class=\"graphicsListEntry\">\r\n                <div title=\"Pan And Flash Graphic\"\r\n                     class=\"viewerListGenericIcon commonIcons16 magnifyingGlass\"\r\n                     data-bind=\"click:$parent.zoomToGraphic\"></div>\r\n                <div title=\"Remove Graphic\" class=\"viewerListEntryRemoveIcon commonIcons16 remove\"\r\n                     data-bind=\"click:$parent.removeGraphic\"></div>\r\n                <span class=\"graphicsListEntryLabel\" data-bind=\"text: $data.label\"></span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>","url:dijit/templates/TreeNode.html":"<div class=\"dijitTreeNode\" role=\"presentation\"\n\t><div data-dojo-attach-point=\"rowNode\" class=\"dijitTreeRow\" role=\"presentation\"\n\t\t><span data-dojo-attach-point=\"expandoNode\" class=\"dijitInline dijitTreeExpando\" role=\"presentation\"></span\n\t\t><span data-dojo-attach-point=\"expandoNodeText\" class=\"dijitExpandoText\" role=\"presentation\"></span\n\t\t><span data-dojo-attach-point=\"contentNode\"\n\t\t\tclass=\"dijitTreeContent\" role=\"presentation\">\n\t\t\t<span role=\"presentation\" class=\"dijitInline dijitIcon dijitTreeIcon\" data-dojo-attach-point=\"iconNode\"></span\n\t\t\t><span data-dojo-attach-point=\"labelNode,focusNode\" class=\"dijitTreeLabel\" role=\"treeitem\" tabindex=\"-1\" aria-selected=\"false\"></span>\n\t\t</span\n\t></div>\n\t<div data-dojo-attach-point=\"containerNode\" class=\"dijitTreeNodeContainer\" role=\"presentation\" style=\"display: none;\"></div>\n</div>\n","url:esriviewer/ui/throbber/template/ThrobberTemplate.html":"<div class=\"loadingThrobber\"\r\n     style=\"display:none\">\r\n    <div class=\"loadingThrobberInner\">\r\n        <div class=\"loadingIcon\"></div>\r\n    </div>\r\n</div>","undefined":undefined,"url:esriviewer/ui/draw/configure/geometry/template/ConfigurePolygonTemplate.html":"<div class=\"configureDrawGeometryContainer\">\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Fill Style</span>\r\n        <select data-bind=\"options: fillStyles ,value:selectedFillStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Outline Style</span>\r\n        <select data-bind=\"options: outlineStyles ,value:selectedOutlineStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Outline Width</span>\r\n        <select data-bind=\"options: outlineWidths ,value:selectedOutlineWidth\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Angle</span>\r\n        <select data-bind=\"options: angles ,value:selectedAngle\"></select>\r\n    </div>\r\n    <div data-dojo-attach-point=\"transparencySliderContainer\"></div>\r\n\r\n    <div class=\"colorPickerTextContainer\">\r\n        <span class=\"colorPickerText\"\r\n              data-bind=\"click: setOutlineColorMode,css:{colorPickerTextSelected: outlineColorActive}\"> Outline Color</span>\r\n        <span class=\"colorPickerText\"\r\n              data-bind=\"click: setFillColorMode,css:{colorPickerTextSelected: fillColorActive}\"> Fill Color</span>\r\n\r\n    </div>\r\n\r\n\r\n    <div class=\"configureDrawColorPickerContainer\" data-dojo-attach-point=\"colorPickerContainer\"></div>\r\n</div>","url:esriviewer/ui/toolbar/base/template/BasemapsListingTemplate.html":"<div data-bind=\"visible: visible\" class=\"basemapsToolbarDropdown toolbarDropdownContent\">\r\n    <div data-bind=\"foreach:basemaps\">\r\n        <div class=\"basemapToolbarEntry\">\r\n            <div class=\"basemapToolbarEntryLabel\" data-bind=\"text: $data.label\"></div>\r\n            <img class=\"basemapToolbarThumb\"\r\n                 data-bind=\"click:$parent.handleBasemapClick, css:{basemapThumbSelected: $data.selected},attr:{src:$data.thumbnail, title: $data.label}\">\r\n        </div>\r\n    </div>\r\n</div>","url:dijit/templates/Tree.html":"<div role=\"tree\">\n\t<div class=\"dijitInline dijitTreeIndent\" style=\"position: absolute; top: -9999px\" data-dojo-attach-point=\"indentDetector\"></div>\n\t<div class=\"dijitTreeExpando dijitTreeExpandoLoading\" data-dojo-attach-point=\"rootLoadingIndicator\"></div>\n\t<div data-dojo-attach-point=\"containerNode\" class=\"dijitTreeContainer\" role=\"presentation\">\n\t</div>\n</div>\n","url:esriviewer/ui/window/template/WindowWidgetTemplate.html":"<div class=\"windowContainer defaultBorder fivePixelBorderRadius defaultBoxShadow\">\r\n    <div data-dojo-attach-point=\"windowHeader\" class=\"windowHeader\">\r\n        <div class=\"windowCloseImg windowAction close\" data-dojo-attach-point=\"windowCloseImg\"\r\n             title=\"Close\"></div>\r\n        <div class=\"windowMinimizeImg windowAction minimize\" data-dojo-attach-point=\"windowMinimizeImg\"\r\n             title=\"Minimize\"></div>\r\n        <div data-dojo-attach-point=\"headerMoverContainer\" class=\"headerMoverContainer\">\r\n            <div class=\"windowIcon ${windowIconClass}\" title=\"${windowIconAltText}\"></div>\r\n            <span class=\"windowHeaderText\">${windowHeaderText}</span>\r\n        </div>\r\n    </div>\r\n    <div class=\"windowContentOuter\" data-dojo-attach-point=\"windowContentOuter\">\r\n        <div data-dojo-attach-point=\"windowContent\" class=\"windowContent\">\r\n            <div data-dojo-attach-point=\"windowLoadingThrobber\" class=\"windowLoadingThrobber\"></div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n</div>","url:esriviewer/ui/accordion/template/ToolsAccordionTemplate.html":"<div class=\"toolsAccordionContainer fivePixelBorderRadius defaultBoxShadow\">\r\n\r\n</div>","url:esriviewer/ui/basemap/template/BasemapGalleryTemplate.html":"<div data-bind=\"visible: visible\" class=\"defaultBackground basemapGalleryContainer\">\r\n    <div data-dojo-attach-point=\"basemapGalleryContents\"></div>\r\n</div>","url:dijit/templates/MenuItem.html":"<tr class=\"dijitReset dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<span role=\"presentation\" class=\"dijitInline dijitIcon dijitMenuItemIcon\" data-dojo-attach-point=\"iconNode\"></span>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode,textDirNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">\n\t\t<span data-dojo-attach-point=\"arrowWrapper\" style=\"visibility: hidden\">\n\t\t\t<span class=\"dijitInline dijitIcon dijitMenuExpand\"></span>\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</span>\n\t</td>\n</tr>\n","url:esriviewer/ui/layers/template/LayersWidgetTemplate.html":"<div>\r\n    <div class=\"defaultTabContainer\" data-dojo-attach-point=\"layersTabContainer\">\r\n        <span data-dojo-attach-point=\"layersTab\"\r\n              data-bind=\"click:showLayersList, css: {selectedTab: layersListVisible}\">Layers</span>\r\n        <span data-dojo-attach-point=\"addLayersTab\"\r\n              data-bind=\"click:showAddLayers, css: {selectedTab: addlayersVisible}\">Add Layer</span>\r\n        <span data-dojo-attach-point=\"persistsedLayersTab\"\r\n              data-bind=\"click:showUserPersistedLayers, css: {selectedTab: persistedLayersVisible}\">Saved Layers</span>\r\n    </div>\r\n    <div data-bind=\"visible:addlayersVisible\" class=\"addLayerContainer\" data-dojo-attach-point=\"addLayerContainer\">\r\n        <div class=\"addLayerContainerInner\">\r\n            <div class=\"viewerAddLayerWorkingWKIDContainer\" data-bind=\"visible:showWKIDInAddLayers\">\r\n                <span class=\"viewerAddLayerLabel \">Map WKID:</span>\r\n                <span class=\"viewerAddLayerWorkingWKIDLabel\" data-bind=\"text: viewerWKID\"></span>\r\n            </div>\r\n            <div class=\"viewerAddLayerLabel viewerAddLayerUrlLabel \">URL:</div>\r\n            <div data-dojo-type=\"dijit/form/TextBox\" style=\"width: 100%\" data-dojo-attach-point=\"addLayerTextInput\"\r\n                 data-dojo-attach-event=\"onKeyUp:handleLayerAddUrlKeyUp\"></div>\r\n            <div class=\"viewerAddLayerLabel viewerAddLayerUrlLabel \">Label:</div>\r\n            <div data-dojo-type=\"dijit/form/TextBox\" style=\"width: 100%\" data-dojo-attach-point=\"addLayerLabelInput\"\r\n                 value=\"Added Layer\"></div>\r\n            <div class=\"viewerAddLayerActions\">\r\n                <div class=\"layerTypeContainer\">\r\n                    <div class=\"viewerAddLayerLabel\">Type:</div>\r\n                    <select data-dojo-type=\"dijit/form/Select\" style=\"width: 100%\"\r\n                            data-dojo-attach-point=\"addLayerTypeSelect\"\r\n                            style=\"width: 15em\"></select>\r\n                </div>\r\n                <div class=\"viewerAddLayerButtonActions\">\r\n                    <div data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:addManualLayer\">Add Layer\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n    <div data-dojo-attach-point=\"layerTocContainer\" data-bind=\"visible:layersListVisible\">\r\n\r\n    </div>\r\n    <div data-bind=\"visible:persistedLayersVisible\" data-dojo-attach-point=\"userPersistedLayersContainer\">\r\n    </div>\r\n</div>","url:esriviewer/ui/measure/template/MeasureWidgetTemplate.html":"<div class=\"measurementWidget\">\r\n    <div class=\"measureIcon areaIcon\"\r\n         title=\"Area\"\r\n         data-bind=\"click:handleAreaButtonClick, css: {measurementIconSelected: areaActive}\"></div>\r\n    <div class=\"measureIcon distanceIcon\"\r\n         title=\"Distance\"\r\n         data-bind=\"click:handleDistanceButtonClick, css: {measurementIconSelected: distanceActive}\"></div>\r\n    <div class=\"measureIcon locationIcon\"\r\n         title=\"Location\"\r\n         data-bind=\"click:handleLocationButtonClick, css: {measurementIconSelected: locationActive}\"></div>\r\n    <div class=\"measurementSpacer\">|</div>\r\n    <select data-bind=\"visible: areaActive, options: areaMeasurementUnits ,value:selectedAreaUnits, optionsText: 'label', optionsValue: 'value'\">\r\n    </select>\r\n    <select data-bind=\"visible: distanceActive, options: distanceMeasurementUnits ,value:selectedDistanceUnits, optionsText: 'label', optionsValue: 'value'\">\r\n    </select>\r\n    <select data-bind=\"visible: locationActive, options: locationUnits ,value:selectedLocationUnits, optionsText: 'label', optionsValue: 'value'\">\r\n    </select>\r\n\r\n\r\n    <div class=\"measurementResultsContainer\">\r\n        <span data-bind=\"text: measureMethodText\" class=\"measureMethodText\"></span>\r\n        <span data-bind=\"text: resultsText\" class=\"measureResultsText\"></span>\r\n        <span data-bind=\"text: unitsText\"  class=\"measureUnitsText\"></span>\r\n    </div>\r\n</div>","url:dijit/templates/CheckedMenuItem.html":"<tr class=\"dijitReset dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"${role}\" tabIndex=\"-1\" aria-checked=\"${checked}\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<span class=\"dijitInline dijitIcon dijitMenuItemIcon dijitCheckedMenuItemIcon\" data-dojo-attach-point=\"iconNode\"></span>\n\t\t<span class=\"dijitMenuItemIconChar dijitCheckedMenuItemIconChar\">${checkedChar}</span>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode,labelNode,textDirNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">&#160;</td>\n</tr>\n","*now":function(r){r(["dojo/i18n!*preload*esriviewer/nls/esriviewer*[\"ar\",\"ca\",\"cs\",\"da\",\"de\",\"el\",\"en-gb\",\"en-us\",\"es-es\",\"fi-fi\",\"fr-fr\",\"he-il\",\"hu\",\"it-it\",\"ja-jp\",\"ko-kr\",\"nl-nl\",\"nb\",\"pl\",\"pt-br\",\"pt-pt\",\"ru\",\"sk\",\"sl\",\"sv\",\"th\",\"tr\",\"zh-tw\",\"zh-cn\",\"ROOT\"]"]);}}});define("esriviewer/esriviewer",[],1);