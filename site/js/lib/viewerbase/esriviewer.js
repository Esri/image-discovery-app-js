//>>built
require({cache:{"esriviewer/ui/footer/FooterTogglerWidget":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/text!./template/FooterTogglerTemplate.html","../base/UITemplatedWidget","dojo/dom-construct","./model/FooterTogglerViewModel"],function(_1,_2,_3,_4,_5,_6,_7){return _1([_5],{firstFooterShow:true,templateString:_4,postCreate:function(){this.inherited(arguments);this.viewModel=new _7();ko.applyBindings(this.viewModel,this.domNode);},initListeners:function(){this.inherited(arguments);_2.subscribe(VIEWER_GLOBALS.EVENTS.FOOTER.TOGGLE,_3.hitch(this,this.toggle));_2.subscribe(VIEWER_GLOBALS.EVENTS.FOOTER.COLLAPSE,_3.hitch(this,this.collapse));_2.subscribe(VIEWER_GLOBALS.EVENTS.FOOTER.EXPAND,_3.hitch(this,this.expand));_2.subscribe(VIEWER_GLOBALS.EVENTS.FOOTER.IS_EXPANDED,_3.hitch(this,this._handleIsExpanded));},_handleIsExpanded:function(_8){if(_8!=null&&_3.isFunction(_8)){_8(this.viewModel.expanded());}},toggle:function(){if(this.viewModel.expanded()){this.collapse();}else{this.expand();}},collapse:function(){if(this.viewModel.expanded()){this.viewModel.expanded(false);_2.publish(VIEWER_GLOBALS.EVENTS.FOOTER.COLLAPSED);}},expand:function(){if(!this.viewModel.expanded()){this.viewModel.expanded(true);if(this.firstFooterShow){this.onFirstFooterShow();this.firstFooterShow=false;}_2.publish(VIEWER_GLOBALS.EVENTS.FOOTER.EXPANDED);}},setContent:function(_9){_6.place(_9,this.footerContent);},onFirstFooterShow:function(){}});});},"esriviewer/ui/editor/FeatureServiceEditorWindowWidget":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","../window/WindowWidget"],function(_a,_b,_c,_d){return _a([_d],{defaultPositioning:{x:600,y:50},windowWidth:"310px",windowHeaderText:"Feature Edit",windowIconAltText:"Feature Edit",positioningParamName:"featureEdit",windowIconClass:"commonIcons16 pencil",constructor:function(){this.firstShowListener=this.on("firstWindowShow",_c.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/editor/FeatureServiceEditor"],_c.hitch(this,function(_e){this.featureServiceEditor=new _e();this.featureServiceEditor.on("setParentWidth",_c.hitch(this,this.setWindowWidthFromInt));this.setContent(this.featureServiceEditor.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_b.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.FEATURE_EDITOR.SHOW,_c.hitch(this,this.show)));this.subscribes.push(_b.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.FEATURE_EDITOR.HIDE,_c.hitch(this,this.hide)));this.subscribes.push(_b.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.FEATURE_EDITOR.TOGGLE,_c.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.featureServiceEditor){if(this.featureServiceEditor.currentDrawType!=null){this.featureServiceEditor.clearDraw();}}},show:function(){this.inherited(arguments);if(this.featureServiceEditor){this.featureServiceEditor.showFeatureLayers();}}});});},"esriviewer/map/base/LayerQueryTools":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","esri/tasks/QueryTask","esri/tasks/query","esri/tasks/StatisticDefinition","./DistinctQuery"],function(_f,_10,_11,_12,_13,_14,_15){return _f([],{constructor:function(){this.layerFieldsCache={};this.initListeners();},initListeners:function(){this.inherited(arguments);_11.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.QUERY_LAYER,_10.hitch(this,this.handleQueryLayer));_11.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.GET_MIN_MAX_FOR_FIELD,_10.hitch(this,this._handleGetMinMaxForField));_11.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.GET_DISTINCT_FIELD_VALUES,_10.hitch(this,this._handleGetDistinctFieldValues));},_handleGetDistinctFieldValues:function(_16){if(!this._validateParameters(_16)){return;}var _17=new _15();_17.returnGeometry=false;if(_16.whereClause!=null&&_16.whereClause.length>0){_17.where=_16.whereClause;}else{_17.where="1 = 1";}if(_16.geometry!=null){_17.geometry=_16.geometry;}if(_16.distinctField!=null){_17.orderByFields=[_16.distinctField];_17.outFields=[_16.distinctField];}else{if(_16.errback!=null&&_10.isFunction(_16.errback)){_16.errback("Must supply distinct field");return;}}var _18=this._getQueryTask(_16);this._performQuery(_18,_17,function(res){if(!_16.processResponse){_16.callback(res);}else{var _19=[];if(res&&res.features&&res.features.length>0){var _1a;for(var i=0;i<res.features.length;i++){_1a=res.features[i].attributes;_19.push(_1a[_16.distinctField]);}}_16.callback(_19);}},_16.errback);},_validateParameters:function(_1b){if(_1b.layer==null||_1b.layer.url==null){if(_1b.errback!=null&&_10.isFunction(_1b.errback)){_1b.errback("There is no query layer");}return false;}if(_1b.callback==null||!_10.isFunction(_1b.callback)){return false;}if(_1b.errback==null){_1b.errback=_10.hitch(this,this._handleQueryLayerDefaultErrback,_1b.layer);}return true;},_getQueryTask:function(_1c){var _1d=_1c.layer.url;if(_1c.layerId!=null){_1d=VIEWER_UTILS.joinUrl(_1d,_1c.layerId);}return new _12(_1d);},_handleGetMinMaxForField:function(_1e){if(!this._validateParameters(_1e)){return;}var _1f=this._getQueryTask(_1e);var _20=new _13();_20.returnGeometry=false;var _21=[];var _22=new _14();_22.onStatisticField=_1e.minFieldName;_22.outStatisticFieldName="min";_22.statisticType="min";var _23=new _14();_23.onStatisticField=_1e.maxFieldName;_23.outStatisticFieldName="max";_23.statisticType="max";_21.push(_22);_21.push(_23);_20.outStatistics=_21;this._performQuery(_1f,_20,function(res){var min=null;var max=null;if(res&&res.features&&res.features.length>0){min=res.features[0].attributes.min;max=res.features[0].attributes.max;}_1e.callback({min:min,max:max});},_1e.errback);},handleQueryLayer:function(_24){if(!this._validateParameters(_24)){return;}var _25=this._getQueryTask(_24);var _26=new _13();_26.returnGeometry=_24.returnGeometry;var map;_11.publish(VIEWER_GLOBALS.EVENTS.MAP.GET,function(_27){map=_27;});_26.outSpatialReference=map.extent.spatialReference;if(_24.objectIds!=null&&_24.objectIds.length>0){_26.objectIds=_24.objectIds;}if(_24.whereClause!=null&&_24.whereClause.length>0){_26.where=_24.whereClause;}if(_24.geometry!=null){_26.geometry=_24.geometry;}if(_24.outFields!=null){_26.outFields=_24.outFields;}else{if(_24.returnGeometry){_26.outFields=["*"];}else{var _28=queryUrl.toLowerCase();if(this.layerFieldsCache[_28]==null){if(_24.layerId!=null){var _29=_24.callback;var _2a=_24.errback;VIEWER_UTILS.getLayerInfoFromService(_24.layer.url,_24.layerId,_10.hitch(this,function(_2b){var _2c=this._generateOutFieldsFromLayer(_2b);this.layerFieldsCache[_28]=_2c;_26.outFields=_2c;this._performQuery(_25,_26,_29,_2a);}));return;}else{var _2d=this._generateOutFieldsFromLayer(_24.layer);this.layerFieldsCache[_28]=_2d;_26.outFields=_2d;}}else{_26.outFields=this.layerFieldsCache[_28];}}}this._performQuery(_25,_26,_24.callback,_24.errback);},_generateOutFieldsFromLayer:function(_2e){if(_2e==null||!_10.isObject(_2e)||_2e.fields==null||!_10.isArray(_2e.fields)){return ["*"];}var _2f=[];var _30;for(var i=0;i<_2e.fields.length;i++){_30=_2e.fields[i];if(_30.type!=VIEWER_GLOBALS.ESRI_FIELD_TYPES.GEOMETRY){_2f.push(_30.name);}}return _2f;},_performQuery:function(_31,_32,_33,_34){_31.execute(_32,_33,_34);},_handleQueryLayerDefaultErrback:function(_35,err){VIEWER_UTILS.log("Could not perform layer query",VIEWER_GLOBALS.LOG_TYPE.ERROR);_11.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Could not perform layer query");}});});},"esriviewer/base/ConfigurationEntryMixin":function(){define(["dojo/_base/declare"],function(_36){return _36([],{constructor:function(){},loadViewerConfigurationData:function(){}});});},"esriviewer/ui/draw/base/GraphicsListWidget":function(){define(["dojo/_base/declare","dojo/text!./template/GraphicsListingTemplate.html","../../base/UITemplatedWidget","dojo/_base/lang","../../tooltip/ConfirmTooltip","./model/GraphicsListViewModel","dijit/form/TextBox","dijit/form/Button"],function(_37,_38,_39,_3a,_3b,_3c,_3d,_3e){return _37([_39],{templateString:_38,graphicsCount:0,saveSupported:false,allGraphicsOff:false,constructor:function(_3f){_3a.mixin(this,_3f||{});this.typeLabelLookup={};this.typeLabelLookup[VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT]="Point";this.typeLabelLookup[VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE]="Line";this.typeLabelLookup[VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON]="Polygon";this.typeLabelLookup[VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_RECTANGLE]="Rectangle";this.typeLabelLookup[VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT]="Text Label";},postCreate:function(){this.inherited(arguments);this.viewModel=new _3c();this.viewModel.saveGraphicsIconVisible(this.saveSupported);this.viewModel.on(this.viewModel.REMOVE_ALL_GRAPHICS,_3a.hitch(this,this.handleRemoveAllGraphics));this.viewModel.on(this.viewModel.REMOVE_GRAPHIC,_3a.hitch(this,this.handleRemoveGraphic));ko.applyBindings(this.viewModel,this.domNode);},handleRemoveAllGraphics:function(){this.onRemoveAllGraphics();},onRemoveAllGraphics:function(){},handleRemoveGraphic:function(_40){this.onRemoveGraphic(_40);},onRemoveGraphic:function(_41){},addGraphic:function(_42){this.viewModel.addedGraphics.push({label:_42.label?_42.label:(this.typeLabelLookup[_42.type]+" "+VIEWER_UTILS.getTimeStamp()),graphic:_42.graphic});},showConfirmRemoveAllTooltip:function(){if(this.confirmDeleteAllTooltip==null){this.createConfirmDeleteBookmarkTooltip();}if(this.confirmDeleteAllTooltip){this.confirmDeleteAllTooltip.show();}},createConfirmDeleteBookmarkTooltip:function(){this.confirmDeleteAllTooltip=new _3b({confirmCallback:_3a.hitch(this.viewModel,this.viewModel.removeAllGraphics),aroundNode:this.removeAllGraphicsIcon,displayText:"Delete Graphics? "});this.confirmDeleteAllTooltip.on("hide",_3a.hitch(this,function(){this.deleteBookmarkConfirmedCallback=null;}));},hidePopups:function(){if(this.confirmDeleteAllTooltip){this.confirmDeleteAllTooltip.hide();}},handleSaveGraphicsKeyUp:function(e){if(VIEWER_UTILS.isEnterKey(e)){this.handleSaveGraphics();}},handleSaveGraphics:function(){var _43=this.userSaveGraphicsNameInput.get("value");if(_43!=null&&_43!=""){this.onSaveGraphics(_43,this.viewModel.addedGraphics());this.viewModel.saveGraphicsInputVisible(false);this.userSaveGraphicsNameInput.set("value","");}},getGraphics:function(){var _44=this.viewModel.addedGraphics();var _45=[];for(var i=0;i<_44.length;i++){_45.push(_44[i].graphic);}return _45;},onSaveGraphics:function(_46,_47){}});});},"esriviewer/ui/layers/LayersWindowWidget":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/dom-class","../window/WindowWidget","./LayersWidget"],function(_48,_49,_4a,_4b,_4c,_4d){return _48([_4c],{defaultPositioning:{x:700,y:50},windowWidth:null,windowHeaderText:"Map Layers",windowIconAltText:"Map Layers",windowIconClass:"commonIcons16 layerList",positioningParamName:"layers",constructor:function(){this.firstShowListener=this.on("firstWindowShow",_4a.hitch(this,this.handleFirstWindowShow));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_49.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.WIDGET.SHOW,_4a.hitch(this,this.show)));},handleFirstWindowShow:function(){this.firstShowListener.remove();this.setContent(this.layersWidget.domNode);},postCreate:function(){_4b.add(this.domNode,"layersWindow");_4b.add(this.windowContent,"layersWindowContent");this.layersWidget=new _4d();this.inherited(arguments);},show:function(){this.inherited(arguments);this.layersWidget.showLayerList();},hidePopups:function(){this.inherited(arguments);if(this.layersWidget){this.layersWidget.hidePopups();}}});});},"esriviewer/map/base/MapUtils":function(){define(["dojo/_base/declare"],function(_4e){return _4e([],{});});},"esriviewer/ui/base/UITemplatedWidget":function(){define(["dojo/_base/declare","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","./UIWidget"],function(_4f,_50,_51,_52){return _4f([_52,_50,_51],{widgetsInTemplate:true});});},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(_53,_54,_55,_56){return _55("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:false,constructor:function(_57){_56.mixin(this,_57);this.connects=[];var _58=this.store;if(!_58.getFeatures()["dojo.data.api.Identity"]){throw new Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");}if(_58.getFeatures()["dojo.data.api.Notification"]){this.connects=this.connects.concat([_54.after(_58,"onNew",_56.hitch(this,"onNewItem"),true),_54.after(_58,"onDelete",_56.hitch(this,"onDeleteItem"),true),_54.after(_58,"onSet",_56.hitch(this,"onSetItem"),true)]);}},destroy:function(){var h;while(h=this.connects.pop()){h.remove();}},getRoot:function(_59,_5a){if(this.root){_59(this.root);}else{this.store.fetch({query:this.query,onComplete:_56.hitch(this,function(_5b){if(_5b.length!=1){throw new Error("dijit.tree.TreeStoreModel: root query returned "+_5b.length+" items, but must return exactly one");}this.root=_5b[0];_59(this.root);}),onError:_5a});}},mayHaveChildren:function(_5c){return _53.some(this.childrenAttrs,function(_5d){return this.store.hasAttribute(_5c,_5d);},this);},getChildren:function(_5e,_5f,_60){var _61=this.store;if(!_61.isItemLoaded(_5e)){var _62=_56.hitch(this,arguments.callee);_61.loadItem({item:_5e,onItem:function(_63){_62(_63,_5f,_60);},onError:_60});return;}var _64=[];for(var i=0;i<this.childrenAttrs.length;i++){var _65=_61.getValues(_5e,this.childrenAttrs[i]);_64=_64.concat(_65);}var _66=0;if(!this.deferItemLoadingUntilExpand){_53.forEach(_64,function(_67){if(!_61.isItemLoaded(_67)){_66++;}});}if(_66==0){_5f(_64);}else{_53.forEach(_64,function(_68,idx){if(!_61.isItemLoaded(_68)){_61.loadItem({item:_68,onItem:function(_69){_64[idx]=_69;if(--_66==0){_5f(_64);}},onError:_60});}});}},isItem:function(_6a){return this.store.isItem(_6a);},fetchItemByIdentity:function(_6b){this.store.fetchItemByIdentity(_6b);},getIdentity:function(_6c){return this.store.getIdentity(_6c);},getLabel:function(_6d){if(this.labelAttr){return this.store.getValue(_6d,this.labelAttr);}else{return this.store.getLabel(_6d);}},newItem:function(_6e,_6f,_70){var _71={parent:_6f,attribute:this.childrenAttrs[0]},_72;if(this.newItemIdAttr&&_6e[this.newItemIdAttr]){this.fetchItemByIdentity({identity:_6e[this.newItemIdAttr],scope:this,onItem:function(_73){if(_73){this.pasteItem(_73,null,_6f,true,_70);}else{_72=this.store.newItem(_6e,_71);if(_72&&(_70!=undefined)){this.pasteItem(_72,_6f,_6f,false,_70);}}}});}else{_72=this.store.newItem(_6e,_71);if(_72&&(_70!=undefined)){this.pasteItem(_72,_6f,_6f,false,_70);}}},pasteItem:function(_74,_75,_76,_77,_78){var _79=this.store,_7a=this.childrenAttrs[0];if(_75){_53.forEach(this.childrenAttrs,function(_7b){if(_79.containsValue(_75,_7b,_74)){if(!_77){var _7c=_53.filter(_79.getValues(_75,_7b),function(x){return x!=_74;});_79.setValues(_75,_7b,_7c);}_7a=_7b;}});}if(_76){if(typeof _78=="number"){var _7d=_79.getValues(_76,_7a).slice();_7d.splice(_78,0,_74);_79.setValues(_76,_7a,_7d);}else{_79.setValues(_76,_7a,_79.getValues(_76,_7a).concat(_74));}}},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(_7e,_7f){if(!_7f){return;}this.getChildren(_7f.item,_56.hitch(this,function(_80){this.onChildrenChange(_7f.item,_80);}));},onDeleteItem:function(_81){this.onDelete(_81);},onSetItem:function(_82,_83){if(_53.indexOf(this.childrenAttrs,_83)!=-1){this.getChildren(_82,_56.hitch(this,function(_84){this.onChildrenChange(_82,_84);}));}else{this.onChange(_82);}}});});},"dijit/_MenuBase":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/lang","dojo/mouse","dojo/on","dojo/window","./a11yclick","./registry","./_Widget","./_CssStateMixin","./_KeyNavContainer","./_TemplatedMixin"],function(_85,_86,dom,_87,_88,_89,_8a,on,_8b,_8c,_8d,_8e,_8f,_90,_91){return _86("dijit._MenuBase",[_8e,_91,_90,_8f],{selected:null,_setSelectedAttr:function(_92){if(this.selected!=_92){if(this.selected){this.selected._setSelected(false);this._onChildDeselect(this.selected);}if(_92){_92._setSelected(true);}this._set("selected",_92);}},activated:false,_setActivatedAttr:function(val){_88.toggle(this.domNode,"dijitMenuActive",val);_88.toggle(this.domNode,"dijitMenuPassive",!val);this._set("activated",val);},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:false,childSelector:function(_93){var _94=_8d.byNode(_93);return _93.parentNode==this.containerNode&&_94&&_94.focus;},postCreate:function(){var _95=this,_96=typeof this.childSelector=="string"?this.childSelector:_89.hitch(this,"childSelector");this.own(on(this.containerNode,on.selector(_96,_8a.enter),function(){_95.onItemHover(_8d.byNode(this));}),on(this.containerNode,on.selector(_96,_8a.leave),function(){_95.onItemUnhover(_8d.byNode(this));}),on(this.containerNode,on.selector(_96,_8c),function(evt){_95.onItemClick(_8d.byNode(this),evt);evt.stopPropagation();evt.preventDefault();}));this.inherited(arguments);},onKeyboardSearch:function(_97,evt,_98,_99){this.inherited(arguments);if(!!_97&&(_99==-1||(!!_97.popup&&_99==1))){this.onItemClick(_97,evt);}},_keyboardSearchCompare:function(_9a,_9b){if(!!_9a.shortcutKey){return _9b==_9a.shortcutKey.toLowerCase()?-1:0;}return this.inherited(arguments)?1:0;},onExecute:function(){},onCancel:function(){},_moveToPopup:function(evt){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled){this.onItemClick(this.focusedChild,evt);}else{var _9c=this._getTopMenu();if(_9c&&_9c._isMenuBar){_9c.focusNext();}}},_onPopupHover:function(){this.set("selected",this.currentPopupItem);this._stopPendingCloseTimer();},onItemHover:function(_9d){if(this.activated){this.set("selected",_9d);if(_9d.popup&&!_9d.disabled&&!this.hover_timer){this.hover_timer=this.defer(function(){this._openItemPopup(_9d);},this.popupDelay);}}else{if(this.passivePopupDelay<Infinity){if(this.passive_hover_timer){this.passive_hover_timer.remove();}this.passive_hover_timer=this.defer(function(){this.onItemClick(_9d,{type:"click"});},this.passivePopupDelay);}}this._hoveredChild=_9d;_9d._set("hovering",true);},_onChildDeselect:function(_9e){this._stopPopupTimer();if(this.currentPopupItem==_9e){this._stopPendingCloseTimer();this._pendingClose_timer=this.defer(function(){this._pendingClose_timer=null;this.currentPopupItem=null;_9e._closePopup();},this.popupDelay);}},onItemUnhover:function(_9f){if(this._hoveredChild==_9f){this._hoveredChild=null;}if(this.passive_hover_timer){this.passive_hover_timer.remove();this.passive_hover_timer=null;}_9f._set("hovering",false);},_stopPopupTimer:function(){if(this.hover_timer){this.hover_timer=this.hover_timer.remove();}},_stopPendingCloseTimer:function(){if(this._pendingClose_timer){this._pendingClose_timer=this._pendingClose_timer.remove();}},_getTopMenu:function(){for(var top=this;top.parentMenu;top=top.parentMenu){}return top;},onItemClick:function(_a0,evt){if(this.passive_hover_timer){this.passive_hover_timer.remove();}this.focusChild(_a0);if(_a0.disabled){return false;}if(_a0.popup){this.set("selected",_a0);this.set("activated",true);var _a1=/^key/.test(evt._origType||evt.type)||(evt.clientX==0&&evt.clientY==0);this._openItemPopup(_a0,_a1);}else{this.onExecute();_a0._onClick?_a0._onClick(evt):_a0.onClick(evt);}},_openItemPopup:function(_a2,_a3){if(_a2==this.currentPopupItem){return;}if(this.currentPopupItem){this._stopPendingCloseTimer();this.currentPopupItem._closePopup();}this._stopPopupTimer();var _a4=_a2.popup;_a4.parentMenu=this;this.own(this._mouseoverHandle=on.once(_a4.domNode,"mouseover",_89.hitch(this,"_onPopupHover")));var _a5=this;_a2._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){if(_a3){_a5.focusChild(_a2);}_a5._cleanUp();},onExecute:_89.hitch(this,"_cleanUp",true),onClose:function(){if(_a5._mouseoverHandle){_a5._mouseoverHandle.remove();delete _a5._mouseoverHandle;}}},_a3);this.currentPopupItem=_a2;},onOpen:function(){this.isShowingNow=true;this.set("activated",true);},onClose:function(){this.set("activated",false);this.set("selected",null);this.isShowingNow=false;this.parentMenu=null;},_closeChild:function(){this._stopPopupTimer();if(this.currentPopupItem){if(this.focused){_87.set(this.selected.focusNode,"tabIndex",this.tabIndex);this.selected.focusNode.focus();}this.currentPopupItem._closePopup();this.currentPopupItem=null;}},_onItemFocus:function(_a6){if(this._hoveredChild&&this._hoveredChild!=_a6){this.onItemUnhover(this._hoveredChild);}this.set("selected",_a6);},_onBlur:function(){this._cleanUp(true);this.inherited(arguments);},_cleanUp:function(_a7){this._closeChild();if(typeof this.isShowingNow=="undefined"){this.set("activated",false);}if(_a7){this.set("selected",null);}}});});},"esriviewer/ui/logging/model/LoggingViewModel":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(_a8,_a9){return _a8([],{constructor:function(){this.infoDisplayed=ko.observable(false);this.warningDisplayed=ko.observable(true);this.errorDisplayed=ko.observable(true);this.logEntries=ko.observableArray();this.hasLogEntries=ko.computed(_a9.hitch(this,this._hasEntries));this.filteredEntries=ko.computed(_a9.hitch(this,this._filteredEntries));},_hasEntries:function(){return this.logEntries().length>0;},_filteredEntries:function(){var _aa=[];var _ab=this.logEntries();var _ac;for(var i=0;i<_ab.length;i++){_ac=_ab[i];if(_ac.type===VIEWER_GLOBALS.LOG_TYPE.ERROR&&this.errorDisplayed()){_aa.push(_ac);}else{if(_ac.type===VIEWER_GLOBALS.LOG_TYPE.WARNING&&this.warningDisplayed()){_aa.push(_ac);}else{if(_ac.type===VIEWER_GLOBALS.LOG_TYPE.INFO&&this.infoDisplayed()){_aa.push(_ac);}}}}return _aa;}});});},"esriviewer/ui/tooltip/ConfirmTooltip":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","dojo/dom-construct","dijit/TooltipDialog","../base/UIWidget"],function(_ad,_ae,on,_af,_b0,_b1){return _ad([_b1],{optionClassName:"confirmTooltipOptionText",contentHeaderLabelClassName:"confirmTooltipContentLbl",defaultYesLabel:"Yes",defaultNoLabel:"No",defaultDisplayText:"Confirm:",visible:false,constructor:function(_b2){this.confirmCallback=null;_ae.mixin(this,_b2||{});this._createTooltip();},getYesLabel:function(){return this.yesLabel==null?this.defaultYesLabel:this.yesLabel;},getNoLabel:function(){return this.noLabel==null?this.defaultNoLabel:this.noLabel;},getDisplayText:function(){return this.displayText==null?this.defaultDisplayText:this.displayText;},getConfirmCallback:function(){return this.confirmCallback;},hasConfirmCallback:function(){return this.confirmCallback!=null&&_ae.isFunction(this.confirmCallback);},onTooltipCreated:function(_b3){},setAtMouseEvent:function(evt){this.aroundNode=null;this.mouseEvent=evt;},setAroundNode:function(_b4){this.aroundNode=_b4;this.mouseEvent=null;},hasAroundNode:function(){return this.aroundNode!=null;},hasMouseEvent:function(){return this.mouseEvent!=null;},_createTooltip:function(){if(!this.hasConfirmCallback()){this.onError("must provide a confirm callback");return;}var _b5=_af.create("div");var _b6=_af.create("span",{innerHTML:this.getDisplayText(),className:this.contentHeaderLabelClassName});var _b7=_af.create("span",{innerHTML:this.getYesLabel(),className:this.optionClassName});var _b8=_af.create("span",{innerHTML:this.getNoLabel(),className:this.optionClassName});_af.place(_b6,_b5);_af.place(_b7,_b5);_af.place(_b8,_b5);this.tooltip=new _b0({content:_b5});this.tooltip.on("close",_ae.hitch(this,function(){this.visible=false;}));var _b9=this.getConfirmCallback();var _ba=_ae.hitch(this,function(){this.confirmCallback();this.hide();});on(_b7,"click",_ba);on(_b8,"click",_ae.hitch(this,this.hide));this.onTooltipCreated(this.tooltip);},show:function(){if(!this.hasAroundNode()&&!this.hasMouseEvent()){this.onError("No Position passed for popup");return;}var _bb={popup:this.tooltip};if(this.aroundNode){_bb.around=this.aroundNode;}if(this.mouseEvent){_bb.x=(this.mouseEvent.pageX!=null?this.mouseEvent.pageX:this.mouseEvent.clientX)+5;_bb.y=(this.mouseEvent.pageY!=null?this.mouseEvent.pageY:this.mouseEvent.clientY)+5;}if(this.tooltip){dijit.popup.open(_bb);this.visible=true;}},hide:function(){if(this.tooltip){dijit.popup.close(this.tooltip);this.onHide();this.visible=false;}},onHide:function(){},onError:function(_bc){}});});},"esriviewer/ui/plotting/PlottingWidgetWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/dom-class","../window/WindowWidget"],function(_bd,_be,_bf,_c0,_c1){return _bd([_c1],{defaultPositioning:{x:600,y:125},windowWidth:"300px",windowHeaderText:"Plot Coordinates",windowIconAltText:"Plot Coordinates",windowIconClass:"commonIcons16 pushpin",positioningParamName:"plotting",constructor:function(){this.firstShowListener=this.on("firstWindowShow",_be.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_c0.add(this.windowContent,"plottingWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/plotting/PlottingWidget"],_be.hitch(this,function(_c2){this.plottingWidget=new _c2();this.setContent(this.plottingWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_bf.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PLOTTING.SHOW,_be.hitch(this,this.show)));this.subscribes.push(_bf.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PLOTTING.HIDE,_be.hitch(this,this.hide)));this.subscribes.push(_bf.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PLOTTING.TOGGLE,_be.hitch(this,this.toggle)));}});});},"dojox/storage/WhatWGStorageProvider":function(){define(["dijit","dojo","dojox","dojo/require!dojox/storage/Provider,dojox/storage/manager"],function(_c3,_c4,_c5){_c4.provide("dojox.storage.WhatWGStorageProvider");_c4.require("dojox.storage.Provider");_c4.require("dojox.storage.manager");_c4.declare("dojox.storage.WhatWGStorageProvider",[_c5.storage.Provider],{initialized:false,_domain:null,_available:null,_statusHandler:null,_allNamespaces:null,_storageEventListener:null,initialize:function(){if(_c4.config["disableWhatWGStorage"]==true){return;}this._domain=location.hostname;this.initialized=true;_c5.storage.manager.loaded();},isAvailable:function(){try{var _c6=globalStorage[location.hostname];}catch(e){this._available=false;return this._available;}this._available=true;return this._available;},put:function(key,_c7,_c8,_c9){if(this.isValidKey(key)==false){throw new Error("Invalid key given: "+key);}_c9=_c9||this.DEFAULT_NAMESPACE;key=this.getFullKey(key,_c9);this._statusHandler=_c8;if(_c4.isString(_c7)){_c7="string:"+_c7;}else{_c7=_c4.toJson(_c7);}var _ca=_c4.hitch(this,function(evt){window.removeEventListener("storage",_ca,false);if(_c8){_c8.call(null,this.SUCCESS,key,null,_c9);}});window.addEventListener("storage",_ca,false);try{var _cb=globalStorage[this._domain];_cb.setItem(key,_c7);}catch(e){this._statusHandler.call(null,this.FAILED,key,e.toString(),_c9);}},get:function(key,_cc){if(this.isValidKey(key)==false){throw new Error("Invalid key given: "+key);}_cc=_cc||this.DEFAULT_NAMESPACE;key=this.getFullKey(key,_cc);var _cd=globalStorage[this._domain];var _ce=_cd.getItem(key);if(_ce==null||_ce==""){return null;}_ce=_ce.value;if(_c4.isString(_ce)&&(/^string:/.test(_ce))){_ce=_ce.substring("string:".length);}else{_ce=_c4.fromJson(_ce);}return _ce;},getNamespaces:function(){var _cf=[this.DEFAULT_NAMESPACE];var _d0={};var _d1=globalStorage[this._domain];var _d2=/^__([^_]*)_/;for(var i=0;i<_d1.length;i++){var _d3=_d1.key(i);if(_d2.test(_d3)==true){var _d4=_d3.match(_d2)[1];if(typeof _d0[_d4]=="undefined"){_d0[_d4]=true;_cf.push(_d4);}}}return _cf;},getKeys:function(_d5){_d5=_d5||this.DEFAULT_NAMESPACE;if(this.isValidKey(_d5)==false){throw new Error("Invalid namespace given: "+_d5);}var _d6;if(_d5==this.DEFAULT_NAMESPACE){_d6=new RegExp("^([^_]{2}.*)$");}else{_d6=new RegExp("^__"+_d5+"_(.*)$");}var _d7=globalStorage[this._domain];var _d8=[];for(var i=0;i<_d7.length;i++){var _d9=_d7.key(i);if(_d6.test(_d9)==true){_d9=_d9.match(_d6)[1];_d8.push(_d9);}}return _d8;},clear:function(_da){_da=_da||this.DEFAULT_NAMESPACE;if(this.isValidKey(_da)==false){throw new Error("Invalid namespace given: "+_da);}var _db;if(_da==this.DEFAULT_NAMESPACE){_db=new RegExp("^[^_]{2}");}else{_db=new RegExp("^__"+_da+"_");}var _dc=globalStorage[this._domain];var _dd=[];for(var i=0;i<_dc.length;i++){if(_db.test(_dc.key(i))==true){_dd[_dd.length]=_dc.key(i);}}_c4.forEach(_dd,_c4.hitch(_dc,"removeItem"));},remove:function(key,_de){key=this.getFullKey(key,_de);var _df=globalStorage[this._domain];_df.removeItem(key);},isPermanent:function(){return true;},getMaximumSize:function(){return this.SIZE_NO_LIMIT;},hasSettingsUI:function(){return false;},showSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},hideSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},getFullKey:function(key,_e0){_e0=_e0||this.DEFAULT_NAMESPACE;if(this.isValidKey(_e0)==false){throw new Error("Invalid namespace given: "+_e0);}if(_e0==this.DEFAULT_NAMESPACE){return key;}else{return "__"+_e0+"_"+key;}}});_c5.storage.manager.register("dojox.storage.WhatWGStorageProvider",new _c5.storage.WhatWGStorageProvider());});},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(_e1,_e2,_e3,_e4,_e5){return _e2("dijit.tree.ForestStoreModel",_e5,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(_e6){this.root={store:this,root:true,id:_e6.rootId,label:_e6.rootLabel,children:_e6.rootChildren};},mayHaveChildren:function(_e7){return _e7===this.root||this.inherited(arguments);},getChildren:function(_e8,_e9,_ea){if(_e8===this.root){if(this.root.children){_e9(this.root.children);}else{this.store.fetch({query:this.query,onComplete:_e4.hitch(this,function(_eb){this.root.children=_eb;_e9(_eb);}),onError:_ea});}}else{this.inherited(arguments);}},isItem:function(_ec){return (_ec===this.root)?true:this.inherited(arguments);},fetchItemByIdentity:function(_ed){if(_ed.identity==this.root.id){var _ee=_ed.scope||_e3.global;if(_ed.onItem){_ed.onItem.call(_ee,this.root);}}else{this.inherited(arguments);}},getIdentity:function(_ef){return (_ef===this.root)?this.root.id:this.inherited(arguments);},getLabel:function(_f0){return (_f0===this.root)?this.root.label:this.inherited(arguments);},newItem:function(_f1,_f2,_f3){if(_f2===this.root){this.onNewRootItem(_f1);return this.store.newItem(_f1);}else{return this.inherited(arguments);}},onNewRootItem:function(){},pasteItem:function(_f4,_f5,_f6,_f7,_f8){if(_f5===this.root){if(!_f7){this.onLeaveRoot(_f4);}}this.inherited(arguments,[_f4,_f5===this.root?null:_f5,_f6===this.root?null:_f6,_f7,_f8]);if(_f6===this.root){this.onAddToRoot(_f4);}},onAddToRoot:function(_f9){},onLeaveRoot:function(_fa){},_requeryTop:function(){var _fb=this.root.children||[];this.store.fetch({query:this.query,onComplete:_e4.hitch(this,function(_fc){this.root.children=_fc;if(_fb.length!=_fc.length||_e1.some(_fb,function(_fd,idx){return _fc[idx]!=_fd;})){this.onChildrenChange(this.root,_fc);}})});},onNewItem:function(_fe,_ff){this._requeryTop();this.inherited(arguments);},onDeleteItem:function(item){if(_e1.indexOf(this.root.children,item)!=-1){this._requeryTop();}this.inherited(arguments);},onSetItem:function(item,_100,_101,_102){this._requeryTop();this.inherited(arguments);}});});},"dojox/html/metrics":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/sniff","dojo/ready","dojo/_base/unload","dojo/_base/window","dojo/dom-geometry"],function(_103,lang,has,_104,_105,_106,_107){var dhm=lang.getObject("dojox.html.metrics",true);var _108=lang.getObject("dojox");dhm.getFontMeasurements=function(){var _109={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,"small":0,"medium":0,"large":0,"x-large":0,"xx-large":0};if(has("ie")){_106.doc.documentElement.style.fontSize="100%";}var div=_106.doc.createElement("div");var ds=div.style;ds.position="absolute";ds.left="-100px";ds.top="0";ds.width="30px";ds.height="1000em";ds.borderWidth="0";ds.margin="0";ds.padding="0";ds.outline="0";ds.lineHeight="1";ds.overflow="hidden";_106.body().appendChild(div);for(var p in _109){ds.fontSize=p;_109[p]=Math.round(div.offsetHeight*12/16)*16/12/1000;}_106.body().removeChild(div);div=null;return _109;};var _10a=null;dhm.getCachedFontMeasurements=function(_10b){if(_10b||!_10a){_10a=dhm.getFontMeasurements();}return _10a;};var _10c=null,_10d={};dhm.getTextBox=function(text,_10e,_10f){var m,s;if(!_10c){m=_10c=_106.doc.createElement("div");var c=_106.doc.createElement("div");c.appendChild(m);s=c.style;s.overflow="scroll";s.position="absolute";s.left="0px";s.top="-10000px";s.width="1px";s.height="1px";s.visibility="hidden";s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";_106.body().appendChild(c);}else{m=_10c;}m.className="";s=m.style;s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";if(arguments.length>1&&_10e){for(var i in _10e){if(i in _10d){continue;}s[i]=_10e[i];}}if(arguments.length>2&&_10f){m.className=_10f;}m.innerHTML=text;var box=_107.position(m);box.w=m.parentNode.scrollWidth;return box;};var _110={w:16,h:16};dhm.getScrollbar=function(){return {w:_110.w,h:_110.h};};dhm._fontResizeNode=null;dhm.initOnFontResize=function(_111){var f=dhm._fontResizeNode=_106.doc.createElement("iframe");var fs=f.style;fs.position="absolute";fs.width="5em";fs.height="10em";fs.top="-10000px";fs.display="none";if(has("ie")){f.onreadystatechange=function(){if(f.contentWindow.document.readyState=="complete"){f.onresize=f.contentWindow.parent[_108._scopeName].html.metrics._fontresize;}};}else{f.onload=function(){f.contentWindow.onresize=f.contentWindow.parent[_108._scopeName].html.metrics._fontresize;};}f.setAttribute("src","javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}</script></head><body></body></html>'");_106.body().appendChild(f);dhm.initOnFontResize=function(){};};dhm.onFontResize=function(){};dhm._fontresize=function(){dhm.onFontResize();};_105.addOnUnload(function(){var f=dhm._fontResizeNode;if(f){if(has("ie")&&f.onresize){f.onresize=null;}else{if(f.contentWindow&&f.contentWindow.onresize){f.contentWindow.onresize=null;}}dhm._fontResizeNode=null;}});_104(function(){try{var n=_106.doc.createElement("div");n.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";_106.body().appendChild(n);_110.w=n.offsetWidth-n.clientWidth;_110.h=n.offsetHeight-n.clientHeight;_106.body().removeChild(n);delete n;}catch(e){}if("fontSizeWatch" in _103.config&&!!_103.config.fontSizeWatch){dhm.initOnFontResize();}});return dhm;});},"esriviewer/manager/base/IdentityManagerMixin":function(){define(["dojo/_base/declare","esri/IdentityManager","esri/kernel","dojo/_base/lang","dojo/cookie","dojo/topic","dojo/json","dojo/_base/unload"],function(_112,_113,_114,lang,_115,_116,JSON,_117){return _112([],{forcedUserLogout:false,cred:"esri_jsapi_id_manager_data",constructor:function(){_117.addOnUnload(lang.hitch(this,this._storeCredentials));this._loadCredentials();this._loadIdentityManagerListeners();},_loadIdentityManagerListeners:function(){_116.subscribe(VIEWER_GLOBALS.EVENTS.IDENTITY_MANAGER.GET_TOKEN,lang.hitch(this,this._getToken));_116.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.USER_LOGGED_OUT,lang.hitch(this,this._clearToken));},_clearToken:function(){if(this._supportsLocalStorage()){window.localStorage.removeItem(this.cred);}else{_115(this.cred,null,{expire:-1});}this.forcedUserLogout=true;},_getToken:function(_118,_119){if(_119!=null&&lang.isFunction(_119)){if(_113.credentials==null||_113.credentials.length<1){_119(null);return;}var _11a;var _11b;for(var i=0;i<_113.credentials.length;i++){_11a=_113.credentials[i];_11b=_11a.resources;if(_11b!=null&&lang.isArray(_11b)){for(var j=0;j<_11b.length;j++){if(_11b[j].indexOf(_118)>-1){_119({username:_11a.userId,token:_11a.token});}}}}}},_loadCredentials:function(){var _11c,_11d;if(this._supportsLocalStorage()){_11c=window.localStorage.getItem(this.cred);}else{_11c=_115(this.cred);}if(_11c&&_11c!="null"&&_11c.length>4){_11d=JSON.parse(_11c);_114.id.initialize(_11d);}else{}},_storeCredentials:function(){if(this.forcedUserLogout){return;}if(_114.id.credentials.length===0){return;}var _11e=JSON.stringify(_114.id.toJson());if(this._supportsLocalStorage()){window.localStorage.setItem(this.cred,_11e);}else{_115(cred,_11e,{expires:1});}},_supportsLocalStorage:function(){try{return "localStorage" in window&&window["localStorage"]!==null;}catch(e){return false;}}});});},"esriviewer/ui/draw/base/model/GraphicsListViewModel":function(){define(["dojo/_base/declare","dojo/topic","dojo/Evented"],function(_11f,_120,_121){return _11f([_121],{REMOVE_GRAPHIC:"removeGraphic",REMOVE_ALL_GRAPHICS:"removeAllGraphics",constructor:function(){var self=this;this.saveGraphicsIconVisible=ko.observable(false);this.saveGraphicsInputVisible=ko.observable(false);this.allGraphicsVisible=ko.observable(true);this.addedGraphics=ko.observableArray();var _122=function(){return self.addedGraphics().length>0;};this.hasGraphics=ko.computed(_122);this.removeGraphic=function(_123){if(_123==null){return;}self.emit(self.REMOVE_GRAPHIC,_123.graphic);self.addedGraphics.remove(_123);};this.zoomToGraphic=function(_124){_120.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.CENTER_AND_FLASH,_124.graphic);};},removeAllGraphics:function(){var _125=this.addedGraphics();this.emit(this.REMOVE_ALL_GRAPHICS);this.addedGraphics.removeAll();},toggleAllGraphics:function(){var _126=this.addedGraphics();var i;if(!this.allGraphicsVisible()){for(i=0;i<_126.length;i++){_126[i].graphic.show();}this.allGraphicsVisible(true);}else{for(i=0;i<_126.length;i++){_126[i].graphic.hide();}this.allGraphicsVisible(false);}},toggleSaveGraphics:function(){this.saveGraphicsInputVisible(!this.saveGraphicsInputVisible());}});});},"esriviewer/ui/draw/configure/geometry/ConfigurePointWidget":function(){define(["dojo/_base/declare","dojo/text!./template/ConfigurePointTemplate.html","dojo/_base/Color","dojo/_base/lang","./model/ConfigurePointViewModel","./BaseGeometryConfigurationWidget","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol"],function(_127,_128,_129,lang,_12a,_12b,_12c,_12d){return _127([_12b],{templateString:_128,postCreate:function(){this.inherited(arguments);this.viewModel=new _12a();this.viewModel.selectedMarkerStyle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedMarkerSize.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedAngle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedOutlineWidth.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedOutlineStyle.subscribe(lang.hitch(this,this.processChange));this.viewModel.markerColorActive.subscribe(lang.hitch(this,this.handleMarkerColorToggled));this.markerColor=new _129([255,0,0,this.getTransparency()/100]);this.outlineColor=new _129([255,0,0,this.getTransparency()/100]);this.colorPicker.set("value",this.markerColor.toHex());ko.applyBindings(this.viewModel,this.domNode);},handleTransparencyChanged:function(){var _12e=this.getTransparency()/100;this.outlineColor=new _129([this.outlineColor.r,this.outlineColor.g,this.outlineColor.b,_12e]);this.markerColor=new _129([this.markerColor.r,this.markerColor.g,this.markerColor.b,_12e]);this.inherited(arguments);},handleMarkerColorToggled:function(_12f){if(_12f){this.colorPicker.set("value",this.markerColor.toHex());}else{this.colorPicker.set("value",this.outlineColor.toHex());}},handleColorPickerChanged:function(){if(this.viewModel.outlineColorActive()){this.outlineColor=this.getColor();}else{this.markerColor=this.getColor();}this.processChange();},processChange:function(){this.onChange(this.getSymbol());},getSymbol:function(){return new _12c(this.viewModel.selectedMarkerStyle(),parseInt(this.viewModel.selectedMarkerSize(),10),new _12d(this.viewModel.selectedOutlineStyle(),this.outlineColor,this.viewModel.selectedOutlineWidth()),this.markerColor).setAngle(this.viewModel.selectedAngle());}});});},"esriviewer/ui/draw/configure/geometry/model/ConfigurePointViewModel":function(){define(["dojo/_base/declare","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol"],function(_130,_131,_132){return _130([],{pointColorTypes:{outline:"outline",fill:"fill"},markerStyles:ko.observableArray([{value:_131.STYLE_CIRCLE,label:"Circle"},{value:_131.STYLE_CROSS,label:"Cross"},{value:_131.STYLE_DIAMOND,label:"Diamond"},{value:_131.STYLE_SQUARE,label:"Square"},{value:_131.STYLE_X,label:"X"}]),outlineStyles:ko.observableArray([{value:_132.STYLE_DASH,label:"Dashed Line"},{value:_132.STYLE_DASHDOT,label:"Dash Dot Line"},{value:_132.STYLE_DASHDOTDOT,label:"Dash Dot Dot Line"},{value:_132.STYLE_DOT,label:"Dotted Line"},{value:_132.STYLE_SOLID,label:"Solid Line"},{value:_132.STYLE_NULL,label:"None"}]),markerSizes:ko.observableArray([1,2,3,4,5,6,7,8,9,10,15,20,25,30,40,50,75]),outlineWidths:ko.observableArray([1,2,3,4,5,6,7,8,9,10]),angles:ko.observableArray([0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85]),constructor:function(){this.selectedMarkerStyle=ko.observable(_131.STYLE_CIRCLE);this.selectedMarkerSize=ko.observable(10);this.selectedAngle=ko.observable(0);this.selectedOutlineStyle=ko.observable(_132.STYLE_SOLID);this.selectedOutlineWidth=ko.observable(1);this.markerColorActive=ko.observable(true);this.outlineColorActive=ko.observable(false);},setOutlineColorMode:function(){this.outlineColorActive(true);this.markerColorActive(false);},setMarkerColorMode:function(){this.outlineColorActive(false);this.markerColorActive(true);}});});},"esriviewer/ui/print/PrintWidgetWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","../window/WindowWidget"],function(_133,lang,_134,_135){return _133([_135],{defaultPositioning:{x:500,y:125},windowWidth:"300px",windowHeaderText:"Print",windowIconAltText:"Print",windowIconClass:"commonIcons16 print",positioningParamName:"print",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/print/PrintWidget"],lang.hitch(this,function(_136){this.printWidget=new _136();this.setContent(this.printWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_134.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PRINT.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_134.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PRINT.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_134.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PRINT.TOGGLE,lang.hitch(this,this.toggle)));}});});},"esriviewer/manager/base/WebMapTemplateConfigurationUtil":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Deferred","esri/request","dojo/_base/array","../../base/DataLoaderSupport","esri/arcgis/utils"],function(_137,lang,_138,_139,_13a,_13b,_13c){return _137([_13b],{showOverviewParameter:"showOverview",showLegendParameter:"showLegend",showHeaderParameter:"showHeader",headerTextParameter:"headerText",helpLinkParameter:"helpUrl",contactUsParameter:"contactUsUrl",ignoreProcessingConfigurationEntries:["webmap","geometryServiceUrl","locators","baseViewer","showOverview","showLegend"],appConfigToViewerWindowWidgetConfigLookup:{logging:"logging"},appConfigToViewerWidgetConfigLookup:{pointUploadWidget:"pointUploadWidget",drawWidget:"drawWidget",plottingWidget:"plottingWidget",reverseGeocodeWidget:"reverseGeocodeWidget",portalSearchWidget:"portalSearchWidget",reflectivityWidget:"reflectivityWidget",zoomToWidget:"zoomToWidget",timeSliderWidget:"timeSliderWidget",identifyWidget:"identifyWidget",configureWidget:"configureWidget",measureWidget:"measureWidget",socialMediaWidget:"socialMediaWidget",printWidget:"printWidget",weatherWidget:"weatherWidget"},defaultConfigFile:"config/portal/config.json",constructor:function(){this.init();},init:function(){},loadConfiguration:function(_13d){this.appId=_13d;this.deferred=new _138();this._loadDefaultConfiguration();return this.deferred.promise;},_loadDefaultConfiguration:function(){this.loadJson(this.defaultConfigFile,lang.hitch(this,this._handleDefaultConfigurationLoaded),lang.hitch(this,this._handleDefaultConfigurationLoadError));},_loadTemplateConfiguration:function(){var _13e=_139({url:_13c.arcgisUrl+"/"+this.appId+"/data",content:{f:"json"},callbackParamName:"callback",load:lang.hitch(this,this.handleTemplateResponse),error:lang.hitch(this,this.handleTemplateErrorResponse)},{useProxy:false});},handleTemplateErrorResponse:function(err){alert("Could not load application data from "+_13c.arcgisUrl);},handleTemplateResponse:function(_13f){this.templateResponse=_13f;this.appConfig={};for(var key in _13f.values){if(_13f.values[key]!==undefined){this.appConfig[key]=_13f.values[key];}}this._loadWebMapItem(this.appConfig.webmap);},_loadWebMapItem:function(_140){_13c.getItem(_140).then(lang.hitch(this,this.handleWebMapItemLoaded));},handleWebMapItemLoaded:function(_141){this.webMapItem=_141;var _142=lang.mixin(this.defaultConfiguration.values,this.appConfig);this.viewerConfiguration=this._applicationConfigurationToViewerConfiguration(_142);this.viewerConfiguration.webMapItem=this.webMapItem;this.handleWebMapConfigurationComplete();},_handleDefaultConfigurationLoaded:function(_143){this.defaultConfiguration=_143;this.portalUrl=this.defaultConfiguration.values.portalConfiguration.url;_13c.arcgisUrl=VIEWER_UTILS.joinUrl(this.portalUrl,this.defaultConfiguration.values.portalConfiguration.itemsPath);this._loadTemplateConfiguration();},handleWebMapConfigurationComplete:function(){this.finalizeLoad();},finalizeLoad:function(){this.deferred.resolve(this.viewerConfiguration);},_handleDefaultConfigurationLoadError:function(){alert("Could not load default configuration");},_applicationConfigurationToViewerConfiguration:function(_144){var _145={small:true,display:true,headerText:"Mapping Application",headerImage:"images/logoSmall.png",contact:{label:"Contact Us",url:"http://www.esri.com/about-esri/contact"},help:{label:"Help",url:"http://support.esri.com/en/"}};var _146={webMapItem:_144.webmap,header:_145};for(var key in _144){if(_13a.indexOf(this.ignoreProcessingConfigurationEntries,key)>-1){continue;}else{if(key===this.showHeaderParameter){_146.header.display=_144[key];}else{if(key===this.headerTextParameter){_146.header.headerText=_144[key];}else{if(key===this.helpLinkParameter){_146.header.contact.url=_144[key];}else{if(key===this.contactUsParameter){_146.header.help.url=_144[key];}else{if(this.appConfigToViewerWidgetConfigLookup[key]){_146[key]={create:_144[key]};}else{if(this.appConfigToViewerWindowWidgetConfigLookup[key]){_146[key]={window:{create:_144[key]}};}else{_146[key]={create:false};}}}}}}}}this._applyWebMappingApplicationDefaults(_144,_146);return _146;},_applyWebMappingApplicationDefaults:function(_147,_148){var _149=_147[this.showOverviewParameter]!=null&&_147[this.showOverviewParameter];var _14a=_147[this.showLegendParameter]!=null&&_147[this.showLegendParameter];_148.map={overview:{create:_149},useBasemapGallery:true,useConfiguredPortalBasemaps:true,legend:{create:_14a}};_148.toolsBar={showToolsDropdown:true,showLayersButton:true,showConfigureLocatorsIcon:false,showBookmarksButton:true,showExtentActions:false,display:true};_148.toolsAccordion={create:false};if(this.portalUrl){_148.portal={url:this.portalUrl};}if(_147.geometryServiceUrl){_148.geometryServiceUrl=_147.geometryServiceUrl;}if(_147.locators){_148.locators=_147.locators;}var _14b=_148[this.appConfigToViewerWidgetConfigLookup.socialMediaWidget];if(_14b){if(_14b.create){_14b.configurationUrl=this.defaultConfiguration.values.baseViewer.socialMediaWidgetConfiguration.configurationUrl;}}var _14c=_148[this.appConfigToViewerWidgetConfigLookup.weatherWidget];if(_14c){if(_14c.create){_14c.configurationUrl=this.defaultConfiguration.values.baseViewer.weatherWidgetConfiguration.configurationUrl;}}var _14d=_148[this.appConfigToViewerWidgetConfigLookup.printWidget];if(_14d){if(_14d.create){_14d.printTaskUrl=this.defaultConfiguration.values.baseViewer.printWidgetConfiguration.printTaskUrl;}}var _14e=_148[this.appConfigToViewerWidgetConfigLookup.zoomToWidget];if(_14e){if(_14e.create){_14e.stateJson=this.defaultConfiguration.values.baseViewer.zoomToWidgetConfiguration.stateJson;_14e.countyJson=this.defaultConfiguration.values.baseViewer.zoomToWidgetConfiguration.countyJson;}}}});});},"dojox/storage/BehaviorStorageProvider":function(){define(["dijit","dojo","dojox","dojo/require!dojox/storage/Provider,dojox/storage/manager"],function(_14f,dojo,_150){dojo.provide("dojox.storage.BehaviorStorageProvider");dojo.require("dojox.storage.Provider");dojo.require("dojox.storage.manager");dojo.declare("dojox.storage.BehaviorStorageProvider",[_150.storage.Provider],{store:null,storeName:"__dojox_BehaviorStorage",keys:[],initialize:function(){try{this.store=this._createStore();this.store.load(this.storeName);}catch(e){throw new Error("Store is not available: "+e);}var keys=this.get("keys","dojoxSystemNS");this.keys=keys||[];this.initialized=true;_150.storage.manager.loaded();},isAvailable:function(){return dojo.isIE&&dojo.isIE>=5;},_createStore:function(){var _151=dojo.create("link",{id:this.storeName+"Node",style:{"display":"none"}},dojo.query("head")[0]);_151.addBehavior("#default#userdata");return _151;},put:function(key,_152,_153,_154){this._assertIsValidKey(key);_154=_154||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_154);var _155=this.getFullKey(key,_154);_152=dojo.toJson(_152);this.store.setAttribute(_155,_152);this.store.save(this.storeName);var _156=this.store.getAttribute(_155)===_152;if(_156){this._addKey(_155);this.store.setAttribute("__dojoxSystemNS_keys",dojo.toJson(this.keys));this.store.save(this.storeName);}if(_153){_153(_156?this.SUCCESS:this.FAILED,key,null,_154);}},get:function(key,_157){this._assertIsValidKey(key);_157=_157||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_157);key=this.getFullKey(key,_157);return dojo.fromJson(this.store.getAttribute(key));},getKeys:function(_158){_158=_158||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_158);_158="__"+_158+"_";var keys=[];for(var i=0;i<this.keys.length;i++){var _159=this.keys[i];if(this._beginsWith(_159,_158)){_159=_159.substring(_158.length);keys.push(_159);}}return keys;},clear:function(_15a){_15a=_15a||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_15a);_15a="__"+_15a+"_";var keys=[];for(var i=0;i<this.keys.length;i++){var _15b=this.keys[i];if(this._beginsWith(_15b,_15a)){keys.push(_15b);}}dojo.forEach(keys,function(key){this.store.removeAttribute(key);this._removeKey(key);},this);this.put("keys",this.keys,null,"dojoxSystemNS");this.store.save(this.storeName);},remove:function(key,_15c){this._assertIsValidKey(key);_15c=_15c||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_15c);key=this.getFullKey(key,_15c);this.store.removeAttribute(key);this._removeKey(key);this.put("keys",this.keys,null,"dojoxSystemNS");this.store.save(this.storeName);},getNamespaces:function(){var _15d=[this.DEFAULT_NAMESPACE];var _15e={};_15e[this.DEFAULT_NAMESPACE]=true;var _15f=/^__([^_]*)_/;for(var i=0;i<this.keys.length;i++){var _160=this.keys[i];if(_15f.test(_160)==true){var _161=_160.match(_15f)[1];if(typeof _15e[_161]=="undefined"){_15e[_161]=true;_15d.push(_161);}}}return _15d;},isPermanent:function(){return true;},getMaximumSize:function(){return 64;},hasSettingsUI:function(){return false;},isValidKey:function(_162){if(_162===null||_162===undefined){return false;}return /^[0-9A-Za-z_-]*$/.test(_162);},isValidNamespace:function(_163){if(_163===null||_163===undefined){return false;}return /^[0-9A-Za-z-]*$/.test(_163);},getFullKey:function(key,_164){return "__"+_164+"_"+key;},_beginsWith:function(_165,_166){if(_166.length>_165.length){return false;}return _165.substring(0,_166.length)===_166;},_assertIsValidNamespace:function(_167){if(this.isValidNamespace(_167)===false){throw new Error("Invalid namespace given: "+_167);}},_assertIsValidKey:function(key){if(this.isValidKey(key)===false){throw new Error("Invalid key given: "+key);}},_addKey:function(key){this._removeKey(key);this.keys.push(key);},_removeKey:function(key){this.keys=dojo.filter(this.keys,function(item){return item!==key;},this);}});_150.storage.manager.register("dojox.storage.BehaviorStorageProvider",new _150.storage.BehaviorStorageProvider());});},"dijit/layout/AccordionContainer":function(){define(["require","dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/topic","../focus","../_base/manager","dojo/ready","../_Widget","../_Container","../_TemplatedMixin","../_CssStateMixin","./StackContainer","./ContentPane","dojo/text!./templates/AccordionButton.html","../a11yclick"],function(_168,_169,_16a,fx,dom,_16b,_16c,_16d,_16e,keys,lang,has,_16f,_170,_171,_172,_173,_174,_175,_176,_177,_178,_179){var _17a=_16a("dijit.layout._AccordionButton",[_173,_175,_176],{templateString:_179,label:"",_setLabelAttr:{node:"titleTextNode",type:"innerHTML"},title:"",_setTitleAttr:{node:"titleTextNode",type:"attribute",attribute:"title"},iconClassAttr:"",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitAccordionTitle",getParent:function(){return this.parent;},buildRendering:function(){this.inherited(arguments);var _17b=this.id.replace(" ","_");_16b.set(this.titleTextNode,"id",_17b+"_title");this.focusNode.setAttribute("aria-labelledby",_16b.get(this.titleTextNode,"id"));dom.setSelectable(this.domNode,false);},getTitleHeight:function(){return _16e.getMarginSize(this.domNode).h;},_onTitleClick:function(){var _17c=this.getParent();_17c.selectChild(this.contentWidget,true);_170.focus(this.focusNode);},_onTitleKeyDown:function(evt){return this.getParent()._onKeyDown(evt,this.contentWidget);},_setSelectedAttr:function(_17d){this._set("selected",_17d);this.focusNode.setAttribute("aria-expanded",_17d?"true":"false");this.focusNode.setAttribute("aria-selected",_17d?"true":"false");this.focusNode.setAttribute("tabIndex",_17d?"0":"-1");}});if(has("dojo-bidi")){_17a.extend({_setLabelAttr:function(_17e){this._set("label",_17e);_16b.set(this.titleTextNode,"innerHTML",_17e);this.applyTextDir(this.titleTextNode);},_setTitleAttr:function(_17f){this._set("title",_17f);_16b.set(this.titleTextNode,"title",_17f);this.applyTextDir(this.titleTextNode);}});}var _180=_16a("dijit.layout._AccordionInnerContainer"+(has("dojo-bidi")?"_NoBidi":""),[_173,_176],{baseClass:"dijitAccordionInnerContainer",isLayoutContainer:true,buildRendering:function(){this.domNode=_16d.place("<div class='"+this.baseClass+"' role='presentation'>",this.contentWidget.domNode,"after");var _181=this.contentWidget,cls=lang.isString(this.buttonWidget)?lang.getObject(this.buttonWidget):this.buttonWidget;this.button=_181._buttonWidget=(new cls({contentWidget:_181,label:_181.title,title:_181.tooltip,dir:_181.dir,lang:_181.lang,textDir:_181.textDir||this.textDir,iconClass:_181.iconClass,id:_181.id+"_button",parent:this.parent})).placeAt(this.domNode);this.containerNode=_16d.place("<div class='dijitAccordionChildWrapper' role='tabpanel' style='display:none'>",this.domNode);this.containerNode.setAttribute("aria-labelledby",this.button.id);_16d.place(this.contentWidget.domNode,this.containerNode);},postCreate:function(){this.inherited(arguments);var _182=this.button,cw=this.contentWidget;this._contentWidgetWatches=[cw.watch("title",lang.hitch(this,function(name,_183,_184){_182.set("label",_184);})),cw.watch("tooltip",lang.hitch(this,function(name,_185,_186){_182.set("title",_186);})),cw.watch("iconClass",lang.hitch(this,function(name,_187,_188){_182.set("iconClass",_188);}))];},_setSelectedAttr:function(_189){this._set("selected",_189);this.button.set("selected",_189);if(_189){var cw=this.contentWidget;if(cw.onSelected){cw.onSelected();}}},startup:function(){this.contentWidget.startup();},destroy:function(){this.button.destroyRecursive();_169.forEach(this._contentWidgetWatches||[],function(w){w.unwatch();});delete this.contentWidget._buttonWidget;delete this.contentWidget._wrapperWidget;this.inherited(arguments);},destroyDescendants:function(_18a){this.contentWidget.destroyRecursive(_18a);}});if(has("dojo-bidi")){_180=_16a("dijit.layout._AccordionInnerContainer",_180,{postCreate:function(){this.inherited(arguments);var _18b=this.button;this._contentWidgetWatches.push(this.contentWidget.watch("textDir",function(name,_18c,_18d){_18b.set("textDir",_18d);}));}});}var _18e=_16a("dijit.layout.AccordionContainer",_177,{duration:_171.defaultDuration,buttonWidget:_17a,baseClass:"dijitAccordionContainer",buildRendering:function(){this.inherited(arguments);this.domNode.style.overflow="hidden";this.domNode.setAttribute("role","tablist");},startup:function(){if(this._started){return;}this.inherited(arguments);if(this.selectedChildWidget){this.selectedChildWidget._wrapperWidget.set("selected",true);}},layout:function(){var _18f=this.selectedChildWidget;if(!_18f){return;}var _190=_18f._wrapperWidget.domNode,_191=_16e.getMarginExtents(_190),_192=_16e.getPadBorderExtents(_190),_193=_18f._wrapperWidget.containerNode,_194=_16e.getMarginExtents(_193),_195=_16e.getPadBorderExtents(_193),_196=this._contentBox;var _197=0;_169.forEach(this.getChildren(),function(_198){if(_198!=_18f){_197+=_16e.getMarginSize(_198._wrapperWidget.domNode).h;}});this._verticalSpace=_196.h-_197-_191.h-_192.h-_194.h-_195.h-_18f._buttonWidget.getTitleHeight();this._containerContentBox={h:this._verticalSpace,w:this._contentBox.w-_191.w-_192.w-_194.w-_195.w};if(_18f){_18f.resize(this._containerContentBox);}},_setupChild:function(_199){_199._wrapperWidget=_180({contentWidget:_199,buttonWidget:this.buttonWidget,id:_199.id+"_wrapper",dir:_199.dir,lang:_199.lang,textDir:_199.textDir||this.textDir,parent:this});this.inherited(arguments);_16d.place(_199.domNode,_199._wrapper,"replace");},removeChild:function(_19a){if(_19a._wrapperWidget){_16d.place(_19a.domNode,_19a._wrapperWidget.domNode,"after");_19a._wrapperWidget.destroy();delete _19a._wrapperWidget;}_16c.remove(_19a.domNode,"dijitHidden");this.inherited(arguments);},getChildren:function(){return _169.map(this.inherited(arguments),function(_19b){return _19b.declaredClass=="dijit.layout._AccordionInnerContainer"?_19b.contentWidget:_19b;},this);},destroy:function(){if(this._animation){this._animation.stop();}_169.forEach(this.getChildren(),function(_19c){if(_19c._wrapperWidget){_19c._wrapperWidget.destroy();}else{_19c.destroyRecursive();}});this.inherited(arguments);},_showChild:function(_19d){_19d._wrapperWidget.containerNode.style.display="block";return this.inherited(arguments);},_hideChild:function(_19e){_19e._wrapperWidget.containerNode.style.display="none";this.inherited(arguments);},_transition:function(_19f,_1a0,_1a1){if(has("ie")<8){_1a1=false;}if(this._animation){this._animation.stop(true);delete this._animation;}var self=this;if(_19f){_19f._wrapperWidget.set("selected",true);var d=this._showChild(_19f);if(this.doLayout&&_19f.resize){_19f.resize(this._containerContentBox);}}if(_1a0){_1a0._wrapperWidget.set("selected",false);if(!_1a1){this._hideChild(_1a0);}}if(_1a1){var _1a2=_19f._wrapperWidget.containerNode,_1a3=_1a0._wrapperWidget.containerNode;var _1a4=_19f._wrapperWidget.containerNode,_1a5=_16e.getMarginExtents(_1a4),_1a6=_16e.getPadBorderExtents(_1a4),_1a7=_1a5.h+_1a6.h;_1a3.style.height=(self._verticalSpace-_1a7)+"px";this._animation=new fx.Animation({node:_1a2,duration:this.duration,curve:[1,this._verticalSpace-_1a7-1],onAnimate:function(_1a8){_1a8=Math.floor(_1a8);_1a2.style.height=_1a8+"px";_1a3.style.height=(self._verticalSpace-_1a7-_1a8)+"px";},onEnd:function(){delete self._animation;_1a2.style.height="auto";_1a0._wrapperWidget.containerNode.style.display="none";_1a3.style.height="auto";self._hideChild(_1a0);}});this._animation.onStop=this._animation.onEnd;this._animation.play();}return d;},_onKeyDown:function(e,_1a9){if(this.disabled||e.altKey||!(_1a9||e.ctrlKey)){return;}var c=e.keyCode;if((_1a9&&(c==keys.LEFT_ARROW||c==keys.UP_ARROW))||(e.ctrlKey&&c==keys.PAGE_UP)){this._adjacent(false)._buttonWidget._onTitleClick();e.stopPropagation();e.preventDefault();}else{if((_1a9&&(c==keys.RIGHT_ARROW||c==keys.DOWN_ARROW))||(e.ctrlKey&&(c==keys.PAGE_DOWN||c==keys.TAB))){this._adjacent(true)._buttonWidget._onTitleClick();e.stopPropagation();e.preventDefault();}}}});if(has("dijit-legacy-requires")){_172(0,function(){var _1aa=["dijit/layout/AccordionPane"];_168(_1aa);});}_18e._InnerContainer=_180;_18e._Button=_17a;return _18e;});},"esriviewer/portal/PortalSearcher":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","../base/ConfigurationEntryMixin"],function(_1ab,_1ac,lang,_1ad){return _1ab([_1ad],{_defaultMaxResults:50,_defaultSortField:"avgRating",constructor:function(){this.initListeners();},initListeners:function(){_1ac.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_WEBMAPS,lang.hitch(this,this.searchWebmaps));_1ac.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_GEOCODE_SERVICES,lang.hitch(this,this.searchGeocodeServices));_1ac.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_IMAGE_SERVICES,lang.hitch(this,this.searchImageServices));_1ac.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_FEATURE_SERVICE_LAYERS,lang.hitch(this,this.searchFeatureServiceLayers));_1ac.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_FEATURE_SERVICES,lang.hitch(this,this.searchFeatureServices));_1ac.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_MAP_SERVICES,lang.hitch(this,this.searchMapServices));},searchGeocodeServices:function(_1ae,_1af,_1b0,_1b1,_1b2,_1b3){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.GEOCODE_SERVICE,_1ae,_1af,_1b0,_1b1,_1b2,_1b3);},searchFeatureServiceLayers:function(_1b4,_1b5,_1b6,_1b7,_1b8,_1b9){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.FEATURE_SERVICE_LAYER,_1b4,_1b5,_1b6,_1b7,_1b8,_1b9);},searchImageServices:function(_1ba,_1bb,_1bc,_1bd,_1be,_1bf){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.IMAGE_SERVICE,_1ba,_1bb,_1bc,_1bd,_1be,_1bf);},searchFeatureServices:function(_1c0,_1c1,_1c2,_1c3,_1c4,_1c5){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.FEATURE_SERVICE,_1c0,_1c1,_1c2,_1c3,_1c4,_1c5);},searchMapServices:function(_1c6,_1c7,_1c8,_1c9,_1ca,_1cb){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.MAP_SERVICE,_1c6,_1c7,_1c8,_1c9,_1ca,_1cb);},searchWebmaps:function(_1cc,_1cd,_1ce,_1cf,_1d0,_1d1){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.WEB_MAP,_1cc,_1cd,_1ce,_1cf,_1d0,_1d1);},_performSearch:function(_1d2,_1d3,_1d4,_1d5,_1d6,_1d7,_1d8){if(_1d7==null||!lang.isFunction(_1d7)){return;}if(_1d4==null){_1d4=this._defaultMaxResults;}if(_1d5==null||_1d5==""){_1d5=this._defaultSortField;}if(_1d6==null){_1d6=0;}var _1d9={};_1d9.q=_1d3+this._getItemTypeAppend(_1d2);_1d9.sortField=_1d5;_1d9.start=_1d6;this._search(_1d9,_1d7,_1d8);},_getItemTypeAppend:function(_1da){if(_1da==null){return "";}return " AND (type: \""+_1da+"\") AND NOT (type: \""+VIEWER_GLOBALS.AGS_PORTAL_TYPES.MAPPING_APPLICATION+"\")";},_search:function(_1db,_1dc,_1dd){var _1de=null;_1ac.publish(VIEWER_GLOBALS.EVENTS.PORTAL.GET_INSTANCE,function(_1df){_1de=_1df;});if(_1de){var _1e0=_1dc;_1de.queryItems(_1db).then(function(_1e1){_1e0(_1e1);});}else{if(_1dd!=null&&lang.isFunction(_1dd)){_1dd("Portal is not configured");}}}});});},"esriviewer/manager/ViewerManagerWindow":function(){define(["dojo/_base/declare","dojo/on","dojo/dom-style","dojo/_base/window","dojo/dom-construct","./base/ViewerManager","../ui/identify/IdentifyWindowWidget","../ui/measure/MeasureWindow","../ui/editor/FeatureServiceEditorWindowWidget","../ui/time/TimeSliderWindow","../ui/transparency/LayersTransparencyWindowWidget","../ui/geocode/ReverseGeocodeWindowWidget","../ui/query/QueryBuilderWindowWidget","../ui/draw/DrawWindow","../ui/logging/LoggingWidgetWindow","../ui/layers/LayersWindowWidget","../ui/legend/MapLegendWindow","../ui/zoomto/ZoomToWidgetWindow","../ui/configure/ConfigureViewerWindow","../ui/weather/conditions/WeatherWidgetWindow","../ui/weather/reflectivity/ReflectivityWidgetWindow","../ui/portal/PortalPublisherWindowWidget","../ui/plotting/PlottingWidgetWindow","../ui/print/PrintWidgetWindow","../ui/pointupload/PointUploadWindow","../ui/social/SocialMediaWidgetWindow"],function(_1e2,on,_1e3,_1e4,_1e5,_1e6,_1e7,_1e8,_1e9,_1ea,_1eb,_1ec,_1ed,_1ee,_1ef,_1f0,_1f1,_1f2,_1f3,_1f4,_1f5,_1f6,_1f7,_1f8,_1f9,_1fa){return _1e2([_1e6],{createPlottingWidget:function(){new _1f7();},createSocialMediaWidget:function(){new _1fa();},createReflectivityWidget:function(){new _1f5();},createWeatherWidget:function(){new _1f4();},createIdentifyWidget:function(){new _1e7();},createMeasureWidget:function(){new _1e8();},createFeatureEditorWidget:function(){new _1e9();},createTimeSliderWidget:function(){new _1ea();},createLayersTransparencyWidget:function(){new _1eb();},createConfigureViewerWidget:function(){new _1f3();},createReverseGeocodeWidget:function(){new _1ec();},createQueryBuilderWidget:function(){new _1ed();},createDrawWidget:function(){new _1ee();},createLoggingWidget:function(){new _1ef();},createLayersWidget:function(){new _1f0();},createLegendWidget:function(){new _1f1();},createZoomToWidget:function(){new _1f2();},createPortalPublisherWidget:function(){new _1f6();},createPrintWidget:function(){new _1f8();},createPointUploadWidget:function(){new _1f9();},_createHeaderLogo:function(){if(this.viewerConfig.header.small===true){var _1fb=_1e5.create("span",{className:"smallWindowHeaderContainer"});var _1fc=_1e5.create("img",{src:this.viewerConfig.header.headerImage});var _1fd=_1e5.create("span",{innerHTML:this.viewerConfig.header.headerText});_1e5.place(_1fc,_1fb);_1e5.place(_1fd,_1fb);_1e5.place(_1fb,_1e4.body());if(this.viewerConfig.header.contact&&this.viewerConfig.header.contact.url){_1e3.set(_1fb,"cursor","pointer");var _1fe=this.viewerConfig.header.contact.url;on(_1fb,"click",function(){window.open(_1fe);});}}else{this.inherited(arguments);}}});});},"esriviewer/ui/throbber/ThrobberWidget":function(){define(["dojo/_base/declare","dojo/text!./template/ThrobberTemplate.html","dojo/topic","../base/UITemplatedWidget","dojo/_base/lang","dojo/request/notify"],function(_1ff,_200,_201,_202,lang,_203){return _1ff([_202],{enabled:true,blockHideEnabled:false,defaultPositioning:{x:10,y:10,alignX:"left",alignY:"bottom"},positioningParamName:"throbber",isPositionedByConfig:true,templateString:_200,postCreate:function(){this.inherited(arguments);_203("start",lang.hitch(this,this.show));_203("done",lang.hitch(this,this.hide));},initListeners:function(){this.inherited(arguments);_201.subscribe(VIEWER_GLOBALS.EVENTS.THROBBER.DISABLE,lang.hitch(this,this.disable));_201.subscribe(VIEWER_GLOBALS.EVENTS.THROBBER.ENABLE,lang.hitch(this,this.enable));_201.subscribe(VIEWER_GLOBALS.EVENTS.THROBBER.SHOW,lang.hitch(this,this.show));_201.subscribe(VIEWER_GLOBALS.EVENTS.THROBBER.HIDE,lang.hitch(this,this.hide));_201.subscribe(VIEWER_GLOBALS.EVENTS.THROBBER.BLOCK_HIDE,lang.hitch(this,this._blockHide));_201.subscribe(VIEWER_GLOBALS.EVENTS.THROBBER.RELEASE_HIDE_BLOCK,lang.hitch(this,this._releaseHideBlock));},show:function(){if(this.enabled){this.inherited(arguments);}},_blockHide:function(){this.blockHideEnabled=true;},_releaseHideBlock:function(){this.blockHideEnabled=false;this.hide();},hide:function(){if(!this.blockHideEnabled){this.inherited(arguments);}},disable:function(){this.enabled=false;},enable:function(){this.enabled=true;}});});},"esriviewer/ui/draw/configure/geometry/ConfigureTextWidget":function(){define(["dojo/_base/declare","dojo/text!./template/ConfigureTextTemplate.html","dojo/_base/lang","./model/ConfigureTextViewModel","./BaseGeometryConfigurationWidget","esri/symbols/Font","esri/symbols/TextSymbol"],function(_204,_205,lang,_206,_207,Font,_208){return _204([_207],{templateString:_205,postCreate:function(){this.inherited(arguments);this.viewModel=new _206();this.viewModel.selectedAngle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedTextAlign.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedTextSize.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedTextWeight.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedFontFace.subscribe(lang.hitch(this,this.processChange));ko.applyBindings(this.viewModel,this.domNode);},processChange:function(){this.onChange(this.getSymbol());},getSymbol:function(){var font=new Font(this.viewModel.selectedTextSize());font.setWeight(this.viewModel.selectedTextWeight());font.setStyle(this.viewModel.selectedFontFace());return new _208("").setColor(this.getColor()).setAlign(this.viewModel.selectedTextAlign()).setAngle(parseInt(this.viewModel.selectedAngle(),10)).setFont(font);}});});},"esriviewer/ui/layers/LayersWidget":function(){define(["dojo/_base/declare","dojo/text!./template/LayersWidgetTemplate.html","dojo/topic","dojo/_base/lang","dojo/dom-style","dojo/dom-construct","../base/UITemplatedWidget","../tooltip/ConfirmTooltip","./base/LayersLocalStorageMixin","./model/LayersWidgetViewModel","./LayersTocWidget","./base/UserPersistedLayersListWidget","dijit/form/TextBox","dijit/form/Select","dijit/form/Button"],function(_209,_20a,_20b,lang,_20c,_20d,_20e,_20f,_210,_211,_212,_213,_214,_215,_216){return _209([_20e,_210],{showWKIDInAddLayers:true,firstAddLayerDisplay:true,errorMessageDelay:5000,successMessageDelay:2000,allowAddLayers:true,templateString:_20a,constructor:function(_217){lang.mixin(this,_217||{});this.addedLayers={};},postCreate:function(){this.inherited(arguments);this.viewModel=new _211();this.viewModel.showWKIDInAddLayers(this.showWKIDInAddLayers);this.viewModel.showUserPersistedLayersIcon(this.localStoragePersistSupported);this.viewModel.layersListVisible.subscribe(lang.hitch(this,this.handleLayerListVisibilityChanged));this.viewModel.addLayersVisible.subscribe(lang.hitch(this,this.handleAddLayersVisibilityChanged));this.viewModel.persistedLayersVisible.subscribe(lang.hitch(this,this.handlePersistedLayersVisibilityChanged));this.viewModel.on(this.viewModel.ADD_LAYERS_VISIBLE,lang.hitch(this,this.handleAddLayersVisible));ko.applyBindings(this.viewModel,this.domNode);this.createLayersTocWidget();_20c.set(this.domNode,"minHeight","250px");if(this.allowAddLayers){this.populateLayerTypesDropdown();}else{_20c.set(this.layersTabContainer,"display","none");}this.manualLayerLoadedSuccessCallback=lang.hitch(this,this.handleManualLayerLoadedCallback);this.manualLayerLoadedErrCallback=lang.hitch(this,this.handleManualLayerLoadErrorCallback);if(this.localStoragePersistSupported){this.createUserPersistedLayerListWidget();}},handleLayerListVisibilityChanged:function(_218){this._handleContentAnimation(_218,this.layerTocContainer);},handleAddLayersVisibilityChanged:function(_219){this._handleContentAnimation(_219,this.addLayerContainer);},handlePersistedLayersVisibilityChanged:function(_21a){this._handleContentAnimation(_21a,this.userPersistedLayersContainer);},handleAddLayersVisible:function(){this.addLayerTextInput.set("value","");this.addLayerLabelInput.set("value","");this.addLayerTextInput.focus();},createLayersTocWidget:function(){this.layersTocWidget=new _212();_20d.place(this.layersTocWidget.domNode,this.layerTocContainer);},createUserPersistedLayerListWidget:function(){if(this.userPersistedLayersListWidget==null){this.userPersistedLayersListWidget=new _213();this.userPersistedLayersListWidget.placeAt(this.userPersistedLayersContainer);this.userPersistedLayersListWidget.on("removeUserPersistedLayer",lang.hitch(this,this.handleRemoveUserPersistedLayer));this.userPersistedLayersListWidget.on("addUserPersistedLayerToMap",lang.hitch(this,this.handleAddUserPersistedLayerToMap));this.userPersistedLayersListWidget.on("removeAllUserPersistedLayers",lang.hitch(this,this.handleRemoveAllUserPersistedLayers));this.userPersistedLayersListWidget.addExistingPersistedLayerItems(this.persistedUserLayers);}},showLayerList:function(){this.viewModel.showLayersList();},handleRemoveAllUserPersistedLayers:function(){this.removeAllLayers();},handleRemoveUserPersistedLayer:function(_21b){if(_21b!=null&&_21b!=""){this.deleteUserPersistedLayer(_21b);}},handleAddUserPersistedLayerToMap:function(_21c,_21d){if(_21c!=null&&_21c!=""){this._addLayer(_21c,_21d);}},loadViewerConfigurationData:function(){var _21e=null;_20b.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"layersWidget",function(_21f){_21e=_21f;});if(_21e){for(var key in _21e){if(key==null||key.toString()==null){continue;}if(key.toString().toLowerCase()=="allowAddLayers".toLowerCase()){this.allowAddLayers=_21e[key];}else{if(key.toString().toLowerCase()=="showWKIDInAddLayers".toLowerCase()){if(_21e[key]==false){this.showWKIDInAddLayers=false;}}}}}},handleManualLayerLoadedCallback:function(){_20b.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Layer Added");VIEWER_UTILS.log("Layer Added",VIEWER_GLOBALS.LOG_TYPE.INFO);},handleManualLayerLoadErrorCallback:function(msg){if(msg!=null&&lang.isString(msg)){VIEWER_UTILS.log("Could not add layer: "+msg,VIEWER_GLOBALS.LOG_TYPE.ERROR);}else{VIEWER_UTILS.log("Add Layer Failed",VIEWER_GLOBALS.LOG_TYPE.ERROR);}},initListeners:function(){this.inherited(arguments);_20b.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADDED,lang.hitch(this,this.addLayer));_20b.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVED,lang.hitch(this,this.handleLayerRemoved));_20b.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.CLEAR_STORED_LAYERS,lang.hitch(this,this.handleRemoveAllUserPersistedLayers));},populateLayerTypesDropdown:function(){var _220;for(var key in VIEWER_GLOBALS.LAYER_TYPES){_220=VIEWER_GLOBALS.LAYER_TYPES[key];var _221={label:_220.LABEL,value:_220.VALUE};this.addLayerTypeSelect.addOption(_221);}},handleAddLayers:function(_222){if(_222!=null&&lang.isArray(_222)){for(var i=0;i<_222.length;i++){this.addLayer(_222[i]);}}},addLayer:function(_223){if(_223==null){return;}var _224=VIEWER_UTILS.getLayerUniqueId(_223);if(_224==null||this.addedLayers[_224]!=null){return;}this.layersTocWidget.addLayer(_223);this.addedLayers[_224]={layer:_223};if(_223.url&&this.localStoragePersistSupported){this.saveLayer(_223);}},saveLayer:function(_225){var _226=this.persistUserLayer(_225);if(_226&&_226.url){this.userPersistedLayersListWidget.addPersistedLayer(_226);}},handleToggleLayerVisibility:function(_227){if(_227.visible){_227.hide();}else{_227.show();}},handleZoomToLayer:function(_228){_20b.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,_228.fullExtent);},handleLayerAddUrlKeyUp:function(e){if(VIEWER_UTILS.isEnterKey(e)){this.addManualLayer();}else{var url=this.addLayerTextInput.get("value");if(url==""){return;}var _229=VIEWER_UTILS.getServiceTypeFromUrl(url);if(_229!=null){if(_229===VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER){this.addLayerTypeSelect.set("value",VIEWER_GLOBALS.LAYER_TYPES.IMAGE_SERVER.VALUE);}else{if(_229===VIEWER_GLOBALS.SERVICE_TYPES.FEATURE_SERVER){this.addLayerTypeSelect.set("value",VIEWER_GLOBALS.LAYER_TYPES.FEATURE_LAYER.VALUE);}else{if(_229===VIEWER_GLOBALS.SERVICE_TYPES.KML){this.addLayerTypeSelect.set("value",VIEWER_GLOBALS.LAYER_TYPES.KML.VALUE);}else{if(_229===VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER){var _22a=REG_EXP_UTILS.featureLayerRegExp.test(url);if(_22a){this.addLayerTypeSelect.set("value",VIEWER_GLOBALS.LAYER_TYPES.FEATURE_LAYER.VALUE);}else{this.addLayerTypeSelect.set("value",VIEWER_GLOBALS.LAYER_TYPES.MAP_SERVER.VALUE);}}}}}}}},addManualLayer:function(){var url=this.addLayerTextInput.get("value");if(url!=""){if(VIEWER_UTILS.endsWith(url,"/")){url=url.substring(0,url.length-1);}this._addLayer(url);}},_addLayer:function(_22b,_22c){var _22d=_22c;if(_22d==null||_22d==""){_22d=this.addLayerLabelInput.get("value");}_20b.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_FROM_URL,_22b,{isOperationalLayer:true,canRemove:true,label:_22d},this.manualLayerLoadedSuccessCallback,this.manualLayerLoadedErrCallback);},showConfirmDeleteLayerTooltip:function(_22e,_22f){this.deleteLayerConfirmedCallback=lang.hitch(this,this.handleRemoveLayerFromClick,_22e);this.showDeleteLayerTooltip(_22f);},handleRemoveLayerFromClick:function(_230){_20b.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE,_230);},createConfirmDeleteLayerTooltip:function(){this.confirmDeleteLayerTooltip=new _20f({confirmCallback:lang.hitch(this,this.handleConfirmedLayerDelete)});this.confirmDeleteLayerTooltip.on("hide",lang.hitch(this,function(){this.deleteLayerConfirmedCallback=null;}));},handleConfirmedLayerDelete:function(){if(lang.isFunction(this.deleteLayerConfirmedCallback)){this.deleteLayerConfirmedCallback();}this.deleteLayerConfirmedCallback=null;},showDeleteLayerTooltip:function(_231){if(_231==null){return;}if(this.confirmDeleteLayerTooltip==null){this.createConfirmDeleteLayerTooltip();}if(this.confirmDeleteLayerTooltip){this.confirmDeleteLayerTooltip.setAroundNode(_231);this.confirmDeleteLayerTooltip.show();}},handleLayerRemoved:function(_232){if(_232==null){return;}var _233=VIEWER_UTILS.getLayerUniqueId(_232);if(_233==null){return;}if(this.addedLayers[_233]!=null){this.layersTocWidget.removeLayer(_232);delete this.addedLayers[_233];}},hidePopups:function(){if(this.confirmDeleteLayerTooltip){this.confirmDeleteLayerTooltip.hide();}}});});},"esriviewer/loader/base/ViewerPlacementWindow":function(){define(["dojo/_base/declare","dojo/_base/window","dojo/dom-construct","./BaseViewerPlacement"],function(_234,_235,_236,_237){return _234([_237],{label:"window",isAbsolutePositioned:true,isWindowless:false,initUI:function(){this.inherited(arguments);_236.place(this.mapDiv,_235.body());},placeNavigationToolbar:function(_238){if(_238){_238.placeAt(_235.body());}},placeHeader:function(_239){if(_239){_239.placeAt(_235.body());}},placeViewerAccordion:function(_23a){if(_23a){_23a.placeAt(_235.body());}},placeMainToolbar:function(_23b){if(_23b){_23b.placeAt(_235.body());}},placeMainToolbarDropdown:function(_23c){if(_23c){_236.place(_23c,_235.body());}},placeMessagingWidget:function(_23d){if(_23d){_23d.placeAt(_235.body());}},placeThrobberWidget:function(_23e){if(_23e){_23e.placeAt(_235.body());}},placeBasemapGallery:function(_23f){if(_23f){_23f.placeAt(_235.body());}},placeMapScaleAndCoordinates:function(_240){if(_240!=null){_236.place(_240,_235.body());}},placeCreateBookmarkWidget:function(_241){if(_241){_241.placeAt(_235.body());}},placeMenuBarWidget:function(_242){if(_242){_242.placeAt(_235.body());}},placeZoomToWidget:function(_243){if(_243){_243.placeAt(_235.body());}}});});},"esriviewer/ui/draw/base/UserPersistedGraphicsListWidget":function(){define(["dojo/_base/declare","dojo/text!./template/UserPersistedGrahicsListingTemplate.html","../../base/UITemplatedWidget","dojo/_base/lang","./model/UserPersistedGraphicsListViewModel"],function(_244,_245,_246,lang,_247){return _244([_246],{bindingsApplied:false,templateString:_245,constructor:function(){this.userPersistedGraphics={};},postCreate:function(){this.inherited(arguments);this.viewModel=new _247();this.viewModel.on(this.viewModel.REMOVE_USER_PERSISTED_GRAPHICS,lang.hitch(this,this.handleRemoveUserPersistedGraphics));this.viewModel.on(this.viewModel.ADD_USER_PERSISTED_GRAPHICS_TO_MAP,lang.hitch(this,this.handleAddUserPersistedGraphicsToMap));},applyBindings:function(){if(!this.bindingsApplied){this.bindingsApplied=true;ko.applyBindings(this.viewModel,this.domNode);}},handleAddUserPersistedGraphicsToMap:function(_248){if(_248&&lang.isObject(_248)){this.onAddUserPersistedGraphicsToMap(_248);}},onAddUserPersistedGraphicsToMap:function(_249){},handleRemoveUserPersistedGraphics:function(_24a){if(_24a&&lang.isObject(_24a)&&_24a.label!=null&&_24a.label!=""){this.onRemoveUserPersistedGraphics(_24a.label);}},onRemoveUserPersistedGraphics:function(_24b){},addExistingPersistedGraphicsItems:function(_24c){for(var key in _24c){this.viewModel.addedUserPersistedGraphics.push(_24c[key]);}this.viewModel.sort();this.applyBindings();},addUserPersistedGraphics:function(_24d){this.viewModel.addedUserPersistedGraphics.push(_24d);this.viewModel.sort();}});});},"esriviewer/manager/base/ViewerManager":function(){define(["dojo/_base/declare","dojox/storage","dojo/topic","dojo/_base/window","dojo/_base/lang","./IdentityManagerMixin","../../base/Configurable","../../base/LocationServiceSupport","../../base/DataLoaderSupport","../../map/MapManager","../../portal/PortalViewerManagerSupportMixin","../../map/geometry/GeometryServiceController","./ViewerManagerUI","./WebMapTemplateConfigurationUtil","esri/urlUtils","esri/arcgis/utils","../../map/base/LayerQueryTools"],function(_24e,_24f,_250,_251,lang,_252,_253,_254,_255,_256,_257,_258,_259,_25a,_25b,_25c,_25d){return _24e([_257,_253,_254,_255,_259,_252],{portalSharingRestUrl:"/sharing/rest",portalContentUrl:"/sharing/rest/content/items",baseConfigurationLoaded:false,forceHideCoreTimeSlider:false,useProxyForConfig:false,useProxyForPositionConfig:false,allowAccordionMove:true,allowAccordionCollapse:true,forceHideAccordionTab:false,configUrl:"config/baseConfig.json",viewerPositioningConfigUrl:"config/viewerPositioning.json",constructor:function(_25e){lang.mixin(this,_25e||{});this._initializeStorageProvider();var _25f=_25b.urlToObject(document.location.href);this.appId=_25f.query?_25f.query.appid:null;this.processConfig();},processConfig:function(){if(this.appId!=null){var _260=new _25a();_260.loadConfiguration(this.appId).then(lang.hitch(this,this._handleWebMapTemplateConfigurationLoaded));}else{if(this.useProxyForConfig){this.loadProxiedConfig();}else{this.loadConfig();}}},_handleWebMapTemplateConfigurationLoaded:function(_261){this.handleConfigLoaded(_261);},handleConfigLoaded:function(_262){VIEWER_UTILS.debug("Configuration Loaded");this.viewerConfig=_262;if(_262.windowTitle){_251.doc.title=_262.windowTitle;}else{_251.doc.title="JavaScript Map Viewer";}if(this.viewerConfig&&this.viewerConfig.portal!=null&&lang.isObject(this.viewerConfig.portal)&&this.viewerConfig.portal.url){var _263=this.viewerConfig.portal.url;var _264=_263.toLowerCase();if(_264.indexOf("http://")<0&&_264.indexOf("https://")<0){_263="http://"+_263;}_25c.arcgisUrl=VIEWER_UTILS.joinUrl(_263,this.portalContentUrl);}if(this.useProxyForPositionConfig){this.loadProxiedJson(this.viewerPositioningConfigUrl,lang.hitch(this,this.handleWindowPositionsConfigLoaded),lang.hitch(this,this.handleWindowPositionsConfigLoadFailed));}else{this.loadJson(this.viewerPositioningConfigUrl,lang.hitch(this,this.handleWindowPositionsConfigLoaded),lang.hitch(this,this.handleWindowPositionsConfigLoadFailed));}},startupViewer:function(){this._initListeners();this.initListeners();this._createViewerManager();this.createLayerQueryTools();},createLayerQueryTools:function(){this.layerQueryTools=new _25d();},initListeners:function(){},_initListeners:function(){this.inherited(arguments);_250.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LOADED,lang.hitch(this,this.handleMapLoaded));_250.subscribe(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET,lang.hitch(this,this.handleGetConfiguration));_250.subscribe(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,lang.hitch(this,this.handleGetConfigurationKey));},handleGetConfiguration:function(_265){if(_265&&lang.isFunction(_265)){_265(this.viewerConfig);}},handleGetConfigurationKey:function(key,_266){if(key!=null&&key!=""&&_266&&lang.isFunction(_266)){_266(this.viewerConfig[key]);}},handleMapLoaded:function(map){this.map=map;PROJECTION_UTILS.setMapSpatialReference(map.spatialReference);this.loadControllers();this.loadUI();},loadUI:function(){this.inherited(arguments);},_initializePortalSupport:function(){return this.inherited(arguments);},loadControllers:function(){if(this.viewerConfig.geometryServiceUrl!=null&&this.viewerConfig.geometryServiceUrl){this.geometryServiceController=new _258();_250.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.CONTROLLER_CREATED);}else{_250.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.EXISTS,lang.hitch(this,function(_267){if(_267!=null&&lang.isFunction(_267)){_267(false);}}));}if(this.viewerConfig.locators!=null&&lang.isArray(this.viewerConfig.locators)){for(var i=0;i<this.viewerConfig.locators.length;i++){this.addLocator(this.viewerConfig.locators[i].url,this.viewerConfig.locators[i].label);}}},handleWindowPositionsConfigLoaded:function(_268){VIEWER_GLOBALS.windowPositioning=_268;this.createMessagingAndLogging();if(!this.baseConfigurationLoaded){this.handleBaseConfigurationsLoaded();}},handleWindowPositionsConfigLoadFailed:function(){VIEWER_GLOBALS.windowPositioning={};this.createMessagingAndLogging();if(!this.baseConfigurationLoaded){this.handleBaseConfigurationsLoaded();}},createMessagingAndLogging:function(){this._createLoggingWidget();this._createMessagingWidget();},handleBaseConfigurationsLoaded:function(){this.baseConfigurationLoaded=true;this.startupViewer();},_createViewerManager:function(){this._createLayersWidget();if(this._initializePortalSupport!=null&&lang.isFunction(this._initializePortalSupport)){_250.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.INITIALIZED,lang.hitch(this,function(){this.mapManager=new _256({webMapItem:this.viewerConfig.webMapItem});}));var _269=this._initializePortalSupport();if(!_269){this.mapManager=new _256();}}else{this.mapManager=new _256();}},_createLayersWidget:function(){this.createLayersWidget();},createLayersWidget:function(){},_initializeStorageProvider:function(){var _26a=dojox.storage.manager.getProvider();_26a.initialize();},createDefaultAccordionTools:function(){},handleToggleAccordion:function(){this.viewerAccordion.toggle();}});});},"esriviewer/map/base/MapLayersTools":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","esri/layers/OpenStreetMapLayer","esri/layers/FeatureLayer","esri/layers/GraphicsLayer","esri/layers/ArcGISImageServiceLayer","esri/layers/KMLLayer","esri/layers/WMSLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/layers/ArcGISDynamicMapServiceLayer"],function(_26b,_26c,lang,_26d,_26e,_26f,_270,_271,_272,_273,_274){return _26b([],{labelServicesVisible:false,constructor:function(_275){lang.mixin(this,_275);this.loadViewerConfigurationData();this.currrentBasemapKey=null;this.labelServices={};this.timeEnabledLayers=[];this.operationalLayers={};this.graphicsLayers={};this.initListeners();},loadViewerConfigurationData:function(){if(this.mapConfiguration==null){var _276=null;_26c.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_277){_276=_277;});if(_276){this.mapConfiguration=_276;}}},initListeners:function(){_26c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.REMOVE,lang.hitch(this,this.handleRemoveBasemap));_26c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_GRAPHICS_LAYER,lang.hitch(this,this.handleAddGraphicsLayer));_26c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.ADD,lang.hitch(this,this.handleAddBasemap));_26c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.SET,lang.hitch(this,this.changeBaseMaps));_26c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GET_CURRENT_URL,lang.hitch(this,this.handleGetCurrentBasemapUrl));_26c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GET_CURRENT,lang.hitch(this,this.handleGetCurrentBasemap));_26c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.SHOW,lang.hitch(this,this.showLabelServices));_26c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.HIDE,lang.hitch(this,this.hideLabelServices));_26c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.SERVICE_EXISTS,lang.hitch(this,this.handleLabelServiceExists));_26c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.TIME.GET_TIME_ENABLED_SERVICES,lang.hitch(this,this.handleGetTimeEnabledLayers));_26c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.OPERATIONAL.GET,lang.hitch(this,this.handleGetOperationalLayers));_26c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_FROM_URL,lang.hitch(this,this.handleAddLayerFromUrl));_26c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD,lang.hitch(this,this.handleAddLayer));_26c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_EXTERNAL_MANAGED_LAYER,lang.hitch(this,this.handleAddExternalManagedLayer));_26c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE_EXTERNAL_MANAGED_LAYER,lang.hitch(this,this.handleRemoveExternalManagedLayer));_26c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.GET_FEATURE_LAYER_IF_EXISTS,lang.hitch(this,this.handleGetFeatureLayerIfExists));_26c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE,lang.hitch(this,this.handleRemoveLayer));_26c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_REFERENCE_LAYER,lang.hitch(this,this.handleAddReferenceLayerRequest));_26c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE_REFERENCE_LAYER,lang.hitch(this,this.handleRemoveReferenceLayerRequest));_26c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.MOVE_LAYER_TO_TOP,lang.hitch(this,this.handleMoveLayerToTop));_26c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.MAKE_VISIBLE,lang.hitch(this,this.handleMakeLayerVisible));_26c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.MAKE_INVISIBLE,lang.hitch(this,this.handleMakeLayerInvisible));this.map.on("layer-add",lang.hitch(this,this._handleLayerAdded));},handleMakeLayerVisible:function(_278){if(_278!=null){_278.show();}},handleMakeLayerInvisible:function(_279){if(_279!=null){_279.hide();}},handleMoveLayerToTop:function(_27a){if(_27a){var _27b=this.map.layerIds.length;if(this.map.graphicsLayerIds!=null&&this.map.graphicsLayerIds.length!=null){_27b+=this.map.graphicsLayerIds.length;}this.map.reorderLayer(_27a,_27b);}},_handleLayerAdded:function(evt){if(evt==null||evt.layer==null){return;}var _27c=evt.layer;if(_27c!=null&&_27c.isReferenceLayer==null||!_27c.isReferenceLayer){if(_27c.timeInfo!=null){this.timeEnabledLayers.push(_27c);VIEWER_UTILS.log("Found time enabled layer",VIEWER_GLOBALS.LOG_TYPE.INFO);_26c.publish(VIEWER_GLOBALS.EVENTS.MAP.TIME.TIME_LAYER_FOUND,_27c);}}if(_27c.isOperationalLayer!=null&&_27c.isOperationalLayer===true){VIEWER_UTILS.log("Added operational layer",VIEWER_GLOBALS.LOG_TYPE.INFO);_26c.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADDED,_27c);}},handleGetFeatureLayerIfExists:function(_27d,_27e){if(_27d==null||_27d==""||_27e==null||!lang.isFunction(_27e)){return;}var _27f=_27d.toLowerCase();_27e(this.operationalLayers[_27f]);},handleAddGraphicsLayer:function(_280){if(_280!=null){this.map.addLayer(_280);var uuid=VIEWER_UTILS.generateUUID();_280.id=uuid;this.graphicsLayers[uuid]=_280;}},handleAddBasemap:function(_281,_282,_283){var id=_281.toLowerCase();if(this.basemaps[id]!=null){_283("Basemap Already Exists");}var _284=lang.hitch(this,this._handleBaseMapServiceDescriptionLoaded,_281,_282,_283);VIEWER_UTILS.getServiceDescription(_281,_284);},_handleBaseMapServiceDescriptionLoaded:function(_285,_286,_287,_288){if(this.isServiceTiledAndInMapSR(_288)){var id=_285.toLowerCase();var _289={id:id,label:REG_EXP_UTILS.getServiceNameFromUrl(_285),url:_285};this.basemaps[id]=_289;VIEWER_UTILS.debug("Added Basemap: "+id);_26c.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.ADDED,_289,id);if(_286!=null&&lang.isFunction(_286)){_286(_289);}}else{if(_287!=null&&lang.isFunction(_287)){_287("Could not add basemap. Is the service cached and in the map spatial reference ("+this.map.spatialReference.wkid+")?");}}},handleRemoveLayer:function(_28a){if(_28a==null){return;}var _28b=VIEWER_UTILS.getLayerUniqueId(_28a);if(_28b!=null){if(this.operationalLayers[_28b]){delete this.operationalLayers[_28b];}}if(_28a instanceof _26f){if(this.graphicsLayers[_28a.id]!=null){delete this.graphicsLayers[_28a.id];}}this.map.removeLayer(_28a);VIEWER_UTILS.debug("Removed Layer: "+_28a.name);_26c.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVED,_28a);},handleGetOperationalLayers:function(_28c){if(_28c!=null&&lang.isFunction(_28c)){var _28d=[];for(var key in this.operationalLayers){_28d.push(this.operationalLayers[key]);}_28c(_28d);}},handleGetTimeEnabledLayers:function(_28e){if(_28e!=null&&lang.isFunction(_28e)){_28e(this.timeEnabledLayers);}},handleRemoveExternalManagedLayer:function(_28f){this.map.removeLayer(_28f);},handleAddExternalManagedLayer:function(_290){this.map.addLayer(_290);},handleAddLayer:function(_291,_292,_293,_294){if(_292&&_292.isOperationalLayer!=false){var _295=VIEWER_UTILS.getLayerUniqueId(_291);if(_295!=null){if(this.operationalLayers[_295]!=null){return;}}this.operationalLayers[_295]=_291;_291.isOperationalLayer=true;}else{_291.isOperationalLayer=false;}_291.canRemove=_292!=null&&_292.canRemove!=false;this.map.addLayer(_291);if(_293!=null&&lang.isFunction(_293)){_291.on("load",_293);}if(_294!=null&&lang.isFunction(_294)){var _296=function(){_294(_291);};_291.on("error",lang.hitch(this,_296));}VIEWER_UTILS.debug("Added Layer: "+_295);},handleAddLayerFromUrl:function(_297,_298,_299,_29a){var _29b=VIEWER_UTILS.getLayerUniqueId(_297);if(this.operationalLayers[_29b]!=null){if(_29a!=null&&lang.isFunction(_29a)){_29a("Layer has already been added to the map");}else{_26c.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Layer has already been added to the map");}return;}var _29c=null;var type=VIEWER_UTILS.getServiceTypeFromUrl(_297);if(type){if(type==VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER){if(REG_EXP_UTILS.isFeatureLayer(_297)){_29c=new _26e(_297,lang.mixin({mode:_26e.MODE_ONDEMAND},_298||{}));}else{this._handleAddMapServiceLayer(_297,_298,_299,_29a);return;}}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.KML){_29c=new _271(_297);}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER){_29c=new _270(_297);}else{if(type===VIEWER_GLOBALS.SERVICE_TYPES.FEATURE_SERVER){_29c=new _26e(_297,lang.mixin({mode:_26e.MODE_ONDEMAND},_298||{}));}}}}}else{if(_297.indexOf("/wms/")>-1){_29c=new _272(_297,_298);}}if(_29c){_29c.canRemove=_298!=null&&_298.canRemove!=false;_29c.isOperationalLayer=_298!=null&&_298.isOperationalLayer!=null&&_298.isOperationalLayer!=false;_29c.layerAliasName=(_298&&_298.label)?_298.label:REG_EXP_UTILS.getServiceNameFromUrl(_297);if(_299!=null&&lang.isFunction(_299)){_29c.on("load",_299);}if(_29a!=null&&lang.isFunction(_29a)){_29c.on("error",_29a);}var _29d=this.operationalLayers;_29c.on("load",function(){_29d[_29b]=_29c;});VIEWER_UTILS.debug("Added Layer from URL: "+_297);this.map.addLayer(_29c);}else{if(lang.isFunction(_29a)){_29a("Could Not Add Layer");}}},_handleAddMapServiceLayer:function(_29e,_29f,_2a0,_2a1){var _2a2=lang.hitch(this,lang.hitch(this,this._handleAddMapServiceServiceDescriptionLoaded,_29e,_29f,_2a0,_2a1));VIEWER_UTILS.getServiceDescription(_29e,_2a2,_2a1);},_handleAddMapServiceServiceDescriptionLoaded:function(_2a3,_2a4,_2a5,_2a6,_2a7){var _2a8;if(_2a7!=null&&lang.isObject(_2a7)){if(this.isServiceTiledAndInMapSR(_2a7)){_2a8=new _273(_2a3);}else{_2a8=new _274(_2a3);}_2a8.isOperationalLayer=_2a4!=null&&_2a4.isOperationalLayer!=null&&_2a4.isOperationalLayer!=false;var _2a9=this.operationalLayers;_2a8.on("load",function(){_2a9[_2a8.url.toLowerCase()]=_2a8;});_2a8.serviceDescription=_2a7;}if(_2a8!=null){_2a8.name=REG_EXP_UTILS.getServiceNameFromUrl(_2a3);if(_2a4!=null&&_2a4.canRemove!=null){_2a8.canRemove=true;}if(_2a5!=null&&lang.isFunction(_2a5)){_2a8.on("load",_2a5);}if(_2a6!=null&&lang.isFunction(_2a6)){_2a8.on("error",_2a6);}VIEWER_UTILS.debug("Added Layer: "+_2a8.url);this.map.addLayer(_2a8);}},isServiceTiledAndInMapSR:function(_2aa){if(_2aa!=null&&lang.isObject(_2aa)){return _2aa.tileInfo!=null&&_2aa.spatialReference!=null&&_2aa.spatialReference.wkid==this.map.spatialReference.wkid;}return false;},handleLabelServiceExists:function(_2ab){if(_2ab!=null&&lang.isFunction(_2ab)){var _2ac=false;for(var key in this.labelServices){_2ac=true;break;}_2ab(_2ac);}},handleRemoveBasemap:function(id){var _2ad=this.basemaps[id];if(this.basemaps[id]!=null){if(this.currrentBasemapKey!=null&&this.currrentBasemapKey===id){this.map.removeLayer(this.currentBasemap);for(var key in this.basemaps){this.changeBaseMaps(key);break;}}delete this.basemaps[id];VIEWER_UTILS.debug("Removed Basemap: "+id);_26c.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.REMOVED,id);}},changeBaseMaps:function(key){var _2ae=this.basemaps[key];if(_2ae){if(this.currrentBasemapKey!=null&&this.currrentBasemapKey===key){return;}if(this.currentBasemap!=null){this.map.removeLayer(this.currentBasemap);}if(_2ae.isOpenStreetMap==null||_2ae.isOpenStreetMap==false){this.currentBasemap=new _273(_2ae.url);}else{this.currentBasemap=new _26d();}this.map.addLayer(this.currentBasemap,0);VIEWER_UTILS.debug("Changed Basemap: "+key);this.currrentBasemapKey=key;}},handleGetCurrentBasemapUrl:function(_2af){if(_2af!=null&&lang.isFunction(_2af)){if(this.mapConfiguration.useBasemapGallery==null||this.mapConfiguration.useBasemapGallery!=true){_2af(this.basemaps[this.currrentBasemapKey].url);return;}else{var _2b0;_26c.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.GET,function(_2b1){_2b0=_2b1;});if(_2b0){var _2b2=_2b0.getSelected();if(_2b2==null){if(this.webMapItem&&this.webMapItem.itemData&&this.webMapItem.itemData.baseMap&&this.webMapItem.itemData.baseMap.baseMapLayers&&this.webMapItem.itemData.baseMap.baseMapLayers&&lang.isArray(this.webMapItem.itemData.baseMap.baseMapLayers)&&this.webMapItem.itemData.baseMap.baseMapLayers.length>0){_2af(this.webMapItem.itemData.baseMap.baseMapLayers[0].url);return;}}else{if(_2b2&&_2b2.layers&&lang.isArray(_2b2.layers)&&_2b2.layers.length>0){_2af(_2b2.layers[0].url);return;}}}}_2af(null);}},handleGetCurrentBasemap:function(_2b3){if(_2b3!=null&&lang.isFunction(_2b3)){if(this.mapConfiguration.useBasemapGallery==null||this.mapConfiguration.useBasemapGallery!=true){_2b3(this.currrentBasemapKey);return;}else{var _2b4=null;_26c.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.GET,function(_2b5){_2b4=_2b5;});if(_2b4){var _2b6=_2b4.getSelected();if(_2b6==null){if(this.webMapItem&&this.webMapItem.itemData&&this.webMapItem.itemData.baseMap&&this.webMapItem.itemData.baseMap.baseMapLayers&&this.webMapItem.itemData.baseMap.baseMapLayers&&lang.isArray(this.webMapItem.itemData.baseMap.baseMapLayers)&&this.webMapItem.itemData.baseMap.baseMapLayers.length>0){_2b3(new _273(this.webMapItem.itemData.baseMap.baseMapLayers[0].url));return;}}else{_2b3(_2b6);return;}}}}_2b3(null);},showLabelServices:function(){var _2b7;for(var key in this.labelServices){_2b7=this.labelServices[key];_2b7.show();this.handleMoveLayerToTop(_2b7);}VIEWER_UTILS.debug("Displayed Label Services");this.labelServicesVisible=true;},hideLabelServices:function(){for(var key in this.labelServices){this.labelServices[key].hide();}VIEWER_UTILS.debug("Hid Label Services");this.labelServicesVisible=false;},handleAddReferenceLayerRequest:function(_2b8,_2b9,_2ba){if(_2b8==null||_2b8.url==null||_2b8.url==""){if(_2ba!=null&&lang.isFunction(_2ba)){_2ba("Invalid Reference Layer");}}var id=VIEWER_UTILS.getLayerUniqueId(_2b8);if(this.labelServices[id]!=null){if(_2ba!=null&&lang.isFunction(_2ba)){_2ba("Reference Layer Already Exists");}}var _2bb=this._addReferenceLayer(_2b8);if(_2bb!=null){if(_2b9!=null&&lang.isFunction(_2b9)){_2b9(_2bb);}}else{if(_2ba!=null&&lang.isFunction(_2ba)){_2ba("Could not add reference layer");}}},_addReferenceLayers:function(){if(this.mapConfiguration.referenceLayers!=null&&lang.isArray(this.mapConfiguration.referenceLayers)){var _2bc;for(var i=0;i<this.mapConfiguration.referenceLayers.length;i++){_2bc=this.mapConfiguration.referenceLayers[i];this._addReferenceLayer(_2bc);}}},_addReferenceLayer:function(_2bd){var _2be=this._getMapLayerFromLayerObject(_2bd);if(_2be!=null){if(!this.labelServicesVisible){_2be.hide();}else{_2be.show();}var id=VIEWER_UTILS.getLayerUniqueId(_2be);if(id==null){return;}this.labelServices[id]=_2be;_2be.isReferenceLayer=true;this.map.addLayer(_2be);VIEWER_UTILS.log("Added Reference Layer: "+_2be.url,VIEWER_GLOBALS.LOG_TYPE.INFO);_26c.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REFERENCE_LAYER_ADDED,_2be);return _2be;}return null;},handleRemoveReferenceLayerRequest:function(_2bf){var id=VIEWER_UTILS.getLayerUniqueId(_2bf);if(id==null){return;}if(this.labelServices[id]!=null){this.map.removeLayer(_2bf);delete this.labelServices[id];var _2c0=false;for(var key in this.labelServices){_2c0=true;break;}VIEWER_UTILS.log("Removed reference layer",VIEWER_GLOBALS.LOG_TYPE.INFO);_26c.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REFERENCE_LAYER_REMOVED,_2bf,_2c0);}},addWebMapOperationalLayers:function(_2c1){var _2c2;var _2c3;for(var i=0;i<_2c1.itemData.operationalLayers.length;i++){_2c2=_2c1.itemData.operationalLayers[i];_2c3=_2c2.layerObject;_2c3.name=REG_EXP_UTILS.getServiceNameFromUrl(_2c3.url);_2c3.isOperationalLayer=true;var _2c4=VIEWER_UTILS.getLayerUniqueId(_2c3);if(this.operationalLayers[_2c4]==null){this.operationalLayers[_2c4]=_2c3;}VIEWER_UTILS.getServiceDescription(_2c3.url,lang.hitch(this,function(_2c5,_2c6){_2c5.serviceDescription=_2c6;this.handleLayerAdded(_2c5);},_2c3));}},_addOperationalLayers:function(){if(this.mapConfiguration.operationalLayers!=null&&lang.isArray(this.mapConfiguration.operationalLayers)){var _2c7;for(var i=0;i<this.mapConfiguration.operationalLayers.length;i++){_2c7=this.mapConfiguration.operationalLayers[i];var _2c8=this._getMapLayerFromLayerObject(_2c7);if(_2c8!=null){VIEWER_UTILS.getServiceDescription(_2c7.url,lang.hitch(this,function(_2c9,_2ca){_2c9.serviceDescription=_2ca;},_2c8));_2c8.name=REG_EXP_UTILS.getServiceNameFromUrl(_2c7.url);if(_2c7.label!=null&&_2c7.label!=""){_2c8.layerAliasName=_2c7.label;}this.map.addLayer(_2c8);_2c8.isOperationalLayer=true;var _2cb=VIEWER_UTILS.getLayerUniqueId(_2c8);if(this.operationalLayers[_2cb]==null){this.operationalLayers[_2cb]=_2c8;}}}}},_getMapLayerFromLayerObject:function(_2cc){if(_2cc.type==null||_2cc.type==""||_2cc.url==null||_2cc.url==""){return null;}var _2cd={};if(_2cc.visible!=null){_2cd.visible=_2cc.visible;}var _2ce=_2cc.type.toLowerCase();if(_2ce==="tiled"){return new _273(_2cc.url,_2cd);}else{if(_2ce==="dynamic"){var _2cf=new _274(_2cc.url,_2cd);if(_2cc.visibleLayerIds!=null&&lang.isArray(_2cc.visibleLayerIds)){_2cf.setVisibleLayers(_2cc.visibleLayerIds);}return _2cf;}else{if(_2ce==="image"){return new _270(_2cc.url,_2cd);}else{if(_2ce==="feature"){_2cd=lang.mixin(_2cd,{mode:_26e.MODE_ONDEMAND,outFields:["*"]});var _2d0=new _26e(_2cc.url,_2cd);if(_2cc.mapLabel!=null&&_2cc.mapLabel.field!=null&&_2cc.mapLabel.field!=""){this._createFeatureLayerLabels(_2d0,_2cc.mapLabel);}return _2d0;}else{if(_2ce==="kml"){return new _271(_2cc.url);}}}}}},loadMapConfigurationLayers:function(){this._addReferenceLayers();this._addOperationalLayers();},_createFeatureLayerLabels:function(_2d1,_2d2){require(["esri/layers/LabelLayer","dojo/_base/Color","esri/renderers/SimpleRenderer","esri/symbols/TextSymbol"],lang.hitch(this,function(_2d3,_2d4,_2d5,_2d6){var _2d7=_2d2.color!=null?_2d2.color:"#000";var _2d8=new _2d3({id:VIEWER_UTILS.generateUUID()});var _2d9=new _2d6().setColor(new _2d4(_2d7));var _2da=_2d2.fontSize!=null?_2d2.fontSize:"12pt";_2d9.font.setSize(_2da);var _2db=_2d2.fontFamily!=null?_2d2.fontFamily:"arial";_2d9.font.setFamily(_2db);var _2dc=new _2d5(_2d9);_2d8.addFeatureLayer(_2d1,_2dc,"${"+_2d2.field+"}");this.map.addLayer(_2d8);_2d1.on("visibility-change",lang.hitch(this,function(_2dd,e){if(e&&e.visible){_2dd.show();}else{_2dd.hide();}},_2d8));_2d1.on("opacity-change",lang.hitch(this,function(_2de,e){if(e&&e.opacity!=null){_2d8.setOpacity(e.opacity);}},_2d8));}));}});});},"esriviewer/map/base/MapDisplayWidgets":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/window","dojo/dom-attr","dojo/dom-construct","dojo/dom-class","dojo/topic","esri/geometry/webMercatorUtils","esri/geometry/scaleUtils"],function(_2df,lang,_2e0,_2e1,_2e2,_2e3,_2e4,_2e5,_2e6){return _2df([],{useFooterCoordPosition:false,_defaultMgrsPrecision:6,showMgrs:false,showUTM:false,showLatLong:true,hideMapScale:false,showScaleBar:false,constructor:function(_2e7){lang.mixin(this,_2e7);this.mgrsPrecision=this._defaultMgrsPrecision;this.loadViewerConfigurationData();this.createMapScaleAndCoordsElement();this.initListeners();},loadViewerConfigurationData:function(){var _2e8=null;_2e4.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_2e9){_2e8=_2e9;});if(_2e8&&lang.isObject(_2e8)){if(_2e8.display!=null&&lang.isObject(_2e8.display)){if(_2e8.display.showScale!=null&&_2e8.display.showScale===false){this.hideMapScale=true;}if(_2e8.display.showScaleBar!=null&&_2e8.display.showScaleBar===true){this.showScaleBar=true;}if(_2e8.display.showMGRS!=null&&_2e8.display.showMGRS===true){this.showMgrs=true;}if(_2e8.display.showUTM!=null&&_2e8.display.showUTM===true){this.showUTM=true;}if(_2e8.display.showLatLong!=null&&_2e8.display.showLatLong===false){this.showLatLong=false;}if(_2e8.display.mgrsPrecision!=null){this.mgrsPrecision=parseInt(_2e8.display.mgrsPrecision,10);}}}var _2ea=null;_2e4.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"footerTogglerWidget",function(_2eb){_2ea=_2eb;});this.useFooterCoordPosition=_2ea!=null&&lang.isObject(_2ea)&&_2ea.create;},initListeners:function(){_2e4.subscribe(VIEWER_GLOBALS.EVENTS.MAP.INFO_WINDOW.HIDE,lang.hitch(this,this.handleHideInfoWindow));if(this.showLatLong||this.showMgrs||this.showUTM){this.map.on("mouse-move",lang.hitch(this,this.showCoords));}},handleHideInfoWindow:function(){if(this.map&&this.map.infoWindow&&this.map.infoWindow.isShowing){this.map.infoWindow.hide();}},createMapScaleAndCoordsElement:function(){var _2ec=_2e2.create("div",{className:"threePixelBorderRadius mapalmanac defaultBackground"});if(this.useFooterCoordPosition){_2e3.add(_2ec,"mapScaleAndCoordsContainerWithFooter");}else{_2e3.add(_2ec,"mapScaleAndCoordsContainer");}if(!this.hideMapScale){this.scaleInfoElement=_2e2.create("span",{className:"mapScaleInfoInner"});_2e2.place(this.scaleInfoElement,_2ec);}if(this.showScaleBar){var _2ed=_2e2.create("div",{className:"threePixelBorderRadius  defaultBackground"});if(this.useFooterCoordPosition){_2e3.add(_2ed,"esriScalebarContainerWithFooter");}else{_2e3.add(_2ed,"esriScalebarContainer");}var _2ee=_2e2.create("div");_2e2.place(_2ee,_2ed);_2e2.place(_2ed,_2e0.body());require(["esri/dijit/Scalebar"],lang.hitch(this,function(_2ef){var _2f0=new _2ef({map:this.map,scalebarUnit:"dual"},_2ee);}));}if(this.showLatLong||this.showMgrs||this.showUTM){if(!this.hideMapScale){_2e2.place(_2e2.create("span",{innerHTML:"|"}),_2ec);}if(this.showLatLong){this.latLongCoordsInfoElement=_2e2.create("span",{className:"mapCoordsInfoInner"});_2e2.place(this.latLongCoordsInfoElement,_2ec);}if(this.showMgrs){if(this.showLatLong){_2e2.place(_2e2.create("span",{innerHTML:"|"}),_2ec);}this.mrgsCoordsInfoElement=_2e2.create("span",{className:"mapCoordsInfoInner"});_2e2.place(this.mrgsCoordsInfoElement,_2ec);}if(this.showUTM){if(this.showLatLong||this.showMgrs){_2e2.place(_2e2.create("span",{innerHTML:"|"}),_2ec);}this.utmCoordsInfoElement=_2e2.create("span",{className:"mapCoordsInfoInner"});_2e2.place(this.utmCoordsInfoElement,_2ec);}}_2e4.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAP_SCALE_AND_COORDINATES,_2ec);},showCoords:function(evt){try{if(this.latLongCoordsInfoElement||this.mrgsCoordsInfoElement||this.utmCoordsInfoElement){var pnt=_2e5.webMercatorToGeographic(evt.mapPoint||evt);if(this.latLongCoordsInfoElement){if(pnt===null||pnt===undefined){return;}_2e1.set(this.latLongCoordsInfoElement,"innerHTML","Lat: "+pnt.y.toFixed(2)+"&deg"+((pnt.y<0)?"S":"N")+"  Lon: "+pnt.x.toFixed(2)+"&deg"+((pnt.x<0)?"W":"E"));}if(this.mrgsCoordsInfoElement){_2e1.set(this.mrgsCoordsInfoElement,"innerHTML","<span style='font-weight:bold'>MGRS</span> "+PROJECTION_UTILS.LLtoMGRS(pnt.y,pnt.x,this.mgrsPrecision));}if(this.utmCoordsInfoElement){var _2f1=PROJECTION_UTILS.LLtoUTM(pnt.y,pnt.x);if(_2f1.northing==null||isNaN(_2f1.northing)){_2f1.northing="?";}else{_2f1.northing=_2f1.northing.toFixed(3);}if(_2f1.easting==null||isNaN(_2f1.easting)){_2f1.easting="?";}else{_2f1.easting=_2f1.easting.toFixed(3);}_2e1.set(this.utmCoordsInfoElement,"innerHTML","<span style='font-weight:bold'>UTM</span> "+"N: "+_2f1.northing+" E: "+_2f1.easting+"   Z: "+_2f1.zone);}}}catch(e){}},showScale:function(){var a=Math.round(_2e6.getScale(this.map));a>999&&a<=999999?a=Math.round(a/1000)+" K":a>999999?a=Math.round(a/1000000)+" M":a>0&&a<=999&&(a=Math.round(a)+" Ft");_2e1.set(this.scaleInfoElement,"innerHTML","<span style='font-weight:bold'>Scale</span> 1 <b>:</b> "+a);}});});},"dijit/PopupMenuItem":function(){define(["dojo/_base/declare","dojo/dom-style","dojo/_base/lang","dojo/query","./popup","./registry","./MenuItem","./hccss"],function(_2f2,_2f3,lang,_2f4,pm,_2f5,_2f6){return _2f2("dijit.PopupMenuItem",_2f6,{_fillContent:function(){if(this.srcNodeRef){var _2f7=_2f4("*",this.srcNodeRef);this.inherited(arguments,[_2f7[0]]);this.dropDownContainer=this.srcNodeRef;}},_openPopup:function(_2f8,_2f9){var _2fa=this.popup;pm.open(lang.delegate(_2f8,{popup:this.popup,around:this.domNode}));if(_2f9&&_2fa.focus){_2fa.focus();}},_closePopup:function(){pm.close(this.popup);this.popup.parentMenu=null;},startup:function(){if(this._started){return;}this.inherited(arguments);if(!this.popup){var node=_2f4("[widgetId]",this.dropDownContainer)[0];this.popup=_2f5.byNode(node);}this.ownerDocumentBody.appendChild(this.popup.domNode);this.popup.domNode.setAttribute("aria-labelledby",this.containerNode.id);this.popup.startup();this.popup.domNode.style.display="none";if(this.arrowWrapper){_2f3.set(this.arrowWrapper,"visibility","");}this.focusNode.setAttribute("aria-haspopup","true");},destroyDescendants:function(_2fb){if(this.popup){if(!this.popup._destroyed){this.popup.destroyRecursive(_2fb);}delete this.popup;}this.inherited(arguments);}});});},"dojox/flash":function(){define(["./flash/_base"],function(){});},"esriviewer/ui/layers/base/LayersLocalStorageMixin":function(){define(["dojo/_base/declare","dojo/has"],function(_2fc,has){return _2fc([],{localStoragePersistSupported:true,constructor:function(){if(!(has("ie")<8)){this.localStoragePersistSupported=false;}this.storageProvider=dojox.storage.manager.getProvider();if(this.storageProvider){this.localStoragePersistSupported=true;}this.persistedUserLayers=this.loadPersistedUserLayers();},deleteUserPersistedLayer:function(_2fd){if(_2fd!=null&&_2fd!=""){if(this.persistUserLayerExists(_2fd)){var _2fe=_2fd.toLowerCase();delete this.persistedUserLayers[_2fe];this.persist();}}},removeAllLayers:function(){this.persistedUserLayers={};this.persist();},persistUserLayerExists:function(_2ff){if(_2ff==null||_2ff==""){return true;}return this.persistedUserLayers[_2ff]!=null;},persistUserLayer:function(_300){if(_300==null||_300.url==null){return null;}var _301=_300.url.toLowerCase();if(_301==null){return null;}if(this.persistUserLayerExists(_301)){return null;}else{var name=VIEWER_UTILS.getLayerNameFromLayer(_300);var _302={url:_300.url,name:name};this.persistedUserLayers[_301]=_302;this.persist();return _302;}},loadPersistedUserLayers:function(){if(this.storageProvider){if(this.storageProvider.hasKey(VIEWER_GLOBALS.STORAGE.LABELS.LAYERS)){return this.storageProvider.get(VIEWER_GLOBALS.STORAGE.LABELS.LAYERS);}}return {};},persist:function(){this.storageProvider.put(VIEWER_GLOBALS.STORAGE.LABELS.LAYERS,this.persistedUserLayers);}});});},"esriviewer/ui/layers/base/LayersTocWidgetContextMenu":function(){define(["dojo/_base/declare","dojo/topic","dojo/on","dojo/_base/lang","dojo/dom-style","dijit/Menu","dijit/MenuItem","dijit/PopupMenuItem","dijit/registry","dojo/_base/connect","esri/layers/ArcGISImageServiceLayer","esri/layers/FeatureLayer","esri/layers/ArcGISDynamicMapServiceLayer"],function(_303,_304,on,lang,_305,Menu,_306,_307,_308,con,_309,_30a,_30b){return _303([],{createQueryBuilderMenuItems:false,showRemoveMenuItems:true,constructor:function(_30c){lang.mixin(this,_30c);this.initialize();},initialize:function(){this.loadViewerConfigurationData();this.createServerMenu();this.createGroupLayerMenu();this.createLayerMenu();this.createGraphicsLayerMenu();this.initListeners();},initListeners:function(){this.zoomToExtentMenuItem.on("click",lang.hitch(this,this.handleZoomToExtent));if(this.createQueryBuilderMenuItems){this.queryServiceMenuItem.on("click",lang.hitch(this,this.handleQueryBuilderServiceClick));this.queryLayerMenuItem.on("click",lang.hitch(this,this.handleQueryBuilderLayerClick));}this.openMapServiceDescriptionMenu.on("click",lang.hitch(this,this.handleOpenMapServerDescriptionMenuRequest));this.confirmRemoveLayerMenuItem.on("click",lang.hitch(this,this.handleRemoveLayer));this.confirmRemoveGraphicLayerMenuItem.on("click",lang.hitch(this,this.handleRemoveGraphicsLayer));con.connect(this.serverNodeMenu,"_openMyself",lang.hitch(this,this.handleServerMenuOpen));con.connect(this.groupNodeMenu,"_openMyself",lang.hitch(this,this.handleGroupMenuOpen));con.connect(this.graphicsLayerMenu,"_openMyself",lang.hitch(this,this.handleGraphicsLayerMenuOpen));con.connect(this.layerNodeMenu,"_openMyself",lang.hitch(this,this.handleLayerMenuOpen));},loadViewerConfigurationData:function(){var _30d=null;_304.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"queryBuilder",function(_30e){_30d=_30e;});if(_30d&&lang.isObject(_30d)){this.createQueryBuilderMenuItems=_30d.create===true;}},createServerMenu:function(){this.serverNodeMenu=new Menu();this.zoomToExtentMenuItem=new _306({label:"Zoom To Extent",iconClass:"commonIcons16 locationGoTo"});this.serverNodeMenu.addChild(this.zoomToExtentMenuItem);if(this.createQueryBuilderMenuItems){this.queryServiceMenuItem=new _306({label:"Query Builder",iconClass:"commonIcons16 sql"});this.serverNodeMenu.addChild(this.queryServiceMenuItem);}this.openMapServiceDescriptionMenu=new _306({label:"View Service Description",iconClass:"serviceDescriptionIcon"});this.serverNodeMenu.addChild(this.openMapServiceDescriptionMenu);var _30f=new Menu();this.confirmRemoveLayerMenuItem=new _306({label:"Confirm",iconClass:"commonIcons16 question"});_30f.addChild(this.confirmRemoveLayerMenuItem);this.removeServiceMenuItem=new _307({iconClass:"commonIcons16 delete",label:"Remove Layer",popup:_30f});this.serverNodeMenu.addChild(this.removeServiceMenuItem);this.serverNodeMenu.startup();},createGraphicsLayerMenu:function(){this.graphicsLayerMenu=new Menu();var _310=new Menu();this.confirmRemoveGraphicLayerMenuItem=new _306({label:"Confirm",iconClass:"commonIcons16 question"});_310.addChild(this.confirmRemoveGraphicLayerMenuItem);this.removeGraphicLayerMenuItem=new _307({iconClass:"commonIcons16 delete",label:"Remove Graphics Layer",popup:_310});this.graphicsLayerMenu.addChild(this.removeGraphicLayerMenuItem);this.graphicsLayerMenu.startup();},createLayerMenu:function(){this.layerNodeMenu=new Menu();if(this.createQueryBuilderMenuItems){this.queryLayerMenuItem=new _306({label:"Query Builder",iconClass:"commonIcons16 sql"});this.layerNodeMenu.addChild(this.queryLayerMenuItem);}this.layerNodeMenu.startup();},createGroupLayerMenu:function(){this.groupNodeMenu=new Menu();this.groupNodeMenu.startup();_305.set(this.groupNodeMenu.domNode,"display","none");},handleGroupMenuOpen:function(){_305.set(this.groupNodeMenu.domNode,"display","none");return false;},bindNodeToGraphicsLayerMenu:function(node){this.bindNode(node,this.graphicsLayerMenu);},bindNodeToServerMenu:function(node){this.bindNode(node,this.serverNodeMenu);},bindNodeToGroupMenu:function(node){this.bindNode(node,this.groupNodeMenu);},bindNodeToLayerMenu:function(node){this.bindNode(node,this.layerNodeMenu);},bindNodeToNoContentMenu:function(node){on(node,"contextmenu",function(e){e.stopPropagation();});},bindNode:function(node,menu){if(node&&menu&&menu.bindDomNode){menu.bindDomNode(node);}},handleRemoveGraphicsLayer:function(){if(this.currentGraphicsLayerNodeFromMenu&&this.currentGraphicsLayerNodeFromMenu.item){var _311=this.getTreeStore().getValue(this.currentGraphicsLayerNodeFromMenu.item,"layer");if(_311){_304.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE,_311);}}},handleGraphicsLayerMenuOpen:function(e){this.currentGraphicsLayerNodeFromMenu=_308.getEnclosingWidget(e.target);if(this.currentGraphicsLayerNodeFromMenu&&this.currentGraphicsLayerNodeFromMenu.item){var _312=this.getTreeStore().getValue(this.currentGraphicsLayerNodeFromMenu.item,"layer");if(_312){if(_312.removable!=null&&_312.removable===true){this.removeGraphicLayerMenuItem.attr("disabled",false);}else{this.removeGraphicLayerMenuItem.attr("disabled",true);}}}},handleLayerMenuOpen:function(e){if(this.queryLayerMenuItem){this.currentLayerNodeFromMenu=_308.getEnclosingWidget(e.target);if(this.currentLayerNodeFromMenu&&this.currentLayerNodeFromMenu.item){var _313=this.getTreeStore().getValue(this.currentLayerNodeFromMenu.item,"layer");if(_313){this.queryLayerMenuItem.attr("disabled",_313.capabilities.indexOf("Query")<0);}}}},handleServerMenuOpen:function(e){this.currentServerNodeFromMenu=_308.getEnclosingWidget(e.target);if(this.currentServerNodeFromMenu&&this.currentServerNodeFromMenu.item){var _314=this.getTreeStore().getValue(this.currentServerNodeFromMenu.item,"layer");if(_314){if(_314.canRemove!=null&&_314.canRemove===true){this.removeServiceMenuItem.attr("disabled",false);}else{this.removeServiceMenuItem.attr("disabled",true);}if(this.queryServiceMenuItem){var _315=false;if(_314 instanceof _30b){_315=false;}else{_315=_314 instanceof _309||(_314.capabilities&&_314.capabilities.indexOf("Query")>-1);}this.queryServiceMenuItem.attr("disabled",!_315);}}}},handleZoomToExtent:function(){if(this.currentServerNodeFromMenu&&this.currentServerNodeFromMenu.item){var _316=this.getTreeStore().getValue(this.currentServerNodeFromMenu.item,"layer");if(_316&&_316.initialExtent&&!isNaN(_316.initialExtent.xmin)&&!isNaN(_316.initialExtent.xmax)&&!isNaN(_316.initialExtent.xmax)&&!isNaN(_316.initialExtent.ymax)){_304.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,_316.initialExtent);}}this.currentServerNodeFromMenu=null;},handleRemoveLayer:function(){if(this.currentServerNodeFromMenu&&this.currentServerNodeFromMenu.item){var _317=this.getTreeStore().getValue(this.currentServerNodeFromMenu.item,"layer");if(_317){if(_317.canRemove!=null&&_317.canRemove===true){_304.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE,_317);}}}this.currentServerNodeFromMenu=null;},handleOpenMapServerDescriptionMenuRequest:function(){if(this.currentServerNodeFromMenu&&this.currentServerNodeFromMenu.item){var _318=this.getTreeStore().getValue(this.currentServerNodeFromMenu.item,"layer");if(_318&&_318.url){this.openUrlInWindow(_318.url);}}this.currentMapServerNodeFromMenu=null;},handleQueryBuilderServiceClick:function(){if(this.currentServerNodeFromMenu&&this.currentServerNodeFromMenu.item){var _319=this.getTreeStore().getValue(this.currentServerNodeFromMenu.item,"layer");if(_319){if(_319 instanceof _309){_304.publish(VIEWER_GLOBALS.EVENTS.QUERY_BUILDER.SET_IMAGE_SERVICE_LAYER,_319);}else{if(_319 instanceof _30a){_304.publish(VIEWER_GLOBALS.EVENTS.QUERY_BUILDER.SET_FEATURE_SERVICE_LAYER,_319);}}}}this.currentMapServerNodeFromMenu=null;},handleQueryBuilderLayerClick:function(){if(this.currentLayerNodeFromMenu&&this.currentLayerNodeFromMenu.item){var _31a=this.getTreeStore().getValue(this.currentLayerNodeFromMenu.item,"layer");var _31b=this.getTreeStore().getValue(this.currentLayerNodeFromMenu.item,"info");_304.publish(VIEWER_GLOBALS.EVENTS.QUERY_BUILDER.SET_MAP_SERVICE_LAYER,_31a,_31b);}this.currentMapServerNodeFromMenu=null;},openUrlInWindow:function(url){if(url){window.open(url);}},getTreeStore:function(){return this.tree.model.store;}});});},"esriviewer/ui/draw/base/MapDrawSupport":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/Color","dojo/_base/lang","dojo/dom-construct","dijit/form/TextBox","dijit/TooltipDialog","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Extent","esri/geometry/screenUtils","esri/graphic","esri/symbols/TextSymbol","esri/symbols/Font"],function(_31c,_31d,_31e,lang,_31f,_320,_321,_322,_323,_324,_325,_326,_327,_328,Font){return _31c([],{constructor:function(){this.polygonOptions={};this.pointOptions={};this.envelopeOptions={};this.lineOptions={};this.geometryAddedCallback=lang.hitch(this,this.geometryAdded);},clearDraw:function(){this.currentDrawType=null;},setDraw:function(type){if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT){this.activatePointDraw();}else{if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE){this.activatePolylineDraw(this.freehandActive);}else{if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_LINE){this.activateLineDraw();}else{if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON){this.activatePolygonDraw(this.freehandActive);}else{if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_RECTANGLE){this.activateRectangleDraw();}else{if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT){this.activatePointDraw();}}}}}}this.currentDrawType=type;},activatePointDraw:function(){this.cancelDrawChangeListener();_31d.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.POINT_INPUT,this.geometryAddedCallback,this.pointOptions);this.setupClearDrawCallback();},activateLineDraw:function(){this.cancelDrawChangeListener();_31d.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.LINE_INPUT,this.geometryAddedCallback,this.lineOptions);this.setupClearDrawCallback();},activatePolylineDraw:function(_329){this.cancelDrawChangeListener();if(_329==null||_329===false){_31d.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.POLYLINE_INPUT,this.geometryAddedCallback,this.lineOptions);}else{_31d.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.FREEHAND_POLYLINE_INPUT,this.geometryAddedCallback,this.lineOptions);}this.setupClearDrawCallback();},activatePolygonDraw:function(_32a){this.cancelDrawChangeListener();if(_32a==null||_32a===false){_31d.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.POLYGON_INPUT,this.geometryAddedCallback,this.polygonOptions);}else{_31d.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.FREEHAND_POLYGON_INPUT,this.geometryAddedCallback,this.polygonOptions);}this.setupClearDrawCallback();},activateRectangleDraw:function(){this.cancelDrawChangeListener();_31d.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.RECTANGLE_INPUT,this.geometryAddedCallback,this.envelopeOptions);this.setupClearDrawCallback();},cancelDrawChangeListener:function(){if(this.toolChangeConnect){this.toolChangeConnect.remove();this.toolChangeConnect=null;}},geometryAdded:function(_32b){if(_32b==null){return;}var _32c=null;var type=null;if(_32b instanceof _322){type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT;if(this.currentDrawType==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT){type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT;_32c=this.cloneTextSymbol(this.textSymbol);_32c.setText("");var _32d;var _32e;_31d.publish(VIEWER_GLOBALS.EVENTS.MAP.DIMENSIONS.GET,function(_32f){_32d=_32f;});_31d.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,function(_330){_32e=_330;});var _331=_326.toScreenPoint(_32e,_32d.width,_32d.height,_32b);this.showTextSymbolTooltip(_331);}else{type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT;_32c=this.pointSymbol;}}else{if(_32b instanceof _323){_32c=this.lineSymbol;type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE;}else{if(_32b instanceof _324){_32c=this.polygonSymbol;type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON;}else{if(_32b instanceof _325){_32c=this.envelopeSymbol;type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_RECTANGLE;}}}}if(_32c!=null&&type!=null){if(type===VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT){this.currentTextGraphic=new _327(_32b,_32c);}else{var _332=new _327(_32b,_32c);var uuid=VIEWER_UTILS.generateUUID();this.onAnnotationCreated({id:uuid,type:type,graphic:_332});}}},onClearDraw:function(){},onAnnotationCreated:function(_333){},setupClearDrawCallback:function(){this.toolChangeConnect=_31d.subscribe(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,lang.hitch(this,this.handleClearDraw));},handleClearDraw:function(){this.cancelDrawChangeListener();this.clearDraw();this.onClearDraw();},createTextSymbolLabelTooltip:function(){var _334=_31f.create("div");var _335=_31f.create("span",{innerHTML:"Label: ",className:"textSymbolInputLabel"});this.textSymbolLabelInput=new _320({value:"Label"});this.textSymbolLabelInput.on("keyUp",lang.hitch(this,this.handleTextSymbolKeyUp));_31f.place(_335,_334);_31f.place(this.textSymbolLabelInput.domNode,_334);this.textSymbolLabelTooltip=new _321({content:_334});},handleTextSymbolKeyUp:function(e){if(VIEWER_UTILS.isEnterKey(e)){this.finalizeTextSymbol();this.hideTextSymbolTooltip();}},finalizeTextSymbol:function(){if(this.currentTextGraphic==null||this.currentTextGraphic.symbol==null){return;}var _336=this.textSymbolLabelInput.get("value");if(_336==""){_336="Label";}this.currentTextGraphic.symbol.setText(_336);var uuid=VIEWER_UTILS.generateUUID();this.onAnnotationCreated({id:uuid,type:VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT,graphic:this.currentTextGraphic});this.currentTextSymbol=null;},showTextSymbolTooltip:function(_337){if(this.textSymbolLabelTooltip==null){this.createTextSymbolLabelTooltip();}if(this.textSymbolLabelTooltip){dijit.popup.open({popup:this.textSymbolLabelTooltip,x:_337.x,y:_337.y});this.textSymbolLabelInput.set("value","");this.textSymbolLabelInput.focus();}},hideTextSymbolTooltip:function(){if(this.textSymbolLabelTooltip){dijit.popup.close(this.textSymbolLabelTooltip);}},cloneTextSymbol:function(){var _338=new _328("");_338.setColor(new _31e(this.textSymbol.color));_338.setAlign(this.textSymbol.align);_338.setAngle(this.textSymbol.angle);_338.setFont(new Font(this.textSymbol.font.size));_338.font.setWeight(this.textSymbol.font.weight);_338.font.setStyle(this.textSymbol.font.style);return _338;}});});},"esriviewer/map/base/MapTimeTools":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang"],function(_339,_33a,lang){return _339([],{constructor:function(_33b){lang.mixin(this,_33b);this.initListeners();},initListeners:function(){_33a.subscribe(VIEWER_GLOBALS.EVENTS.MAP.TIME.CLEAR_TIME_EXTENT,lang.hitch(this,this.handleClearTimeExtent));_33a.subscribe(VIEWER_GLOBALS.EVENTS.MAP.TIME.SET_MAP_TIME_SLIDER,lang.hitch(this,this.handleSetMapTimeSlider));},handleSetMapTimeSlider:function(_33c){this.map.setTimeSlider(_33c);_33a.publish(VIEWER_GLOBALS.EVENTS.MAP.TIME.MAP_TIME_EXTENT_SET);},handleClearTimeExtent:function(){this.map.setTimeSlider(null);this.map.setTimeExtent(null);_33a.publish(VIEWER_GLOBALS.EVENTS.MAP.TIME.MAP_TIME_EXTENT_CLEARED);}});});},"dojox/storage/LocalStorageProvider":function(){define(["dijit","dojo","dojox","dojo/require!dojox/storage/Provider,dojox/storage/manager"],function(_33d,dojo,_33e){dojo.provide("dojox.storage.LocalStorageProvider");dojo.require("dojox.storage.Provider");dojo.require("dojox.storage.manager");dojo.declare("dojox.storage.LocalStorageProvider",[_33e.storage.Provider],{store:null,initialize:function(){this.store=localStorage;this.initialized=true;_33e.storage.manager.loaded();},isAvailable:function(){return typeof localStorage!="undefined";},put:function(key,_33f,_340,_341){this._assertIsValidKey(key);_341=_341||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_341);var _342=this.getFullKey(key,_341);_33f=dojo.toJson(_33f);try{this.store.setItem(_342,_33f);if(_340){_340(this.SUCCESS,key,null,_341);}}catch(e){if(_340){_340(this.FAILED,key,e.toString(),_341);}}},get:function(key,_343){this._assertIsValidKey(key);_343=_343||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_343);key=this.getFullKey(key,_343);return dojo.fromJson(this.store.getItem(key));},getKeys:function(_344){_344=_344||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_344);_344="__"+_344+"_";var keys=[];for(var i=0;i<this.store.length;i++){var _345=this.store.key(i);if(this._beginsWith(_345,_344)){_345=_345.substring(_344.length);keys.push(_345);}}return keys;},clear:function(_346){_346=_346||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_346);_346="__"+_346+"_";var keys=[];for(var i=0;i<this.store.length;i++){if(this._beginsWith(this.store.key(i),_346)){keys.push(this.store.key(i));}}dojo.forEach(keys,dojo.hitch(this.store,"removeItem"));},remove:function(key,_347){_347=_347||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_347);this.store.removeItem(this.getFullKey(key,_347));},getNamespaces:function(){var _348=[this.DEFAULT_NAMESPACE];var _349={};_349[this.DEFAULT_NAMESPACE]=true;var _34a=/^__([^_]*)_/;for(var i=0;i<this.store.length;i++){var _34b=this.store.key(i);if(_34a.test(_34b)==true){var _34c=_34b.match(_34a)[1];if(typeof _349[_34c]=="undefined"){_349[_34c]=true;_348.push(_34c);}}}return _348;},isPermanent:function(){return true;},getMaximumSize:function(){return _33e.storage.SIZE_NO_LIMIT;},hasSettingsUI:function(){return false;},isValidKey:function(_34d){if(_34d===null||_34d===undefined){return false;}return /^[0-9A-Za-z_-]*$/.test(_34d);},isValidNamespace:function(_34e){if(_34e===null||_34e===undefined){return false;}return /^[0-9A-Za-z-]*$/.test(_34e);},getFullKey:function(key,_34f){return "__"+_34f+"_"+key;},_beginsWith:function(_350,_351){if(_351.length>_350.length){return false;}return _350.substring(0,_351.length)===_351;},_assertIsValidNamespace:function(_352){if(this.isValidNamespace(_352)===false){throw new Error("Invalid namespace given: "+_352);}},_assertIsValidKey:function(key){if(this.isValidKey(key)===false){throw new Error("Invalid key given: "+key);}}});_33e.storage.manager.register("dojox.storage.LocalStorageProvider",new _33e.storage.LocalStorageProvider());});},"dojox/storage/GearsStorageProvider":function(){define(["dijit","dojo","dojox","dojo/require!dojo/gears,dojox/storage/Provider,dojox/storage/manager,dojox/sql"],function(_353,dojo,_354){dojo.provide("dojox.storage.GearsStorageProvider");dojo.require("dojo.gears");dojo.require("dojox.storage.Provider");dojo.require("dojox.storage.manager");dojo.require("dojox.sql");if(dojo.gears.available){(function(){dojo.declare("dojox.storage.GearsStorageProvider",_354.storage.Provider,{constructor:function(){},TABLE_NAME:"__DOJO_STORAGE",initialized:false,_available:null,_storageReady:false,initialize:function(){if(dojo.config["disableGearsStorage"]==true){return;}this.TABLE_NAME="__DOJO_STORAGE";this.initialized=true;_354.storage.manager.loaded();},isAvailable:function(){return this._available=dojo.gears.available;},put:function(key,_355,_356,_357){this._initStorage();if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}_357=_357||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_357)){throw new Error("Invalid namespace given: "+key);}if(dojo.isString(_355)){_355="string:"+_355;}else{_355=dojo.toJson(_355);}try{_354.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND key = ?",_357,key);_354.sql("INSERT INTO "+this.TABLE_NAME+" VALUES (?, ?, ?)",_357,key,_355);}catch(e){_356(this.FAILED,key,e.toString(),_357);return;}if(_356){_356(_354.storage.SUCCESS,key,null,_357);}},get:function(key,_358){this._initStorage();if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}_358=_358||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_358)){throw new Error("Invalid namespace given: "+key);}var _359=_354.sql("SELECT * FROM "+this.TABLE_NAME+" WHERE namespace = ? AND "+" key = ?",_358,key);if(!_359.length){return null;}else{_359=_359[0].value;}if(dojo.isString(_359)&&(/^string:/.test(_359))){_359=_359.substring("string:".length);}else{_359=dojo.fromJson(_359);}return _359;},getNamespaces:function(){this._initStorage();var _35a=[_354.storage.DEFAULT_NAMESPACE];var rs=_354.sql("SELECT namespace FROM "+this.TABLE_NAME+" DESC GROUP BY namespace");for(var i=0;i<rs.length;i++){if(rs[i].namespace!=_354.storage.DEFAULT_NAMESPACE){_35a.push(rs[i].namespace);}}return _35a;},getKeys:function(_35b){this._initStorage();_35b=_35b||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_35b)){throw new Error("Invalid namespace given: "+_35b);}var rs=_354.sql("SELECT key FROM "+this.TABLE_NAME+" WHERE namespace = ?",_35b);var _35c=[];for(var i=0;i<rs.length;i++){_35c.push(rs[i].key);}return _35c;},clear:function(_35d){this._initStorage();_35d=_35d||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_35d)){throw new Error("Invalid namespace given: "+_35d);}_354.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ?",_35d);},remove:function(key,_35e){this._initStorage();if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}_35e=_35e||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_35e)){throw new Error("Invalid namespace given: "+key);}_354.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND"+" key = ?",_35e,key);},putMultiple:function(keys,_35f,_360,_361){this._initStorage();if(!this.isValidKeyArray(keys)||!_35f instanceof Array||keys.length!=_35f.length){throw new Error("Invalid arguments: keys = ["+keys+"], values = ["+_35f+"]");}if(_361==null||typeof _361=="undefined"){_361=_354.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_361)){throw new Error("Invalid namespace given: "+_361);}this._statusHandler=_360;try{_354.sql.open();_354.sql.db.execute("BEGIN TRANSACTION");var _362="REPLACE INTO "+this.TABLE_NAME+" VALUES (?, ?, ?)";for(var i=0;i<keys.length;i++){var _363=_35f[i];if(dojo.isString(_363)){_363="string:"+_363;}else{_363=dojo.toJson(_363);}_354.sql.db.execute(_362,[_361,keys[i],_363]);}_354.sql.db.execute("COMMIT TRANSACTION");_354.sql.close();}catch(e){if(_360){_360(this.FAILED,keys,e.toString(),_361);}return;}if(_360){_360(_354.storage.SUCCESS,keys,null,_361);}},getMultiple:function(keys,_364){this._initStorage();if(!this.isValidKeyArray(keys)){throw new ("Invalid key array given: "+keys);}if(_364==null||typeof _364=="undefined"){_364=_354.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_364)){throw new Error("Invalid namespace given: "+_364);}var _365="SELECT * FROM "+this.TABLE_NAME+" WHERE namespace = ? AND "+" key = ?";var _366=[];for(var i=0;i<keys.length;i++){var _367=_354.sql(_365,_364,keys[i]);if(!_367.length){_366[i]=null;}else{_367=_367[0].value;if(dojo.isString(_367)&&(/^string:/.test(_367))){_366[i]=_367.substring("string:".length);}else{_366[i]=dojo.fromJson(_367);}}}return _366;},removeMultiple:function(keys,_368){this._initStorage();if(!this.isValidKeyArray(keys)){throw new Error("Invalid arguments: keys = ["+keys+"]");}if(_368==null||typeof _368=="undefined"){_368=_354.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_368)){throw new Error("Invalid namespace given: "+_368);}_354.sql.open();_354.sql.db.execute("BEGIN TRANSACTION");var _369="DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND key = ?";for(var i=0;i<keys.length;i++){_354.sql.db.execute(_369,[_368,keys[i]]);}_354.sql.db.execute("COMMIT TRANSACTION");_354.sql.close();},isPermanent:function(){return true;},getMaximumSize:function(){return this.SIZE_NO_LIMIT;},hasSettingsUI:function(){return false;},showSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},hideSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},_initStorage:function(){if(this._storageReady){return;}if(!google.gears.factory.hasPermission){var _36a=null;var icon=null;var msg="This site would like to use Google Gears to enable "+"enhanced functionality.";var _36b=google.gears.factory.getPermission(_36a,icon,msg);if(!_36b){throw new Error("You must give permission to use Gears in order to "+"store data");}}try{_354.sql("CREATE TABLE IF NOT EXISTS "+this.TABLE_NAME+"( "+" namespace TEXT, "+" key TEXT, "+" value TEXT "+")");_354.sql("CREATE UNIQUE INDEX IF NOT EXISTS namespace_key_index"+" ON "+this.TABLE_NAME+" (namespace, key)");}catch(e){throw new Error("Unable to create storage tables for Gears in "+"Dojo Storage");}this._storageReady=true;}});_354.storage.manager.register("dojox.storage.GearsStorageProvider",new _354.storage.GearsStorageProvider());})();}});},"esriviewer/ui/draw/base/model/UserPersistedGraphicsListViewModel":function(){define(["dojo/_base/declare","dojo/Evented"],function(_36c,_36d){return _36c([_36d],{REMOVE_USER_PERSISTED_GRAPHICS:"removeUserPersistedGraphic",ADD_USER_PERSISTED_GRAPHICS_TO_MAP:"addUserPersistedGraphicsToMap",constructor:function(){var self=this;this.addedUserPersistedGraphics=ko.observableArray();this.removeUserPersistedGraphic=function(_36e){if(_36e==null){return;}self.emit(self.REMOVE_USER_PERSISTED_GRAPHICS,_36e);self.addedUserPersistedGraphics.remove(_36e);};this.addSavedGraphics=function(_36f){if(_36f==null){return;}self.emit(self.ADD_USER_PERSISTED_GRAPHICS_TO_MAP,_36f);};},sort:function(){this.addedUserPersistedGraphics.sort(function(left,_370){var _371=left.label.toLowerCase();var _372=_370.label.toLowerCase();return _371==_372?0:(_371<_372?-1:1);});}});});},"esriviewer/base/ViewerGlobals":function(){define(["dojo/_base/declare"],function(_373){return _373([],{EVENTS:{CSS:{CORE_UI_THEME_LOADED:"css:coreUILoaded"},MAP:{GET_MAP_DIV:"map:getMapDiv",GET:"map:get",INFO_WINDOW:{HIDE:"mapInfoWin:hide"},LEGEND:{CREATE:"legend:create"},RESIZE:"map:resize",LOADED:"map:loaded",ACTIONS:{TOOL_CHANGED:"MapMan:tlChngd"},FLASH:{POINT:"mapFlash:point"},LAYERS:{TRANSPARENCY:{WINDOW:{SHOW:"layerTransWindow:show",HIDE:"layerTransWindow:hide",TOGGLE:"layerTransWindow:toggle"},SET:"layerTrans:setTransparency"},WIDGET:{SHOW:"layersWidget:show"},OPERATIONAL:{GET:"operationalLayers:get"},ADD_GRAPHICS_LAYER:"layers:addGraphicsLayer",ADD_FROM_URL:"layers:addFromUrl",ADD:"layers:add",REMOVE:"layers:remove",REMOVED:"layers:removed",ADDED:"layers:added",ADD_REFERENCE_LAYER:"reference:addLayer",REMOVE_REFERENCE_LAYER:"reference:removeLayer",REFERENCE_LAYER_ADDED:"reference:added",REFERENCE_LAYER_REMOVED:"reference:removed",ADD_EXTERNAL_MANAGED_LAYER:"layers:addExternalManagedLayer",REMOVE_EXTERNAL_MANAGED_LAYER:"layers:removeExternalManagedLayer",GET_FEATURE_LAYER_IF_EXISTS:"layers:getFeatureLayerIfExists",MOVE_LAYER_TO_TOP:"layers:moveLayerToTop",QUERY_LAYER:"layers:queryLayer",MAKE_VISIBLE:"layers:makeLayerVisible",MAKE_INVISIBLE:"layers:makeLayerInvisible",GET_MIN_MAX_FOR_FIELD:"layers:getMinMax",GET_DISTINCT_FIELD_VALUES:"layers:getDistinctFieldValues",CLEAR_STORED_LAYERS:"layers:clearStoredLayers"},TOOLS:{DRAW_POINT:"tldr:dPt",DRAW_POLYGON:"tldr:dPoly",DRAW_RECTANGLE:"tldr:dRect",DRAW_FREEHAND_POLYGON:"tldr:dFPoly",DRAW_FREEHAND_LINE:"tldr:dFln",DRAW_LINE:"tldr:dLn",DRAW_POLYLINE:"tldr:dPLn",DRAW_TEXT:"tldr:dTx"},GRAPHICS:{ADD:"mapGraphics:add",REMOVE:"mapGraphics:remove",CENTER_AND_FLASH:"mapGraphics:centerAndFlash",CENTER_ON_MAP:"mapGraphics:centerOnMap",},BASEMAP:{SET:"map:setBasemap",GET_CURRENT:"map:getCurrentBasemap",GET_CURRENT_URL:"map:getCurrentBasemapUrl",ADD:"map:addBasemap",ADDED:"map:basemapAdded",REMOVE:"map:removeBasemap",REMOVED:"map:basemapRemoved",GALLERY:{TOGGLE:"map:basemapGalleryToggle",HIDE:"map:basemapGalleryHide",SHOW:"map:basemapGalleryShow",IS_HIDDEN:"map:basemapGalleryIsHidden",GET:"map:basemapGalleryGet"},CHANGED:"map:basemapChanged"},EXTENT:{GET_SPATIAL_REFERENCE:"extent:getSpatialReference",GET_EXTENT:"extent:getExtent",GET_CENTER:"extent:getCenter",GET_LEVEL:"extent:getLevel",SET_LEVEL:"extent:setLevel",PAN_TO:"extent:panTo",SET_EXTENT:"extent:setExtent",CHANGED:"extent:changed",GO_PREV_EXTENT:"extent:prevExtent",GO_NEXT_EXTENT:"extent:nextExtent",GO_INITIAL_EXTENT:"extent:initialExtent",GO_LAST_EXTENT:"extent:lastExtent",PREV_EXTENT_EXISTS:"extent:prevExtentExists",NEXT_EXTENT_EXISTS:"extent:nextExtentExists",ZOOM_OUT:"extent:zoomOut",ZOOM_TO_LAYER:"extent:zoomToLayer"},LEVEL:{CHANGED:"zoomLevel:changed",GET_LEVEL_COUNT:"zoomLevel:getCount",LEVEL_COUNT_CHANGED:"zoomLevel:lvlCountChanged"},LABEL_SERVICES:{SHOW:"lblServices:show",HIDE:"lblServices:hide",SERVICE_EXISTS:"lblServices:exist"},DIMENSIONS:{GET:"dimensions:get"},TIME:{TIME_LAYER_FOUND:"time:timeLayerFound",GET_TIME_ENABLED_SERVICES:"time:getTimeEnabledServices",SHOW_TIME_SLIDER:"time:showTimeSlider",TOGGLE_TIME_SLIDER:"time:toggleTimeSlider",MAP_TIME_EXTENT_CLEARED:"map:timeExtentCleared",CLEAR_TIME_EXTENT:"time:clearTimeExtent",SET_MAP_TIME_SLIDER:"time:setMapTimeSlider",MAP_TIME_EXTENT_SET:"time:mapTimeExtentSet",MAP_TIME_CHANGED:"time:mapTimeChanged"}},IDENTITY_MANAGER:{GET_TOKEN:"identityManager:getToken"},PORTAL:{INITIALIZED:"portal:initialized",USER_LOGGED_OUT:"portal:userLoggedOut",USER_LOGGED_IN:"portal:userLoggedIn",IS_USER_LOGGED_IN:"portal:isUserLoggedIn",LOG_IN:"portal:logIn",LOG_OUT:"portal:logOut",SEARCH_WEBMAPS:"portal:searchWebmaps",SEARCH_FEATURE_SERVICES:"portal:searchFeatureServices",SEARCH_MAP_SERVICES:"portal:searchMapServices",SEARCH_IMAGE_SERVICES:"portal:searchImageServices",SEARCH_FEATURE_SERVICE_LAYERS:"portal:searchFeatureServiceLayers",SEARCH_GEOCODE_SERVICES:"portal:searchGeocodeServices",GET_INSTANCE:"portal:getInstance",GET_BASEMAPS:"portal:getBasemaps"},TOOLS:{ACCORDION:{TOGGLE:"accordion:toggle",SHOW:"accordion:show",HIDE:"accordion:hide",ADD_ITEM:"accordion:addItem",LOAD_DEFAULT_TOOLS:"accordion:loadDefaultTools",HIDE_COMPLETE:"accordion:hideComplete",SHOW_ITEM:"accordion:showItem"},MENU:{ADD_TOOL:"toolMenu:addTool",HIDE_TOOLS_BUTTON:"toolMenu:hideToolsButton",SHOW_TOOLS_BUTTON:"toolMenu:showToolsButton",HIDE_LAYERS_BUTTON:"toolMenu:hideLayersButton",SHOW_LAYERS_BUTTON:"toolMenu:showLayersButton"}},QUERY_BUILDER:{SET_IMAGE_SERVICE_LAYER:"queryBuilder:setImgSrvLyr",SET_MAP_SERVICE_LAYER:"queryBuilder:setMapServiceLayer",SET_FEATURE_SERVICE_LAYER:"queryBuilder:setFeatureServiceLayer"},WINDOW:{REPOSITION_ALL:"window:repositionAll",SOCIAL_MEDIA:{SHOW:"socialMedia:show",HIDE:"socialMedia:hide",TOGGLE:"socialMedia:toggle"},POINT_UPLOAD:{SHOW:"ptUploadWindow:show",HIDE:"ptUploadWindow:hide",TOGGLE:"ptUploadWindow:toggle"},WEATHER:{SHOW:"weatherWindow:show",HIDE:"weatherWindow:hide",TOGGLE:"weatherWindow:toggle"},DRAW:{SHOW:"drawWindow:show",HIDE:"drawWindow:hide",TOGGLE:"drawWindow:toggle"},LEGEND:{SHOW:"legendWindow:show",HIDE:"legendWindow:hide"},QUERY_BUILDER:{SHOW:"queryBuilder:show",HIDE:"queryBuilder:hide",TOGGLE:"queryBuilder:toggle"},FEATURE_EDITOR:{SHOW:"featureEditor:show",HIDE:"featureEditor:hide",TOGGLE:"featureEditor:toggle"},MEASURE:{SHOW:"measureWindow:show",HIDE:"measureWindow:hide",TOGGLE:"measureWindow:toggle"},IDENTIFY:{SHOW:"identifyWindow:show",HIDE:"identifyWindow:hide",TOGGLE:"identifyWindow:toggle"},REVERSE_GEOCODE:{SHOW:"reverseGeocodeWindow:show",HIDE:"reverseGeocodeWindow:hide",TOGGLE:"reverseGeocodeWindow:toggle"},PORTAL_PUBLISH:{SHOW:"portalPublish:show",HIDE:"portalPublish:hide",TOGGLE:"portalPublish:toggle"},PORTAL_SEARCH:{SHOW:"portalSearch:show",HIDE:"portalSearch:hide",TOGGLE:"portalSearch:toggle"},ZOOM_TO:{SHOW:"zoomTo:show",HIDE:"zoomTo:hide",TOGGLE:"zoomTo:toggle"},REFLECTIVITY:{SHOW:"reflect:show",HIDE:"reflect:hide",TOGGLE:"reflect:toggle"},PRINT:{SHOW:"print:show",HIDE:"print:hide",TOGGLE:"print:toggle"},PLOTTING:{SHOW:"plotting:show",HIDE:"plotting:hide",TOGGLE:"plotting:toggle"}},DRAW:{CLEAR_STORED_GRAPHICS:"draw:clearStrdGraph",USER:{LINE_INPUT:"draw:usrLnIn",POINT_INPUT:"draw:usrPointIn",POLYGON_INPUT:"draw:usrPolyIn",POLYLINE_INPUT:"draw:usrPLnIn",RECTANGLE_INPUT:"draw:usrRectIn",DRAW_CANCEL:"draw:usrDrawCncl",FREEHAND_POLYLINE_INPUT:"draw:usrFrLnIn",FREEHAND_POLYGON_INPUT:"draw:usrFrPolyIn",GET_USER_GRAPHICS:"draw:usrGGraphics"},SYMBOLOGY:{SET_POLYGON:"drawSym:setPolygon",SET_POINT:"drawSym:setPoint",SET_LINE:"drawSym:setLine",SET_ENVELOPE:"drawSym:setEnvelope",SET_TEXT:"drawSym:setText"},DRAW_GRAPHICS_LAYER_CREATED:"draw:drawGraphicsLayerCreated",DRAW_STARTED:"draw:started",DRAW_COMPLETE:"draw:complete",DRAW_CANCELLED:"draw:cancelled"},NAVIGATION:{DISABLE:"nav:disable",DISABLE_TOOLBAR:"nav:disableToolbar",ENABLE_TOOLBAR:"nav:enableToolbar",PAN:"nav:pan",ZOOM_IN:"nav:zoomIn",ZOOM_OUT:"nav:zoomOut"},LOCATOR:{REVERSE_GEOCODE:"locator:reverseGeocode",SINGLE_LINE_ADDRESS_TO_LOCATION:"locator:addressToLocation",LOCATOR_REQUEST_COMPLETE:"locator:locatorRequestComplete",LOCATOR_REQUEST_ERROR:"locator:locatorRequestError",ADD_LOCATOR:"locator:addLocator",GET_LOCATORS:"locator:getLocators",LOCATOR_ADDED:"locator:locatorAdded",REMOVE_LOCATOR:"locator:remove",LOCATOR_REMOVED:"locator:removed"},BOOKMARK:{STORAGE:{GET:"bookmark:getBookmarks"},CREATE_WINDOW:{SHOW:"bookmark:show",HIDE:"bookmark:hide"},REMOVED:"bookmark:removed",CREATED:"bookmark:created",DELETE_STORED:"bookmark:deleteStored"},CONFIGURE:{WINDOW:{SHOW:"configureWindow:show",HIDE:"configureWindow:hide"}},THROBBER:{SHOW:"throbber:show",HIDE:"throbber:hide",BLOCK_HIDE:"throbber:blockHide",RELEASE_HIDE_BLOCK:"throbber:unblockHide",DISABLE:"throbber:disable",ENABLE:"throbber:enable"},TOOLTIP:{CREATE_CONFIRM:"tooltip:createConfirm"},MESSAGING:{SHOW:"messaging:show",HIDE:"messaging:hide"},GEOMETRY_SERVICE:{EXISTS:"geometryService:exists",TASKS:{PROJECT_TO_MAP_SR:"geometry:project",CALCULATE_AREA:"geometry:calculateArea",CALCULATE_DISTANCE:"geometry:calculateDistance",PROJECT_TO_LAT_LON:"geometry:projectToLatLon"},BUFFER_POINT:"geometryService:bufferPoint",BUFFER:"geometryService:buffer",MGRS_TO_LAT_LON:"geometryService:mrgsToLatLon",CONTROLLER_CREATED:"geometryService:controllerCreated"},LOGGING:{ADD:"logging:add",CLEAR:"logging:clear",WINDOW:{SHOW:"logging:windowShow",HIDE:"logging:windowHide",TOGGLE:"logging:windowToggle"}},FOOTER:{TOGGLE:"footer:toggle",COLLAPSE:"footer:collapse",EXPAND:"footer:expand",COLLAPSED:"footer:collapsed",EXPANDED:"footer:expanded",IS_EXPANDED:"footer:isExpanded"},CONFIGURATION:{GET:"config:get",GET_ENTRY:"config:getEntry"},PLACEMENT:{GLOBAL:{PLACE:{NAVIGATION_TOOLBAR:"place:navTool",HEADER:"place:header",VIEWER_ACCORDION:"place:vAccor",MAIN_TOOLBAR:"place:mTbar",MAIN_TOOLBAR_DROP_DOWN:"place:mTbardd",FOOTER:"place:ftr",MESSAGING:"place:msging",THROBBER:"place:throbber",BASEMAP_GALLERY:"place:basemapGallery",MAP_SCALE_AND_COORDINATES:"place:mSACoords",CREATE_BOOOKMARK:"place:createBmrk",MENU_BAR:"place:menuBar",USER_LOCATION:"place:usrLoc"}}}},STORAGE:{LABELS:{BOOKMARKS:"bookmarks",USER_GRAPHICS:"userGraphics","BASEMAPS":"basemaps","LOCATORS":"locators","REFERENCE_LAYERS":"referenceLayers","LAYERS":"userLayers"}},SERVICE_TYPES:{GEOMETRY_SERVER:"GeometryServer",GLOBE_SERVER:"GlobeServer",GP_SERVER:"GPServer",GP_TASK:"GPTask",IMAGE_SERVER:"ImageServer",MAP_SERVER:"MapServer",WEB_MAP:"WebMap",PORTAL_SERVER:"PortalServer",GEOCODE_SERVER:"GeocodeServer",FEATURE_LAYER:"FeatureLayer",FEATURE_SERVER:"FeatureServer",KML:"KMLLayer",OPEN_STREET_MAP:"OpenStreetMap",WMS_LAYER:"WMSLayer"},LAYER_TYPES:{IMAGE_SERVER:{LABEL:"Image Service",VALUE:"ImageServer"},MAP_SERVER:{LABEL:"Map Service",VALUE:"MapServer"},FEATURE_LAYER:{LABEL:"Feature Layer",VALUE:"FeatureLayer"},KML:{LABEL:"KML Layer",VALUE:"KMLLayer"}},LOG_TYPE:{WARNING:"warning",ERROR:"error",INFO:"info"},ESRI_FIELD_TYPES:{DATE:"esriFieldTypeDate",DOUBLE:"esriFieldTypeDouble",STRING:"esriFieldTypeString",INTEGER:"esriFieldTypeInteger",SMALL_INTEGER:"esriFieldTypeSmallInteger",GEOMETRY:"esriFieldTypeGeometry",OBJECT_ID:"esriFieldTypeOID",GUID:"esriFieldTypeGUID",GLOBAL_ID:"esriFieldTypeGlobalID"},ESRI_GEOMETRY_TYPES:{POINT:"esriGeometryPoint",LINE:"esriGeometryPolyline",POLYGON:"esriGeometryPolygon",ENVELOPE:"esriGeometryEnvelope"},ESRI_LAYER_TYPES:{FEATURE_LAYER:"Feature Layer",RASTER:"Raster Layer"},ESRI_LAYER_DECLARED_CLASSES:{GRAPHICS_LAYER:"esri.layers.GraphicsLayer",FEATURE_LAYER:"esri.layers.FeatureLayer",TILED_MAP_SERVICE:"esri.layers.ArcGISTiledMapServiceLayer",DYNAMIC_MAP_SERVICE:"esri.layers.ArcGISDynamicMapServiceLayer",IMAGE_SERVICE:"esri.layers.ArcGISImageServiceLayer"},ESRI_UNITS:{ACRES:"esriAcres",METERS:"esriMeters",FEET:"esriFeet",YARDS:"esriYards",MILES:"esriMiles",NAUTICAL_MILES:"esriNauticalMiles",MILLIMETERS:"esriMillimeters",CENTIMETERS:"esriCentimeters",DECIMETERS:"esriDecimeters",KILOMETERS:"esriKilometers",SQUARE_MILES:"esriSquareMiles",SQUARE_METERS:"esriSquareMeters",SQUARE_KILOMETERS:"esriSquareKilometers",SQUARE_ARES:"esriAres",SQUARE_HECTARES:"esriHectares",SQUARE_CENTIMETERS:"esriSquareCentimeters",SQUARE_DECIMETERS:"esriSquareDecimeters",SQUARE_FEET:"esriSquareFeet",SQUARE_INCHES:"esriSquareInches",SQUARE_MILLIMETERS:"esriSquareMillimeters",SQUARE_YARDS:"esriSquareYards",SQUARE_UNKNOWN:"esriUnknownAreaUnits",DECIMAL_DEGREES:"esriDUDecimalDegrees",DEGREE_MINUTE_SECONDS:"esriDegreeMinuteSeconds"},AGS_PORTAL_TYPES:{GEOPROCESSING_SERVICE:"Geoprocessing Service",MAP_SERVICE:"Map Service",WEB_MAP:"Web Map",MAPPING_APPLICATION:"Web Mapping Application",FEATURE_SERVICE:"Feature Service",FEATURE_SERVICE_LAYER:"Feature Service Layer",GEOCODE_SERVICE:"Geocoding Service",DESKTOP_TEMPLATE:"Desktop Application Template",FEATURE_COLLECTION_TEMPLATE:"Feature Collection Template",FEATURED_ITEMS:"Featured Items",LAYER_PACKAGE:"Layer Package",IMAGE_SERVICE:"Image Service",GRAPHICS_LAYER:"Graphics Layer",UNKNOWN:"Unknown",OPEN_STREET_MAPS:"OpenStreetMap"},DEFAULT_PORTAL_ENDPOINTS:{SEARCH_URL_PART:"/sharing/search",VIEWER_URL_PART:"home/webmap/viewer.html",CONTENT_URL_PART:"sharing/content",ITEMS_URL_PART:"sharing/content/items",DEFAULT_MAX_RESULTS:15,USER_CONTENT_PREPEND:"sharing/content/users/",USER_GROUPS_PREPEND:"/sharing/community/users",USER_SHARE_APPEND:"/shareItems",ADD_ITEM_PART_APPEND:"/addItem",PRINT_SERVICE_APPEND:"sharing/tools/print",GENERATE_TOKEN_APPEND:"/sharing/generateToken",PORTAL_VALIDATOR_ENDPOINT:"sharing",DATA_APPEND:"data"},ESRI_RENDERER_TYPES:{SIMPLE:"simple",UNIQUE_VALUE:"uniqueValue",CLASS_BREAKS:"classBreaks"},WINDOW:{TOP_POSITION_MOVE_OFFSET:30},VIEWER_MODES:{SIDEBAR:"sidebar",WINDOW:"window",MOBILE:"mobile"},GP_PARAMETER_DIRECTION:{INPUT:"esriGPParameterDirectionInput",OUTPUT:"esriGPParameterDirectionOutput"},GP_MESSAGE_TYPES:{INFO:["esriJobMessageTypeInformative","esriGPMessageTypeInformative"],WARNING:["esriJobMessageTypeWarning","esriGPMessageTypeWarning"],ERROR:["esriJobMessageTypeAbort","esriGPMessageTypeError","esriJobMessageTypeError","esriGPMessageTypeAbort"]},ANIMATIONS:{LIGHT_SPEED:{OUT:"lightSpeedOut animated",IN:"lightSpeedIn animated",DURATION:300},BOUNCE:{IN:"bounceIn animated",IN_DOWN:"bounceInDown animated",IN_RIGHT:"bounceInRight animated",IN_LEFT:"bounceInLeft animated"},FADE:{IN:"fadeIn animated",OUT:"fadeOut animated",IN_DOWN:"fadeInDown animated"},ROTATE:{IN:"rotateIn animated",OUT:"rotateOut animated"}},MIME_TYPES:{TEXT_PLAIN:"text/plain",EXCEL_VND:"application/vnd.ms-excel"},DEFAULT_REVERSE_GEOCODE_DISTANCE:50,PORTAL_SHARING_REST_URL_PART:"/sharing/rest",REFLECTIVITY_HELP_URL:"http://mesonet.agron.iastate.edu/GIS/radview.phtml"});});},"dojo/data/ItemFileWriteStore":function(){define(["../_base/lang","../_base/declare","../_base/array","../_base/json","../_base/kernel","./ItemFileReadStore","../date/stamp"],function(lang,_374,_375,_376,_377,_378,_379){return _374("dojo.data.ItemFileWriteStore",_378,{constructor:function(_37a){this._features["dojo.data.api.Write"]=true;this._features["dojo.data.api.Notification"]=true;this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};if(!this._datatypeMap["Date"].serialize){this._datatypeMap["Date"].serialize=function(obj){return _379.toISOString(obj,{zulu:true});};}if(_37a&&(_37a.referenceIntegrity===false)){this.referenceIntegrity=false;}this._saveInProgress=false;},referenceIntegrity:true,_assert:function(_37b){if(!_37b){throw new Error("assertion failed in ItemFileWriteStore");}},_getIdentifierAttribute:function(){return this.getFeatures()["dojo.data.api.Identity"];},newItem:function(_37c,_37d){this._assert(!this._saveInProgress);if(!this._loadFinished){this._forceLoad();}if(typeof _37c!="object"&&typeof _37c!="undefined"){throw new Error("newItem() was passed something other than an object");}var _37e=null;var _37f=this._getIdentifierAttribute();if(_37f===Number){_37e=this._arrayOfAllItems.length;}else{_37e=_37c[_37f];if(typeof _37e==="undefined"){throw new Error("newItem() was not passed an identity for the new item");}if(lang.isArray(_37e)){throw new Error("newItem() was not passed an single-valued identity");}}if(this._itemsByIdentity){this._assert(typeof this._itemsByIdentity[_37e]==="undefined");}this._assert(typeof this._pending._newItems[_37e]==="undefined");this._assert(typeof this._pending._deletedItems[_37e]==="undefined");var _380={};_380[this._storeRefPropName]=this;_380[this._itemNumPropName]=this._arrayOfAllItems.length;if(this._itemsByIdentity){this._itemsByIdentity[_37e]=_380;_380[_37f]=[_37e];}this._arrayOfAllItems.push(_380);var _381=null;if(_37d&&_37d.parent&&_37d.attribute){_381={item:_37d.parent,attribute:_37d.attribute,oldValue:undefined};var _382=this.getValues(_37d.parent,_37d.attribute);if(_382&&_382.length>0){var _383=_382.slice(0,_382.length);if(_382.length===1){_381.oldValue=_382[0];}else{_381.oldValue=_382.slice(0,_382.length);}_383.push(_380);this._setValueOrValues(_37d.parent,_37d.attribute,_383,false);_381.newValue=this.getValues(_37d.parent,_37d.attribute);}else{this._setValueOrValues(_37d.parent,_37d.attribute,_380,false);_381.newValue=_380;}}else{_380[this._rootItemPropName]=true;this._arrayOfTopLevelItems.push(_380);}this._pending._newItems[_37e]=_380;for(var key in _37c){if(key===this._storeRefPropName||key===this._itemNumPropName){throw new Error("encountered bug in ItemFileWriteStore.newItem");}var _384=_37c[key];if(!lang.isArray(_384)){_384=[_384];}_380[key]=_384;if(this.referenceIntegrity){for(var i=0;i<_384.length;i++){var val=_384[i];if(this.isItem(val)){this._addReferenceToMap(val,_380,key);}}}}this.onNew(_380,_381);return _380;},_removeArrayElement:function(_385,_386){var _387=_375.indexOf(_385,_386);if(_387!=-1){_385.splice(_387,1);return true;}return false;},deleteItem:function(item){this._assert(!this._saveInProgress);this._assertIsItem(item);var _388=item[this._itemNumPropName];var _389=this.getIdentity(item);if(this.referenceIntegrity){var _38a=this.getAttributes(item);if(item[this._reverseRefMap]){item["backup_"+this._reverseRefMap]=lang.clone(item[this._reverseRefMap]);}_375.forEach(_38a,function(_38b){_375.forEach(this.getValues(item,_38b),function(_38c){if(this.isItem(_38c)){if(!item["backupRefs_"+this._reverseRefMap]){item["backupRefs_"+this._reverseRefMap]=[];}item["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(_38c),attr:_38b});this._removeReferenceFromMap(_38c,item,_38b);}},this);},this);var _38d=item[this._reverseRefMap];if(_38d){for(var _38e in _38d){var _38f=null;if(this._itemsByIdentity){_38f=this._itemsByIdentity[_38e];}else{_38f=this._arrayOfAllItems[_38e];}if(_38f){for(var _390 in _38d[_38e]){var _391=this.getValues(_38f,_390)||[];var _392=_375.filter(_391,function(_393){return !(this.isItem(_393)&&this.getIdentity(_393)==_389);},this);this._removeReferenceFromMap(item,_38f,_390);if(_392.length<_391.length){this._setValueOrValues(_38f,_390,_392,true);}}}}}}this._arrayOfAllItems[_388]=null;item[this._storeRefPropName]=null;if(this._itemsByIdentity){delete this._itemsByIdentity[_389];}this._pending._deletedItems[_389]=item;if(item[this._rootItemPropName]){this._removeArrayElement(this._arrayOfTopLevelItems,item);}this.onDelete(item);return true;},setValue:function(item,_394,_395){return this._setValueOrValues(item,_394,_395,true);},setValues:function(item,_396,_397){return this._setValueOrValues(item,_396,_397,true);},unsetAttribute:function(item,_398){return this._setValueOrValues(item,_398,[],true);},_setValueOrValues:function(item,_399,_39a,_39b){this._assert(!this._saveInProgress);this._assertIsItem(item);this._assert(lang.isString(_399));this._assert(typeof _39a!=="undefined");var _39c=this._getIdentifierAttribute();if(_399==_39c){throw new Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");}var _39d=this._getValueOrValues(item,_399);var _39e=this.getIdentity(item);if(!this._pending._modifiedItems[_39e]){var _39f={};for(var key in item){if((key===this._storeRefPropName)||(key===this._itemNumPropName)||(key===this._rootItemPropName)){_39f[key]=item[key];}else{if(key===this._reverseRefMap){_39f[key]=lang.clone(item[key]);}else{_39f[key]=item[key].slice(0,item[key].length);}}}this._pending._modifiedItems[_39e]=_39f;}var _3a0=false;if(lang.isArray(_39a)&&_39a.length===0){_3a0=delete item[_399];_39a=undefined;if(this.referenceIntegrity&&_39d){var _3a1=_39d;if(!lang.isArray(_3a1)){_3a1=[_3a1];}for(var i=0;i<_3a1.length;i++){var _3a2=_3a1[i];if(this.isItem(_3a2)){this._removeReferenceFromMap(_3a2,item,_399);}}}}else{var _3a3;if(lang.isArray(_39a)){_3a3=_39a.slice(0,_39a.length);}else{_3a3=[_39a];}if(this.referenceIntegrity){if(_39d){var _3a1=_39d;if(!lang.isArray(_3a1)){_3a1=[_3a1];}var map={};_375.forEach(_3a1,function(_3a4){if(this.isItem(_3a4)){var id=this.getIdentity(_3a4);map[id.toString()]=true;}},this);_375.forEach(_3a3,function(_3a5){if(this.isItem(_3a5)){var id=this.getIdentity(_3a5);if(map[id.toString()]){delete map[id.toString()];}else{this._addReferenceToMap(_3a5,item,_399);}}},this);for(var rId in map){var _3a6;if(this._itemsByIdentity){_3a6=this._itemsByIdentity[rId];}else{_3a6=this._arrayOfAllItems[rId];}this._removeReferenceFromMap(_3a6,item,_399);}}else{for(var i=0;i<_3a3.length;i++){var _3a2=_3a3[i];if(this.isItem(_3a2)){this._addReferenceToMap(_3a2,item,_399);}}}}item[_399]=_3a3;_3a0=true;}if(_39b){this.onSet(item,_399,_39d,_39a);}return _3a0;},_addReferenceToMap:function(_3a7,_3a8,_3a9){var _3aa=this.getIdentity(_3a8);var _3ab=_3a7[this._reverseRefMap];if(!_3ab){_3ab=_3a7[this._reverseRefMap]={};}var _3ac=_3ab[_3aa];if(!_3ac){_3ac=_3ab[_3aa]={};}_3ac[_3a9]=true;},_removeReferenceFromMap:function(_3ad,_3ae,_3af){var _3b0=this.getIdentity(_3ae);var _3b1=_3ad[this._reverseRefMap];var _3b2;if(_3b1){for(_3b2 in _3b1){if(_3b2==_3b0){delete _3b1[_3b2][_3af];if(this._isEmpty(_3b1[_3b2])){delete _3b1[_3b2];}}}if(this._isEmpty(_3b1)){delete _3ad[this._reverseRefMap];}}},_dumpReferenceMap:function(){var i;for(i=0;i<this._arrayOfAllItems.length;i++){var item=this._arrayOfAllItems[i];if(item&&item[this._reverseRefMap]){}}},_getValueOrValues:function(item,_3b3){var _3b4=undefined;if(this.hasAttribute(item,_3b3)){var _3b5=this.getValues(item,_3b3);if(_3b5.length==1){_3b4=_3b5[0];}else{_3b4=_3b5;}}return _3b4;},_flatten:function(_3b6){if(this.isItem(_3b6)){return {_reference:this.getIdentity(_3b6)};}else{if(typeof _3b6==="object"){for(var type in this._datatypeMap){var _3b7=this._datatypeMap[type];if(lang.isObject(_3b7)&&!lang.isFunction(_3b7)){if(_3b6 instanceof _3b7.type){if(!_3b7.serialize){throw new Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+type+"]");}return {_type:type,_value:_3b7.serialize(_3b6)};}}else{if(_3b6 instanceof _3b7){return {_type:type,_value:_3b6.toString()};}}}}return _3b6;}},_getNewFileContentString:function(){var _3b8={};var _3b9=this._getIdentifierAttribute();if(_3b9!==Number){_3b8.identifier=_3b9;}if(this._labelAttr){_3b8.label=this._labelAttr;}_3b8.items=[];for(var i=0;i<this._arrayOfAllItems.length;++i){var item=this._arrayOfAllItems[i];if(item!==null){var _3ba={};for(var key in item){if(key!==this._storeRefPropName&&key!==this._itemNumPropName&&key!==this._reverseRefMap&&key!==this._rootItemPropName){var _3bb=this.getValues(item,key);if(_3bb.length==1){_3ba[key]=this._flatten(_3bb[0]);}else{var _3bc=[];for(var j=0;j<_3bb.length;++j){_3bc.push(this._flatten(_3bb[j]));_3ba[key]=_3bc;}}}}_3b8.items.push(_3ba);}}var _3bd=true;return _376.toJson(_3b8,_3bd);},_isEmpty:function(_3be){var _3bf=true;if(lang.isObject(_3be)){var i;for(i in _3be){_3bf=false;break;}}else{if(lang.isArray(_3be)){if(_3be.length>0){_3bf=false;}}}return _3bf;},save:function(_3c0){this._assert(!this._saveInProgress);this._saveInProgress=true;var self=this;var _3c1=function(){self._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};self._saveInProgress=false;if(_3c0&&_3c0.onComplete){var _3c2=_3c0.scope||_377.global;_3c0.onComplete.call(_3c2);}};var _3c3=function(err){self._saveInProgress=false;if(_3c0&&_3c0.onError){var _3c4=_3c0.scope||_377.global;_3c0.onError.call(_3c4,err);}};if(this._saveEverything){var _3c5=this._getNewFileContentString();this._saveEverything(_3c1,_3c3,_3c5);}if(this._saveCustom){this._saveCustom(_3c1,_3c3);}if(!this._saveEverything&&!this._saveCustom){_3c1();}},revert:function(){this._assert(!this._saveInProgress);var _3c6;for(_3c6 in this._pending._modifiedItems){var _3c7=this._pending._modifiedItems[_3c6];var _3c8=null;if(this._itemsByIdentity){_3c8=this._itemsByIdentity[_3c6];}else{_3c8=this._arrayOfAllItems[_3c6];}_3c7[this._storeRefPropName]=this;for(var key in _3c8){delete _3c8[key];}lang.mixin(_3c8,_3c7);}var _3c9;for(_3c6 in this._pending._deletedItems){_3c9=this._pending._deletedItems[_3c6];_3c9[this._storeRefPropName]=this;var _3ca=_3c9[this._itemNumPropName];if(_3c9["backup_"+this._reverseRefMap]){_3c9[this._reverseRefMap]=_3c9["backup_"+this._reverseRefMap];delete _3c9["backup_"+this._reverseRefMap];}this._arrayOfAllItems[_3ca]=_3c9;if(this._itemsByIdentity){this._itemsByIdentity[_3c6]=_3c9;}if(_3c9[this._rootItemPropName]){this._arrayOfTopLevelItems.push(_3c9);}}for(_3c6 in this._pending._deletedItems){_3c9=this._pending._deletedItems[_3c6];if(_3c9["backupRefs_"+this._reverseRefMap]){_375.forEach(_3c9["backupRefs_"+this._reverseRefMap],function(_3cb){var _3cc;if(this._itemsByIdentity){_3cc=this._itemsByIdentity[_3cb.id];}else{_3cc=this._arrayOfAllItems[_3cb.id];}this._addReferenceToMap(_3cc,_3c9,_3cb.attr);},this);delete _3c9["backupRefs_"+this._reverseRefMap];}}for(_3c6 in this._pending._newItems){var _3cd=this._pending._newItems[_3c6];_3cd[this._storeRefPropName]=null;this._arrayOfAllItems[_3cd[this._itemNumPropName]]=null;if(_3cd[this._rootItemPropName]){this._removeArrayElement(this._arrayOfTopLevelItems,_3cd);}if(this._itemsByIdentity){delete this._itemsByIdentity[_3c6];}}this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};return true;},isDirty:function(item){if(item){var _3ce=this.getIdentity(item);return new Boolean(this._pending._newItems[_3ce]||this._pending._modifiedItems[_3ce]||this._pending._deletedItems[_3ce]).valueOf();}else{return !this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems);}},onSet:function(item,_3cf,_3d0,_3d1){},onNew:function(_3d2,_3d3){},onDelete:function(_3d4){},close:function(_3d5){if(this.clearOnClose){if(!this.isDirty()){this.inherited(arguments);}else{throw new Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");}}}});});},"dojox/storage/Provider":function(){define(["dijit","dojo","dojox"],function(_3d6,dojo,_3d7){dojo.provide("dojox.storage.Provider");dojo.declare("dojox.storage.Provider",null,{constructor:function(){},SUCCESS:"success",FAILED:"failed",PENDING:"pending",SIZE_NOT_AVAILABLE:"Size not available",SIZE_NO_LIMIT:"No size limit",DEFAULT_NAMESPACE:"default",onHideSettingsUI:null,initialize:function(){},isAvailable:function(){},put:function(key,_3d8,_3d9,_3da){},get:function(key,_3db){},hasKey:function(key,_3dc){return !!this.get(key,_3dc);},getKeys:function(_3dd){},clear:function(_3de){},remove:function(key,_3df){},getNamespaces:function(){},isPermanent:function(){},getMaximumSize:function(){},putMultiple:function(keys,_3e0,_3e1,_3e2){for(var i=0;i<keys.length;i++){_3d7.storage.put(keys[i],_3e0[i],_3e1,_3e2);}},getMultiple:function(keys,_3e3){var _3e4=[];for(var i=0;i<keys.length;i++){_3e4.push(_3d7.storage.get(keys[i],_3e3));}return _3e4;},removeMultiple:function(keys,_3e5){for(var i=0;i<keys.length;i++){_3d7.storage.remove(keys[i],_3e5);}},isValidKeyArray:function(keys){if(keys===null||keys===undefined||!dojo.isArray(keys)){return false;}return !dojo.some(keys,function(key){return !this.isValidKey(key);},this);},hasSettingsUI:function(){return false;},showSettingsUI:function(){},hideSettingsUI:function(){},isValidKey:function(_3e6){if(_3e6===null||_3e6===undefined){return false;}return /^[0-9A-Za-z_]*$/.test(_3e6);},getResourceList:function(){return [];}});});},"esriviewer/map/MapManager":function(){define(["dojo/_base/declare","dojo/on","dojo/has","dojo/topic","dojo/_base/lang","./base/MapUtils","./base/MapExtentTools","./base/MapLayersTools","./base/MapDisplayWidgets","./base/MapNavDrawTools","./base/MapTimeTools","dijit/layout/ContentPane","../ui/basemap/BasemapGalleryWidget","esri/config","esri/geometry/Extent","esri/map","esri/arcgis/utils"],function(_3e7,on,has,_3e8,lang,_3e9,_3ea,_3eb,_3ec,_3ed,_3ee,_3ef,_3f0,_3f1,_3f2,Map,_3f3){return _3e7([],{__defaultZoomSliderPosition:{x:10,y:120},hasGeometryService:false,maxClientZoom:null,hideLatLongDisplay:false,hideMGRSDisplay:true,disableKeyboardNavigation:true,hideMapScale:false,constructor:function(_3f4){lang.mixin(this,_3f4||{});this.mapInitializationParameters={wrapAround180:true,force3DTransforms:false,navigationMode:"classic"};this.loadViewerConfigurationData();this.initMap();},loadViewerConfigurationData:function(){var _3f5=null;_3e8.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"geometryService",function(_3f6){_3f5=_3f6;});this.hasGeometryService=_3f5!=null;var _3f7=null;_3e8.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_3f8){_3f7=_3f8;});if(_3f7&&lang.isObject(_3f7)){this.mapConfiguration=_3f7;this.basemaps=this.mapConfiguration.basemaps;var _3f9=false;if(this.mapConfiguration.display!=null&&lang.isObject(this.mapConfiguration.display)&&this.mapConfiguration.display.showScale!=null&&this.mapConfiguration.display.showScale==false){this.hideMapScale=true;}if(this.mapConfiguration.disableKeyboardNavigation!=null&&this.mapConfiguration.disableKeyboardNavigation==false){this.disableKeyboardNavigation=false;}if(this.mapConfiguration.maxClientZoom!=null){try{this.maxClientZoom=parseInt(this.mapConfiguration.maxClientZoom,10);}catch(err){}}lang.mixin(this.mapInitializationParameters,this.mapConfiguration.initializationParameters||{});}},initListeners:function(){this.map.on("load",lang.hitch(this,this.handleMapLoaded));this.map.on("update-start",function(){_3e8.publish(VIEWER_GLOBALS.EVENTS.THROBBER.SHOW);});this.map.on("zoom-end",lang.hitch(this,this.handleZoomLevelChanged));this.map.on("update-end",function(){_3e8.publish(VIEWER_GLOBALS.EVENTS.THROBBER.HIDE);});this.map.on("extent-change",lang.hitch(this,this.handleMapExtentChange));_3e8.subscribe(VIEWER_GLOBALS.EVENTS.MAP.GET,lang.hitch(this,this.handleGetMap));on(window,"resize",lang.hitch(this,function(){this.map.resize();}));},handleMapExtentChange:function(evt){if(!this.hideMapScale){this.mapExtentTools.handleMapExtentChanged();}_3e8.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.CHANGED,evt);},handleGetMap:function(_3fa){if(_3fa!=null&&lang.isFunction(_3fa)){_3fa(this.map);}},initMap:function(){var _3fb;_3e8.publish(VIEWER_GLOBALS.EVENTS.MAP.GET_MAP_DIV,function(mD){_3fb=mD;});this.mapDiv=_3fb;new _3ef({region:"center",style:"height: 100%; width: 100%; margin: 0; padding: 0; overflow: hidden;"},this.mapDiv);if(this.mapConfiguration.zoomSlider==null||this.mapConfiguration.zoomSlider.create!=false){var _3fc=this.__defaultZoomSliderPosition.x;var _3fd=this.__defaultZoomSliderPosition.y;if(VIEWER_GLOBALS&&VIEWER_GLOBALS.windowPositioning&&VIEWER_GLOBALS.windowPositioning.zoomSlider&&lang.isObject(VIEWER_GLOBALS.windowPositioning.zoomSlider)){_3fc=VIEWER_GLOBALS.windowPositioning.zoomSlider.x;_3fd=VIEWER_GLOBALS.windowPositioning.zoomSlider.y;var _3fe="left";var _3ff="top";if(VIEWER_GLOBALS.windowPositioning.zoomSlider.alignY!=null&&lang.isString(VIEWER_GLOBALS.windowPositioning.zoomSlider.alignY)){var _400=VIEWER_GLOBALS.windowPositioning.zoomSlider.alignY.toLowerCase();if(_400==="top"||_400==="bottom"){_3ff=_400;}}if(VIEWER_GLOBALS.windowPositioning.zoomSlider.alignX!=null&&lang.isString(VIEWER_GLOBALS.windowPositioning.zoomSlider.alignX)){var _401=VIEWER_GLOBALS.windowPositioning.zoomSlider.alignX.toLowerCase();if(_401==="left"||_401==="right"){_3fe=_401;}}}var _402={width:null,height:"150px"};_402[_3fe]=_3fc+"px";_402[_3ff]=_3fd+"px";if(has("ie")){_402.height="80px";}_3f1.defaults.map.slider=_402;}else{this.mapInitializationParameters.slider=false;}if(this.mapConfiguration.initialExtent!=null&&lang.isObject(this.mapConfiguration.initialExtent)){var _403=this.mapConfiguration.initialExtent;this.initialExtent=new _3f2({xmin:_403.xmin,ymin:_403.ymin,xmax:_403.xmax,ymax:_403.ymax,spatialReference:_403.spatialReference});this.mapInitializationParameters.extent=this.initialExtent;}if(lang.isArray(this.mapConfiguration.lods)){this.mapInitializationParameters.lods=this.mapConfiguration.lods;}if(this.webMapItem){this.map=_3f3.createMap(this.webMapItem,this.mapDiv).then(lang.hitch(this,function(_404){this.mapCreated(_404.map);this.handleMapLoaded();}));}else{var map=new Map(this.mapDiv,this.mapInitializationParameters);if(this.disableKeyboardNavigation){map.disableKeyboardNavigation();}this.mapCreated(map);}},mapCreated:function(map){this.map=map;this.mapDisplayWidgets=new _3ec({map:this.map,mapDiv:this.mapDiv});this.mapExtentTools=new _3ea({mapDisplayWidgets:this.mapDisplayWidgets,map:this.map,mapUtils:this.mapUtils,maxClientZoom:this.maxClientZoom});this.mapLayersTools=new _3eb({map:this.map,basemaps:this.basemaps,mapConfiguration:this.mapConfiguration,webMapItem:this.webMapItem});this.mapUtils=new _3e9({map:this.map,mapDiv:this.mapDiv,operationalLayers:this.mapLayersTools.operationalLayers});this.mapNavDrawTools=new _3ed({map:this.map});this.mapTimeTools=new _3ee({map:this.map});this.initListeners();this.initBasemaps();},initBasemaps:function(){if(this.mapConfiguration.useBasemapGallery==null||this.mapConfiguration.useBasemapGallery!=true){for(var key in this.basemaps){this.mapLayersTools.changeBaseMaps(key);break;}}else{this.basemapGalleryWidget=new _3f0();}},handleMapLoaded:function(){if(this.webMapItem&&this.webMapItem.itemData){this.mapLayersTools.addWebMapOperationalLayers(this.webMapItem);}else{this.mapLayersTools.loadMapConfigurationLayers();}if(this.mapConfiguration.overview==null||this.mapConfiguration.overview.create!=false){require(["esri/dijit/OverviewMap"],lang.hitch(this,function(_405){this.overviewMapDijit=new _405({attachTo:"bottom-right",color:"#D84E13",opacity:0.4,map:this.map,visible:true,width:225,height:175});this.overviewMapDijit.startup();}));}_3e8.publish(VIEWER_GLOBALS.EVENTS.MAP.LOADED,this.map);this.onMapLoaded();},handleZoomLevelChanged:function(evt){if(evt==null){return;}var _406=evt.extent;var _407=evt.zoomFactor;var _408=evt.anchor;var _409=evt.level;_3e8.publish(VIEWER_GLOBALS.EVENTS.MAP.LEVEL.CHANGED,_406,_407,_408,_409);},onMapLoaded:function(){}});});},"esriviewer/util/GeometryUtils":function(){define(["dojo/_base/declare"],function(_40a){return _40a([],{polygonIntersectsPoint:function(pt,_40b){var ext=_40b.getExtent();return (pt.x>=ext.xmin&&pt.y>=ext.ymin&&pt.x<=ext.xmax&&pt.y<=ext.ymax);},ddToDMSString:function(_40c){var _40d;var _40e=false;if(_40c<0){_40e=true;_40c=Math.abs(_40c);}_40d=Math.floor(_40c)+""+Math.floor((_40c-Math.floor(_40c))*60)+"'"+Math.floor(((_40c-Math.floor(_40c))*60-Math.floor((_40c-Math.floor(_40c))*60))*60)+"\"";if(_40e){_40d="-"+_40d;}return _40d;}});});},"esriviewer/ui/weather/conditions/WeatherWidgetWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","../../window/WindowWidget"],function(_40f,lang,_410,_411){return _40f([_411],{defaultPositioning:{x:400,y:125},windowWidth:"350px",windowHeaderText:"Weather",windowIconAltText:"Weather",windowIconClass:"commonIcons16 weather",positioningParamName:"weather",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/weather/conditions/WeatherWidget"],lang.hitch(this,function(_412){this.weatherWidget=new _412();this.setContent(this.weatherWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_410.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.WEATHER.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_410.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.WEATHER.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_410.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.WEATHER.TOGGLE,lang.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.weatherWidget){this.weatherWidget.clearDraw();}}});});},"esriviewer/ui/draw/configure/geometry/ConfigurePolygonWidget":function(){define(["dojo/_base/declare","dojo/text!./template/ConfigurePolygonTemplate.html","dojo/_base/lang","dojo/_base/Color","./model/ConfigurePolygonViewModel","./BaseGeometryConfigurationWidget","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol"],function(_413,_414,lang,_415,_416,_417,_418,_419){return _413([_417],{defaultTransparency:50,templateString:_414,postCreate:function(){this.inherited(arguments);this.viewModel=new _416();this.viewModel.fillColorActive.subscribe(lang.hitch(this,this.handleFillColorToggled));this.viewModel.selectedAngle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedFillStyle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedOutlineStyle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedAngle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedOutlineWidth.subscribe(lang.hitch(this,this.processChange));this.outlineColor=new _415([255,0,0,this.getTransparency()/100]);this.fillColor=new _415([255,0,0,this.getTransparency()/100]);this.colorPicker.set("value",this.outlineColor.toHex());ko.applyBindings(this.viewModel,this.domNode);},handleTransparencyChanged:function(){var _41a=this.getTransparency()/100;this.outlineColor=new _415([this.outlineColor.r,this.outlineColor.g,this.outlineColor.b,_41a]);this.fillColor=new _415([this.fillColor.r,this.fillColor.g,this.fillColor.b,_41a]);this.inherited(arguments);},handleFillColorToggled:function(_41b){if(_41b){this.colorPicker.set("value",this.fillColor.toHex());}else{this.colorPicker.set("value",this.outlineColor.toHex());}},handleColorPickerChanged:function(){if(this.viewModel.outlineColorActive()){this.outlineColor=this.getColor();}else{this.fillColor=this.getColor();}this.processChange();},processChange:function(){this.onChange(this.getSymbol());},getSymbol:function(){return new _418(this.viewModel.selectedFillStyle(),new _419(this.viewModel.selectedOutlineStyle(),this.outlineColor,this.viewModel.selectedOutlineWidth()),this.fillColor);}});});},"esriviewer/ui/draw/configure/ConfigureDrawWidget":function(){define(["dojo/_base/declare","dojo/text!./template/ConfigureDrawTemplate.html","dojo/_base/lang","../../base/UITemplatedWidget","./model/ConfigureDrawViewModel","./geometry/ConfigurePointWidget","./geometry/ConfigureLineWidget","./geometry/ConfigureTextWidget","./geometry/ConfigurePolygonWidget"],function(_41c,_41d,lang,_41e,_41f,_420,_421,_422,_423){return _41c([_41e],{showConfigureGeometryIcons:true,showTextIcon:true,showEnvelopeIcon:true,templateString:_41d,postCreate:function(){this.inherited(arguments);this.viewModel=new _41f();this.viewModel.showEnvelopeIcon(this.showEnvelopeIcon);this.viewModel.showTextIcon(this.showTextIcon);this.viewModel.showConfigureGeometryIcons(this.showConfigureGeometryIcons);ko.applyBindings(this.viewModel,this.domNode);this.createConfigurationWidgets();},createConfigurationWidgets:function(){this.pointConfigurationWidget=new _420();this.pointConfigurationWidget.placeAt(this.configurePointWidgetContainer);this.pointConfigurationWidget.on("change",lang.hitch(this,this.handlePointSymbolChanged));this.lineConfigurationWidget=new _421();this.lineConfigurationWidget.placeAt(this.configureLineWidgetContainer);this.lineConfigurationWidget.on("change",lang.hitch(this,this.handleLineSymbolChanged));this.rectangleConfigurationWidget=new _423();this.rectangleConfigurationWidget.placeAt(this.configureRectangleWidgetContainer);this.rectangleConfigurationWidget.on("change",lang.hitch(this,this.handleRectangleSymbolChanged));this.configureTextWidget=new _422();this.configureTextWidget.placeAt(this.configureTextWidgetContainer);this.configureTextWidget.on("change",lang.hitch(this,this.handleTextSymbolChanged));this.configurePolygonWidget=new _423();this.configurePolygonWidget.placeAt(this.configurePolygonWidgetContainer);this.configurePolygonWidget.on("change",lang.hitch(this,this.handlePolygonSymbolChanged));},handlePointSymbolChanged:function(_424){this.onPointSymbolChanged(_424);},handleLineSymbolChanged:function(_425){this.onLineSymbolChanged(_425);},handlePolygonSymbolChanged:function(_426){this.onPolygonSymbolChanged(_426);},handleTextSymbolChanged:function(_427){this.onTextSymbolChanged(_427);},handleRectangleSymbolChanged:function(_428){this.onRectangleSymbolChanged(_428);},onPointSymbolChanged:function(_429){},onLineSymbolChanged:function(_42a){},onPolygonSymbolChanged:function(_42b){},onTextSymbolChanged:function(_42c){},onRectangleSymbolChanged:function(_42d){}});});},"esriviewer/ui/draw/configure/geometry/ConfigureLineWidget":function(){define(["dojo/_base/declare","dojo/text!./template/ConfigureLineTemplate.html","dojo/_base/lang","./model/ConfigureLineViewModel","./BaseGeometryConfigurationWidget","esri/symbols/SimpleLineSymbol"],function(_42e,_42f,lang,_430,_431,_432){return _42e([_431],{templateString:_42f,postCreate:function(){this.inherited(arguments);this.viewModel=new _430();this.viewModel.selectedLineStyle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedWidth.subscribe(lang.hitch(this,this.processChange));ko.applyBindings(this.viewModel,this.domNode);},processChange:function(){this.onChange(this.getSymbol());},getSymbol:function(){return new _432(this.viewModel.selectedLineStyle(),this.getColor(),this.viewModel.selectedWidth());}});});},"esriviewer/ui/layers/LayersTocWidget":function(){define(["dojo/_base/declare","dojo/text!./template/LayersTocWidgetTemplate.html","dojo/_base/array","dojo/_base/lang","dojo/dom-style","dojo/dom-construct","dijit/Tree","dijit/tree/ForestStoreModel","dojo/data/ItemFileWriteStore","./base/LayersTocWidgetContextMenu","../base/UITemplatedWidget","esri/layers/ArcGISTiledMapServiceLayer"],function(_433,_434,_435,lang,_436,_437,Tree,_438,_439,_43a,_43b,_43c){return _433([_43b],{templateString:_434,constructor:function(){this.treeStore=new _439({data:{items:[],identifier:"id",label:"label"}});this.treeModel=new _438({store:this.treeStore,openOnClick:true});this.tree=new Tree({model:this.treeModel,getIconClass:lang.hitch(this,this.getTreeIcon),showRoot:false});_436.set(this.tree.domNode,"height","100%");this.treeContextMenu=new _43a({tree:this.tree});this.treeContextMenu.bindNodeToNoContentMenu(this.tree.rootNode.domNode);},postCreate:function(){this.inherited(arguments);_437.place(this.tree.domNode,this.tocContainer);},initListeners:function(){this.tree.on("click",lang.hitch(this,this.treeClickHandler));},getNodeFromItem:function(item){var _43d=item.id[0];return this.tree._itemNodesMap[_43d][0];},getTreeIcon:function(item,_43e){if(item.root){return "tocIcons layerService";}var _43f=null;var _440=null;if(item.layer){_43f=this.treeStore.getValue(item,"layer");}if(item.layerId){_440=this.treeStore.getValue(item,"layerId");}if(_43f){if(_440!=null){var _441=this.treeStore.getValue(item,"info");if(lang.isArray(_441.subLayerIds)&&_441.subLayerIds.length>0){if(_43e){return "tocIcons folderOpen";}else{return "tocIcons folderClosed";}}else{var _442=_435.indexOf(_43f.visibleLayers,_440)>-1;if(lang.isObject(_441.metadata)){var _443=_441.metadata;if(_443.geometryType!=""){if(_443.geometryType==VIEWER_GLOBALS.ESRI_GEOMETRY_TYPES.POINT){if(_43f.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.TILED_MAP_SERVICE){return "tocIcons layerPoint";}if(_442){return "tocIcons layerPointChecked";}else{return "tocIcons layerPointUnchecked";}}else{if(_443.geometryType==VIEWER_GLOBALS.ESRI_GEOMETRY_TYPES.LINE){if(_43f.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.TILED_MAP_SERVICE){return "tocIcons layerLine";}if(_442){return "tocIcons layerLineChecked";}else{return "tocIcons layerLineUnchecked";}}else{if(_443.geometryType==VIEWER_GLOBALS.ESRI_GEOMETRY_TYPES.POLYGON){if(_43f.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.TILED_MAP_SERVICE){return "tocIcons layerPolygon";}if(_442){return "tocIcons layerPolygonChecked";}else{return "tocIcons layerPolygonUnchecked";}}else{if(_43f.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.TILED_MAP_SERVICE){return "tocIcons layerGeneric";}if(_442){return "layerGenericChecked";}else{return "layerGenericUnchecked";}}}}}else{if(_443.type==VIEWER_GLOBALS.ESRI_LAYER_TYPES.RASTER){if(_43f instanceof _43c){return "tocIcons layerRasterIcon";}if(_442){return "tocIcons layerRasterIconChecked";}else{return "tocIcons layerRasterIconUnchecked";}}else{return _442?"tocIcons layerGenericChecked":"tocIcons layerGenericUnchecked";}}}else{if(_43f.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.IMAGE_SERVICE){return "genericLayerIcon";}else{return _442?"tocIcons layerGenericChecked":"tocIcons layerGenericUnchecked";}}}}else{if(_43f.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.IMAGE_SERVICE){if(_43f.visible){return "tocIcons imageServiceChecked";}else{return "tocIcons imageServiceUnchecked";}}else{if(_43f.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.DYNAMIC_MAP_SERVICE){if(_43f.visible){return "tocIcons globeChecked";}else{return "tocIcons globeUnchecked";}}else{if(_43f.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.TILED_MAP_SERVICE){if(_43f.visible){return "tocIcons layerRasterChecked";}else{return "tocIcons layerRasterUnchecked";}}else{if(_43f.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.FEATURE_LAYER){if(_43f.visible){return "tocIcons layerGenericChecked";}else{return "tocIcons layerGenericUnchecked";}}else{if(_43f.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.GRAPHICS_LAYER){if(_43f.visible){return "tocIcons graphicsLayerChecked";}else{return "tocIcons graphicsLayerUnchecked";}}else{if(_43f.visible){return "tocIcons layerGenericChecked";}else{return "tocIcons layerGenericUnchecked";}}}}}}}}return "tocIcons layerGeneric";},addTreeNode:function(item,_444){var _445={children:[]};_445.parent=_444;if(_444.children!=null){_445.attribute="children";}return this.treeStore.newItem(item,_445);},addLayer:function(_446){if(_446==null||!_446.isOperationalLayer){return;}var _447=VIEWER_UTILS.getLayerNameFromLayer(_446);var _448={label:_447,serviceId:_446.id,layer:_446,id:VIEWER_UTILS.generateUUID()};if(lang.isArray(_446.layerInfos)&&_446.layerInfos.length>0){_448.children=[];}var _449=this.addTreeNode(_448,this.tree.rootNode);var _44a=this.getNodeFromItem(_449);if(!(_446.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.GRAPHICS_LAYER)||(_446.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.FEATURE_LAYER)){this.treeContextMenu.bindNodeToServerMenu(_44a.domNode);}else{this.treeContextMenu.bindNodeToGraphicsLayerMenu(_44a.domNode);}this.checkForChildLayers(_446,_449);},checkForChildLayers:function(_44b,_44c){var _44d={};var _44e=_44b.layerInfos;if(lang.isArray(_44e)){var _44f=_44c;var _450;for(var i=0;i<_44e.length;i++){_450=false;var info=_44e[i];if(info==null){continue;}var name=info.name;var _451={id:VIEWER_UTILS.generateUUID(),label:name,layerId:info.id,serviceId:_44b.id,layer:_44b,info:info};if(lang.isArray(info.subLayerIds)){_451.children=[];_450=true;}if(info.parentLayerId>-1){_44f=_44d[info.parentLayerId];if(_44f==null){return;}}var _452=this.addTreeNode(_451,_44f);var _453=this.getNodeFromItem(_452);if(_450){_44d[info.id]=_452;this.treeContextMenu.bindNodeToGroupMenu(_453.domNode);}else{this.treeContextMenu.bindNodeToLayerMenu(_453.domNode);}}}},removeLayer:function(_454){if(_454==null){return;}var _455;this.treeStore.fetch({query:{serviceId:_454.id},queryOptions:{deep:false},onComplete:lang.hitch(this,this.deleteNodes)});},deleteNodes:function(_456){for(var i=0;i<_456.length;i++){this.deleteNode(_456[i]);}},deleteChildNodes:function(item){var _457=this.treeStore.getValue(item,"isPersistedToCookie");if(_457){var url=this.treeStore.getValue(item,"url");}var node=this.getNodeFromItem(item);var _458=node.getChildren();for(var i=0;i<_458.length;i++){this.deleteNode(_458[i].item);}this.treeStore.save();},deleteNode:function(item){this.deleteChildNodes(item);this.treeStore.deleteItem(item);this.treeStore.save();},treeClickHandler:function(item,node,_459){var _45a=null;var _45b=null;if(item.layer){_45a=this.treeStore.getValue(item,"layer");}if(item.layerId){_45b=this.treeStore.getValue(item,"layerId");}if(_45a instanceof _43c&&item.layerId!=null){return;}if(_45a&&_45b==null){if(_45a.visible){_45a.hide();}else{_45a.show();}}else{if(_45a&&_45b!=null){this.toggleDynamicSubLayerItem(_45a,_45b);this.processVisibleLayers(_45a);}}node._updateItemClasses(item);},processVisibleLayers:function(_45c){if(_45c.visibleLayers.length==0){_45c.setVisibleLayers([-1]);}else{var _45d=VIEWER_UTILS.sortIntegerArray(_45c.visibleLayers);_45c.setVisibleLayers(_45d);}},toggleDynamicSubLayerItem:function(_45e,_45f){if(_45e==null){return;}var _460=_435.indexOf(_45e.visibleLayers,_45f)>-1;if(_460){var _461=_435.indexOf(_45e.visibleLayers,_45f);if(_461>-1){_45e.visibleLayers.splice(_461,1);}}else{_45e.visibleLayers.push(_45f);}}});});},"esriviewer/map/base/MapNavDrawTools":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/connect","dojo/_base/lang","dojox/timing","dojo/_base/Color","esri/toolbars/draw","esri/graphic","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Extent","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol"],function(_462,_463,con,lang,_464,_465,Draw,_466,_467,_468,_469,_46a,_46b,_46c){return _462([],{CROSSHAIR:"crosshair",DEFAULT:"default",MOVE:"move",POINTER:"pointer",currentGraphicFlashCount:0,maxGraphicFlashCount:3,currentFlashGraphicVisible:false,constructor:function(_46d){lang.mixin(this,_46d);this.initListeners();this.createDrawToolbar();},createDrawToolbar:function(){this.drawToolbar=new Draw(this.map,{showTooltips:true});},initListeners:function(){_463.subscribe(VIEWER_GLOBALS.EVENTS.MAP.FLASH.POINT,lang.hitch(this,this.flashPoint));_463.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.DRAW_CANCEL,lang.hitch(this,this.handleDrawCancel));_463.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.RECTANGLE_INPUT,lang.hitch(this,this.handleUserRectangleDrawInput));_463.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.POLYLINE_INPUT,lang.hitch(this,this.handleUserPolyLineDrawInput));_463.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.LINE_INPUT,lang.hitch(this,this.handleUserLineDrawInput));_463.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.POINT_INPUT,lang.hitch(this,this.handleUserPointClickInput));_463.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.POLYGON_INPUT,lang.hitch(this,this.handleUserPolygonClickInput));_463.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.FREEHAND_POLYLINE_INPUT,lang.hitch(this,this.handleUserFreehandLineDrawInput));_463.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.FREEHAND_POLYGON_INPUT,lang.hitch(this,this.handleUserFreehandPolygonDrawInput));_463.subscribe(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.ADD,lang.hitch(this,this.handleAddGraphic));_463.subscribe(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.REMOVE,lang.hitch(this,this.removeGraphic));_463.subscribe(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.CENTER_AND_FLASH,lang.hitch(this,this.handleCenterAndFlashGraphic));_463.subscribe(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.CENTER_ON_MAP,lang.hitch(this,this.centerMapAtGraphic));},handleAddGraphic:function(_46e){if(this.map&&this.map.graphics){this.map.graphics.add(_46e);}},removeGraphic:function(_46f){if(this.map&&this.map.graphics){this.map.graphics.remove(_46f);}},handleDrawCancel:function(){this.drawToolbar.deactivate();if(this._drawEventHandle){con.disconnect(this._drawEventHandle);this._drawEventHandle=null;_463.publish(VIEWER_GLOBALS.EVENTS.DRAW.DRAW_CANCELLED);}this.map.enableMapNavigation();this.map.setMapCursor(this.DEFAULT);},handleUserRectangleDrawInput:function(_470,_471){_463.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_RECTANGLE);this._userRectangleDrawInput(_470,_471);},handleUserLineDrawInput:function(_472,_473){_463.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_LINE);this._userLineDrawInput(_472,_473);},handleUserPolyLineDrawInput:function(_474,_475){_463.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_POLYLINE);this._userPolylineDrawInput(_474,_475);},handleUserPointClickInput:function(_476,_477){_463.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_POINT);this._userPointDrawInput(_476,_477);},handleUserPolygonClickInput:function(_478,_479){_463.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_POLYGON);this._userPolygonDrawInput(_478,_479);},handleUserFreehandLineDrawInput:function(_47a,_47b){_463.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_FREEHAND_LINE);this._userFreehandLineDrawInput(_47a,_47b);},handleUserFreehandPolygonDrawInput:function(_47c,_47d){_463.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_FREEHAND_POLYGON);this._userFreehandPolygonDrawInput(_47c,_47d);},_userFreehandPolygonDrawInput:function(_47e,_47f){this.userDrawCancel();var _480=_47f&&_47f.cursor?_47f.cursor:this.CROSSHAIR;this.map.setMapCursor(_480);this.activateDraw(Draw.FREEHAND_POLYGON,_47e,_47f);},_userFreehandLineDrawInput:function(_481,_482){this.userDrawCancel();var _483=_482&&_482.cursor?_482.cursor:this.CROSSHAIR;this.map.setMapCursor(_483);this.activateDraw(Draw.FREEHAND_POLYLINE,_481,_482);},_userRectangleDrawInput:function(_484,_485){this.userDrawCancel();var _486=_485&&_485.cursor?_485.cursor:this.CROSSHAIR;this.map.setMapCursor(_486);this.activateDraw(Draw.EXTENT,_484,_485);},_userLineDrawInput:function(_487,_488){this.userDrawCancel();var _489=_488&&_488.cursor?_488.cursor:this.CROSSHAIR;this.map.setMapCursor(_489);this.activateDraw(Draw.LINE,_487,_488);},_userPolylineDrawInput:function(_48a,_48b){this.userDrawCancel();var _48c=_48b&&_48b.cursor?_48b.cursor:this.CROSSHAIR;this.map.setMapCursor(_48c);this.activateDraw(Draw.POLYLINE,_48a,_48b);},_userPointDrawInput:function(_48d,_48e){this.userDrawCancel();var _48f=_48e&&_48e.cursor?_48e.cursor:this.POINTER;this.map.setMapCursor(_48f);this.activateDraw(Draw.POINT,_48d,_48e);},_userPolygonDrawInput:function(_490,_491){this.userDrawCancel();var _492=_491&&_491.cursor?_491.cursor:this.CROSSHAIR;this.map.setMapCursor(_492);this.activateDraw(Draw.POLYGON,_490,_491);},activateDraw:function(type,_493,_494){if(_494==null){_494={};}if(_493!=null&&lang.isFunction(_493)){this._drawEventHandle=con.connect(this.drawToolbar,"onDrawEnd",lang.hitch(this,this._internalDrawComplete,_493));}_494.showTooltips=_494.showTooltips==null?true:_494.showTooltips;this.drawToolbar.activate(type,_494);this.map.disableMapNavigation();_463.publish(VIEWER_GLOBALS.EVENTS.DRAW.DRAW_STARTED);},_internalDrawComplete:function(_495,_496){_463.publish(VIEWER_GLOBALS.EVENTS.DRAW.DRAW_COMPLETE);this.drawToolbar.deactivate();this.map.setMapCursor(this.DEFAULT);this.map.enableMapNavigation();if(_495!=null&&lang.isFunction(_495)){_495(_496);}},userDrawCancel:function(){this.drawToolbar.deactivate();if(this._drawEventHandle){con.disconnect(this._drawEventHandle);this._drawEventHandle=null;_463.publish(VIEWER_GLOBALS.EVENTS.DRAW.DRAW_CANCELLED);}this.map.setMapCursor(this.DEFAULT);},handleCenterAndFlashGraphic:function(_497){this.centerMapAtGraphic(_497);this.flashGraphic(_497);},centerMapAtGraphic:function(_498){var _499=this.getGraphicCenter(_498);if(_499){this.centerMapAtPoint(_499);}},centerMapAtPoint:function(_49a){this.map.centerAt(_49a);},flashGraphic:function(_49b){if(_49b==null||!(_49b instanceof _466)||this.graphicFlashInProgress){return;}this.currentGraphicFlashCount=0;this.currentFlashGraphic=_49b;this.graphicFlashTimer=new _464.Timer(500);var _49c=_49b.visible;_49b.hide();this.graphicFlashTimer.onTick=lang.hitch(this,function(_49d){try{if(this.currentGraphicFlashCount==this.maxGraphicFlashCount){this.currentGraphicFlashCount=0;this.graphicFlashTimer.stop();this.graphicFlashInProgress=false;if(_49d){this.currentFlashGraphic.show();}else{this.currentFlashGraphic.hide();}}else{if(this.currentFlashGraphic.visible){if(this.currentFlashGraphic!=null){this.currentFlashGraphic.hide();}}else{if(this.currentFlashGraphic!=null){this.currentFlashGraphic.show();this.currentGraphicFlashCount++;}}}}catch(err){}},_49c);this.graphicFlashInProgress=true;this.graphicFlashTimer.start();},getGraphicCenter:function(_49e){if(_49e==null){return;}if(_49e.geometry==null){return;}var _49f=_49e.geometry;if(_49f instanceof _467){return _49f;}else{if(_49f instanceof _468||_49f instanceof _469){var _4a0=_49f.getExtent();return _4a0.getCenter();}else{if(_49f instanceof _46a){return _49f.getCenter();}}}return null;},flashPoint:function(pt,_4a1){if(_4a1==null){_4a1=20;}var _4a2;if(pt==null||!(pt instanceof _467)){return;}var _4a3=new _46b(_46b.STYLE_X,2,new _46c(_46c.STYLE_SOLID,new _465([255,0,0])));_4a2=new _466(pt,_4a3);var opac=1;setTimeout(function(){_463.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.ADD,_4a2);var i_id=setInterval(function(){_4a3.setColor(new _465([255,0,0,opac]));_4a2.setSymbol(_4a3);if(opac<0.01){clearInterval(i_id);_463.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.REMOVE,_4a2);}opac-=0.01;},_4a1);},700);}});});},"dijit/ColorPalette":function(){define(["require","dojo/text!./templates/ColorPalette.html","./_Widget","./_TemplatedMixin","./_PaletteMixin","./hccss","dojo/i18n","dojo/_base/Color","dojo/_base/declare","dojo/dom-construct","dojo/string","dojo/i18n!dojo/nls/colors","dojo/colors"],function(_4a4,_4a5,_4a6,_4a7,_4a8,has,i18n,_4a9,_4aa,_4ab,_4ac){var _4ad=_4aa("dijit.ColorPalette",[_4a6,_4a7,_4a8],{palette:"7x10",_palettes:{"7x10":[["white","seashell","cornsilk","lemonchiffon","lightyellow","palegreen","paleturquoise","lightcyan","lavender","plum"],["lightgray","pink","bisque","moccasin","khaki","lightgreen","lightseagreen","lightskyblue","cornflowerblue","violet"],["silver","lightcoral","sandybrown","orange","palegoldenrod","chartreuse","mediumturquoise","skyblue","mediumslateblue","orchid"],["gray","red","orangered","darkorange","yellow","limegreen","darkseagreen","royalblue","slateblue","mediumorchid"],["dimgray","crimson","chocolate","coral","gold","forestgreen","seagreen","blue","blueviolet","darkorchid"],["darkslategray","firebrick","saddlebrown","sienna","olive","green","darkcyan","mediumblue","darkslateblue","darkmagenta"],["black","darkred","maroon","brown","darkolivegreen","darkgreen","midnightblue","navy","indigo","purple"]],"3x4":[["white","lime","green","blue"],["silver","yellow","fuchsia","navy"],["gray","red","purple","black"]]},templateString:_4a5,baseClass:"dijitColorPalette",_dyeFactory:function(_4ae,row,col,_4af){return new this._dyeClass(_4ae,row,col,_4af);},buildRendering:function(){this.inherited(arguments);this._dyeClass=_4aa(_4ad._Color,{palette:this.palette});this._preparePalette(this._palettes[this.palette],i18n.getLocalization("dojo","colors",this.lang));}});_4ad._Color=_4aa("dijit._Color",_4a9,{template:"<span class='dijitInline dijitPaletteImg'>"+"<img src='${blankGif}' alt='${alt}' title='${title}' class='dijitColorPaletteSwatch' style='background-color: ${color}'/>"+"</span>",hcTemplate:"<span class='dijitInline dijitPaletteImg' style='position: relative; overflow: hidden; height: 12px; width: 14px;'>"+"<img src='${image}' alt='${alt}' title='${title}' style='position: absolute; left: ${left}px; top: ${top}px; ${size}'/>"+"</span>",_imagePaths:{"7x10":_4a4.toUrl("./themes/a11y/colors7x10.png"),"3x4":_4a4.toUrl("./themes/a11y/colors3x4.png")},constructor:function(_4b0,row,col,_4b1){this._title=_4b1;this._row=row;this._col=col;this.setColor(_4a9.named[_4b0]);},getValue:function(){return this.toHex();},fillCell:function(cell,_4b2){var html=_4ac.substitute(has("highcontrast")?this.hcTemplate:this.template,{color:this.toHex(),blankGif:_4b2,alt:this._title,title:this._title,image:this._imagePaths[this.palette].toString(),left:this._col*-20-5,top:this._row*-20-5,size:this.palette=="7x10"?"height: 145px; width: 206px":"height: 64px; width: 86px"});_4ab.place(html,cell);}});return _4ad;});},"esriviewer/ui/base/UIWidget":function(){define(["dojo/_base/declare","dijit/_Widget","dojo/_base/lang","dojo/_base/connect","dojo/dom-class","dojo/dom-construct","dojo/dom-style","../../base/ConfigurationEntryMixin"],function(_4b3,_4b4,lang,con,_4b5,_4b6,_4b7,_4b8){return _4b3([_4b4,_4b8],{defaultPositioning:{x:0,y:0},animateOnPlace:true,animate:false,animation:"fadeIn animated",positioningParamName:null,isPositionedByConfig:false,LEFT_LOWER:"left",RIGHT_LOWER:"right",TOP_LOWER:"top",BOTTOM_LOWER:"bottom",constructor:function(){this.creationPositioning=lang.mixin({},this.defaultPositioning);this.connects=[];this.subscribes=[];},postCreate:function(){this.loadViewerConfigurationData();this.initListeners();if(this.isPositionedByConfig){this.positionNode();}},initListeners:function(){},destroy:function(){this.clearSubscribes();this.clearConnects();},placeAt:function(node){_4b6.place(this.domNode,node);if(this.animate&&this.animateOnPlace){this._animateWidget();}return this;},clearSubscribes:function(){if(lang.isArray(this.subscribes)){for(var i=0;i<this.subscribes.length;i++){this.subscribes[i].remove();}}},positionNode:function(){_4b7.set(this.domNode,"position","absolute");var _4b9=VIEWER_GLOBALS.windowPositioning[this.positioningParamName];var _4ba=(_4b9!=null&&_4b9.x!=null)?_4b9.x:this.defaultPositioning.x;var _4bb=(_4b9!=null&&_4b9.y!=null)?_4b9.y:this.defaultPositioning.y;var _4bc="left";var _4bd="top";if(_4b9){if(_4b9.alignY!=null&&lang.isString(_4b9.alignY)){var _4be=_4b9.alignY.toLowerCase();if(_4be===this.TOP_LOWER||_4be===this.BOTTOM_LOWER){_4bd=_4be;}}if(_4b9.alignX!=null&&lang.isString(_4b9.alignX)){var _4bf=_4b9.alignX.toLowerCase();if(_4bf===this.LEFT_LOWER||_4bf===this.RIGHT_LOWER){_4bc=_4bf;}}}_4b7.set(this.domNode,_4bc,_4ba+"px");_4b7.set(this.domNode,_4bd,_4bb+"px");this.creationPositioning={x:_4ba,y:_4bb,alignX:_4bc,alignY:_4bd};},clearConnects:function(){if(lang.isArray(this.connects)){for(var i=0;i<this.connects.length;i++){if(this.connects[i].remove!=null&&lang.isFunction(this.connects[i].remove)){this.connects[i].remove();}else{con.disconnect(this.connects[i]);}}}},show:function(){_4b7.set(this.domNode,"display","block");},hide:function(){_4b7.set(this.domNode,"display","none");},hidePopups:function(){},_animateWidget:function(){this._removeAnimationClasses();_4b5.add(this.domNode,this.animation);},_removeAnimationClasses:function(){_4b5.remove(this.domNode,this.animation);},_handleContentAnimation:function(_4c0,node){if(_4c0){_4b5.add(node,VIEWER_GLOBALS.ANIMATIONS.FADE.IN);}else{_4b5.remove(node,VIEWER_GLOBALS.ANIMATIONS.FADE.IN);}}});});},"dojox/storage":function(){define(["./storage/_common"],function(){});},"dojox/main":function(){define(["dojo/_base/kernel"],function(dojo){return dojo.dojox;});},"esriviewer/ui/measure/MeasureWidget":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/topic","../base/UITemplatedWidget","dojo/text!./template/MeasureWidgetTemplate.html","./model/MeasureWidgetViewModel","../draw/base/MapDrawSupport","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleMarkerSymbol"],function(_4c1,lang,_4c2,_4c3,_4c4,_4c5,_4c6,_4c7,_4c8,_4c9,_4ca,_4cb,_4cc,_4cd){return _4c1([_4c4,_4c7],{measureFloatPrecision:2,locationFloatPrecision:3,templateString:_4c5,AREA:"area",DISTANCE:"distance",LOCATION:"location",constructor:function(){this.currentGeometry=null;this.currentGraphic=null;},postCreate:function(){this.distanceResponseCallback=lang.hitch(this,this.handleDistanceResponse);this.areaResponseCallback=lang.hitch(this,this.handleAreaResponse);this.locationResponseCallback=lang.hitch(this,this.handleLocationResponse);this.initSymbology();this.viewModel=new _4c6();this.viewModel.areaActive.subscribe(lang.hitch(this,this.handleAreaActiveChanged));this.viewModel.distanceActive.subscribe(lang.hitch(this,this.handleDistanceActiveChanged));this.viewModel.locationActive.subscribe(lang.hitch(this,this.handleLocationActiveChanged));this.viewModel.selectedAreaUnits.subscribe(lang.hitch(this,this.handleSelectedAreaUnitsChanged));this.viewModel.selectedDistanceUnits.subscribe(lang.hitch(this,this.handleSelectedDistanceUnitsChanged));this.viewModel.selectedLocationUnits.subscribe(lang.hitch(this,this.handleSelectedLocationUnitsChanged));ko.applyBindings(this.viewModel,this.domNode);},handleSelectedLocationUnitsChanged:function(_4ce){if(this.currentGeometry&&this.currentGeometry instanceof _4c8){_4c3.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_LAT_LON,this.currentGeometry,this.locationResponseCallback);}},handleSelectedDistanceUnitsChanged:function(_4cf){if(this.currentGeometry&&this.currentGeometry instanceof _4c9){_4c3.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_DISTANCE,this.currentGeometry,_4cf,this.distanceResponseCallback);}},handleSelectedAreaUnitsChanged:function(_4d0){if(this.currentGeometry&&this.currentGeometry instanceof _4ca){_4c3.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_AREA,this.currentGeometry,_4d0,this.areaResponseCallback);}},initSymbology:function(){this.polygonSymbol=new _4cb(_4cb.STYLE_SOLID,new _4cc(_4cc.STYLE_SOLID,new _4c2([0,0,255]),1),new _4c2([0,0,255,0]));this.pointSymbol=new _4cd(_4cd.STYLE_X,1,new _4cc(_4cc.STYLE_SOLID,new _4c2("blue")));this.lineSymbol=new _4cc(_4cc.STYLE_SOLID,new _4c2([0,0,255]),1);},handleAreaActiveChanged:function(_4d1){if(_4d1){this.handlePolygonDraw();this.activeMode=this.AREA;}else{if(this.activeMode==this.AREA){this.activeMode="";this.clearCurrentGraphic();this.clearDraw();}}},handleDistanceActiveChanged:function(_4d2){if(_4d2){this.handleLineDraw();this.activeMode=this.DISTANCE;}else{if(this.activeMode==this.DISTANCE){this.activeMode="";this.clearCurrentGraphic();this.clearDraw();}}},handleLocationActiveChanged:function(_4d3){if(_4d3){this.handlePointDraw();this.activeMode=this.LOCATION;}else{if(this.activeMode==this.LOCATION){this.activeMode="";this.clearCurrentGraphic();this.clearDraw();}}},clearDraw:function(){this.inherited(arguments);this.viewModel.areaActive(false);this.viewModel.distanceActive(false);this.viewModel.locationActive(false);this.viewModel.measureMethodText("");this.viewModel.unitsText("");this.viewModel.resultsText("");_4c3.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.DRAW_CANCEL);},clearCurrentGraphic:function(){if(this.currentGraphic){_4c3.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.REMOVE,this.currentGraphic);this.currentGraphic=null;}},handleLineDraw:function(){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_LINE);},handlePolygonDraw:function(){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON);},handlePointDraw:function(){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT);},geometryAdded:function(_4d4){this.currentGeometry=_4d4;this.inherited(arguments);if(this.viewModel.locationActive()){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT);_4c3.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_LAT_LON,_4d4,this.locationResponseCallback);}if(this.viewModel.areaActive()){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON);_4c3.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_AREA,_4d4,this.viewModel.selectedAreaUnits(),this.areaResponseCallback);}if(this.viewModel.distanceActive()){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_LINE);_4c3.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_DISTANCE,_4d4,this.viewModel.selectedDistanceUnits(),this.distanceResponseCallback);}},handleDistanceResponse:function(_4d5){if(_4d5==null||!lang.isObject(_4d5)||_4d5.lengths==null||!lang.isArray(_4d5.lengths)||_4d5.lengths.length<1){return;}this.viewModel.measureMethodText("Distance: ");this.viewModel.resultsText(REG_EXP_UTILS.numberToStringWithCommas(_4d5.lengths[0].toFixed(this.measureFloatPrecision)));this.viewModel.unitsText(this.viewModel.getLabelForDistanceValue(this.viewModel.selectedDistanceUnits()));},handleAreaResponse:function(_4d6){if(_4d6==null||!lang.isObject(_4d6)||_4d6.areas==null||!lang.isArray(_4d6.areas)||_4d6.areas.length<1){return;}var area=_4d6.areas[0];this.viewModel.measureMethodText("Area: ");this.viewModel.unitsText(this.viewModel.getLabelForAreaValue(this.viewModel.selectedAreaUnits()));this.viewModel.resultsText(REG_EXP_UTILS.numberToStringWithCommas(area.toFixed(this.measureFloatPrecision)));},handleLocationResponse:function(_4d7){if(_4d7==null||!lang.isArray(_4d7)||_4d7.length<1){return;}var pt=_4d7[0];this.viewModel.measureMethodText("");this.viewModel.unitsText("");if(this.viewModel.selectedLocationUnits()==VIEWER_GLOBALS.ESRI_UNITS.DEGREE_MINUTE_SECONDS){this.viewModel.resultsText("Latitude: "+GEOMETRY_UTILS.ddToDMSString(pt.y)+" Longitude:"+GEOMETRY_UTILS.ddToDMSString(pt.x));}else{this.viewModel.resultsText("Latitude: "+pt.y.toFixed(this.locationFloatPrecision)+" Longitude: "+pt.x.toFixed(this.locationFloatPrecision));}},onAnnotationCreated:function(_4d8){if(_4d8!=null&&_4d8.graphic!=null){this.inherited(arguments);this.clearCurrentGraphic();this.currentGraphic=_4d8.graphic;_4c3.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.ADD,_4d8.graphic);}},reset:function(){this.clearCurrentGraphic();this.clearDraw();}});});},"esriviewer/map/geometry/base/ProjectionUtils":function(){define(["dojo/_base/declare","dojo/_base/lang","esri/geometry/webMercatorUtils","esri/geometry/Point","esri/SpatialReference"],function(_4d9,lang,_4da,_4db,_4dc){return _4d9([],{DEG_2_RAD:Math.PI/180,BLOCK_SIZE:100000,GRIDSQUARE_SET_COL_SIZE:8,GRIDSQUARE_SET_ROW_SIZE:20,UNDEFINED_STR:"undefined",WEB_MERCATOR_WKID:102100,WGS_84_WKID:4326,EASTING_OFFSET:500000,NORTHING_OFFSET:10000000,k0:0.9996,RAD_2_DEG:(180/Math.PI),EQUATORIAL_RADIUS_NAD83:6378137,EQUATORIAL_RADIUS_NAD27:6378206.4,ECC_SQUARED_NAD83:0.006694380023,ECC_SQUARED_NAD27:0.006768658,UTMGzdLetters:"NPQRSTUVWX",USNGSqEast:"ABCDEFGHJKLMNPQRSTUVWXYZ",USNGSqLetOdd:"ABCDEFGHJKLMNPQRSTUV",USNGSqLetEven:"FGHJKLMNPQRSTUVABCDE",zoneBase:[1.1,2,2.9,3.8,4.7,5.6,6.5,7.3,8.2,9.1,0,0.8,1.7,2.6,3.5,4.4,5.3,6.2,7,7.9],segBase:[0,2,2,2,4,4,6,6,8,8,0,0,0,2,2,4,4,6,6,6],isNad83Mode:true,constructor:function(){if(this.isNad83Mode){this.EQUATORIAL_RADIUS=this.EQUATORIAL_RADIUS_NAD83;this.ECC_SQUARED=this.ECC_SQUARED_NAD83;}else{this.EQUATORIAL_RADIUS=this.EQUATORIAL_RADIUS_NAD27;this.ECC_SQUARED=this.ECC_SQUARED_NAD27;}this.ECC_PRIME_SQUARED=this.ECC_SQUARED/(1-this.ECC_SQUARED);this.E1=(1-Math.sqrt(1-this.ECC_SQUARED))/(1+Math.sqrt(1-this.ECC_SQUARED));},setMapSpatialReference:function(_4dd){this.mapSpatialReference=_4dd;},graphicsToMapSpatialReference:function(_4de){if(_4de==null){return null;}if(!lang.isArray(_4de)){_4de=[_4de];}if(_4de.length<1){return [];}if((this.mapSpatialReference.wkid===this.WEB_MERCATOR_WKID||this.mapSpatialReference.wkid===this.WGS_84_WKID)&&_4de[0].geometry.spatialReference.wkid===this.WEB_MERCATOR_WKID||_4de[0].geometry.spatialReference.wkid===this.WGS_84_WKID){var _4df=null;if(this.mapSpatialReference.wkid===this.WEB_MERCATOR_WKID&&_4de[0].geometry.spatialReference.wkid===this.WGS_84_WKID){_4df=_4da.geographicToWebMercator;}else{if(_4de[0].geometry.spatialReference.wkid===this.WEB_MERCATOR_WKID&&this.mapSpatialReference.wkid===this.WGS_84_WKID){_4df=_4da.webMercatorToGeographic;}}if(lang.isFunction(_4df)){var _4e0;for(var i=0;i<_4de.length;i++){_4e0=_4de[i];_4e0.geometry=_4df(_4e0.geometry);}}}return _4de;},geometryToMapSpatialReference:function(_4e1){if(_4e1==null){return null;}if(!lang.isArray(_4e1)){_4e1=[_4e1];}if(_4e1.length<1){return [];}if(this.mapSpatialReference.wkid==_4e1[0].spatialReference.wkid){return _4e1;}var _4e2=null;if((this.mapSpatialReference.wkid===this.WEB_MERCATOR_WKID||this.mapSpatialReference.wkid===this.WGS_84_WKID)&&_4e1[0].spatialReference.wkid===this.WEB_MERCATOR_WKID||_4e1[0].spatialReference.wkid===this.WGS_84_WKID){var _4e3=null;if(this.mapSpatialReference.wkid===this.WEB_MERCATOR_WKID&&_4e1[0].spatialReference.wkid===this.WGS_84_WKID){_4e3=_4da.geographicToWebMercator;}else{if(_4e1[0].spatialReference.wkid===this.WEB_MERCATOR_WKID&&this.mapSpatialReference.wkid===this.WGS_84_WKID){_4e3=_4da.webMercatorToGeographic;}}if(lang.isFunction(_4e3)){_4e2=[];for(var i=0;i<_4e1.length;i++){_4e2.push(_4e3(_4e1[i]));}}}return _4e2;},USNGtoLL:function(_4e4,_4e5){var _4e6=[];var _4e7={};this.parseUSNG_str(_4e4,_4e7);var _4e8={};this.USNGtoUTM(_4e7.zone,_4e7.letN,_4e7.sq1,_4e7.sq2,_4e7.east,_4e7.north,_4e8);if(_4e7.letN<"N"){_4e8.N-=this.NORTHING_OFFSET;}this.UTMtoLL(_4e8.N,_4e8.E,_4e7.zone,_4e8);_4e6[0]=_4e8.lat;_4e6[1]=_4e8.lon;var _4e9=new _4db(_4e8.lon,_4e8.lat,new _4dc(4326));if(_4e5&&lang.isFunction(_4e5)){_4e5(_4e9);}else{return _4e9;}},USNGtoUTM:function(zone,letN,sq1,sq2,east,_4ea,ret){var _4eb=this.USNGSqEast.indexOf(sq1);var _4ec=1+_4eb%8;var _4ed;var _4ee="CDEFGHJKLMNPQRSTUVWX".indexOf(letN);if(zone%2){_4ed="ABCDEFGHJKLMNPQRSTUV".indexOf(sq2);}else{_4ed="FGHJKLMNPQRSTUVABCDE".indexOf(sq2);}var _4ef=this.zoneBase[_4ee];var _4f0=Number(this.segBase[_4ee])+_4ed/10;if(_4f0<_4ef){_4f0+=2;}ret.N=_4f0*1000000+Number(_4ea)*Math.pow(10,5-_4ea.length);ret.E=_4ec*100000+Number(east)*Math.pow(10,5-east.length);ret.zone=zone;ret.letter=letN;},parseUSNG_str:function(_4f1,_4f2){var j=0;var k;var _4f3=[];var _4f4=[];_4f4=_4f1.toUpperCase();var _4f5=/%20/g;_4f3=_4f4.replace(_4f5,"");_4f5=/ /g;_4f3=_4f4.replace(_4f5,"");if(_4f3.length<7){return 0;}_4f2.zone=_4f3.charAt(j++)*10+_4f3.charAt(j++)*1;_4f2.letN=_4f3.charAt(j++);_4f2.sq1=_4f3.charAt(j++);_4f2.sq2=_4f3.charAt(j++);_4f2.precision=(_4f3.length-j)/2;_4f2.east="";_4f2.north="";for(k=0;k<_4f2.precision;k++){_4f2.east+=_4f3.charAt(j++);}if(_4f3[j]==" "){j++;}for(k=0;k<_4f2.precision;k++){_4f2.north+=_4f3.charAt(j++);}},UTMtoLL:function(_4f6,_4f7,_4f8,ret){var xUTM=parseFloat(_4f7)-this.EASTING_OFFSET;var yUTM=parseFloat(_4f6);var _4f9=parseInt(_4f8,10);var _4fa=(_4f9-1)*6-180+3;var M=yUTM/this.k0;var mu=M/(this.EQUATORIAL_RADIUS*(1-this.ECC_SQUARED/4-3*this.ECC_SQUARED*this.ECC_SQUARED/64-5*this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED/256));var _4fb=mu+(3*this.E1/2-27*this.E1*this.E1*this.E1/32)*Math.sin(2*mu)+(21*this.E1*this.E1/16-55*this.E1*this.E1*this.E1*this.E1/32)*Math.sin(4*mu)+(151*this.E1*this.E1*this.E1/96)*Math.sin(6*mu);var phi1=_4fb*this.RAD_2_DEG;var N1=this.EQUATORIAL_RADIUS/Math.sqrt(1-this.ECC_SQUARED*Math.sin(_4fb)*Math.sin(_4fb));var T1=Math.tan(_4fb)*Math.tan(_4fb);var C1=this.ECC_PRIME_SQUARED*Math.cos(_4fb)*Math.cos(_4fb);var R1=this.EQUATORIAL_RADIUS*(1-this.ECC_SQUARED)/Math.pow(1-this.ECC_SQUARED*Math.sin(_4fb)*Math.sin(_4fb),1.5);var D=xUTM/(N1*this.k0);var lat=_4fb-(N1*Math.tan(_4fb)/R1)*(D*D/2-(5+3*T1+10*C1-4*C1*C1-9*this.ECC_PRIME_SQUARED)*D*D*D*D/24+(61+90*T1+298*C1+45*T1*T1-252*this.ECC_PRIME_SQUARED-3*C1*C1)*D*D*D*D*D*D/720);lat=lat*this.RAD_2_DEG;var lon=(D-(1+2*T1+C1)*D*D*D/6+(5-2*C1+28*T1-3*C1*C1+8*this.ECC_PRIME_SQUARED+24*T1*T1)*D*D*D*D*D/120)/Math.cos(_4fb);lon=_4fa+lon*this.RAD_2_DEG;ret.lat=lat;ret.lon=lon;},LLtoMGRS:function(lat,lon,_4fc){var _4fd="";var _4fe=this.LLtoUSNG(lat,lon,_4fc);var _4ff=/ /g;return _4fe.replace(_4ff,"");},LLtoUSNG:function(lat,lon,_500){var USNG;lat=parseFloat(lat);lon=parseFloat(lon);var _501=this.LLtoUTM(lat,lon);var _502=_501.easting;var _503=_501.northing;if(lat<0){_503+=this.NORTHING_OFFSET;}var _504=this.getZoneNumber(lat,lon);var _505=this.findGridLetters(_504,_503,_502);var _506=Math.round(_503)%this.BLOCK_SIZE;var _507=Math.round(_502)%this.BLOCK_SIZE;_506=Math.floor(_506/Math.pow(10,(5-_500)));_507=Math.floor(_507/Math.pow(10,(5-_500)));USNG=this.getZoneNumber(lat,lon)+this.UTMLetterDesignator(lat)+" "+_505+" ";var i;for(i=String(_507).length;i<_500;i++){USNG+="0";}USNG+=_507+" ";for(i=String(_506).length;i<_500;i++){USNG+="0";}return USNG;},LLtoUTM:function(lat,lon,zone){lat=parseFloat(lat);lon=parseFloat(lon);if(lat>84||lat<-80){return this.UNDEFINED_STR;}var _508=(lon+180)-parseInt((lon+180)/360,10)*360-180;var _509=lat*this.DEG_2_RAD;var _50a=_508*this.DEG_2_RAD;var _50b=this.getZoneNumber(lat,lon);var _50c=(_50b-1)*6-180+3;var _50d=_50c*this.DEG_2_RAD;var _50e=_50b+""+this.UTMLetterDesignator(lat)+" ";var N=this.EQUATORIAL_RADIUS/Math.sqrt(1-this.ECC_SQUARED*Math.sin(_509)*Math.sin(_509));var T=Math.tan(_509)*Math.tan(_509);var C=this.ECC_PRIME_SQUARED*Math.cos(_509)*Math.cos(_509);var A=Math.cos(_509)*(_50a-_50d);var M=this.EQUATORIAL_RADIUS*((1-this.ECC_SQUARED/4-3*(this.ECC_SQUARED*this.ECC_SQUARED)/64-5*(this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED)/256)*_509-(3*this.ECC_SQUARED/8+3*this.ECC_SQUARED*this.ECC_SQUARED/32+45*this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED/1024)*Math.sin(2*_509)+(15*this.ECC_SQUARED*this.ECC_SQUARED/256+45*this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED/1024)*Math.sin(4*_509)-(35*this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED/3072)*Math.sin(6*_509));var _50f=(this.k0*N*(A+(1-T+C)*(A*A*A)/6+(5-18*T+T*T+72*C-58*this.ECC_PRIME_SQUARED)*(A*A*A*A*A)/120)+this.EASTING_OFFSET);var _510=(this.k0*(M+N*Math.tan(_509)*((A*A)/2+(5-T+9*C+4*C*C)*(A*A*A*A)/24+(61-58*T+T*T+600*C-330*this.ECC_PRIME_SQUARED)*(A*A*A*A*A*A)/720)));return {easting:_50f,northing:_510,zone:_50b};},getZoneNumber:function(lat,lon){lat=parseFloat(lat);lon=parseFloat(lon);var _511=(lon+180)-parseInt((lon+180)/360,10)*360-180;var _512=parseInt((_511+180)/6,10)+1;if(lat>=56&&lat<64&&_511>=3&&_511<12){_512=32;}if(lat>=72&&lat<84){if(_511>=0&&_511<9){_512=31;}else{if(_511>=9&&_511<21){_512=33;}else{if(_511>=21&&_511<33){_512=35;}else{if(_511>=33&&_511<42){_512=37;}}}}}return _512;},findGridLetters:function(_513,_514,_515){_513=parseInt(_513,10);_514=parseFloat(_514);_515=parseFloat(_515);row=1;var _516=Math.round(_514);while(_516>=this.BLOCK_SIZE){_516=_516-this.BLOCK_SIZE;row++;}var row=row%this.GRIDSQUARE_SET_ROW_SIZE;var col=0;var _517=Math.round(_515);while(_517>=this.BLOCK_SIZE){_517=_517-this.BLOCK_SIZE;col++;}col=col%this.GRIDSQUARE_SET_COL_SIZE;return this.lettersHelper(this.findSet(_513),row,col);},findSet:function(_518){_518=parseInt(_518,10);_518=_518%6;switch(_518){case 0:return 6;break;case 1:return 1;break;case 2:return 2;break;case 3:return 3;break;case 4:return 4;break;case 5:return 5;break;default:return -1;break;}},lettersHelper:function(set,row,col){if(row==0){row=this.GRIDSQUARE_SET_ROW_SIZE-1;}else{row--;}if(col==0){col=this.GRIDSQUARE_SET_COL_SIZE-1;}else{col--;}var l1;var l2;switch(set){case 1:l1="ABCDEFGH";l2="ABCDEFGHJKLMNPQRSTUV";return l1.charAt(col)+l2.charAt(row);break;case 2:l1="JKLMNPQR";l2="FGHJKLMNPQRSTUVABCDE";return l1.charAt(col)+l2.charAt(row);break;case 3:l1="STUVWXYZ";l2="ABCDEFGHJKLMNPQRSTUV";return l1.charAt(col)+l2.charAt(row);break;case 4:l1="ABCDEFGH";l2="FGHJKLMNPQRSTUVABCDE";return l1.charAt(col)+l2.charAt(row);break;case 5:l1="JKLMNPQR";l2="ABCDEFGHJKLMNPQRSTUV";return l1.charAt(col)+l2.charAt(row);break;case 6:l1="STUVWXYZ";l2="FGHJKLMNPQRSTUVABCDE";return l1.charAt(col)+l2.charAt(row);break;}},UTMLetterDesignator:function(lat){lat=parseFloat(lat);var _519;if((84>=lat)&&(lat>=72)){_519="X";}else{if((72>lat)&&(lat>=64)){_519="W";}else{if((64>lat)&&(lat>=56)){_519="V";}else{if((56>lat)&&(lat>=48)){_519="U";}else{if((48>lat)&&(lat>=40)){_519="T";}else{if((40>lat)&&(lat>=32)){_519="S";}else{if((32>lat)&&(lat>=24)){_519="R";}else{if((24>lat)&&(lat>=16)){_519="Q";}else{if((16>lat)&&(lat>=8)){_519="P";}else{if((8>lat)&&(lat>=0)){_519="N";}else{if((0>lat)&&(lat>=-8)){_519="M";}else{if((-8>lat)&&(lat>=-16)){_519="L";}else{if((-16>lat)&&(lat>=-24)){_519="K";}else{if((-24>lat)&&(lat>=-32)){_519="J";}else{if((-32>lat)&&(lat>=-40)){_519="H";}else{if((-40>lat)&&(lat>=-48)){_519="G";}else{if((-48>lat)&&(lat>=-56)){_519="F";}else{if((-56>lat)&&(lat>=-64)){_519="E";}else{if((-64>lat)&&(lat>=-72)){_519="D";}else{if((-72>lat)&&(lat>=-80)){_519="C";}else{_519="Z";}}}}}}}}}}}}}}}}}}}}return _519;}});});},"esriviewer/ui/navigation/model/NavigationWidgetViewModel":function(){define(["dojo/_base/declare"],function(_51a){return _51a([],{constructor:function(){this.visible=ko.observable(true);}});});},"dojox/uuid/generateTimeBasedUuid":function(){define(["dojo/_base/lang","./_base"],function(lang){dojox.uuid.generateTimeBasedUuid=function(node){var _51b=dojox.uuid.generateTimeBasedUuid._generator.generateUuidString(node);return _51b;};dojox.uuid.generateTimeBasedUuid.isValidNode=function(node){var _51c=16;var _51d=parseInt(node,_51c);var _51e=lang.isString(node)&&node.length==12&&isFinite(_51d);return _51e;};dojox.uuid.generateTimeBasedUuid.setNode=function(node){dojox.uuid.assert((node===null)||this.isValidNode(node));this._uniformNode=node;};dojox.uuid.generateTimeBasedUuid.getNode=function(){return this._uniformNode;};dojox.uuid.generateTimeBasedUuid._generator=new function(){this.GREGORIAN_CHANGE_OFFSET_IN_HOURS=3394248;var _51f=null;var _520=null;var _521=null;var _522=0;var _523=null;var _524=null;var _525=16;function _526(_527){_527[2]+=_527[3]>>>16;_527[3]&=65535;_527[1]+=_527[2]>>>16;_527[2]&=65535;_527[0]+=_527[1]>>>16;_527[1]&=65535;dojox.uuid.assert((_527[0]>>>16)===0);};function _528(x){var _529=new Array(0,0,0,0);_529[3]=x%65536;x-=_529[3];x/=65536;_529[2]=x%65536;x-=_529[2];x/=65536;_529[1]=x%65536;x-=_529[1];x/=65536;_529[0]=x;return _529;};function _52a(_52b,_52c){dojox.uuid.assert(lang.isArray(_52b));dojox.uuid.assert(lang.isArray(_52c));dojox.uuid.assert(_52b.length==4);dojox.uuid.assert(_52c.length==4);var _52d=new Array(0,0,0,0);_52d[3]=_52b[3]+_52c[3];_52d[2]=_52b[2]+_52c[2];_52d[1]=_52b[1]+_52c[1];_52d[0]=_52b[0]+_52c[0];_526(_52d);return _52d;};function _52e(_52f,_530){dojox.uuid.assert(lang.isArray(_52f));dojox.uuid.assert(lang.isArray(_530));dojox.uuid.assert(_52f.length==4);dojox.uuid.assert(_530.length==4);var _531=false;if(_52f[0]*_530[0]!==0){_531=true;}if(_52f[0]*_530[1]!==0){_531=true;}if(_52f[0]*_530[2]!==0){_531=true;}if(_52f[1]*_530[0]!==0){_531=true;}if(_52f[1]*_530[1]!==0){_531=true;}if(_52f[2]*_530[0]!==0){_531=true;}dojox.uuid.assert(!_531);var _532=new Array(0,0,0,0);_532[0]+=_52f[0]*_530[3];_526(_532);_532[0]+=_52f[1]*_530[2];_526(_532);_532[0]+=_52f[2]*_530[1];_526(_532);_532[0]+=_52f[3]*_530[0];_526(_532);_532[1]+=_52f[1]*_530[3];_526(_532);_532[1]+=_52f[2]*_530[2];_526(_532);_532[1]+=_52f[3]*_530[1];_526(_532);_532[2]+=_52f[2]*_530[3];_526(_532);_532[2]+=_52f[3]*_530[2];_526(_532);_532[3]+=_52f[3]*_530[3];_526(_532);return _532;};function _533(_534,_535){while(_534.length<_535){_534="0"+_534;}return _534;};function _536(){var _537=Math.floor((Math.random()%1)*Math.pow(2,32));var _538=_537.toString(_525);while(_538.length<8){_538="0"+_538;}return _538;};this.generateUuidString=function(node){if(node){dojox.uuid.assert(dojox.uuid.generateTimeBasedUuid.isValidNode(node));}else{if(dojox.uuid.generateTimeBasedUuid._uniformNode){node=dojox.uuid.generateTimeBasedUuid._uniformNode;}else{if(!_51f){var _539=32768;var _53a=Math.floor((Math.random()%1)*Math.pow(2,15));var _53b=(_539|_53a).toString(_525);_51f=_53b+_536();}node=_51f;}}if(!_520){var _53c=32768;var _53d=Math.floor((Math.random()%1)*Math.pow(2,14));_520=(_53c|_53d).toString(_525);}var now=new Date();var _53e=now.valueOf();var _53f=_528(_53e);if(!_523){var _540=_528(60*60);var _541=_528(dojox.uuid.generateTimeBasedUuid._generator.GREGORIAN_CHANGE_OFFSET_IN_HOURS);var _542=_52e(_541,_540);var _543=_528(1000);_523=_52e(_542,_543);_524=_528(10000);}var _544=_53f;var _545=_52a(_523,_544);var _546=_52e(_545,_524);if(now.valueOf()==_521){_546[3]+=_522;_526(_546);_522+=1;if(_522==10000){while(now.valueOf()==_521){now=new Date();}}}else{_521=now.valueOf();_522=1;}var _547=_546[2].toString(_525);var _548=_546[3].toString(_525);var _549=_533(_547,4)+_533(_548,4);var _54a=_546[1].toString(_525);_54a=_533(_54a,4);var _54b=_546[0].toString(_525);_54b=_533(_54b,3);var _54c="-";var _54d="1";var _54e=_549+_54c+_54a+_54c+_54d+_54b+_54c+_520+_54c+node;_54e=_54e.toLowerCase();return _54e;};}();return dojox.uuid.generateTimeBasedUuid;});},"dojo/gears":function(){define(["./_base/lang","./sniff"],function(lang,has){var _54f={};lang.setObject("dojo.gears",_54f);_54f._gearsObject=function(){var _550;var _551=lang.getObject("google.gears");if(_551){return _551;}if(typeof GearsFactory!="undefined"){_550=new GearsFactory();}else{if(has("ie")){try{_550=new ActiveXObject("Gears.Factory");}catch(e){}}else{if(navigator.mimeTypes["application/x-googlegears"]){_550=document.createElement("object");_550.setAttribute("type","application/x-googlegears");_550.setAttribute("width",0);_550.setAttribute("height",0);_550.style.display="none";document.documentElement.appendChild(_550);}}}if(!_550){return null;}lang.setObject("google.gears.factory",_550);return lang.getObject("google.gears");};_54f.available=(!!_54f._gearsObject())||0;return _54f;});},"esriviewer/ui/identify/IdentifyWindowWidget":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/dom-class","../window/WindowWidget"],function(_552,lang,_553,_554,_555){return _552([_555],{defaultPositioning:{x:400,y:125},windowWidth:"310px",windowHeaderText:"Identify",windowIconAltText:"Identify",windowIconClass:"commonIcons16 information",positioningParamName:"identify",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_554.add(this.windowContent,"identifyWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/identify/IdentifyWidget"],lang.hitch(this,function(_556){this.identifyWidget=new _556();this.setContent(this.identifyWidget.domNode);this.identifyWidget.showQueryView();}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_553.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.IDENTIFY.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_553.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.IDENTIFY.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_553.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.IDENTIFY.TOGGLE,lang.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.identifyWidget){this.identifyWidget.reset();}},show:function(){this.inherited(arguments);if(this.identifyWidget){this.identifyWidget.showQueryView();}}});});},"dijit/layout/AccordionPane":function(){define(["dojo/_base/declare","dojo/_base/kernel","./ContentPane"],function(_557,_558,_559){return _557("dijit.layout.AccordionPane",_559,{constructor:function(){_558.deprecated("dijit.layout.AccordionPane deprecated, use ContentPane instead","","2.0");},onSelected:function(){}});});},"esriviewer/portal/PortalViewerManagerSupportMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","./PortalSupport"],function(_55a,lang,_55b){return _55a([],{portalSupported:false,_initializePortalSupport:function(){if(this.viewerConfig.portal!=null&&lang.isObject(this.viewerConfig.portal)&&this.viewerConfig.portal.url!=null&&this.viewerConfig.portal.url!=""){this.portalSupported=true;new _55b();this._createPortalSearchWidget();return true;}return false;},_createPortalSearchWidget:function(){if(this.portalSupported){if(this.viewerConfig.portalSearchWidget!=null&&this.viewerConfig.portalSearchWidget.create!=null&&this.viewerConfig.portalSearchWidget.create==true){require(["esriviewer/ui/portal/PortalSearchWidgetWindow"],function(_55c){this.portalSearchWidgetWindow=new _55c();});}}}});});},"esri/dijit/Basemap":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","esri/kernel","esri/request","esri/dijit/BasemapLayer"],function(_55d,_55e,lang,has,_55f,_560,_561){var BM=_55d(null,{declaredClass:"esri.dijit.Basemap",id:null,title:"",thumbnailUrl:null,layers:null,itemId:null,basemapGallery:null,constructor:function(_562,_563){_562=_562||{};if(!_562.layers&&!_562.itemId){}this.id=_562.id;this.itemId=_562.itemId;this.layers=_562.layers;this.title=_562.title||"";this.thumbnailUrl=_562.thumbnailUrl;this.basemapGallery=_563;},getLayers:function(){if(this.layers){return this.layers;}else{if(this.itemId){var url=_55f.dijit._arcgisUrl+"/content/items/"+this.itemId+"/data";var _564={};_564.f="json";var _565=_560({url:url,content:_564,callbackParamName:"callback",error:lang.hitch(this,function(_566,args){var msg="esri.dijit.Basemap: could not access basemap item.";if(this.basemapGallery){this.basemapGallery.onError(msg);}else{}})});_565.addCallback(lang.hitch(this,function(_567,args){if(_567.baseMap){this.layers=[];_55e.forEach(_567.baseMap.baseMapLayers,function(_568){var _569={};if(_568.url){_569.url=_568.url;}if(_568.type){_569.type=_568.type;}if(_568.isReference){_569.isReference=_568.isReference;}if(_568.displayLevels){_569.displayLevels=_568.displayLevels;}if(_568.visibleLayers){_569.visibleLayers=_568.visibleLayers;}if(_568.bandIds){_569.bandIds=_568.bandIds;}this.layers.push(new _561(_569));},this);return this.layers;}else{var msg="esri.dijit.Basemap: could not access basemap item.";if(this.basemapGallery){this.basemapGallery.onError(msg);}else{}return [];}}));return _565;}}}});if(has("extend-esri")){lang.setObject("dijit.Basemap",BM,_55f);}return BM;});},"dojox/storage/_common":function(){define(["dijit","dojo","dojox","dojo/require!dojox/storage/Provider,dojox/storage/manager,dojox/storage/LocalStorageProvider,dojox/storage/GearsStorageProvider,dojox/storage/WhatWGStorageProvider,dojox/storage/FlashStorageProvider,dojox/storage/BehaviorStorageProvider,dojox/storage/CookieStorageProvider"],function(_56a,dojo,_56b){dojo.provide("dojox.storage._common");dojo.require("dojox.storage.Provider");dojo.require("dojox.storage.manager");dojo.require("dojox.storage.LocalStorageProvider");dojo.require("dojox.storage.GearsStorageProvider");dojo.require("dojox.storage.WhatWGStorageProvider");dojo.require("dojox.storage.FlashStorageProvider");dojo.require("dojox.storage.BehaviorStorageProvider");dojo.require("dojox.storage.CookieStorageProvider");_56b.storage.manager.initialize();});},"dojox/sql":function(){define(["./sql/_base"],function(){});},"esriviewer/ui/time/TimeSliderWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/window","dojo/dom-style","../window/WindowWidget"],function(_56c,lang,_56d,_56e,_56f,_570){return _56c([_570],{defaultPositioning:{x:10,y:50},windowWidth:"450px",windowHeaderText:"Time Slider",windowIconAltText:"Time Slider",windowIconClass:"commonIcons16 clock",positioningParamName:"time",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/time/TimeSliderWidget"],lang.hitch(this,function(_571){this.timeSliderWidget=new _571();this.setContent(this.timeSliderWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_56d.subscribe(VIEWER_GLOBALS.EVENTS.MAP.TIME.SHOW_TIME_SLIDER,lang.hitch(this,this.show)));this.subscribes.push(_56d.subscribe(VIEWER_GLOBALS.EVENTS.MAP.TIME.TOGGLE_TIME_SLIDER,lang.hitch(this,this.toggle)));},postCreate:function(){var _572=_56e.getBox();if(_572.w>1600){_56f.set(this.domNode,"width","25%");}else{_56f.set(this.domNode,"width","35%");}this.inherited(arguments);},hide:function(){this.inherited(arguments);if(this.timeSliderWidget){this.timeSliderWidget.clearTimeSlider();}}});});},"esri/dijit/BasemapLayer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_573,lang,has,_574){var BML=_573(null,{declaredClass:"esri.dijit.BasemapLayer",constructor:function(_575){_575=_575||{};if(!_575.url&&!_575.type){}this.url=_575.url;this.type=_575.type;this.isReference=(_575.isReference===true)?true:false;this.opacity=_575.opacity;this.visibleLayers=_575.visibleLayers;this.displayLevels=_575.displayLevels;this.bandIds=_575.bandIds;this.copyright=_575.copyright;this.subDomains=_575.subDomains;this.fullExtent=_575.fullExtent;this.initialExtent=_575.initialExtent;this.tileInfo=_575.tileInfo;this.tileServers=_575.tileServers;}});if(has("extend-esri")){lang.setObject("dijit.BasemapLayer",BML,_574);}return BML;});},"dijit/MenuItem":function(){define(["dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/kernel","dojo/sniff","dojo/_base/lang","./_Widget","./_TemplatedMixin","./_Contained","./_CssStateMixin","dojo/text!./templates/MenuItem.html"],function(_576,dom,_577,_578,_579,has,lang,_57a,_57b,_57c,_57d,_57e){var _57f=_576("dijit.MenuItem"+(has("dojo-bidi")?"_NoBidi":""),[_57a,_57b,_57c,_57d],{templateString:_57e,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(val){this._set("label",val);var _580="";var text;var ndx=val.search(/{\S}/);if(ndx>=0){_580=val.charAt(ndx+1);var _581=val.substr(0,ndx);var _582=val.substr(ndx+3);text=_581+_580+_582;val=_581+"<span class=\"dijitMenuItemShortcutKey\">"+_580+"</span>"+_582;}else{text=val;}this.domNode.setAttribute("aria-label",text+" "+this.accelKey);this.containerNode.innerHTML=val;this._set("shortcutKey",_580);},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:false,_fillContent:function(_583){if(_583&&!("label" in this.params)){this._set("label",_583.innerHTML);}},buildRendering:function(){this.inherited(arguments);var _584=this.id+"_text";_577.set(this.containerNode,"id",_584);if(this.accelKeyNode){_577.set(this.accelKeyNode,"id",this.id+"_accel");}dom.setSelectable(this.domNode,false);},onClick:function(){},focus:function(){try{if(has("ie")==8){this.containerNode.focus();}this.focusNode.focus();}catch(e){}},_onFocus:function(){this.getParent()._onItemFocus(this);this.inherited(arguments);},_setSelected:function(_585){_578.toggle(this.domNode,"dijitMenuItemSelected",_585);},setLabel:function(_586){_579.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_586);},setDisabled:function(_587){_579.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",_587);},_setDisabledAttr:function(_588){this.focusNode.setAttribute("aria-disabled",_588?"true":"false");this._set("disabled",_588);},_setAccelKeyAttr:function(_589){if(this.accelKeyNode){this.accelKeyNode.style.display=_589?"":"none";this.accelKeyNode.innerHTML=_589;_577.set(this.containerNode,"colSpan",_589?"1":"2");}this._set("accelKey",_589);}});if(has("dojo-bidi")){_57f=_576("dijit.MenuItem",_57f,{_setLabelAttr:function(val){this.inherited(arguments);if(this.textDir==="auto"){this.applyTextDir(this.textDirNode);}}});}return _57f;});},"esriviewer/ui/measure/MeasureWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","../window/WindowWidget","./MeasureWidget"],function(_58a,lang,_58b,_58c,_58d){return _58a([_58c],{defaultPositioning:{x:50,y:50},windowWidth:"300px",windowHeaderText:"Measure",windowIconAltText:"Measure",windowIconClass:"commonIcons16 triangle",positioningParamName:"measure",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/measure/MeasureWidget"],lang.hitch(this,function(_58e){this.measureWidget=new _58e();this.setContent(this.measureWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_58b.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.MEASURE.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_58b.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.MEASURE.TOGGLE,lang.hitch(this,this.toggle)));this.subscribes.push(_58b.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.MEASURE.HIDE,lang.hitch(this,this.hide)));},hide:function(){this.inherited(arguments);if(this.measureWidget){this.measureWidget.reset();}}});});},"esriviewer/map/geometry/GeometryServiceController":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","esri/tasks/GeometryService","esri/config","esri/tasks/AreasAndLengthsParameters","esri/tasks/LengthsParameters","esri/tasks/BufferParameters","esri/tasks/ProjectParameters","esri/geometry/webMercatorUtils","esri/SpatialReference"],function(_58f,_590,lang,_591,_592,_593,_594,_595,_596,_597,_598){return _58f([],{constructor:function(_599){lang.mixin(this,_599||{});this.init();},init:function(){this.loadViewerConfigurationData();if(this.geometryService==null){return;}else{this.initListeners();}var _59a=null;_590.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,function(ext){_59a=ext;});if(_59a&&_59a.spatialReference&&_59a.spatialReference!=null){this.mapSpatialReference=_59a.spatialReference;}this.createMapConfigGeometryService();},loadViewerConfigurationData:function(){var _59b=null;_590.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"geometryServiceUrl",function(_59c){_59b=_59c;});this.geometryServiceUrl=_59b;if(this.geometryServiceUrl!=null&&this.geometryServiceUrl!=""){this.geometryService=new _591(this.geometryServiceUrl);}else{_590.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"No Geometry Service in configuration. Service disabled");VIEWER_UTILS.log("No Geometry Service in configuration. Service disabled",VIEWER_GLOBALS.LOG_TYPE.WARNING);}},createMapConfigGeometryService:function(){if(this.geometryServiceUrl){if(_592&&_592.defaults){_592.defaults.geometryService=new _591(this.geometryServiceUrl);}}},initListeners:function(){_590.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_LAT_LON,lang.hitch(this,this.handleProjectGeometriesToLatLon));_590.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.MGRS_TO_LAT_LON,lang.hitch(this,this.handleMgrsToLatLon));_590.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_MAP_SR,lang.hitch(this,this.handleProjectGeometriesToMapSR));_590.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_AREA,lang.hitch(this,this.handleCalculateArea));_590.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_DISTANCE,lang.hitch(this,this.handleCalculateDistance));_590.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.EXISTS,lang.hitch(this,this.handleGeometryServiceExists));_590.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.BUFFER_POINT,lang.hitch(this,this.handleBufferPoint));_590.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.BUFFER,lang.hitch(this,this.handleBuffer));this.projectErrorDefaultCallback=lang.hitch(this,this.handleProjectionError);},handleCalculateArea:function(_59d,_59e,_59f){if(_59f!=null&&lang.isFunction(_59f)){var _5a0=new _593();_5a0.areaUnit=_59e;_5a0.polygons=[_59d];this.geometryService.areasAndLengths(_5a0,_59f,_59f);}},handleCalculateDistance:function(_5a1,_5a2,_5a3){if(_5a3!=null&&lang.isFunction(_5a3)){var _5a4=new _594();_5a4.lengthUnit=_5a2;_5a4.polylines=[_5a1];_5a4.geodesic=true;this.geometryService.lengths(_5a4,_5a3,_5a3);}},handleMgrsToLatLon:function(_5a5,_5a6){PROJECTION_UTILS.USNGtoLL(_5a5,_5a6);},handleBuffer:function(_5a7,_5a8,_5a9){this.geometryService.buffer(_5a7,_5a8,_5a9);},handleBufferPoint:function(pt,_5aa,_5ab,_5ac){if(pt==null||_5aa==null||_5aa.distance==null||_5aa.units==null){return;}if(_5ab==null||!lang.isFunction(_5ab)||this.mapSpatialReference==null){return;}var _5ad=new _595();if(!lang.isArray(pt)){_5ad.geometries=[pt];}else{_5ad.geometries=pt;}_5ad.distances=[_5aa.distance];_5ad.unit=_5aa.units;_5ad.bufferSpatialReference=pt.spatialReference;_5ad.outSpatialReference=this.mapSpatialReference;this.geometryService.buffer(_5ad,_5ab,_5ac);},handleProjectGeometriesToLatLon:function(_5ae,_5af){if(_5af==null||!lang.isFunction(_5af)||_5ae==null){return;}if(!lang.isArray(_5ae)){_5ae=[_5ae];}if(_5ae.length==0){_5af([]);}var _5b0=false;var _5b1=[];if(_5ae[0].spatialReference.wkid===PROJECTION_UTILS.WEB_MERCATOR_WKID||_5ae[0].spatialReference.wkid===PROJECTION_UTILS.WGS_84_WKID){if(_5ae[0].spatialReference.wkid===PROJECTION_UTILS.WGS_84_WKID){_5af(_5ae);}var _5b2=_597.webMercatorToGeographic;if(lang.isFunction(_5b2)){for(var i=0;i<_5ae.length;i++){_5b1.push(_5b2(_5ae[i]));}}}if(_5b1.length>0){_5af(_5b1);}else{var _5b3=new _596();_5b3.geometries=_5ae;_5b3.outSR=new _598({wkid:PROJECTION_UTILS.WGS_84_WKID});this.geometryService.project(_5b3,_5af,_5af);}},handleProjectGeometriesToMapSR:function(_5b4,_5b5,_5b6,_5b7){if(_5b4==null){if(_5b7&&lang.isFunction(_5b7)){_5b7("No geometries to project");}return;}if(_5b5==null||!lang.isFunction(_5b5)||this.mapSpatialReference==null){if(_5b7&&lang.isFunction(_5b7)){_5b7("Cannot process project");}return;}if(!lang.isArray(_5b4)){_5b4=[_5b4];}if(_5b4.length<0){_5b5([]);}var _5b8=PROJECTION_UTILS.geometryToMapSpatialReference(_5b4);if(_5b8!=null&&lang.isArray(_5b8)){_5b5(_5b8);}else{this._handleServerSideProject(_5b4,_5b5,_5b6,_5b7);}},_handleServerSideProject:function(_5b9,_5ba,_5bb,_5bc){if(_5bb==null){_5bb={};}var _5bd=new _596();_5bd.geometries=_5b9;_5bd.outSR=this.mapSpatialReference;if(_5bb.transformation){_5bd.transformation=_5bb.transformation;}if(_5bc==null||!lang.isFunction(_5bc)){_5bc=this.projectErrorDefaultCallback;}this.geometryService.project(_5bd,_5ba,_5bc);},handleProjectionError:function(err){VIEWER_UTILS.log("Error Projecting data",VIEWER_GLOBALS.LOG_TYPE.ERROR);},handleGeometryServiceExists:function(_5be){if(_5be!=null&&lang.isFunction(_5be)){_5be(this.geometryService!=null);}}});});},"esriviewer/base/LocationServiceSupport":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","esri/tasks/locator"],function(_5bf,_5c0,lang,_5c1){return _5bf([],{constructor:function(){this.locatorLookup={};},_initListeners:function(){_5c0.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.SINGLE_LINE_ADDRESS_TO_LOCATION,lang.hitch(this,this._handleSingleAddressLineAddressToLocations));_5c0.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.REVERSE_GEOCODE,lang.hitch(this,this.handleReverseGeocode));_5c0.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.ADD_LOCATOR,lang.hitch(this,this.handleAddLocatorRequest));_5c0.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.REMOVE_LOCATOR,lang.hitch(this,this.handleRemoveLocatorRequest));_5c0.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.GET_LOCATORS,lang.hitch(this,this.handleGetLocators));},handleGetLocators:function(_5c2){if(_5c2!=null&&lang.isFunction(_5c2)){var _5c3=[];for(var key in this.locatorLookup){_5c3.push(this.locatorLookup[key]);}_5c2(_5c3);}},handleReverseGeocode:function(_5c4,_5c5,_5c6,_5c7){if(_5c6!=null&&lang.isFunction(_5c6)){var _5c8;var _5c9=null;for(var key in this.locatorLookup){_5c8=this.locatorLookup[key];if(_5c8!=null&&_5c8.locator!=null&&lang.isFunction(_5c8.locator.locationToAddress)){_5c9=_5c8.locator;break;}}if(_5c9==null){if(_5c7!=null&&lang.isFunction(_5c7)){_5c7("Reverse Geocode Not Supported");return;}}if(_5c5==null){_5c5=VIEWER_GLOBALS.DEFAULT_REVERSE_GEOCODE_DISTANCE;}_5c9.locationToAddress(_5c4,_5c5,_5c6,_5c7);}},_handleSingleAddressLineAddressToLocations:function(_5ca,_5cb,_5cc){this.singleLineAddressToLocations(_5ca,_5cb,_5cc);},handleRemoveLocatorRequest:function(_5cd){if(this.locatorLookup[_5cd]!=null){delete this.locatorLookup[_5cd];_5c0.publish(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_REMOVED,_5cd);}},handleAddLocatorRequest:function(_5ce,_5cf,_5d0){this.addLocator(_5ce,null,function(id){if(id!=null){if(_5cf!=null&&lang.isFunction(_5cf)){_5cf(id,_5ce);}}else{if(_5d0!=null&&lang.isFunction(_5d0)){_5d0("Locator Exists");}}});},addLocator:function(_5d1,_5d2,_5d3){var id=_5d1.toLowerCase();if(this.locatorLookup[id]==null){var _5d4=new _5c1(_5d1);var _5d5={locator:_5d4,label:(_5d2!=null&&_5d2!="")?_5d2:REG_EXP_UTILS.getServiceNameFromUrl(_5d4.url)};var _5d6=null;_5c0.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,function(ext){_5d6=ext;});if(_5d6&&_5d6.spatialReference){_5d4.setOutSpatialReference(_5d6.spatialReference);}var _5d7=_5d3;var _5d8=this.locatorLookup;VIEWER_UTILS.getServiceDescription(_5d1,function(_5d9){if(_5d9!=null&&lang.isObject(_5d9)){if(_5d9.singleLineAddressField!=null&&lang.isObject(_5d9.singleLineAddressField)&&_5d9.singleLineAddressField.name!=null&&_5d9.singleLineAddressField.name!=""){_5d4.serviceDescription=_5d9;_5d8[id]=_5d5;_5c0.publish(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_ADDED,_5d5);if(_5d7!=null&&lang.isFunction(_5d7)){_5d7(id);}}else{_5c0.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Locator does not support single line address.");}}});}else{VIEWER_UTILS.log("Locator Already Exists: "+_5d1,VIEWER_GLOBALS.LOG_TYPE.ERROR);_5c0.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Locator already exists.");}},singleLineAddressToLocations:function(_5da,_5db,_5dc){if(_5dc!=null){var _5dd={};_5dd[_5dc.serviceDescription.singleLineAddressField.name]=VIEWER_UTILS.trim(_5da);var _5de=lang.hitch(this,this._handleLocatorResponse,_5dc.url.toLowerCase(),_5db);var _5df=lang.hitch(this,this._handleLocatorError,_5dc.url.toLowerCase(),_5db);_5dc.addressToLocations(_5dd,["*"],_5de,_5df);}},_handleLocatorResponse:function(_5e0,_5e1,_5e2){_5c0.publish(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_REQUEST_COMPLETE,{addressCandidates:_5e2,locatorId:_5e0,requestId:_5e1});},_handleLocatorError:function(_5e3,_5e4,_5e5){_5c0.publish(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_REQUEST_ERROR,{error:_5e5,locatorId:_5e3,requestId:_5e4});VIEWER_UTILS.log("Could not perform locate",VIEWER_GLOBALS.LOG_TYPE.ERROR);_5c0.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Could not perform locate");}});});},"esriviewer/ui/zoomto/ZoomToWidgetWindow":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","../window/WindowWidget"],function(_5e6,_5e7,lang,_5e8){return _5e6([_5e8],{defaultPositioning:{x:10,y:240},windowWidth:"275px",windowHeaderText:"Zoom To",windowIconAltText:"Zoom To",windowIconClass:"commonIcons16 magnifyingGlass",positioningParamName:"zoomTo",initListeners:function(){this.inherited(arguments);this.subscribes.push(_5e7.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.ZOOM_TO.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_5e7.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.ZOOM_TO.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_5e7.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.ZOOM_TO.TOGGLE,lang.hitch(this,this.toggle)));this.firstShowListener=this.on("firstWindowShow",lang.hitch(this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/zoomto/ZoomToWidget"],lang.hitch(this,function(_5e9){this.zoomToWidget=new _5e9();this.setContent(this.zoomToWidget.domNode);}));}});});},"dijit/layout/_LayoutWidget":function(){define(["dojo/_base/lang","../_Widget","../_Container","../_Contained","../Viewport","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style"],function(lang,_5ea,_5eb,_5ec,_5ed,_5ee,_5ef,_5f0,_5f1){return _5ee("dijit.layout._LayoutWidget",[_5ea,_5eb,_5ec],{baseClass:"dijitLayoutContainer",isLayoutContainer:true,buildRendering:function(){this.inherited(arguments);_5ef.add(this.domNode,"dijitContainer");},startup:function(){if(this._started){return;}this.inherited(arguments);var _5f2=this.getParent&&this.getParent();if(!(_5f2&&_5f2.isLayoutContainer)){this.resize();this.own(_5ed.on("resize",lang.hitch(this,"resize")));}},resize:function(_5f3,_5f4){var node=this.domNode;if(_5f3){_5f0.setMarginBox(node,_5f3);}var mb=_5f4||{};lang.mixin(mb,_5f3||{});if(!("h" in mb)||!("w" in mb)){mb=lang.mixin(_5f0.getMarginBox(node),mb);}var cs=_5f1.getComputedStyle(node);var me=_5f0.getMarginExtents(node,cs);var be=_5f0.getBorderExtents(node,cs);var bb=(this._borderBox={w:mb.w-(me.w+be.w),h:mb.h-(me.h+be.h)});var pe=_5f0.getPadExtents(node,cs);this._contentBox={l:_5f1.toPixelValue(node,cs.paddingLeft),t:_5f1.toPixelValue(node,cs.paddingTop),w:bb.w-pe.w,h:bb.h-pe.h};this.layout();},layout:function(){},_setupChild:function(_5f5){var cls=this.baseClass+"-child "+(_5f5.baseClass?this.baseClass+"-"+_5f5.baseClass:"");_5ef.add(_5f5.domNode,cls);},addChild:function(_5f6,_5f7){this.inherited(arguments);if(this._started){this._setupChild(_5f6);}},removeChild:function(_5f8){var cls=this.baseClass+"-child"+(_5f8.baseClass?" "+this.baseClass+"-"+_5f8.baseClass:"");_5ef.remove(_5f8.domNode,cls);this.inherited(arguments);}});});},"dojox/uuid/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang"],function(dojo){dojo.getObject("uuid",true,dojox);dojox.uuid.NIL_UUID="00000000-0000-0000-0000-000000000000";dojox.uuid.version={UNKNOWN:0,TIME_BASED:1,DCE_SECURITY:2,NAME_BASED_MD5:3,RANDOM:4,NAME_BASED_SHA1:5};dojox.uuid.variant={NCS:"0",DCE:"10",MICROSOFT:"110",UNKNOWN:"111"};dojox.uuid.assert=function(_5f9,_5fa){if(!_5f9){if(!_5fa){_5fa="An assert statement failed.\n"+"The method dojox.uuid.assert() was called with a 'false' value.\n";}throw new Error(_5fa);}};dojox.uuid.generateNilUuid=function(){return dojox.uuid.NIL_UUID;};dojox.uuid.isValid=function(_5fb){_5fb=_5fb.toString();var _5fc=(dojo.isString(_5fb)&&(_5fb.length==36)&&(_5fb==_5fb.toLowerCase()));if(_5fc){var _5fd=_5fb.split("-");_5fc=((_5fd.length==5)&&(_5fd[0].length==8)&&(_5fd[1].length==4)&&(_5fd[2].length==4)&&(_5fd[3].length==4)&&(_5fd[4].length==12));var _5fe=16;for(var i in _5fd){var part=_5fd[i];var _5ff=parseInt(part,_5fe);_5fc=_5fc&&isFinite(_5ff);}}return _5fc;};dojox.uuid.getVariant=function(_600){if(!dojox.uuid._ourVariantLookupTable){var _601=dojox.uuid.variant;var _602=[];_602[0]=_601.NCS;_602[1]=_601.NCS;_602[2]=_601.NCS;_602[3]=_601.NCS;_602[4]=_601.NCS;_602[5]=_601.NCS;_602[6]=_601.NCS;_602[7]=_601.NCS;_602[8]=_601.DCE;_602[9]=_601.DCE;_602[10]=_601.DCE;_602[11]=_601.DCE;_602[12]=_601.MICROSOFT;_602[13]=_601.MICROSOFT;_602[14]=_601.UNKNOWN;_602[15]=_601.UNKNOWN;dojox.uuid._ourVariantLookupTable=_602;}_600=_600.toString();var _603=_600.charAt(19);var _604=16;var _605=parseInt(_603,_604);dojox.uuid.assert((_605>=0)&&(_605<=16));return dojox.uuid._ourVariantLookupTable[_605];};dojox.uuid.getVersion=function(_606){var _607="dojox.uuid.getVersion() was not passed a DCE Variant UUID.";dojox.uuid.assert(dojox.uuid.getVariant(_606)==dojox.uuid.variant.DCE,_607);_606=_606.toString();var _608=_606.charAt(14);var _609=16;var _60a=parseInt(_608,_609);return _60a;};dojox.uuid.getNode=function(_60b){var _60c="dojox.uuid.getNode() was not passed a TIME_BASED UUID.";dojox.uuid.assert(dojox.uuid.getVersion(_60b)==dojox.uuid.version.TIME_BASED,_60c);_60b=_60b.toString();var _60d=_60b.split("-");var _60e=_60d[4];return _60e;};dojox.uuid.getTimestamp=function(_60f,_610){var _611="dojox.uuid.getTimestamp() was not passed a TIME_BASED UUID.";dojox.uuid.assert(dojox.uuid.getVersion(_60f)==dojox.uuid.version.TIME_BASED,_611);_60f=_60f.toString();if(!_610){_610=null;}switch(_610){case "string":case String:return dojox.uuid.getTimestamp(_60f,Date).toUTCString();break;case "hex":var _612=_60f.split("-");var _613=_612[0];var _614=_612[1];var _615=_612[2];_615=_615.slice(1);var _616=_615+_614+_613;dojox.uuid.assert(_616.length==15);return _616;break;case null:case "date":case Date:var _617=3394248;var _618=16;var _619=_60f.split("-");var _61a=parseInt(_619[0],_618);var _61b=parseInt(_619[1],_618);var _61c=parseInt(_619[2],_618);var _61d=_61c&4095;_61d<<=16;_61d+=_61b;_61d*=4294967296;_61d+=_61a;var _61e=_61d/10000;var _61f=60*60;var _620=_617;var _621=_620*_61f;var _622=_621*1000;var _623=_61e-_622;var _624=new Date(_623);return _624;break;default:dojox.uuid.assert(false,"dojox.uuid.getTimestamp was not passed a valid returnType: "+_610);break;}};return dojox.uuid;});},"esriviewer/ui/user/location/UserLocationWidget":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-class","dojo/_base/lang","dojo/on","dojo/topic","../../base/UIWidget","esri/geometry/Point","esri/SpatialReference"],function(_625,_626,_627,lang,on,_628,_629,_62a,_62b){return _625([_629],{defaultPositioning:{x:20,y:205},browserLocationWkid:4326,isPositionedByConfig:true,positioningParamName:"zoomToUserLocation",maximumAge:0,timeout:6000,enableHighAccuracy:true,postCreate:function(){this.inherited(arguments);_627.add(this.domNode,"userLocationCrosshairContainer fivePixelBorderRadius defaultTwoPixelBorder defaultBackground");var _62c=_626.create("div",{className:"commonIcons32 locationCrosshair"});_626.place(_62c,this.domNode);on(_62c,"click",lang.hitch(this,this.handleZoomToCurrentLocation));this.handleProjectResponse=lang.hitch(this,this._handleProjectResponse);this.zoomToCurrentLocation=lang.hitch(this,this._zoomToCurrentLocation);this.zoomToCurrentLocationError=lang.hitch(this,this._zoomToCurrentLocationError);},handleZoomToCurrentLocation:function(){if(navigator&&navigator.geolocation){navigator.geolocation.getCurrentPosition(this.zoomToCurrentLocation,this.zoomToCurrentLocationError,{maximumAge:this.maximumAge,timeout:this.timeout,enableHighAccuracy:this.enableHighAccuracy});}},_zoomToCurrentLocation:function(_62d){if(_62d!=null&&lang.isObject(_62d)&&_62d.coords){var pt=new _62a(_62d.coords.longitude,_62d.coords.latitude,new _62b({wkid:this.browserLocationWkid}));_628.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_MAP_SR,pt,this.handleProjectResponse);}},_handleProjectResponse:function(_62e){if(_62e!=null&&lang.isArray(_62e)&&_62e.length>0){_628.publish(VIEWER_GLOBALS.EVENTS.MAP.FLASH.POINT,_62e[0]);_628.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PAN_TO,_62e[0],{deepest:true});}},_zoomToCurrentLocationError:function(){_628.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Could not zoom to current location");VIEWER_UTILS.log("Could not get users current location");}});});},"esriviewer/ui/geocode/ReverseGeocodeWindowWidget":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","../window/WindowWidget"],function(_62f,_630,lang,_631){return _62f([_631],{defaultPositioning:{x:600,y:150},windowWidth:"310px",windowHeaderText:"Find Address By Point",windowIconAltText:"Find Address By Point",positioningParamName:"reverseGeocode",windowIconClass:"commonIcons16 binoculars",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/geocode/ReverseGeocodeWidget"],lang.hitch(this,function(_632){this.reverseGeocodeWidget=new _632();this.setContent(this.reverseGeocodeWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_630.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REVERSE_GEOCODE.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_630.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REVERSE_GEOCODE.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_630.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REVERSE_GEOCODE.TOGGLE,lang.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.reverseGeocodeWidget){this.reverseGeocodeWidget.reset();}}});});},"esriviewer/ui/logging/LoggingWidget":function(){define(["dojo/_base/declare","dojo/text!./template/LoggingWidgetTemplate.html","dojo/topic","../base/UITemplatedWidget","dojo/_base/lang","../tooltip/ConfirmTooltip","./model/LoggingViewModel"],function(_633,_634,_635,_636,lang,_637,_638){return _633([_636],{templateString:_634,initListeners:function(){this.inherited(arguments);this.subscribes.push(_635.subscribe(VIEWER_GLOBALS.EVENTS.LOGGING.ADD,lang.hitch(this,this._addLogging)));this.subscribes.push(_635.subscribe(VIEWER_GLOBALS.EVENTS.LOGGING.CLEAR,lang.hitch(this,this._clearLogging)));},postCreate:function(){this.inherited(arguments);this.viewModel=new _638();ko.applyBindings(this.viewModel,this.domNode);},_addLogging:function(_639,type){if(type!=null&&type!=""){type=type.toLowerCase();}if(type===VIEWER_GLOBALS.LOG_TYPE.WARNING){this._createWarningMessage(_639);}else{if(type===VIEWER_GLOBALS.LOG_TYPE.ERROR){this._createErrorMessage(_639);}else{this._createInfoMessage(_639);}}},_createErrorMessage:function(_63a){this._createMessage(_63a,"commonIcons16 error","loggingErrorMessage",VIEWER_GLOBALS.LOG_TYPE.ERROR);},_createInfoMessage:function(_63b){this._createMessage(_63b,"commonIcons16 information","loggingInfoMessage",VIEWER_GLOBALS.LOG_TYPE.INFO);},_createWarningMessage:function(_63c){this._createMessage(_63c,"commonIcons16 warning","loggingWarningMessage",VIEWER_GLOBALS.LOG_TYPE.WARNING);},_createMessage:function(_63d,_63e,_63f,type){this.viewModel.logEntries.push({message:_63d,messageStyleClass:_63f,iconClass:_63e,time:VIEWER_UTILS.getTimeStamp(),type:type});},_clearLogging:function(){this.viewModel.logEntries.removeAll();},_createDeleteAllMessagesTooltip:function(){this.confirmClearLogTooltip=new _637({confirmCallback:lang.hitch(this,this._clearLogging),aroundNode:this.clearLogIcon,displayText:"Clear Log? "});},_showConfirmLogTooltip:function(){if(this.confirmClearLogTooltip==null){this._createDeleteAllMessagesTooltip();}if(this.confirmClearLogTooltip){this.confirmClearLogTooltip.show();}},hidePopups:function(){if(this.confirmClearLogTooltip){this.confirmClearLogTooltip.hide();}}});});},"dijit/layout/StackController":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/keys","dojo/_base/lang","dojo/on","dojo/topic","../focus","../registry","../_Widget","../_TemplatedMixin","../_Container","../form/ToggleButton","dojo/touch","dojo/i18n!../nls/common"],function(_640,_641,_642,_643,keys,lang,on,_644,_645,_646,_647,_648,_649,_64a){var _64b=_641("dijit.layout._StackButton",_64a,{tabIndex:"-1",closeButton:false,_aria_attr:"aria-selected",buildRendering:function(evt){this.inherited(arguments);(this.focusNode||this.domNode).setAttribute("role","tab");}});var _64c=_641("dijit.layout.StackController",[_647,_648,_649],{baseClass:"dijitStackController",templateString:"<span role='tablist' data-dojo-attach-event='onkeydown'></span>",containerId:"",buttonWidget:_64b,buttonWidgetCloseClass:"dijitStackCloseButton",pane2button:function(id){return _646.byId(this.id+"_"+id);},postCreate:function(){this.inherited(arguments);this.own(_644.subscribe(this.containerId+"-startup",lang.hitch(this,"onStartup")),_644.subscribe(this.containerId+"-addChild",lang.hitch(this,"onAddChild")),_644.subscribe(this.containerId+"-removeChild",lang.hitch(this,"onRemoveChild")),_644.subscribe(this.containerId+"-selectChild",lang.hitch(this,"onSelectChild")),_644.subscribe(this.containerId+"-containerKeyDown",lang.hitch(this,"onContainerKeyDown")));this.containerNode.dojoClick=true;this.own(on(this.containerNode,"click",lang.hitch(this,function(evt){var _64d=_646.getEnclosingWidget(evt.target);if(_64d!=this.containerNode&&!_64d.disabled&&_64d.page){for(var _64e=evt.target;_64e!==this.containerNode;_64e=_64e.parentNode){if(_642.contains(_64e,this.buttonWidgetCloseClass)){this.onCloseButtonClick(_64d.page);break;}else{if(_64e==_64d.domNode){this.onButtonClick(_64d.page);break;}}}}})));},onStartup:function(info){this.textDir=info.textDir;_640.forEach(info.children,this.onAddChild,this);if(info.selected){this.onSelectChild(info.selected);}var _64f=_646.byId(this.containerId).containerNode,_650=lang.hitch(this,"pane2button"),_651={"title":"label","showtitle":"showLabel","iconclass":"iconClass","closable":"closeButton","tooltip":"title","disabled":"disabled","textdir":"textdir"},_652=function(attr,_653){return on(_64f,"attrmodified-"+attr,function(evt){var _654=_650(evt.detail&&evt.detail.widget&&evt.detail.widget.id);if(_654){_654.set(_653,evt.detail.newValue);}});};for(var attr in _651){this.own(_652(attr,_651[attr]));}},destroy:function(_655){this.destroyDescendants(_655);this.inherited(arguments);},onAddChild:function(page,_656){var Cls=lang.isString(this.buttonWidget)?lang.getObject(this.buttonWidget):this.buttonWidget;var _657=new Cls({id:this.id+"_"+page.id,name:this.id+"_"+page.id,label:page.title,disabled:page.disabled,ownerDocument:this.ownerDocument,dir:page.dir,lang:page.lang,textDir:page.textDir||this.textDir,showLabel:page.showTitle,iconClass:page.iconClass,closeButton:page.closable,title:page.tooltip,page:page});this.addChild(_657,_656);page.controlButton=_657;if(!this._currentChild){this.onSelectChild(page);}var _658=page._wrapper.getAttribute("aria-labelledby")?page._wrapper.getAttribute("aria-labelledby")+" "+_657.id:_657.id;page._wrapper.removeAttribute("aria-label");page._wrapper.setAttribute("aria-labelledby",_658);},onRemoveChild:function(page){if(this._currentChild===page){this._currentChild=null;}var _659=this.pane2button(page.id);if(_659){this.removeChild(_659);_659.destroy();}delete page.controlButton;},onSelectChild:function(page){if(!page){return;}if(this._currentChild){var _65a=this.pane2button(this._currentChild.id);_65a.set("checked",false);_65a.focusNode.setAttribute("tabIndex","-1");}var _65b=this.pane2button(page.id);_65b.set("checked",true);this._currentChild=page;_65b.focusNode.setAttribute("tabIndex","0");var _65c=_646.byId(this.containerId);},onButtonClick:function(page){var _65d=this.pane2button(page.id);_645.focus(_65d.focusNode);if(this._currentChild&&this._currentChild.id===page.id){_65d.set("checked",true);}var _65e=_646.byId(this.containerId);_65e.selectChild(page);},onCloseButtonClick:function(page){var _65f=_646.byId(this.containerId);_65f.closeChild(page);if(this._currentChild){var b=this.pane2button(this._currentChild.id);if(b){_645.focus(b.focusNode||b.domNode);}}},adjacent:function(_660){if(!this.isLeftToRight()&&(!this.tabPosition||/top|bottom/.test(this.tabPosition))){_660=!_660;}var _661=this.getChildren();var idx=_640.indexOf(_661,this.pane2button(this._currentChild.id)),_662=_661[idx];var _663;do{idx=(idx+(_660?1:_661.length-1))%_661.length;_663=_661[idx];}while(_663.disabled&&_663!=_662);return _663;},onkeydown:function(e,_664){if(this.disabled||e.altKey){return;}var _665=null;if(e.ctrlKey||!e._djpage){switch(e.keyCode){case keys.LEFT_ARROW:case keys.UP_ARROW:if(!e._djpage){_665=false;}break;case keys.PAGE_UP:if(e.ctrlKey){_665=false;}break;case keys.RIGHT_ARROW:case keys.DOWN_ARROW:if(!e._djpage){_665=true;}break;case keys.PAGE_DOWN:if(e.ctrlKey){_665=true;}break;case keys.HOME:var _666=this.getChildren();for(var idx=0;idx<_666.length;idx++){var _667=_666[idx];if(!_667.disabled){this.onButtonClick(_667.page);break;}}e.stopPropagation();e.preventDefault();break;case keys.END:var _666=this.getChildren();for(var idx=_666.length-1;idx>=0;idx--){var _667=_666[idx];if(!_667.disabled){this.onButtonClick(_667.page);break;}}e.stopPropagation();e.preventDefault();break;case keys.DELETE:case "W".charCodeAt(0):if(this._currentChild.closable&&(e.keyCode==keys.DELETE||e.ctrlKey)){this.onCloseButtonClick(this._currentChild);}e.stopPropagation();e.preventDefault();break;case keys.TAB:if(e.ctrlKey){this.onButtonClick(this.adjacent(!e.shiftKey).page);e.stopPropagation();e.preventDefault();}break;}if(_665!==null){this.onButtonClick(this.adjacent(_665).page);e.stopPropagation();e.preventDefault();}}},onContainerKeyDown:function(info){info.e._djpage=info.page;this.onkeydown(info.e);}});_64c.StackButton=_64b;return _64c;});},"esriviewer/ui/basemap/BasemapGalleryWidget":function(){define(["dojo/_base/declare","dojo/text!./template/BasemapGalleryTemplate.html","dojo/_base/lang","dojo/_base/connect","dojo/topic","../base/UITemplatedWidget","./model/BasemapGalleryViewModel","esri/arcgis/utils"],function(_668,_669,lang,con,_66a,_66b,_66c,_66d){return _668([_66b],{configuredPortalBasemapsGroupId:null,animateOnPlace:false,usePortalBasemaps:false,animate:true,_defaultArcGISBasemapTitle:null,templateString:_669,constructor:function(){this.animation=VIEWER_GLOBALS.ANIMATIONS.FADE.IN;},initListeners:function(){_66a.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.TOGGLE,lang.hitch(this,this.handleToggleBasemapGallery));_66a.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.SHOW,lang.hitch(this,this.handleShowBasemapGallery));_66a.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.HIDE,lang.hitch(this,this.handleHideBasemapGallery));_66a.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.IS_HIDDEN,lang.hitch(this,this.handleBasemapGalleryIsHidden));_66a.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.GET,lang.hitch(this,this.handleGetBasemapGallery));},handleGetBasemapGallery:function(_66e){if(_66e!=null&&lang.isFunction(_66e)){_66e(this.basemapGallery);}},loadViewerConfigurationData:function(){var _66f;_66a.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_670){_66f=_670;});if(_66f){if(_66f.useConfiguredPortalBasemaps!=null){this.usePortalBasemaps=_66f.useConfiguredPortalBasemaps;}if(_66f.basemapGalleryDefault!=null){this._defaultArcGISBasemapTitle=_66f.basemapGalleryDefault;}if(_66f.configuredPortalBasemapsGroupId!=null){this.configuredPortalBasemapsGroupId=_66f.configuredPortalBasemapsGroupId;}}var _671=null;_66a.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"animationsEnabled",function(_672){_671=_672;});if(_671!=null){this.animate=_671;}},handleBasemapGalleryIsHidden:function(_673){if(_673!=null&&lang.isFunction(_673)){_673(!this.viewModel.visible());}},handleHideBasemapGallery:function(){if(this.viewModel.visible()){this.viewModel.visible(false);if(this.animate){this._removeAnimationClasses();}}},handleShowBasemapGallery:function(){if(!this.viewModel.visible()){this.viewModel.visible(true);if(this.animate){this._animateWidget();}}},handleToggleBasemapGallery:function(){if(!this.viewModel.visible()){this.handleShowBasemapGallery();}else{this.handleHideBasemapGallery();}},postCreate:function(){this.inherited(arguments);this.viewModel=new _66c();ko.applyBindings(this.viewModel,this.domNode);_66a.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.BASEMAP_GALLERY,this);var map;_66a.publish(VIEWER_GLOBALS.EVENTS.MAP.GET,function(_674){map=_674;});var _675={map:map,showArcGISBasemaps:true};var _676;_66a.publish(VIEWER_GLOBALS.EVENTS.PORTAL.GET_INSTANCE,function(_677){_676=_677;});if(this.usePortalBasemaps&&_676){var _678;_66a.publish(VIEWER_GLOBALS.EVENTS.PORTAL.GET_BASEMAPS,lang.hitch(this,function(_679){_678=_679;if(_678&&_678.length>0){_675.showArcGISBasemaps=false;_675.basemaps=_678;}this._initGallery(_675);}),this.configuredPortalBasemapsGroupId);}else{this._initGallery(_675);}},_initGallery:function(_67a){require(["esri/dijit/BasemapGallery"],lang.hitch(this,function(_67b){this.basemapGallery=new _67b(_67a,this.basemapGalleryContents);this.basemapGallery.on("load",lang.hitch(this,this.handleBasemapGalleryLoaded));con.connect(this.basemapGallery,"onSelectionChange",lang.hitch(this,this.handleBasemapSelectionChanged));this.basemapGallery.startup();}));},handleBasemapSelectionChanged:function(evt){this.handleHideBasemapGallery();_66a.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.CHANGED);},_setArcGISBasemapByTitle:function(){if(this._defaultArcGISBasemapTitle){var _67c=this._getBasemapIdByTitle(this._defaultArcGISBasemapTitle);if(_67c!=null){this.basemapGallery.select(_67c);}}},handleBasemapGalleryLoaded:function(){if(this._defaultArcGISBasemapTitle!=null){this._setArcGISBasemapByTitle();}},_getBasemapIdByTitle:function(_67d){if(this.basemapGallery&&this.basemapGallery.basemaps){var _67e;for(var i=0;i<this.basemapGallery.basemaps.length;i++){_67e=this.basemapGallery.basemaps[i];if(_67e!=null&&_67e.title!=null){if(_67e.title==_67d){return _67e.id;}}}}return null;}});});},"dojo/dnd/move":function(){define(["../_base/declare","../dom-geometry","../dom-style","./common","./Mover","./Moveable"],function(_67f,_680,_681,dnd,_682,_683){var _684=_67f("dojo.dnd.move.constrainedMoveable",_683,{constraints:function(){},within:false,constructor:function(node,_685){if(!_685){_685={};}this.constraints=_685.constraints;this.within=_685.within;},onFirstMove:function(_686){var c=this.constraintBox=this.constraints.call(this,_686);c.r=c.l+c.w;c.b=c.t+c.h;if(this.within){var mb=_680.getMarginSize(_686.node);c.r-=mb.w;c.b-=mb.h;}},onMove:function(_687,_688){var c=this.constraintBox,s=_687.node.style;this.onMoving(_687,_688);_688.l=_688.l<c.l?c.l:c.r<_688.l?c.r:_688.l;_688.t=_688.t<c.t?c.t:c.b<_688.t?c.b:_688.t;s.left=_688.l+"px";s.top=_688.t+"px";this.onMoved(_687,_688);}});var _689=_67f("dojo.dnd.move.boxConstrainedMoveable",_684,{box:{},constructor:function(node,_68a){var box=_68a&&_68a.box;this.constraints=function(){return box;};}});var _68b=_67f("dojo.dnd.move.parentConstrainedMoveable",_684,{area:"content",constructor:function(node,_68c){var area=_68c&&_68c.area;this.constraints=function(){var n=this.node.parentNode,s=_681.getComputedStyle(n),mb=_680.getMarginBox(n,s);if(area=="margin"){return mb;}var t=_680.getMarginExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="border"){return mb;}t=_680.getBorderExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="padding"){return mb;}t=_680.getPadExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;return mb;};}});return {constrainedMoveable:_684,boxConstrainedMoveable:_689,parentConstrainedMoveable:_68b};});},"esriviewer/portal/PortalSupport":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/connect","dojo/_base/lang","../base/ConfigurationEntryMixin","./PortalSearcher","../base/DataLoaderSupport","esri/dijit/Basemap","esri/dijit/BasemapLayer"],function(_68d,_68e,con,lang,_68f,_690,_691,_692,_693){return _68d([_68f,_691],{constructor:function(){this.portalConfiguration=null;this.loadViewerConfigurationData();if(this.portalConfiguration!=null&&lang.isObject(this.portalConfiguration)&&this.portalConfiguration.url!=null&&this.portalConfiguration.url!=""){this.initPortal();}else{VIEWER_UTILS.log("Portal Configuration not found",VIEWER_GLOBALS.LOG_TYPE.ERROR);_68e.publish(VIEWER_GLOBALS.EVENTS.PORTAL.INITIALIZED);}},initPortal:function(){require(["esri/arcgis/Portal"],lang.hitch(this,function(_694){this.portal=new _694.Portal(this.portalConfiguration.url);con.connect(this.portal,"onLoad",lang.hitch(this,this._handlePortalLoaded));}));},_handlePortalLoaded:function(_695){this._createPortalSearcher();this.initListeners();_68e.publish(VIEWER_GLOBALS.EVENTS.PORTAL.INITIALIZED);},initListeners:function(){_68e.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.GET_INSTANCE,lang.hitch(this,this.handleGetPortalInstance));_68e.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.LOG_IN,lang.hitch(this,this.handlePortalLogIn));_68e.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.LOG_OUT,lang.hitch(this,this.handlePortalLogOut));_68e.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.IS_USER_LOGGED_IN,lang.hitch(this,this.handleIsUserLoggedIn));_68e.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.GET_BASEMAPS,lang.hitch(this,this.getBasemaps));},getBasemaps:function(_696,_697){if(_696!=null&&lang.isFunction(_696)){var self=this;var _698=[];if(this.portal){var _699;if(_697!=null){_699="group:"+_697;}else{if(this.portal.basemapGalleryGroupQuery){_699=this.portal.basemapGalleryGroupQuery.replace("id:","group:");}else{return;}}_68e.publish(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_WEBMAPS,_699,null,null,null,function(_69a){if(_69a&&_69a.results){var _69b;var _69c={f:"json"};for(var i=0;i<_69a.results.length;i++){_69b=_69a.results[i];self.loadJsonP(_69b.itemDataUrl,_69c,lang.partial(function(item,_69d){var _69e=[];for(var j=0;j<_69d.baseMap.baseMapLayers.length;j++){var _69f=new _693({url:_69d.baseMap.baseMapLayers[j].url});_69e.push(_69f);}var _6a0=new _692({thumbnailUrl:item.thumbnailUrl,title:item.title,layers:_69e});_698.push(_6a0);if(_698.length==_69a.results.length){_696(_698);}},_69b));}}});}}},handleIsUserLoggedIn:function(_6a1){if(_6a1!=null&&lang.isFunction(_6a1)){_6a1(this.portal&&this.portal.getPortalUser()!=null);}},handlePortalLogOut:function(){this.portal.signOut();_68e.publish(VIEWER_GLOBALS.EVENTS.PORTAL.USER_LOGGED_OUT);},handlePortalLogIn:function(_6a2){this.portal.signIn().then(lang.hitch(this,function(user){_68e.publish(VIEWER_GLOBALS.EVENTS.PORTAL.USER_LOGGED_IN,user);if(_6a2!=null&&lang.isFunction(_6a2)){_6a2(user);}}));},loadViewerConfigurationData:function(){var _6a3;_68e.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"portal",function(_6a4){_6a3=_6a4;});this.portalConfiguration=_6a3;},handleGetPortalInstance:function(_6a5){if(_6a5!=null&&lang.isFunction(_6a5)){_6a5(this.portal);}},_createPortalSearcher:function(){this.portalSearcher=new _690();}});});},"dojox/sql/_crypto":function(){define(["dijit","dojo","dojox"],function(_6a6,dojo,_6a7){dojo.provide("dojox.sql._crypto");dojo.mixin(_6a7.sql._crypto,{_POOL_SIZE:100,encrypt:function(_6a8,_6a9,_6aa){this._initWorkerPool();var msg={plaintext:_6a8,password:_6a9};msg=dojo.toJson(msg);msg="encr:"+String(msg);this._assignWork(msg,_6aa);},decrypt:function(_6ab,_6ac,_6ad){this._initWorkerPool();var msg={ciphertext:_6ab,password:_6ac};msg=dojo.toJson(msg);msg="decr:"+String(msg);this._assignWork(msg,_6ad);},_initWorkerPool:function(){if(!this._manager){try{this._manager=google.gears.factory.create("beta.workerpool","1.0");this._unemployed=[];this._employed={};this._handleMessage=[];var self=this;this._manager.onmessage=function(msg,_6ae){var _6af=self._employed["_"+_6ae];self._employed["_"+_6ae]=undefined;self._unemployed.push("_"+_6ae);if(self._handleMessage.length){var _6b0=self._handleMessage.shift();self._assignWork(_6b0.msg,_6b0.callback);}_6af(msg);};var _6b1="function _workerInit(){"+"gearsWorkerPool.onmessage = "+String(this._workerHandler)+";"+"}";var code=_6b1+" _workerInit();";for(var i=0;i<this._POOL_SIZE;i++){this._unemployed.push("_"+this._manager.createWorker(code));}}catch(exp){throw exp.message||exp;}}},_assignWork:function(msg,_6b2){if(!this._handleMessage.length&&this._unemployed.length){var _6b3=this._unemployed.shift().substring(1);this._employed["_"+_6b3]=_6b2;this._manager.sendMessage(msg,parseInt(_6b3,10));}else{this._handleMessage={msg:msg,callback:_6b2};}},_workerHandler:function(msg,_6b4){var Sbox=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22];var Rcon=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]];function _6b5(_6b6,w){var Nb=4;var Nr=w.length/Nb-1;var _6b7=[[],[],[],[]];for(var i=0;i<4*Nb;i++){_6b7[i%4][Math.floor(i/4)]=_6b6[i];}_6b7=_6b8(_6b7,w,0,Nb);for(var _6b9=1;_6b9<Nr;_6b9++){_6b7=_6ba(_6b7,Nb);_6b7=_6bb(_6b7,Nb);_6b7=_6bc(_6b7,Nb);_6b7=_6b8(_6b7,w,_6b9,Nb);}_6b7=_6ba(_6b7,Nb);_6b7=_6bb(_6b7,Nb);_6b7=_6b8(_6b7,w,Nr,Nb);var _6bd=new Array(4*Nb);for(var i=0;i<4*Nb;i++){_6bd[i]=_6b7[i%4][Math.floor(i/4)];}return _6bd;};function _6ba(s,Nb){for(var r=0;r<4;r++){for(var c=0;c<Nb;c++){s[r][c]=Sbox[s[r][c]];}}return s;};function _6bb(s,Nb){var t=new Array(4);for(var r=1;r<4;r++){for(var c=0;c<4;c++){t[c]=s[r][(c+r)%Nb];}for(var c=0;c<4;c++){s[r][c]=t[c];}}return s;};function _6bc(s,Nb){for(var c=0;c<4;c++){var a=new Array(4);var b=new Array(4);for(var i=0;i<4;i++){a[i]=s[i][c];b[i]=s[i][c]&128?s[i][c]<<1^283:s[i][c]<<1;}s[0][c]=b[0]^a[1]^b[1]^a[2]^a[3];s[1][c]=a[0]^b[1]^a[2]^b[2]^a[3];s[2][c]=a[0]^a[1]^b[2]^a[3]^b[3];s[3][c]=a[0]^b[0]^a[1]^a[2]^b[3];}return s;};function _6b8(_6be,w,rnd,Nb){for(var r=0;r<4;r++){for(var c=0;c<Nb;c++){_6be[r][c]^=w[rnd*4+c][r];}}return _6be;};function _6bf(key){var Nb=4;var Nk=key.length/4;var Nr=Nk+6;var w=new Array(Nb*(Nr+1));var temp=new Array(4);for(var i=0;i<Nk;i++){var r=[key[4*i],key[4*i+1],key[4*i+2],key[4*i+3]];w[i]=r;}for(var i=Nk;i<(Nb*(Nr+1));i++){w[i]=new Array(4);for(var t=0;t<4;t++){temp[t]=w[i-1][t];}if(i%Nk==0){temp=_6c0(_6c1(temp));for(var t=0;t<4;t++){temp[t]^=Rcon[i/Nk][t];}}else{if(Nk>6&&i%Nk==4){temp=_6c0(temp);}}for(var t=0;t<4;t++){w[i][t]=w[i-Nk][t]^temp[t];}}return w;};function _6c0(w){for(var i=0;i<4;i++){w[i]=Sbox[w[i]];}return w;};function _6c1(w){w[4]=w[0];for(var i=0;i<4;i++){w[i]=w[i+1];}return w;};function _6c2(_6c3,_6c4,_6c5){if(!(_6c5==128||_6c5==192||_6c5==256)){return "";}var _6c6=_6c5/8;var _6c7=new Array(_6c6);for(var i=0;i<_6c6;i++){_6c7[i]=_6c4.charCodeAt(i)&255;}var key=_6b5(_6c7,_6bf(_6c7));key=key.concat(key.slice(0,_6c6-16));var _6c8=16;var _6c9=new Array(_6c8);var _6ca=(new Date()).getTime();for(var i=0;i<4;i++){_6c9[i]=(_6ca>>>i*8)&255;}for(var i=0;i<4;i++){_6c9[i+4]=(_6ca/4294967296>>>i*8)&255;}var _6cb=_6bf(key);var _6cc=Math.ceil(_6c3.length/_6c8);var _6cd=new Array(_6cc);for(var b=0;b<_6cc;b++){for(var c=0;c<4;c++){_6c9[15-c]=(b>>>c*8)&255;}for(var c=0;c<4;c++){_6c9[15-c-4]=(b/4294967296>>>c*8);}var _6ce=_6b5(_6c9,_6cb);var _6cf=b<_6cc-1?_6c8:(_6c3.length-1)%_6c8+1;var ct="";for(var i=0;i<_6cf;i++){var _6d0=_6c3.charCodeAt(b*_6c8+i);var _6d1=_6d0^_6ce[i];ct+=String.fromCharCode(_6d1);}_6cd[b]=_6d2(ct);}var _6d3="";for(var i=0;i<8;i++){_6d3+=String.fromCharCode(_6c9[i]);}_6d3=_6d2(_6d3);return _6d3+"-"+_6cd.join("-");};function _6d4(_6d5,_6d6,_6d7){if(!(_6d7==128||_6d7==192||_6d7==256)){return "";}var _6d8=_6d7/8;var _6d9=new Array(_6d8);for(var i=0;i<_6d8;i++){_6d9[i]=_6d6.charCodeAt(i)&255;}var _6da=_6bf(_6d9);var key=_6b5(_6d9,_6da);key=key.concat(key.slice(0,_6d8-16));var _6db=_6bf(key);_6d5=_6d5.split("-");var _6dc=16;var _6dd=new Array(_6dc);var _6de=_6df(_6d5[0]);for(var i=0;i<8;i++){_6dd[i]=_6de.charCodeAt(i);}var _6e0=new Array(_6d5.length-1);for(var b=1;b<_6d5.length;b++){for(var c=0;c<4;c++){_6dd[15-c]=((b-1)>>>c*8)&255;}for(var c=0;c<4;c++){_6dd[15-c-4]=((b/4294967296-1)>>>c*8)&255;}var _6e1=_6b5(_6dd,_6db);_6d5[b]=_6df(_6d5[b]);var pt="";for(var i=0;i<_6d5[b].length;i++){var _6e2=_6d5[b].charCodeAt(i);var _6e3=_6e2^_6e1[i];pt+=String.fromCharCode(_6e3);}_6e0[b-1]=pt;}return _6e0.join("");};function _6d2(str){return str.replace(/[\0\t\n\v\f\r\xa0!-]/g,function(c){return "!"+c.charCodeAt(0)+"!";});};function _6df(str){return str.replace(/!\d\d?\d?!/g,function(c){return String.fromCharCode(c.slice(1,-1));});};function _6e4(_6e5,_6e6){return _6c2(_6e5,_6e6,256);};function _6e7(_6e8,_6e9){return _6d4(_6e8,_6e9,256);};var cmd=msg.substr(0,4);var arg=msg.substr(5);if(cmd=="encr"){arg=eval("("+arg+")");var _6ea=arg.plaintext;var _6eb=arg.password;var _6ec=_6e4(_6ea,_6eb);gearsWorkerPool.sendMessage(String(_6ec),_6b4);}else{if(cmd=="decr"){arg=eval("("+arg+")");var _6ed=arg.ciphertext;var _6eb=arg.password;var _6ec=_6e7(_6ed,_6eb);gearsWorkerPool.sendMessage(String(_6ec),_6b4);}}}});});},"esriviewer/ui/layers/base/model/UserPersistedLayersListViewModel":function(){define(["dojo/_base/declare","dojo/Evented","dojo/has"],function(_6ee,_6ef,has){return _6ee([_6ef],{persistedInfoIconDefaultClasses:"commonIcons16 information",CLEAR_USER_PERSISTED_LAYERS:"clearUserPersistedLayers",REMOVE_USER_PERSISTED_LAYER:"removeUserPersistedLayer",ADD_USER_PERSISTED_LAYER_TO_MAP:"addUserPersistedLayerToMap",constructor:function(){this.persistedLayerInfoIconClass=ko.observable();if((has("ie")<8)){this.persistedLayerInfoIconClass(this.persistedInfoIconDefaultClasses+" userPersistedLayersInfoIconIEHack");}else{this.persistedLayerInfoIconClass(this.persistedInfoIconDefaultClasses+" userPersistedLayersInfoIcon");}var self=this;this.addedUserPersistedLayers=ko.observableArray();this.removeUserPersistedLayer=function(_6f0){if(_6f0==null){return;}self.emit(self.REMOVE_USER_PERSISTED_LAYER,_6f0);self.addedUserPersistedLayers.remove(_6f0);};this.addPersistedLayerToMap=function(_6f1){if(_6f1==null){return;}self.emit(self.ADD_USER_PERSISTED_LAYER_TO_MAP,_6f1);};this.hasEntries=ko.computed(function(){return self.addedUserPersistedLayers().length>0;});},sort:function(){this.addedUserPersistedLayers.sort(function(left,_6f2){var _6f3=left.name.toLowerCase();var _6f4=_6f2.name.toLowerCase();return _6f3==_6f4?0:(_6f3<_6f4?-1:1);});},clearEntries:function(){this.addedUserPersistedLayers.removeAll();this.emit(this.CLEAR_USER_PERSISTED_LAYERS);}});});},"esriviewer/manager/base/ViewerManagerUI":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","./../../ui/user/location/UserLocationWidget","../../ui/footer/FooterTogglerWidget","../../ui/messaging/MessagingWidget","../../ui/navigation/NavigationWidget","../../ui/throbber/ThrobberWidget","../../ui/accordion/ToolsAccordion","dojo/Evented"],function(_6f5,lang,_6f6,_6f7,_6f8,_6f9,_6fa,_6fb,_6fc,_6fd){return _6f5([_6fd],{FINALIZE_UI_LOAD_COMPLETE:"finalizeUILoadComplete",loadUI:function(){var _6fe=true;if(lang.isObject(this.viewerConfig.header)){if(this.viewerConfig.header.display!=null){_6fe=!(String(this.viewerConfig.header.display).toLowerCase()=="false");}}if(_6fe){this._createHeaderLogo();}this._createIdentifyWidget();this._createMeasureWidget();this._createQueryBuilderWidget();this._createReverseGeocodeWidget();this.createFooterWidget();this._createConfigureViewerWidget();this._createDrawWidget();this._createLegendWidget();this._createReflectivityWidget();var _6ff=true;if(lang.isObject(this.viewerConfig.toolsBar)){if(this.viewerConfig.toolsBar.display!=null){_6ff=!(String(this.viewerConfig.toolsBar.display).toLowerCase()=="false");}}if(_6ff){this._createViewerMainToolbar();}this._createWeatherWidget();this._createTimeSliderWidget();if(VIEWER_UTILS.isHtml5FileUploadSupported()){this._createPointUploadWidget();}else{VIEWER_UTILS.log("Point upload widget disabled. HTML 5 not supported",VIEWER_GLOBALS.LOG_TYPE.WARNING);}this._createFeatureEditorWidget();this._createSocialMediaWidget();this._createPrintWidget();this._createZoomToWidget();this._createZoomToUserLocationWidget();this._createLayersTransparencyWidget();this._createViewerAccordion();this._createPortalPublisherWidget();this._createPlottingWidget();this.finalizeUILoad();},_createViewerAccordion:function(){if(this.viewerConfig.toolsAccordion.create==null||this.viewerConfig.toolsAccordion.create!=false){_6f6.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.LOAD_DEFAULT_TOOLS,lang.hitch(this,this.createDefaultAccordionTools));this.viewerAccordion=new _6fc({allowCollapse:this.allowAccordionCollapse,movable:this.allowAccordionMove});_6f6.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.VIEWER_ACCORDION,this.viewerAccordion);}},finalizeUILoad:function(){if(this.viewerAccordion!=null){this.viewerAccordion.startup();var _700=true;}this.createThrobberWidget();this.emit(this.FINALIZE_UI_LOAD_COMPLETE);},_createHeaderLogo:function(){require(["esriviewer/ui/header/HeaderLogo"],lang.hitch(this,function(_701){this.headerLogo=new _701();_6f6.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.HEADER,this.headerLogo);}));},_createIdentifyWidget:function(){if(this.viewerConfig.identifyWidget!=null&&lang.isObject(this.viewerConfig.identifyWidget)&&this.viewerConfig.identifyWidget.create!=null&&this.viewerConfig.identifyWidget.create==true){this.createIdentifyWidget();}},createIdentifyWidget:function(){},_createMeasureWidget:function(){if(this.viewerConfig.geometryServiceUrl!=null&&this.viewerConfig.geometryServiceUrl){if(this.viewerConfig.measureWidget==null||(lang.isObject(this.viewerConfig.measureWidget)&&this.viewerConfig.measureWidget.create!=false)){this.createMeasureWidget();}}},createMeasureWidget:function(){},_createPrintWidget:function(){if(this.viewerConfig.printWidget==null||(lang.isObject(this.viewerConfig.printWidget)&&this.viewerConfig.printWidget.create!=null&&this.viewerConfig.printWidget.create&&this.viewerConfig.printWidget.printTaskUrl!=null)){this.createPrintWidget();}},createPrintWidget:function(){},_createSocialMediaWidget:function(){if(this.viewerConfig.socialMediaWidget==null||(lang.isObject(this.viewerConfig.socialMediaWidget)&&this.viewerConfig.socialMediaWidget.create!=null&&this.viewerConfig.socialMediaWidget.create)){this.createSocialMediaWidget();}},createSocialMediaWidget:function(){},_createFeatureEditorWidget:function(){if(this.viewerConfig.featureEditorWidget!=null&&this.viewerConfig.featureEditorWidget.service!=null&&this.viewerConfig.featureEditorWidget.service.url!=""){this.createFeatureEditorWidget();}},createFeatureEditorWidget:function(){},_createZoomToUserLocationWidget:function(){if(navigator&&navigator.geolocation&&this.viewerConfig.zoomToUserLocationWidget!=null&&lang.isObject(this.viewerConfig.zoomToUserLocationWidget)&&this.viewerConfig.zoomToUserLocationWidget.create===true){this.createZoomToUserLocationWidget();}},createZoomToUserLocationWidget:function(){this.userLocationWidget=new _6f7();_6f6.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.USER_LOCATION,this.userLocationWidget);},_createZoomToWidget:function(){if(this.viewerConfig.zoomToWidget==null||(lang.isObject(this.viewerConfig.zoomToWidget)&&this.viewerConfig.zoomToWidget.create!=null&&this.viewerConfig.zoomToWidget.create)){this.createZoomToWidget();}},createZoomToWidget:function(){},_createPointUploadWidget:function(){if(this.viewerConfig.pointUploadWidget!=null&&this.viewerConfig.pointUploadWidget.create==true){this.createPointUploadWidget();}},createPointUploadWidget:function(){},_createTimeSliderWidget:function(){if(!this.forceHideCoreTimeSlider&&(this.viewerConfig.timeSliderWidget!=null&&this.viewerConfig.timeSliderWidget.create!=false)){this.createTimeSliderWidget();}},createTimeSliderWidget:function(){},_createLayersTransparencyWidget:function(){if(this.viewerConfig.layersTransparencyWidget==null||(lang.isObject(this.viewerConfig.layersTransparencyWidget)&&this.viewerConfig.layersTransparencyWidget.create!=null&&this.viewerConfig.layersTransparencyWidget.create)){this.createLayersTransparencyWidget();}},createLayersTransparencyWidget:function(){},_createConfigureViewerWidget:function(){if(this.viewerConfig.configureWidget==null||this.viewerConfig.configureWidget.create==null||this.viewerConfig.configureWidget.create==true){this.createConfigureViewerWidget();}},createConfigureViewerWidget:function(){},_createReverseGeocodeWidget:function(){if(this.viewerConfig.reverseGeocodeWidget==null||this.viewerConfig.reverseGeocodeWidget.create==null||this.viewerConfig.reverseGeocodeWidget.create==true){if(this.viewerConfig.locators!=null&&lang.isArray(this.viewerConfig.locators)&&this.viewerConfig.locators.length>0){this.createReverseGeocodeWidget();}}},createReverseGeocodeWidget:function(){},_createQueryBuilderWidget:function(){if(this.viewerConfig.queryBuilder&&this.viewerConfig.queryBuilder.create!=null&&this.viewerConfig.queryBuilder.create){this.createQueryBuilderWidget();}},createQueryBuilderWidget:function(){},_createWeatherWidget:function(){if(lang.isObject(this.viewerConfig.weatherWidget)&&this.viewerConfig.weatherWidget.create!=null&&this.viewerConfig.weatherWidget.create==true){this.createWeatherWidget();}},createWeatherWidget:function(){},_createPlottingWidget:function(){if(lang.isObject(this.viewerConfig.plottingWidget)&&this.viewerConfig.plottingWidget.create!=null&&this.viewerConfig.plottingWidget.create==true){this.createPlottingWidget();}},createPlottingWidget:function(){},_createPortalPublisherWidget:function(){if(this.viewerConfig.portal!=null&&lang.isObject(this.viewerConfig.portal)&&this.viewerConfig.portal.url){if(this.viewerConfig.portalPublisher&&this.viewerConfig.portalPublisher.window&&this.viewerConfig.portalPublisher.window.create){this.createPortalPublisherWidget();}}},createPortalPublisherWidget:function(){},createFooterWidget:function(){var _702=false;if(lang.isObject(this.viewerConfig.footerTogglerWidget)){if(this.viewerConfig.footerTogglerWidget.create!=null){_702=!(String(this.viewerConfig.footerTogglerWidget.create).toLowerCase()=="false");}}if(_702){this.footerTogglerWidget=new _6f8();this.footerTogglerWidget.on("firstFooterShow",lang.hitch(this,this.handleFirstFooterShow));_6f6.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.FOOTER,this.footerTogglerWidget);}},handleFirstFooterShow:function(){},_createLoggingWidget:function(){if(this.viewerConfig.logging&&this.viewerConfig.logging.window&&this.viewerConfig.logging.window.create){this.createLoggingWidget();}},createLoggingWidget:function(){},_createMessagingWidget:function(){this.messagingWidget=new _6f9();_6f6.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MESSAGING,this.messagingWidget);},createThrobberWidget:function(){this.loadingThrobber=new _6fb();_6f6.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.THROBBER,this.loadingThrobber);},_createReflectivityWidget:function(){if(this.viewerConfig.reflectivityWidget!=null&&lang.isObject(this.viewerConfig.reflectivityWidget)&&this.viewerConfig.reflectivityWidget.create==true){this.createReflectivityWidget();}},createReflectivityWidget:function(){},_createLegendWidget:function(){if(this.viewerConfig.map.legend==null||this.viewerConfig.map.legend.create==true){this.createLegendWidget();}},createLegendWidget:function(){},_createNavigationToolbar:function(){this.createNavigationToolbar();if(this.navigationToolbar){_6f6.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.NAVIGATION_TOOLBAR,this.navigationToolbar);}this.processNavigationToolbarAddons();},processNavigationToolbarAddons:function(){},createNavigationToolbar:function(){this.navigationToolbar=new _6fa();},_createDrawWidget:function(){if(this.viewerConfig.drawWidget==null||!lang.isObject(this.viewerConfig.drawWidget)||this.viewerConfig.drawWidget.create==null||this.viewerConfig.drawWidget.create!=false){this.createDrawWidget();}},createDrawWidget:function(){},_createViewerMainToolbar:function(){require(["esriviewer/ui/toolbar/ActionsToolbarWidget"],lang.hitch(this,function(_703){this.mainToolbar=new _703();_6f6.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAIN_TOOLBAR,this.mainToolbar);if(lang.isObject(this.viewerConfig.map)){this.mainToolbar.setBasemaps(this.viewerConfig.map.basemaps);}this.createViewerDefaultTools();this._createNavigationToolbar();this._createBookmarkController();this.tweakMainToolbar();}));},tweakMainToolbar:function(){},createViewerDefaultTools:function(){require(["esriviewer/ui/tools/ViewerDefaultTools"],lang.hitch(this,function(_704){this.viewerDefaultTools=new _704();this.createAddonTools();this.viewerDefaultTools.createConfigurationMenuItem();}));},createAddonTools:function(){},_createBookmarkController:function(){require(["esriviewer/ui/bookmark/BookmarkController"],lang.hitch(this,function(_705){this.bookmarkController=new _705();this._loadBookmarks();}));},_loadBookmarks:function(){if(lang.isObject(this.viewerConfig.bookmarks)&&this.viewerConfig.bookmarks.url!=null){var _706=lang.hitch(this,function(_707){this._setServerBookmarks(_707);});this.loadJson(this.viewerConfig.bookmarks.url,_706);}if(this.mainToolbar){this.mainToolbar.loadCookieBookmarks();}},_setServerBookmarks:function(_708){if(this.mainToolbar){this.mainToolbar.addStaticBookmarks(_708);}}});});},"esriviewer/ui/measure/model/MeasureWidgetViewModel":function(){define(["dojo/_base/declare","esri/tasks/GeometryService"],function(_709,_70a){return _709([],{constructor:function(){this.areaMeasurementUnits=ko.observableArray([{label:"Acres",value:_70a.UNIT_ACRES},{label:"Sq Miles",value:_70a.UNIT_SQUARE_MILES},{label:"Sq Kilometers",value:_70a.UNIT_SQUARE_KILOMETERS},{label:"Hectares",value:_70a.UNIT_HECTARES},{label:"Sq Yards",value:_70a.UNIT_SQUARE_YARDS},{label:"Sq Feet",value:_70a.UNIT_SQUARE_FEET},{label:"Sq Meters",value:_70a.UNIT_SQUARE_METERS}]);this.distanceMeasurementUnits=ko.observableArray([{label:"Miles",value:_70a.UNIT_STATUTE_MILE},{label:"Kilometers",value:_70a.UNIT_KILOMETER},{label:"Feet",value:_70a.UNIT_FOOT},{label:"Meters",value:_70a.UNIT_METER}]);this.locationUnits=ko.observableArray([{label:"Degrees",value:VIEWER_GLOBALS.ESRI_UNITS.DECIMAL_DEGREES},{label:"DMS",value:VIEWER_GLOBALS.ESRI_UNITS.DEGREE_MINUTE_SECONDS}]);this.measureMethodText=ko.observable("");this.unitsText=ko.observable("");this.resultsText=ko.observable("");this.selectedAreaUnits=ko.observable("");this.selectedDistanceUnits=ko.observable("");this.selectedLocationUnits=ko.observable("");this.areaActive=ko.observable(false);this.distanceActive=ko.observable(false);this.locationActive=ko.observable(false);this.measurementResult=ko.observable("");},handleAreaButtonClick:function(){var _70b=this.areaActive();this.areaActive(!_70b);this.distanceActive(false);this.locationActive(false);},handleDistanceButtonClick:function(){var _70c=this.distanceActive();this.distanceActive(!_70c);this.areaActive(false);this.locationActive(false);},handleLocationButtonClick:function(){var _70d=this.locationActive();this.locationActive(!_70d);this.areaActive(false);this.distanceActive(false);},getLabelForDistanceValue:function(_70e){var _70f=this.distanceMeasurementUnits();for(var i=0;i<_70f.length;i++){if(_70f[i].value==_70e){return _70f[i].label;}}return "Unknown";},getLabelForLocationValue:function(_710){var _711=this.locationUnits();for(var i=0;i<_711.length;i++){if(_711[i].value==_710){return _711[i].label;}}return "Unknown";},getLabelForAreaValue:function(_712){var _713=this.areaMeasurementUnits();for(var i=0;i<_713.length;i++){if(_713[i].value==_712){return _713[i].label;}}return "Unknown";}});});},"esriviewer/ui/weather/reflectivity/ReflectivityWidgetWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","../../window/WindowWidget"],function(_714,lang,_715,_716){return _714([_716],{defaultPositioning:{x:400,y:125},windowWidth:"300px",windowHeaderText:"NEXRAD Reflectance",windowIconAltText:"Alt Text",windowIconClass:"commonIcons16 weather",positioningParamName:"reflectance",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/weather/reflectivity/ReflectivityWidget"],lang.hitch(this,function(_717){this.reflectivityWidget=new _717();this.setContent(this.reflectivityWidget.domNode);if(this.reflectivityWidget){this.reflectivityWidget.showWmsLayer();}}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_715.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REFLECTIVITY.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_715.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REFLECTIVITY.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_715.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REFLECTIVITY.TOGGLE,lang.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.reflectivityWidget&&this.reflectivityWidget){this.reflectivityWidget.hideWmsLayer();}},show:function(){this.inherited(arguments);if(this.reflectivityWidget){this.reflectivityWidget.showWmsLayer();}}});});},"dijit/layout/StackContainer":function(){define(["dojo/_base/array","dojo/cookie","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/has","dojo/_base/lang","dojo/on","dojo/ready","dojo/topic","dojo/when","../registry","../_WidgetBase","./_LayoutWidget","dojo/i18n!../nls/common"],function(_718,_719,_71a,_71b,_71c,has,lang,on,_71d,_71e,when,_71f,_720,_721){if(has("dijit-legacy-requires")){_71d(0,function(){var _722=["dijit/layout/StackController"];require(_722);});}var _723=_71a("dijit.layout.StackContainer",_721,{doLayout:true,persist:false,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);_71b.add(this.domNode,"dijitLayoutContainer");},postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,"keydown",lang.hitch(this,"_onKeyDown")));},startup:function(){if(this._started){return;}var _724=this.getChildren();_718.forEach(_724,this._setupChild,this);if(this.persist){this.selectedChildWidget=_71f.byId(_719(this.id+"_selectedChild"));}else{_718.some(_724,function(_725){if(_725.selected){this.selectedChildWidget=_725;}return _725.selected;},this);}var _726=this.selectedChildWidget;if(!_726&&_724[0]){_726=this.selectedChildWidget=_724[0];_726.selected=true;}_71e.publish(this.id+"-startup",{children:_724,selected:_726,textDir:this.textDir});this.inherited(arguments);},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=true;var _727=this.selectedChildWidget;if(_727){this._showChild(_727);}}this.inherited(arguments);},_setupChild:function(_728){var _729=_728.domNode,_72a=_71c.place("<div role='tabpanel' class='"+this.baseClass+"ChildWrapper dijitHidden'>",_728.domNode,"replace"),_72b=_728["aria-label"]||_728.title||_728.label;if(_72b){_72a.setAttribute("aria-label",_72b);}_71c.place(_729,_72a);_728._wrapper=_72a;this.inherited(arguments);if(_729.style.display=="none"){_729.style.display="block";}_728.domNode.title="";},addChild:function(_72c,_72d){this.inherited(arguments);if(this._started){_71e.publish(this.id+"-addChild",_72c,_72d);this.layout();if(!this.selectedChildWidget){this.selectChild(_72c);}}},removeChild:function(page){var idx=_718.indexOf(this.getChildren(),page);this.inherited(arguments);_71c.destroy(page._wrapper);delete page._wrapper;if(this._started){_71e.publish(this.id+"-removeChild",page);}if(this._descendantsBeingDestroyed){return;}if(this.selectedChildWidget===page){this.selectedChildWidget=undefined;if(this._started){var _72e=this.getChildren();if(_72e.length){this.selectChild(_72e[Math.max(idx-1,0)]);}}}if(this._started){this.layout();}},selectChild:function(page,_72f){var d;page=_71f.byId(page);if(this.selectedChildWidget!=page){d=this._transition(page,this.selectedChildWidget,_72f);this._set("selectedChildWidget",page);_71e.publish(this.id+"-selectChild",page);if(this.persist){_719(this.id+"_selectedChild",this.selectedChildWidget.id);}}return when(d||true);},_transition:function(_730,_731){if(_731){this._hideChild(_731);}var d=this._showChild(_730);if(_730.resize){if(this.doLayout){_730.resize(this._containerContentBox||this._contentBox);}else{_730.resize();}}return d;},_adjacent:function(_732){var _733=this.getChildren();var _734=_718.indexOf(_733,this.selectedChildWidget);_734+=_732?1:_733.length-1;return _733[_734%_733.length];},forward:function(){return this.selectChild(this._adjacent(true),true);},back:function(){return this.selectChild(this._adjacent(false),true);},_onKeyDown:function(e){_71e.publish(this.id+"-containerKeyDown",{e:e,page:this});},layout:function(){var _735=this.selectedChildWidget;if(_735&&_735.resize){if(this.doLayout){_735.resize(this._containerContentBox||this._contentBox);}else{_735.resize();}}},_showChild:function(page){var _736=this.getChildren();page.isFirstChild=(page==_736[0]);page.isLastChild=(page==_736[_736.length-1]);page._set("selected",true);if(page._wrapper){_71b.replace(page._wrapper,"dijitVisible","dijitHidden");}return (page._onShow&&page._onShow())||true;},_hideChild:function(page){page._set("selected",false);if(page._wrapper){_71b.replace(page._wrapper,"dijitHidden","dijitVisible");}page.onHide&&page.onHide();},closeChild:function(page){var _737=page.onClose&&page.onClose(this,page);if(_737){this.removeChild(page);page.destroyRecursive();}},destroyDescendants:function(_738){this._descendantsBeingDestroyed=true;this.selectedChildWidget=undefined;_718.forEach(this.getChildren(),function(_739){if(!_738){this.removeChild(_739);}_739.destroyRecursive(_738);},this);this._descendantsBeingDestroyed=false;}});_723.ChildWidgetProperties={selected:false,disabled:false,closable:false,iconClass:"dijitNoIcon",showTitle:true};lang.extend(_720,_723.ChildWidgetProperties);return _723;});},"esriviewer/ui/window/WindowWidget":function(){define(["dojo/_base/declare","dojo/text!./template/WindowWidgetTemplate.html","dojo/topic","dojo/_base/window","dojo/_base/lang","dojo/on","dojo/dom-construct","dojo/dom-class","dojo/dom-style","../base/UITemplatedWidget","dojo/dnd/Moveable","dojox/layout/ResizeHandle","dojo/_base/connect","dojo/dom-geometry"],function(_73a,_73b,_73c,_73d,lang,on,_73e,_73f,_740,_741,_742,_743,con,_744){return _73a([_741],{resizeAxis:"xy",animate:true,resizable:false,isPositionedByConfig:true,firstShow:true,showOnLoad:false,visible:false,movable:true,canMinimize:true,windowHeight:null,windowWidth:"35%",positioningParamName:"",windowHeaderText:"Window",windowIconClass:"commonIcons16 application",templateString:_73b,closeWindowTitle:"Close Window",windowIconAltText:"Window",constructor:function(){this.animation=VIEWER_GLOBALS.ANIMATIONS.FADE.IN;this.windowTopOffset=(VIEWER_GLOBALS.WINDOW&&VIEWER_GLOBALS.WINDOW.TOP_POSITION_MOVE_OFFSET)?(VIEWER_GLOBALS.WINDOW.TOP_POSITION_MOVE_OFFSET):3;},postCreate:function(){this.inherited(arguments);_73e.place(this.domNode,_73d.body());this.visible=false;_73f.add(this.domNode,"windowHidden");if(this.movable){this._initMover();}else{_740.set(this.windowHeader,"cursor","default");}if(this.windowHeight!=null){_740.set(this.domNode,"height",this.windowHeight);}if(this.windowWidth!=null){_740.set(this.domNode,"width",this.windowWidth);}if(this.resizable){var _745={targetId:this.id,activeResize:true};if(this.minWidth!=null){_745["minWidth"]=this.minWidth;}if(this.minHeight!=null){_745["minHeight"]=this.minHeight;}if(this.resizeAxis){_745["resizeAxis"]=this.resizeAxis;}this.handle=new _743(_745).placeAt(this.domNode);}if(!this.canMinimize){_740.set(this.windowMinimizeImg,"display","none");}if(!this.showOnLoad){this.hide();}else{this.show();}},initListeners:function(){this.inherited(arguments);this.connects.push(on(this.windowCloseImg,"click",lang.hitch(this,this.hide,0)));this.connects.push(on(this.windowMinimizeImg,"click",lang.hitch(this,this.toggleContent)));this.subscribes.push(_73c.subscribe("/dojo/resize/stop",lang.hitch(this,this.handleGlobalResizeFired)));this.subscribes.push(_73c.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REPOSITION_ALL,lang.hitch(this,this.handleReposition)));},loadViewerConfigurationData:function(){var _746=null;_73c.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"animationsEnabled",function(_747){_746=_747;});if(_746!=null){this.animate=_746;}},handleReposition:function(){var pos=_744.position(this.domNode);if(pos.y<this.windowTopOffset){_740.set(this.domNode,"top",this.windowTopOffset+"px");}},handleGlobalResizeFired:function(_748){if(this.handle){if(_748.id===this.handle.id){this.onWindowResize();}}},setContent:function(_749){_73e.empty(this.windowContent);_73e.place(_749,this.windowContent);},toggle:function(){if(this.visible){this.hide();}else{this.show();}},show:function(){if(!this.visible){this.onBeforeWindowShow();_73f.remove(this.domNode,"windowHidden");if(this.animate){this._animateWidget();}this.visible=true;if(this.firstShow){this.firstShow=false;this.onFirstWindowShow();}this.onAfterWindowShow();}},hide:function(){if(this.visible){this.onBeforeWindowHide();_73f.add(this.domNode,"windowHidden");if(this.animate){this._removeAnimationClasses();}this.visible=false;this.hidePopups();this.onAfterWindowHide();}},_initMover:function(){this.mover=new _742(this.domNode,{handle:this.headerMoverContainer});con.connect(this.mover,"onMove",VIEWER_UTILS,VIEWER_UTILS.handleContainerMoved);},toggleContent:function(){var _74a=_740.get(this.windowContentOuter,"display");if(_74a=="none"){this._expand();}else{this._collapse();}},_expand:function(){_73f.remove(this.windowHeader,"windowHeaderCollapsed");_740.set(this.windowContentOuter,"display","block");_73f.add(this.windowHeader,"windowHeader");if(this.windowHeight!=null){_740.set(this.domNode,"height",this.windowHeight);}this.onWindowExpanded();if(this.handle&&this.handle.resizeHandle){this.handle.resizeHandle.style.display="block";}},_collapse:function(){_73f.add(this.windowHeader,"windowHeaderCollapsed");_73f.remove(this.windowHeader,"windowHeader");_740.set(this.windowContentOuter,"display","none");if(this.windowHeight!=null){_740.set(this.domNode,"height",null);}this.hidePopups();this.onWindowCollapsed();if(this.handle&&this.handle.resizeHandle){this.handle.resizeHandle.style.display="none";}},hidePopups:function(){},setWindowWidthFromInt:function(_74b){_740.set(this.domNode,"width",_74b+"px");},onWindowExpanded:function(){},onWindowCollapsed:function(){},onWindowResize:function(){},onBeforeWindowShow:function(){},onBeforeWindowHide:function(){},onAfterWindowShow:function(){},onAfterWindowHide:function(){},onFirstWindowShow:function(){}});});},"esriviewer/ui/layers/base/UserPersistedLayersListWidget":function(){define(["dojo/_base/declare","dojo/text!./template/UserPersistedLayersListingTemplate.html","../../base/UITemplatedWidget","dojo/_base/lang","./model/UserPersistedLayersListViewModel"],function(_74c,_74d,_74e,lang,_74f){return _74c([_74e],{bindingsApplied:false,templateString:_74d,constructor:function(){this.userPersistedGraphics={};},postCreate:function(){this.inherited(arguments);this.viewModel=new _74f();this.viewModel.on(this.viewModel.REMOVE_USER_PERSISTED_LAYER,lang.hitch(this,this.handleRemoveUserPersistedLayer));this.viewModel.on(this.viewModel.ADD_USER_PERSISTED_LAYER_TO_MAP,lang.hitch(this,this.handleAddUserPersistedLayerToMap));this.viewModel.on(this.viewModel.CLEAR_USER_PERSISTED_LAYERS,lang.hitch(this,this.handleClearUserPersistedLayers));},applyBindings:function(){if(!this.bindingsApplied){this.bindingsApplied=true;ko.applyBindings(this.viewModel,this.domNode);}},handleAddUserPersistedLayerToMap:function(_750){if(_750==null||!lang.isObject(_750)||_750.url==null||_750.url==""){return;}this.onAddUserPersistedLayerToMap(_750.url,_750.name);},onAddUserPersistedLayerToMap:function(_751,_752){},handleClearUserPersistedLayers:function(){this.onRemoveAllUserPersistedLayers();},handleRemoveUserPersistedLayer:function(_753){if(_753&&lang.isObject(_753)){var id=VIEWER_UTILS.getLayerUniqueId(_753);if(id==null){return;}this.onRemoveUserPersistedLayer(id);}},onRemoveAllUserPersistedLayers:function(){},onRemoveUserPersistedLayer:function(_754){},addExistingPersistedLayerItems:function(_755){for(var key in _755){this.viewModel.addedUserPersistedLayers.push(_755[key]);}this.viewModel.sort();this.applyBindings();},addPersistedLayer:function(_756){this.viewModel.addedUserPersistedLayers.push(_756);this.viewModel.sort();}});});},"dijit/DropDownMenu":function(){define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_OnDijitClickMixin","./_MenuBase"],function(_757,keys,_758,_759,_75a){return _757("dijit.DropDownMenu",[_75a,_759],{templateString:_758,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev();},_onDownArrow:function(){this.focusNext();},_onRightArrow:function(evt){this._moveToPopup(evt);evt.stopPropagation();evt.preventDefault();},_onLeftArrow:function(){if(this.parentMenu){if(this.parentMenu._isMenuBar){this.parentMenu.focusPrev();}else{this.onCancel(false);}}else{evt.stopPropagation();evt.preventDefault();}}});});},"dijit/Menu":function(){define(["require","dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window","dojo/window","./popup","./DropDownMenu","dojo/ready"],function(_75b,_75c,_75d,dom,_75e,_75f,_760,keys,lang,on,has,win,_761,pm,_762,_763){if(has("dijit-legacy-requires")){_763(0,function(){var _764=["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"];_75b(_764);});}return _75d("dijit.Menu",_762,{constructor:function(){this._bindings=[];},targetNodeIds:[],selector:"",contextMenuForWindow:false,leftClickToOpen:false,refocus:true,postCreate:function(){if(this.contextMenuForWindow){this.bindDomNode(this.ownerDocumentBody);}else{_75c.forEach(this.targetNodeIds,this.bindDomNode,this);}this.inherited(arguments);},_iframeContentWindow:function(_765){return _761.get(this._iframeContentDocument(_765))||this._iframeContentDocument(_765)["__parent__"]||(_765.name&&document.frames[_765.name])||null;},_iframeContentDocument:function(_766){return _766.contentDocument||(_766.contentWindow&&_766.contentWindow.document)||(_766.name&&document.frames[_766.name]&&document.frames[_766.name].document)||null;},bindDomNode:function(node){node=dom.byId(node,this.ownerDocument);var cn;if(node.tagName.toLowerCase()=="iframe"){var _767=node,_768=this._iframeContentWindow(_767);cn=win.body(_768.document);}else{cn=(node==win.body(this.ownerDocument)?this.ownerDocument.documentElement:node);}var _769={node:node,iframe:_767};_75e.set(node,"_dijitMenu"+this.id,this._bindings.push(_769));var _76a=lang.hitch(this,function(cn){var _76b=this.selector,_76c=_76b?function(_76d){return on.selector(_76b,_76d);}:function(_76e){return _76e;},self=this;return [on(cn,_76c(this.leftClickToOpen?"click":"contextmenu"),function(evt){evt.stopPropagation();evt.preventDefault();self._scheduleOpen(this,_767,{x:evt.pageX,y:evt.pageY});}),on(cn,_76c("keydown"),function(evt){if(evt.shiftKey&&evt.keyCode==keys.F10){evt.stopPropagation();evt.preventDefault();self._scheduleOpen(this,_767);}})];});_769.connects=cn?_76a(cn):[];if(_767){_769.onloadHandler=lang.hitch(this,function(){var _76f=this._iframeContentWindow(_767),cn=win.body(_76f.document);_769.connects=_76a(cn);});if(_767.addEventListener){_767.addEventListener("load",_769.onloadHandler,false);}else{_767.attachEvent("onload",_769.onloadHandler);}}},unBindDomNode:function(_770){var node;try{node=dom.byId(_770,this.ownerDocument);}catch(e){return;}var _771="_dijitMenu"+this.id;if(node&&_75e.has(node,_771)){var bid=_75e.get(node,_771)-1,b=this._bindings[bid],h;while((h=b.connects.pop())){h.remove();}var _772=b.iframe;if(_772){if(_772.removeEventListener){_772.removeEventListener("load",b.onloadHandler,false);}else{_772.detachEvent("onload",b.onloadHandler);}}_75e.remove(node,_771);delete this._bindings[bid];}},_scheduleOpen:function(_773,_774,_775){if(!this._openTimer){this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:_773,iframe:_774,coords:_775});},1);}},_openMyself:function(args){var _776=args.target,_777=args.iframe,_778=args.coords,_779=!_778;this.currentTarget=_776;if(_778){if(_777){var ifc=_75f.position(_777,true),_77a=this._iframeContentWindow(_777),_77b=_75f.docScroll(_77a.document);var cs=_760.getComputedStyle(_777),tp=_760.toPixelValue,left=(has("ie")&&has("quirks")?0:tp(_777,cs.paddingLeft))+(has("ie")&&has("quirks")?tp(_777,cs.borderLeftWidth):0),top=(has("ie")&&has("quirks")?0:tp(_777,cs.paddingTop))+(has("ie")&&has("quirks")?tp(_777,cs.borderTopWidth):0);_778.x+=ifc.x+left-_77b.x;_778.y+=ifc.y+top-_77b.y;}}else{_778=_75f.position(_776,true);_778.x+=10;_778.y+=10;}var self=this;var _77c=this._focusManager.get("prevNode");var _77d=this._focusManager.get("curNode");var _77e=!_77d||(dom.isDescendant(_77d,this.domNode))?_77c:_77d;function _77f(){if(self.refocus&&_77e){_77e.focus();}pm.close(self);};pm.open({popup:this,x:_778.x,y:_778.y,onExecute:_77f,onCancel:_77f,orient:this.isLeftToRight()?"L":"R"});this.focus();if(!_779){this.defer(function(){this._cleanUp(true);});}this._onBlur=function(){this.inherited("_onBlur",arguments);pm.close(this);};},destroy:function(){_75c.forEach(this._bindings,function(b){if(b){this.unBindDomNode(b.node);}},this);this.inherited(arguments);}});});},"dijit/form/_CheckBoxMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(_780,_781){return _780("dijit.form._CheckBoxMixin",null,{type:"checkbox",value:"on",readOnly:false,_aria_attr:"aria-checked",_setReadOnlyAttr:function(_782){this._set("readOnly",_782);_781.set(this.focusNode,"readOnly",_782);},_setLabelAttr:undefined,_getSubmitValue:function(_783){return (_783==null||_783==="")?"on":_783;},_setValueAttr:function(_784){_784=this._getSubmitValue(_784);this._set("value",_784);_781.set(this.focusNode,"value",_784);},reset:function(){this.inherited(arguments);this._set("value",this._getSubmitValue(this.params.value));_781.set(this.focusNode,"value",this.value);},_onClick:function(e){if(this.readOnly){e.stopPropagation();e.preventDefault();return false;}return this.inherited(arguments);}});});},"esriviewer/ui/footer/model/FooterTogglerViewModel":function(){define(["dojo/_base/declare"],function(_785){return _785([],{constructor:function(){this.expanded=ko.observable(false);}});});},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(_786,_787){return _786("dijit._Contained",null,{_getSibling:function(_788){var node=this.domNode;do{node=node[_788+"Sibling"];}while(node&&node.nodeType!=1);return node&&_787.byNode(node);},getPreviousSibling:function(){return this._getSibling("previous");},getNextSibling:function(){return this._getSibling("next");},getIndexInParent:function(){var p=this.getParent();if(!p||!p.getIndexOfChild){return -1;}return p.getIndexOfChild(this);}});});},"dijit/_KeyNavContainer":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/_base/kernel","dojo/keys","dojo/_base/lang","./registry","./_Container","./_FocusMixin","./_KeyNavMixin"],function(_789,_78a,_78b,_78c,keys,lang,_78d,_78e,_78f,_790){return _78a("dijit._KeyNavContainer",[_78f,_790,_78e],{connectKeyNavHandlers:function(_791,_792){var _793=(this._keyNavCodes={});var prev=lang.hitch(this,"focusPrev");var next=lang.hitch(this,"focusNext");_789.forEach(_791,function(code){_793[code]=prev;});_789.forEach(_792,function(code){_793[code]=next;});_793[keys.HOME]=lang.hitch(this,"focusFirstChild");_793[keys.END]=lang.hitch(this,"focusLastChild");},startupKeyNavChildren:function(){_78c.deprecated("startupKeyNavChildren() call no longer needed","","2.0");},startup:function(){this.inherited(arguments);_789.forEach(this.getChildren(),lang.hitch(this,"_startupChild"));},addChild:function(_794,_795){this.inherited(arguments);this._startupChild(_794);},_startupChild:function(_796){_796.set("tabIndex","-1");},_getFirst:function(){var _797=this.getChildren();return _797.length?_797[0]:null;},_getLast:function(){var _798=this.getChildren();return _798.length?_798[_798.length-1]:null;},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1));},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),true);},childSelector:function(node){var node=_78d.byNode(node);return node&&node.getParent()==this;}});});},"esriviewer/ui/draw/configure/model/ConfigureDrawViewModel":function(){define(["dojo/_base/declare"],function(_799){return _799([],{constructor:function(){this.showConfigureGeometryIcons=ko.observable(true);this.showEnvelopeIcon=ko.observable(true);this.showTextIcon=ko.observable(true);this.pointConfigurationActive=ko.observable(true);this.lineConfigurationActive=ko.observable(false);this.rectangleConfigurationActive=ko.observable(false);this.polygonConfigurationActive=ko.observable(false);this.textConfigurationActive=ko.observable(false);},showPointConfiguration:function(){this.pointConfigurationActive(true);this.lineConfigurationActive(false);this.rectangleConfigurationActive(false);this.polygonConfigurationActive(false);this.textConfigurationActive(false);},showLineConfiguration:function(){this.lineConfigurationActive(true);this.pointConfigurationActive(false);this.rectangleConfigurationActive(false);this.polygonConfigurationActive(false);this.textConfigurationActive(false);},showRectangleConfiguration:function(){this.rectangleConfigurationActive(true);this.lineConfigurationActive(false);this.pointConfigurationActive(false);this.polygonConfigurationActive(false);this.textConfigurationActive(false);},showPolygonConfiguration:function(){this.polygonConfigurationActive(true);this.rectangleConfigurationActive(false);this.lineConfigurationActive(false);this.pointConfigurationActive(false);this.textConfigurationActive(false);},showTextConfiguration:function(){this.textConfigurationActive(true);this.polygonConfigurationActive(false);this.rectangleConfigurationActive(false);this.lineConfigurationActive(false);this.pointConfigurationActive(false);}});});},"esriviewer/ui/layers/model/LayersWidgetViewModel":function(){define(["dojo/_base/declare","dojo/topic","dojo/Evented"],function(_79a,_79b,_79c){return _79a([_79c],{ADD_LAYERS_VISIBLE:"addLayersVisible",constructor:function(){this.firstAddLayersDisplay=true;this.layersListVisible=ko.observable(true);this.addLayersVisible=ko.observable(false);this.persistedLayersVisible=ko.observable(false);this.showWKIDInAddLayers=ko.observable(true);this.showUserPersistedLayersIcon=ko.observable(true);this.viewerWKID=ko.observable("");},showLayersList:function(){this.layersListVisible(true);this.addLayersVisible(false);this.persistedLayersVisible(false);},showAddLayers:function(){if(this.addLayersVisible()){return;}if(this.firstAddLayersDisplay){var _79d=null;_79b.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,function(ext){_79d=ext;});if(_79d&&_79d.spatialReference&&_79d.spatialReference.wkid!=null){this.viewerWKID(_79d.spatialReference.wkid.toString());}this.firstAddLayersDisplay=false;}this.layersListVisible(false);this.addLayersVisible(true);this.persistedLayersVisible(false);this.emit(this.ADD_LAYERS_VISIBLE);},showUserPersistedLayers:function(){this.layersListVisible(false);this.addLayersVisible(false);this.persistedLayersVisible(true);}});});},"dojox/timing/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang"],function(dojo){dojo.experimental("dojox.timing");dojo.getObject("timing",true,dojox);dojox.timing.Timer=function(_79e){this.timer=null;this.isRunning=false;this.interval=_79e;this.onStart=null;this.onStop=null;};dojo.extend(dojox.timing.Timer,{onTick:function(){},setInterval:function(_79f){if(this.isRunning){window.clearInterval(this.timer);}this.interval=_79f;if(this.isRunning){this.timer=window.setInterval(dojo.hitch(this,"onTick"),this.interval);}},start:function(){if(typeof this.onStart=="function"){this.onStart();}this.isRunning=true;this.timer=window.setInterval(dojo.hitch(this,"onTick"),this.interval);},stop:function(){if(typeof this.onStop=="function"){this.onStop();}this.isRunning=false;window.clearInterval(this.timer);}});return dojox.timing;});},"dojox/sql/_base":function(){define(["dijit","dojo","dojox","dojo/require!dojox/sql/_crypto"],function(_7a0,dojo,_7a1){dojo.provide("dojox.sql._base");dojo.require("dojox.sql._crypto");dojo.mixin(_7a1.sql,{dbName:null,debug:(dojo.exists("dojox.sql.debug")?_7a1.sql.debug:false),open:function(_7a2){if(this._dbOpen&&(!_7a2||_7a2==this.dbName)){return;}if(!this.dbName){this.dbName="dot_store_"+window.location.href.replace(/[^0-9A-Za-z_]/g,"_");if(this.dbName.length>63){this.dbName=this.dbName.substring(0,63);}}if(!_7a2){_7a2=this.dbName;}try{this._initDb();this.db.open(_7a2);this._dbOpen=true;}catch(exp){throw exp.message||exp;}},close:function(_7a3){if(dojo.isIE){return;}if(!this._dbOpen&&(!_7a3||_7a3==this.dbName)){return;}if(!_7a3){_7a3=this.dbName;}try{this.db.close(_7a3);this._dbOpen=false;}catch(exp){throw exp.message||exp;}},_exec:function(_7a4){try{this._initDb();if(!this._dbOpen){this.open();this._autoClose=true;}var sql=null;var _7a5=null;var _7a6=null;var args=dojo._toArray(_7a4);sql=args.splice(0,1)[0];if(this._needsEncrypt(sql)||this._needsDecrypt(sql)){_7a5=args.splice(args.length-1,1)[0];_7a6=args.splice(args.length-1,1)[0];}if(this.debug){this._printDebugSQL(sql,args);}var _7a7;if(this._needsEncrypt(sql)){_7a7=new _7a1.sql._SQLCrypto("encrypt",sql,_7a6,args,_7a5);return null;}else{if(this._needsDecrypt(sql)){_7a7=new _7a1.sql._SQLCrypto("decrypt",sql,_7a6,args,_7a5);return null;}}var rs=this.db.execute(sql,args);rs=this._normalizeResults(rs);if(this._autoClose){this.close();}return rs;}catch(exp){exp=exp.message||exp;if(this._autoClose){try{this.close();}catch(e){}}throw exp;}return null;},_initDb:function(){if(!this.db){try{this.db=google.gears.factory.create("beta.database","1.0");}catch(exp){dojo.setObject("google.gears.denied",true);if(_7a1.off){_7a1.off.onFrameworkEvent("coreOperationFailed");}throw "Google Gears must be allowed to run";}}},_printDebugSQL:function(sql,args){var msg="dojox.sql(\""+sql+"\"";for(var i=0;i<args.length;i++){if(typeof args[i]=="string"){msg+=", \""+args[i]+"\"";}else{msg+=", "+args[i];}}msg+=")";},_normalizeResults:function(rs){var _7a8=[];if(!rs){return [];}while(rs.isValidRow()){var row={};for(var i=0;i<rs.fieldCount();i++){var _7a9=rs.fieldName(i);var _7aa=rs.field(i);row[_7a9]=_7aa;}_7a8.push(row);rs.next();}rs.close();return _7a8;},_needsEncrypt:function(sql){return /encrypt\([^\)]*\)/i.test(sql);},_needsDecrypt:function(sql){return /decrypt\([^\)]*\)/i.test(sql);}});dojo.declare("dojox.sql._SQLCrypto",null,{constructor:function(_7ab,sql,_7ac,args,_7ad){if(_7ab=="encrypt"){this._execEncryptSQL(sql,_7ac,args,_7ad);}else{this._execDecryptSQL(sql,_7ac,args,_7ad);}},_execEncryptSQL:function(sql,_7ae,args,_7af){var _7b0=this._stripCryptoSQL(sql);var _7b1=this._flagEncryptedArgs(sql,args);var self=this;this._encrypt(_7b0,_7ae,args,_7b1,function(_7b2){var _7b3=false;var _7b4=[];var exp=null;try{_7b4=_7a1.sql.db.execute(_7b0,_7b2);}catch(execError){_7b3=true;exp=execError.message||execError;}if(exp!=null){if(_7a1.sql._autoClose){try{_7a1.sql.close();}catch(e){}}_7af(null,true,exp.toString());return;}_7b4=_7a1.sql._normalizeResults(_7b4);if(_7a1.sql._autoClose){_7a1.sql.close();}if(_7a1.sql._needsDecrypt(sql)){var _7b5=self._determineDecryptedColumns(sql);self._decrypt(_7b4,_7b5,_7ae,function(_7b6){_7af(_7b6,false,null);});}else{_7af(_7b4,false,null);}});},_execDecryptSQL:function(sql,_7b7,args,_7b8){var _7b9=this._stripCryptoSQL(sql);var _7ba=this._determineDecryptedColumns(sql);var _7bb=false;var _7bc=[];var exp=null;try{_7bc=_7a1.sql.db.execute(_7b9,args);}catch(execError){_7bb=true;exp=execError.message||execError;}if(exp!=null){if(_7a1.sql._autoClose){try{_7a1.sql.close();}catch(e){}}_7b8(_7bc,true,exp.toString());return;}_7bc=_7a1.sql._normalizeResults(_7bc);if(_7a1.sql._autoClose){_7a1.sql.close();}this._decrypt(_7bc,_7ba,_7b7,function(_7bd){_7b8(_7bd,false,null);});},_encrypt:function(sql,_7be,args,_7bf,_7c0){this._totalCrypto=0;this._finishedCrypto=0;this._finishedSpawningCrypto=false;this._finalArgs=args;for(var i=0;i<args.length;i++){if(_7bf[i]){var _7c1=args[i];var _7c2=i;this._totalCrypto++;_7a1.sql._crypto.encrypt(_7c1,_7be,dojo.hitch(this,function(_7c3){this._finalArgs[_7c2]=_7c3;this._finishedCrypto++;if(this._finishedCrypto>=this._totalCrypto&&this._finishedSpawningCrypto){_7c0(this._finalArgs);}}));}}this._finishedSpawningCrypto=true;},_decrypt:function(_7c4,_7c5,_7c6,_7c7){this._totalCrypto=0;this._finishedCrypto=0;this._finishedSpawningCrypto=false;this._finalResultSet=_7c4;for(var i=0;i<_7c4.length;i++){var row=_7c4[i];for(var _7c8 in row){if(_7c5=="*"||_7c5[_7c8]){this._totalCrypto++;var _7c9=row[_7c8];this._decryptSingleColumn(_7c8,_7c9,_7c6,i,function(_7ca){_7c7(_7ca);});}}}this._finishedSpawningCrypto=true;},_stripCryptoSQL:function(sql){sql=sql.replace(/DECRYPT\(\*\)/ig,"*");var _7cb=sql.match(/ENCRYPT\([^\)]*\)/ig);if(_7cb!=null){for(var i=0;i<_7cb.length;i++){var _7cc=_7cb[i];var _7cd=_7cc.match(/ENCRYPT\(([^\)]*)\)/i)[1];sql=sql.replace(_7cc,_7cd);}}_7cb=sql.match(/DECRYPT\([^\)]*\)/ig);if(_7cb!=null){for(i=0;i<_7cb.length;i++){var _7ce=_7cb[i];var _7cf=_7ce.match(/DECRYPT\(([^\)]*)\)/i)[1];sql=sql.replace(_7ce,_7cf);}}return sql;},_flagEncryptedArgs:function(sql,args){var _7d0=new RegExp(/([\"][^\"]*\?[^\"]*[\"])|([\'][^\']*\?[^\']*[\'])|(\?)/ig);var _7d1;var _7d2=0;var _7d3=[];while((_7d1=_7d0.exec(sql))!=null){var _7d4=RegExp.lastMatch+"";if(/^[\"\']/.test(_7d4)){continue;}var _7d5=false;if(/ENCRYPT\([^\)]*$/i.test(RegExp.leftContext)){_7d5=true;}_7d3[_7d2]=_7d5;_7d2++;}return _7d3;},_determineDecryptedColumns:function(sql){var _7d6={};if(/DECRYPT\(\*\)/i.test(sql)){_7d6="*";}else{var _7d7=/DECRYPT\((?:\s*\w*\s*\,?)*\)/ig;var _7d8=_7d7.exec(sql);while(_7d8){var _7d9=new String(RegExp.lastMatch);var _7da=_7d9.replace(/DECRYPT\(/i,"");_7da=_7da.replace(/\)/,"");_7da=_7da.split(/\s*,\s*/);dojo.forEach(_7da,function(_7db){if(/\s*\w* AS (\w*)/i.test(_7db)){_7db=_7db.match(/\s*\w* AS (\w*)/i)[1];}_7d6[_7db]=true;});_7d8=_7d7.exec(sql);}}return _7d6;},_decryptSingleColumn:function(_7dc,_7dd,_7de,_7df,_7e0){_7a1.sql._crypto.decrypt(_7dd,_7de,dojo.hitch(this,function(_7e1){this._finalResultSet[_7df][_7dc]=_7e1;this._finishedCrypto++;if(this._finishedCrypto>=this._totalCrypto&&this._finishedSpawningCrypto){_7e0(this._finalResultSet);}}));}});(function(){var _7e2=_7a1.sql;_7a1.sql=new Function("return dojox.sql._exec(arguments);");dojo.mixin(_7a1.sql,_7e2);})();});},"dijit/form/CheckBox":function(){define(["require","dojo/_base/declare","dojo/dom-attr","dojo/has","dojo/query","dojo/ready","./ToggleButton","./_CheckBoxMixin","dojo/text!./templates/CheckBox.html","dojo/NodeList-dom","../a11yclick"],function(_7e3,_7e4,_7e5,has,_7e6,_7e7,_7e8,_7e9,_7ea){if(has("dijit-legacy-requires")){_7e7(0,function(){var _7eb=["dijit/form/RadioButton"];_7e3(_7eb);});}return _7e4("dijit.form.CheckBox",[_7e8,_7e9],{templateString:_7ea,baseClass:"dijitCheckBox",_setValueAttr:function(_7ec,_7ed){if(typeof _7ec=="string"){this.inherited(arguments);_7ec=true;}if(this._created){this.set("checked",_7ec,_7ed);}},_getValueAttr:function(){return this.checked&&this._get("value");},_setIconClassAttr:null,_setNameAttr:"focusNode",postMixInProperties:function(){this.inherited(arguments);this.checkedAttrSetting="";},_fillContent:function(){},_onFocus:function(){if(this.id){_7e6("label[for='"+this.id+"']").addClass("dijitFocusedLabel");}this.inherited(arguments);},_onBlur:function(){if(this.id){_7e6("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");}this.inherited(arguments);}});});},"dojox/storage/manager":function(){define(["dijit","dojo","dojox"],function(_7ee,dojo,_7ef){dojo.provide("dojox.storage.manager");_7ef.storage.manager=new function(){this.currentProvider=null;this.available=false;this.providers=[];this._initialized=false;this._onLoadListeners=[];this.initialize=function(){this.autodetect();};this.register=function(name,_7f0){this.providers.push(_7f0);this.providers[name]=_7f0;};this.setProvider=function(_7f1){};this.autodetect=function(){if(this._initialized){return;}var _7f2=dojo.config["forceStorageProvider"]||false;var _7f3;for(var i=0;i<this.providers.length;i++){_7f3=this.providers[i];if(_7f2&&_7f2==_7f3.declaredClass){_7f3.isAvailable();break;}else{if(!_7f2&&_7f3.isAvailable()){break;}}}if(!_7f3){this._initialized=true;this.available=false;this.currentProvider=null;this.loaded();return;}this.currentProvider=_7f3;dojo.mixin(_7ef.storage,this.currentProvider);_7ef.storage.initialize();this._initialized=true;this.available=true;};this.isAvailable=function(){return this.available;};this.addOnLoad=function(func){this._onLoadListeners.push(func);if(this.isInitialized()){this._fireLoaded();}};this.removeOnLoad=function(func){for(var i=0;i<this._onLoadListeners.length;i++){if(func==this._onLoadListeners[i]){this._onLoadListeners.splice(i,1);break;}}};this.isInitialized=function(){if(this.currentProvider!=null&&this.currentProvider.declaredClass=="dojox.storage.FlashStorageProvider"&&_7ef.flash.ready==false){return false;}else{return this._initialized;}};this.supportsProvider=function(_7f4){try{var _7f5=eval("new "+_7f4+"()");var _7f6=_7f5.isAvailable();if(!_7f6){return false;}return _7f6;}catch(e){return false;}};this.getProvider=function(){return this.currentProvider;};this.loaded=function(){this._fireLoaded();};this._fireLoaded=function(){dojo.forEach(this._onLoadListeners,function(i){try{i();}catch(e){}});};this.getResourceList=function(){var _7f7=[];dojo.forEach(_7ef.storage.manager.providers,function(_7f8){_7f7=_7f7.concat(_7f8.getResourceList());});return _7f7;};};});},"dijit/tree/_dndSelector":function(){define(["dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/dom","dojo/mouse","dojo/on","dojo/touch","../a11yclick","./_dndContainer"],function(_7f9,_7fa,_7fb,_7fc,lang,dom,_7fd,on,_7fe,_7ff,_800){return _7fb("dijit.tree._dndSelector",_800,{constructor:function(){this.selection={};this.anchor=null;this.events.push(on(this.tree.domNode,_7fe.press,lang.hitch(this,"onMouseDown")),on(this.tree.domNode,_7fe.release,lang.hitch(this,"onMouseUp")),on(this.tree.domNode,_7fe.move,lang.hitch(this,"onMouseMove")),on(this.tree.domNode,_7ff.press,lang.hitch(this,"onClickPress")),on(this.tree.domNode,_7ff.release,lang.hitch(this,"onClickRelease")));},singular:false,getSelectedTreeNodes:function(){var _801=[],sel=this.selection;for(var i in sel){_801.push(sel[i]);}return _801;},selectNone:function(){this.setSelection([]);return this;},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null;},addTreeNode:function(node,_802){this.setSelection(this.getSelectedTreeNodes().concat([node]));if(_802){this.anchor=node;}return node;},removeTreeNode:function(node){var _803=_7f9.filter(this.getSelectedTreeNodes(),function(_804){return !dom.isDescendant(_804.domNode,node.domNode);});this.setSelection(_803);return node;},isTreeNodeSelected:function(node){return node.id&&!!this.selection[node.id];},setSelection:function(_805){var _806=this.getSelectedTreeNodes();_7f9.forEach(this._setDifference(_806,_805),lang.hitch(this,function(node){node.setSelected(false);if(this.anchor==node){delete this.anchor;}delete this.selection[node.id];}));_7f9.forEach(this._setDifference(_805,_806),lang.hitch(this,function(node){node.setSelected(true);this.selection[node.id]=node;}));this._updateSelectionProperties();},_setDifference:function(xs,ys){_7f9.forEach(ys,function(y){y.__exclude__=true;});var ret=_7f9.filter(xs,function(x){return !x.__exclude__;});_7f9.forEach(ys,function(y){delete y["__exclude__"];});return ret;},_updateSelectionProperties:function(){var _807=this.getSelectedTreeNodes();var _808=[],_809=[],_80a=[];_7f9.forEach(_807,function(node){var ary=node.getTreePath(),_80b=this.tree.model;_809.push(node);_808.push(ary);ary=_7f9.map(ary,function(item){return _80b.getIdentity(item);},this);_80a.push(ary.join("/"));},this);var _80c=_7f9.map(_809,function(node){return node.item;});this.tree._set("paths",_808);this.tree._set("path",_808[0]||[]);this.tree._set("selectedNodes",_809);this.tree._set("selectedNode",_809[0]||null);this.tree._set("selectedItems",_80c);this.tree._set("selectedItem",_80c[0]||null);},onClickPress:function(e){if(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(e.target,this.current)){return;}if(_7fd.isLeft(e)){e.preventDefault();}var _80d=e.type=="keydown"?this.tree.focusedChild:this.current;if(!_80d){return;}var copy=_7fa.isCopyKey(e),id=_80d.id;if(!this.singular&&!e.shiftKey&&this.selection[id]){this._doDeselect=true;return;}else{this._doDeselect=false;}this.userSelect(_80d,copy,e.shiftKey);},onClickRelease:function(e){if(!this._doDeselect){return;}this._doDeselect=false;this.userSelect(e.type=="keyup"?this.tree.focusedChild:this.current,_7fa.isCopyKey(e),e.shiftKey);},onMouseMove:function(){this._doDeselect=false;},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(n1,n2){if(n1===n2){return 0;}if("sourceIndex" in document.documentElement){return n1.sourceIndex-n2.sourceIndex;}else{if("compareDocumentPosition" in document.documentElement){return n1.compareDocumentPosition(n2)&2?1:-1;}else{if(document.createRange){var r1=doc.createRange();r1.setStartBefore(n1);var r2=doc.createRange();r2.setStartBefore(n2);return r1.compareBoundaryPoints(r1.END_TO_END,r2);}else{throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");}}}},userSelect:function(node,_80e,_80f){if(this.singular){if(this.anchor==node&&_80e){this.selectNone();}else{this.setSelection([node]);this.anchor=node;}}else{if(_80f&&this.anchor){var cr=this._compareNodes(this.anchor.rowNode,node.rowNode),_810,end,_811=this.anchor;if(cr<0){_810=_811;end=node;}else{_810=node;end=_811;}var _812=[];while(_810!=end){_812.push(_810);_810=this.tree._getNext(_810);}_812.push(end);this.setSelection(_812);}else{if(this.selection[node.id]&&_80e){this.removeTreeNode(node);}else{if(_80e){this.addTreeNode(node,true);}else{this.setSelection([node]);this.anchor=node;}}}}},getItem:function(key){var _813=this.selection[key];return {data:_813,type:["treeNode"]};},forInSelectedItems:function(f,o){o=o||_7fc.global;for(var id in this.selection){f.call(o,this.getItem(id),id,this);}}});});},"dojox/flash/_base":function(){define(["dijit","dojo","dojox","dojo/require!dojo/window"],function(_814,dojo,_815){dojo.provide("dojox.flash._base");dojo.experimental("dojox.flash");dojo.require("dojo.window");_815.flash={ready:false,url:null,_visible:true,_loadedListeners:[],_installingListeners:[],setSwf:function(url,_816){this.url=url;this._visible=true;if(_816!==null&&_816!==undefined){this._visible=_816;}this._initialize();},addLoadedListener:function(_817){this._loadedListeners.push(_817);},addInstallingListener:function(_818){this._installingListeners.push(_818);},loaded:function(){_815.flash.ready=true;if(_815.flash._loadedListeners.length){for(var i=0;i<_815.flash._loadedListeners.length;i++){_815.flash._loadedListeners[i].call(null);}}},installing:function(){if(_815.flash._installingListeners.length){for(var i=0;i<_815.flash._installingListeners.length;i++){_815.flash._installingListeners[i].call(null);}}},_initialize:function(){var _819=new _815.flash.Install();_815.flash.installer=_819;if(_819.needed()){_819.install();}else{_815.flash.obj=new _815.flash.Embed(this._visible);_815.flash.obj.write();_815.flash.comm=new _815.flash.Communicator();}}};_815.flash.Info=function(){this._detectVersion();};_815.flash.Info.prototype={version:-1,versionMajor:-1,versionMinor:-1,versionRevision:-1,capable:false,installing:false,isVersionOrAbove:function(_81a,_81b,_81c){_81c=parseFloat("."+_81c);if(this.versionMajor>=_81a&&this.versionMinor>=_81b&&this.versionRevision>=_81c){return true;}else{return false;}},_detectVersion:function(){var _81d;for(var _81e=25;_81e>0;_81e--){if(dojo.isIE){var axo;try{if(_81e>6){axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_81e);}else{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}if(typeof axo=="object"){if(_81e==6){axo.AllowScriptAccess="always";}_81d=axo.GetVariable("$version");}}catch(e){continue;}}else{_81d=this._JSFlashInfo(_81e);}if(_81d==-1){this.capable=false;return;}else{if(_81d!=0){var _81f;if(dojo.isIE){var _820=_81d.split(" ");var _821=_820[1];_81f=_821.split(",");}else{_81f=_81d.split(".");}this.versionMajor=_81f[0];this.versionMinor=_81f[1];this.versionRevision=_81f[2];var _822=this.versionMajor+"."+this.versionRevision;this.version=parseFloat(_822);this.capable=true;break;}}}},_JSFlashInfo:function(_823){if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var _824=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"";var _825=navigator.plugins["Shockwave Flash"+_824].description;var _826=_825.split(" ");var _827=_826[2].split(".");var _828=_827[0];var _829=_827[1];var _82a=(_826[3]||_826[4]).split("r");var _82b=_82a[1]>0?_82a[1]:0;var _82c=_828+"."+_829+"."+_82b;return _82c;}}return -1;}};_815.flash.Embed=function(_82d){this._visible=_82d;};_815.flash.Embed.prototype={width:215,height:138,id:"flashObject",_visible:true,protocol:function(){switch(window.location.protocol){case "https:":return "https";break;default:return "http";break;}},write:function(_82e){var _82f;var _830=_815.flash.url;var _831=_830;var _832=_830;var _833=dojo.baseUrl;var _834=document.location.protocol+"//"+document.location.host;if(_82e){var _835=escape(window.location);document.title=document.title.slice(0,47)+" - Flash Player Installation";var _836=escape(document.title);_831+="?MMredirectURL="+_835+"&MMplayerType=ActiveX"+"&MMdoctitle="+_836+"&baseUrl="+escape(_833)+"&xdomain="+escape(_834);_832+="?MMredirectURL="+_835+"&MMplayerType=PlugIn"+"&baseUrl="+escape(_833)+"&xdomain="+escape(_834);}else{_831+="?cachebust="+new Date().getTime();_831+="&baseUrl="+escape(_833);_831+="&xdomain="+escape(_834);}if(_832.indexOf("?")==-1){_832+="?baseUrl="+escape(_833);}else{_832+="&baseUrl="+escape(_833);}_832+="&xdomain="+escape(_834);_82f="<object classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" "+"codebase=\""+this.protocol()+"://fpdownload.macromedia.com/pub/shockwave/cabs/flash/"+"swflash.cab#version=8,0,0,0\"\n "+"width=\""+this.width+"\"\n "+"height=\""+this.height+"\"\n "+"id=\""+this.id+"\"\n "+"name=\""+this.id+"\"\n "+"align=\"middle\">\n "+"<param name=\"allowScriptAccess\" value=\"always\"></param>\n "+"<param name=\"movie\" value=\""+_831+"\"></param>\n "+"<param name=\"quality\" value=\"high\"></param>\n "+"<param name=\"bgcolor\" value=\"#ffffff\"></param>\n "+"<embed src=\""+_832+"\" "+"quality=\"high\" "+"bgcolor=\"#ffffff\" "+"width=\""+this.width+"\" "+"height=\""+this.height+"\" "+"id=\""+this.id+"Embed"+"\" "+"name=\""+this.id+"\" "+"swLiveConnect=\"true\" "+"align=\"middle\" "+"allowScriptAccess=\"always\" "+"type=\"application/x-shockwave-flash\" "+"pluginspage=\""+this.protocol()+"://www.macromedia.com/go/getflashplayer\" "+"></embed>\n"+"</object>\n";dojo.connect(dojo,"loaded",dojo.hitch(this,function(){var _837=this.id+"Container";if(dojo.byId(_837)){return;}var div=document.createElement("div");div.id=this.id+"Container";div.style.width=this.width+"px";div.style.height=this.height+"px";if(!this._visible){div.style.position="absolute";div.style.zIndex="10000";div.style.top="-1000px";}div.innerHTML=_82f;var body=document.getElementsByTagName("body");if(!body||!body.length){throw new Error("No body tag for this page");}body=body[0];body.appendChild(div);}));},get:function(){if(dojo.isIE||dojo.isWebKit){return dojo.byId(this.id);}else{return document[this.id+"Embed"];}},setVisible:function(_838){var _839=dojo.byId(this.id+"Container");if(_838){_839.style.position="absolute";_839.style.visibility="visible";}else{_839.style.position="absolute";_839.style.y="-1000px";_839.style.visibility="hidden";}},center:function(){var _83a=this.width;var _83b=this.height;var _83c=dojo.window.getBox();var x=_83c.l+(_83c.w-_83a)/2;var y=_83c.t+(_83c.h-_83b)/2;var _83d=dojo.byId(this.id+"Container");_83d.style.top=y+"px";_83d.style.left=x+"px";}};_815.flash.Communicator=function(){};_815.flash.Communicator.prototype={_addExternalInterfaceCallback:function(_83e){var _83f=dojo.hitch(this,function(){var _840=new Array(arguments.length);for(var i=0;i<arguments.length;i++){_840[i]=this._encodeData(arguments[i]);}var _841=this._execFlash(_83e,_840);_841=this._decodeData(_841);return _841;});this[_83e]=_83f;},_encodeData:function(data){if(!data||typeof data!="string"){return data;}data=data.replace("\\","&custom_backslash;");data=data.replace(/\0/g,"&custom_null;");return data;},_decodeData:function(data){if(data&&data.length&&typeof data!="string"){data=data[0];}if(!data||typeof data!="string"){return data;}data=data.replace(/\&custom_null\;/g,"\x00");data=data.replace(/\&custom_lt\;/g,"<").replace(/\&custom_gt\;/g,">").replace(/\&custom_backslash\;/g,"\\");return data;},_execFlash:function(_842,_843){var _844=_815.flash.obj.get();_843=(_843)?_843:[];for(var i=0;i<_843;i++){if(typeof _843[i]=="string"){_843[i]=this._encodeData(_843[i]);}}var _845=function(){return eval(_844.CallFunction("<invoke name=\""+_842+"\" returntype=\"javascript\">"+__flash__argumentsToXML(_843,0)+"</invoke>"));};var _846=_845.call(_843);if(typeof _846=="string"){_846=this._decodeData(_846);}return _846;}};_815.flash.Install=function(){};_815.flash.Install.prototype={needed:function(){if(!_815.flash.info.capable){return true;}if(!_815.flash.info.isVersionOrAbove(8,0,0)){return true;}return false;},install:function(){var _847;_815.flash.info.installing=true;_815.flash.installing();if(_815.flash.info.capable==false){_847=new _815.flash.Embed(false);_847.write();}else{if(_815.flash.info.isVersionOrAbove(6,0,65)){_847=new _815.flash.Embed(false);_847.write(true);_847.setVisible(true);_847.center();}else{alert("This content requires a more recent version of the Macromedia "+" Flash Player.");window.location.href=+_815.flash.Embed.protocol()+"://www.macromedia.com/go/getflashplayer";}}},_onInstallStatus:function(msg){if(msg=="Download.Complete"){_815.flash._initialize();}else{if(msg=="Download.Cancelled"){alert("This content requires a more recent version of the Macromedia "+" Flash Player.");window.location.href=_815.flash.Embed.protocol()+"://www.macromedia.com/go/getflashplayer";}else{if(msg=="Download.Failed"){alert("There was an error downloading the Flash Player update. "+"Please try again later, or visit macromedia.com to download "+"the latest version of the Flash plugin.");}}}}};_815.flash.info=new _815.flash.Info();});},"esriviewer/ui/basemap/model/BasemapGalleryViewModel":function(){define(["dojo/_base/declare"],function(_848){return _848([],{constructor:function(){this.visible=ko.observable(false);}});});},"dojo/data/ItemFileReadStore":function(){define(["../_base/kernel","../_base/lang","../_base/declare","../_base/array","../_base/xhr","../Evented","./util/filter","./util/simpleFetch","../date/stamp"],function(_849,lang,_84a,_84b,xhr,_84c,_84d,_84e,_84f){var _850=_84a("dojo.data.ItemFileReadStore",[_84c],{constructor:function(_851){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=_851.url;this._ccUrl=_851.url;this.url=_851.url;this._jsonData=_851.data;this.data=null;this._datatypeMap=_851.typeMap||{};if(!this._datatypeMap["Date"]){this._datatypeMap["Date"]={type:Date,deserialize:function(_852){return _84f.fromISOString(_852);}};}this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(_851.urlPreventCache!==undefined){this.urlPreventCache=_851.urlPreventCache?true:false;}if(_851.hierarchical!==undefined){this.hierarchical=_851.hierarchical?true:false;}if(_851.clearOnClose){this.clearOnClose=true;}if("failOk" in _851){this.failOk=_851.failOk?true:false;}},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,failOk:false,hierarchical:true,_assertIsItem:function(item){if(!this.isItem(item)){throw new Error(this.declaredClass+": Invalid item argument.");}},_assertIsAttribute:function(_853){if(typeof _853!=="string"){throw new Error(this.declaredClass+": Invalid attribute argument.");}},getValue:function(item,_854,_855){var _856=this.getValues(item,_854);return (_856.length>0)?_856[0]:_855;},getValues:function(item,_857){this._assertIsItem(item);this._assertIsAttribute(_857);return (item[_857]||[]).slice(0);},getAttributes:function(item){this._assertIsItem(item);var _858=[];for(var key in item){if((key!==this._storeRefPropName)&&(key!==this._itemNumPropName)&&(key!==this._rootItemPropName)&&(key!==this._reverseRefMap)){_858.push(key);}}return _858;},hasAttribute:function(item,_859){this._assertIsItem(item);this._assertIsAttribute(_859);return (_859 in item);},containsValue:function(item,_85a,_85b){var _85c=undefined;if(typeof _85b==="string"){_85c=_84d.patternToRegExp(_85b,false);}return this._containsValue(item,_85a,_85b,_85c);},_containsValue:function(item,_85d,_85e,_85f){return _84b.some(this.getValues(item,_85d),function(_860){if(_860!==null&&!lang.isObject(_860)&&_85f){if(_860.toString().match(_85f)){return true;}}else{if(_85e===_860){return true;}}});},isItem:function(_861){if(_861&&_861[this._storeRefPropName]===this){if(this._arrayOfAllItems[_861[this._itemNumPropName]]===_861){return true;}}return false;},isItemLoaded:function(_862){return this.isItem(_862);},loadItem:function(_863){this._assertIsItem(_863.item);},getFeatures:function(){return this._features;},getLabel:function(item){if(this._labelAttr&&this.isItem(item)){return this.getValue(item,this._labelAttr);}return undefined;},getLabelAttributes:function(item){if(this._labelAttr){return [this._labelAttr];}return null;},filter:function(_864,_865,_866){var _867=[],i,key;if(_864.query){var _868,_869=_864.queryOptions?_864.queryOptions.ignoreCase:false;var _86a={};for(key in _864.query){_868=_864.query[key];if(typeof _868==="string"){_86a[key]=_84d.patternToRegExp(_868,_869);}else{if(_868 instanceof RegExp){_86a[key]=_868;}}}for(i=0;i<_865.length;++i){var _86b=true;var _86c=_865[i];if(_86c===null){_86b=false;}else{for(key in _864.query){_868=_864.query[key];if(!this._containsValue(_86c,key,_868,_86a[key])){_86b=false;}}}if(_86b){_867.push(_86c);}}_866(_867,_864);}else{for(i=0;i<_865.length;++i){var item=_865[i];if(item!==null){_867.push(item);}}_866(_867,_864);}},_fetchItems:function(_86d,_86e,_86f){var self=this;if(this._loadFinished){this.filter(_86d,this._getItemsArray(_86d.queryOptions),_86e);}else{if(this._jsonFileUrl!==this._ccUrl){_849.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_86d,filter:lang.hitch(self,"filter"),findCallback:lang.hitch(self,_86e)});}else{this._loadInProgress=true;var _870={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _871=xhr.get(_870);_871.addCallback(function(data){try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;self.filter(_86d,self._getItemsArray(_86d.queryOptions),_86e);self._handleQueuedFetches();}catch(e){self._loadFinished=true;self._loadInProgress=false;_86f(e,_86d);}});_871.addErrback(function(_872){self._loadInProgress=false;_86f(_872,_86d);});var _873=null;if(_86d.abort){_873=_86d.abort;}_86d.abort=function(){var df=_871;if(df&&df.fired===-1){df.cancel();df=null;}if(_873){_873.call(_86d);}};}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;self.filter(_86d,this._getItemsArray(_86d.queryOptions),_86e);}catch(e){_86f(e,_86d);}}else{_86f(new Error(this.declaredClass+": No JSON source data was provided as either URL or a nested Javascript object."),_86d);}}}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var i=0;i<this._queuedFetches.length;i++){var _874=this._queuedFetches[i],_875=_874.args,_876=_874.filter,_877=_874.findCallback;if(_876){_876(_875,this._getItemsArray(_875.queryOptions),_877);}else{this.fetchItemByIdentity(_875);}}this._queuedFetches=[];}},_getItemsArray:function(_878){if(_878&&_878.deep){return this._arrayOfAllItems;}return this._arrayOfTopLevelItems;},close:function(_879){if(this.clearOnClose&&this._loadFinished&&!this._loadInProgress){if(((this._jsonFileUrl==""||this._jsonFileUrl==null)&&(this.url==""||this.url==null))&&this.data==null){}this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[];}},_getItemsFromLoadedData:function(_87a){var _87b=false,self=this;function _87c(_87d){return (_87d!==null)&&(typeof _87d==="object")&&(!lang.isArray(_87d)||_87b)&&(!lang.isFunction(_87d))&&(_87d.constructor==Object||lang.isArray(_87d))&&(typeof _87d._reference==="undefined")&&(typeof _87d._type==="undefined")&&(typeof _87d._value==="undefined")&&self.hierarchical;};function _87e(_87f){self._arrayOfAllItems.push(_87f);for(var _880 in _87f){var _881=_87f[_880];if(_881){if(lang.isArray(_881)){var _882=_881;for(var k=0;k<_882.length;++k){var _883=_882[k];if(_87c(_883)){_87e(_883);}}}else{if(_87c(_881)){_87e(_881);}}}}};this._labelAttr=_87a.label;var i,item;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=_87a.items;for(i=0;i<this._arrayOfTopLevelItems.length;++i){item=this._arrayOfTopLevelItems[i];if(lang.isArray(item)){_87b=true;}_87e(item);item[this._rootItemPropName]=true;}var _884={},key;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){if(key!==this._rootItemPropName){var _885=item[key];if(_885!==null){if(!lang.isArray(_885)){item[key]=[_885];}}else{item[key]=[null];}}_884[key]=key;}}while(_884[this._storeRefPropName]){this._storeRefPropName+="_";}while(_884[this._itemNumPropName]){this._itemNumPropName+="_";}while(_884[this._reverseRefMap]){this._reverseRefMap+="_";}var _886;var _887=_87a.identifier;if(_887){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=_887;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];_886=item[_887];var _888=_886[0];if(!Object.hasOwnProperty.call(this._itemsByIdentity,_888)){this._itemsByIdentity[_888]=item;}else{if(this._jsonFileUrl){throw new Error(this.declaredClass+":  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+_887+"].  Value collided: ["+_888+"]");}else{if(this._jsonData){throw new Error(this.declaredClass+":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+_887+"].  Value collided: ["+_888+"]");}}}}}else{this._features["dojo.data.api.Identity"]=Number;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];item[this._storeRefPropName]=this;item[this._itemNumPropName]=i;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){_886=item[key];for(var j=0;j<_886.length;++j){_885=_886[j];if(_885!==null&&typeof _885=="object"){if(("_type" in _885)&&("_value" in _885)){var type=_885._type;var _889=this._datatypeMap[type];if(!_889){throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+type+"'");}else{if(lang.isFunction(_889)){_886[j]=new _889(_885._value);}else{if(lang.isFunction(_889.deserialize)){_886[j]=_889.deserialize(_885._value);}else{throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");}}}}if(_885._reference){var _88a=_885._reference;if(!lang.isObject(_88a)){_886[j]=this._getItemByIdentity(_88a);}else{for(var k=0;k<this._arrayOfAllItems.length;++k){var _88b=this._arrayOfAllItems[k],_88c=true;for(var _88d in _88a){if(_88b[_88d]!=_88a[_88d]){_88c=false;}}if(_88c){_886[j]=_88b;}}}if(this.referenceIntegrity){var _88e=_886[j];if(this.isItem(_88e)){this._addReferenceToMap(_88e,item,key);}}}else{if(this.isItem(_885)){if(this.referenceIntegrity){this._addReferenceToMap(_885,item,key);}}}}}}}},_addReferenceToMap:function(_88f,_890,_891){},getIdentity:function(item){var _892=this._features["dojo.data.api.Identity"];if(_892===Number){return item[this._itemNumPropName];}else{var _893=item[_892];if(_893){return _893[0];}}return null;},fetchItemByIdentity:function(_894){var item,_895;if(!this._loadFinished){var self=this;if(this._jsonFileUrl!==this._ccUrl){_849.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_894});}else{this._loadInProgress=true;var _896={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _897=xhr.get(_896);_897.addCallback(function(data){var _898=_894.scope?_894.scope:_849.global;try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;item=self._getItemByIdentity(_894.identity);if(_894.onItem){_894.onItem.call(_898,item);}self._handleQueuedFetches();}catch(error){self._loadInProgress=false;if(_894.onError){_894.onError.call(_898,error);}}});_897.addErrback(function(_899){self._loadInProgress=false;if(_894.onError){var _89a=_894.scope?_894.scope:_849.global;_894.onError.call(_89a,_899);}});}}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;item=self._getItemByIdentity(_894.identity);if(_894.onItem){_895=_894.scope?_894.scope:_849.global;_894.onItem.call(_895,item);}}}}else{item=this._getItemByIdentity(_894.identity);if(_894.onItem){_895=_894.scope?_894.scope:_849.global;_894.onItem.call(_895,item);}}},_getItemByIdentity:function(_89b){var item=null;if(this._itemsByIdentity){if(Object.hasOwnProperty.call(this._itemsByIdentity,_89b)){item=this._itemsByIdentity[_89b];}}else{if(Object.hasOwnProperty.call(this._arrayOfAllItems,_89b)){item=this._arrayOfAllItems[_89b];}}if(item===undefined){item=null;}return item;},getIdentityAttributes:function(item){var _89c=this._features["dojo.data.api.Identity"];if(_89c===Number){return null;}else{return [_89c];}},_forceLoad:function(){var self=this;if(this._jsonFileUrl!==this._ccUrl){_849.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){var _89d={url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:true};var _89e=xhr.get(_89d);_89e.addCallback(function(data){try{if(self._loadInProgress!==true&&!self._loadFinished){self._getItemsFromLoadedData(data);self._loadFinished=true;}else{if(self._loadInProgress){throw new Error(this.declaredClass+":  Unable to perform a synchronous load, an async load is in progress.");}}}catch(e){throw e;}});_89e.addErrback(function(_89f){throw _89f;});}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;}}}});lang.extend(_850,_84e);return _850;});},"dijit/_PaletteMixin":function(){define(["dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/keys","dojo/_base/lang","dojo/on","./_CssStateMixin","./a11yclick","./focus","./typematic"],function(_8a0,_8a1,_8a2,_8a3,keys,lang,on,_8a4,_8a5,_8a6,_8a7){var _8a8=_8a0("dijit._PaletteMixin",_8a4,{defaultTimeout:500,timeoutChangeRate:0.9,value:"",_selectedCell:-1,tabIndex:"0",cellClass:"dijitPaletteCell",dyeClass:null,_dyeFactory:function(_8a9){var _8aa=typeof this.dyeClass=="string"?lang.getObject(this.dyeClass):this.dyeClass;return new _8aa(_8a9);},_preparePalette:function(_8ab,_8ac){this._cells=[];var url=this._blankGif;this.own(on(this.gridNode,_8a5,lang.hitch(this,"_onCellClick")));for(var row=0;row<_8ab.length;row++){var _8ad=_8a3.create("tr",{tabIndex:"-1",role:"row"},this.gridNode);for(var col=0;col<_8ab[row].length;col++){var _8ae=_8ab[row][col];if(_8ae){var _8af=this._dyeFactory(_8ae,row,col,_8ac[_8ae]);var _8b0=_8a3.create("td",{"class":this.cellClass,tabIndex:"-1",title:_8ac[_8ae],role:"gridcell"},_8ad);_8af.fillCell(_8b0,url);_8b0.idx=this._cells.length;this._cells.push({node:_8b0,dye:_8af});}}}this._xDim=_8ab[0].length;this._yDim=_8ab.length;var _8b1={UP_ARROW:-this._xDim,DOWN_ARROW:this._xDim,RIGHT_ARROW:this.isLeftToRight()?1:-1,LEFT_ARROW:this.isLeftToRight()?-1:1};for(var key in _8b1){this.own(_8a7.addKeyListener(this.domNode,{keyCode:keys[key],ctrlKey:false,altKey:false,shiftKey:false},this,function(){var _8b2=_8b1[key];return function(_8b3){this._navigateByKey(_8b2,_8b3);};}(),this.timeoutChangeRate,this.defaultTimeout));}},postCreate:function(){this.inherited(arguments);this._setCurrent(this._cells[0].node);},focus:function(){_8a6.focus(this._currentFocus);},_onCellClick:function(evt){var _8b4=evt.target;while(_8b4.tagName!="TD"){if(!_8b4.parentNode||_8b4==this.gridNode){return;}_8b4=_8b4.parentNode;}var _8b5=this._getDye(_8b4).getValue();this._setCurrent(_8b4);_8a6.focus(_8b4);this._setValueAttr(_8b5,true);evt.stopPropagation();evt.preventDefault();},_setCurrent:function(node){if("_currentFocus" in this){_8a1.set(this._currentFocus,"tabIndex","-1");}this._currentFocus=node;if(node){_8a1.set(node,"tabIndex",this.tabIndex);}},_setValueAttr:function(_8b6,_8b7){if(this._selectedCell>=0){_8a2.remove(this._cells[this._selectedCell].node,this.cellClass+"Selected");}this._selectedCell=-1;if(_8b6){for(var i=0;i<this._cells.length;i++){if(_8b6==this._cells[i].dye.getValue()){this._selectedCell=i;_8a2.add(this._cells[i].node,this.cellClass+"Selected");break;}}}this._set("value",this._selectedCell>=0?_8b6:null);if(_8b7||_8b7===undefined){this.onChange(_8b6);}},onChange:function(){},_navigateByKey:function(_8b8,_8b9){if(_8b9==-1){return;}var _8ba=this._currentFocus.idx+_8b8;if(_8ba<this._cells.length&&_8ba>-1){var _8bb=this._cells[_8ba].node;this._setCurrent(_8bb);this.defer(lang.hitch(_8a6,"focus",_8bb));}},_getDye:function(cell){return this._cells[cell.idx].dye;}});return _8a8;});},"esriviewer/base/Configurable":function(){define(["dojo/_base/declare","dojo/_base/xhr","dojo/_base/lang","./DataLoaderSupport"],function(_8bc,xhr,lang,_8bd){return _8bc([_8bd],{configUrl:"",loadConfig:function(){xhr.get({url:this.configUrl,handleAs:"json",load:lang.hitch(this,this.handleConfigLoaded),error:lang.hitch(this,this.handleConfigLoadError)});},loadProxiedConfig:function(){this.loadProxiedJson(this.configUrl,lang.hitch(this,this.handleConfigLoaded),lang.hitch(this,this.handleConfigLoadError));},handleConfigLoaded:function(_8be){},handleConfigLoadError:function(err){}});});},"esriviewer/util/ViewerUtils":function(){define(["dojo/_base/declare","dojo/window","dojo/keys","dojo/_base/lang","dojo/dom-style","dojox/uuid/Uuid","dojox/uuid/generateTimeBasedUuid","dojo/Deferred","dojo/topic","esri/request"],function(_8bf,_8c0,keys,lang,_8c1,Uuid,_8c2,_8c3,_8c4,_8c5){return _8bf([],{isDebug:false,constructor:function(_8c6){this.html5UploadSupported=window.File&&window.FileReader&&window.FileList&&window.Blob;lang.mixin(this,_8c6||{});Uuid.setGenerator(_8c2);},isHtml5FileUploadSupported:function(){return this.html5UploadSupported;},debug:function(_8c7){if(this.isDebug){this.log(_8c7,VIEWER_GLOBALS.LOG_TYPE.INFO);}},log:function(_8c8,type){if(_8c8==null||_8c8===""){return;}_8c4.publish(VIEWER_GLOBALS.EVENTS.LOGGING.ADD,_8c8,type);},handleContainerMoved:function(_8c9,_8ca){var _8cb=false;var _8cc=false;if(_8ca.l<3){_8c1.set(_8c9.node,"left","3px");_8cb=true;}var _8cd=(VIEWER_GLOBALS.WINDOW&&VIEWER_GLOBALS.WINDOW.TOP_POSITION_MOVE_OFFSET)?(VIEWER_GLOBALS.WINDOW.TOP_POSITION_MOVE_OFFSET):3;if(_8ca.t<_8cd){_8c1.set(_8c9.node,"top",_8cd+"px");_8cc=true;}if(_8cb&&_8cc){return;}var _8ce=_8c0.getBox();if(!_8cb){var _8cf=_8c1.get(_8c9.node,"width");var _8d0=_8c1.get(_8c9.node,"left");var _8d1=_8d0+_8cf;if(_8d1>(_8ce.w-3)){_8c1.set(_8c9.node,"left",(_8ce.w-_8cf-3)+"px");}}if(!_8cc){var _8d2=_8c1.get(_8c9.node,"height");var _8d3=_8c1.get(_8c9.node,"top");var _8d4=_8d3+_8d2;if(_8d4>(_8ce.h-5)){_8c1.set(_8c9.node,"top",(_8ce.h-_8d2-5)+"px");}}},generateUUID:function(){var uuid=new Uuid();return uuid.toString();},getTimeStamp:function(){var date=new Date();var _8d5=date.getHours();if(_8d5<12){if(_8d5==0){_8d5=12;}}else{if(_8d5!=12){_8d5=_8d5-12;}}_8d5=_8d5.toString();if(_8d5.length<2){_8d5="0"+_8d5;}var _8d6=date.getMinutes().toString();if(_8d6.length<2){_8d6="0"+_8d6;}var _8d7=date.getSeconds().toString();if(_8d7.length<2){_8d7="0"+_8d7;}return _8d5+":"+_8d6+":"+_8d7;},sendJsonPQuery:function(url,_8d8,_8d9,_8da,_8db){if(_8da==null){_8da=lang.hitch(this,function(_8dc){var msg="Could not resource : "+url+". Please verify URL is accessible.";VIEWER_UTILS.log(msg,VIEWER_GLOBALS.LOG_TYPE.ERROR);_8c4.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,msg);});}if(_8db==null){_8db="callback";}var _8dd={callbackParamName:_8db,content:_8d8,url:url};_8c5(_8dd).then(_8d9,_8da);},isEnterKey:function(e){return e.keyCode==keys.ENTER;},joinUrl:function(url,_8de){var _8df=url.lastIndexOf("/")==url.length-1;if(!_8df){url+="/";}if(_8de[0]==="/"){_8de=_8de.substring(1);}return url+_8de;},getLayerInfoFromService:function(_8e0,_8e1,_8e2,_8e3){if(_8e3==null){_8e3="callback";}var _8e4=lang.hitch(this,function(_8e5){var msg="could not load layer from service: "+_8e6;VIEWER_UTILS.log(msg,VIEWER_GLOBALS.LOG_TYPE.ERROR);_8c4.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,msg);});if(_8e0!=null&&_8e1!=null&&_8e2){var _8e6=_8e0+"/"+_8e1;}var _8e7={callbackParamName:_8e3,content:{f:"json"},url:_8e6};_8c5(_8e7).then(_8e2,_8e4);},endsWith:function(_8e8,_8e9){var _8ea=_8e8.lastIndexOf(_8e9);return (_8ea!=-1)&&(_8ea+_8e9.length==_8e8.length);},getFileExtension:function(_8eb){var _8ec=_8eb.lastIndexOf(".");if(_8ec<0||_8ec===_8eb.length-1){return "";}return _8eb.substr(_8ec+1);},getFileExtensionLower:function(_8ed){return this.getFileExtension(_8ed).toLowerCase();},getServiceTypeFromUrl:function(url){if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER;}else{if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER;}else{if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GP_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GP_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.GP_SERVER;}else{if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GLOBE_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GLOBE_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.GLOBE_SERVER;}else{if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GEOCODE_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GEOCODE_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.GEOCODE_SERVER;}else{if(REG_EXP_UTILS.isKMLExtension(url)){return VIEWER_GLOBALS.SERVICE_TYPES.KML;}else{if(REG_EXP_UTILS.isFeatureLayer(url)){return VIEWER_GLOBALS.SERVICE_TYPES.FEATURE_SERVER;}else{return null;}}}}}}}},getServiceDescription:function(_8ee,_8ef,_8f0,_8f1){if(_8f1==null){_8f1="callback";}if(_8f0==null){_8f0=lang.hitch(this,function(_8f2){var msg="Could not load service description for : "+_8ee+". Please verify service is online.";});}if(_8ee!=null&&_8ef){var _8f3={callbackParamName:_8f1,content:{f:"json"},url:_8ee};_8c5(_8f3).then(_8ef,_8f0);}},getLayerNameFromLayer:function(_8f4){if(_8f4.layerAliasName!=null&&_8f4.layerAliasName!=""){return _8f4.layerAliasName;}else{if(_8f4.name!=null&&_8f4.name!=""){return _8f4.name;}else{if(_8f4.id!=null){return _8f4.id;}else{if(_8f4.url!=null){return _8f4.url;}}}}return "Layer";},getLabelForEsriUnit:function(_8f5){if(_8f5===VIEWER_GLOBALS.ESRI_UNITS.METERS){return "meters";}else{if(_8f5===VIEWER_GLOBALS.ESRI_UNITS.FEET){return "feet";}else{if(_8f5===VIEWER_GLOBALS.ESRI_UNITS.YARDS){return "yards";}else{if(_8f5===VIEWER_GLOBALS.ESRI_UNITS.MILES){return "miles";}else{if(_8f5===VIEWER_GLOBALS.ESRI_UNITS.NAUTICAL_MILES){return "nautical miles";}else{if(_8f5===VIEWER_GLOBALS.ESRI_UNITS.MILLIMETERS){return "millimeters";}else{if(_8f5===VIEWER_GLOBALS.ESRI_UNITS.CENTIMETERS){return "centimeters";}else{if(_8f5===VIEWER_GLOBALS.ESRI_UNITS.DECIMETERS){return "decimeters";}else{if(_8f5===VIEWER_GLOBALS.ESRI_UNITS.KILOMETERS){return "kilometers";}else{if(_8f5===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_MILES){return "square miles";}else{if(_8f5===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_METERS){return "square meters";}else{if(_8f5===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_KILOMETERS){return "square kilometers";}else{if(_8f5===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_ARES){return "square ares";}else{if(_8f5===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_HECTARES){return "square hectares";}else{if(_8f5===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_CENTIMETERS){return "square centimeters";}else{if(_8f5===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_DECIMETERS){return "square decimeters";}else{if(_8f5===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_FEET){return "square feet";}else{if(_8f5===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_INCHES){return "square inches";}else{if(_8f5===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_MILLIMETERS){return "square millimeters";}else{if(_8f5===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_YARDS){return "square yards";}else{if(_8f5===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_UNKNOWN){return "square unknown";}else{if(_8f5===VIEWER_GLOBALS.ESRI_UNITS.DECIMAL_DEGREES){return "decimal degrees";}}}}}}}}}}}}}}}}}}}}}}return "unknown";},getShortLabelForEsriUnit:function(_8f6){if(_8f6===VIEWER_GLOBALS.ESRI_UNITS.METERS){return "m";}else{if(_8f6===VIEWER_GLOBALS.ESRI_UNITS.FEET){return "f";}else{if(_8f6===VIEWER_GLOBALS.ESRI_UNITS.YARDS){return "y";}else{if(_8f6===VIEWER_GLOBALS.ESRI_UNITS.MILES){return "M";}else{if(_8f6===VIEWER_GLOBALS.ESRI_UNITS.NAUTICAL_MILES){return "NM";}else{if(_8f6===VIEWER_GLOBALS.ESRI_UNITS.MILLIMETERS){return "mm";}else{if(_8f6===VIEWER_GLOBALS.ESRI_UNITS.CENTIMETERS){return "cm";}else{if(_8f6===VIEWER_GLOBALS.ESRI_UNITS.DECIMETERS){return "dm";}else{if(_8f6===VIEWER_GLOBALS.ESRI_UNITS.KILOMETERS){return "KM";}else{if(_8f6===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_MILES){return "square miles";}else{if(_8f6===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_METERS){return "Sq m";}else{if(_8f6===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_KILOMETERS){return "Sq KM";}else{if(_8f6===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_ARES){return "Sq Ares";}else{if(_8f6===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_HECTARES){return "Sq Hectares";}else{if(_8f6===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_CENTIMETERS){return "Sq cm";}else{if(_8f6===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_DECIMETERS){return "Sq dm";}else{if(_8f6===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_FEET){return "Sq f";}else{if(_8f6===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_INCHES){return "Sq in";}else{if(_8f6===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_MILLIMETERS){return "Sq mm";}else{if(_8f6===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_YARDS){return "Sq y";}else{if(_8f6===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_UNKNOWN){return "Sq unknown";}else{if(_8f6===VIEWER_GLOBALS.ESRI_UNITS.DECIMAL_DEGREES){return "Dec. Deg.";}}}}}}}}}}}}}}}}}}}}}}return "Unknown";},getFieldTypeFromLayer:function(_8f7,_8f8){var _8f9=_8f8.fields?_8f8.fields:(_8f8.serviceDescription?_8f8.serviceDescription.fields:[]);if(_8f8&&_8f9&&_8f7){for(var i=0;i<_8f9.length;i++){if(_8f9[i].alias===_8f7||_8f9[i].name===_8f7){return _8f9[i].type;}}}return null;},getFileNameFromAtEndOfUrl:function(_8fa){if(_8fa==null||_8fa.lastIndexOf("/")<0){return "";}_8fa=_8fa.substring(0,(_8fa.indexOf("#")==-1)?_8fa.length:_8fa.indexOf("#"));_8fa=_8fa.substring(0,(_8fa.indexOf("?")==-1)?_8fa.length:_8fa.indexOf("?"));return _8fa.substring(_8fa.lastIndexOf("/")+1,_8fa.length);},getFileNameFromAtEndOfPath:function(_8fb){if(_8fb==null||_8fb.lastIndexOf("\\")<0){return "";}return _8fb.substring(_8fb.lastIndexOf("\\")+1,_8fb.length);},_intSorter:function(a,b){return a-b;},sortIntegerArray:function(arr){return arr.sort(this._intSorter);},validateUrl:function(url){var def=new _8c3();def.resolve(true);return def;},trim:function(str){return str.replace(/^\s*/,"").replace(/\s*$/,"");},getLayerUniqueId:function(_8fc){if(_8fc==null){return null;}if(lang.isString(_8fc)){return _8fc.toLowerCase();}var id;if(_8fc.url){id=_8fc.url.toLowerCase();}else{if(_8fc.id!=null){id=_8fc.id;}else{id="lyr_"+VIEWER_UTILS.generateUUID();_8fc.id=id;}}return id;}});});},"esriviewer/map/base/MapExtentTools":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","esri/geometry/Extent","esri/geometry/Point"],function(_8fd,_8fe,lang,_8ff,_900){return _8fd([],{maxClientZoom:null,extentArray:[],currentExtentIdx:0,extentActionInProgress:false,constructor:function(_901){lang.mixin(this,_901);this.initListeners();},initListeners:function(){_8fe.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_SPATIAL_REFERENCE,lang.hitch(this,this.handleGetSpatialReference));_8fe.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.CHANGED,lang.hitch(this,this.handleBasemapChanged));_8fe.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PAN_TO,lang.hitch(this,this.panToPoint));_8fe.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.ZOOM_OUT,lang.hitch(this,this.zoomOut));_8fe.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_CENTER,lang.hitch(this,this.handleGetCenter));_8fe.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,lang.hitch(this,this.handleGetExtent));_8fe.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_LEVEL,lang.hitch(this,this.handleGetLevel));_8fe.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_LEVEL,lang.hitch(this,this.handleSetLevel));_8fe.subscribe(VIEWER_GLOBALS.EVENTS.MAP.DIMENSIONS.GET,lang.hitch(this,this.handleGetMapDimensions));_8fe.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,lang.hitch(this,this.setMapExtent));_8fe.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LEVEL.GET_LEVEL_COUNT,lang.hitch(this,this.getZoomLevelCount));_8fe.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_PREV_EXTENT,lang.hitch(this,this.handleGotoPrevExtent));_8fe.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_NEXT_EXTENT,lang.hitch(this,this.handleGotoNextExtent));_8fe.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.CHANGED,lang.hitch(this,this.handleRecordNewMapExtent));_8fe.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_INITIAL_EXTENT,lang.hitch(this,this.handleGotoInitialExtent));_8fe.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_LAST_EXTENT,lang.hitch(this,this.handleGotoLastExtent));_8fe.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.ZOOM_TO_LAYER,lang.hitch(this,this.handleZoomToLayer));},handleZoomToLayer:function(_902){if(_902.fullExtent){this.setExtent(_902.fullExtent);}},handleGetSpatialReference:function(_903){if(_903!=null&&lang.isFunction(_903)){_903(this.map.extent.spatialReference);}},zoomOut:function(){var _904=this.map.getLevel();var _905=-1;if(_904>1){_905=_904-1;}else{_905=0;}this.map.setLevel(_905);},handleBasemapChanged:function(){var _906=this.getZoomLevelCount();_8fe.publish(VIEWER_GLOBALS.EVENTS.MAP.LEVEL.LEVEL_COUNT_CHANGED,_906);},getZoomLevelCount:function(_907){var _908=null;if(lang.isObject(this.map.__tileInfo)&&lang.isArray(this.map.__tileInfo.lods)){_908=this.map.__tileInfo.lods.length-1;}var _909={count:_908,current:this.map.getLevel()};if(_907!=null&&lang.isFunction(_907)){_907(_909);}else{return _909;}return null;},setMapExtent:function(_90a){if(_90a!=null&&_90a instanceof _8ff){if(_90a.spatialReference.wkid==this.map.spatialReference.wkid){this.map.setExtent(_90a);}else{_8fe.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_MAP_SR,_90a,lang.hitch(this,function(_90b){if(lang.isArray(_90b)&&_90b.length>0){if(this.maxClientZoom!=null){this.map.setLevel(this.maxClientZoom);}this.map.setExtent(_90b[0]);}}));}}},handleGetMapDimensions:function(_90c){if(_90c!=null&&lang.isFunction(_90c)){_90c({width:this.map.width,height:this.map.height});}},handleMapExtentChanged:function(){this.mapDisplayWidgets.showScale();},panToPoint:function(_90d,_90e){var _90f;if(!(_90d instanceof _900)){return;}if(_90e!=null&&lang.isObject(_90e)){if(_90e.zoomTo!=null&&_90e.zoomTo===false){this.map.centerAt(_90d);}else{if(_90e.deepest!=null&&_90e.deepest==true){if(lang.isObject(this.map.__tileInfo)&&lang.isArray(this.map.__tileInfo.lods)){_90f=this.map.__tileInfo.lods.length-1;}}else{if(_90e.zoomLevel!=null&&lang.isObject(this.map.__tileInfo)&&lang.isArray(this.map.__tileInfo.lods)){if(_90f>=this.map.__tileInfo.lods.length){_90f=this.map.__tileInfo.lods.length-1;}else{_90f=_90e.zoomLevel;}}}if(_90f!=null){this.map.centerAndZoom(_90d,_90f);}}}else{if(this.map.getLevel()<8||this.map.getLevel()>15){_90f=7;}else{_90f=this.map.getLevel();}if(this.map.getLevel()==_90f){this.map.centerAt(_90d);}else{this.map.centerAndZoom(_90d,_90f);}}},handleSetLevel:function(_910){if(_910<this.map.__tileInfo.lods.length){this.map.setLevel(_910);}},handleGetLevel:function(_911){if(_911==null||!lang.isFunction(_911)){return;}_911(this.map.getLevel());},handleGetExtent:function(_912){if(_912==null||!lang.isFunction(_912)){return;}_912(this.map.extent);},handleGetCenter:function(_913){if(_913==null||!lang.isFunction(_913)){return;}_913(this.map.extent.getCenter());},handleRecordNewMapExtent:function(){if(arguments&&arguments[0]&&arguments[0].extent){if(!this.extentActionInProgress){if(this.currentExtentIdx<(this.extentArray.length-1)){this.extentArray.splice(this.currentExtentIdx+1,this.extentArray.length-(this.currentExtentIdx+1));}this.extentArray.push(arguments[0].extent);this.currentExtentIdx=this.extentArray.length-1;_8fe.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PREV_EXTENT_EXISTS,(this.currentExtentIdx>0));_8fe.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.NEXT_EXTENT_EXISTS,(this.currentExtentIdx<(this.extentArray.length-1)));}else{this.extentActionInProgress=false;}}},handleGotoPrevExtent:function(){if(this.currentExtentIdx>0){this.currentExtentIdx-=1;this.extentActionInProgress=true;_8fe.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,this.extentArray[this.currentExtentIdx]);_8fe.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PREV_EXTENT_EXISTS,(this.currentExtentIdx>0));_8fe.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.NEXT_EXTENT_EXISTS,(this.currentExtentIdx<(this.extentArray.length-1)));}},handleGotoNextExtent:function(){if(this.currentExtentIdx<this.extentArray.length-1){this.currentExtentIdx+=1;this.extentActionInProgress=true;_8fe.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,this.extentArray[this.currentExtentIdx]);_8fe.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PREV_EXTENT_EXISTS,(this.currentExtentIdx>0));_8fe.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.NEXT_EXTENT_EXISTS,(this.currentExtentIdx<(this.extentArray.length-1)));}},handleGotoInitialExtent:function(){this.currentExtentIdx=0;this.extentActionInProgress=true;_8fe.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,this.extentArray[this.currentExtentIdx]);_8fe.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PREV_EXTENT_EXISTS,(this.currentExtentIdx>0));_8fe.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.NEXT_EXTENT_EXISTS,(this.currentExtentIdx<(this.extentArray.length-1)));},handleGotoLastExtent:function(){this.currentExtentIdx=this.extentArray.length-1;this.extentActionInProgress=true;_8fe.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,this.extentArray[this.currentExtentIdx]);_8fe.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PREV_EXTENT_EXISTS,(this.currentExtentIdx>0));_8fe.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.NEXT_EXTENT_EXISTS,(this.currentExtentIdx<(this.extentArray.length-1)));}});});},"dojox/timing":function(){define(["./timing/_base"],function(_914){return _914;});},"esriviewer/util/RegExpUtils":function(){define(["dojo/_base/declare"],function(_915){return _915([],{URLRegExp:new RegExp(/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/),xmlExtensionRegExp:new RegExp(/\.xml$/i),jsonExtensionRegExp:new RegExp(/\.json$/i),kmlExtensionRegExp:new RegExp(/\.kml/i),featureLayerRegExp:new RegExp(/\/[0-9]+$/i),dateRegexp:new RegExp(/\d+\/\d+\/\d{4}/),numberRegExp:new RegExp(/^[+-]?\d*\.?\d*$/),numericRegexp:new RegExp(/[^0-9\.]/g),unsignedNumberRegExp:new RegExp(/^\d*\.?\d*$/),mapServiceNameRegExp:new RegExp(/.*\/(.*)\/MapServer\/?$/),geocodeServiceNameRegExp:new RegExp(/.*\/(.*)\/GeocodeServer\/?$/),imageServiceNameRegExp:new RegExp(/.*\/(.*)\/ImageServer\/?$/),globeServiceNameRegExp:new RegExp(/.*\/(.*)\/GlobeServer\/?$/),gpServerServiceNameRegExp:new RegExp(/.*\/(.*)\/GPServer\/?$/),featureServerServiceNameRegExp:new RegExp(/.*\/(.*)\/FeatureServer\/?$/),numberToStringWithCommasRegexp:new RegExp(/\B(?=(\d{3})+(?!\d))/g),whitespaceRegexp:new RegExp(/\s*/g),isUrl:function(_916){return this.URLRegExp.test(_916);},isFeatureLayer:function(url){var _917=url.indexOf("/"+VIEWER_GLOBALS.SERVICE_TYPES.FEATURE_SERVER+"/")>-1;var _918=url.indexOf("/"+VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER+"/")>-1;if(_917||_918){return this.featureLayerRegExp.test(url);}return false;},isXmlExtension:function(_919){return this.xmlExtensionRegExp.test(_919);},isJsonExtension:function(_91a){return this.jsonExtensionRegExp.test(_91a);},isKMLExtension:function(_91b){return this.kmlExtensionRegExp.test(_91b);},isDate:function(_91c){return this.dateRegexp.test(_91c);},isNumber:function(_91d){return this.numberRegExp.test(_91d);},isUnsignedNumber:function(_91e){return this.unsignedNumberRegExp.test(_91e);},stripNonNumeric:function(_91f){var _920=_91f.toString();var _921=false;if(_920.length>0&&_920[0]==="-"){_921=true;}var res=_920.replace(this.numericRegexp,"");if(_921){res="-"+res;}return res;},stripWhitespace:function(_922){return _922.toString().replace(this.whitespaceRegexp,"");},getCharacterOccurrenceCount:function(_923,_924){return this.getCharacterOccuranceCount(_923,_924);},getCharacterOccuranceCount:function(_925,_926){return _926.split(_925).length-1;},getServiceNameFromUrl:function(url){var type=VIEWER_UTILS.getServiceTypeFromUrl(url);if(type){var _927=null;if(type==VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER){_927=this.mapServiceNameRegExp;}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER){_927=this.imageServiceNameRegExp;}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.GP_SERVER){_927=this.gpServerServiceNameRegExp;}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.GLOBE_SERVER){_927=this.globeServiceNameRegExp;}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.FEATURE_SERVER){_927=this.featureServerServiceNameRegExp;}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.GEOCODE_SERVER){_927=this.geocodeServiceNameRegExp;}else{return url;}}}}}}var res=_927.exec(url);if(res!=undefined&&res[1]!=undefined){return res[1].replace("_"," ");}return url;}else{return url;}},numberToStringWithCommas:function(x){var _928=x.toString().split(".");_928[0]=_928[0].replace(this.numberToStringWithCommasRegexp,",");return _928.join(".");}});});},"esriviewer/ui/draw/DrawWidget":function(){define(["dojo/_base/declare","dojo/text!./template/DrawWidgetTemplate.html","dojo/topic","dojo/_base/lang","../base/UITemplatedWidget","./base/MapDrawSupport","./configure/ConfigureDrawWidget","./base/GraphicsListWidget","./model/DrawWidgetViewModel","./base/GraphicsLocalStorageMixin","./base/UserPersistedGraphicsListWidget","dijit/form/CheckBox","esri/layers/GraphicsLayer","esri/graphic"],function(_929,_92a,_92b,lang,_92c,_92d,_92e,_92f,_930,_931,_932,_933,_934,_935){return _929([_92c,_92d,_931],{bindingsApplied:false,templateString:_92a,constructor:function(){this.freehandActive=false;},initListeners:function(){this.inherited(arguments);_92b.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.GET_USER_GRAPHICS,lang.hitch(this,this.getUserGraphics));_92b.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.CLEAR_STORED_GRAPHICS,lang.hitch(this,this._clearStoredGraphics));},postCreate:function(){this.viewModel=new _930();this.viewModel.drawVisible.subscribe(lang.hitch(this,this._handleDrawVisibilityChanged));this.viewModel.configurationVisible.subscribe(lang.hitch(this,this._handleConfigurationVisibilityChanged));this.viewModel.graphicsListVisible.subscribe(lang.hitch(this,this._handleGraphicsListVisibilityChanged));this.viewModel.userPersistedGraphicsVisible.subscribe(lang.hitch(this,this._handleUserPersistedVisibilityChanged));this.viewModel.showUserPersistedGraphicsIcon(this.localStoragePersistSupported);var _936=false;for(var key in this.persistedUserGraphics){_936=true;break;}this.viewModel.showSavedGraphicsTab(_936);this.applyBindings();this._createConfigureDrawWidget();this._createGraphicsListWidget();if(this.localStoragePersistSupported){this._createUserPersistedGraphicsListWidget();}this.inherited(arguments);this.drawGraphicsLayer=_934();_92b.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_EXTERNAL_MANAGED_LAYER,this.drawGraphicsLayer);_92b.publish(VIEWER_GLOBALS.EVENTS.DRAW.DRAW_GRAPHICS_LAYER_CREATED);},_clearStoredGraphics:function(){this.deleteAllPersistedGraphics();},_handleConfigurationVisibilityChanged:function(_937){this._handleContentAnimation(_937,this.drawWindowConfigureContainer);},_handleGraphicsListVisibilityChanged:function(_938){this._handleContentAnimation(_938,this.drawWindowGraphicsListContainer);},_handleUserPersistedVisibilityChanged:function(_939){this._handleContentAnimation(_939,this.drawWindowUserPersistedGraphicsContainer);},_handleDrawVisibilityChanged:function(_93a){this._handleContentAnimation(_93a,this.drawWindowInputIconsContainer);},applyBindings:function(){if(!this.bindingsApplied){this._applyBindings();}},_applyBindings:function(){if(!this.bindingsApplied){ko.applyBindings(this.viewModel,this.domNode);this.bindingsApplied=true;}},_createConfigureDrawWidget:function(){if(this.configureDrawWidget==null){this.configureDrawWidget=new _92e();this.configureDrawWidget.placeAt(this.drawWindowConfigureContainer);this.configureDrawWidget.on("pointSymbolChanged",lang.hitch(this,this.handlePointSymbolChanged));this.configureDrawWidget.on("lineSymbolChanged",lang.hitch(this,this.handleLineSymbolChanged));this.configureDrawWidget.on("polygonSymbolChanged",lang.hitch(this,this.handlePolygonSymbolChanged));this.configureDrawWidget.on("rectangleSymbolChanged",lang.hitch(this,this.handleRectangleSymbolChanged));this.configureDrawWidget.on("textSymbolChanged",lang.hitch(this,this.handleTextSymbolChanged));this.pointSymbol=this.configureDrawWidget.pointConfigurationWidget.getSymbol();this.lineSymbol=this.configureDrawWidget.lineConfigurationWidget.getSymbol();this.envelopeSymbol=this.configureDrawWidget.rectangleConfigurationWidget.getSymbol();this.textSymbol=this.configureDrawWidget.configureTextWidget.getSymbol();this.polygonSymbol=this.configureDrawWidget.configurePolygonWidget.getSymbol();}},handlePointSymbolChanged:function(_93b){this.pointSymbol=_93b;},handleLineSymbolChanged:function(_93c){this.lineSymbol=_93c;},handlePolygonSymbolChanged:function(_93d){this.polygonSymbol=_93d;},handleRectangleSymbolChanged:function(_93e){this.envelopeSymbol=_93e;},handleTextSymbolChanged:function(_93f){this.textSymbol=_93f;},_createUserPersistedGraphicsListWidget:function(){if(this.userPersistedGraphicsListWidget==null){this.userPersistedGraphicsListWidget=new _932();this.userPersistedGraphicsListWidget.placeAt(this.drawWindowUserPersistedGraphicsContainer);this.userPersistedGraphicsListWidget.on("removeUserPersistedGraphics",lang.hitch(this,this.removeUserPersistedGraphics));this.userPersistedGraphicsListWidget.on("addUserPersistedGraphicsToMap",lang.hitch(this,this.addUserPersistedGraphicsToMap));this.userPersistedGraphicsListWidget.addExistingPersistedGraphicsItems(this.persistedUserGraphics);}},_createGraphicsListWidget:function(){if(this.graphicsListWidget==null){this.graphicsListWidget=new _92f({saveSupported:this.localStoragePersistSupported});this.graphicsListWidget.placeAt(this.drawWindowGraphicsListContainer);this.graphicsListWidget.viewModel.hasGraphics.subscribe(lang.hitch(this,this._handleCheckForExistingGraphics));this.graphicsListWidget.on("removeAllGraphics",lang.hitch(this,this.removeAllGraphics));this.graphicsListWidget.on("removeGraphic",lang.hitch(this,this.removeGraphic));this.graphicsListWidget.on("saveGraphics",lang.hitch(this,this.saveUserGraphics));}},saveUserGraphics:function(_940,_941){var _942=this.persistUserGraphics(_940,_941);if(_942){this.userPersistedGraphicsListWidget.addUserPersistedGraphics(_942);this.viewModel.showSavedGraphicsTab(true);}},addUserPersistedGraphicsToMap:function(_943){if(_943==null||!lang.isObject(_943)){return;}if(_943.graphics==null||!lang.isArray(_943.graphics)){return;}var _944;for(var i=0;i<_943.graphics.length;i++){_944=_943.graphics[i].graphic;var _945=new _935(_944);var _946={label:_943.graphics[i].label,graphic:_945};this.onAnnotationCreated(_946);}},removeUserPersistedGraphics:function(_947){var _948=this.deleteUserPersistedGraphics(_947);this.viewModel.showSavedGraphicsTab(_948);},removeAllGraphics:function(){this.drawGraphicsLayer.clear();},removeGraphic:function(_949){if(_949){this.drawGraphicsLayer.remove(_949);}},getUserGraphics:function(_94a){if(_94a&&lang.isFunction(_94a)){_94a(this.graphicsListWidget.getGraphics());}},_handleCheckForExistingGraphics:function(_94b){if(!_94b){this.viewModel.graphicsListTabVisible(false);this.viewModel.showDraw();}else{this.viewModel.graphicsListTabVisible(true);}},handlePointDrawClick:function(){var _94c=this.viewModel.pointActive();this.clearDraw();if(!_94c){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT);this.viewModel.setDrawMode(this.viewModel.drawModes.point);}},handleTextDrawClick:function(){var _94d=this.viewModel.textActive();this.clearDraw();if(!_94d){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT);this.viewModel.setDrawMode(this.viewModel.drawModes.text);}},handleLineDrawClick:function(){var _94e=this.viewModel.lineActive();this.clearDraw();if(!_94e){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_LINE);this.viewModel.setDrawMode(this.viewModel.drawModes.line);}},handlePolylineDrawClick:function(){var _94f=this.viewModel.polylineActive();this.clearDraw();if(!_94f){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE);this.viewModel.setDrawMode(this.viewModel.drawModes.polyline);}},handlePolygonDrawClick:function(){var _950=this.viewModel.polygonActive();this.clearDraw();if(!_950){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON);this.viewModel.setDrawMode(this.viewModel.drawModes.polygon);}},handleRectangleDrawClick:function(){var _951=this.viewModel.rectangleActive();this.clearDraw();if(!_951){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_RECTANGLE);this.viewModel.setDrawMode(this.viewModel.drawModes.rectangle);}},clearDraw:function(){this.inherited(arguments);this.viewModel.setDrawMode(null);_92b.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.DRAW_CANCEL);},geometryAdded:function(_952){this.inherited(arguments);var _953=this.viewModel.getCurrentDrawType();this.clearDraw();if(_953!=null){if(_953===this.viewModel.drawModes.rectangle){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_RECTANGLE);this.viewModel.setDrawMode(this.viewModel.drawModes.rectangle);}if(_953===this.viewModel.drawModes.point){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT);this.viewModel.setDrawMode(this.viewModel.drawModes.point);}if(_953===this.viewModel.drawModes.polygon){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON);this.viewModel.setDrawMode(this.viewModel.drawModes.polygon);}if(_953===this.viewModel.drawModes.polyline){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE);this.viewModel.setDrawMode(this.viewModel.drawModes.polyline);}if(_953===this.viewModel.drawModes.line){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_LINE);this.viewModel.setDrawMode(this.viewModel.drawModes.line);}if(_953===this.viewModel.drawModes.text){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT);this.viewModel.setDrawMode(this.viewModel.drawModes.text);}}},toggleFreehand:function(){this.freeHandDrawCheckbox.set("checked",!this.freeHandDrawCheckbox.get("checked"));},handleFreehandToggled:function(){this.freehandActive=this.freeHandDrawCheckbox.get("checked");var _954=this.viewModel.getCurrentDrawType();if(_954===this.viewModel.drawModes.polygon){this.clearDraw();this.viewModel.setDrawMode(this.viewModel.drawModes.polygon);this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON);}if(_954===this.viewModel.drawModes.polyline){this.clearDraw();this.viewModel.setDrawMode(this.viewModel.drawModes.polyline);this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE);}},onAnnotationCreated:function(_955){this.inherited(arguments);this.graphicsListWidget.addGraphic(_955);this.drawGraphicsLayer.add(_955.graphic);},hidePopups:function(){if(this.graphicsListWidget){this.graphicsListWidget.hidePopups();}}});});},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(dojo,lang,_956,_957){var _958={};lang.setObject("dojo.colors",_958);var _959=function(m1,m2,h){if(h<0){++h;}if(h>1){--h;}var h6=6*h;if(h6<1){return m1+(m2-m1)*h6;}if(2*h<1){return m2;}if(3*h<2){return m1+(m2-m1)*(2/3-h)*6;}return m1;};dojo.colorFromRgb=_956.fromRgb=function(_95a,obj){var m=_95a.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(m){var c=m[2].split(/\s*,\s*/),l=c.length,t=m[1],a;if((t=="rgb"&&l==3)||(t=="rgba"&&l==4)){var r=c[0];if(r.charAt(r.length-1)=="%"){a=_957.map(c,function(x){return parseFloat(x)*2.56;});if(l==4){a[3]=c[3];}return _956.fromArray(a,obj);}return _956.fromArray(c,obj);}if((t=="hsl"&&l==3)||(t=="hsla"&&l==4)){var H=((parseFloat(c[0])%360)+360)%360/360,S=parseFloat(c[1])/100,L=parseFloat(c[2])/100,m2=L<=0.5?L*(S+1):L+S-L*S,m1=2*L-m2;a=[_959(m1,m2,H+1/3)*256,_959(m1,m2,H)*256,_959(m1,m2,H-1/3)*256,1];if(l==4){a[3]=c[3];}return _956.fromArray(a,obj);}}return null;};var _95b=function(c,low,high){c=Number(c);return isNaN(c)?high:c<low?low:c>high?high:c;};_956.prototype.sanitize=function(){var t=this;t.r=Math.round(_95b(t.r,0,255));t.g=Math.round(_95b(t.g,0,255));t.b=Math.round(_95b(t.b,0,255));t.a=_95b(t.a,0,1);return this;};_958.makeGrey=_956.makeGrey=function(g,a){return _956.fromArray([g,g,g,a]);};lang.mixin(_956.named,{"aliceblue":[240,248,255],"antiquewhite":[250,235,215],"aquamarine":[127,255,212],"azure":[240,255,255],"beige":[245,245,220],"bisque":[255,228,196],"blanchedalmond":[255,235,205],"blueviolet":[138,43,226],"brown":[165,42,42],"burlywood":[222,184,135],"cadetblue":[95,158,160],"chartreuse":[127,255,0],"chocolate":[210,105,30],"coral":[255,127,80],"cornflowerblue":[100,149,237],"cornsilk":[255,248,220],"crimson":[220,20,60],"cyan":[0,255,255],"darkblue":[0,0,139],"darkcyan":[0,139,139],"darkgoldenrod":[184,134,11],"darkgray":[169,169,169],"darkgreen":[0,100,0],"darkgrey":[169,169,169],"darkkhaki":[189,183,107],"darkmagenta":[139,0,139],"darkolivegreen":[85,107,47],"darkorange":[255,140,0],"darkorchid":[153,50,204],"darkred":[139,0,0],"darksalmon":[233,150,122],"darkseagreen":[143,188,143],"darkslateblue":[72,61,139],"darkslategray":[47,79,79],"darkslategrey":[47,79,79],"darkturquoise":[0,206,209],"darkviolet":[148,0,211],"deeppink":[255,20,147],"deepskyblue":[0,191,255],"dimgray":[105,105,105],"dimgrey":[105,105,105],"dodgerblue":[30,144,255],"firebrick":[178,34,34],"floralwhite":[255,250,240],"forestgreen":[34,139,34],"gainsboro":[220,220,220],"ghostwhite":[248,248,255],"gold":[255,215,0],"goldenrod":[218,165,32],"greenyellow":[173,255,47],"grey":[128,128,128],"honeydew":[240,255,240],"hotpink":[255,105,180],"indianred":[205,92,92],"indigo":[75,0,130],"ivory":[255,255,240],"khaki":[240,230,140],"lavender":[230,230,250],"lavenderblush":[255,240,245],"lawngreen":[124,252,0],"lemonchiffon":[255,250,205],"lightblue":[173,216,230],"lightcoral":[240,128,128],"lightcyan":[224,255,255],"lightgoldenrodyellow":[250,250,210],"lightgray":[211,211,211],"lightgreen":[144,238,144],"lightgrey":[211,211,211],"lightpink":[255,182,193],"lightsalmon":[255,160,122],"lightseagreen":[32,178,170],"lightskyblue":[135,206,250],"lightslategray":[119,136,153],"lightslategrey":[119,136,153],"lightsteelblue":[176,196,222],"lightyellow":[255,255,224],"limegreen":[50,205,50],"linen":[250,240,230],"magenta":[255,0,255],"mediumaquamarine":[102,205,170],"mediumblue":[0,0,205],"mediumorchid":[186,85,211],"mediumpurple":[147,112,219],"mediumseagreen":[60,179,113],"mediumslateblue":[123,104,238],"mediumspringgreen":[0,250,154],"mediumturquoise":[72,209,204],"mediumvioletred":[199,21,133],"midnightblue":[25,25,112],"mintcream":[245,255,250],"mistyrose":[255,228,225],"moccasin":[255,228,181],"navajowhite":[255,222,173],"oldlace":[253,245,230],"olivedrab":[107,142,35],"orange":[255,165,0],"orangered":[255,69,0],"orchid":[218,112,214],"palegoldenrod":[238,232,170],"palegreen":[152,251,152],"paleturquoise":[175,238,238],"palevioletred":[219,112,147],"papayawhip":[255,239,213],"peachpuff":[255,218,185],"peru":[205,133,63],"pink":[255,192,203],"plum":[221,160,221],"powderblue":[176,224,230],"rosybrown":[188,143,143],"royalblue":[65,105,225],"saddlebrown":[139,69,19],"salmon":[250,128,114],"sandybrown":[244,164,96],"seagreen":[46,139,87],"seashell":[255,245,238],"sienna":[160,82,45],"skyblue":[135,206,235],"slateblue":[106,90,205],"slategray":[112,128,144],"slategrey":[112,128,144],"snow":[255,250,250],"springgreen":[0,255,127],"steelblue":[70,130,180],"tan":[210,180,140],"thistle":[216,191,216],"tomato":[255,99,71],"turquoise":[64,224,208],"violet":[238,130,238],"wheat":[245,222,179],"whitesmoke":[245,245,245],"yellowgreen":[154,205,50]});return _956;});},"dojox/uuid/Uuid":function(){define(["dojo/_base/lang","./_base"],function(dojo,uuid){dojox.uuid.Uuid=function(_95c){this._uuidString=dojox.uuid.NIL_UUID;if(_95c){dojox.uuid.assert(dojo.isString(_95c));this._uuidString=_95c.toLowerCase();dojox.uuid.assert(this.isValid());}else{var _95d=dojox.uuid.Uuid.getGenerator();if(_95d){this._uuidString=_95d();dojox.uuid.assert(this.isValid());}}};dojox.uuid.Uuid.compare=function(_95e,_95f){var _960=_95e.toString();var _961=_95f.toString();if(_960>_961){return 1;}if(_960<_961){return -1;}return 0;};dojox.uuid.Uuid.setGenerator=function(_962){dojox.uuid.assert(!_962||dojo.isFunction(_962));dojox.uuid.Uuid._ourGenerator=_962;};dojox.uuid.Uuid.getGenerator=function(){return dojox.uuid.Uuid._ourGenerator;};dojox.uuid.Uuid.prototype.toString=function(){return this._uuidString;};dojox.uuid.Uuid.prototype.compare=function(_963){return dojox.uuid.Uuid.compare(this,_963);};dojox.uuid.Uuid.prototype.isEqual=function(_964){return (this.compare(_964)==0);};dojox.uuid.Uuid.prototype.isValid=function(){return dojox.uuid.isValid(this);};dojox.uuid.Uuid.prototype.getVariant=function(){return dojox.uuid.getVariant(this);};dojox.uuid.Uuid.prototype.getVersion=function(){if(!this._versionNumber){this._versionNumber=dojox.uuid.getVersion(this);}return this._versionNumber;};dojox.uuid.Uuid.prototype.getNode=function(){if(!this._nodeString){this._nodeString=dojox.uuid.getNode(this);}return this._nodeString;};dojox.uuid.Uuid.prototype.getTimestamp=function(_965){if(!_965){_965=null;}switch(_965){case "string":case String:return this.getTimestamp(Date).toUTCString();break;case "hex":if(!this._timestampAsHexString){this._timestampAsHexString=dojox.uuid.getTimestamp(this,"hex");}return this._timestampAsHexString;break;case null:case "date":case Date:if(!this._timestampAsDate){this._timestampAsDate=dojox.uuid.getTimestamp(this,Date);}return this._timestampAsDate;break;default:dojox.uuid.assert(false,"The getTimestamp() method dojox.uuid.Uuid was passed a bogus returnType: "+_965);break;}};return dojox.uuid.Uuid;});},"esriviewer/ui/social/SocialMediaWidgetWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/dom-class","../window/WindowWidget"],function(_966,lang,_967,_968,_969){return _966([_969],{defaultPositioning:{x:400,y:125},constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/social/SocialMediaWidget"],lang.hitch(this,function(_96a){this.socialMediaWidget=new _96a();this.setContent(this.socialMediaWidget.domNode);this.socialMediaWidget.listenForMapCursor();}));},windowWidth:"400px",windowHeaderText:"Search Social Media",windowIconAltText:"Search Social Media",windowIconClass:"commonIcons16 binoculars",positioningParamName:"socialMedia",postCreate:function(){this.inherited(arguments);_968.add(this.windowContent,"socialMediaWindowContent");},initListeners:function(){this.inherited(arguments);this.subscribes.push(_967.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.SOCIAL_MEDIA.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_967.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.SOCIAL_MEDIA.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_967.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.SOCIAL_MEDIA.TOGGLE,lang.hitch(this,this.toggle)));},show:function(){this.inherited(arguments);if(this.socialMediaWidget){this.socialMediaWidget.listenForMapCursor();}},hide:function(){this.inherited(arguments);if(this.socialMediaWidget){this.socialMediaWidget.stopMapCursorListener();}}});});},"dijit/tree/_dndContainer":function(){define(["dojo/aspect","dojo/_base/declare","dojo/dom-class","dojo/_base/lang","dojo/on","dojo/touch"],function(_96b,_96c,_96d,lang,on,_96e){return _96c("dijit.tree._dndContainer",null,{constructor:function(tree,_96f){this.tree=tree;this.node=tree.domNode;lang.mixin(this,_96f);this.containerState="";_96d.add(this.node,"dojoDndContainer");this.events=[on(this.node,_96e.enter,lang.hitch(this,"onOverEvent")),on(this.node,_96e.leave,lang.hitch(this,"onOutEvent")),_96b.after(this.tree,"_onNodeMouseEnter",lang.hitch(this,"onMouseOver"),true),_96b.after(this.tree,"_onNodeMouseLeave",lang.hitch(this,"onMouseOut"),true),on(this.node,"dragstart, selectstart",function(evt){evt.preventDefault();})];},destroy:function(){var h;while(h=this.events.pop()){h.remove();}this.node=this.parent=null;},onMouseOver:function(_970){this.current=_970;},onMouseOut:function(){this.current=null;},_changeState:function(type,_971){var _972="dojoDnd"+type;var _973=type.toLowerCase()+"State";_96d.replace(this.node,_972+_971,_972+this[_973]);this[_973]=_971;},_addItemClass:function(node,type){_96d.add(node,"dojoDndItem"+type);},_removeItemClass:function(node,type){_96d.remove(node,"dojoDndItem"+type);},onOverEvent:function(){this._changeState("Container","Over");},onOutEvent:function(){this._changeState("Container","");}});});},"dijit/form/_FormSelectWidget":function(){define(["dojo/_base/array","dojo/_base/Deferred","dojo/aspect","dojo/data/util/sorter","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/when","dojo/store/util/QueryResults","./_FormValueWidget"],function(_974,_975,_976,_977,_978,dom,_979,_97a,lang,_97b,when,_97c,_97d){var _97e=_978("dijit.form._FormSelectWidget",_97d,{multiple:false,options:null,store:null,query:null,queryOptions:null,labelAttr:"",onFetch:null,sortByLabel:true,loadChildrenOnOpen:false,onLoadDeferred:null,getOptions:function(_97f){var opts=this.options||[];if(_97f==null){return opts;}if(lang.isArray(_97f)){return _974.map(_97f,"return this.getOptions(item);",this);}if(lang.isString(_97f)){_97f={value:_97f};}if(lang.isObject(_97f)){if(!_974.some(opts,function(_980,idx){for(var a in _97f){if(!(a in _980)||_980[a]!=_97f[a]){return false;}}_97f=idx;return true;})){_97f=-1;}}if(_97f>=0&&_97f<opts.length){return opts[_97f];}return null;},addOption:function(_981){_974.forEach(lang.isArray(_981)?_981:[_981],function(i){if(i&&lang.isObject(i)){this.options.push(i);}},this);this._loadChildren();},removeOption:function(_982){var _983=this.getOptions(lang.isArray(_982)?_982:[_982]);_974.forEach(_983,function(_984){if(_984){this.options=_974.filter(this.options,function(node){return (node.value!==_984.value||node.label!==_984.label);});this._removeOptionItem(_984);}},this);this._loadChildren();},updateOption:function(_985){_974.forEach(lang.isArray(_985)?_985:[_985],function(i){var _986=this.getOptions({value:i.value}),k;if(_986){for(k in i){_986[k]=i[k];}}},this);this._loadChildren();},setStore:function(_987,_988,_989){var _98a=this.store;_989=_989||{};if(_98a!==_987){var h;while((h=this._notifyConnections.pop())){h.remove();}if(!_987.get){lang.mixin(_987,{_oldAPI:true,get:function(id){var _98b=new _975();this.fetchItemByIdentity({identity:id,onItem:function(_98c){_98b.resolve(_98c);},onError:function(_98d){_98b.reject(_98d);}});return _98b.promise;},query:function(_98e,_98f){var _990=new _975(function(){if(_991.abort){_991.abort();}});_990.total=new _975();var _991=this.fetch(lang.mixin({query:_98e,onBegin:function(_992){_990.total.resolve(_992);},onComplete:function(_993){_990.resolve(_993);},onError:function(_994){_990.reject(_994);}},_98f));return new _97c(_990);}});if(_987.getFeatures()["dojo.data.api.Notification"]){this._notifyConnections=[_976.after(_987,"onNew",lang.hitch(this,"_onNewItem"),true),_976.after(_987,"onDelete",lang.hitch(this,"_onDeleteItem"),true),_976.after(_987,"onSet",lang.hitch(this,"_onSetItem"),true)];}}this._set("store",_987);}if(this.options&&this.options.length){this.removeOption(this.options);}if(this._queryRes&&this._queryRes.close){this._queryRes.close();}if(_989.query){this._set("query",_989.query);this._set("queryOptions",_989.queryOptions);}if(_987){this._loadingStore=true;this.onLoadDeferred=new _975();this._queryRes=_987.query(this.query,this.queryOptions);when(this._queryRes,lang.hitch(this,function(_995){if(this.sortByLabel&&!_989.sort&&_995.length){if(_987.getValue){_995.sort(_977.createSortFunction([{attribute:_987.getLabelAttributes(_995[0])[0]}],_987));}else{var _996=this.labelAttr;_995.sort(function(a,b){return a[_996]>b[_996]?1:b[_996]>a[_996]?-1:0;});}}if(_989.onFetch){_995=_989.onFetch.call(this,_995,_989);}_974.forEach(_995,function(i){this._addOptionForItem(i);},this);if(this._queryRes.observe){this._queryRes.observe(lang.hitch(this,function(_997,_998,_999){if(_998==_999){this._onSetItem(_997);}else{if(_998!=-1){this._onDeleteItem(_997);}if(_999!=-1){this._onNewItem(_997);}}}),true);}this._loadingStore=false;this.set("value","_pendingValue" in this?this._pendingValue:_988);delete this._pendingValue;if(!this.loadChildrenOnOpen){this._loadChildren();}else{this._pseudoLoadChildren(_995);}this.onLoadDeferred.resolve(true);this.onSetStore();}),function(err){this.onLoadDeferred.reject(err);});}return _98a;},_setValueAttr:function(_99a,_99b){if(!this._onChangeActive){_99b=null;}if(this._loadingStore){this._pendingValue=_99a;return;}if(_99a==null){return;}if(lang.isArray(_99a)){_99a=_974.map(_99a,function(_99c){return lang.isObject(_99c)?_99c:{value:_99c};});}else{if(lang.isObject(_99a)){_99a=[_99a];}else{_99a=[{value:_99a}];}}_99a=_974.filter(this.getOptions(_99a),function(i){return i&&i.value;});var opts=this.getOptions()||[];if(!this.multiple&&(!_99a[0]||!_99a[0].value)&&!!opts.length){_99a[0]=opts[0];}_974.forEach(opts,function(opt){opt.selected=_974.some(_99a,function(v){return v.value===opt.value;});});var val=_974.map(_99a,function(opt){return opt.value;});if(typeof val=="undefined"||typeof val[0]=="undefined"){return;}var disp=_974.map(_99a,function(opt){return opt.label;});this._setDisplay(this.multiple?disp:disp[0]);this.inherited(arguments,[this.multiple?val:val[0],_99b]);this._updateSelection();},_getDisplayedValueAttr:function(){var ret=_974.map([].concat(this.get("selectedOptions")),function(v){if(v&&"label" in v){return v.label;}else{if(v){return v.value;}}return null;},this);return this.multiple?ret:ret[0];},_setDisplayedValueAttr:function(_99d){this.set("value",this.getOptions(typeof _99d=="string"?{label:_99d}:_99d));},_loadChildren:function(){if(this._loadingStore){return;}_974.forEach(this._getChildren(),function(_99e){_99e.destroyRecursive();});_974.forEach(this.options,this._addOptionItem,this);this._updateSelection();},_updateSelection:function(){this.focusedChild=null;this._set("value",this._getValueFromOpts());var val=[].concat(this.value);if(val&&val[0]){var self=this;_974.forEach(this._getChildren(),function(_99f){var _9a0=_974.some(val,function(v){return _99f.option&&(v===_99f.option.value);});if(_9a0&&!self.multiple){self.focusedChild=_99f;}_979.toggle(_99f.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),_9a0);_99f.domNode.setAttribute("aria-selected",_9a0?"true":"false");},this);}},_getValueFromOpts:function(){var opts=this.getOptions()||[];if(!this.multiple&&opts.length){var opt=_974.filter(opts,function(i){return i.selected;})[0];if(opt&&opt.value){return opt.value;}else{opts[0].selected=true;return opts[0].value;}}else{if(this.multiple){return _974.map(_974.filter(opts,function(i){return i.selected;}),function(i){return i.value;})||[];}}return "";},_onNewItem:function(item,_9a1){if(!_9a1||!_9a1.parent){this._addOptionForItem(item);}},_onDeleteItem:function(item){var _9a2=this.store;this.removeOption({value:_9a2.getIdentity(item)});},_onSetItem:function(item){this.updateOption(this._getOptionObjForItem(item));},_getOptionObjForItem:function(item){var _9a3=this.store,_9a4=(this.labelAttr&&this.labelAttr in item)?item[this.labelAttr]:_9a3.getLabel(item),_9a5=(_9a4?_9a3.getIdentity(item):null);return {value:_9a5,label:_9a4,item:item};},_addOptionForItem:function(item){var _9a6=this.store;if(_9a6.isItemLoaded&&!_9a6.isItemLoaded(item)){_9a6.loadItem({item:item,onItem:function(i){this._addOptionForItem(i);},scope:this});return;}var _9a7=this._getOptionObjForItem(item);this.addOption(_9a7);},constructor:function(_9a8){this._oValue=(_9a8||{}).value||null;this._notifyConnections=[];},buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.focusNode,false);},_fillContent:function(){if(!this.options){this.options=this.srcNodeRef?_97b("> *",this.srcNodeRef).map(function(node){if(node.getAttribute("type")==="separator"){return {value:"",label:"",selected:false,disabled:false};}return {value:(node.getAttribute("data-"+_97a._scopeName+"-value")||node.getAttribute("value")),label:String(node.innerHTML),selected:node.getAttribute("selected")||false,disabled:node.getAttribute("disabled")||false};},this):[];}if(!this.value){this._set("value",this._getValueFromOpts());}else{if(this.multiple&&typeof this.value=="string"){this._set("value",this.value.split(","));}}},postCreate:function(){this.inherited(arguments);_976.after(this,"onChange",lang.hitch(this,"_updateSelection"));var _9a9=this.store;if(_9a9&&(_9a9.getIdentity||_9a9.getFeatures()["dojo.data.api.Identity"])){this.store=null;this.setStore(_9a9,this._oValue);}},startup:function(){this._loadChildren();this.inherited(arguments);},destroy:function(){var h;while((h=this._notifyConnections.pop())){h.remove();}if(this._queryRes&&this._queryRes.close){this._queryRes.close();}this.inherited(arguments);},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return [];},_getSelectedOptionsAttr:function(){return this.getOptions({selected:true});},_pseudoLoadChildren:function(){},onSetStore:function(){}});return _97e;});},"esriviewer/ui/configure/ConfigureViewerWindow":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/dom-class","../window/WindowWidget"],function(_9aa,_9ab,lang,_9ac,_9ad){return _9aa([_9ad],{defaultPositioning:{x:500,y:50},constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/configure/ConfigureViewerWidget"],lang.hitch(this,function(_9ae){this.configureViewerWidget=new _9ae();this.setContent(this.configureViewerWidget.domNode);}));},isPositionedByConfig:true,canMinimize:false,windowHeaderText:"Configure Viewer",windowIconAltText:"Configure Viewer",windowIconClass:"commonIcons16 gear",postCreate:function(){this.inherited(arguments);_9ac.add(this.windowContent,"configureWindowContent");},initListeners:function(){this.inherited(arguments);this.subscribes.push(_9ab.subscribe(VIEWER_GLOBALS.EVENTS.CONFIGURE.WINDOW.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_9ab.subscribe(VIEWER_GLOBALS.EVENTS.CONFIGURE.WINDOW.HIDE,lang.hitch(this,this.hide)));},hidePopups:function(){this.inherited(arguments);if(this.configureViewerWidget){this.configureViewerWidget.hidePopups();}}});});},"dijit/form/Select":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/i18n","dojo/_base/lang","dojo/on","dojo/sniff","./_FormSelectWidget","../_HasDropDown","../DropDownMenu","../MenuItem","../MenuSeparator","../Tooltip","../_KeyNavMixin","../registry","dojo/text!./templates/Select.html","dojo/i18n!./nls/validate"],function(_9af,_9b0,_9b1,_9b2,_9b3,i18n,lang,on,has,_9b4,_9b5,_9b6,_9b7,_9b8,_9b9,_9ba,_9bb,_9bc){var _9bd=_9b0("dijit.form._SelectMenu",_9b6,{autoFocus:true,buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("role","listbox");},postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,"selectstart",function(evt){evt.preventDefault();evt.stopPropagation();}));},focus:function(){var _9be=false,val=this.parentWidget.value;if(lang.isArray(val)){val=val[val.length-1];}if(val){_9af.forEach(this.parentWidget._getChildren(),function(_9bf){if(_9bf.option&&(val===_9bf.option.value)){_9be=true;this.focusChild(_9bf,false);}},this);}if(!_9be){this.inherited(arguments);}}});var _9c0=_9b0("dijit.form.Select"+(has("dojo-bidi")?"_NoBidi":""),[_9b4,_9b5,_9ba],{baseClass:"dijitSelect dijitValidationTextBox",templateString:_9bc,_buttonInputDisabled:has("ie")?"disabled":"",required:false,state:"",message:"",tooltipPosition:[],emptyLabel:"&#160;",_isLoaded:false,_childrenLoaded:false,_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var si=this.srcNodeRef.selectedIndex||0;this._set("value",this.options[si>=0?si:0].value);}this.dropDown=new _9bd({id:this.id+"_menu",parentWidget:this});_9b2.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "));},_getMenuItemForOption:function(_9c1){if(!_9c1.value&&!_9c1.label){return new _9b8({ownerDocument:this.ownerDocument});}else{var _9c2=lang.hitch(this,"_setValueAttr",_9c1);var item=new _9b7({option:_9c1,label:_9c1.label||this.emptyLabel,onClick:_9c2,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:_9c1.disabled||false});item.focusNode.setAttribute("role","option");return item;}},_addOptionItem:function(_9c3){if(this.dropDown){this.dropDown.addChild(this._getMenuItemForOption(_9c3));}},_getChildren:function(){if(!this.dropDown){return [];}return this.dropDown.getChildren();},focus:function(){if(!this.disabled&&this.focusNode.focus){try{this.focusNode.focus();}catch(e){}}},focusChild:function(_9c4){if(_9c4){this.set("value",_9c4.option);}},_getFirst:function(){var _9c5=this._getChildren();return _9c5.length?_9c5[0]:null;},_getLast:function(){var _9c6=this._getChildren();return _9c6.length?_9c6[_9c6.length-1]:null;},childSelector:function(node){var node=_9bb.byNode(node);return node&&node.getParent()==this.dropDown;},onKeyboardSearch:function(item,evt,_9c7,_9c8){if(item){this.focusChild(item);}},_loadChildren:function(_9c9){if(_9c9===true){if(this.dropDown){delete this.dropDown.focusedChild;this.focusedChild=null;}if(this.options.length){this.inherited(arguments);}else{_9af.forEach(this._getChildren(),function(_9ca){_9ca.destroyRecursive();});var item=new _9b7({ownerDocument:this.ownerDocument,label:this.emptyLabel});this.dropDown.addChild(item);}}else{this._updateSelection();}this._isLoaded=false;this._childrenLoaded=true;if(!this._loadingStore){this._setValueAttr(this.value,false);}},_refreshState:function(){if(this._started){this.validate(this.focused);}},startup:function(){this.inherited(arguments);this._refreshState();},_setValueAttr:function(_9cb){this.inherited(arguments);_9b1.set(this.valueNode,"value",this.get("value"));this._refreshState();},_setNameAttr:"valueNode",_setDisabledAttr:function(_9cc){this.inherited(arguments);this._refreshState();},_setRequiredAttr:function(_9cd){this._set("required",_9cd);this.focusNode.setAttribute("aria-required",_9cd);this._refreshState();},_setOptionsAttr:function(_9ce){this._isLoaded=false;this._set("options",_9ce);},_setDisplay:function(_9cf){var lbl=_9cf||this.emptyLabel;this.containerNode.innerHTML="<span role=\"option\" class=\"dijitReset dijitInline "+this.baseClass.replace(/\s+|$/g,"Label ")+"\">"+lbl+"</span>";},validate:function(_9d0){var _9d1=this.disabled||this.isValid(_9d0);this._set("state",_9d1?"":(this._hasBeenBlurred?"Error":"Incomplete"));this.focusNode.setAttribute("aria-invalid",_9d1?"false":"true");var _9d2=_9d1?"":this._missingMsg;if(_9d2&&this.focused&&this._hasBeenBlurred){_9b9.show(_9d2,this.domNode,this.tooltipPosition,!this.isLeftToRight());}else{_9b9.hide(this.domNode);}this._set("message",_9d2);return _9d1;},isValid:function(){return (!this.required||this.value===0||!(/^\s*$/.test(this.value||"")));},reset:function(){this.inherited(arguments);_9b9.hide(this.domNode);this._refreshState();},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=i18n.getLocalization("dijit.form","validate",this.lang).missingMessage;},postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,"selectstart",function(evt){evt.preventDefault();evt.stopPropagation();}));this.domNode.setAttribute("aria-expanded","false");if(has("ie")<9){this.defer(function(){try{var s=domStyle.getComputedStyle(this.domNode);if(s){var ff=s.fontFamily;if(ff){var _9d3=this.domNode.getElementsByTagName("INPUT");if(_9d3){for(var i=0;i<_9d3.length;i++){_9d3[i].style.fontFamily=ff;}}}}}catch(e){}});}},_setStyleAttr:function(_9d4){this.inherited(arguments);_9b2.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width);},isLoaded:function(){return this._isLoaded;},loadDropDown:function(_9d5){this._loadChildren(true);this._isLoaded=true;_9d5();},destroy:function(_9d6){if(this.dropDown&&!this.dropDown._destroyed){this.dropDown.destroyRecursive(_9d6);delete this.dropDown;}this.inherited(arguments);},_onFocus:function(){this.validate(true);this.inherited(arguments);},_onBlur:function(){_9b9.hide(this.domNode);this.inherited(arguments);this.validate(false);}});if(has("dojo-bidi")){_9c0=_9b0("dijit.form.Select",_9c0,{_setDisplay:function(_9d7){this.inherited(arguments);this.applyTextDir(this.containerNode);}});}_9c0._Menu=_9bd;function _9d8(_9d9){return function(evt){if(!this._isLoaded){this.loadDropDown(lang.hitch(this,_9d9,evt));}else{this.inherited(_9d9,arguments);}};};_9c0.prototype._onContainerKeydown=_9d8("_onContainerKeydown");_9c0.prototype._onContainerKeypress=_9d8("_onContainerKeypress");return _9c0;});},"esriviewer/loader/base/BaseViewerPlacement":function(){define(["dojo/_base/declare","dojo/_base/window","dojo/topic","dojo/_base/lang","dojo/dom-construct","dojo/dom-class","dojo/dom"],function(_9da,_9db,_9dc,lang,_9dd,_9de,dom){return _9da([],{label:"unknown",isAbsolutePositioned:false,isWindowless:true,MAP_DIV_CLASS:"mapdiv",constructor:function(_9df){this.mapDiv=null;if(_9df!=null&&_9df.mapDiv!=null){if(_9df.mapDiv instanceof String){this.mapDiv=dom.byId(_9df.mapDiv);}else{if(!_9de.contains(_9df.mapDiv,this.MAP_DIV_CLASS)){_9de.add(_9df.mapDiv,this.MAP_DIV_CLASS);}}this.mapDiv=_9df.mapDiv;}if(this.mapDiv==null){this.initUI();}this.initListeners();},initUI:function(){this.mapDiv=_9dd.create("div",{className:this.MAP_DIV_CLASS});},initListeners:function(){_9dc.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAIN_TOOLBAR,lang.hitch(this,this.placeMainToolbar));_9dc.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAIN_TOOLBAR_DROP_DOWN,lang.hitch(this,this.placeMainToolbarDropdown));_9dc.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.NAVIGATION_TOOLBAR,lang.hitch(this,this.placeNavigationToolbar));_9dc.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.HEADER,lang.hitch(this,this.placeHeader));_9dc.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.VIEWER_ACCORDION,lang.hitch(this,this.placeViewerAccordion));_9dc.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.FOOTER,lang.hitch(this,this.placeFooterWidget));_9dc.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MESSAGING,lang.hitch(this,this.placeMessagingWidget));_9dc.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.THROBBER,lang.hitch(this,this.placeThrobberWidget));_9dc.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.BASEMAP_GALLERY,lang.hitch(this,this.placeBasemapGallery));_9dc.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAP_SCALE_AND_COORDINATES,lang.hitch(this,this.placeMapScaleAndCoordinates));_9dc.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.CREATE_BOOOKMARK,lang.hitch(this,this.placeCreateBookmarkWidget));_9dc.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MENU_BAR,lang.hitch(this,this.placeMenuBarWidget));_9dc.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.USER_LOCATION,lang.hitch(this,this.placeUserLocationWidget));_9dc.subscribe(VIEWER_GLOBALS.EVENTS.MAP.GET_MAP_DIV,lang.hitch(this,this.handleGetMapDiv));},handleGetMapDiv:function(_9e0){if(_9e0!=null&&lang.isFunction(_9e0)){_9e0(this.mapDiv);}},placeMainToolbarDropdown:function(_9e1){},placeMenuBarWidget:function(_9e2){},placeCreateBookmarkWidget:function(_9e3){},placeMapScaleAndCoordinates:function(_9e4){},placeBasemapGallery:function(_9e5){},placeNavigationToolbar:function(_9e6){},placeHeader:function(_9e7){},placeViewerAccordion:function(_9e8){},placeMainToolbar:function(_9e9){},placeUserLocationWidget:function(_9ea){if(_9ea){var _9eb=this._getMapContainer();if(_9eb){_9ea.placeAt(_9eb);}}},placeFooterWidget:function(_9ec){if(_9ec){_9ec.placeAt(_9db.body());}},placeMessagingWidget:function(_9ed){},placeThrobberWidget:function(_9ee){},_getMapContainer:function(){if(this.mapContainer==null){var _9ef;_9dc.publish(VIEWER_GLOBALS.EVENTS.MAP.GET_MAP_DIV,function(mDiv){_9ef=mDiv;});this.mapContainer=_9ef;}return this.mapContainer;}});});},"esriviewer/ui/draw/configure/geometry/BaseGeometryConfigurationWidget":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/form/HorizontalSlider","dojo/_base/Color","dijit/ColorPalette","dojo/dom-attr","dojo/dom-style","dojo/dom-construct","dojo/dom-class","../../../base/UITemplatedWidget"],function(_9f0,lang,_9f1,_9f2,_9f3,_9f4,_9f5,_9f6,_9f7,_9f8){return _9f0([_9f8],{defaultColor:"#ff0000",transparencySliderContainer:null,colorPickerContainer:null,defaultTransparency:75,postCreate:function(){this.inherited(arguments);if(this.transparencySliderContainer!=null){this.createTransparencySlider();}if(this.colorPickerContainer!=null){this.createColorPicker();}},createTransparencySlider:function(){this.transparencySliderLabel=_9f6.create("div");_9f5.set(this.transparencySliderLabel,"margin","8px 0 5px 0");_9f4.set(this.transparencySliderLabel,"innerHTML","Opacity - "+this.defaultTransparency+"%");_9f7.add(this.transparencySliderLabel,"configureGeometryOpacityLabel");_9f6.place(this.transparencySliderLabel,this.transparencySliderContainer);var _9f9=_9f6.create("div");_9f6.place(_9f9,this.transparencySliderContainer);this.transparencySlider=new _9f1({value:this.defaultTransparency,maximum:100,minimum:5,showButtons:false,pageIncrement:10,style:"width:195px"},_9f9);this.transparencySlider.on("change",lang.hitch(this,this.handleTransparencyChanged));this.transparencySlider.startup();},createColorPicker:function(){var _9fa=_9f6.create("div");_9f6.place(_9fa,this.colorPickerContainer);this.colorPicker=new _9f3({value:this.defaultColor},_9fa);this.colorPicker.on("change",lang.hitch(this,this.handleColorPickerChanged));},handleTransparencyChanged:function(_9fb){_9f4.set(this.transparencySliderLabel,"innerHTML","Opacity - "+Math.ceil(_9fb)+" %");this.processChange();},handleColorPickerChanged:function(_9fc){this.processChange();},getTransparency:function(){if(this.transparencySlider==null){return 100;}else{return Math.ceil(this.transparencySlider.get("value"));}},getColor:function(){var _9fd=_9f2.fromHex(this.colorPicker.get("value"));var _9fe=this.getTransparency()/100;return new _9f2([_9fd.r,_9fd.g,_9fd.b,_9fe]);},processChange:function(){},onChange:function(_9ff){},getSymbol:function(){return null;}});});},"dijit/_KeyNavMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","dijit/registry","dijit/_FocusMixin"],function(_a00,_a01,_a02,keys,lang,on,_a03,_a04){return _a01("dijit._KeyNavMixin",_a04,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments);_a02.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var _a05=this._keyNavCodes={};_a05[keys.HOME]=lang.hitch(this,"focusFirstChild");_a05[keys.END]=lang.hitch(this,"focusLastChild");_a05[this.isLeftToRight()?keys.LEFT_ARROW:keys.RIGHT_ARROW]=lang.hitch(this,"_onLeftArrow");_a05[this.isLeftToRight()?keys.RIGHT_ARROW:keys.LEFT_ARROW]=lang.hitch(this,"_onRightArrow");_a05[keys.UP_ARROW]=lang.hitch(this,"_onUpArrow");_a05[keys.DOWN_ARROW]=lang.hitch(this,"_onDownArrow");}var self=this,_a06=typeof this.childSelector=="string"?this.childSelector:lang.hitch(this,"childSelector");this.own(on(this.domNode,"keypress",lang.hitch(this,"_onContainerKeypress")),on(this.domNode,"keydown",lang.hitch(this,"_onContainerKeydown")),on(this.domNode,"focus",lang.hitch(this,"_onContainerFocus")),on(this.containerNode,on.selector(_a06,"focusin"),function(evt){self._onChildFocus(_a03.getEnclosingWidget(this),evt);}));},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild();},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1);},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1);},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild());},focusLastChild:function(){this.focusChild(this._getLastFocusableChild());},focusChild:function(_a07,last){if(!_a07){return;}if(this.focusedChild&&_a07!==this.focusedChild){this._onChildBlur(this.focusedChild);}_a07.set("tabIndex",this.tabIndex);_a07.focus(last?"end":"start");},_onContainerFocus:function(evt){if(evt.target!==this.domNode||this.focusedChild){return;}this.focus();},_onFocus:function(){_a02.set(this.domNode,"tabIndex","-1");this.inherited(arguments);},_onBlur:function(evt){_a02.set(this.domNode,"tabIndex",this.tabIndex);if(this.focusedChild){this.focusedChild.set("tabIndex","-1");this.lastFocusedChild=this.focusedChild;this._set("focusedChild",null);}this.inherited(arguments);},_onChildFocus:function(_a08){if(_a08&&_a08!=this.focusedChild){if(this.focusedChild&&!this.focusedChild._destroyed){this.focusedChild.set("tabIndex","-1");}_a08.set("tabIndex",this.tabIndex);this.lastFocused=_a08;this._set("focusedChild",_a08);}},_searchString:"",multiCharSearchDuration:1000,onKeyboardSearch:function(item,evt,_a09,_a0a){if(item){this.focusChild(item);}},_keyboardSearchCompare:function(item,_a0b){var _a0c=item.domNode,text=item.label||(_a0c.focusNode?_a0c.focusNode.label:"")||_a0c.innerText||_a0c.textContent||"",_a0d=text.replace(/^\s+/,"").substr(0,_a0b.length).toLowerCase();return (!!_a0b.length&&_a0d==_a0b)?-1:0;},_onContainerKeydown:function(evt){var func=this._keyNavCodes[evt.keyCode];if(func){func(evt,this.focusedChild);evt.stopPropagation();evt.preventDefault();this._searchString="";}else{if(evt.keyCode==keys.SPACE&&this._searchTimer&&!(evt.ctrlKey||evt.altKey||evt.metaKey)){evt.stopImmediatePropagation();evt.preventDefault();this._keyboardSearch(evt," ");}}},_onContainerKeypress:function(evt){if(evt.charCode<keys.SPACE||evt.ctrlKey||evt.altKey||evt.metaKey||(evt.charCode==keys.SPACE&&this._searchTimer)){return;}evt.preventDefault();evt.stopPropagation();this._keyboardSearch(evt,String.fromCharCode(evt.charCode).toLowerCase());},_keyboardSearch:function(evt,_a0e){var _a0f=null,_a10,_a11=0,_a12=lang.hitch(this,function(){if(this._searchTimer){this._searchTimer.remove();}this._searchString+=_a0e;var _a13=/^(.)\1*$/.test(this._searchString);var _a14=_a13?1:this._searchString.length;_a10=this._searchString.substr(0,_a14);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString="";},this.multiCharSearchDuration);var _a15=this.focusedChild||null;if(_a14==1||!_a15){_a15=this._getNextFocusableChild(_a15,1);if(!_a15){return;}}var stop=_a15;do{var rc=this._keyboardSearchCompare(_a15,_a10);if(!!rc&&_a11++==0){_a0f=_a15;}if(rc==-1){_a11=-1;break;}_a15=this._getNextFocusableChild(_a15,1);}while(_a15!=stop);});_a12();this.onKeyboardSearch(_a0f,evt,_a10,_a11);},_onChildBlur:function(){},_getNextFocusableChild:function(_a16,dir){var _a17=_a16;do{if(!_a16){_a16=this[dir>0?"_getFirst":"_getLast"]();if(!_a16){break;}}else{_a16=this._getNext(_a16,dir);}if(_a16!=null&&_a16!=_a17&&_a16.isFocusable()){return _a16;}}while(_a16!=_a17);return null;},_getFirst:function(){return null;},_getLast:function(){return null;},_getNext:function(_a18,dir){if(_a18){_a18=_a18.domNode;while(_a18){_a18=_a18[dir<0?"previousSibling":"nextSibling"];if(_a18&&"getAttribute" in _a18){var w=_a03.byNode(_a18);if(w){return w;}}}}return null;}});});},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../when"],function(_a19,lang,when){var _a1a=function(_a1b){if(!_a1b){return _a1b;}if(_a1b.then){_a1b=lang.delegate(_a1b);}function _a1c(_a1d){if(!_a1b[_a1d]){_a1b[_a1d]=function(){var args=arguments;return when(_a1b,function(_a1e){Array.prototype.unshift.call(args,_a1e);return _a1a(_a19[_a1d].apply(_a19,args));});};}};_a1c("forEach");_a1c("filter");_a1c("map");if(!_a1b.total){_a1b.total=when(_a1b,function(_a1f){return _a1f.length;});}return _a1b;};lang.setObject("dojo.store.util.QueryResults",_a1a);return _a1a;});},"xstyle/util/createStyleSheet":function(){define([],function(){function has(){return !document.createStyleSheet;};var head=document.head;return function insertCss(css){if(has("dom-create-style-element")){_a20=document.createElement("style");_a20.setAttribute("type","text/css");_a20.appendChild(document.createTextNode(css));head.insertBefore(_a20,head.firstChild);return _a20;}else{var _a20=document.createStyleSheet();_a20.cssText=css;return _a20.owningElement;}};});},"dijit/CheckedMenuItem":function(){define(["dojo/_base/declare","dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(_a21,_a22,_a23,_a24){return _a21("dijit.CheckedMenuItem",_a23,{baseClass:"dijitCheckedMenuItem",templateString:_a24,checked:false,_setCheckedAttr:function(_a25){_a22.toggle(this.domNode,this.baseClass+"Checked",_a25);this.domNode.setAttribute("aria-checked",_a25?"true":"false");this._set("checked",_a25);},iconClass:"",role:"menuitemcheckbox",checkedChar:"&#10003;",onChange:function(){},_onClick:function(evt){if(!this.disabled){this.set("checked",!this.checked);this.onChange(this.checked);}this.onClick(evt);}});});},"esriviewer/ui/draw/model/DrawWidgetViewModel":function(){define(["dojo/_base/declare"],function(_a26){return _a26([],{drawModes:{"point":"point","line":"line","polyline":"polyline","polygon":"polygon","rectangle":"rectangle","text":"text"},constructor:function(){var self=this;this.showUserPersistedGraphicsIcon=ko.observable(true);this.showDrawWindowActions=ko.observable(true);this.showDrawPolylineIcon=ko.observable(true);this.showDrawTextIcon=ko.observable(true);this.showDrawPointIcon=ko.observable(true);this.showDrawLineIcon=ko.observable(true);this.showDrawPolygonIcon=ko.observable(true);this.showDrawRectangleIcon=ko.observable(true);this.forceHideGraphicsListTab=ko.observable(false);this.polylineActive=ko.observable(false);this.pointActive=ko.observable(false);this.lineActive=ko.observable(false);this.rectangleActive=ko.observable(false);this.polygonActive=ko.observable(false);this.textActive=ko.observable(false);this.graphicsListTabVisible=ko.observable(false);this.freehandContainerVisible=ko.observable(false);this.userPersistedGraphicsVisible=ko.observable(false);this.graphicsListVisible=ko.observable(false);this.configurationVisible=ko.observable(false);this.drawVisible=ko.observable(true);var _a27=function(){return (!self.forceHideGraphicsListTab())&&self.graphicsListTabVisible();};this.showGraphicsListTab=ko.computed(_a27);this.showSavedGraphicsTab=ko.observable(false);},showUserPersistedGraphics:function(){this.graphicsListVisible(false);this.configurationVisible(false);this.drawVisible(false);this.userPersistedGraphicsVisible(true);this.freehandContainerVisible(false);},showGraphicsList:function(){this.graphicsListVisible(true);this.configurationVisible(false);this.drawVisible(false);this.userPersistedGraphicsVisible(false);this.freehandContainerVisible(false);},showConfiguration:function(){this.graphicsListVisible(false);this.configurationVisible(true);this.userPersistedGraphicsVisible(false);this.drawVisible(false);this.freehandContainerVisible(false);},showDraw:function(){this.graphicsListVisible(false);this.userPersistedGraphicsVisible(false);this.configurationVisible(false);this.drawVisible(true);this.freehandContainerVisible(this.polygonActive()||this.lineActive());},setDrawMode:function(mode){this.pointActive(false);this.lineActive(false);this.polylineActive(false);this.rectangleActive(false);this.polygonActive(false);this.textActive(false);this.freehandContainerVisible(false);if(mode!=null){if(mode===this.drawModes.point){this.pointActive(true);}else{if(mode===this.drawModes.line){this.lineActive(true);if(this.drawVisible()){this.freehandContainerVisible(false);}}else{if(mode===this.drawModes.polyline){this.polylineActive(true);if(this.drawVisible()){this.freehandContainerVisible(true);}}else{if(mode===this.drawModes.rectangle){this.rectangleActive(true);}else{if(mode===this.drawModes.polygon){this.polygonActive(true);if(this.drawVisible()){this.freehandContainerVisible(true);}}else{if(mode===this.drawModes.text){this.textActive(true);}}}}}}}},getCurrentDrawType:function(){if(this.polygonActive()){return this.drawModes.polygon;}else{if(this.lineActive()){return this.drawModes.line;}else{if(this.rectangleActive()){return this.drawModes.rectangle;}else{if(this.pointActive()){return this.drawModes.point;}else{if(this.polylineActive()){return this.drawModes.polyline;}else{if(this.textActive()){return this.drawModes.text;}else{return null;}}}}}}}});});},"esriviewer/ui/logging/LoggingWidgetWindow":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","../window/WindowWidget","./LoggingWidget"],function(_a28,_a29,lang,_a2a,_a2b){return _a28([_a2a],{defaultPositioning:{x:10,y:240},windowWidth:"500px",windowHeaderText:"Logging",windowIconAltText:"Logging",windowIconClass:"commonIcons16 list",positioningParamName:"logging",postCreate:function(){this.inherited(arguments);this.loggingWidget=new _a2b();this.setContent(this.loggingWidget.domNode);},initListeners:function(){this.inherited(arguments);this.subscribes.push(_a29.subscribe(VIEWER_GLOBALS.EVENTS.LOGGING.WINDOW.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_a29.subscribe(VIEWER_GLOBALS.EVENTS.LOGGING.WINDOW.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_a29.subscribe(VIEWER_GLOBALS.EVENTS.LOGGING.WINDOW.TOGGLE,lang.hitch(this,this.toggle)));},hidePopups:function(){this.inherited(arguments);if(this.loggingWidget){this.loggingWidget.hidePopups();}}});});},"esriviewer/ui/portal/PortalPublisherWindowWidget":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/dom-class","../window/WindowWidget"],function(_a2c,lang,_a2d,_a2e,_a2f){return _a2c([_a2f],{defaultPositioning:{x:400,y:125},windowWidth:"375px",windowHeaderText:"Publish to Portal",windowIconAltText:"Publish to Portal",windowIconClass:"commonIcons16 worldAdd",positioningParamName:"portalPublisher",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_a2e.add(this.windowContent,"portalPublisherWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/portal/PortalPublisherWidget"],lang.hitch(this,function(_a30){this.portalPublisherWidget=new _a30();this.setContent(this.portalPublisherWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_a2d.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PORTAL_PUBLISH.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_a2d.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PORTAL_PUBLISH.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_a2d.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PORTAL_PUBLISH.TOGGLE,lang.hitch(this,this.toggle)));}});});},"esriviewer/ui/legend/MapLegendWindow":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","../window/WindowWidget"],function(_a31,_a32,lang,_a33){return _a31([_a33],{defaultPositioning:{x:62,y:150},windowWidth:"300px",windowHeight:"400px",windowHeaderText:"Map Legend",windowIconAltText:"Map Legend",windowIconClass:"commonIcons16 list",positioningParamName:"legend",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/legend/MapLegendWidget"],lang.hitch(this,function(_a34){this.mapLegendWidget=new _a34();this.setContent(this.mapLegendWidget.domNode);this.mapLegendWidget.startup();}));},initListeners:function(){this.inherited(arguments);_a32.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.LEGEND.SHOW,lang.hitch(this,this.show));_a32.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.LEGEND.HIDE,lang.hitch(this,this.hide));}});});},"dijit/MenuSeparator":function(){define(["dojo/_base/declare","dojo/dom","./_WidgetBase","./_TemplatedMixin","./_Contained","dojo/text!./templates/MenuSeparator.html"],function(_a35,dom,_a36,_a37,_a38,_a39){return _a35("dijit.MenuSeparator",[_a36,_a37,_a38],{templateString:_a39,buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});});},"esriviewer/ui/draw/configure/geometry/model/ConfigureTextViewModel":function(){define(["dojo/_base/declare","esri/symbols/TextSymbol","esri/symbols/Font"],function(_a3a,_a3b,Font){return _a3a([],{textAligns:ko.observableArray([{value:_a3b.ALIGN_START,label:"Start"},{value:_a3b.ALIGN_MIDDLE,label:"Middle"},{value:_a3b.ALIGN_END,label:"End"}]),textWeights:ko.observableArray([{value:Font.WEIGHT_NORMAL,label:"Normal"},{value:Font.WEIGHT_LIGHTER,label:"Lighter"},{value:Font.WEIGHT_BOLD,label:"Bold"},{value:Font.WEIGHT_BOLDER,label:"Bolder"}]),fontFaces:ko.observableArray([{value:Font.STYLE_NORMAL,label:"Normal"},{value:Font.STYLE_ITALIC,label:"Italic"},{value:Font.STYLE_OBLIQUE,label:"Oblique"}]),textSizes:ko.observableArray([{value:"8pt",label:"8"},{value:"9pt",label:"9"},{value:"10pt",label:"10"},{value:"11pt",label:"11"},{value:"12pt",label:"12"},{value:"13pt",label:"13"},{value:"14pt",label:"14"},{value:"15pt",label:"15"},{value:"20pt",label:"20"},{value:"25pt",label:"25"},{value:"30pt",label:"30"},{value:"50pt",label:"50"},{value:"75pt",label:"75"}]),angles:ko.observableArray([0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85]),constructor:function(){this.selectedTextSize=ko.observable("15pt");this.selectedTextAlign=ko.observable(_a3b.ALIGN_END);this.selectedTextWeight=ko.observable(Font.WEIGHT_NORMAL);this.selectedFontFace=ko.observable(Font.STYLE_NORMAL);this.selectedAngle=ko.observable(0);}});});},"esriviewer/map/base/DistinctQuery":function(){define(["dojo/_base/declare","esri/tasks/query"],function(_a3c,_a3d){return _a3c([_a3d],{toJson:function(){var json=this.inherited(arguments);json.returnDistinctValues=true;return json;}});});},"esriviewer/base/DataLoaderSupport":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/xhr","esri/config","esri/request"],function(_a3e,lang,xhr,_a3f,_a40){return _a3e([],{loadJson:function(url,_a41,_a42){if(url==null||url==""||_a41==null||!lang.isFunction(_a41)){return;}var _a43={url:url,handleAs:"json",load:_a41};if(_a42!=null&&lang.isFunction(_a42)){_a43.error=_a42;}xhr.get(_a43);},loadProxiedJson:function(url,_a44,_a45){if(_a3f==null||_a3f.defaults==null||_a3f.defaults.io==null||_a3f.defaults.io.proxyUrl==null){alert("You Must Configure a proxy for this request: "+url);return;}this.loadJson(_a3f.defaults.io.proxyUrl+"?"+url,_a44,_a45);},loadJsonP:function(url,_a46,_a47,_a48,_a49){if(_a48==null){_a48=lang.hitch(this,function(_a4a){var msg="Could not resource : "+url+". Please verify URL is accessible.";});}if(_a49==null){_a49="callback";}var _a4b={callbackParamName:_a49,content:_a46,url:url};_a40(_a4b).then(_a47,_a48);},loadText:function(url,_a4c,_a4d){if(url==null||url==""||!lang.isFunction(_a4c)){return;}var _a4e={url:url,handleAs:"text",load:_a4c};if(_a4d!=null&&lang.isFunction(_a4d)){_a4e.error=_a4d;}xhr.get(_a4e);}});});},"esriviewer/ui/draw/DrawWindow":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/dom-class","../window/WindowWidget","./DrawWidget"],function(_a4f,_a50,lang,_a51,_a52,_a53){return _a4f([_a52],{defaultPositioning:{x:500,y:50},windowWidth:"335px",windowHeaderText:"Draw",windowIconAltText:"Draw",positioningParamName:"draw",windowIconClass:"commonIcons16 pencil",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_a51.add(this.windowContent,"drawWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();this.drawWidget=new _a53();this.setContent(this.drawWidget.domNode);},initListeners:function(){this.inherited(arguments);this.subscribes.push(_a50.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.DRAW.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_a50.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.DRAW.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_a50.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.DRAW.TOGGLE,lang.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.drawWidget){if(this.drawWidget.currentDrawType!=null){this.drawWidget.clearDraw();}}},hidePopups:function(){this.inherited(arguments);if(this.drawWidget){this.drawWidget.hidePopups();}}});});},"esriviewer/ui/query/QueryBuilderWindowWidget":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/dom-class","../window/WindowWidget","dojox/html/metrics"],function(_a54,lang,_a55,_a56,_a57,_a58){return _a54([_a57],{defaultPositioning:{x:400,y:125},pendingQueryLayerCallback:null,minWidth:400,resizable:true,resizeAxis:"xy",windowHeight:"38em",windowHeaderText:"Query Builder",windowIconAltText:"Query Builder",windowIconClass:"commonIcons16 sql",positioningParamName:"queryBuilder",constructor:function(){var _a59=_a58.getFontMeasurements();this.minHeight=38*_a59["1em"];this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_a56.add(this.windowContent,"queryBuilderWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/query/QueryBuilderWidget"],lang.hitch(this,function(_a5a){this.queryBuilderWidget=new _a5a();this.setContent(this.queryBuilderWidget.domNode);if(this.pendingQueryLayerCallback!=null&&lang.isFunction(this.pendingQueryLayerCallback)){this.pendingQueryLayerCallback();}}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_a55.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.QUERY_BUILDER.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_a55.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.QUERY_BUILDER.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_a55.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.QUERY_BUILDER.TOGGLE,lang.hitch(this,this.toggle)));_a55.subscribe(VIEWER_GLOBALS.EVENTS.QUERY_BUILDER.SET_IMAGE_SERVICE_LAYER,lang.hitch(this,this.setImageServiceLayer));_a55.subscribe(VIEWER_GLOBALS.EVENTS.QUERY_BUILDER.SET_MAP_SERVICE_LAYER,lang.hitch(this,this.setMapServiceLayer));_a55.subscribe(VIEWER_GLOBALS.EVENTS.QUERY_BUILDER.SET_FEATURE_SERVICE_LAYER,lang.hitch(this,this.setFeatureServiceLayer));},hide:function(){this.inherited(arguments);if(this.queryBuilderWidget){this.queryBuilderWidget.clearGraphics();}},setImageServiceLayer:function(_a5b){if(this.queryBuilderWidget==null){this.pendingQueryLayerCallback=lang.hitch(this,function(_a5c){this.queryBuilderWidget.setImageServiceLayer(_a5c);this.pendingQueryLayerCallback=null;},_a5b);}else{this.queryBuilderWidget.setImageServiceLayer(_a5b);}this.show();},setMapServiceLayer:function(_a5d,_a5e){if(this.queryBuilderWidget==null){this.pendingQueryLayerCallback=lang.hitch(this,function(_a5f,_a60){this.queryBuilderWidget.setMapServiceLayer(_a5f,_a60);this.pendingQueryLayerCallback=null;},_a5d,_a5e);}else{this.queryBuilderWidget.setMapServiceLayer(_a5d,_a5e);}this.show();},setFeatureServiceLayer:function(_a61){if(this.queryBuilderWidget==null){this.pendingQueryLayerCallback=lang.hitch(this,function(_a62){this.queryBuilderWidget.setFeatureServiceLayer(_a62);this.pendingQueryLayerCallback=null;},_a61);}else{this.queryBuilderWidget.setFeatureServiceLayer(_a61);}this.show();}});});},"dojo/require":function(){define(["./_base/loader"],function(_a63){return {dynamic:0,normalize:function(id){return id;},load:_a63.require};});},"xstyle/css":function(){define(["require"],function(_a64){"use strict";function _a65(tag,id,_a66){var _a67=document.documentElement;var _a68=_a67.insertBefore(document.createElement(tag),_a67.firstChild);_a68.id=id;var _a69=(_a68.currentStyle||getComputedStyle(_a68,null))[_a66];_a67.removeChild(_a68);return _a69;};return {load:function(_a6a,_a6b,_a6c,_a6d){var url=_a6b.toUrl(_a6a);var _a6e=_a6b.cache["url:"+url];if(_a6e){if(_a6e.xCss){var _a6f=_a6e.parser;var xCss=_a6e.xCss;_a6e=_a6e.cssText;}_a64(["./util/createStyleSheet"],function(_a70){_a70(_a6e);});if(xCss){}return _a71();}function _a71(){var _a72=_a65("x-parse",null,"content");if(_a72&&_a72!="none"){_a6b([eval(_a72)],_a6c);}else{_a6c();}};var _a73=_a65("div",_a6a.replace(/\//g,"-").replace(/\..*/,"")+"-loaded","display");if(_a73=="none"){return _a71();}_a64(["./load-css"],function(load){load(url,_a71);});}};});},"esriviewer/ui/draw/configure/geometry/model/ConfigurePolygonViewModel":function(){define(["dojo/_base/declare","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol"],function(_a74,_a75,_a76){return _a74([],{fillStyles:ko.observableArray([{value:_a76.STYLE_BACKWARD_DIAGONAL,label:"Backward Diagonal"},{value:_a76.STYLE_CROSS,label:"Cross"},{value:_a76.STYLE_DIAGONAL_CROSS,label:"Diagonal Cross"},{value:_a76.STYLE_FORWARD_DIAGONAL,label:"Forward Diagonal"},{value:_a76.STYLE_HORIZONTAL,label:"Horizontal Lines"},{value:_a76.STYLE_SOLID,label:"Solid"},{value:_a76.STYLE_VERTICAL,label:"Vertical Lines"},{value:_a76.STYLE_NULL,label:"None"}]),outlineStyles:ko.observableArray([{value:_a75.STYLE_DASH,label:"Dashed Line"},{value:_a75.STYLE_DASHDOT,label:"Dash Dot Line"},{value:_a75.STYLE_DASHDOTDOT,label:"Dash Dot Dot Line"},{value:_a75.STYLE_DOT,label:"Dotted Line"},{value:_a75.STYLE_SOLID,label:"Solid Line"},{value:_a75.STYLE_NULL,label:"None"}]),outlineWidths:ko.observableArray([1,2,3,4,5,6,7,8,9,10,15,20,25,30,40,50]),angles:ko.observableArray([0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85]),constructor:function(){this.selectedFillStyle=ko.observable(_a76.STYLE_SOLID);this.selectedOutlineStyle=ko.observable(_a75.STYLE_SOLID);this.selectedAngle=ko.observable(0);this.selectedOutlineWidth=ko.observable(1);this.outlineColorActive=ko.observable(true);this.fillColorActive=ko.observable(false);},setOutlineColorMode:function(){this.outlineColorActive(true);this.fillColorActive(false);},setFillColorMode:function(){this.outlineColorActive(false);this.fillColorActive(true);}});});},"dojox/storage/CookieStorageProvider":function(){define(["dijit","dojo","dojox","dojo/require!dojox/storage/Provider,dojox/storage/manager,dojo/cookie"],function(_a77,dojo,_a78){dojo.provide("dojox.storage.CookieStorageProvider");dojo.require("dojox.storage.Provider");dojo.require("dojox.storage.manager");dojo.require("dojo.cookie");dojo.declare("dojox.storage.CookieStorageProvider",[_a78.storage.Provider],{store:null,cookieName:"dojoxStorageCookie",storageLife:730,initialize:function(){this.store=dojo.fromJson(dojo.cookie(this.cookieName))||{};this.initialized=true;_a78.storage.manager.loaded();},isAvailable:function(){return dojo.cookie.isSupported();},put:function(key,_a79,_a7a,_a7b){this._assertIsValidKey(key);_a7b=_a7b||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_a7b);fullKey=this.getFullKey(key,_a7b);this.store[fullKey]=dojo.toJson(_a79);this._save();var _a7c=dojo.toJson(this.store)===dojo.cookie(this.cookieName);if(!_a7c){this.remove(key,_a7b);}if(_a7a){_a7a(_a7c?this.SUCCESS:this.FAILED,key,null,_a7b);}},get:function(key,_a7d){this._assertIsValidKey(key);_a7d=_a7d||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_a7d);key=this.getFullKey(key,_a7d);return this.store[key]?dojo.fromJson(this.store[key]):null;},getKeys:function(_a7e){_a7e=_a7e||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_a7e);_a7e="__"+_a7e+"_";var keys=[];for(var _a7f in this.store){if(this._beginsWith(_a7f,_a7e)){_a7f=_a7f.substring(_a7e.length);keys.push(_a7f);}}return keys;},clear:function(_a80){_a80=_a80||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_a80);_a80="__"+_a80+"_";for(var _a81 in this.store){if(this._beginsWith(_a81,_a80)){delete (this.store[_a81]);}}this._save();},remove:function(key,_a82){_a82=_a82||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_a82);this._assertIsValidKey(key);key=this.getFullKey(key,_a82);delete this.store[key];this._save();},getNamespaces:function(){var _a83=[this.DEFAULT_NAMESPACE];var _a84={};_a84[this.DEFAULT_NAMESPACE]=true;var _a85=/^__([^_]*)_/;for(var _a86 in this.store){if(_a85.test(_a86)==true){var _a87=_a86.match(_a85)[1];if(typeof _a84[_a87]=="undefined"){_a84[_a87]=true;_a83.push(_a87);}}}return _a83;},isPermanent:function(){return true;},getMaximumSize:function(){return 4;},hasSettingsUI:function(){return false;},isValidKey:function(_a88){if(_a88===null||_a88===undefined){return false;}return /^[0-9A-Za-z_-]*$/.test(_a88);},isValidNamespace:function(_a89){if(_a89===null||_a89===undefined){return false;}return /^[0-9A-Za-z-]*$/.test(_a89);},getFullKey:function(key,_a8a){return "__"+_a8a+"_"+key;},_save:function(){dojo.cookie(this.cookieName,dojo.toJson(this.store),{expires:this.storageLife});},_beginsWith:function(_a8b,_a8c){if(_a8c.length>_a8b.length){return false;}return _a8b.substring(0,_a8c.length)===_a8c;},_assertIsValidNamespace:function(_a8d){if(this.isValidNamespace(_a8d)===false){throw new Error("Invalid namespace given: "+_a8d);}},_assertIsValidKey:function(key){if(this.isValidKey(key)===false){throw new Error("Invalid key given: "+key);}}});_a78.storage.manager.register("dojox.storage.CookieStorageProvider",new _a78.storage.CookieStorageProvider());});},"esriviewer/ui/accordion/ToolsAccordion":function(){define(["dojo/_base/declare","dojo/text!./template/ToolsAccordionTemplate.html","dojo/topic","dojo/_base/lang","dojo/on","dijit/layout/AccordionContainer","dojo/dom-style","dojo/dom-class","dojo/dom-attr","dojo/dom-construct","dojo/dnd/Moveable","../base/UITemplatedWidget","dojo/_base/connect"],function(_a8e,_a8f,_a90,lang,on,_a91,_a92,_a93,_a94,_a95,_a96,_a97,con){return _a8e([_a97],{templateString:_a8f,isPositionedByConfig:true,positionForHeader:false,headerVisiblePositioning:{x:75,y:145},defaultPositioning:{x:75,y:100},allowCollapse:true,movable:false,isFirstAddedItem:true,showOnLoad:true,positioningParamName:"accordion",returnToOriginOnShow:true,constructor:function(){this.accordion=new _a91();_a93.add(this.accordion.domNode,"toolsAccordion");this.visible=true;},postCreate:function(){this.inherited(arguments);if(this.allowCollapse){this.addMinimizeIcon();}_a95.place(this.accordion.domNode,this.domNode);_a90.publish(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.LOAD_DEFAULT_TOOLS);if(!this.showOnLoad){this.hide();}if(this.positionForHeader){this.creationPositioning.x=this.headerVisiblePositioning.x;this.creationPositioning.y=this.headerVisiblePositioning.y;}this.returnToOrigin();},loadViewerConfigurationData:function(){var _a98=null;_a90.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"toolsAccordion",function(_a99){_a98=_a99;});if(_a98&&_a98.showOnLoad!=null){this.showOnLoad=_a98.showOnLoad;}var _a9a;_a90.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"header",function(_a9b){_a9a=_a9b;});if(_a9a!=null&&lang.isObject(_a9a)){this.positionForHeader=_a9a.display===true&&_a9a.small!=true;}},initMover:function(){var _a9c=_a95.create("div",{title:"Move",className:"accordionMoveIcon accordionAction move"});_a95.place(_a9c,this.domNode);this.mover=new _a96(this.domNode,{handle:_a9c});con.connect(this.mover,"onMove",VIEWER_UTILS,VIEWER_UTILS.handleContainerMoved);},placeAt:function(node){_a95.place(this.domNode,node);if(this.toolsAccordionActions){_a95.place(this.toolsAccordionActions,node);}if(this.movable){this.initMover();}},addMinimizeIcon:function(){if(this.minimizeIconElement==null){this.minimizeIconElement=_a95.create("div",{title:"Minimize",className:"accordionMimimizeIcon accordionAction minimize"});_a95.place(this.minimizeIconElement,this.domNode);on(this.minimizeIconElement,"click",lang.hitch(this,this.hide));if(!this.movable){_a92.set(this.minimizeIconElement,"right","5px");}}},addItem:function(_a9d){_a93.add(_a9d.domNode,"accordionChild");this.accordion.addChild(_a9d);if(this.isFirstAddedItem){this.isFirstAddedItem=false;this.selectedChild=_a9d;}},initListeners:function(){this.inherited(arguments);_a90.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.TOGGLE,lang.hitch(this,this.toggle));_a90.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.SHOW,lang.hitch(this,this.show));_a90.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.HIDE,lang.hitch(this,this.hide));_a90.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.ADD_ITEM,lang.hitch(this,this.addItem));_a90.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.SHOW_ITEM,lang.hitch(this,this.selectChild));},startup:function(){this.accordion.startup();},destroy:function(){if(this.imageryDisplayWidget){this.imageryDisplayWidget.destroy();}if(this.imageryQueryFilterManager){this.imageryQueryFilterManager.destroy();}},toggle:function(){if(this.visible){this.hide();}else{this.show();}},show:function(){_a92.set(this.domNode,"display","block");this.visible=true;if(this.toolsAccordionActions){_a94.set(this.toolsAccordionActions,"title","Collapse Tools");if(!_a93.contains(this.toolsAccordionActions,"toolsAccordionCollapserExpanded")){_a93.add(this.toolsAccordionActions,"toolsAccordionCollapserExpanded");}_a93.remove(this.toolsAccordionActions,"toolsAccordionCollapserCollapsed");}if(this.returnToOriginOnShow){this.returnToOrigin();}},returnToOrigin:function(){_a92.set(this.domNode,this.creationPositioning.alignX,this.creationPositioning.x+"px");_a92.set(this.domNode,this.creationPositioning.alignY,this.creationPositioning.y+"px");},hide:function(){_a92.set(this.domNode,"display","none");this.visible=false;if(this.toolsAccordionActions){_a94.set(this.toolsAccordionActions,"title","Show Tools");if(!_a93.contains(this.toolsAccordionActions,"toolsAccordionCollapserCollapsed")){_a93.add(this.toolsAccordionActions,"toolsAccordionCollapserCollapsed");}_a93.remove(this.toolsAccordionActions,"toolsAccordionCollapserExpanded");}_a90.publish(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.HIDE_COMPLETE);},toggleVisibility:function(){if(this.visible){this.hide();}else{this.show();}},selectChild:function(_a9e){this.accordion.selectChild(_a9e);this.selectedChild=_a9e;}});});},"esriviewer/ui/draw/base/GraphicsLocalStorageMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","dojo/topic"],function(_a9f,lang,has,_aa0){return _a9f([],{localStoragePersistSupported:true,constructor:function(){if(!(has("ie")<8)){this.localStoragePersistSupported=false;}this.storageProvider=dojox.storage.manager.getProvider();if(this.storageProvider){this.localStoragePersistSupported=true;}this.persistedUserGraphics=this.loadPersistedUserGraphics();},deleteAllPersistedGraphics:function(){if(this.storageProvider){this.storageProvider.remove(VIEWER_GLOBALS.STORAGE.LABELS.USER_GRAPHICS);}},deleteUserPersistedGraphics:function(_aa1){if(this.persistUserGraphicsLabelExists(_aa1)){delete this.persistedUserGraphics[_aa1];this.persist();}var _aa2=false;for(var key in this.persistedUserGraphics){_aa2=true;break;}return _aa2;},persistUserGraphicsLabelExists:function(_aa3){return this.persistedUserGraphics[_aa3]!=null;},persistUserGraphics:function(_aa4,_aa5){if(_aa4==null||_aa4==""||_aa5==null||!lang.isArray(_aa5)||_aa5.length==0){return null;}if(this.persistUserGraphicsLabelExists(_aa4)){VIEWER_UTILS.log("Attempted to save graphics with an existing label: "+_aa4,VIEWER_GLOBALS.LOG_TYPE.ERROR);_aa0.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Cannot save graphics. Label already exists.");return null;}else{var _aa6=[];for(var i=0;i<_aa5.length;i++){_aa6.push({label:_aa5[i].label,graphic:_aa5[i].graphic.toJson()});}var _aa7={label:_aa4,graphics:_aa6};this.persistedUserGraphics[_aa4]=_aa7;this.persist();VIEWER_UTILS.log("Saved graphics with label: "+_aa4,VIEWER_GLOBALS.LOG_TYPE.INFO);_aa0.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Graphics Saved");return _aa7;}},loadPersistedUserGraphics:function(){if(this.storageProvider){if(this.storageProvider.hasKey(VIEWER_GLOBALS.STORAGE.LABELS.USER_GRAPHICS)){return this.storageProvider.get(VIEWER_GLOBALS.STORAGE.LABELS.USER_GRAPHICS);}}return {};},persist:function(){this.storageProvider.put(VIEWER_GLOBALS.STORAGE.LABELS.USER_GRAPHICS,this.persistedUserGraphics);}});});},"esriviewer/ui/navigation/NavigationWidget":function(){define(["dojo/_base/declare","dojo/text!./template/NavigationWidgetTemplate.html","dojo/topic","dojo/dom-class","../base/UITemplatedWidget","dojo/_base/lang","./model/NavigationWidgetViewModel"],function(_aa8,_aa9,_aaa,_aab,_aac,lang,_aad){return _aa8([_aac],{defaultPositioning:{y:5,x:0},positionWithSmallHeader:false,isPositionedByConfig:true,positioningParamName:"navigation",templateString:_aa9,constructor:function(_aae){lang.mixin(this,_aae||{});this.visible=true;},postCreate:function(){this.viewModel=new _aad();this.inherited(arguments);ko.applyBindings(this.viewModel,this.domNode);if(this.positionWithSmallHeader){_aab.add(this.navigationToolbar,"navigationWithSmallHeaderPositioning");}this.show();},loadViewerConfigurationData:function(){var _aaf;_aaa.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"header",function(_ab0){_aaf=_ab0;});if(_aaf!=null&&lang.isObject(_aaf)){this.positionWithSmallHeader=_aaf.display===true&&_aaf.small===true;}},handleToggle:function(){this.viewModel.visible(!this.viewModel.visible());},show:function(){this.viewModel.visible(true);},hide:function(){this.viewModel.visible(false);}});});},"dojox/storage/FlashStorageProvider":function(){define(["dijit","dojo","dojox","dojo/require!dojox/flash,dojox/storage/manager,dojox/storage/Provider"],function(_ab1,dojo,_ab2){dojo.provide("dojox.storage.FlashStorageProvider");dojo.require("dojox.flash");dojo.require("dojox.storage.manager");dojo.require("dojox.storage.Provider");dojo.declare("dojox.storage.FlashStorageProvider",_ab2.storage.Provider,{initialized:false,_available:null,_statusHandler:null,_flashReady:false,_pageReady:false,initialize:function(){if(dojo.config["disableFlashStorage"]==true){return;}_ab2.flash.addLoadedListener(dojo.hitch(this,function(){this._flashReady=true;if(this._flashReady&&this._pageReady){this._loaded();}}));var _ab3=dojo.moduleUrl("dojox","storage/Storage.swf").toString();_ab2.flash.setSwf(_ab3,false);dojo.connect(dojo,"loaded",this,function(){this._pageReady=true;if(this._flashReady&&this._pageReady){this._loaded();}});},setFlushDelay:function(_ab4){if(_ab4===null||typeof _ab4==="undefined"||isNaN(_ab4)){throw new Error("Invalid argunment: "+_ab4);}_ab2.flash.comm.setFlushDelay(String(_ab4));},getFlushDelay:function(){return Number(_ab2.flash.comm.getFlushDelay());},flush:function(_ab5){if(_ab5==null||typeof _ab5=="undefined"){_ab5=_ab2.storage.DEFAULT_NAMESPACE;}_ab2.flash.comm.flush(_ab5);},isAvailable:function(){return (this._available=!dojo.config["disableFlashStorage"]);},put:function(key,_ab6,_ab7,_ab8){if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}if(!_ab8){_ab8=_ab2.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_ab8)){throw new Error("Invalid namespace given: "+_ab8);}this._statusHandler=_ab7;if(dojo.isString(_ab6)){_ab6="string:"+_ab6;}else{_ab6=dojo.toJson(_ab6);}_ab2.flash.comm.put(key,_ab6,_ab8);},putMultiple:function(keys,_ab9,_aba,_abb){if(!this.isValidKeyArray(keys)||!_ab9 instanceof Array||keys.length!=_ab9.length){throw new Error("Invalid arguments: keys = ["+keys+"], values = ["+_ab9+"]");}if(!_abb){_abb=_ab2.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_abb)){throw new Error("Invalid namespace given: "+_abb);}this._statusHandler=_aba;var _abc=keys.join(",");var _abd=[];for(var i=0;i<_ab9.length;i++){if(dojo.isString(_ab9[i])){_ab9[i]="string:"+_ab9[i];}else{_ab9[i]=dojo.toJson(_ab9[i]);}_abd[i]=_ab9[i].length;}var _abe=_ab9.join("");var _abf=_abd.join(",");_ab2.flash.comm.putMultiple(_abc,_abe,_abf,_abb);},get:function(key,_ac0){if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}if(!_ac0){_ac0=_ab2.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_ac0)){throw new Error("Invalid namespace given: "+_ac0);}var _ac1=_ab2.flash.comm.get(key,_ac0);if(_ac1==""){return null;}return this._destringify(_ac1);},getMultiple:function(keys,_ac2){if(!this.isValidKeyArray(keys)){throw new ("Invalid key array given: "+keys);}if(!_ac2){_ac2=_ab2.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_ac2)){throw new Error("Invalid namespace given: "+_ac2);}var _ac3=keys.join(",");var _ac4=_ab2.flash.comm.getMultiple(_ac3,_ac2);var _ac5=eval("("+_ac4+")");for(var i=0;i<_ac5.length;i++){_ac5[i]=(_ac5[i]=="")?null:this._destringify(_ac5[i]);}return _ac5;},_destringify:function(_ac6){if(dojo.isString(_ac6)&&(/^string:/.test(_ac6))){_ac6=_ac6.substring("string:".length);}else{_ac6=dojo.fromJson(_ac6);}return _ac6;},getKeys:function(_ac7){if(!_ac7){_ac7=_ab2.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_ac7)){throw new Error("Invalid namespace given: "+_ac7);}var _ac8=_ab2.flash.comm.getKeys(_ac7);if(_ac8==null||_ac8=="null"){_ac8="";}_ac8=_ac8.split(",");_ac8.sort();return _ac8;},getNamespaces:function(){var _ac9=_ab2.flash.comm.getNamespaces();if(_ac9==null||_ac9=="null"){_ac9=_ab2.storage.DEFAULT_NAMESPACE;}_ac9=_ac9.split(",");_ac9.sort();return _ac9;},clear:function(_aca){if(!_aca){_aca=_ab2.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_aca)){throw new Error("Invalid namespace given: "+_aca);}_ab2.flash.comm.clear(_aca);},remove:function(key,_acb){if(!_acb){_acb=_ab2.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_acb)){throw new Error("Invalid namespace given: "+_acb);}_ab2.flash.comm.remove(key,_acb);},removeMultiple:function(keys,_acc){if(!this.isValidKeyArray(keys)){dojo.raise("Invalid key array given: "+keys);}if(!_acc){_acc=_ab2.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_acc)){throw new Error("Invalid namespace given: "+_acc);}var _acd=keys.join(",");_ab2.flash.comm.removeMultiple(_acd,_acc);},isPermanent:function(){return true;},getMaximumSize:function(){return _ab2.storage.SIZE_NO_LIMIT;},hasSettingsUI:function(){return true;},showSettingsUI:function(){_ab2.flash.comm.showSettings();_ab2.flash.obj.setVisible(true);_ab2.flash.obj.center();},hideSettingsUI:function(){_ab2.flash.obj.setVisible(false);if(dojo.isFunction(_ab2.storage.onHideSettingsUI)){_ab2.storage.onHideSettingsUI.call(null);}},getResourceList:function(){return [];},_loaded:function(){this._allNamespaces=this.getNamespaces();this.initialized=true;_ab2.storage.manager.loaded();},_onStatus:function(_ace,key,_acf){var ds=_ab2.storage;var dfo=_ab2.flash.obj;if(_ace==ds.PENDING){dfo.center();dfo.setVisible(true);}else{dfo.setVisible(false);}if(ds._statusHandler){ds._statusHandler.call(null,_ace,key,null,_acf);}}});_ab2.storage.manager.register("dojox.storage.FlashStorageProvider",new _ab2.storage.FlashStorageProvider());});},"esriviewer/ui/transparency/LayersTransparencyWindowWidget":function(){define(["dojo/_base/declare","dojo/topic","dojo/dom-class","dojo/_base/lang","../window/WindowWidget"],function(_ad0,_ad1,_ad2,lang,_ad3){return _ad0([_ad3],{defaultPositioning:{x:700,y:50},windowHeight:"250px",windowWidth:"300px",windowHeaderText:"Layer Transparency",windowIconAltText:"Layer Transparency",windowIconClass:"commonIcons16 slider",positioningParamName:"layerTransparency",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_ad2.add(this.windowContent,"layerTransparencyWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/transparency/LayersTransparencyWidget"],lang.hitch(this,function(_ad4){this.layersTransparencyWidget=new _ad4();this.setContent(this.layersTransparencyWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_ad1.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.TRANSPARENCY.WINDOW.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_ad1.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.TRANSPARENCY.WINDOW.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_ad1.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.TRANSPARENCY.WINDOW.TOGGLE,lang.hitch(this,this.toggle)));}});});},"esriviewer/ui/messaging/MessagingWidget":function(){define(["dojo/_base/declare","dojo/text!./template/MessagingWidgetTemplate.html","dojo/topic","dojo/_base/lang","../base/UITemplatedWidget","dojox/timing","./model/MessagingWidgetViewModel"],function(_ad5,_ad6,_ad7,lang,_ad8,_ad9,_ada){return _ad5([_ad8],{templateString:_ad6,defaultTimerInterval:4000,isPositionedByConfig:true,defaultPositioning:{x:375,y:50},positioningParamName:"messaging",postCreate:function(){this.inherited(arguments);this.viewModel=new _ada();ko.applyBindings(this.viewModel,this.domNode);this.messageTimer=new _ad9.Timer(this.defaultTimerInterval);this.messageTimer.onTick=lang.hitch(this,this.hideMessage);this.hideMessage();},initListeners:function(){this.inherited(arguments);_ad7.subscribe(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,lang.hitch(this,this.showMessage));_ad7.subscribe(VIEWER_GLOBALS.EVENTS.MESSAGING.HIDE,lang.hitch(this,this.hideMessage));},showMessage:function(_adb,_adc){this.viewModel.showMessage(_adb);_adc=(_adc==null)?this.defaultTimerInterval:_adc;this.messageTimer.setInterval(_adc);this.messageTimer.start();},hideMessage:function(){if(this.messageTimer){this.messageTimer.stop();}this.viewModel.hideMessage();}});});},"esriviewer/ui/pointupload/PointUploadWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","../window/WindowWidget"],function(_add,lang,_ade,_adf){return _add([_adf],{defaultPositioning:{x:510,y:45},windowWidth:"20%",windowHeaderText:"CSV Point Upload",windowIconAltText:"CSV Point Upload",windowIconClass:"commonIcons16 upload",positioningParamName:"pointUpload",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/pointupload/PointUploadWidget"],lang.hitch(this,function(_ae0){this.pointUploadWidget=new _ae0();this.setContent(this.pointUploadWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_ade.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.POINT_UPLOAD.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_ade.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.POINT_UPLOAD.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_ade.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.POINT_UPLOAD.TOGGLE,lang.hitch(this,this.toggle)));}});});},"esriviewer/ui/messaging/model/MessagingWidgetViewModel":function(){define(["dojo/_base/declare"],function(_ae1){return _ae1([],{constructor:function(){this.message=ko.observable("");this.visible=ko.observable(false);},showMessage:function(_ae2){if(_ae2!=null&&_ae2!=""){this.visible(true);this.message(_ae2);}},hideMessage:function(){this.visible(false);}});});},"dojo/request/notify":function(){define(["../Evented","../_base/lang","./util"],function(_ae3,lang,util){var _ae4=0,_ae5=[].slice;var hub=lang.mixin(new _ae3,{onsend:function(data){if(!_ae4){this.emit("start");}_ae4++;},_onload:function(data){this.emit("done",data);},_onerror:function(data){this.emit("done",data);},_ondone:function(data){if(--_ae4<=0){_ae4=0;this.emit("stop");}},emit:function(type,_ae6){var _ae7=_ae3.prototype.emit.apply(this,arguments);if(this["_on"+type]){this["_on"+type].apply(this,_ae5.call(arguments,1));}return _ae7;}});function _ae8(type,_ae9){return hub.on(type,_ae9);};_ae8.emit=function(type,_aea,_aeb){return hub.emit(type,_aea,_aeb);};return util.notify=_ae8;});},"esriviewer/ui/draw/configure/geometry/model/ConfigureLineViewModel":function(){define(["dojo/_base/declare","esri/symbols/SimpleLineSymbol"],function(_aec,_aed){return _aec([],{lineStyles:ko.observableArray([{value:_aed.STYLE_DASH,label:"Dashed Line"},{value:_aed.STYLE_DASHDOT,label:"Dash Dot Line"},{value:_aed.STYLE_DASHDOTDOT,label:"Dash Dot Dot Line"},{value:_aed.STYLE_DOT,label:"Dotted Line"},{value:_aed.STYLE_SOLID,label:"Solid Line"},{value:_aed.STYLE_NULL,label:"None"}]),lineWidths:ko.observableArray([1,2,3,4,5,6,7,8,9,10,15,20,25,30,40,50]),constructor:function(){this.selectedLineStyle=ko.observable(_aed.STYLE_SOLID);this.selectedWidth=ko.observable(2);}});});},"dijit/form/HorizontalSlider":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dnd/move","dojo/_base/fx","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/dnd/Moveable","dojo/dnd/Mover","dojo/query","dojo/mouse","dojo/on","../_base/manager","../focus","../typematic","./Button","./_FormValueWidget","../_Container","dojo/text!./templates/HorizontalSlider.html"],function(_aee,_aef,move,fx,_af0,_af1,keys,lang,has,_af2,_af3,_af4,_af5,on,_af6,_af7,_af8,_af9,_afa,_afb,_afc){var _afd=_aef("dijit.form._SliderMover",_af3,{onMouseMove:function(e){var _afe=this.widget;var _aff=_afe._abspos;if(!_aff){_aff=_afe._abspos=_af0.position(_afe.sliderBarContainer,true);_afe._setPixelValue_=lang.hitch(_afe,"_setPixelValue");_afe._isReversed_=_afe._isReversed();}var _b00=e[_afe._mousePixelCoord]-_aff[_afe._startingPixelCoord];_afe._setPixelValue_(_afe._isReversed_?(_aff[_afe._pixelCount]-_b00):_b00,_aff[_afe._pixelCount],false);},destroy:function(e){_af3.prototype.destroy.apply(this,arguments);var _b01=this.widget;_b01._abspos=null;_b01._setValueAttr(_b01.value,true);}});var _b02=_aef("dijit.form.HorizontalSlider",[_afa,_afb],{templateString:_afc,value:0,showButtons:true,minimum:0,maximum:100,discreteValues:Infinity,pageIncrement:2,clickSelect:true,slideDuration:_af6.defaultDuration,_setIdAttr:"",_setNameAttr:"valueNode",baseClass:"dijitSlider",cssStateNodes:{incrementButton:"dijitSliderIncrementButton",decrementButton:"dijitSliderDecrementButton",focusNode:"dijitSliderThumb"},_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_handleOffsetCoord:"left",_progressPixelSize:"width",_onKeyUp:function(e){if(this.disabled||this.readOnly||e.altKey||e.ctrlKey||e.metaKey){return;}this._setValueAttr(this.value,true);},_onKeyDown:function(e){if(this.disabled||this.readOnly||e.altKey||e.ctrlKey||e.metaKey){return;}switch(e.keyCode){case keys.HOME:this._setValueAttr(this.minimum,false);break;case keys.END:this._setValueAttr(this.maximum,false);break;case ((this._descending||this.isLeftToRight())?keys.RIGHT_ARROW:keys.LEFT_ARROW):case (this._descending===false?keys.DOWN_ARROW:keys.UP_ARROW):case (this._descending===false?keys.PAGE_DOWN:keys.PAGE_UP):this.increment(e);break;case ((this._descending||this.isLeftToRight())?keys.LEFT_ARROW:keys.RIGHT_ARROW):case (this._descending===false?keys.UP_ARROW:keys.DOWN_ARROW):case (this._descending===false?keys.PAGE_UP:keys.PAGE_DOWN):this.decrement(e);break;default:return;}e.stopPropagation();e.preventDefault();},_onHandleClick:function(e){if(this.disabled||this.readOnly){return;}if(!has("ie")){_af7.focus(this.sliderHandle);}e.stopPropagation();e.preventDefault();},_isReversed:function(){return !this.isLeftToRight();},_onBarClick:function(e){if(this.disabled||this.readOnly||!this.clickSelect){return;}_af7.focus(this.sliderHandle);e.stopPropagation();e.preventDefault();var _b03=_af0.position(this.sliderBarContainer,true);var _b04=e[this._mousePixelCoord]-_b03[this._startingPixelCoord];this._setPixelValue(this._isReversed()?(_b03[this._pixelCount]-_b04):_b04,_b03[this._pixelCount],true);this._movable.onMouseDown(e);},_setPixelValue:function(_b05,_b06,_b07){if(this.disabled||this.readOnly){return;}var _b08=this.discreteValues;if(_b08<=1||_b08==Infinity){_b08=_b06;}_b08--;var _b09=_b06/_b08;var _b0a=Math.round(_b05/_b09);this._setValueAttr(Math.max(Math.min((this.maximum-this.minimum)*_b0a/_b08+this.minimum,this.maximum),this.minimum),_b07);},_setValueAttr:function(_b0b,_b0c){this._set("value",_b0b);this.valueNode.value=_b0b;this.focusNode.setAttribute("aria-valuenow",_b0b);this.inherited(arguments);var _b0d=(_b0b-this.minimum)/(this.maximum-this.minimum);var _b0e=(this._descending===false)?this.remainingBar:this.progressBar;var _b0f=(this._descending===false)?this.progressBar:this.remainingBar;if(this._inProgressAnim&&this._inProgressAnim.status!="stopped"){this._inProgressAnim.stop(true);}if(_b0c&&this.slideDuration>0&&_b0e.style[this._progressPixelSize]){var _b10=this;var _b11={};var _b12=parseFloat(_b0e.style[this._progressPixelSize]);var _b13=this.slideDuration*(_b0d-_b12/100);if(_b13==0){return;}if(_b13<0){_b13=0-_b13;}_b11[this._progressPixelSize]={start:_b12,end:_b0d*100,units:"%"};this._inProgressAnim=fx.animateProperty({node:_b0e,duration:_b13,onAnimate:function(v){_b0f.style[_b10._progressPixelSize]=(100-parseFloat(v[_b10._progressPixelSize]))+"%";},onEnd:function(){delete _b10._inProgressAnim;},properties:_b11});this._inProgressAnim.play();}else{_b0e.style[this._progressPixelSize]=(_b0d*100)+"%";_b0f.style[this._progressPixelSize]=((1-_b0d)*100)+"%";}},_bumpValue:function(_b14,_b15){if(this.disabled||this.readOnly){return;}var s=_af1.getComputedStyle(this.sliderBarContainer);var c=_af0.getContentBox(this.sliderBarContainer,s);var _b16=this.discreteValues;if(_b16<=1||_b16==Infinity){_b16=c[this._pixelCount];}_b16--;var _b17=(this.value-this.minimum)*_b16/(this.maximum-this.minimum)+_b14;if(_b17<0){_b17=0;}if(_b17>_b16){_b17=_b16;}_b17=_b17*(this.maximum-this.minimum)/_b16+this.minimum;this._setValueAttr(_b17,_b15);},_onClkBumper:function(val){if(this.disabled||this.readOnly||!this.clickSelect){return;}this._setValueAttr(val,true);},_onClkIncBumper:function(){this._onClkBumper(this._descending===false?this.minimum:this.maximum);},_onClkDecBumper:function(){this._onClkBumper(this._descending===false?this.maximum:this.minimum);},decrement:function(e){this._bumpValue(e.keyCode==keys.PAGE_DOWN?-this.pageIncrement:-1);},increment:function(e){this._bumpValue(e.keyCode==keys.PAGE_UP?this.pageIncrement:1);},_mouseWheeled:function(evt){evt.stopPropagation();evt.preventDefault();this._bumpValue(evt.wheelDelta<0?-1:1,true);},startup:function(){if(this._started){return;}_aee.forEach(this.getChildren(),function(_b18){if(this[_b18.container]!=this.containerNode){this[_b18.container].appendChild(_b18.domNode);}},this);this.inherited(arguments);},_typematicCallback:function(_b19,_b1a,e){if(_b19==-1){this._setValueAttr(this.value,true);}else{this[(_b1a==(this._descending?this.incrementButton:this.decrementButton))?"decrement":"increment"](e);}},buildRendering:function(){this.inherited(arguments);if(this.showButtons){this.incrementButton.style.display="";this.decrementButton.style.display="";}var _b1b=_af4("label[for=\""+this.id+"\"]");if(_b1b.length){if(!_b1b[0].id){_b1b[0].id=this.id+"_label";}this.focusNode.setAttribute("aria-labelledby",_b1b[0].id);}this.focusNode.setAttribute("aria-valuemin",this.minimum);this.focusNode.setAttribute("aria-valuemax",this.maximum);},postCreate:function(){this.inherited(arguments);if(this.showButtons){this.own(_af8.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500),_af8.addMouseListener(this.incrementButton,this,"_typematicCallback",25,500));}this.own(on(this.domNode,_af5.wheel,lang.hitch(this,"_mouseWheeled")));var _b1c=_aef(_afd,{widget:this});this._movable=new _af2(this.sliderHandle,{mover:_b1c});this._layoutHackIE7();},destroy:function(){this._movable.destroy();if(this._inProgressAnim&&this._inProgressAnim.status!="stopped"){this._inProgressAnim.stop(true);}this.inherited(arguments);}});_b02._Mover=_afd;return _b02;});},"dojox/layout/ResizeHandle":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/connect","dojo/_base/array","dojo/_base/event","dojo/_base/fx","dojo/_base/window","dojo/fx","dojo/window","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dijit/_base/manager","dijit/_Widget","dijit/_TemplatedMixin","dojo/_base/declare"],function(_b1d,lang,_b1e,_b1f,_b20,_b21,_b22,_b23,_b24,_b25,_b26,_b27,_b28,_b29,_b2a,_b2b,_b2c){_b1d.experimental("dojox.layout.ResizeHandle");var _b2d=_b2c("dojox.layout.ResizeHandle",[_b2a,_b2b],{targetId:"",targetContainer:null,resizeAxis:"xy",activeResize:false,activeResizeClass:"dojoxResizeHandleClone",animateSizing:true,animateMethod:"chain",animateDuration:225,minHeight:100,minWidth:100,constrainMax:false,maxHeight:0,maxWidth:0,fixedAspect:false,intermediateChanges:false,startTopic:"/dojo/resize/start",endTopic:"/dojo/resize/stop",templateString:"<div dojoAttachPoint=\"resizeHandle\" class=\"dojoxResizeHandle\"><div></div></div>",postCreate:function(){this.connect(this.resizeHandle,"onmousedown","_beginSizing");if(!this.activeResize){this._resizeHelper=_b29.byId("dojoxGlobalResizeHelper");if(!this._resizeHelper){this._resizeHelper=new _b2e({id:"dojoxGlobalResizeHelper"}).placeAt(_b22.body());_b26.add(this._resizeHelper.domNode,this.activeResizeClass);}}else{this.animateSizing=false;}if(!this.minSize){this.minSize={w:this.minWidth,h:this.minHeight};}if(this.constrainMax){this.maxSize={w:this.maxWidth,h:this.maxHeight};}this._resizeX=this._resizeY=false;var _b2f=lang.partial(_b26.add,this.resizeHandle);switch(this.resizeAxis.toLowerCase()){case "xy":this._resizeX=this._resizeY=true;_b2f("dojoxResizeNW");break;case "x":this._resizeX=true;_b2f("dojoxResizeW");break;case "y":this._resizeY=true;_b2f("dojoxResizeN");break;}},_beginSizing:function(e){if(this._isSizing){return;}_b1e.publish(this.startTopic,[this]);this.targetWidget=_b29.byId(this.targetId);this.targetDomNode=this.targetWidget?this.targetWidget.domNode:_b25.byId(this.targetId);if(this.targetContainer){this.targetDomNode=this.targetContainer;}if(!this.targetDomNode){return;}if(!this.activeResize){var c=_b27.position(this.targetDomNode,true);this._resizeHelper.resize({l:c.x,t:c.y,w:c.w,h:c.h});this._resizeHelper.show();if(!this.isLeftToRight()){this._resizeHelper.startPosition={l:c.x,t:c.y};}}this._isSizing=true;this.startPoint={x:e.clientX,y:e.clientY};var _b30=_b28.getComputedStyle(this.targetDomNode),_b31=_b27.boxModel==="border-model",_b32=_b31?{w:0,h:0}:_b27.getPadBorderExtents(this.targetDomNode,_b30),_b33=_b27.getMarginExtents(this.targetDomNode,_b30),mb;mb=this.startSize={w:_b28.get(this.targetDomNode,"width",_b30),h:_b28.get(this.targetDomNode,"height",_b30),pbw:_b32.w,pbh:_b32.h,mw:_b33.w,mh:_b33.h};if(!this.isLeftToRight()&&dojo.style(this.targetDomNode,"position")=="absolute"){var p=_b27.position(this.targetDomNode,true);this.startPosition={l:p.x,t:p.y};}this._pconnects=[_b1e.connect(_b22.doc,"onmousemove",this,"_updateSizing"),_b1e.connect(_b22.doc,"onmouseup",this,"_endSizing")];_b20.stop(e);},_updateSizing:function(e){if(this.activeResize){this._changeSizing(e);}else{var tmp=this._getNewCoords(e,"border",this._resizeHelper.startPosition);if(tmp===false){return;}this._resizeHelper.resize(tmp);}e.preventDefault();},_getNewCoords:function(e,box,_b34){try{if(!e.clientX||!e.clientY){return false;}}catch(e){return false;}this._activeResizeLastEvent=e;var dx=(this.isLeftToRight()?1:-1)*(this.startPoint.x-e.clientX),dy=this.startPoint.y-e.clientY,newW=this.startSize.w-(this._resizeX?dx:0),newH=this.startSize.h-(this._resizeY?dy:0),r=this._checkConstraints(newW,newH);_b34=(_b34||this.startPosition);if(_b34&&this._resizeX){r.l=_b34.l+dx;if(r.w!=newW){r.l+=(newW-r.w);}r.t=_b34.t;}switch(box){case "margin":r.w+=this.startSize.mw;r.h+=this.startSize.mh;case "border":r.w+=this.startSize.pbw;r.h+=this.startSize.pbh;break;}return r;},_checkConstraints:function(newW,newH){if(this.minSize){var tm=this.minSize;if(newW<tm.w){newW=tm.w;}if(newH<tm.h){newH=tm.h;}}if(this.constrainMax&&this.maxSize){var ms=this.maxSize;if(newW>ms.w){newW=ms.w;}if(newH>ms.h){newH=ms.h;}}if(this.fixedAspect){var w=this.startSize.w,h=this.startSize.h,_b35=w*newH-h*newW;if(_b35<0){newW=newH*w/h;}else{if(_b35>0){newH=newW*h/w;}}}return {w:newW,h:newH};},_changeSizing:function(e){var _b36=this.targetWidget&&lang.isFunction(this.targetWidget.resize),tmp=this._getNewCoords(e,_b36&&"margin");if(tmp===false){return;}if(_b36){this.targetWidget.resize(tmp);}else{if(this.animateSizing){var anim=_b23[this.animateMethod]([_b21.animateProperty({node:this.targetDomNode,properties:{width:{start:this.startSize.w,end:tmp.w}},duration:this.animateDuration}),_b21.animateProperty({node:this.targetDomNode,properties:{height:{start:this.startSize.h,end:tmp.h}},duration:this.animateDuration})]);anim.play();}else{_b28.set(this.targetDomNode,{width:tmp.w+"px",height:tmp.h+"px"});}}if(this.intermediateChanges){this.onResize(e);}},_endSizing:function(e){_b1f.forEach(this._pconnects,_b1e.disconnect);var pub=lang.partial(_b1e.publish,this.endTopic,[this]);if(!this.activeResize){this._resizeHelper.hide();this._changeSizing(e);setTimeout(pub,this.animateDuration+15);}else{pub();}this._isSizing=false;this.onResize(e);},onResize:function(e){}});var _b2e=dojo.declare("dojox.layout._ResizeHelper",_b2a,{show:function(){_b28.set(this.domNode,"display","");},hide:function(){_b28.set(this.domNode,"display","none");},resize:function(dim){_b27.setMarginBox(this.domNode,dim);}});return _b2d;});},"dijit/Tree":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/connect","dojo/cookie","dojo/_base/declare","dojo/Deferred","dojo/promise/all","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/errors/create","dojo/fx","dojo/has","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/topic","dojo/touch","dojo/when","./a11yclick","./focus","./registry","./_base/manager","./_Widget","./_TemplatedMixin","./_Container","./_Contained","./_CssStateMixin","./_KeyNavMixin","dojo/text!./templates/TreeNode.html","dojo/text!./templates/Tree.html","./tree/TreeStoreModel","./tree/ForestStoreModel","./tree/_dndSelector","dojo/query!css2"],function(_b37,_b38,_b39,_b3a,_b3b,_b3c,all,dom,_b3d,_b3e,_b3f,_b40,_b41,has,_b42,keys,lang,on,_b43,_b44,when,_b45,_b46,_b47,_b48,_b49,_b4a,_b4b,_b4c,_b4d,_b4e,_b4f,_b50,_b51,_b52,_b53){function _b54(d){return lang.delegate(d.promise||d,{addCallback:function(_b55){this.then(_b55);},addErrback:function(_b56){this.otherwise(_b56);}});};var _b57=_b3b("dijit._TreeNode",[_b49,_b4a,_b4b,_b4c,_b4d],{item:null,isTreeNode:true,label:"",_setLabelAttr:function(val){this.labelNode[this.labelType=="html"?"innerHTML":"innerText" in this.labelNode?"innerText":"textContent"]=val;this._set("label",val);},labelType:"text",isExpandable:null,isExpanded:false,state:"NotLoaded",templateString:_b4f,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);if(this.isExpandable){this.labelNode.setAttribute("aria-expanded",this.isExpanded);}this.setSelected(false);},_setIndentAttr:function(_b58){var _b59=(Math.max(_b58,0)*this.tree._nodePixelIndent)+"px";_b3f.set(this.domNode,"backgroundPosition",_b59+" 0px");_b3f.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",_b59);_b37.forEach(this.getChildren(),function(_b5a){_b5a.set("indent",_b58+1);});this._set("indent",_b58);},markProcessing:function(){this.state="Loading";this._setExpando(true);},unmarkProcessing:function(){this._setExpando(false);},_updateItemClasses:function(item){var tree=this.tree,_b5b=tree.model;if(tree._v10Compat&&item===_b5b.root){item=null;}this._applyClassAndStyle(item,"icon","Icon");this._applyClassAndStyle(item,"label","Label");this._applyClassAndStyle(item,"row","Row");this.tree._startPaint(true);},_applyClassAndStyle:function(item,_b5c,_b5d){var _b5e="_"+_b5c+"Class";var _b5f=_b5c+"Node";var _b60=this[_b5e];this[_b5e]=this.tree["get"+_b5d+"Class"](item,this.isExpanded);_b3d.replace(this[_b5f],this[_b5e]||"",_b60||"");_b3f.set(this[_b5f],this.tree["get"+_b5d+"Style"](item,this.isExpanded)||{});},_updateLayout:function(){var _b61=this.getParent();if(!_b61||!_b61.rowNode||_b61.rowNode.style.display=="none"){_b3d.add(this.domNode,"dijitTreeIsRoot");}else{_b3d.toggle(this.domNode,"dijitTreeIsLast",!this.getNextSibling());}},_setExpando:function(_b62){var _b63=["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"],_b64=["*","-","+","*"],idx=_b62?0:(this.isExpandable?(this.isExpanded?1:2):3);_b3d.replace(this.expandoNode,_b63[idx],_b63);this.expandoNodeText.innerHTML=_b64[idx];},expand:function(){if(this._expandDeferred){return _b54(this._expandDeferred);}if(this._collapseDeferred){this._collapseDeferred.cancel();delete this._collapseDeferred;}this.isExpanded=true;this.labelNode.setAttribute("aria-expanded","true");if(this.tree.showRoot||this!==this.tree.rootNode){this.containerNode.setAttribute("role","group");}_b3d.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);if(this==this.tree.rootNode&&this.tree.showRoot){this.tree.domNode.setAttribute("aria-expanded","true");}var _b65=_b41.wipeIn({node:this.containerNode,duration:_b48.defaultDuration});var def=(this._expandDeferred=new _b3c(function(){_b65.stop();}));_b38.after(_b65,"onEnd",function(){def.resolve(true);},true);_b65.play();return _b54(def);},collapse:function(){if(this._collapseDeferred){return _b54(this._collapseDeferred);}if(this._expandDeferred){this._expandDeferred.cancel();delete this._expandDeferred;}this.isExpanded=false;this.labelNode.setAttribute("aria-expanded","false");if(this==this.tree.rootNode&&this.tree.showRoot){this.tree.domNode.setAttribute("aria-expanded","false");}_b3d.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var _b66=_b41.wipeOut({node:this.containerNode,duration:_b48.defaultDuration});var def=(this._collapseDeferred=new _b3c(function(){_b66.stop();}));_b38.after(_b66,"onEnd",function(){def.resolve(true);},true);_b66.play();return _b54(def);},indent:0,setChildItems:function(_b67){var tree=this.tree,_b68=tree.model,defs=[];var _b69=this.getChildren();_b37.forEach(_b69,function(_b6a){_b4b.prototype.removeChild.call(this,_b6a);},this);this.defer(function(){_b37.forEach(_b69,function(node){if(!node._destroyed&&!node.getParent()){tree.dndController.removeTreeNode(node);function _b6b(node){var id=_b68.getIdentity(node.item),ary=tree._itemNodesMap[id];if(ary.length==1){delete tree._itemNodesMap[id];}else{var _b6c=_b37.indexOf(ary,node);if(_b6c!=-1){ary.splice(_b6c,1);}}_b37.forEach(node.getChildren(),_b6b);};_b6b(node);if(tree.persist){var _b6d=_b37.map(node.getTreePath(),function(item){return tree.model.getIdentity(item);}).join("/");for(var path in tree._openedNodes){if(path.substr(0,_b6d.length)==_b6d){delete tree._openedNodes[path];}}tree._saveExpandedNodes();}node.destroyRecursive();}});});this.state="Loaded";if(_b67&&_b67.length>0){this.isExpandable=true;_b37.forEach(_b67,function(item){var id=_b68.getIdentity(item),_b6e=tree._itemNodesMap[id],node;if(_b6e){for(var i=0;i<_b6e.length;i++){if(_b6e[i]&&!_b6e[i].getParent()){node=_b6e[i];node.set("indent",this.indent+1);break;}}}if(!node){node=this.tree._createTreeNode({item:item,tree:tree,isExpandable:_b68.mayHaveChildren(item),label:tree.getLabel(item),labelType:(tree.model&&tree.model.labelType)||"text",tooltip:tree.getTooltip(item),ownerDocument:tree.ownerDocument,dir:tree.dir,lang:tree.lang,textDir:tree.textDir,indent:this.indent+1});if(_b6e){_b6e.push(node);}else{tree._itemNodesMap[id]=[node];}}this.addChild(node);if(this.tree.autoExpand||this.tree._state(node)){defs.push(tree._expandNode(node));}},this);_b37.forEach(this.getChildren(),function(_b6f){_b6f._updateLayout();});}else{this.isExpandable=false;}if(this._setExpando){this._setExpando(false);}this._updateItemClasses(this.item);var def=all(defs);this.tree._startPaint(def);return _b54(def);},getTreePath:function(){var node=this;var path=[];while(node&&node!==this.tree.rootNode){path.unshift(node.item);node=node.getParent();}path.unshift(this.tree.rootNode.item);return path;},getIdentity:function(){return this.tree.model.getIdentity(this.item);},removeChild:function(node){this.inherited(arguments);var _b70=this.getChildren();if(_b70.length==0){this.isExpandable=false;this.collapse();}_b37.forEach(_b70,function(_b71){_b71._updateLayout();});},makeExpandable:function(){this.isExpandable=true;this._setExpando(false);},setSelected:function(_b72){this.labelNode.setAttribute("aria-selected",_b72?"true":"false");_b3d.toggle(this.rowNode,"dijitTreeRowSelected",_b72);},focus:function(){_b46.focus(this.focusNode);}});if(has("dojo-bidi")){_b57.extend({_setTextDirAttr:function(_b73){if(_b73&&((this.textDir!=_b73)||!this._created)){this._set("textDir",_b73);this.applyTextDir(this.labelNode);_b37.forEach(this.getChildren(),function(_b74){_b74.set("textDir",_b73);},this);}}});}var Tree=_b3b("dijit.Tree",[_b49,_b4e,_b4a,_b4d],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:true,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:false,openOnDblClick:false,templateString:_b50,persist:false,autoExpand:false,dndController:_b53,dndParams:["onDndDrop","itemCreator","onDndCancel","checkAcceptance","checkItemAcceptance","dragThreshold","betweenThreshold"],onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(_b75,_b76){_b43.publish(this.id,lang.mixin({tree:this,event:_b75},_b76||{}));},postMixInProperties:function(){this.tree=this;if(this.autoExpand){this.persist=false;}this._itemNodesMap={};if(!this.cookieName&&this.id){this.cookieName=this.id+"SaveStateCookie";}this.expandChildrenDeferred=new _b3c();this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments);},postCreate:function(){this._initState();var self=this;this.own(on(this.containerNode,on.selector(".dijitTreeNode",_b44.enter),function(evt){self._onNodeMouseEnter(_b47.byNode(this),evt);}),on(this.containerNode,on.selector(".dijitTreeNode",_b44.leave),function(evt){self._onNodeMouseLeave(_b47.byNode(this),evt);}),on(this.containerNode,_b45,function(evt){var node=_b47.getEnclosingWidget(evt.target);if(node.isInstanceOf(_b57)){self._onClick(node,evt);}}),on(this.containerNode,on.selector(".dijitTreeNode","dblclick"),function(evt){self._onDblClick(_b47.byNode(this),evt);}));if(!this.model){this._store2model();}this.own(_b38.after(this.model,"onChange",lang.hitch(this,"_onItemChange"),true),_b38.after(this.model,"onChildrenChange",lang.hitch(this,"_onItemChildrenChange"),true),_b38.after(this.model,"onDelete",lang.hitch(this,"_onItemDelete"),true));this.inherited(arguments);if(this.dndController){if(lang.isString(this.dndController)){this.dndController=lang.getObject(this.dndController);}var _b77={};for(var i=0;i<this.dndParams.length;i++){if(this[this.dndParams[i]]){_b77[this.dndParams[i]]=this[this.dndParams[i]];}}this.dndController=new this.dndController(this,_b77);}this._load();this.onLoadDeferred=_b54(this.pendingCommandsPromise);this.onLoadDeferred.then(lang.hitch(this,"onLoad"));},_store2model:function(){this._v10Compat=true;_b42.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var _b78={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};if(this.params.mayHaveChildren){_b78.mayHaveChildren=lang.hitch(this,"mayHaveChildren");}if(this.params.getItemChildren){_b78.getChildren=lang.hitch(this,function(item,_b79,_b7a){this.getItemChildren((this._v10Compat&&item===this.model.root)?null:item,_b79,_b7a);});}this.model=new _b52(_b78);this.showRoot=Boolean(this.label);},onLoad:function(){},_load:function(){this.model.getRoot(lang.hitch(this,function(item){var rn=(this.rootNode=this.tree._createTreeNode({item:item,tree:this,isExpandable:true,label:this.label||this.getLabel(item),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1}));if(!this.showRoot){rn.rowNode.style.display="none";this.domNode.setAttribute("role","presentation");this.domNode.removeAttribute("aria-expanded");this.domNode.removeAttribute("aria-multiselectable");if(this["aria-label"]){rn.containerNode.setAttribute("aria-label",this["aria-label"]);this.domNode.removeAttribute("aria-label");}else{if(this["aria-labelledby"]){rn.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]);this.domNode.removeAttribute("aria-labelledby");}}rn.labelNode.setAttribute("role","presentation");rn.containerNode.setAttribute("role","tree");rn.containerNode.setAttribute("aria-expanded","true");rn.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular);}else{this.domNode.setAttribute("aria-multiselectable",!this.dndController.singular);this.rootLoadingIndicator.style.display="none";}this.containerNode.appendChild(rn.domNode);var _b7b=this.model.getIdentity(item);if(this._itemNodesMap[_b7b]){this._itemNodesMap[_b7b].push(rn);}else{this._itemNodesMap[_b7b]=[rn];}rn._updateLayout();this._expandNode(rn).then(lang.hitch(this,function(){this.rootLoadingIndicator.style.display="none";this.expandChildrenDeferred.resolve(true);}));}),lang.hitch(this,function(err){}));},getNodesByItem:function(item){if(!item){return [];}var _b7c=lang.isString(item)?item:this.model.getIdentity(item);return [].concat(this._itemNodesMap[_b7c]);},_setSelectedItemAttr:function(item){this.set("selectedItems",[item]);},_setSelectedItemsAttr:function(_b7d){var tree=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(lang.hitch(this,function(){var _b7e=_b37.map(_b7d,function(item){return (!item||lang.isString(item))?item:tree.model.getIdentity(item);});var _b7f=[];_b37.forEach(_b7e,function(id){_b7f=_b7f.concat(tree._itemNodesMap[id]||[]);});this.set("selectedNodes",_b7f);}));},_setPathAttr:function(path){if(path.length){return _b54(this.set("paths",[path]).then(function(_b80){return _b80[0];}));}else{return _b54(this.set("paths",[]).then(function(_b81){return _b81[0];}));}},_setPathsAttr:function(_b82){var tree=this;function _b83(path,_b84){var _b85=path.shift();var _b86=_b37.filter(_b84,function(node){return node.getIdentity()==_b85;})[0];if(!!_b86){if(path.length){return tree._expandNode(_b86).then(function(){return _b83(path,_b86.getChildren());});}else{return _b86;}}else{throw new Tree.PathError("Could not expand path at "+_b85);}};return _b54(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return all(_b37.map(_b82,function(path){path=_b37.map(path,function(item){return lang.isString(item)?item:tree.model.getIdentity(item);});if(path.length){return _b83(path,[tree.rootNode]);}else{throw new Tree.PathError("Empty path");}}));}).then(function setNodes(_b87){tree.set("selectedNodes",_b87);return tree.paths;}));},_setSelectedNodeAttr:function(node){this.set("selectedNodes",[node]);},_setSelectedNodesAttr:function(_b88){this.dndController.setSelection(_b88);},expandAll:function(){var _b89=this;function _b8a(node){return _b89._expandNode(node).then(function(){var _b8b=_b37.filter(node.getChildren()||[],function(node){return node.isExpandable;});return all(_b37.map(_b8b,_b8a));});};return _b54(_b8a(this.rootNode));},collapseAll:function(){var _b8c=this;function _b8d(node){var _b8e=_b37.filter(node.getChildren()||[],function(node){return node.isExpandable;}),defs=all(_b37.map(_b8e,_b8d));if(!node.isExpanded||(node==_b8c.rootNode&&!_b8c.showRoot)){return defs;}else{return defs.then(function(){return _b8c._collapseNode(node);});}};return _b54(_b8d(this.rootNode));},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(item){return this.model.getLabel(item);},getIconClass:function(item,_b8f){return (!item||this.model.mayHaveChildren(item))?(_b8f?"dijitFolderOpened":"dijitFolderClosed"):"dijitLeaf";},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return "";},_onDownArrow:function(evt,node){var _b90=this._getNext(node);if(_b90&&_b90.isTreeNode){this.focusNode(_b90);}},_onUpArrow:function(evt,node){var _b91=node.getPreviousSibling();if(_b91){node=_b91;while(node.isExpandable&&node.isExpanded&&node.hasChildren()){var _b92=node.getChildren();node=_b92[_b92.length-1];}}else{var _b93=node.getParent();if(!(!this.showRoot&&_b93===this.rootNode)){node=_b93;}}if(node&&node.isTreeNode){this.focusNode(node);}},_onRightArrow:function(evt,node){if(node.isExpandable&&!node.isExpanded){this._expandNode(node);}else{if(node.hasChildren()){node=node.getChildren()[0];if(node&&node.isTreeNode){this.focusNode(node);}}}},_onLeftArrow:function(evt,node){if(node.isExpandable&&node.isExpanded){this._collapseNode(node);}else{var _b94=node.getParent();if(_b94&&_b94.isTreeNode&&!(!this.showRoot&&_b94===this.rootNode)){this.focusNode(_b94);}}},focusLastChild:function(){var node=this._getLast();if(node&&node.isTreeNode){this.focusNode(node);}},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0];},_getLast:function(){var node=this.rootNode;while(node.isExpanded){var c=node.getChildren();if(!c.length){break;}node=c[c.length-1];}return node;},_getNext:function(node){if(node.isExpandable&&node.isExpanded&&node.hasChildren()){return node.getChildren()[0];}else{while(node&&node.isTreeNode){var _b95=node.getNextSibling();if(_b95){return _b95;}node=node.getParent();}return null;}},childSelector:".dijitTreeRow",isExpandoNode:function(node,_b96){return dom.isDescendant(node,_b96.expandoNode)||dom.isDescendant(node,_b96.expandoNodeText);},__click:function(_b97,e,_b98,func){var _b99=e.target,_b9a=this.isExpandoNode(_b99,_b97);if(_b97.isExpandable&&(_b98||_b9a)){this._onExpandoClick({node:_b97});}else{this._publish("execute",{item:_b97.item,node:_b97,evt:e});this[func](_b97.item,_b97,e);this.focusNode(_b97);}e.stopPropagation();e.preventDefault();},_onClick:function(_b9b,e){this.__click(_b9b,e,this.openOnClick,"onClick");},_onDblClick:function(_b9c,e){this.__click(_b9c,e,this.openOnDblClick,"onDblClick");},_onExpandoClick:function(_b9d){var node=_b9d.node;this.focusNode(node);if(node.isExpanded){this._collapseNode(node);}else{this._expandNode(node);}},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(node){_b42.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(node);},_getRootOrFirstNode:function(){_b42.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst();},_collapseNode:function(node){if(node._expandNodeDeferred){delete node._expandNodeDeferred;}if(node.state=="Loading"){return;}if(node.isExpanded){var ret=node.collapse();this.onClose(node.item,node);this._state(node,false);this._startPaint(ret);return ret;}},_expandNode:function(node){if(node._expandNodeDeferred){return node._expandNodeDeferred;}var _b9e=this.model,item=node.item,_b9f=this;if(!node._loadDeferred){node.markProcessing();node._loadDeferred=new _b3c();_b9e.getChildren(item,function(_ba0){node.unmarkProcessing();node.setChildItems(_ba0).then(function(){node._loadDeferred.resolve(_ba0);});},function(err){node._loadDeferred.reject(err);});}var def=node._loadDeferred.then(lang.hitch(this,function(){var def2=node.expand();this.onOpen(node.item,node);this._state(node,true);return def2;}));this._startPaint(def);return def;},focusNode:function(node){this.focusChild(node);},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(item){var _ba1=this.model,_ba2=_ba1.getIdentity(item),_ba3=this._itemNodesMap[_ba2];if(_ba3){var _ba4=this.getLabel(item),_ba5=this.getTooltip(item);_b37.forEach(_ba3,function(node){node.set({item:item,label:_ba4,tooltip:_ba5});node._updateItemClasses(item);});}},_onItemChildrenChange:function(_ba6,_ba7){var _ba8=this.model,_ba9=_ba8.getIdentity(_ba6),_baa=this._itemNodesMap[_ba9];if(_baa){_b37.forEach(_baa,function(_bab){_bab.setChildItems(_ba7);});}},_onItemDelete:function(item){var _bac=this.model,_bad=_bac.getIdentity(item),_bae=this._itemNodesMap[_bad];if(_bae){_b37.forEach(_bae,function(node){this.dndController.removeTreeNode(node);var _baf=node.getParent();if(_baf){_baf.removeChild(node);}node.destroyRecursive();},this);delete this._itemNodesMap[_bad];}},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var oreo=_b3a(this.cookieName);if(oreo){_b37.forEach(oreo.split(","),function(item){this._openedNodes[item]=true;},this);}}},_state:function(node,_bb0){if(!this.persist){return false;}var path=_b37.map(node.getTreePath(),function(item){return this.model.getIdentity(item);},this).join("/");if(arguments.length===1){return this._openedNodes[path];}else{if(_bb0){this._openedNodes[path]=true;}else{delete this._openedNodes[path];}this._saveExpandedNodes();}},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var ary=[];for(var id in this._openedNodes){ary.push(id);}_b3a(this.cookieName,ary.join(","),{expires:365});}},destroy:function(){if(this._curSearch){this._curSearch.timer.remove();delete this._curSearch;}if(this.rootNode){this.rootNode.destroyRecursive();}if(this.dndController&&!lang.isString(this.dndController)){this.dndController.destroy();}this.rootNode=null;this.inherited(arguments);},destroyRecursive:function(){this.destroy();},resize:function(_bb1){if(_bb1){_b3e.setMarginBox(this.domNode,_bb1);}this._nodePixelIndent=_b3e.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(lang.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths();}));},_outstandingPaintOperations:0,_startPaint:function(p){this._outstandingPaintOperations++;if(this._adjustWidthsTimer){this._adjustWidthsTimer.remove();delete this._adjustWidthsTimer;}var oc=lang.hitch(this,function(){this._outstandingPaintOperations--;if(this._outstandingPaintOperations<=0&&!this._adjustWidthsTimer&&this._started){this._adjustWidthsTimer=this.defer("_adjustWidths");}});when(p,oc,oc);},_adjustWidths:function(){if(this._adjustWidthsTimer){this._adjustWidthsTimer.remove();delete this._adjustWidthsTimer;}this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%";},_createTreeNode:function(args){return new _b57(args);},focus:function(){if(this.lastFocusedChild){this.focusNode(this.lastFocusedChild);}else{this.focusFirstChild();}}});if(has("dojo-bidi")){Tree.extend({_setTextDirAttr:function(_bb2){if(_bb2&&this.textDir!=_bb2){this._set("textDir",_bb2);this.rootNode.set("textDir",_bb2);}}});}Tree.PathError=_b40("TreePathError");Tree._TreeNode=_b57;return Tree;});},"esriviewer/loader/ViewerLoader":function(){define(["dojo/_base/declare","dojo/_base/window","dojo/_base/lang","dojo/topic","dojo/_base/connect","dojo/dom-class","../base/ViewerGlobals","../manager/ViewerManagerWindow","../util/RegExpUtils","../util/ViewerUtils","../util/GeometryUtils","../map/geometry/base/ProjectionUtils","dojo/on","dojo/io-query","xstyle/css","./base/ViewerPlacementWindow","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/layout/StackController","dijit/layout/AccordionPane","xstyle/css!dojox/layout/resources/ResizeHandle.css"],function(_bb3,_bb4,lang,_bb5,con,_bb6,_bb7,_bb8,_bb9,_bba,_bbb,_bbc,on,_bbd,Css,_bbe){return _bb3([],{isDebug:false,constructor:function(_bbf){lang.mixin(this,_bbf||{});this._initPageResizeListener();this.viewerConfigurationParameters={useProxyForConfig:false};this.createGlobalClasses();this.initCss();this.processConfigurationSettings();this.createViewerPlacementWindow();this.createViewerManager();this.tweakUI();},_initPageResizeListener:function(){on(window,"resize",lang.hitch(this,function(){_bb5.publish(VIEWER_GLOBALS.EVENTS.WINDOW.REPOSITION_ALL);}));},initCss:function(){if(this.loadCoreTheme==null||this.loadCoreTheme!=false){Css.load("esriviewer/theme/coreTheme.css",require,lang.hitch(this,function(){this._handleCoreThemeLoaded();}));}else{this._handleCoreThemeLoaded();}},_handleCoreThemeLoaded:function(){Css.load("dijit/themes/tundra/tundra.css",require,function(){});Css.load("esri/css/esri.css",require,function(){});var _bc0=location.pathname.replace(/[^\/]+$/,"")+"css/overrides.css";Css.load(_bc0,require,function(){});_bb5.publish(VIEWER_GLOBALS.EVENTS.CSS.CORE_UI_THEME_LOADED);},createViewerPlacementWindow:function(){this.viewPlacement=new _bbe({mapDiv:this.mapDiv});},tweakUI:function(){if(VIEWER_UTILS.isHtml5FileUploadSupported()){con.connect(_bb4.body(),"dragover",function(e){e.stopPropagation();e.preventDefault();e.dataTransfer.effectAllowed=e.dataTransfer.dropEffect="none";});}_bb6.add(_bb4.body(),["defaultTextColor","defaultFont","defaultFontSize"]);},createGlobalClasses:function(){window.VIEWER_GLOBALS=this.createGlobals();window.VIEWER_UTILS=this.createUtils();window.GEOMETRY_UTILS=this.createGeometryUtils();window.REG_EXP_UTILS=this.createRegExpUtils();window.PROJECTION_UTILS=new _bbc();},processConfigurationSettings:function(){if(window&&window.location&&window.location.href){var _bc1=window.location.href.substring(window.location.href.indexOf("?")+1,window.location.href.length);this.windowQueryObject=_bbd.queryToObject(_bc1);if(this.windowQueryObject!=null&&lang.isObject(this.windowQueryObject)){if(this.windowQueryObject.viewerConfig!=null){this.viewerConfigurationParameters.configUrl=this.windowQueryObject.viewerConfig;this.viewerConfigurationParameters.useProxyForConfig=true;}if(this.windowQueryObject.viewerPositionConfig!=null){this.viewerConfigurationParameters.viewerPositioningConfigUrl=this.windowQueryObject.viewerPositionConfig;this.viewerConfigurationParameters.useProxyForPositionConfig=true;}}}},createGlobals:function(){return new _bb7();},createGeometryUtils:function(){return new _bbb();},createUtils:function(){return new _bba({isDebug:this.isDebug});},createRegExpUtils:function(){return new _bb9();},createViewerManager:function(){window.VIEWER_MANAGER=this.createViewerManagerWindow();return window.VIEWER_MANAGER;},createViewerManagerWindow:function(){return new _bb8(this.viewerConfigurationParameters);}});});},"url:dijit/templates/Menu.html":"<table class=\"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable\" role=\"menu\" tabIndex=\"${tabIndex}\"\n\t   cellspacing=\"0\">\n\t<tbody class=\"dijitReset\" data-dojo-attach-point=\"containerNode\"></tbody>\n</table>\n","url:dijit/templates/TreeNode.html":"<div class=\"dijitTreeNode\" role=\"presentation\"\n\t><div data-dojo-attach-point=\"rowNode\" class=\"dijitTreeRow\" role=\"presentation\"\n\t\t><span data-dojo-attach-point=\"expandoNode\" class=\"dijitInline dijitTreeExpando\" role=\"presentation\"></span\n\t\t><span data-dojo-attach-point=\"expandoNodeText\" class=\"dijitExpandoText\" role=\"presentation\"></span\n\t\t><span data-dojo-attach-point=\"contentNode\"\n\t\t\tclass=\"dijitTreeContent\" role=\"presentation\">\n\t\t\t<span role=\"presentation\" class=\"dijitInline dijitIcon dijitTreeIcon\" data-dojo-attach-point=\"iconNode\"></span\n\t\t\t><span data-dojo-attach-point=\"labelNode,focusNode\" class=\"dijitTreeLabel\" role=\"treeitem\" tabindex=\"-1\" aria-selected=\"false\"></span>\n\t\t</span\n\t></div>\n\t<div data-dojo-attach-point=\"containerNode\" class=\"dijitTreeNodeContainer\" role=\"presentation\" style=\"display: none;\"></div>\n</div>\n","url:esriviewer/ui/draw/template/DrawWidgetTemplate.html":"<div class=\"drawWindow\">\r\n    <div class=\"defaultTabContainer\">\r\n        <span  data-bind=\"click:showDraw, css: {selectedTab: drawVisible}\">Create</span>\r\n        <span data-bind=\"click:showConfiguration, css: {selectedTab: configurationVisible}\">Configure</span>\r\n        <span  data-bind=\"visible:showGraphicsListTab, click:showGraphicsList, css: {selectedTab: graphicsListVisible}\">Added</span>\r\n        <span data-bind=\"visible:showSavedGraphicsTab, click:showUserPersistedGraphics, css: {selectedTab: userPersistedGraphicsVisible}\">Saved</span>\r\n    </div>\r\n    <div class=\"drawWindowInputIconsContainer\" data-dojo-attach-point=\"drawWindowInputIconsContainer\"\r\n         data-bind=\"visible: drawVisible\">\r\n        <div class=\"threePixelBorderRadius commonIcons32 pointUnselected\"\r\n             data-bind=\"visible: showDrawPointIcon, css: {pointSelected: pointActive}\"\r\n             title=\"Draw Point\" data-dojo-attach-event=\"onclick:handlePointDrawClick\"></div>\r\n        <div class=\"threePixelBorderRadius commonIcons32 lineUnselected\"\r\n             data-bind=\"visible: showDrawLineIcon, css: {lineSelected: lineActive}\"\r\n             title=\"Draw Line\" data-dojo-attach-event=\"onclick:handleLineDrawClick\"></div>\r\n        <div class=\"threePixelBorderRadius commonIcons32 polylineUnselected\"\r\n                data-bind=\"visible: showDrawPolylineIcon, css: {polylineSelected: polylineActive}\"\r\n                title=\"Draw Polyline\" data-dojo-attach-event=\"onclick:handlePolylineDrawClick\"></div>\r\n        <div data-bind=\"visible: showDrawPolygonIcon, css: {polygonSelected: polygonActive}\"\r\n             class=\"threePixelBorderRadius commonIcons32 polygonUnselected\"\r\n             title=\"Draw Polygon\" data-dojo-attach-event=\"onclick:handlePolygonDrawClick\"></div>\r\n        <div data-bind=\"visible: showDrawRectangleIcon,css: {rectangleSelected: rectangleActive}\"\r\n             class=\"threePixelBorderRadius commonIcons32 rectangleUnselected\"\r\n             title=\"Draw Rectangle\" data-dojo-attach-event=\"onclick:handleRectangleDrawClick\"></div>\r\n        <div class=\"threePixelBorderRadius commonIcons32 textUnselected\"\r\n             data-bind=\"visible: showDrawTextIcon,css: {textSelected: textActive}\"\r\n             title=\"Draw Text\" data-dojo-attach-event=\"onclick:handleTextDrawClick\"></div>\r\n    </div>\r\n    <div class=\"drawFreehandContainer\"\r\n         data-bind=\"visible: freehandContainerVisible\">\r\n        <span data-dojo-type=\"dijit/form/CheckBox\" data-dojo-attach-event=\"onChange:handleFreehandToggled\"\r\n              data-dojo-attach-point=\"freeHandDrawCheckbox\"></span>\r\n        <span class=\"drawFreehandCheckboxLabel\" data-dojo-attach-event=\"onclick:toggleFreehand\">Freehand</span>\r\n    </div>\r\n    <div class=\"drawWindowConfigureContainer\" data-bind=\"visible: configurationVisible\"\r\n         data-dojo-attach-point=\"drawWindowConfigureContainer\">\r\n    </div>\r\n    <div class=\"drawWindowGraphicsListContainer\" data-dojo-attach-point=\"drawWindowGraphicsListContainer\"\r\n         data-bind=\"visible: graphicsListVisible\">\r\n    </div>\r\n    <div class=\"drawWindowUserPersistedGraphicsContainer\"\r\n         data-dojo-attach-point=\"drawWindowUserPersistedGraphicsContainer\"\r\n         data-bind=\"visible: userPersistedGraphicsVisible\">\r\n    </div>\r\n</div>","url:esriviewer/ui/layers/template/LayersWidgetTemplate.html":"<div>\r\n    <div class=\"defaultTabContainer\" data-dojo-attach-point=\"layersTabContainer\">\r\n        <span data-dojo-attach-point=\"layersTab\"\r\n              data-bind=\"click:showLayersList, css: {selectedTab: layersListVisible}\">Layers</span>\r\n        <span data-dojo-attach-point=\"addLayersTab\"\r\n              data-bind=\"click:showAddLayers, css: {selectedTab: addLayersVisible}\">Add Layer</span>\r\n        <span data-dojo-attach-point=\"persistedLayersTab\"\r\n              data-bind=\"click:showUserPersistedLayers, css: {selectedTab: persistedLayersVisible}\">Saved Layers</span>\r\n    </div>\r\n    <div data-bind=\"visible:addLayersVisible\" class=\"addLayerContainer\" data-dojo-attach-point=\"addLayerContainer\">\r\n        <div class=\"addLayerContainerInner\">\r\n            <div class=\"viewerAddLayerWorkingWKIDContainer\" data-bind=\"visible:showWKIDInAddLayers\">\r\n                <span class=\"viewerAddLayerLabel \">Map WKID:</span>\r\n                <span class=\"viewerAddLayerWorkingWKIDLabel\" data-bind=\"text: viewerWKID\"></span>\r\n            </div>\r\n            <div class=\"viewerAddLayerLabel viewerAddLayerUrlLabel \">URL:</div>\r\n            <div data-dojo-type=\"dijit/form/TextBox\" style=\"width: 100%\" data-dojo-attach-point=\"addLayerTextInput\"\r\n                 data-dojo-attach-event=\"onKeyUp:handleLayerAddUrlKeyUp\"></div>\r\n            <div class=\"viewerAddLayerLabel viewerAddLayerUrlLabel \">Label:</div>\r\n            <div data-dojo-type=\"dijit/form/TextBox\" style=\"width: 100%\" data-dojo-attach-point=\"addLayerLabelInput\"\r\n                 value=\"Added Layer\"></div>\r\n            <div class=\"viewerAddLayerActions\">\r\n                <div class=\"layerTypeContainer\">\r\n                    <div class=\"viewerAddLayerLabel\">Type:</div>\r\n                    <select data-dojo-type=\"dijit/form/Select\" style=\"width: 100%\"\r\n                            data-dojo-attach-point=\"addLayerTypeSelect\"\r\n                            style=\"width: 15em\"></select>\r\n                </div>\r\n                <div class=\"viewerAddLayerButtonActions\">\r\n                    <div data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:addManualLayer\">Add Layer\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n    <div data-dojo-attach-point=\"layerTocContainer\" data-bind=\"visible:layersListVisible\">\r\n\r\n    </div>\r\n    <div data-bind=\"visible:persistedLayersVisible\" data-dojo-attach-point=\"userPersistedLayersContainer\">\r\n    </div>\r\n</div>","url:dijit/layout/templates/AccordionButton.html":"<div data-dojo-attach-event='ondijitclick:_onTitleClick' class='dijitAccordionTitle' role=\"presentation\">\n\t<div data-dojo-attach-point='titleNode,focusNode' data-dojo-attach-event='onkeydown:_onTitleKeyDown'\n\t\t\tclass='dijitAccordionTitleFocus' role=\"tab\" aria-expanded=\"false\"\n\t\t><span class='dijitInline dijitAccordionArrow' role=\"presentation\"></span\n\t\t><span class='arrowTextUp' role=\"presentation\">+</span\n\t\t><span class='arrowTextDown' role=\"presentation\">-</span\n\t\t><span role=\"presentation\" class=\"dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span>\n\t\t<span role=\"presentation\" data-dojo-attach-point='titleTextNode, textDirNode' class='dijitAccordionText'></span>\n\t</div>\n</div>\n","url:esriviewer/ui/accordion/template/ToolsAccordionTemplate.html":"<div class=\"toolsAccordionContainer fivePixelBorderRadius defaultBoxShadow\">\r\n\r\n</div>","url:esriviewer/ui/window/template/WindowWidgetTemplate.html":"<div class=\"windowContainer defaultBorder fivePixelBorderRadius defaultBoxShadow\">\r\n    <div data-dojo-attach-point=\"windowHeader\" class=\"windowHeader\">\r\n        <div class=\"windowCloseImg windowAction close\" data-dojo-attach-point=\"windowCloseImg\"\r\n             title=\"Close\"></div>\r\n        <div class=\"windowMinimizeImg windowAction minimize\" data-dojo-attach-point=\"windowMinimizeImg\"\r\n             title=\"Minimize\"></div>\r\n        <div data-dojo-attach-point=\"headerMoverContainer\" class=\"headerMoverContainer\">\r\n            <div class=\"windowIcon ${windowIconClass}\" title=\"${windowIconAltText}\"></div>\r\n            <span class=\"windowHeaderText\">${windowHeaderText}</span>\r\n        </div>\r\n    </div>\r\n    <div class=\"windowContentOuter\" data-dojo-attach-point=\"windowContentOuter\">\r\n        <div data-dojo-attach-point=\"windowContent\" class=\"windowContent\">\r\n            <div data-dojo-attach-point=\"windowLoadingThrobber\" class=\"windowLoadingThrobber\"></div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n</div>","url:esriviewer/ui/messaging/template/MessagingWidgetTemplate.html":"<div class=\"defaultBorder defaultBackground statusMessageContainer threePixelBorderRadius defaultBoxShadow\"\r\n     data-bind=\"visible:visible\">\r\n    <div class=\"commonIcons16 infoBlock messagingIcon\"></div>\r\n    <div class=\"statusDivInner threePixelBorderRadius\">\r\n        <div class=\"statusDivMessage\" data-bind=\"text:message\"></div>\r\n    </div>\r\n</div>","url:esriviewer/ui/draw/configure/geometry/template/ConfigureLineTemplate.html":"<div class=\"configureDrawGeometryContainer\">\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Line Style</span>\r\n        <select data-bind=\"options: lineStyles ,value:selectedLineStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Width</span>\r\n        <select data-bind=\"options: lineWidths ,value:selectedWidth\"></select>\r\n    </div>\r\n    <div data-dojo-attach-point=\"transparencySliderContainer\"></div>\r\n\r\n    <div class=\"configureDrawColorPickerContainer\" data-dojo-attach-point=\"colorPickerContainer\"></div>\r\n</div>","url:dijit/templates/MenuSeparator.html":"<tr class=\"dijitMenuSeparator\" role=\"separator\">\n\t<td class=\"dijitMenuSeparatorIconCell\">\n\t\t<div class=\"dijitMenuSeparatorTop\"></div>\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\n\t</td>\n\t<td colspan=\"3\" class=\"dijitMenuSeparatorLabelCell\">\n\t\t<div class=\"dijitMenuSeparatorTop dijitMenuSeparatorLabel\"></div>\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\n\t</td>\n</tr>\n","url:dijit/templates/CheckedMenuItem.html":"<tr class=\"dijitReset dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"${role}\" tabIndex=\"-1\" aria-checked=\"${checked}\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<span class=\"dijitInline dijitIcon dijitMenuItemIcon dijitCheckedMenuItemIcon\" data-dojo-attach-point=\"iconNode\"></span>\n\t\t<span class=\"dijitMenuItemIconChar dijitCheckedMenuItemIconChar\">${checkedChar}</span>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode,labelNode,textDirNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">&#160;</td>\n</tr>\n","url:esriviewer/ui/draw/base/template/GraphicsListingTemplate.html":"<div>\r\n    <div class=\"addGraphicsActionsContainer\" data-dojo-attach-point=\"addGraphicsActionsContainer\">\r\n        <div class=\"graphicsListRightIcon commonIcons16 disk\" title=\"Save Graphics\"\r\n             data-bind=\"click:toggleSaveGraphics, visible:saveGraphicsIconVisible\"></div>\r\n        <div class=\"graphicsListLeftIcon commonIcons16 layerHide\" title=\"Toggle Graphics\"\r\n             data-bind=\"click:toggleAllGraphics, css:{layerShow: allGraphicsVisible}\"></div>\r\n        <div class=\"graphicsListLeftIcon commonIcons16 trash\" title=\"Remove All Graphics\"\r\n             data-dojo-attach-event=\"onclick:showConfirmRemoveAllTooltip\"\r\n             data-dojo-attach-point=\"removeAllGraphicsIcon\"\r\n                ></div>\r\n    </div>\r\n    <div class=\"saveGraphicsInputContainer\" data-bind=\"visible: saveGraphicsInputVisible\">\r\n        <input data-dojo-type=\"dijit/form/TextBox\" data-dojo-attach-event=\"onKeyUp: handleSaveGraphicsKeyUp\" data-dojo-attach-point=\"userSaveGraphicsNameInput\" placeholder=\"Enter A Label...\"/>\r\n        <span data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:handleSaveGraphics\">Save</span>\r\n    </div>\r\n\r\n    <div class=\"addedGraphicsListContainer\" data-dojo-attach-point=\"addedGraphicsListContainer\">\r\n        <ul data-dojo-attach-point=\"addedGraphicsList\" class=\"viewerList\" data-bind=\"foreach: addedGraphics\">\r\n            <li class=\"graphicsListEntry\">\r\n                <div title=\"Pan And Flash Graphic\"\r\n                     class=\"viewerListGenericIcon commonIcons16 magnifyingGlass\"\r\n                     data-bind=\"click:$parent.zoomToGraphic\"></div>\r\n                <div title=\"Remove Graphic\" class=\"viewerListEntryRemoveIcon commonIcons16 remove\"\r\n                     data-bind=\"click:$parent.removeGraphic\"></div>\r\n                <span class=\"graphicsListEntryLabel\" data-bind=\"text: $data.label\"></span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>","url:esriviewer/ui/layers/base/template/UserPersistedLayersListingTemplate.html":"<div>\r\n    <div class=\"userPersistsedLayersClearContainer\" data-bind=\"visible: hasEntries\">\r\n        <div class=\"userPersistsedLayersClearLbl\" data-bind=\"click:clearEntries\">Clear Entries</div>\r\n    </div>\r\n    <div class=\"addedUserPersistedLayersListContainer\" data-dojo-attach-point=\"addedUserPersistedGraphicsListContainer\">\r\n        <ul class=\"viewerList\" data-bind=\"foreach: addedUserPersistedLayers\">\r\n            <li class=\"graphicsListEntry\">\r\n                <div title=\"Delete Layer\" class=\"viewerListEntryRemoveIcon commonIcons16 remove\"\r\n                     data-bind=\"click:$parent.removeUserPersistedLayer\"></div>\r\n                <div title=\"Add Layer To Map\" class=\"viewerListGenericIcon commonIcons16 layerShow\"\r\n                     data-bind=\"click:$parent.addPersistedLayerToMap\"></div>\r\n                <span class=\"graphicsListEntryLabel\" data-bind=\"text: $data.name\"></span>\r\n\r\n                <div data-bind=\"css: $parent.persistedLayerInfoIconClass, attr:{title:$data.url}\"></div>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>","url:esriviewer/ui/throbber/template/ThrobberTemplate.html":"<div class=\"loadingThrobber\"\r\n     style=\"display:none\">\r\n    <div class=\"loadingThrobberInner\">\r\n        <div class=\"loadingIcon\"></div>\r\n    </div>\r\n</div>","url:dijit/templates/ColorPalette.html":"<div class=\"dijitInline dijitColorPalette\" role=\"grid\">\n\t<table dojoAttachPoint=\"paletteTableNode\" class=\"dijitPaletteTable\" cellSpacing=\"0\" cellPadding=\"0\" role=\"presentation\">\n\t\t<tbody data-dojo-attach-point=\"gridNode\"></tbody>\n\t</table>\n</div>\n","url:esriviewer/ui/footer/template/FooterTogglerTemplate.html":"<div class=\"footerWidget\" data-dojo-attach-point=\"footerWidget\" data-bind=\"css:{footerExpanded: expanded() == true, footerCollapsed: expanded() != true}\">\r\n    <div class=\"footerExpanderContent headerFooterBg\" data-dojo-attach-point=\"footerExpanderContent\"  data-dojo-attach-event=\"onclick:toggle\">\r\n        <div class=\"footerTogglerArrow\" data-dojo-attach-point=\"footerTogglerArrow\" data-bind=\"css:{footerTogglerDown: expanded() == true, footerTogglerUp: expanded() != true}\"></div>\r\n    </div>\r\n    <div data-dojo-attach-point=\"footerContent\"></div>\r\n</div>","url:esriviewer/ui/draw/configure/geometry/template/ConfigurePolygonTemplate.html":"<div class=\"configureDrawGeometryContainer\">\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Fill Style</span>\r\n        <select data-bind=\"options: fillStyles ,value:selectedFillStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Outline Style</span>\r\n        <select data-bind=\"options: outlineStyles ,value:selectedOutlineStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Outline Width</span>\r\n        <select data-bind=\"options: outlineWidths ,value:selectedOutlineWidth\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Angle</span>\r\n        <select data-bind=\"options: angles ,value:selectedAngle\"></select>\r\n    </div>\r\n    <div data-dojo-attach-point=\"transparencySliderContainer\"></div>\r\n\r\n    <div class=\"colorPickerTextContainer\">\r\n        <span class=\"colorPickerText\"\r\n              data-bind=\"click: setOutlineColorMode,css:{colorPickerTextSelected: outlineColorActive}\"> Outline Color</span>\r\n        <span class=\"colorPickerText\"\r\n              data-bind=\"click: setFillColorMode,css:{colorPickerTextSelected: fillColorActive}\"> Fill Color</span>\r\n\r\n    </div>\r\n\r\n\r\n    <div class=\"configureDrawColorPickerContainer\" data-dojo-attach-point=\"colorPickerContainer\"></div>\r\n</div>","url:dijit/templates/Tree.html":"<div role=\"tree\">\n\t<div class=\"dijitInline dijitTreeIndent\" style=\"position: absolute; top: -9999px\" data-dojo-attach-point=\"indentDetector\"></div>\n\t<div class=\"dijitTreeExpando dijitTreeExpandoLoading\" data-dojo-attach-point=\"rootLoadingIndicator\"></div>\n\t<div data-dojo-attach-point=\"containerNode\" class=\"dijitTreeContainer\" role=\"presentation\">\n\t</div>\n</div>\n","url:esriviewer/ui/draw/configure/geometry/template/ConfigurePointTemplate.html":"<div class=\"configureDrawGeometryContainer\">\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Marker Style</span>\r\n        <select data-bind=\"options: markerStyles ,value:selectedMarkerStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Marker Size</span>\r\n        <select data-bind=\"options: markerSizes ,value:selectedMarkerSize\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Outline Style</span>\r\n        <select data-bind=\"options: outlineStyles ,value:selectedOutlineStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Outline Width</span>\r\n        <select data-bind=\"options: outlineWidths ,value:selectedOutlineWidth\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Angle</span>\r\n        <select data-bind=\"options: angles ,value:selectedAngle\"></select>\r\n    </div>\r\n    <div data-dojo-attach-point=\"transparencySliderContainer\"></div>\r\n    <div class=\"colorPickerTextContainer\">\r\n        <span class=\"colorPickerText\"\r\n              data-bind=\"click: setMarkerColorMode,css:{colorPickerTextSelected: markerColorActive}\"> Marker Color</span>\r\n        <span class=\"colorPickerText\"\r\n              data-bind=\"click: setOutlineColorMode,css:{colorPickerTextSelected: outlineColorActive}\"> Outline Color</span>\r\n\r\n    </div>\r\n\r\n    <div class=\"configureDrawColorPickerContainer\" data-dojo-attach-point=\"colorPickerContainer\"></div>\r\n</div>","url:dijit/form/templates/Select.html":"<table class=\"dijit dijitReset dijitInline dijitLeft\"\n\tdata-dojo-attach-point=\"_buttonNode,tableNode,focusNode,_popupStateNode\" cellspacing='0' cellpadding='0'\n\trole=\"listbox\" aria-haspopup=\"true\"\n\t><tbody role=\"presentation\"><tr role=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonContents\" role=\"presentation\"\n\t\t\t><div class=\"dijitReset dijitInputField dijitButtonText\"  data-dojo-attach-point=\"containerNode,textDirNode\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitValidationContainer\"\n\t\t\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t/></div\n\t\t\t><input type=\"hidden\" ${!nameAttrSetting} data-dojo-attach-point=\"valueNode\" value=\"${value}\" aria-hidden=\"true\"\n\t\t/></td\n\t\t><td class=\"dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\"\n\t\t\tdata-dojo-attach-point=\"titleNode\" role=\"presentation\"\n\t\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t${_buttonInputDisabled}\n\t\t/></td\n\t></tr></tbody\n></table>\n","undefined":undefined,"url:dijit/templates/MenuItem.html":"<tr class=\"dijitReset dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<span role=\"presentation\" class=\"dijitInline dijitIcon dijitMenuItemIcon\" data-dojo-attach-point=\"iconNode\"></span>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode,textDirNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">\n\t\t<span data-dojo-attach-point=\"arrowWrapper\" style=\"visibility: hidden\">\n\t\t\t<span class=\"dijitInline dijitIcon dijitMenuExpand\"></span>\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</span>\n\t</td>\n</tr>\n","url:esriviewer/ui/basemap/template/BasemapGalleryTemplate.html":"<div data-bind=\"visible: visible\" class=\"defaultBackground basemapGalleryContainer\">\r\n    <div data-dojo-attach-point=\"basemapGalleryContents\"></div>\r\n</div>","url:esriviewer/ui/draw/configure/geometry/template/ConfigureTextTemplate.html":"<div class=\"configureDrawGeometryContainer\">\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Font Face</span>\r\n        <select data-bind=\"options: fontFaces ,value:selectedFontFace, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Text Align</span>\r\n        <select data-bind=\"options: textAligns ,value:selectedTextAlign, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Weight</span>\r\n        <select data-bind=\"options: textWeights ,value:selectedTextWeight, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Size</span>\r\n        <select data-bind=\"options: textSizes ,value:selectedTextSize, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Angle</span>\r\n        <select data-bind=\"options: angles ,value:selectedAngle\"></select>\r\n    </div>\r\n    <div class=\"configureDrawColorPickerContainer\" data-dojo-attach-point=\"colorPickerContainer\"></div>\r\n\r\n</div>","url:esriviewer/ui/draw/base/template/UserPersistedGrahicsListingTemplate.html":"<div>\r\n    <div class=\"addedUserPersistedGraphicsListContainer\" data-dojo-attach-point=\"addedUserPersistedGraphicsListContainer\">\r\n        <ul data-dojo-attach-point=\"addedGraphicsList\" class=\"viewerList\" data-bind=\"foreach: addedUserPersistedGraphics\">\r\n            <li class=\"graphicsListEntry\">\r\n                <div title=\"Delete Saved Graphics\" class=\"viewerListEntryRemoveIcon commonIcons16 remove\" data-bind=\"click:$parent.removeUserPersistedGraphic\"></div>\r\n                <div title=\"Add Saved Graphics To Map\" class=\"viewerListGenericIcon commonIcons16 layerShow\" data-bind=\"click:$parent.addSavedGraphics\"></div>\r\n                <span class=\"graphicsListEntryLabel\" data-bind=\"text: $data.label\"></span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>","url:esriviewer/ui/draw/configure/template/ConfigureDrawTemplate.html":"<div>\r\n    <div data-bind=\"visible:showConfigureGeometryIcons\" data-dojo-attach-point=\"annotationOptionsButtons\" class=\"annotationOptionButtons\">\r\n        <div title=\"Set Point Symbol\"\r\n             data-bind=\"click: showPointConfiguration, css:{pointSelected: pointConfigurationActive}\"\r\n             class=\"annotationOptionButton pointUnselected\"></div>\r\n        <div title=\"Set Line Symbol\"\r\n             data-bind=\"click: showLineConfiguration, css:{polylineSelected: lineConfigurationActive}\"\r\n                    class=\"annotationOptionButton polylineUnselected\"></div>\r\n        <div title=\"Set Polygon Symbol\"\r\n             data-bind=\"click: showPolygonConfiguration, css:{polygonSelected: polygonConfigurationActive}\"\r\n             class=\"annotationOptionButton polygonUnselected\"></div>\r\n        <div title=\"Set Rectangle Symbol\"\r\n             data-bind=\"visible: showEnvelopeIcon, click: showRectangleConfiguration, css:{rectangleSelected: rectangleConfigurationActive}\"\r\n             class=\"annotationOptionButton rectangleUnselected\"></div>\r\n        <div title=\"Set Text Symbol\"\r\n             data-bind=\"visible: showTextIcon, click: showTextConfiguration, css:{textSelected: textConfigurationActive}\"\r\n             class=\"annotationOptionButton textUnselected\"></div>\r\n    </div>\r\n    <div data-dojo-attach-point=\"configurePointWidgetContainer\" data-bind=\"visible:pointConfigurationActive\"></div>\r\n    <div data-dojo-attach-point=\"configureLineWidgetContainer\" data-bind=\"visible:lineConfigurationActive\"></div>\r\n    <div data-dojo-attach-point=\"configureRectangleWidgetContainer\" data-bind=\"visible:rectangleConfigurationActive\"></div>\r\n    <div data-dojo-attach-point=\"configurePolygonWidgetContainer\" data-bind=\"visible:polygonConfigurationActive\"></div>\r\n\r\n    <div data-dojo-attach-point=\"configureTextWidgetContainer\" data-bind=\"visible:textConfigurationActive\"></div>\r\n\r\n</div>","url:dijit/form/templates/HorizontalSlider.html":"<table class=\"dijit dijitReset dijitSlider dijitSliderH\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" rules=\"none\" data-dojo-attach-event=\"onkeydown:_onKeyDown, onkeyup:_onKeyUp\"\n\trole=\"presentation\"\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td data-dojo-attach-point=\"topDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\n\t\t\t><div class=\"dijitSliderDecrementIconH\" style=\"display:none\" data-dojo-attach-point=\"decrementButton\"><span class=\"dijitSliderButtonInner\">-</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper\" data-dojo-attach-event=\"press:_onClkDecBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><input data-dojo-attach-point=\"valueNode\" type=\"hidden\" ${!nameAttrSetting}\n\t\t\t/><div class=\"dijitReset dijitSliderBarContainerH\" role=\"presentation\" data-dojo-attach-point=\"sliderBarContainer\"\n\t\t\t\t><div role=\"presentation\" data-dojo-attach-point=\"progressBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH\" data-dojo-attach-event=\"press:_onBarClick\"\n\t\t\t\t\t><div class=\"dijitSliderMoveable dijitSliderMoveableH\"\n\t\t\t\t\t\t><div data-dojo-attach-point=\"sliderHandle,focusNode\" class=\"dijitSliderImageHandle dijitSliderImageHandleH\" data-dojo-attach-event=\"press:_onHandleClick\" role=\"slider\"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t\t><div role=\"presentation\" data-dojo-attach-point=\"remainingBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH\" data-dojo-attach-event=\"press:_onBarClick\"></div\n\t\t\t></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper\" data-dojo-attach-event=\"press:_onClkIncBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\n\t\t\t><div class=\"dijitSliderIncrementIconH\" style=\"display:none\" data-dojo-attach-point=\"incrementButton\"><span class=\"dijitSliderButtonInner\">+</span></div\n\t\t></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td data-dojo-attach-point=\"containerNode,bottomDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n></table>\n","url:esriviewer/ui/layers/template/LayersTocWidgetTemplate.html":"<div>\r\n    <div class=\"tocRightClickLbl\">Right click for actions</div>\r\n    <div data-dojo-attach-point=\"tocContainer\" class=\"tocContainer\">\r\n\r\n\r\n    </div>\r\n</div>","url:dijit/form/templates/CheckBox.html":"<div class=\"dijit dijitReset dijitInline\" role=\"presentation\"\n\t><input\n\t \t${!nameAttrSetting} type=\"${type}\" role=\"${type}\" aria-checked=\"false\" ${checkedAttrSetting}\n\t\tclass=\"dijitReset dijitCheckBoxInput\"\n\t\tdata-dojo-attach-point=\"focusNode\"\n\t \tdata-dojo-attach-event=\"ondijitclick:_onClick\"\n/></div>\n","url:esriviewer/ui/logging/template/LoggingWidgetTemplate.html":"<div class=\"loggingWidgetContainer\">\r\n    <div class=\"windowActions\">\r\n        <div class=\"loggingWidgetActionContainerToggleEntry\">\r\n            <div class=\"commonIcons16 information loggingWidgetActionDisplayToggleIcon\"></div>\r\n            <input type=\"checkbox\" data-bind=\"checked:infoDisplayed\"\r\n                   title=\"Toggle Info Messages\"\r\n                   class=\"loggingWidgetActionDisplayCheckbox\"/>\r\n        </div>\r\n        <div class=\"loggingWidgetActionContainerToggleEntry\">\r\n            <div class=\"commonIcons16 warning loggingWidgetActionDisplayToggleIcon\"></div>\r\n            <input type=\"checkbox\" data-bind=\"checked:warningDisplayed\"\r\n                   title=\"Toggle Warning Messages\"\r\n                   class=\"loggingWidgetActionDisplayCheckbox\"/>\r\n        </div>\r\n        <div class=\"loggingWidgetActionContainerToggleEntry\">\r\n            <div class=\"commonIcons16 error loggingWidgetActionDisplayToggleIcon\"></div>\r\n            <input type=\"checkbox\" data-bind=\"checked:errorDisplayed\"\r\n                   title=\"Toggle Error Messages\"\r\n                   class=\"loggingWidgetActionDisplayCheckbox\"/>\r\n\r\n        </div>\r\n        <div class=\"commonIcons16 deleteCross loggingWidgetActionClearIcon\" data-bind=\"visible: hasLogEntries\"\r\n             data-dojo-attach-point=\"clearLogIcon\"\r\n             data-dojo-attach-event=\"onclick: _showConfirmLogTooltip\"></div>\r\n    </div>\r\n    <ul class=\"loggingWidgetEntryList\"\r\n        data-bind=\"foreach: filteredEntries\">\r\n        <li class=\"loggingInfoMessage\" data-bind=\"css: $data.messageStyleClass\">\r\n            <span class=\"loggingMessageTimestamp\"><span>(</span><span\r\n                data-bind=\"text: $data.time\"></span><span>)</span></span>\r\n            <div class=\"loggingWidgetTypeIcon commonIcons16\" data-bind=\"css: $data.iconClass\" style=\"cursor: default\"></div>\r\n            <span class=\"loggingMessageText\" data-bind=\"text:$data.message\"></span>\r\n        </li>\r\n    </ul>\r\n</div>","url:esriviewer/ui/navigation/template/NavigationWidgetTemplate.html":"<div data-bind=\"visible: visible\" class=\"navigationHorizontalWidgetContainer\">\r\n    <div class=\"navigationTextToolbarHorizontal\">\r\n        <div class=\"navigationTextToolbarHorizontalInner\" data-dojo-attach-point=\"navigationToolbar\">\r\n        </div>\r\n    </div>\r\n</div>\r\n","url:esriviewer/ui/measure/template/MeasureWidgetTemplate.html":"<div class=\"measurementWidget\">\r\n    <div class=\"measureIcon areaIcon\"\r\n         title=\"Area\"\r\n         data-bind=\"click:handleAreaButtonClick, css: {measurementIconSelected: areaActive}\"></div>\r\n    <div class=\"measureIcon distanceIcon\"\r\n         title=\"Distance\"\r\n         data-bind=\"click:handleDistanceButtonClick, css: {measurementIconSelected: distanceActive}\"></div>\r\n    <div class=\"measureIcon locationIcon\"\r\n         title=\"Location\"\r\n         data-bind=\"click:handleLocationButtonClick, css: {measurementIconSelected: locationActive}\"></div>\r\n    <div class=\"measurementSpacer\">|</div>\r\n    <select data-bind=\"visible: areaActive, options: areaMeasurementUnits ,value:selectedAreaUnits, optionsText: 'label', optionsValue: 'value'\">\r\n    </select>\r\n    <select data-bind=\"visible: distanceActive, options: distanceMeasurementUnits ,value:selectedDistanceUnits, optionsText: 'label', optionsValue: 'value'\">\r\n    </select>\r\n    <select data-bind=\"visible: locationActive, options: locationUnits ,value:selectedLocationUnits, optionsText: 'label', optionsValue: 'value'\">\r\n    </select>\r\n\r\n\r\n    <div class=\"measurementResultsContainer\">\r\n        <span data-bind=\"text: measureMethodText\" class=\"measureMethodText\"></span>\r\n        <span data-bind=\"text: resultsText\" class=\"measureResultsText\"></span>\r\n        <span data-bind=\"text: unitsText\"  class=\"measureUnitsText\"></span>\r\n    </div>\r\n</div>","*now":function(r){r(["dojo/i18n!*preload*esriviewer/nls/esriviewer*[\"ar\",\"ca\",\"cs\",\"da\",\"de\",\"el\",\"en-gb\",\"en-us\",\"es-es\",\"fi-fi\",\"fr-fr\",\"he-il\",\"hu\",\"it-it\",\"ja-jp\",\"ko-kr\",\"nl-nl\",\"nb\",\"pl\",\"pt-br\",\"pt-pt\",\"ru\",\"sk\",\"sl\",\"sv\",\"th\",\"tr\",\"zh-tw\",\"zh-cn\",\"ROOT\"]"]);}}});define("esriviewer/esriviewer",[],1);