//>>built
require({cache:{"esriviewer/ui/footer/FooterTogglerWidget":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/text!./template/FooterTogglerTemplate.html","../base/UITemplatedWidget","dojo/dom-construct","./model/FooterTogglerViewModel"],function(_1,_2,_3,_4,_5,_6,_7){return _1([_5],{firstFooterShow:true,templateString:_4,postCreate:function(){this.inherited(arguments);this.viewModel=new _7();ko.applyBindings(this.viewModel,this.domNode);},initListeners:function(){this.inherited(arguments);_2.subscribe(VIEWER_GLOBALS.EVENTS.FOOTER.TOGGLE,_3.hitch(this,this.toggle));_2.subscribe(VIEWER_GLOBALS.EVENTS.FOOTER.COLLAPSE,_3.hitch(this,this.collapse));_2.subscribe(VIEWER_GLOBALS.EVENTS.FOOTER.EXPAND,_3.hitch(this,this.expand));_2.subscribe(VIEWER_GLOBALS.EVENTS.FOOTER.IS_EXPANDED,_3.hitch(this,this._handleIsExpanded));},_handleIsExpanded:function(_8){if(_8!=null&&_3.isFunction(_8)){_8(this.viewModel.expanded());}},toggle:function(){if(this.viewModel.expanded()){this.collapse();}else{this.expand();}},collapse:function(){if(this.viewModel.expanded()){this.viewModel.expanded(false);_2.publish(VIEWER_GLOBALS.EVENTS.FOOTER.COLLAPSED);}},expand:function(){if(!this.viewModel.expanded()){this.viewModel.expanded(true);if(this.firstFooterShow){this.onFirstFooterShow();this.firstFooterShow=false;}_2.publish(VIEWER_GLOBALS.EVENTS.FOOTER.EXPANDED);}},setContent:function(_9){_6.place(_9,this.footerContent);},onFirstFooterShow:function(){}});});},"esriviewer/ui/editor/FeatureServiceEditorWindowWidget":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","../window/WindowWidget"],function(_a,_b,_c,_d){return _a([_d],{defaultPositioning:{x:600,y:50},windowWidth:"310px",windowHeaderText:"Feature Edit",windowIconAltText:"Feature Edit",positioningParamName:"featureEdit",windowIconClass:"commonIcons16 pencil",constructor:function(){this.firstShowListener=this.on("firstWindowShow",_c.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/editor/FeatureServiceEditor"],_c.hitch(this,function(_e){this.featureServiceEditor=new _e();this.featureServiceEditor.on("setParentWidth",_c.hitch(this,this.setWindowWidthFromInt));this.setContent(this.featureServiceEditor.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_b.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.FEATURE_EDITOR.SHOW,_c.hitch(this,this.show)));this.subscribes.push(_b.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.FEATURE_EDITOR.HIDE,_c.hitch(this,this.hide)));this.subscribes.push(_b.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.FEATURE_EDITOR.TOGGLE,_c.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.featureServiceEditor){if(this.featureServiceEditor.currentDrawType!=null){this.featureServiceEditor.clearDraw();}}},show:function(){this.inherited(arguments);if(this.featureServiceEditor){this.featureServiceEditor.showFeatureLayers();}}});});},"esriviewer/map/base/LayerQueryTools":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","esri/tasks/QueryTask","esri/tasks/query","esri/tasks/StatisticDefinition","./DistinctQuery"],function(_f,_10,_11,_12,_13,_14,_15){return _f([],{constructor:function(){this.layerFieldsCache={};this.initListeners();},initListeners:function(){this.inherited(arguments);_11.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.QUERY_LAYER,_10.hitch(this,this.handleQueryLayer));_11.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.GET_MIN_MAX_FOR_FIELD,_10.hitch(this,this._handleGetMinMaxForField));_11.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.GET_DISTINCT_FIELD_VALUES,_10.hitch(this,this._handleGetDistinctFieldValues));},_handleGetDistinctFieldValues:function(_16){if(!this._validateParameters(_16)){return;}var _17=new _15();_17.returnGeometry=false;if(_16.whereClause!=null&&_16.whereClause.length>0){_17.where=_16.whereClause;}else{_17.where="1 = 1";}if(_16.geometry!=null){_17.geometry=_16.geometry;}if(_16.distinctField!=null){_17.orderByFields=[_16.distinctField];_17.outFields=[_16.distinctField];}else{if(_16.errback!=null&&_10.isFunction(_16.errback)){_16.errback("Must supply distinct field");return;}}var _18=this._getQueryTask(_16);this._performQuery(_18,_17,function(res){if(!_16.processResponse){_16.callback(res);}else{var _19=[];if(res&&res.features&&res.features.length>0){var _1a;for(var i=0;i<res.features.length;i++){_1a=res.features[i].attributes;_19.push(_1a[_16.distinctField]);}}_16.callback(_19);}},_16.errback);},_validateParameters:function(_1b){if(_1b.layer==null||_1b.layer.url==null){if(_1b.errback!=null&&_10.isFunction(_1b.errback)){_1b.errback("There is no query layer");}return false;}if(_1b.callback==null||!_10.isFunction(_1b.callback)){return false;}if(_1b.errback==null){_1b.errback=_10.hitch(this,this._handleQueryLayerDefaultErrback,_1b.layer);}return true;},_getQueryTask:function(_1c){var _1d=_1c.layer.url;if(_1c.layerId!=null){_1d=VIEWER_UTILS.joinUrl(_1d,_1c.layerId);}return new _12(_1d);},_handleGetMinMaxForField:function(_1e){if(!this._validateParameters(_1e)){return;}var _1f=this._getQueryTask(_1e);var _20=new _13();_20.returnGeometry=false;var _21=[];var _22=new _14();_22.onStatisticField=_1e.minFieldName;_22.outStatisticFieldName="min";_22.statisticType="min";var _23=new _14();_23.onStatisticField=_1e.maxFieldName;_23.outStatisticFieldName="max";_23.statisticType="max";_21.push(_22);_21.push(_23);_20.outStatistics=_21;this._performQuery(_1f,_20,function(res){var min=null;var max=null;if(res&&res.features&&res.features.length>0){min=res.features[0].attributes.min;max=res.features[0].attributes.max;}_1e.callback({min:min,max:max});},_1e.errback);},handleQueryLayer:function(_24){if(!this._validateParameters(_24)){return;}var _25=this._getQueryTask(_24);var _26=new _13();_26.returnGeometry=_24.returnGeometry;if(_24.objectIds!=null&&_24.objectIds.length>0){_26.objectIds=_24.objectIds;}if(_24.whereClause!=null&&_24.whereClause.length>0){_26.where=_24.whereClause;}if(_24.geometry!=null){_26.geometry=_24.geometry;}if(_24.outFields!=null){_26.outFields=_24.outFields;}else{if(_24.returnGeometry){_26.outFields=["*"];}else{var _27=queryUrl.toLowerCase();if(this.layerFieldsCache[_27]==null){if(_24.layerId!=null){var _28=_24.callback;var _29=_24.errback;VIEWER_UTILS.getLayerInfoFromService(_24.layer.url,_24.layerId,_10.hitch(this,function(_2a){var _2b=this._generateOutFieldsFromLayer(_2a);this.layerFieldsCache[_27]=_2b;_26.outFields=_2b;this._performQuery(_25,_26,_28,_29);}));return;}else{var _2c=this._generateOutFieldsFromLayer(_24.layer);this.layerFieldsCache[_27]=_2c;_26.outFields=_2c;}}else{_26.outFields=this.layerFieldsCache[_27];}}}this._performQuery(_25,_26,_24.callback,_24.errback);},_generateOutFieldsFromLayer:function(_2d){if(_2d==null||!_10.isObject(_2d)||_2d.fields==null||!_10.isArray(_2d.fields)){return ["*"];}var _2e=[];var _2f;for(var i=0;i<_2d.fields.length;i++){_2f=_2d.fields[i];if(_2f.type!=VIEWER_GLOBALS.ESRI_FIELD_TYPES.GEOMETRY){_2e.push(_2f.name);}}return _2e;},_performQuery:function(_30,_31,_32,_33){_30.execute(_31,_32,_33);},_handleQueryLayerDefaultErrback:function(_34,err){VIEWER_UTILS.log("Could not perform layer query",VIEWER_GLOBALS.LOG_TYPE.ERROR);_11.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Could not perform layer query");}});});},"esriviewer/ui/toolbar/base/BasemapListingWidget":function(){define(["dojo/_base/declare","dojo/text!./template/BasemapsListingTemplate.html","dojo/topic","dojo/_base/lang","../../base/UITemplatedWidget","./model/BasemapsListingViewModel"],function(_35,_36,_37,_38,_39,_3a){return _35([_39],{templateString:_36,defaultBasemapIcon:"images/thumbs/genericThumbnail.png",postCreate:function(){this.viewModel=new _3a();ko.applyBindings(this.viewModel,this.domNode);this.inherited(arguments);},isVisible:function(){return this.viewModel.visible();},toggle:function(){this.viewModel.visible(!this.viewModel.visible());},show:function(){this.viewModel.visible(true);},hide:function(){this.viewModel.visible(false);},initListeners:function(){this.inherited(arguments);_37.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.ADDED,_38.hitch(this,this.addBasemap));_37.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.REMOVED,_38.hitch(this,this.handleBasemapRemoved));},setBasemaps:function(_3b){var _3c;for(var key in _3b){_3c=_3b[key];this.addBasemap(_3c,key);}_37.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GET_CURRENT,_38.hitch(this,this.handleGetCurrentBasemapResponse));},handleBasemapRemoved:function(key){var _3d=this.viewModel.removeBasemap(key);if(_3d){_37.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GET_CURRENT,_38.hitch(this,this.handleGetCurrentBasemapResponse));}},addBasemap:function(_3e,key){var _3f=_3e.icon!=null?_3e.icon:this.defaultBasemapIcon;this.viewModel.addBasemap({thumbnail:_3f,label:(_3e.label?_3e.label:"Basemap"),key:key});},handleGetCurrentBasemapResponse:function(_40){this.viewModel.setCurrentBasemap(_40);}});});},"esriviewer/base/ConfigurationEntryMixin":function(){define(["dojo/_base/declare"],function(_41){return _41([],{constructor:function(){},loadViewerConfigurationData:function(){}});});},"esriviewer/ui/tools/ViewerDefaultTools":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","dijit/MenuItem"],function(_42,_43,_44,_45){return _42([],{showPlottingWindowMenuIcon:false,showPrintWindowMenuIcon:false,showPortalPublisherWindowMenuIcon:false,showSocialMediaWindowMenuIcon:false,showConfigureWindowMenuItem:false,showLegendWindowMenuItem:false,showPointUploadWindowMenuItem:false,showLoggingWindowMenuItem:false,showDrawWindowMenuItem:false,showTimeSliderMenuItem:false,showFeatureEditorMenuItem:false,showIdentifyMenuItem:false,showQueryBuilderMenuItem:false,showMeasureMenuItem:false,showReverseGeocodeMenuItem:false,showZoomToMenuItem:false,showPortalSearchMenuItem:false,showLayerTransparencyMenuItem:false,showWeatherWindowMenuItem:false,showReflectivityWindowMenuItem:false,constructor:function(_46){_44.mixin(this,_46||{});this.toolsToAdd=[];this.loadViewerConfigurationData();this._createDefaultToolMenuItems();},_createDefaultToolMenuItems:function(){if(this.showDrawWindowMenuItem){this._createMenuItem("commonIcons16 pencil","Draw",_44.hitch(this,this.handleDrawMenuClick));}if(this.showMeasureMenuItem){this._createMenuItem("commonIcons16 triangle","Measure",_44.hitch(this,this.handleMeasureMenuClick));}if(this.showPortalSearchMenuItem){this._createMenuItem("commonIcons16 magnifyingGlass","Search Portal",_44.hitch(this,this.handlePortalSearchMenuClick));}if(this.showZoomToMenuItem){this._createMenuItem("commonIcons16 magnifyingGlass","Zoom To Location",_44.hitch(this,this.handleZoomToLocationClick));}if(this.showIdentifyMenuItem){this._createMenuItem("commonIcons16 information","Identify",_44.hitch(this,this.handleIdentifyMenuClick));}if(this.showWeatherWindowMenuItem){this._createMenuItem("commonIcons16 weather","Weather",_44.hitch(this,this.handleWeatherMenuClick));}if(VIEWER_UTILS.isHtml5FileUploadSupported()&&this.showPointUploadWindowMenuItem){this._createMenuItem("commonIcons16 upload","CSV Point Upload",_44.hitch(this,this.handlePointUploadMenuClick));}if(this.showLegendWindowMenuItem){this._createMenuItem("commonIcons16 list","Legend",_44.hitch(this,this.handleLegendMenuClick));}if(this.showLoggingWindowMenuItem){this._createMenuItem("commonIcons16 list","Logging",_44.hitch(this,this.handleLoggingMenuClick));}if(this.showTimeSliderMenuItem){this._createMenuItem("commonIcons16 clock","Time Slider",_44.hitch(this,this.handleTimeSliderMenuClick));}if(this.showFeatureEditorMenuItem){this._createMenuItem("commonIcons16 pencil","Feature Editor",_44.hitch(this,this.handleFeatureEditorMenuClick));}if(this.showQueryBuilderMenuItem){this._createMenuItem("commonIcons16 sql","Query Builder",_44.hitch(this,this.handleQueryBuilderMenuClick));}if(this.showReverseGeocodeMenuItem){this._createMenuItem("commonIcons16 information","Find Address",_44.hitch(this,this.handleReverseGeocodeMenuClick));}if(this.showSocialMediaWindowMenuIcon){this._createMenuItem("commonIcons16 binoculars","Social Media",_44.hitch(this,this.handleSocialMediaMenuClick));}if(this.showReflectivityWindowMenuItem){this._createMenuItem("commonIcons16 weather","Reflectivity",_44.hitch(this,this.handleReflectivityMenuClick));}if(this.showLayerTransparencyMenuItem){this._createMenuItem("commonIcons16 slider","Transparency",_44.hitch(this,this.handleLayerTransparencyMenuClick));}if(this.showPortalPublisherWindowMenuIcon){this._createMenuItem("commonIcons16 worldAdd","Publish Web Map",_44.hitch(this,this.handlePortalPublisherMenuClick));}if(this.showPrintWindowMenuIcon){this._createMenuItem("commonIcons16 print","Print",_44.hitch(this,this.handlePrintMenuClick));}if(this.showPlottingWindowMenuIcon){this._createMenuItem("commonIcons16 pushpin","Plotting",_44.hitch(this,this.handlePlottingMenuClick));}this.sortAndAddTools();},sortAndAddTools:function(){this.toolsToAdd.sort(function(a,b){return a.label.localeCompare(b.label);});for(var i=0;i<this.toolsToAdd.length;i++){_43.publish(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.ADD_TOOL,this.toolsToAdd[i]);}},_createMenuItem:function(_47,_48,_49){var _4a=new _45({iconClass:_47,label:_48,onClick:_49});this.toolsToAdd.push(_4a);},handleTimeSliderMenuClick:function(){_43.publish(VIEWER_GLOBALS.EVENTS.MAP.TIME.SHOW_TIME_SLIDER);},handleLayerTransparencyMenuClick:function(){_43.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.TRANSPARENCY.WINDOW.SHOW);},handleDrawMenuClick:function(){_43.publish(VIEWER_GLOBALS.EVENTS.WINDOW.DRAW.SHOW);},handleFeatureEditorMenuClick:function(){_43.publish(VIEWER_GLOBALS.EVENTS.WINDOW.FEATURE_EDITOR.SHOW);},handleQueryBuilderMenuClick:function(){_43.publish(VIEWER_GLOBALS.EVENTS.WINDOW.QUERY_BUILDER.SHOW);},handleMeasureMenuClick:function(){_43.publish(VIEWER_GLOBALS.EVENTS.WINDOW.MEASURE.SHOW);},handleIdentifyMenuClick:function(){_43.publish(VIEWER_GLOBALS.EVENTS.WINDOW.IDENTIFY.SHOW);},handleReverseGeocodeMenuClick:function(){_43.publish(VIEWER_GLOBALS.EVENTS.WINDOW.REVERSE_GEOCODE.SHOW);},handlePortalSearchMenuClick:function(){_43.publish(VIEWER_GLOBALS.EVENTS.WINDOW.PORTAL_SEARCH.SHOW);},loadViewerConfigurationData:function(){var _4b=null;_43.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"logging",function(_4c){_4b=_4c;});if(_4b&&_44.isObject(_4b)&&_4b.window!=null){this.showLoggingWindowMenuItem=_4b.window.create==null?false:_4b.window.create;}var _4d=null;_43.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"configureWidget",function(_4e){_4d=_4e;});if(_4d){this.showConfigureWindowMenuItem=_4d.create==null||_4d.create!=false;}var _4f=null;_43.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_50){_4f=_50;});if(_4f){if(_4f.legend==null||_4f.legend.create!=false){this.showLegendWindowMenuItem=true;}}var _51=null;_43.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"socialMediaWidget",function(_52){_51=_52;});if(_51!=null&&_44.isObject(_51)&&_51.create==true){this.showSocialMediaWindowMenuIcon=true;}var _53=null;_43.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"drawWidget",function(_54){_53=_54;});if(_53!=null&&_44.isObject(_53)&&_53.create==true){this.showDrawWindowMenuItem=true;}var _55=null;_43.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"timeSliderWidget",function(_56){_55=_56;});if(_55!=null&&_44.isObject(_55)&&_55.create==true){this.showTimeSliderMenuItem=true;}var _57=null;_43.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"featureEditorWidget",function(_58){_57=_58;});this.showFeatureEditorMenuItem=_57&&_57.service&&_57.service.url;var _59=null;_43.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"identifyWidget",function(_5a){_59=_5a;});if(_59!=null&&_44.isObject(_59)&&_59.create==true){this.showIdentifyMenuItem=true;}var _5b=null;_43.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"layersTransparencyWidget",function(_5c){_5b=_5c;});if(_5b!=null&&_44.isObject(_5b)&&_5b.create==true){this.showLayerTransparencyMenuItem=true;}var _5d=null;_43.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"zoomToWidget",function(_5e){_5d=_5e;});if(_5d!=null&&_44.isObject(_5d)&&_5d.create==true){this.showZoomToMenuItem=true;}var _5f=null;_43.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"reflectivityWidget",function(_60){_5f=_60;});this.showReflectivityWindowMenuItem=_5f!=null&&_44.isObject(_5f)&&_5f.create===true;var _61=null;_43.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"weatherWidget",function(_62){_61=_62;});this.showWeatherWindowMenuItem=_61!=null&&_44.isObject(_61)&&_61.create===true;var _63=null;_43.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"printWidget",function(_64){_63=_64;});this.showPrintWindowMenuIcon=_63!=null&&_44.isObject(_63)&&_63.create===true&&_63.printTaskUrl!=null;var _65=null;_43.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"pointUploadWidget",function(_66){_65=_66;});this.showPointUploadWindowMenuItem=_65!=null&&_44.isObject(_65)&&_65.create===true;var _67=null;_43.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"queryBuilder",function(_68){_67=_68;});this.showQueryBuilderMenuItem=_67!=null&&_44.isObject(_67)&&_67.create===true;var _69=null;_43.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"geometryServiceUrl",function(_6a){_69=_6a;});if(_69!=null){var _6b=null;_43.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"measureWidget",function(_6c){_6b=_6c;});if(_6b&&_44.isObject(_6b)){if(_6b.create==true){this.showMeasureMenuItem=true;}}}var _6d=null;_43.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"locators",function(_6e){_6d=_6e;});if(_6d==null||!_44.isArray(_6d)||_6d.length==0){this.showReverseGeocodeMenuItem=false;}else{var _6f=null;_43.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"reverseGeocodeWidget",function(_70){_6f=_70;});this.showReverseGeocodeMenuItem=_6f&&_44.isObject(_6f)&&_6f.create==true;}var _71=null;_43.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"portal",function(_72){_71=_72;});if(_71==null||!_44.isObject(_71)){this.showPortalSearchMenuItem=false;this.showPortalPublisherWindowMenuIcon=false;}else{var _73=null;_43.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"portalSearchWidget",function(_74){_73=_74;});this.showPortalSearchMenuItem=_73&&_44.isObject(_73)&&_73.create==true;var _75=null;_43.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"portalPublisher",function(_76){_75=_76;});this.showPortalPublisherWindowMenuIcon=_75&&_44.isObject(_75)&&_75.window&&_75.window.create==true;}var _77=null;_43.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"plottingWidget",function(_78){_77=_78;});this.showPlottingWindowMenuIcon=_77&&_44.isObject(_77)&&_77.create==true;},createConfigurationMenuItem:function(){if(this.showConfigureWindowMenuItem!=false){this._createConfigureMenuItem();}},handlePortalPublisherMenuClick:function(){_43.publish(VIEWER_GLOBALS.EVENTS.WINDOW.PORTAL_PUBLISH.SHOW);},handlePrintMenuClick:function(){_43.publish(VIEWER_GLOBALS.EVENTS.WINDOW.PRINT.SHOW);},handlePlottingMenuClick:function(){_43.publish(VIEWER_GLOBALS.EVENTS.WINDOW.PLOTTING.SHOW);},handleLoggingMenuClick:function(){_43.publish(VIEWER_GLOBALS.EVENTS.LOGGING.WINDOW.SHOW);},handleZoomToLocationClick:function(){_43.publish(VIEWER_GLOBALS.EVENTS.WINDOW.ZOOM_TO.SHOW);},handleSocialMediaMenuClick:function(){_43.publish(VIEWER_GLOBALS.EVENTS.WINDOW.SOCIAL_MEDIA.SHOW);},handleReflectivityMenuClick:function(){_43.publish(VIEWER_GLOBALS.EVENTS.WINDOW.REFLECTIVITY.SHOW);},handlePointUploadMenuClick:function(){_43.publish(VIEWER_GLOBALS.EVENTS.WINDOW.POINT_UPLOAD.SHOW);},handleWeatherMenuClick:function(){_43.publish(VIEWER_GLOBALS.EVENTS.WINDOW.WEATHER.SHOW);},handleLegendMenuClick:function(){_43.publish(VIEWER_GLOBALS.EVENTS.WINDOW.LEGEND.SHOW);},_createConfigureMenuItem:function(){var _79=new _45({iconClass:"commonIcons16 gear",label:"Configure",onClick:_44.hitch(this,this.handleConfigureMenuClick)});_43.publish(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.ADD_TOOL,_79);},handleConfigureMenuClick:function(){_43.publish(VIEWER_GLOBALS.EVENTS.CONFIGURE.WINDOW.SHOW);}});});},"esriviewer/ui/draw/base/GraphicsListWidget":function(){define(["dojo/_base/declare","dojo/text!./template/GraphicsListingTemplate.html","../../base/UITemplatedWidget","dojo/_base/lang","../../tooltip/ConfirmTooltip","./model/GraphicsListViewModel","dijit/form/TextBox","dijit/form/Button"],function(_7a,_7b,_7c,_7d,_7e,_7f,_80,_81){return _7a([_7c],{templateString:_7b,graphicsCount:0,saveSupported:false,allGraphicsOff:false,constructor:function(_82){_7d.mixin(this,_82||{});this.typeLabelLookup={};this.typeLabelLookup[VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT]="Point";this.typeLabelLookup[VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE]="Line";this.typeLabelLookup[VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON]="Polygon";this.typeLabelLookup[VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_RECTANGLE]="Rectangle";this.typeLabelLookup[VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT]="Text Label";},postCreate:function(){this.inherited(arguments);this.viewModel=new _7f();this.viewModel.saveGraphicsIconVisible(this.saveSupported);this.viewModel.on(this.viewModel.REMOVE_ALL_GRAPHICS,_7d.hitch(this,this.handleRemoveAllGraphics));this.viewModel.on(this.viewModel.REMOVE_GRAPHIC,_7d.hitch(this,this.handleRemoveGraphic));ko.applyBindings(this.viewModel,this.domNode);},handleRemoveAllGraphics:function(){this.onRemoveAllGraphics();},onRemoveAllGraphics:function(){},handleRemoveGraphic:function(_83){this.onRemoveGraphic(_83);},onRemoveGraphic:function(_84){},addGraphic:function(_85){this.viewModel.addedGraphics.push({label:_85.label?_85.label:(this.typeLabelLookup[_85.type]+" "+VIEWER_UTILS.getTimeStamp()),graphic:_85.graphic});},showConfirmRemoveAllTooltip:function(){if(this.confirmDeleteAllTooltip==null){this.createConfirmDeleteBookmarkTooltip();}if(this.confirmDeleteAllTooltip){this.confirmDeleteAllTooltip.show();}},createConfirmDeleteBookmarkTooltip:function(){this.confirmDeleteAllTooltip=new _7e({confirmCallback:_7d.hitch(this.viewModel,this.viewModel.removeAllGraphics),aroundNode:this.removeAllGraphicsIcon,displayText:"Delete Graphics? "});this.confirmDeleteAllTooltip.on("hide",_7d.hitch(this,function(){this.deleteBookmarkConfirmedCallback=null;}));},hidePopups:function(){if(this.confirmDeleteAllTooltip){this.confirmDeleteAllTooltip.hide();}},handleSaveGraphicsKeyUp:function(e){if(VIEWER_UTILS.isEnterKey(e)){this.handleSaveGraphics();}},handleSaveGraphics:function(){var _86=this.userSaveGraphicsNameInput.get("value");if(_86!=null&&_86!=""){this.onSaveGraphics(_86,this.viewModel.addedGraphics());this.viewModel.saveGraphicsInputVisible(false);this.userSaveGraphicsNameInput.set("value","");}},getGraphics:function(){var _87=this.viewModel.addedGraphics();var _88=[];for(var i=0;i<_87.length;i++){_88.push(_87[i].graphic);}return _88;},onSaveGraphics:function(_89,_8a){}});});},"esriviewer/ui/layers/LayersWindowWidget":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/dom-class","../window/WindowWidget","./LayersWidget"],function(_8b,_8c,_8d,_8e,_8f,_90){return _8b([_8f],{defaultPositioning:{x:700,y:50},windowWidth:null,windowHeaderText:"Map Layers",windowIconAltText:"Map Layers",windowIconClass:"commonIcons16 layerList",positioningParamName:"layers",constructor:function(){this.firstShowListener=this.on("firstWindowShow",_8d.hitch(this,this.handleFirstWindowShow));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_8c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.WIDGET.SHOW,_8d.hitch(this,this.show)));},handleFirstWindowShow:function(){this.firstShowListener.remove();this.setContent(this.layersWidget.domNode);},postCreate:function(){_8e.add(this.domNode,"layersWindow");_8e.add(this.windowContent,"layersWindowContent");this.layersWidget=new _90();this.inherited(arguments);},show:function(){this.inherited(arguments);this.layersWidget.showLayerList();},hidePopups:function(){this.inherited(arguments);if(this.layersWidget){this.layersWidget.hidePopups();}}});});},"esriviewer/map/base/MapUtils":function(){define(["dojo/_base/declare"],function(_91){return _91([],{});});},"esriviewer/ui/base/UITemplatedWidget":function(){define(["dojo/_base/declare","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","./UIWidget"],function(_92,_93,_94,_95){return _92([_95,_93,_94],{widgetsInTemplate:true});});},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(_96,_97,_98,_99){return _98("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:false,constructor:function(_9a){_99.mixin(this,_9a);this.connects=[];var _9b=this.store;if(!_9b.getFeatures()["dojo.data.api.Identity"]){throw new Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");}if(_9b.getFeatures()["dojo.data.api.Notification"]){this.connects=this.connects.concat([_97.after(_9b,"onNew",_99.hitch(this,"onNewItem"),true),_97.after(_9b,"onDelete",_99.hitch(this,"onDeleteItem"),true),_97.after(_9b,"onSet",_99.hitch(this,"onSetItem"),true)]);}},destroy:function(){var h;while(h=this.connects.pop()){h.remove();}},getRoot:function(_9c,_9d){if(this.root){_9c(this.root);}else{this.store.fetch({query:this.query,onComplete:_99.hitch(this,function(_9e){if(_9e.length!=1){throw new Error("dijit.tree.TreeStoreModel: root query returned "+_9e.length+" items, but must return exactly one");}this.root=_9e[0];_9c(this.root);}),onError:_9d});}},mayHaveChildren:function(_9f){return _96.some(this.childrenAttrs,function(_a0){return this.store.hasAttribute(_9f,_a0);},this);},getChildren:function(_a1,_a2,_a3){var _a4=this.store;if(!_a4.isItemLoaded(_a1)){var _a5=_99.hitch(this,arguments.callee);_a4.loadItem({item:_a1,onItem:function(_a6){_a5(_a6,_a2,_a3);},onError:_a3});return;}var _a7=[];for(var i=0;i<this.childrenAttrs.length;i++){var _a8=_a4.getValues(_a1,this.childrenAttrs[i]);_a7=_a7.concat(_a8);}var _a9=0;if(!this.deferItemLoadingUntilExpand){_96.forEach(_a7,function(_aa){if(!_a4.isItemLoaded(_aa)){_a9++;}});}if(_a9==0){_a2(_a7);}else{_96.forEach(_a7,function(_ab,idx){if(!_a4.isItemLoaded(_ab)){_a4.loadItem({item:_ab,onItem:function(_ac){_a7[idx]=_ac;if(--_a9==0){_a2(_a7);}},onError:_a3});}});}},isItem:function(_ad){return this.store.isItem(_ad);},fetchItemByIdentity:function(_ae){this.store.fetchItemByIdentity(_ae);},getIdentity:function(_af){return this.store.getIdentity(_af);},getLabel:function(_b0){if(this.labelAttr){return this.store.getValue(_b0,this.labelAttr);}else{return this.store.getLabel(_b0);}},newItem:function(_b1,_b2,_b3){var _b4={parent:_b2,attribute:this.childrenAttrs[0]},_b5;if(this.newItemIdAttr&&_b1[this.newItemIdAttr]){this.fetchItemByIdentity({identity:_b1[this.newItemIdAttr],scope:this,onItem:function(_b6){if(_b6){this.pasteItem(_b6,null,_b2,true,_b3);}else{_b5=this.store.newItem(_b1,_b4);if(_b5&&(_b3!=undefined)){this.pasteItem(_b5,_b2,_b2,false,_b3);}}}});}else{_b5=this.store.newItem(_b1,_b4);if(_b5&&(_b3!=undefined)){this.pasteItem(_b5,_b2,_b2,false,_b3);}}},pasteItem:function(_b7,_b8,_b9,_ba,_bb){var _bc=this.store,_bd=this.childrenAttrs[0];if(_b8){_96.forEach(this.childrenAttrs,function(_be){if(_bc.containsValue(_b8,_be,_b7)){if(!_ba){var _bf=_96.filter(_bc.getValues(_b8,_be),function(x){return x!=_b7;});_bc.setValues(_b8,_be,_bf);}_bd=_be;}});}if(_b9){if(typeof _bb=="number"){var _c0=_bc.getValues(_b9,_bd).slice();_c0.splice(_bb,0,_b7);_bc.setValues(_b9,_bd,_c0);}else{_bc.setValues(_b9,_bd,_bc.getValues(_b9,_bd).concat(_b7));}}},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(_c1,_c2){if(!_c2){return;}this.getChildren(_c2.item,_99.hitch(this,function(_c3){this.onChildrenChange(_c2.item,_c3);}));},onDeleteItem:function(_c4){this.onDelete(_c4);},onSetItem:function(_c5,_c6){if(_96.indexOf(this.childrenAttrs,_c6)!=-1){this.getChildren(_c5,_99.hitch(this,function(_c7){this.onChildrenChange(_c5,_c7);}));}else{this.onChange(_c5);}}});});},"dijit/_MenuBase":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/lang","dojo/mouse","dojo/on","dojo/window","./a11yclick","./registry","./_Widget","./_CssStateMixin","./_KeyNavContainer","./_TemplatedMixin"],function(_c8,_c9,dom,_ca,_cb,_cc,_cd,on,_ce,_cf,_d0,_d1,_d2,_d3,_d4){return _c9("dijit._MenuBase",[_d1,_d4,_d3,_d2],{selected:null,_setSelectedAttr:function(_d5){if(this.selected!=_d5){if(this.selected){this.selected._setSelected(false);this._onChildDeselect(this.selected);}if(_d5){_d5._setSelected(true);}this._set("selected",_d5);}},activated:false,_setActivatedAttr:function(val){_cb.toggle(this.domNode,"dijitMenuActive",val);_cb.toggle(this.domNode,"dijitMenuPassive",!val);this._set("activated",val);},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:false,childSelector:function(_d6){var _d7=_d0.byNode(_d6);return _d6.parentNode==this.containerNode&&_d7&&_d7.focus;},postCreate:function(){var _d8=this,_d9=typeof this.childSelector=="string"?this.childSelector:_cc.hitch(this,"childSelector");this.own(on(this.containerNode,on.selector(_d9,_cd.enter),function(){_d8.onItemHover(_d0.byNode(this));}),on(this.containerNode,on.selector(_d9,_cd.leave),function(){_d8.onItemUnhover(_d0.byNode(this));}),on(this.containerNode,on.selector(_d9,_cf),function(evt){_d8.onItemClick(_d0.byNode(this),evt);evt.stopPropagation();evt.preventDefault();}));this.inherited(arguments);},onKeyboardSearch:function(_da,evt,_db,_dc){this.inherited(arguments);if(!!_da&&(_dc==-1||(!!_da.popup&&_dc==1))){this.onItemClick(_da,evt);}},_keyboardSearchCompare:function(_dd,_de){if(!!_dd.shortcutKey){return _de==_dd.shortcutKey.toLowerCase()?-1:0;}return this.inherited(arguments)?1:0;},onExecute:function(){},onCancel:function(){},_moveToPopup:function(evt){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled){this.onItemClick(this.focusedChild,evt);}else{var _df=this._getTopMenu();if(_df&&_df._isMenuBar){_df.focusNext();}}},_onPopupHover:function(){this.set("selected",this.currentPopupItem);this._stopPendingCloseTimer();},onItemHover:function(_e0){if(this.activated){this.set("selected",_e0);if(_e0.popup&&!_e0.disabled&&!this.hover_timer){this.hover_timer=this.defer(function(){this._openItemPopup(_e0);},this.popupDelay);}}else{if(this.passivePopupDelay<Infinity){if(this.passive_hover_timer){this.passive_hover_timer.remove();}this.passive_hover_timer=this.defer(function(){this.onItemClick(_e0,{type:"click"});},this.passivePopupDelay);}}this._hoveredChild=_e0;_e0._set("hovering",true);},_onChildDeselect:function(_e1){this._stopPopupTimer();if(this.currentPopupItem==_e1){this._stopPendingCloseTimer();this._pendingClose_timer=this.defer(function(){this._pendingClose_timer=null;this.currentPopupItem=null;_e1._closePopup();},this.popupDelay);}},onItemUnhover:function(_e2){if(this._hoveredChild==_e2){this._hoveredChild=null;}if(this.passive_hover_timer){this.passive_hover_timer.remove();this.passive_hover_timer=null;}_e2._set("hovering",false);},_stopPopupTimer:function(){if(this.hover_timer){this.hover_timer=this.hover_timer.remove();}},_stopPendingCloseTimer:function(){if(this._pendingClose_timer){this._pendingClose_timer=this._pendingClose_timer.remove();}},_getTopMenu:function(){for(var top=this;top.parentMenu;top=top.parentMenu){}return top;},onItemClick:function(_e3,evt){if(this.passive_hover_timer){this.passive_hover_timer.remove();}this.focusChild(_e3);if(_e3.disabled){return false;}if(_e3.popup){this.set("selected",_e3);this.set("activated",true);var _e4=/^key/.test(evt._origType||evt.type)||(evt.clientX==0&&evt.clientY==0);this._openItemPopup(_e3,_e4);}else{this.onExecute();_e3._onClick?_e3._onClick(evt):_e3.onClick(evt);}},_openItemPopup:function(_e5,_e6){if(_e5==this.currentPopupItem){return;}if(this.currentPopupItem){this._stopPendingCloseTimer();this.currentPopupItem._closePopup();}this._stopPopupTimer();var _e7=_e5.popup;_e7.parentMenu=this;this.own(this._mouseoverHandle=on.once(_e7.domNode,"mouseover",_cc.hitch(this,"_onPopupHover")));var _e8=this;_e5._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){if(_e6){_e8.focusChild(_e5);}_e8._cleanUp();},onExecute:_cc.hitch(this,"_cleanUp",true),onClose:function(){if(_e8._mouseoverHandle){_e8._mouseoverHandle.remove();delete _e8._mouseoverHandle;}}},_e6);this.currentPopupItem=_e5;},onOpen:function(){this.isShowingNow=true;this.set("activated",true);},onClose:function(){this.set("activated",false);this.set("selected",null);this.isShowingNow=false;this.parentMenu=null;},_closeChild:function(){this._stopPopupTimer();if(this.currentPopupItem){if(this.focused){_ca.set(this.selected.focusNode,"tabIndex",this.tabIndex);this.selected.focusNode.focus();}this.currentPopupItem._closePopup();this.currentPopupItem=null;}},_onItemFocus:function(_e9){if(this._hoveredChild&&this._hoveredChild!=_e9){this.onItemUnhover(this._hoveredChild);}this.set("selected",_e9);},_onBlur:function(){this._cleanUp(true);this.inherited(arguments);},_cleanUp:function(_ea){this._closeChild();if(typeof this.isShowingNow=="undefined"){this.set("activated",false);}if(_ea){this.set("selected",null);}}});});},"esriviewer/ui/logging/model/LoggingViewModel":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(_eb,_ec){return _eb([],{constructor:function(){this.infoDisplayed=ko.observable(false);this.warningDisplayed=ko.observable(true);this.errorDisplayed=ko.observable(true);this.logEntries=ko.observableArray();this.hasLogEntries=ko.computed(_ec.hitch(this,this._hasEntries));this.filteredEntries=ko.computed(_ec.hitch(this,this._filteredEntries));},_hasEntries:function(){return this.logEntries().length>0;},_filteredEntries:function(){var _ed=[];var _ee=this.logEntries();var _ef;for(var i=0;i<_ee.length;i++){_ef=_ee[i];if(_ef.type===VIEWER_GLOBALS.LOG_TYPE.ERROR&&this.errorDisplayed()){_ed.push(_ef);}else{if(_ef.type===VIEWER_GLOBALS.LOG_TYPE.WARNING&&this.warningDisplayed()){_ed.push(_ef);}else{if(_ef.type===VIEWER_GLOBALS.LOG_TYPE.INFO&&this.infoDisplayed()){_ed.push(_ef);}}}}return _ed;}});});},"esriviewer/ui/tooltip/ConfirmTooltip":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","dojo/dom-construct","dijit/TooltipDialog","../base/UIWidget"],function(_f0,_f1,on,_f2,_f3,_f4){return _f0([_f4],{optionClassName:"confirmTooltipOptionText",contentHeaderLabelClassName:"confirmTooltipContentLbl",defaultYesLabel:"Yes",defaultNoLabel:"No",defaultDisplayText:"Confirm:",visible:false,constructor:function(_f5){this.confirmCallback=null;_f1.mixin(this,_f5||{});this._createTooltip();},getYesLabel:function(){return this.yesLabel==null?this.defaultYesLabel:this.yesLabel;},getNoLabel:function(){return this.noLabel==null?this.defaultNoLabel:this.noLabel;},getDisplayText:function(){return this.displayText==null?this.defaultDisplayText:this.displayText;},getConfirmCallback:function(){return this.confirmCallback;},hasConfirmCallback:function(){return this.confirmCallback!=null&&_f1.isFunction(this.confirmCallback);},onTooltipCreated:function(_f6){},setAtMouseEvent:function(evt){this.aroundNode=null;this.mouseEvent=evt;},setAroundNode:function(_f7){this.aroundNode=_f7;this.mouseEvent=null;},hasAroundNode:function(){return this.aroundNode!=null;},hasMouseEvent:function(){return this.mouseEvent!=null;},_createTooltip:function(){if(!this.hasConfirmCallback()){this.onError("must provide a confirm callback");return;}var _f8=_f2.create("div");var _f9=_f2.create("span",{innerHTML:this.getDisplayText(),className:this.contentHeaderLabelClassName});var _fa=_f2.create("span",{innerHTML:this.getYesLabel(),className:this.optionClassName});var _fb=_f2.create("span",{innerHTML:this.getNoLabel(),className:this.optionClassName});_f2.place(_f9,_f8);_f2.place(_fa,_f8);_f2.place(_fb,_f8);this.tooltip=new _f3({content:_f8});this.tooltip.on("close",_f1.hitch(this,function(){this.visible=false;}));var _fc=this.getConfirmCallback();var _fd=_f1.hitch(this,function(){this.confirmCallback();this.hide();});on(_fa,"click",_fd);on(_fb,"click",_f1.hitch(this,this.hide));this.onTooltipCreated(this.tooltip);},show:function(){if(!this.hasAroundNode()&&!this.hasMouseEvent()){this.onError("No Position passed for popup");return;}var _fe={popup:this.tooltip};if(this.aroundNode){_fe.around=this.aroundNode;}if(this.mouseEvent){_fe.x=(this.mouseEvent.pageX!=null?this.mouseEvent.pageX:this.mouseEvent.clientX)+5;_fe.y=(this.mouseEvent.pageY!=null?this.mouseEvent.pageY:this.mouseEvent.clientY)+5;}if(this.tooltip){dijit.popup.open(_fe);this.visible=true;}},hide:function(){if(this.tooltip){dijit.popup.close(this.tooltip);this.onHide();this.visible=false;}},onHide:function(){},onError:function(_ff){}});});},"esriviewer/ui/bookmark/BookmarkController":function(){define(["dojo/_base/declare","dojo/topic","dojo/has","dojo/cookie","dojo/_base/json","dojo/_base/lang","./CreateBookmarkWidget"],function(_100,_101,has,_102,json,lang,_103){return _100([],{cookieExpiration:365,cookieMode:false,constructor:function(){this.initListeners();if(!(has("ie")<8)){this.storageProvider=dojox.storage.manager.getProvider();this.cookieMode=false;}else{this.storageProvider=null;this.cookieMode=true;}this.bookmarks=this.initializeBookmarks();if(this.bookmarks==null||!lang.isObject(this.bookmarks)){this.bookmarks={};}},initListeners:function(){_101.subscribe(VIEWER_GLOBALS.EVENTS.BOOKMARK.CREATED,lang.hitch(this,this.handleSaveBookmark));_101.subscribe(VIEWER_GLOBALS.EVENTS.BOOKMARK.STORAGE.GET,lang.hitch(this,this.handleGetBookmarks));_101.subscribe(VIEWER_GLOBALS.EVENTS.BOOKMARK.CREATE_WINDOW.SHOW,lang.hitch(this,this.showCreateBookmarkDisplay));_101.subscribe(VIEWER_GLOBALS.EVENTS.BOOKMARK.REMOVED,lang.hitch(this,this.removeBookmark));_101.subscribe(VIEWER_GLOBALS.EVENTS.BOOKMARK.DELETE_STORED,lang.hitch(this,this._deleteStoredBookmarks));},removeBookmark:function(_104){if(this.bookmarks!=null&&lang.isObject(this.bookmarks)&&this.bookmarks[_104]!=null){delete this.bookmarks[_104];this._persistBookmarks();}},handleSaveBookmark:function(_105){if(_105==null||!lang.isObject(_105)){return;}var _106=false;for(var key in _105){this.bookmarks[key]=_105[key];_106=true;}if(_106){this._persistBookmarks();}},_persistBookmarks:function(){if(!this.cookieMode){this._persistToLocalStorage();}else{this._persistToCookies();}},_persistToLocalStorage:function(){this.storageProvider.put(VIEWER_GLOBALS.STORAGE.LABELS.BOOKMARKS,this.bookmarks);},_persistToCookies:function(){_102(VIEWER_GLOBALS.STORAGE.LABELS.BOOKMARKS,json.toJson(this.bookmarks),{expires:this.cookieExpiration});},_deleteStoredBookmarks:function(){if(!this.cookieMode){this.storageProvider.remove(VIEWER_GLOBALS.STORAGE.LABELS.BOOKMARKS);}else{_102(VIEWER_GLOBALS.STORAGE.LABELS.BOOKMARKS,{},{expire:-1});}},handleGetBookmarks:function(_107){if(_107==null||!lang.isFunction(_107)){return;}_107(this.bookmarks);},initializeBookmarks:function(){if(!this.cookieMode){return this._initializeLocalStorageBookmarks();}else{return this._initializeCookieBookmarks();}},_initializeCookieBookmarks:function(){var _108=_102(VIEWER_GLOBALS.STORAGE.LABELS.BOOKMARKS);if(_108!=null&&_108!=""){return json.fromJson(_108);}return {};},_initializeLocalStorageBookmarks:function(){if(this.storageProvider.hasKey(VIEWER_GLOBALS.STORAGE.LABELS.BOOKMARKS)){return this.storageProvider.get(VIEWER_GLOBALS.STORAGE.LABELS.BOOKMARKS);}return {};},showCreateBookmarkDisplay:function(){if(this.createBookmarkWidget==null){this.createBookmarkWidget=new _103();_101.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.CREATE_BOOOKMARK,this.createBookmarkWidget);}this.createBookmarkWidget.show();}});});},"esriviewer/ui/plotting/PlottingWidgetWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/dom-class","../window/WindowWidget"],function(_109,lang,_10a,_10b,_10c){return _109([_10c],{defaultPositioning:{x:600,y:125},windowWidth:"300px",windowHeaderText:"Plot Coordinates",windowIconAltText:"Plot Coordinates",windowIconClass:"commonIcons16 pushpin",positioningParamName:"plotting",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_10b.add(this.windowContent,"plottingWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/plotting/PlottingWidget"],lang.hitch(this,function(_10d){this.plottingWidget=new _10d();this.setContent(this.plottingWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_10a.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PLOTTING.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_10a.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PLOTTING.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_10a.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PLOTTING.TOGGLE,lang.hitch(this,this.toggle)));}});});},"esriviewer/ui/toolbar/base/BookmarkListingWidget":function(){define(["dojo/_base/declare","dojo/text!./template/BookmarkListingTemplate.html","dojo/topic","dojo/_base/lang","../../tooltip/ConfirmTooltip","../../base/UITemplatedWidget","./model/BookmarkListingViewModel","esri/geometry/Point"],function(_10e,_10f,_110,lang,_111,_112,_113,_114){return _10e([_112],{allowBookmarkCreation:true,templateString:_10f,initListeners:function(){this.inherited(arguments);_110.subscribe(VIEWER_GLOBALS.EVENTS.BOOKMARK.CREATED,lang.hitch(this,this.handleBookmarkCreated));},postCreate:function(){this.inherited(arguments);this.viewModel=new _113();this.viewModel.showCreateBookmarkIcon(this.allowBookmarkCreation);this.viewModel.on(this.viewModel.SHOW_CREATE_BOOKMARK,lang.hitch(this,this.handleShowCreateBookmarkView));this.viewModel.on(this.viewModel.REMOVE_BOOKMARK_REQUEST,lang.hitch(this,this.handleRemoveBookmarkRequest));ko.applyBindings(this.viewModel,this.domNode);},loadViewerConfigurationData:function(){var _115=null;_110.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"bookmarks",function(_116){_115=_116;});if(_115&&_115.allowCreation!=null&&_115.allowCreation==false){this.allowBookmarkCreation=false;}},isVisible:function(){return this.viewModel.visible();},toggle:function(){if(this.viewModel.visible()){this.hide();}else{this.show();}},show:function(){this.viewModel.visible(true);},hide:function(){this.hidePopups();this.viewModel.visible(false);},handleBookmarkCreated:function(_117){this.addBookmarks(_117,true);this.viewModel.sortRemovable();},addStaticBookmarks:function(_118){this.addBookmarks(_118,false);this.viewModel.sortStatic();this.viewModel.ignoreAddAnimation=false;},addBookmarks:function(_119,_11a){if(_11a==null){_11a=false;}var _11b;for(var key in _119){_11b=_119[key];if(!this.isValidBookmark(_11b)){continue;}var _11c=lang.mixin({key:key},_11b);_11c.point=new _114({x:_11b.point.x,y:_11b.point.y,spatialReference:_11b.point.spatialReference});if(_11a){this.viewModel.addRemovableBookmark(_11c);}else{this.viewModel.addBookmark(_11c);}}},isValidBookmark:function(_11d){if(_11d.label!=null&&_11d.label!=""){if(_11d.zoomLevel!=null){var pt=_11d.point;if(pt.x!=null&&pt.y!=null&&pt.spatialReference!=null&&pt.spatialReference.wkid!=null){return true;}}}return false;},handleRemoveBookmarkRequest:function(_11e,evt){if(_11e!=null){this.deleteBookmarkConfirmedCallback=lang.hitch(this,function(_11f){VIEWER_UTILS.log("Bookmark Deleted: "+_11f.label,VIEWER_GLOBALS.LOG_TYPE.INFO);_110.publish(VIEWER_GLOBALS.EVENTS.BOOKMARK.REMOVED,_11f.key);this.viewModel.removeBookmark(_11f);},_11e);this.showDeleteBookmarkTooltip(evt);}},loadCookieBookmarks:function(){_110.publish(VIEWER_GLOBALS.EVENTS.BOOKMARK.STORAGE.GET,lang.hitch(this,this.handleLocalStorageBookmarksLoaded));},handleLocalStorageBookmarksLoaded:function(_120){this.addBookmarks(_120,true);this.viewModel.sortRemovable();},handleShowCreateBookmarkView:function(){_110.publish(VIEWER_GLOBALS.EVENTS.BOOKMARK.CREATE_WINDOW.SHOW);},createConfirmDeleteBookmarkTooltip:function(){this.confirmDeleteBookmarkTooltip=new _111({confirmCallback:lang.hitch(this,this.handleConfirmedBookmarkDelete)});this.confirmDeleteBookmarkTooltip.on("hide",lang.hitch(this,function(){this.deleteBookmarkConfirmedCallback=null;}));},handleConfirmedBookmarkDelete:function(){if(this.deleteBookmarkConfirmedCallback!=null&&lang.isFunction(this.deleteBookmarkConfirmedCallback)){this.deleteBookmarkConfirmedCallback();this.deleteBookmarkConfirmedCallback=null;}},showDeleteBookmarkTooltip:function(evt){if(this.confirmDeleteBookmarkTooltip==null){this.createConfirmDeleteBookmarkTooltip();}if(this.confirmDeleteBookmarkTooltip){this.confirmDeleteBookmarkTooltip.setAtMouseEvent(evt);this.confirmDeleteBookmarkTooltip.show();}},hidePopups:function(){if(this.confirmDeleteBookmarkTooltip){this.confirmDeleteBookmarkTooltip.hide();}}});});},"dojox/storage/WhatWGStorageProvider":function(){define(["dijit","dojo","dojox","dojo/require!dojox/storage/Provider,dojox/storage/manager"],function(_121,dojo,_122){dojo.provide("dojox.storage.WhatWGStorageProvider");dojo.require("dojox.storage.Provider");dojo.require("dojox.storage.manager");dojo.declare("dojox.storage.WhatWGStorageProvider",[_122.storage.Provider],{initialized:false,_domain:null,_available:null,_statusHandler:null,_allNamespaces:null,_storageEventListener:null,initialize:function(){if(dojo.config["disableWhatWGStorage"]==true){return;}this._domain=location.hostname;this.initialized=true;_122.storage.manager.loaded();},isAvailable:function(){try{var _123=globalStorage[location.hostname];}catch(e){this._available=false;return this._available;}this._available=true;return this._available;},put:function(key,_124,_125,_126){if(this.isValidKey(key)==false){throw new Error("Invalid key given: "+key);}_126=_126||this.DEFAULT_NAMESPACE;key=this.getFullKey(key,_126);this._statusHandler=_125;if(dojo.isString(_124)){_124="string:"+_124;}else{_124=dojo.toJson(_124);}var _127=dojo.hitch(this,function(evt){window.removeEventListener("storage",_127,false);if(_125){_125.call(null,this.SUCCESS,key,null,_126);}});window.addEventListener("storage",_127,false);try{var _128=globalStorage[this._domain];_128.setItem(key,_124);}catch(e){this._statusHandler.call(null,this.FAILED,key,e.toString(),_126);}},get:function(key,_129){if(this.isValidKey(key)==false){throw new Error("Invalid key given: "+key);}_129=_129||this.DEFAULT_NAMESPACE;key=this.getFullKey(key,_129);var _12a=globalStorage[this._domain];var _12b=_12a.getItem(key);if(_12b==null||_12b==""){return null;}_12b=_12b.value;if(dojo.isString(_12b)&&(/^string:/.test(_12b))){_12b=_12b.substring("string:".length);}else{_12b=dojo.fromJson(_12b);}return _12b;},getNamespaces:function(){var _12c=[this.DEFAULT_NAMESPACE];var _12d={};var _12e=globalStorage[this._domain];var _12f=/^__([^_]*)_/;for(var i=0;i<_12e.length;i++){var _130=_12e.key(i);if(_12f.test(_130)==true){var _131=_130.match(_12f)[1];if(typeof _12d[_131]=="undefined"){_12d[_131]=true;_12c.push(_131);}}}return _12c;},getKeys:function(_132){_132=_132||this.DEFAULT_NAMESPACE;if(this.isValidKey(_132)==false){throw new Error("Invalid namespace given: "+_132);}var _133;if(_132==this.DEFAULT_NAMESPACE){_133=new RegExp("^([^_]{2}.*)$");}else{_133=new RegExp("^__"+_132+"_(.*)$");}var _134=globalStorage[this._domain];var _135=[];for(var i=0;i<_134.length;i++){var _136=_134.key(i);if(_133.test(_136)==true){_136=_136.match(_133)[1];_135.push(_136);}}return _135;},clear:function(_137){_137=_137||this.DEFAULT_NAMESPACE;if(this.isValidKey(_137)==false){throw new Error("Invalid namespace given: "+_137);}var _138;if(_137==this.DEFAULT_NAMESPACE){_138=new RegExp("^[^_]{2}");}else{_138=new RegExp("^__"+_137+"_");}var _139=globalStorage[this._domain];var keys=[];for(var i=0;i<_139.length;i++){if(_138.test(_139.key(i))==true){keys[keys.length]=_139.key(i);}}dojo.forEach(keys,dojo.hitch(_139,"removeItem"));},remove:function(key,_13a){key=this.getFullKey(key,_13a);var _13b=globalStorage[this._domain];_13b.removeItem(key);},isPermanent:function(){return true;},getMaximumSize:function(){return this.SIZE_NO_LIMIT;},hasSettingsUI:function(){return false;},showSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},hideSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},getFullKey:function(key,_13c){_13c=_13c||this.DEFAULT_NAMESPACE;if(this.isValidKey(_13c)==false){throw new Error("Invalid namespace given: "+_13c);}if(_13c==this.DEFAULT_NAMESPACE){return key;}else{return "__"+_13c+"_"+key;}}});_122.storage.manager.register("dojox.storage.WhatWGStorageProvider",new _122.storage.WhatWGStorageProvider());});},"esriviewer/ui/toolbar/base/LocatorToolbarSupportMixin":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/on","dojo/dom-attr","dojo/dom-construct","dojo/dom-style","../../../base/LocationSupport","dijit/TooltipDialog","dijit/form/RadioButton","esri/geometry/Extent","esri/SpatialReference"],function(_13d,_13e,lang,on,_13f,_140,_141,_142,_143,_144,_145,_146){return _13d([_142],{showLocator:true,pointAddressAttributeLabel:"PointAddress",candidateAttributeLocationWKID:4326,constructor:function(){this.locatorLookup={};},onLocateBlur:function(){var val=_13f.get(this.locateTextBox,"value");if(val==""){_13f.set(this.locateTextBox,"value",this.locateDefaultInput);_141.set(this.locateTextBox,"color","#878787");}},initLocatorListeners:function(){on(this.locateTextBox,"blur",lang.hitch(this,this.onLocateBlur));on(this.locateTextBox,"focus",lang.hitch(this,this.onLocateFocus));on(this.locateTextBox,"keyup",lang.hitch(this,this.onLocateTextKeyUp));on(this.locateButton,"click",lang.hitch(this,this.handleLocationSearchRequest));_13e.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_ADDED,lang.hitch(this,this.handleLocatorAdded));_13e.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_REMOVED,lang.hitch(this,this.handleLocatorRemoved));},loadCurrentLocators:function(){var _147=null;_13e.publish(VIEWER_GLOBALS.EVENTS.LOCATOR.GET_LOCATORS,function(_148){_147=_148;});if(_147!=null&&lang.isArray(_147)&&_147.length>0){for(var i=0;i<_147.length;i++){this._addLocatorToLocatorConfiguration(_147[i].locator,_147[i].label);}if(this.showLocator){_141.set(this.locateToolbarContainer,"display","inline");}}else{}},handleLocatorAdded:function(_149){if(this.showLocator){_141.set(this.locateToolbarContainer,"display","inline");}this._addLocatorToLocatorConfiguration(_149.locator,_149.label);},_addLocatorToLocatorConfiguration:function(_14a,_14b){if(this.configureLocatorTooltip==null){this.createConfigureLocatorTooltip();}var _14c=_14a.url.toLowerCase();if(this.locatorLookup[_14c]!=null){return;}var _14d=new _144({name:"locatorConfigureRadioEntry"});var _14e=(_14b!=null&&_14b!="")?_14b:REG_EXP_UTILS.getServiceNameFromUrl(_14a.url);var _14f=_140.create("span",{innerHTML:_14e,className:"locatorConfigurationEntryLabel"});var _150=_140.create("div",{className:"locatorConfigurationEntry"});_140.place(_14d.domNode,_150);_140.place(_14f,_150);_140.place(_150,this.configureLocatorContent);_141.set(this.configureLocatorNoLocatorsText,"display","none");this.locatorLookup[_14c]={locator:_14a,container:_150,radio:_14d};var _151=0;for(var key in this.locatorLookup){_151++;}if(_151==1){_14d.set("checked","true");}},handleLocatorRemoved:function(_152){if(this.locatorLookup[_152]!=null){_140.destroy(this.locatorLookup[_152].container);delete this.locatorLookup[_152];var _153=false;for(var key in this.locatorLookup){_153=true;break;}if(_153){_141.set(this.configureLocatorNoLocatorsText,"display","none");}else{_141.set(this.configureLocatorNoLocatorsText,"display","block");}}},onLocateFocus:function(){var val=_13f.get(this.locateTextBox,"value");if(val==this.locateDefaultInput){_13f.set(this.locateTextBox,"value","");_141.set(this.locateTextBox,"color","black");}},onLocateTextKeyUp:function(e){if(VIEWER_UTILS.isEnterKey(e)){this.handleLocationSearchRequest();}},handleLocationSearchRequest:function(){var _154=_13f.get(this.locateTextBox,"value");if(_154!=null&&_154!=""&&_154!=this.locateDefaultInput){var _155;var _156;for(var key in this.locatorLookup){_155=this.locatorLookup[key];if(_155.radio.get("checked")){_156=_155;break;}}if(_156){this.handleLocate(_154,_156.locator);}}},handleLocationResponse:function(_157){if(lang.isArray(_157)&&_157.length>0){var _158=_157[0];if(lang.isObject(_158.attributes)){var _159;var _15a;var _15b;var _15c;var _15d;if(_158.attributes.North_Lat!=null&&_158.attributes.South_Lat!=null&&_158.attributes.West_Lon!=null&&_158.attributes.East_Lon!=null){try{_159=parseFloat(_158.attributes.West_Lon);_15a=parseFloat(_158.attributes.South_Lat);_15b=parseFloat(_158.attributes.East_Lon);_15c=parseFloat(_158.attributes.North_Lat);_15d=new _145(_159,_15a,_15b,_15c,new _146(this.candidateAttributeLocationWKID));_13e.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,_15d);return;}catch(err){}}if(_158.attributes.Ymax!=null&&_158.attributes.Xmax!=null&&_158.attributes.Xmin!=null&&_158.attributes.Ymin!=null){try{_159=parseFloat(_158.attributes.Xmin);_15a=parseFloat(_158.attributes.Ymin);_15b=parseFloat(_158.attributes.Xmax);_15c=parseFloat(_158.attributes.Ymax);_15d=new _145(_159,_15a,_15b,_15c,new _146(this.candidateAttributeLocationWKID));_13e.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,_15d);return;}catch(err){}}if(_158.attributes.MatchLevel!=null&&_158.location){var _15e=_158.attributes.MatchLevel;var _15f=null;if(_15e!=null){if(_15e===this.pointAddressAttributeLabel){_15f={};_15f.deepest=true;}}_13e.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PAN_TO,_158.location,_15f);return;}}if(_158.location!=null){_13e.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PAN_TO,_158.location);}}},createConfigureLocatorTooltip:function(){this.configureLocatorContent=_140.create("div");this.configureLocatorNoLocatorsText=_140.create("div",{className:"noLocatorsText",innerHTML:"No Locators Configured"});_140.place(this.configureLocatorNoLocatorsText,this.configureLocatorContent);this.configureLocatorTooltip=new _143({content:this.configureLocatorContent});},toggleConfigureLocatorTooltip:function(){if(!this.configureLocatorTooltipVisible){this.showConfigureLocatorTooltip();this.configureLocatorTooltipVisible=true;}else{this.hideConfigureLocatorTooltip();this.configureLocatorTooltipVisible=false;}},showConfigureLocatorTooltip:function(){if(this.configureLocatorTooltip==null){this.createConfigureLocatorTooltip();}if(this.configureLocatorTooltip){dijit.popup.open({popup:this.configureLocatorTooltip,around:this.configureLocateButton});}},hideConfigureLocatorTooltip:function(){if(this.configureLocatorTooltip){dijit.popup.close(this.configureLocatorTooltip);}}});});},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(_160,_161,_162,lang,_163){return _161("dijit.tree.ForestStoreModel",_163,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(_164){this.root={store:this,root:true,id:_164.rootId,label:_164.rootLabel,children:_164.rootChildren};},mayHaveChildren:function(item){return item===this.root||this.inherited(arguments);},getChildren:function(_165,_166,_167){if(_165===this.root){if(this.root.children){_166(this.root.children);}else{this.store.fetch({query:this.query,onComplete:lang.hitch(this,function(_168){this.root.children=_168;_166(_168);}),onError:_167});}}else{this.inherited(arguments);}},isItem:function(_169){return (_169===this.root)?true:this.inherited(arguments);},fetchItemByIdentity:function(_16a){if(_16a.identity==this.root.id){var _16b=_16a.scope||_162.global;if(_16a.onItem){_16a.onItem.call(_16b,this.root);}}else{this.inherited(arguments);}},getIdentity:function(item){return (item===this.root)?this.root.id:this.inherited(arguments);},getLabel:function(item){return (item===this.root)?this.root.label:this.inherited(arguments);},newItem:function(args,_16c,_16d){if(_16c===this.root){this.onNewRootItem(args);return this.store.newItem(args);}else{return this.inherited(arguments);}},onNewRootItem:function(){},pasteItem:function(_16e,_16f,_170,_171,_172){if(_16f===this.root){if(!_171){this.onLeaveRoot(_16e);}}this.inherited(arguments,[_16e,_16f===this.root?null:_16f,_170===this.root?null:_170,_171,_172]);if(_170===this.root){this.onAddToRoot(_16e);}},onAddToRoot:function(item){},onLeaveRoot:function(item){},_requeryTop:function(){var _173=this.root.children||[];this.store.fetch({query:this.query,onComplete:lang.hitch(this,function(_174){this.root.children=_174;if(_173.length!=_174.length||_160.some(_173,function(item,idx){return _174[idx]!=item;})){this.onChildrenChange(this.root,_174);}})});},onNewItem:function(item,_175){this._requeryTop();this.inherited(arguments);},onDeleteItem:function(item){if(_160.indexOf(this.root.children,item)!=-1){this._requeryTop();}this.inherited(arguments);},onSetItem:function(item,_176,_177,_178){this._requeryTop();this.inherited(arguments);}});});},"dojox/html/metrics":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/sniff","dojo/ready","dojo/_base/unload","dojo/_base/window","dojo/dom-geometry"],function(_179,lang,has,_17a,_17b,_17c,_17d){var dhm=lang.getObject("dojox.html.metrics",true);var _17e=lang.getObject("dojox");dhm.getFontMeasurements=function(){var _17f={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,"small":0,"medium":0,"large":0,"x-large":0,"xx-large":0};if(has("ie")){_17c.doc.documentElement.style.fontSize="100%";}var div=_17c.doc.createElement("div");var ds=div.style;ds.position="absolute";ds.left="-100px";ds.top="0";ds.width="30px";ds.height="1000em";ds.borderWidth="0";ds.margin="0";ds.padding="0";ds.outline="0";ds.lineHeight="1";ds.overflow="hidden";_17c.body().appendChild(div);for(var p in _17f){ds.fontSize=p;_17f[p]=Math.round(div.offsetHeight*12/16)*16/12/1000;}_17c.body().removeChild(div);div=null;return _17f;};var _180=null;dhm.getCachedFontMeasurements=function(_181){if(_181||!_180){_180=dhm.getFontMeasurements();}return _180;};var _182=null,_183={};dhm.getTextBox=function(text,_184,_185){var m,s;if(!_182){m=_182=_17c.doc.createElement("div");var c=_17c.doc.createElement("div");c.appendChild(m);s=c.style;s.overflow="scroll";s.position="absolute";s.left="0px";s.top="-10000px";s.width="1px";s.height="1px";s.visibility="hidden";s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";_17c.body().appendChild(c);}else{m=_182;}m.className="";s=m.style;s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";if(arguments.length>1&&_184){for(var i in _184){if(i in _183){continue;}s[i]=_184[i];}}if(arguments.length>2&&_185){m.className=_185;}m.innerHTML=text;var box=_17d.position(m);box.w=m.parentNode.scrollWidth;return box;};var _186={w:16,h:16};dhm.getScrollbar=function(){return {w:_186.w,h:_186.h};};dhm._fontResizeNode=null;dhm.initOnFontResize=function(_187){var f=dhm._fontResizeNode=_17c.doc.createElement("iframe");var fs=f.style;fs.position="absolute";fs.width="5em";fs.height="10em";fs.top="-10000px";fs.display="none";if(has("ie")){f.onreadystatechange=function(){if(f.contentWindow.document.readyState=="complete"){f.onresize=f.contentWindow.parent[_17e._scopeName].html.metrics._fontresize;}};}else{f.onload=function(){f.contentWindow.onresize=f.contentWindow.parent[_17e._scopeName].html.metrics._fontresize;};}f.setAttribute("src","javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}</script></head><body></body></html>'");_17c.body().appendChild(f);dhm.initOnFontResize=function(){};};dhm.onFontResize=function(){};dhm._fontresize=function(){dhm.onFontResize();};_17b.addOnUnload(function(){var f=dhm._fontResizeNode;if(f){if(has("ie")&&f.onresize){f.onresize=null;}else{if(f.contentWindow&&f.contentWindow.onresize){f.contentWindow.onresize=null;}}dhm._fontResizeNode=null;}});_17a(function(){try{var n=_17c.doc.createElement("div");n.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";_17c.body().appendChild(n);_186.w=n.offsetWidth-n.clientWidth;_186.h=n.offsetHeight-n.clientHeight;_17c.body().removeChild(n);delete n;}catch(e){}if("fontSizeWatch" in _179.config&&!!_179.config.fontSizeWatch){dhm.initOnFontResize();}});return dhm;});},"esriviewer/manager/base/IdentityManagerMixin":function(){define(["dojo/_base/declare","esri/IdentityManager","esri/kernel","dojo/_base/lang","dojo/cookie","dojo/topic","dojo/json","dojo/_base/unload"],function(_188,_189,_18a,lang,_18b,_18c,JSON,_18d){return _188([],{forcedUserLogout:false,cred:"esri_jsapi_id_manager_data",constructor:function(){_18d.addOnUnload(lang.hitch(this,this._storeCredentials));this._loadCredentials();this._loadIdentityManagerListeners();},_loadIdentityManagerListeners:function(){_18c.subscribe(VIEWER_GLOBALS.EVENTS.IDENTITY_MANAGER.GET_TOKEN,lang.hitch(this,this._getToken));_18c.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.USER_LOGGED_OUT,lang.hitch(this,this._clearToken));},_clearToken:function(){if(this._supportsLocalStorage()){window.localStorage.removeItem(this.cred);}else{_18b(this.cred,null,{expire:-1});}this.forcedUserLogout=true;},_getToken:function(_18e,_18f){if(_18f!=null&&lang.isFunction(_18f)){if(_189.credentials==null||_189.credentials.length<1){_18f(null);return;}var _190;var _191;for(var i=0;i<_189.credentials.length;i++){_190=_189.credentials[i];_191=_190.resources;if(_191!=null&&lang.isArray(_191)){for(var j=0;j<_191.length;j++){if(_191[j].indexOf(_18e)>-1){_18f({username:_190.userId,token:_190.token});}}}}}},_loadCredentials:function(){var _192,_193;if(this._supportsLocalStorage()){_192=window.localStorage.getItem(this.cred);}else{_192=_18b(this.cred);}if(_192&&_192!="null"&&_192.length>4){_193=JSON.parse(_192);_18a.id.initialize(_193);}else{}},_storeCredentials:function(){if(this.forcedUserLogout){return;}if(_18a.id.credentials.length===0){return;}var _194=JSON.stringify(_18a.id.toJson());if(this._supportsLocalStorage()){window.localStorage.setItem(this.cred,_194);}else{_18b(cred,_194,{expires:1});}},_supportsLocalStorage:function(){try{return "localStorage" in window&&window["localStorage"]!==null;}catch(e){return false;}}});});},"esriviewer/ui/draw/base/model/GraphicsListViewModel":function(){define(["dojo/_base/declare","dojo/topic","dojo/Evented"],function(_195,_196,_197){return _195([_197],{REMOVE_GRAPHIC:"removeGraphic",REMOVE_ALL_GRAPHICS:"removeAllGraphics",constructor:function(){var self=this;this.saveGraphicsIconVisible=ko.observable(false);this.saveGraphicsInputVisible=ko.observable(false);this.allGraphicsVisible=ko.observable(true);this.addedGraphics=ko.observableArray();var _198=function(){return self.addedGraphics().length>0;};this.hasGraphics=ko.computed(_198);this.removeGraphic=function(_199){if(_199==null){return;}self.emit(self.REMOVE_GRAPHIC,_199.graphic);self.addedGraphics.remove(_199);};this.zoomToGraphic=function(_19a){_196.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.CENTER_AND_FLASH,_19a.graphic);};},removeAllGraphics:function(){var _19b=this.addedGraphics();this.emit(this.REMOVE_ALL_GRAPHICS);this.addedGraphics.removeAll();},toggleAllGraphics:function(){var _19c=this.addedGraphics();var i;if(!this.allGraphicsVisible()){for(i=0;i<_19c.length;i++){_19c[i].graphic.show();}this.allGraphicsVisible(true);}else{for(i=0;i<_19c.length;i++){_19c[i].graphic.hide();}this.allGraphicsVisible(false);}},toggleSaveGraphics:function(){this.saveGraphicsInputVisible(!this.saveGraphicsInputVisible());}});});},"esriviewer/ui/draw/configure/geometry/ConfigurePointWidget":function(){define(["dojo/_base/declare","dojo/text!./template/ConfigurePointTemplate.html","dojo/_base/Color","dojo/_base/lang","./model/ConfigurePointViewModel","./BaseGeometryConfigurationWidget","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol"],function(_19d,_19e,_19f,lang,_1a0,_1a1,_1a2,_1a3){return _19d([_1a1],{templateString:_19e,postCreate:function(){this.inherited(arguments);this.viewModel=new _1a0();this.viewModel.selectedMarkerStyle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedMarkerSize.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedAngle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedOutlineWidth.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedOutlineStyle.subscribe(lang.hitch(this,this.processChange));this.viewModel.markerColorActive.subscribe(lang.hitch(this,this.handleMarkerColorToggled));this.markerColor=new _19f([255,0,0,this.getTransparency()/100]);this.outlineColor=new _19f([255,0,0,this.getTransparency()/100]);this.colorPicker.set("value",this.markerColor.toHex());ko.applyBindings(this.viewModel,this.domNode);},handleTransparencyChanged:function(){var _1a4=this.getTransparency()/100;this.outlineColor=new _19f([this.outlineColor.r,this.outlineColor.g,this.outlineColor.b,_1a4]);this.markerColor=new _19f([this.markerColor.r,this.markerColor.g,this.markerColor.b,_1a4]);this.inherited(arguments);},handleMarkerColorToggled:function(_1a5){if(_1a5){this.colorPicker.set("value",this.markerColor.toHex());}else{this.colorPicker.set("value",this.outlineColor.toHex());}},handleColorPickerChanged:function(){if(this.viewModel.outlineColorActive()){this.outlineColor=this.getColor();}else{this.markerColor=this.getColor();}this.processChange();},processChange:function(){this.onChange(this.getSymbol());},getSymbol:function(){return new _1a2(this.viewModel.selectedMarkerStyle(),parseInt(this.viewModel.selectedMarkerSize(),10),new _1a3(this.viewModel.selectedOutlineStyle(),this.outlineColor,this.viewModel.selectedOutlineWidth()),this.markerColor).setAngle(this.viewModel.selectedAngle());}});});},"esriviewer/ui/draw/configure/geometry/model/ConfigurePointViewModel":function(){define(["dojo/_base/declare","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol"],function(_1a6,_1a7,_1a8){return _1a6([],{pointColorTypes:{outline:"outline",fill:"fill"},markerStyles:ko.observableArray([{value:_1a7.STYLE_CIRCLE,label:"Circle"},{value:_1a7.STYLE_CROSS,label:"Cross"},{value:_1a7.STYLE_DIAMOND,label:"Diamond"},{value:_1a7.STYLE_SQUARE,label:"Square"},{value:_1a7.STYLE_X,label:"X"}]),outlineStyles:ko.observableArray([{value:_1a8.STYLE_DASH,label:"Dashed Line"},{value:_1a8.STYLE_DASHDOT,label:"Dash Dot Line"},{value:_1a8.STYLE_DASHDOTDOT,label:"Dash Dot Dot Line"},{value:_1a8.STYLE_DOT,label:"Dotted Line"},{value:_1a8.STYLE_SOLID,label:"Solid Line"},{value:_1a8.STYLE_NULL,label:"None"}]),markerSizes:ko.observableArray([1,2,3,4,5,6,7,8,9,10,15,20,25,30,40,50,75]),outlineWidths:ko.observableArray([1,2,3,4,5,6,7,8,9,10]),angles:ko.observableArray([0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85]),constructor:function(){this.selectedMarkerStyle=ko.observable(_1a7.STYLE_CIRCLE);this.selectedMarkerSize=ko.observable(10);this.selectedAngle=ko.observable(0);this.selectedOutlineStyle=ko.observable(_1a8.STYLE_SOLID);this.selectedOutlineWidth=ko.observable(1);this.markerColorActive=ko.observable(true);this.outlineColorActive=ko.observable(false);},setOutlineColorMode:function(){this.outlineColorActive(true);this.markerColorActive(false);},setMarkerColorMode:function(){this.outlineColorActive(false);this.markerColorActive(true);}});});},"esriviewer/ui/bookmark/CreateBookmarkWidget":function(){define(["dojo/_base/declare","dojo/text!./template/CreateBookmarkTemplate.html","dojo/topic","../base/UITemplatedWidget","dojo/dom-class","dojox/timing","dijit/form/TextBox","dijit/form/Button"],function(_1a9,_1aa,_1ab,_1ac,_1ad,_1ae,_1af,_1b0){return _1a9([_1ac],{animate:true,animateOnPlace:false,templateString:_1aa,postCreate:function(){this.inherited(arguments);this._hideNoAnim();},loadViewerConfigurationData:function(){var _1b1=null;_1ab.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"animationsEnabled",function(_1b2){_1b1=_1b2;});if(_1b1!=null){this.animate=_1b1;}},show:function(){_1ad.remove(this.domNode,"createBookmarkWindowHidden");if(this.animate){this._removeAnimationClasses();this.animation=VIEWER_GLOBALS.ANIMATIONS.LIGHT_SPEED.IN;this._animateWidget();}this.bookmarkLabelElement.focus();},_hideNoAnim:function(){_1ad.add(this.domNode,"createBookmarkWindowHidden");this.bookmarkLabelElement.set("value","");},hide:function(){if(this.animate){this._removeAnimationClasses();this.animation=VIEWER_GLOBALS.ANIMATIONS.LIGHT_SPEED.OUT;this._animateWidget();var _1b3=new _1ae.Timer(VIEWER_GLOBALS.ANIMATIONS.LIGHT_SPEED.DURATION);var self=this;_1b3.onTick=function(){_1ad.add(self.domNode,"createBookmarkWindowHidden");_1b3.stop();_1b3=null;};_1b3.start();}else{_1ad.add(this.domNode,"createBookmarkWindowHidden");}this.bookmarkLabelElement.set("value","");},onBookmarkLabelKeyUp:function(e){if(VIEWER_UTILS.isEnterKey(e)){this.createBookmark();}},createBookmark:function(){var _1b4=this.bookmarkLabelElement.get("value");if(_1b4==""){return;}var _1b5;var _1b6;_1ab.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_CENTER,function(_1b7){_1b5=_1b7;});_1ab.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_LEVEL,function(_1b8){_1b6=_1b8;});var _1b9={x:_1b5.x,y:_1b5.y,spatialReference:{wkid:_1b5.spatialReference.wkid}};var id=VIEWER_UTILS.generateUUID();var _1ba={label:_1b4,zoomLevel:_1b6,point:_1b9};var _1bb={};_1bb[id]=_1ba;VIEWER_UTILS.log("Bookmark Created: "+_1b4,VIEWER_GLOBALS.LOG_TYPE.INFO);_1ab.publish(VIEWER_GLOBALS.EVENTS.BOOKMARK.CREATED,_1bb);this.hide();}});});},"esriviewer/ui/print/PrintWidgetWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","../window/WindowWidget"],function(_1bc,lang,_1bd,_1be){return _1bc([_1be],{defaultPositioning:{x:500,y:125},windowWidth:"300px",windowHeaderText:"Print",windowIconAltText:"Print",windowIconClass:"commonIcons16 print",positioningParamName:"print",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/print/PrintWidget"],lang.hitch(this,function(_1bf){this.printWidget=new _1bf();this.setContent(this.printWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_1bd.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PRINT.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_1bd.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PRINT.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_1bd.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PRINT.TOGGLE,lang.hitch(this,this.toggle)));}});});},"esriviewer/manager/base/WebMapTemplateConfigurationUtil":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Deferred","esri/request","dojo/_base/array","../../base/DataLoaderSupport","esri/arcgis/utils"],function(_1c0,lang,_1c1,_1c2,_1c3,_1c4,_1c5){return _1c0([_1c4],{showOverviewParameter:"showOverview",showLegendParameter:"showLegend",showHeaderParameter:"showHeader",headerTextParameter:"headerText",helpLinkParameter:"helpUrl",contactUsParameter:"contactUsUrl",ignoreProcessingConfigurationEntries:["webmap","geometryServiceUrl","locators","baseViewer","showOverview","showLegend"],appConfigToViewerWindowWidgetConfigLookup:{logging:"logging"},appConfigToViewerWidgetConfigLookup:{pointUploadWidget:"pointUploadWidget",drawWidget:"drawWidget",plottingWidget:"plottingWidget",reverseGeocodeWidget:"reverseGeocodeWidget",portalSearchWidget:"portalSearchWidget",reflectivityWidget:"reflectivityWidget",zoomToWidget:"zoomToWidget",timeSliderWidget:"timeSliderWidget",identifyWidget:"identifyWidget",configureWidget:"configureWidget",measureWidget:"measureWidget",socialMediaWidget:"socialMediaWidget",printWidget:"printWidget",weatherWidget:"weatherWidget"},defaultConfigFile:"config/portal/config.json",constructor:function(){this.init();},init:function(){},loadConfiguration:function(_1c6){this.appId=_1c6;this.deferred=new _1c1();this._loadDefaultConfiguration();return this.deferred.promise;},_loadDefaultConfiguration:function(){this.loadJson(this.defaultConfigFile,lang.hitch(this,this._handleDefaultConfigurationLoaded),lang.hitch(this,this._handleDefaultConfigurationLoadError));},_loadTemplateConfiguration:function(){var _1c7=_1c2({url:_1c5.arcgisUrl+"/"+this.appId+"/data",content:{f:"json"},callbackParamName:"callback",load:lang.hitch(this,this.handleTemplateResponse),error:lang.hitch(this,this.handleTemplateErrorResponse)},{useProxy:true});},handleTemplateErrorResponse:function(err){alert("Could not load application data from "+_1c5.arcgisUrl);},handleTemplateResponse:function(_1c8){this.templateResponse=_1c8;this.appConfig={};for(var key in _1c8.values){if(_1c8.values[key]!==undefined){this.appConfig[key]=_1c8.values[key];}}this._loadWebMapItem(this.appConfig.webmap);},_loadWebMapItem:function(_1c9){_1c5.getItem(_1c9).then(lang.hitch(this,this.handleWebMapItemLoaded));},handleWebMapItemLoaded:function(_1ca){this.webMapItem=_1ca;var _1cb=lang.mixin(this.defaultConfiguration.values,this.appConfig);this.viewerConfiguration=this._applicationConfigurationToViewerConfiguration(_1cb);this.viewerConfiguration.webMapItem=this.webMapItem;this.handleWebMapConfigurationComplete();},_handleDefaultConfigurationLoaded:function(_1cc){this.defaultConfiguration=_1cc;this.portalUrl=this.defaultConfiguration.values.portalConfiguration.url;_1c5.arcgisUrl=VIEWER_UTILS.joinUrl(this.portalUrl,this.defaultConfiguration.values.portalConfiguration.itemsPath);this._loadTemplateConfiguration();},handleWebMapConfigurationComplete:function(){this.finalizeLoad();},finalizeLoad:function(){this.deferred.resolve(this.viewerConfiguration);},_handleDefaultConfigurationLoadError:function(){alert("Could not load default configuration");},_applicationConfigurationToViewerConfiguration:function(_1cd){var _1ce={small:true,display:true,headerText:"Mapping Application",headerImage:"images/logoSmall.png",contact:{label:"Contact Us",url:"http://www.esri.com/about-esri/contact"},help:{label:"Help",url:"http://support.esri.com/en/"}};var _1cf={webMapItem:_1cd.webmap,header:_1ce};for(var key in _1cd){if(_1c3.indexOf(this.ignoreProcessingConfigurationEntries,key)>-1){continue;}else{if(key===this.showHeaderParameter){_1cf.header.display=_1cd[key];}else{if(key===this.headerTextParameter){_1cf.header.headerText=_1cd[key];}else{if(key===this.helpLinkParameter){_1cf.header.contact.url=_1cd[key];}else{if(key===this.contactUsParameter){_1cf.header.help.url=_1cd[key];}else{if(this.appConfigToViewerWidgetConfigLookup[key]){_1cf[key]={create:_1cd[key]};}else{if(this.appConfigToViewerWindowWidgetConfigLookup[key]){_1cf[key]={window:{create:_1cd[key]}};}else{_1cf[key]={create:false};}}}}}}}}this._applyWebMappingApplicationDefaults(_1cd,_1cf);return _1cf;},_applyWebMappingApplicationDefaults:function(_1d0,_1d1){var _1d2=_1d0[this.showOverviewParameter]!=null&&_1d0[this.showOverviewParameter];var _1d3=_1d0[this.showLegendParameter]!=null&&_1d0[this.showLegendParameter];_1d1.map={overview:{create:_1d2},useBasemapGallery:true,legend:{create:_1d3}};_1d1.toolsBar={showToolsDropdown:true,showLayersButton:true,showConfigureLocatorsIcon:false,showBookmarksButton:true};_1d1.toolsAccordion={create:false};if(this.portalUrl){_1d1.portal={url:this.portalUrl};}if(_1d0.geometryServiceUrl){_1d1.geometryServiceUrl=_1d0.geometryServiceUrl;}if(_1d0.locators){_1d1.locators=_1d0.locators;}var _1d4=_1d1[this.appConfigToViewerWidgetConfigLookup.socialMediaWidget];if(_1d4){if(_1d4.create){_1d4.configurationUrl=this.defaultConfiguration.values.baseViewer.socialMediaWidgetConfiguration.configurationUrl;}}var _1d5=_1d1[this.appConfigToViewerWidgetConfigLookup.weatherWidget];if(_1d5){if(_1d5.create){_1d5.configurationUrl=this.defaultConfiguration.values.baseViewer.weatherWidgetConfiguration.configurationUrl;}}var _1d6=_1d1[this.appConfigToViewerWidgetConfigLookup.printWidget];if(_1d6){if(_1d6.create){_1d6.printTaskUrl=this.defaultConfiguration.values.baseViewer.printWidgetConfiguration.printTaskUrl;}}var _1d7=_1d1[this.appConfigToViewerWidgetConfigLookup.zoomToWidget];if(_1d7){if(_1d7.create){_1d7.stateJson=this.defaultConfiguration.values.baseViewer.zoomToWidgetConfiguration.stateJson;_1d7.countyJson=this.defaultConfiguration.values.baseViewer.zoomToWidgetConfiguration.countyJson;}}}});});},"dojox/storage/BehaviorStorageProvider":function(){define(["dijit","dojo","dojox","dojo/require!dojox/storage/Provider,dojox/storage/manager"],function(_1d8,dojo,_1d9){dojo.provide("dojox.storage.BehaviorStorageProvider");dojo.require("dojox.storage.Provider");dojo.require("dojox.storage.manager");dojo.declare("dojox.storage.BehaviorStorageProvider",[_1d9.storage.Provider],{store:null,storeName:"__dojox_BehaviorStorage",keys:[],initialize:function(){try{this.store=this._createStore();this.store.load(this.storeName);}catch(e){throw new Error("Store is not available: "+e);}var keys=this.get("keys","dojoxSystemNS");this.keys=keys||[];this.initialized=true;_1d9.storage.manager.loaded();},isAvailable:function(){return dojo.isIE&&dojo.isIE>=5;},_createStore:function(){var _1da=dojo.create("link",{id:this.storeName+"Node",style:{"display":"none"}},dojo.query("head")[0]);_1da.addBehavior("#default#userdata");return _1da;},put:function(key,_1db,_1dc,_1dd){this._assertIsValidKey(key);_1dd=_1dd||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_1dd);var _1de=this.getFullKey(key,_1dd);_1db=dojo.toJson(_1db);this.store.setAttribute(_1de,_1db);this.store.save(this.storeName);var _1df=this.store.getAttribute(_1de)===_1db;if(_1df){this._addKey(_1de);this.store.setAttribute("__dojoxSystemNS_keys",dojo.toJson(this.keys));this.store.save(this.storeName);}if(_1dc){_1dc(_1df?this.SUCCESS:this.FAILED,key,null,_1dd);}},get:function(key,_1e0){this._assertIsValidKey(key);_1e0=_1e0||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_1e0);key=this.getFullKey(key,_1e0);return dojo.fromJson(this.store.getAttribute(key));},getKeys:function(_1e1){_1e1=_1e1||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_1e1);_1e1="__"+_1e1+"_";var keys=[];for(var i=0;i<this.keys.length;i++){var _1e2=this.keys[i];if(this._beginsWith(_1e2,_1e1)){_1e2=_1e2.substring(_1e1.length);keys.push(_1e2);}}return keys;},clear:function(_1e3){_1e3=_1e3||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_1e3);_1e3="__"+_1e3+"_";var keys=[];for(var i=0;i<this.keys.length;i++){var _1e4=this.keys[i];if(this._beginsWith(_1e4,_1e3)){keys.push(_1e4);}}dojo.forEach(keys,function(key){this.store.removeAttribute(key);this._removeKey(key);},this);this.put("keys",this.keys,null,"dojoxSystemNS");this.store.save(this.storeName);},remove:function(key,_1e5){this._assertIsValidKey(key);_1e5=_1e5||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_1e5);key=this.getFullKey(key,_1e5);this.store.removeAttribute(key);this._removeKey(key);this.put("keys",this.keys,null,"dojoxSystemNS");this.store.save(this.storeName);},getNamespaces:function(){var _1e6=[this.DEFAULT_NAMESPACE];var _1e7={};_1e7[this.DEFAULT_NAMESPACE]=true;var _1e8=/^__([^_]*)_/;for(var i=0;i<this.keys.length;i++){var _1e9=this.keys[i];if(_1e8.test(_1e9)==true){var _1ea=_1e9.match(_1e8)[1];if(typeof _1e7[_1ea]=="undefined"){_1e7[_1ea]=true;_1e6.push(_1ea);}}}return _1e6;},isPermanent:function(){return true;},getMaximumSize:function(){return 64;},hasSettingsUI:function(){return false;},isValidKey:function(_1eb){if(_1eb===null||_1eb===undefined){return false;}return /^[0-9A-Za-z_-]*$/.test(_1eb);},isValidNamespace:function(_1ec){if(_1ec===null||_1ec===undefined){return false;}return /^[0-9A-Za-z-]*$/.test(_1ec);},getFullKey:function(key,_1ed){return "__"+_1ed+"_"+key;},_beginsWith:function(_1ee,_1ef){if(_1ef.length>_1ee.length){return false;}return _1ee.substring(0,_1ef.length)===_1ef;},_assertIsValidNamespace:function(_1f0){if(this.isValidNamespace(_1f0)===false){throw new Error("Invalid namespace given: "+_1f0);}},_assertIsValidKey:function(key){if(this.isValidKey(key)===false){throw new Error("Invalid key given: "+key);}},_addKey:function(key){this._removeKey(key);this.keys.push(key);},_removeKey:function(key){this.keys=dojo.filter(this.keys,function(item){return item!==key;},this);}});_1d9.storage.manager.register("dojox.storage.BehaviorStorageProvider",new _1d9.storage.BehaviorStorageProvider());});},"dijit/layout/AccordionContainer":function(){define(["require","dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/topic","../focus","../_base/manager","dojo/ready","../_Widget","../_Container","../_TemplatedMixin","../_CssStateMixin","./StackContainer","./ContentPane","dojo/text!./templates/AccordionButton.html","../a11yclick"],function(_1f1,_1f2,_1f3,fx,dom,_1f4,_1f5,_1f6,_1f7,keys,lang,has,_1f8,_1f9,_1fa,_1fb,_1fc,_1fd,_1fe,_1ff,_200,_201,_202){var _203=_1f3("dijit.layout._AccordionButton",[_1fc,_1fe,_1ff],{templateString:_202,label:"",_setLabelAttr:{node:"titleTextNode",type:"innerHTML"},title:"",_setTitleAttr:{node:"titleTextNode",type:"attribute",attribute:"title"},iconClassAttr:"",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitAccordionTitle",getParent:function(){return this.parent;},buildRendering:function(){this.inherited(arguments);var _204=this.id.replace(" ","_");_1f4.set(this.titleTextNode,"id",_204+"_title");this.focusNode.setAttribute("aria-labelledby",_1f4.get(this.titleTextNode,"id"));dom.setSelectable(this.domNode,false);},getTitleHeight:function(){return _1f7.getMarginSize(this.domNode).h;},_onTitleClick:function(){var _205=this.getParent();_205.selectChild(this.contentWidget,true);_1f9.focus(this.focusNode);},_onTitleKeyDown:function(evt){return this.getParent()._onKeyDown(evt,this.contentWidget);},_setSelectedAttr:function(_206){this._set("selected",_206);this.focusNode.setAttribute("aria-expanded",_206?"true":"false");this.focusNode.setAttribute("aria-selected",_206?"true":"false");this.focusNode.setAttribute("tabIndex",_206?"0":"-1");}});if(has("dojo-bidi")){_203.extend({_setLabelAttr:function(_207){this._set("label",_207);_1f4.set(this.titleTextNode,"innerHTML",_207);this.applyTextDir(this.titleTextNode);},_setTitleAttr:function(_208){this._set("title",_208);_1f4.set(this.titleTextNode,"title",_208);this.applyTextDir(this.titleTextNode);}});}var _209=_1f3("dijit.layout._AccordionInnerContainer"+(has("dojo-bidi")?"_NoBidi":""),[_1fc,_1ff],{baseClass:"dijitAccordionInnerContainer",isLayoutContainer:true,buildRendering:function(){this.domNode=_1f6.place("<div class='"+this.baseClass+"' role='presentation'>",this.contentWidget.domNode,"after");var _20a=this.contentWidget,cls=lang.isString(this.buttonWidget)?lang.getObject(this.buttonWidget):this.buttonWidget;this.button=_20a._buttonWidget=(new cls({contentWidget:_20a,label:_20a.title,title:_20a.tooltip,dir:_20a.dir,lang:_20a.lang,textDir:_20a.textDir||this.textDir,iconClass:_20a.iconClass,id:_20a.id+"_button",parent:this.parent})).placeAt(this.domNode);this.containerNode=_1f6.place("<div class='dijitAccordionChildWrapper' role='tabpanel' style='display:none'>",this.domNode);this.containerNode.setAttribute("aria-labelledby",this.button.id);_1f6.place(this.contentWidget.domNode,this.containerNode);},postCreate:function(){this.inherited(arguments);var _20b=this.button,cw=this.contentWidget;this._contentWidgetWatches=[cw.watch("title",lang.hitch(this,function(name,_20c,_20d){_20b.set("label",_20d);})),cw.watch("tooltip",lang.hitch(this,function(name,_20e,_20f){_20b.set("title",_20f);})),cw.watch("iconClass",lang.hitch(this,function(name,_210,_211){_20b.set("iconClass",_211);}))];},_setSelectedAttr:function(_212){this._set("selected",_212);this.button.set("selected",_212);if(_212){var cw=this.contentWidget;if(cw.onSelected){cw.onSelected();}}},startup:function(){this.contentWidget.startup();},destroy:function(){this.button.destroyRecursive();_1f2.forEach(this._contentWidgetWatches||[],function(w){w.unwatch();});delete this.contentWidget._buttonWidget;delete this.contentWidget._wrapperWidget;this.inherited(arguments);},destroyDescendants:function(_213){this.contentWidget.destroyRecursive(_213);}});if(has("dojo-bidi")){_209=_1f3("dijit.layout._AccordionInnerContainer",_209,{postCreate:function(){this.inherited(arguments);var _214=this.button;this._contentWidgetWatches.push(this.contentWidget.watch("textDir",function(name,_215,_216){_214.set("textDir",_216);}));}});}var _217=_1f3("dijit.layout.AccordionContainer",_200,{duration:_1fa.defaultDuration,buttonWidget:_203,baseClass:"dijitAccordionContainer",buildRendering:function(){this.inherited(arguments);this.domNode.style.overflow="hidden";this.domNode.setAttribute("role","tablist");},startup:function(){if(this._started){return;}this.inherited(arguments);if(this.selectedChildWidget){this.selectedChildWidget._wrapperWidget.set("selected",true);}},layout:function(){var _218=this.selectedChildWidget;if(!_218){return;}var _219=_218._wrapperWidget.domNode,_21a=_1f7.getMarginExtents(_219),_21b=_1f7.getPadBorderExtents(_219),_21c=_218._wrapperWidget.containerNode,_21d=_1f7.getMarginExtents(_21c),_21e=_1f7.getPadBorderExtents(_21c),_21f=this._contentBox;var _220=0;_1f2.forEach(this.getChildren(),function(_221){if(_221!=_218){_220+=_1f7.getMarginSize(_221._wrapperWidget.domNode).h;}});this._verticalSpace=_21f.h-_220-_21a.h-_21b.h-_21d.h-_21e.h-_218._buttonWidget.getTitleHeight();this._containerContentBox={h:this._verticalSpace,w:this._contentBox.w-_21a.w-_21b.w-_21d.w-_21e.w};if(_218){_218.resize(this._containerContentBox);}},_setupChild:function(_222){_222._wrapperWidget=_209({contentWidget:_222,buttonWidget:this.buttonWidget,id:_222.id+"_wrapper",dir:_222.dir,lang:_222.lang,textDir:_222.textDir||this.textDir,parent:this});this.inherited(arguments);_1f6.place(_222.domNode,_222._wrapper,"replace");},removeChild:function(_223){if(_223._wrapperWidget){_1f6.place(_223.domNode,_223._wrapperWidget.domNode,"after");_223._wrapperWidget.destroy();delete _223._wrapperWidget;}_1f5.remove(_223.domNode,"dijitHidden");this.inherited(arguments);},getChildren:function(){return _1f2.map(this.inherited(arguments),function(_224){return _224.declaredClass=="dijit.layout._AccordionInnerContainer"?_224.contentWidget:_224;},this);},destroy:function(){if(this._animation){this._animation.stop();}_1f2.forEach(this.getChildren(),function(_225){if(_225._wrapperWidget){_225._wrapperWidget.destroy();}else{_225.destroyRecursive();}});this.inherited(arguments);},_showChild:function(_226){_226._wrapperWidget.containerNode.style.display="block";return this.inherited(arguments);},_hideChild:function(_227){_227._wrapperWidget.containerNode.style.display="none";this.inherited(arguments);},_transition:function(_228,_229,_22a){if(has("ie")<8){_22a=false;}if(this._animation){this._animation.stop(true);delete this._animation;}var self=this;if(_228){_228._wrapperWidget.set("selected",true);var d=this._showChild(_228);if(this.doLayout&&_228.resize){_228.resize(this._containerContentBox);}}if(_229){_229._wrapperWidget.set("selected",false);if(!_22a){this._hideChild(_229);}}if(_22a){var _22b=_228._wrapperWidget.containerNode,_22c=_229._wrapperWidget.containerNode;var _22d=_228._wrapperWidget.containerNode,_22e=_1f7.getMarginExtents(_22d),_22f=_1f7.getPadBorderExtents(_22d),_230=_22e.h+_22f.h;_22c.style.height=(self._verticalSpace-_230)+"px";this._animation=new fx.Animation({node:_22b,duration:this.duration,curve:[1,this._verticalSpace-_230-1],onAnimate:function(_231){_231=Math.floor(_231);_22b.style.height=_231+"px";_22c.style.height=(self._verticalSpace-_230-_231)+"px";},onEnd:function(){delete self._animation;_22b.style.height="auto";_229._wrapperWidget.containerNode.style.display="none";_22c.style.height="auto";self._hideChild(_229);}});this._animation.onStop=this._animation.onEnd;this._animation.play();}return d;},_onKeyDown:function(e,_232){if(this.disabled||e.altKey||!(_232||e.ctrlKey)){return;}var c=e.keyCode;if((_232&&(c==keys.LEFT_ARROW||c==keys.UP_ARROW))||(e.ctrlKey&&c==keys.PAGE_UP)){this._adjacent(false)._buttonWidget._onTitleClick();e.stopPropagation();e.preventDefault();}else{if((_232&&(c==keys.RIGHT_ARROW||c==keys.DOWN_ARROW))||(e.ctrlKey&&(c==keys.PAGE_DOWN||c==keys.TAB))){this._adjacent(true)._buttonWidget._onTitleClick();e.stopPropagation();e.preventDefault();}}}});if(has("dijit-legacy-requires")){_1fb(0,function(){var _233=["dijit/layout/AccordionPane"];_1f1(_233);});}_217._InnerContainer=_209;_217._Button=_203;return _217;});},"esriviewer/portal/PortalSearcher":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","../base/ConfigurationEntryMixin"],function(_234,_235,lang,_236){return _234([_236],{_defaultMaxResults:50,_defaultSortField:"avgRating",constructor:function(){this.initListeners();},initListeners:function(){_235.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_WEBMAPS,lang.hitch(this,this.searchWebmaps));_235.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_GEOCODE_SERVICES,lang.hitch(this,this.searchGeocodeServices));_235.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_IMAGE_SERVICES,lang.hitch(this,this.searchImageServices));_235.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_FEATURE_SERVICE_LAYERS,lang.hitch(this,this.searchFeatureServiceLayers));_235.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_FEATURE_SERVICES,lang.hitch(this,this.searchFeatureServices));_235.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_MAP_SERVICES,lang.hitch(this,this.searchMapServices));},searchGeocodeServices:function(_237,_238,_239,_23a,_23b,_23c){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.GEOCODE_SERVICE,_237,_238,_239,_23a,_23b,_23c);},searchFeatureServiceLayers:function(_23d,_23e,_23f,_240,_241,_242){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.FEATURE_SERVICE_LAYER,_23d,_23e,_23f,_240,_241,_242);},searchImageServices:function(_243,_244,_245,_246,_247,_248){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.IMAGE_SERVICE,_243,_244,_245,_246,_247,_248);},searchFeatureServices:function(_249,_24a,_24b,_24c,_24d,_24e){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.FEATURE_SERVICE,_249,_24a,_24b,_24c,_24d,_24e);},searchMapServices:function(_24f,_250,_251,_252,_253,_254){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.MAP_SERVICE,_24f,_250,_251,_252,_253,_254);},searchWebmaps:function(_255,_256,_257,_258,_259,_25a){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.WEB_MAP,_255,_256,_257,_258,_259,_25a);},_performSearch:function(_25b,_25c,_25d,_25e,_25f,_260,_261){if(_260==null||!lang.isFunction(_260)){return;}if(_25d==null){_25d=this._defaultMaxResults;}if(_25e==null||_25e==""){_25e=this._defaultSortField;}if(_25f==null){_25f=0;}var _262={};_262.q=_25c+this._getItemTypeAppend(_25b);_262.sortField=_25e;_262.start=_25f;this._search(_262,_260,_261);},_getItemTypeAppend:function(_263){if(_263==null){return "";}return " AND (type: \""+_263+"\") AND NOT (type: \""+VIEWER_GLOBALS.AGS_PORTAL_TYPES.MAPPING_APPLICATION+"\")";},_search:function(_264,_265,_266){var _267=null;_235.publish(VIEWER_GLOBALS.EVENTS.PORTAL.GET_INSTANCE,function(_268){_267=_268;});if(_267){var _269=_265;_267.queryItems(_264).then(function(_26a){_269(_26a);});}else{if(_266!=null&&lang.isFunction(_266)){_266("Portal is not configured");}}}});});},"esriviewer/manager/ViewerManagerWindow":function(){define(["dojo/_base/declare","dojo/on","dojo/dom-style","dojo/_base/window","dojo/dom-construct","./base/ViewerManager","../ui/identify/IdentifyWindowWidget","../ui/measure/MeasureWindow","../ui/editor/FeatureServiceEditorWindowWidget","../ui/time/TimeSliderWindow","../ui/transparency/LayersTransparencyWindowWidget","../ui/geocode/ReverseGeocodeWindowWidget","../ui/query/QueryBuilderWindowWidget","../ui/draw/DrawWindow","../ui/logging/LoggingWidgetWindow","../ui/layers/LayersWindowWidget","../ui/legend/MapLegendWindow","../ui/zoomto/ZoomToWidgetWindow","../ui/configure/ConfigureViewerWindow","../ui/weather/conditions/WeatherWidgetWindow","../ui/weather/reflectivity/ReflectivityWidgetWindow","../ui/portal/PortalPublisherWindowWidget","../ui/plotting/PlottingWidgetWindow","../ui/print/PrintWidgetWindow","../ui/pointupload/PointUploadWindow","../ui/social/SocialMediaWidgetWindow"],function(_26b,on,_26c,_26d,_26e,_26f,_270,_271,_272,_273,_274,_275,_276,_277,_278,_279,_27a,_27b,_27c,_27d,_27e,_27f,_280,_281,_282,_283){return _26b([_26f],{createPlottingWidget:function(){new _280();},createSocialMediaWidget:function(){new _283();},createReflectivityWidget:function(){new _27e();},createWeatherWidget:function(){new _27d();},createIdentifyWidget:function(){new _270();},createMeasureWidget:function(){new _271();},createFeatureEditorWidget:function(){new _272();},createTimeSliderWidget:function(){new _273();},createLayersTransparencyWidget:function(){new _274();},createConfigureViewerWidget:function(){new _27c();},createReverseGeocodeWidget:function(){new _275();},createQueryBuilderWidget:function(){new _276();},createDrawWidget:function(){new _277();},createLoggingWidget:function(){new _278();},createLayersWidget:function(){new _279();},createLegendWidget:function(){new _27a();},createZoomToWidget:function(){new _27b();},createPortalPublisherWidget:function(){new _27f();},createPrintWidget:function(){new _281();},createPointUploadWidget:function(){new _282();},_createHeaderLogo:function(){if(this.viewerConfig.header.small===true){var _284=_26e.create("span",{className:"smallWindowHeaderContainer"});var _285=_26e.create("img",{src:this.viewerConfig.header.headerImage});var _286=_26e.create("span",{innerHTML:this.viewerConfig.header.headerText});_26e.place(_285,_284);_26e.place(_286,_284);_26e.place(_284,_26d.body());if(this.viewerConfig.header.contact&&this.viewerConfig.header.contact.url){_26c.set(_284,"cursor","pointer");var _287=this.viewerConfig.header.contact.url;on(_284,"click",function(){window.open(_287);});}}else{this.inherited(arguments);}}});});},"esriviewer/ui/throbber/ThrobberWidget":function(){define(["dojo/_base/declare","dojo/text!./template/ThrobberTemplate.html","dojo/topic","../base/UITemplatedWidget","dojo/_base/lang","dojo/request/notify"],function(_288,_289,_28a,_28b,lang,_28c){return _288([_28b],{enabled:true,blockHideEnabled:false,defaultPositioning:{x:10,y:10,alignX:"left",alignY:"bottom"},positioningParamName:"throbber",isPositionedByConfig:true,templateString:_289,postCreate:function(){this.inherited(arguments);_28c("start",lang.hitch(this,this.show));_28c("done",lang.hitch(this,this.hide));},initListeners:function(){this.inherited(arguments);_28a.subscribe(VIEWER_GLOBALS.EVENTS.THROBBER.DISABLE,lang.hitch(this,this.disable));_28a.subscribe(VIEWER_GLOBALS.EVENTS.THROBBER.ENABLE,lang.hitch(this,this.enable));_28a.subscribe(VIEWER_GLOBALS.EVENTS.THROBBER.SHOW,lang.hitch(this,this.show));_28a.subscribe(VIEWER_GLOBALS.EVENTS.THROBBER.HIDE,lang.hitch(this,this.hide));_28a.subscribe(VIEWER_GLOBALS.EVENTS.THROBBER.BLOCK_HIDE,lang.hitch(this,this._blockHide));_28a.subscribe(VIEWER_GLOBALS.EVENTS.THROBBER.RELEASE_HIDE_BLOCK,lang.hitch(this,this._releaseHideBlock));},show:function(){if(this.enabled){this.inherited(arguments);}},_blockHide:function(){this.blockHideEnabled=true;},_releaseHideBlock:function(){this.blockHideEnabled=false;this.hide();},hide:function(){if(!this.blockHideEnabled){this.inherited(arguments);}},disable:function(){this.enabled=false;},enable:function(){this.enabled=true;}});});},"esriviewer/ui/draw/configure/geometry/ConfigureTextWidget":function(){define(["dojo/_base/declare","dojo/text!./template/ConfigureTextTemplate.html","dojo/_base/lang","./model/ConfigureTextViewModel","./BaseGeometryConfigurationWidget","esri/symbols/Font","esri/symbols/TextSymbol"],function(_28d,_28e,lang,_28f,_290,Font,_291){return _28d([_290],{templateString:_28e,postCreate:function(){this.inherited(arguments);this.viewModel=new _28f();this.viewModel.selectedAngle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedTextAlign.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedTextSize.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedTextWeight.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedFontFace.subscribe(lang.hitch(this,this.processChange));ko.applyBindings(this.viewModel,this.domNode);},processChange:function(){this.onChange(this.getSymbol());},getSymbol:function(){var font=new Font(this.viewModel.selectedTextSize());font.setWeight(this.viewModel.selectedTextWeight());font.setStyle(this.viewModel.selectedFontFace());return new _291("").setColor(this.getColor()).setAlign(this.viewModel.selectedTextAlign()).setAngle(parseInt(this.viewModel.selectedAngle(),10)).setFont(font);}});});},"esriviewer/ui/layers/LayersWidget":function(){define(["dojo/_base/declare","dojo/text!./template/LayersWidgetTemplate.html","dojo/topic","dojo/_base/lang","dojo/dom-style","dojo/dom-construct","../base/UITemplatedWidget","../tooltip/ConfirmTooltip","./base/LayersLocalStorageMixin","./model/LayersWidgetViewModel","./LayersTocWidget","./base/UserPersistedLayersListWidget","dijit/form/TextBox","dijit/form/Select","dijit/form/Button"],function(_292,_293,_294,lang,_295,_296,_297,_298,_299,_29a,_29b,_29c,_29d,_29e,_29f){return _292([_297,_299],{showWKIDInAddLayers:true,firstAddLayerDisplay:true,errorMessageDelay:5000,successMessageDelay:2000,allowAddLayers:true,templateString:_293,constructor:function(_2a0){lang.mixin(this,_2a0||{});this.addedLayers={};},postCreate:function(){this.inherited(arguments);this.viewModel=new _29a();this.viewModel.showWKIDInAddLayers(this.showWKIDInAddLayers);this.viewModel.showUserPersistedLayersIcon(this.localStoragePersistSupported);this.viewModel.layersListVisible.subscribe(lang.hitch(this,this.handleLayerListVisibilityChanged));this.viewModel.addLayersVisible.subscribe(lang.hitch(this,this.handleAddLayersVisibilityChanged));this.viewModel.persistedLayersVisible.subscribe(lang.hitch(this,this.handlePersistedLayersVisibilityChanged));this.viewModel.on(this.viewModel.ADD_LAYERS_VISIBLE,lang.hitch(this,this.handleAddLayersVisible));ko.applyBindings(this.viewModel,this.domNode);this.createLayersTocWidget();_295.set(this.domNode,"minHeight","250px");if(this.allowAddLayers){this.populateLayerTypesDropdown();}else{_295.set(this.layersTabContainer,"display","none");}this.manualLayerLoadedSuccessCallback=lang.hitch(this,this.handleManualLayerLoadedCallback);this.manualLayerLoadedErrCallback=lang.hitch(this,this.handleManualLayerLoadErrorCallback);if(this.localStoragePersistSupported){this.createUserPersistedLayerListWidget();}},handleLayerListVisibilityChanged:function(_2a1){this._handleContentAnimation(_2a1,this.layerTocContainer);},handleAddLayersVisibilityChanged:function(_2a2){this._handleContentAnimation(_2a2,this.addLayerContainer);},handlePersistedLayersVisibilityChanged:function(_2a3){this._handleContentAnimation(_2a3,this.userPersistedLayersContainer);},handleAddLayersVisible:function(){this.addLayerTextInput.set("value","");this.addLayerLabelInput.set("value","");this.addLayerTextInput.focus();},createLayersTocWidget:function(){this.layersTocWidget=new _29b();_296.place(this.layersTocWidget.domNode,this.layerTocContainer);},createUserPersistedLayerListWidget:function(){if(this.userPersistedLayersListWidget==null){this.userPersistedLayersListWidget=new _29c();this.userPersistedLayersListWidget.placeAt(this.userPersistedLayersContainer);this.userPersistedLayersListWidget.on("removeUserPersistedLayer",lang.hitch(this,this.handleRemoveUserPersistedLayer));this.userPersistedLayersListWidget.on("addUserPersistedLayerToMap",lang.hitch(this,this.handleAddUserPersistedLayerToMap));this.userPersistedLayersListWidget.on("removeAllUserPersistedLayers",lang.hitch(this,this.handleRemoveAllUserPersistedLayers));this.userPersistedLayersListWidget.addExistingPersistedLayerItems(this.persistedUserLayers);}},showLayerList:function(){this.viewModel.showLayersList();},handleRemoveAllUserPersistedLayers:function(){this.removeAllLayers();},handleRemoveUserPersistedLayer:function(_2a4){if(_2a4!=null&&_2a4!=""){this.deleteUserPersistedLayer(_2a4);}},handleAddUserPersistedLayerToMap:function(_2a5,_2a6){if(_2a5!=null&&_2a5!=""){this._addLayer(_2a5,_2a6);}},loadViewerConfigurationData:function(){var _2a7=null;_294.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"layersWidget",function(_2a8){_2a7=_2a8;});if(_2a7){for(var key in _2a7){if(key==null||key.toString()==null){continue;}if(key.toString().toLowerCase()=="allowAddLayers".toLowerCase()){this.allowAddLayers=_2a7[key];}else{if(key.toString().toLowerCase()=="showWKIDInAddLayers".toLowerCase()){if(_2a7[key]==false){this.showWKIDInAddLayers=false;}}}}}},handleManualLayerLoadedCallback:function(){_294.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Layer Added");VIEWER_UTILS.log("Layer Added",VIEWER_GLOBALS.LOG_TYPE.INFO);},handleManualLayerLoadErrorCallback:function(msg){if(msg!=null&&lang.isString(msg)){VIEWER_UTILS.log("Could not add layer: "+msg,VIEWER_GLOBALS.LOG_TYPE.ERROR);}else{VIEWER_UTILS.log("Add Layer Failed",VIEWER_GLOBALS.LOG_TYPE.ERROR);}},initListeners:function(){this.inherited(arguments);_294.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADDED,lang.hitch(this,this.addLayer));_294.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVED,lang.hitch(this,this.handleLayerRemoved));_294.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.CLEAR_STORED_LAYERS,lang.hitch(this,this.handleRemoveAllUserPersistedLayers));},populateLayerTypesDropdown:function(){var _2a9;for(var key in VIEWER_GLOBALS.LAYER_TYPES){_2a9=VIEWER_GLOBALS.LAYER_TYPES[key];var _2aa={label:_2a9.LABEL,value:_2a9.VALUE};this.addLayerTypeSelect.addOption(_2aa);}},handleAddLayers:function(_2ab){if(_2ab!=null&&lang.isArray(_2ab)){for(var i=0;i<_2ab.length;i++){this.addLayer(_2ab[i]);}}},addLayer:function(_2ac){if(_2ac==null){return;}var _2ad=VIEWER_UTILS.getLayerUniqueId(_2ac);if(_2ad==null||this.addedLayers[_2ad]!=null){return;}this.layersTocWidget.addLayer(_2ac);this.addedLayers[_2ad]={layer:_2ac};if(_2ac.url&&this.localStoragePersistSupported){this.saveLayer(_2ac);}},saveLayer:function(_2ae){var _2af=this.persistUserLayer(_2ae);if(_2af&&_2af.url){this.userPersistedLayersListWidget.addPersistedLayer(_2af);}},handleToggleLayerVisibility:function(_2b0){if(_2b0.visible){_2b0.hide();}else{_2b0.show();}},handleZoomToLayer:function(_2b1){_294.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,_2b1.fullExtent);},handleLayerAddUrlKeyUp:function(e){if(VIEWER_UTILS.isEnterKey(e)){this.addManualLayer();}else{var url=this.addLayerTextInput.get("value");if(url==""){return;}var _2b2=VIEWER_UTILS.getServiceTypeFromUrl(url);if(_2b2!=null){if(_2b2===VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER){this.addLayerTypeSelect.set("value",VIEWER_GLOBALS.LAYER_TYPES.IMAGE_SERVER.VALUE);}else{if(_2b2===VIEWER_GLOBALS.SERVICE_TYPES.FEATURE_SERVER){this.addLayerTypeSelect.set("value",VIEWER_GLOBALS.LAYER_TYPES.FEATURE_LAYER.VALUE);}else{if(_2b2===VIEWER_GLOBALS.SERVICE_TYPES.KML){this.addLayerTypeSelect.set("value",VIEWER_GLOBALS.LAYER_TYPES.KML.VALUE);}else{if(_2b2===VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER){var _2b3=REG_EXP_UTILS.featureLayerRegExp.test(url);if(_2b3){this.addLayerTypeSelect.set("value",VIEWER_GLOBALS.LAYER_TYPES.FEATURE_LAYER.VALUE);}else{this.addLayerTypeSelect.set("value",VIEWER_GLOBALS.LAYER_TYPES.MAP_SERVER.VALUE);}}}}}}}},addManualLayer:function(){var url=this.addLayerTextInput.get("value");if(url!=""){if(VIEWER_UTILS.endsWith(url,"/")){url=url.substring(0,url.length-1);}this._addLayer(url);}},_addLayer:function(_2b4,_2b5){var _2b6=_2b5;if(_2b6==null||_2b6==""){_2b6=this.addLayerLabelInput.get("value");}_294.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_FROM_URL,_2b4,{isOperationalLayer:true,canRemove:true,label:_2b6},this.manualLayerLoadedSuccessCallback,this.manualLayerLoadedErrCallback);},showConfirmDeleteLayerTooltip:function(_2b7,_2b8){this.deleteLayerConfirmedCallback=lang.hitch(this,this.handleRemoveLayerFromClick,_2b7);this.showDeleteLayerTooltip(_2b8);},handleRemoveLayerFromClick:function(_2b9){_294.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE,_2b9);},createConfirmDeleteLayerTooltip:function(){this.confirmDeleteLayerTooltip=new _298({confirmCallback:lang.hitch(this,this.handleConfirmedLayerDelete)});this.confirmDeleteLayerTooltip.on("hide",lang.hitch(this,function(){this.deleteLayerConfirmedCallback=null;}));},handleConfirmedLayerDelete:function(){if(lang.isFunction(this.deleteLayerConfirmedCallback)){this.deleteLayerConfirmedCallback();}this.deleteLayerConfirmedCallback=null;},showDeleteLayerTooltip:function(_2ba){if(_2ba==null){return;}if(this.confirmDeleteLayerTooltip==null){this.createConfirmDeleteLayerTooltip();}if(this.confirmDeleteLayerTooltip){this.confirmDeleteLayerTooltip.setAroundNode(_2ba);this.confirmDeleteLayerTooltip.show();}},handleLayerRemoved:function(_2bb){if(_2bb==null){return;}var _2bc=VIEWER_UTILS.getLayerUniqueId(_2bb);if(_2bc==null){return;}if(this.addedLayers[_2bc]!=null){this.layersTocWidget.removeLayer(_2bb);delete this.addedLayers[_2bc];}},hidePopups:function(){if(this.confirmDeleteLayerTooltip){this.confirmDeleteLayerTooltip.hide();}}});});},"esriviewer/loader/base/ViewerPlacementWindow":function(){define(["dojo/_base/declare","dojo/_base/window","dojo/dom-construct","./BaseViewerPlacement"],function(_2bd,_2be,_2bf,_2c0){return _2bd([_2c0],{label:"window",isAbsolutePositioned:true,isWindowless:false,initUI:function(){this.inherited(arguments);_2bf.place(this.mapDiv,_2be.body());},placeNavigationToolbar:function(_2c1){if(_2c1){_2c1.placeAt(_2be.body());}},placeHeader:function(_2c2){if(_2c2){_2c2.placeAt(_2be.body());}},placeViewerAccordion:function(_2c3){if(_2c3){_2c3.placeAt(_2be.body());}},placeMainToolbar:function(_2c4){if(_2c4){_2c4.placeAt(_2be.body());}},placeMainToolbarDropdown:function(_2c5){if(_2c5){_2bf.place(_2c5,_2be.body());}},placeMessagingWidget:function(_2c6){if(_2c6){_2c6.placeAt(_2be.body());}},placeThrobberWidget:function(_2c7){if(_2c7){_2c7.placeAt(_2be.body());}},placeBasemapGallery:function(_2c8){if(_2c8){_2c8.placeAt(_2be.body());}},placeMapScaleAndCoordinates:function(_2c9){if(_2c9!=null){_2bf.place(_2c9,_2be.body());}},placeCreateBookmarkWidget:function(_2ca){if(_2ca){_2ca.placeAt(_2be.body());}},placeMenuBarWidget:function(_2cb){if(_2cb){_2cb.placeAt(_2be.body());}},placeZoomToWidget:function(_2cc){if(_2cc){_2cc.placeAt(_2be.body());}}});});},"esriviewer/ui/draw/base/UserPersistedGraphicsListWidget":function(){define(["dojo/_base/declare","dojo/text!./template/UserPersistedGrahicsListingTemplate.html","../../base/UITemplatedWidget","dojo/_base/lang","./model/UserPersistedGraphicsListViewModel"],function(_2cd,_2ce,_2cf,lang,_2d0){return _2cd([_2cf],{bindingsApplied:false,templateString:_2ce,constructor:function(){this.userPersistedGraphics={};},postCreate:function(){this.inherited(arguments);this.viewModel=new _2d0();this.viewModel.on(this.viewModel.REMOVE_USER_PERSISTED_GRAPHICS,lang.hitch(this,this.handleRemoveUserPersistedGraphics));this.viewModel.on(this.viewModel.ADD_USER_PERSISTED_GRAPHICS_TO_MAP,lang.hitch(this,this.handleAddUserPersistedGraphicsToMap));},applyBindings:function(){if(!this.bindingsApplied){this.bindingsApplied=true;ko.applyBindings(this.viewModel,this.domNode);}},handleAddUserPersistedGraphicsToMap:function(_2d1){if(_2d1&&lang.isObject(_2d1)){this.onAddUserPersistedGraphicsToMap(_2d1);}},onAddUserPersistedGraphicsToMap:function(_2d2){},handleRemoveUserPersistedGraphics:function(_2d3){if(_2d3&&lang.isObject(_2d3)&&_2d3.label!=null&&_2d3.label!=""){this.onRemoveUserPersistedGraphics(_2d3.label);}},onRemoveUserPersistedGraphics:function(_2d4){},addExistingPersistedGraphicsItems:function(_2d5){for(var key in _2d5){this.viewModel.addedUserPersistedGraphics.push(_2d5[key]);}this.viewModel.sort();this.applyBindings();},addUserPersistedGraphics:function(_2d6){this.viewModel.addedUserPersistedGraphics.push(_2d6);this.viewModel.sort();}});});},"esriviewer/manager/base/ViewerManager":function(){define(["dojo/_base/declare","dojox/storage","dojo/topic","dojo/_base/window","dojo/_base/lang","./IdentityManagerMixin","../../base/Configurable","../../base/LocationServiceSupport","../../base/DataLoaderSupport","../../ui/tools/ViewerDefaultTools","../../map/MapManager","../../ui/toolbar/ActionsToolbarWidget","../../ui/bookmark/BookmarkController","../../portal/PortalViewerManagerSupportMixin","../../map/geometry/GeometryServiceController","../../ui/accordion/ToolsAccordion","./ViewerManagerUI","./WebMapTemplateConfigurationUtil","esri/urlUtils","esri/arcgis/utils","../../map/base/LayerQueryTools"],function(_2d7,_2d8,_2d9,_2da,lang,_2db,_2dc,_2dd,_2de,_2df,_2e0,_2e1,_2e2,_2e3,_2e4,_2e5,_2e6,_2e7,_2e8,_2e9,_2ea){return _2d7([_2e3,_2dc,_2dd,_2de,_2e6,_2db],{portalSharingRestUrl:"/sharing/rest",portalContentUrl:"/sharing/rest/content/items",baseConfigurationLoaded:false,forceHideCoreTimeSlider:false,useProxyForConfig:false,useProxyForPositionConfig:false,allowAccordionMove:true,allowAccordionCollapse:true,forceHideAccordionTab:false,configUrl:"config/baseConfig.json",viewerPositioningConfigUrl:"config/viewerPositioning.json",constructor:function(_2eb){lang.mixin(this,_2eb||{});this._initializeStorageProvider();var _2ec=_2e8.urlToObject(document.location.href);this.appId=_2ec.query?_2ec.query.appid:null;this.processConfig();},processConfig:function(){if(this.appId!=null){var _2ed=new _2e7();_2ed.loadConfiguration(this.appId).then(lang.hitch(this,this._handleWebMapTemplateConfigurationLoaded));}else{if(this.useProxyForConfig){this.loadProxiedConfig();}else{this.loadConfig();}}},_handleWebMapTemplateConfigurationLoaded:function(_2ee){this.handleConfigLoaded(_2ee);},handleConfigLoaded:function(_2ef){VIEWER_UTILS.debug("Configuration Loaded");this.viewerConfig=_2ef;if(_2ef.windowTitle){_2da.doc.title=_2ef.windowTitle;}else{_2da.doc.title="JavaScript Map Viewer";}if(this.viewerConfig&&this.viewerConfig.portal!=null&&lang.isObject(this.viewerConfig.portal)&&this.viewerConfig.portal.url){var _2f0=this.viewerConfig.portal.url;var _2f1=_2f0.toLowerCase();if(_2f1.indexOf("http://")<0&&_2f1.indexOf("https://")<0){_2f0="http://"+_2f0;}_2e9.arcgisUrl=VIEWER_UTILS.joinUrl(_2f0,this.portalContentUrl);}if(this.useProxyForPositionConfig){this.loadProxiedJson(this.viewerPositioningConfigUrl,lang.hitch(this,this.handleWindowPositionsConfigLoaded),lang.hitch(this,this.handleWindowPositionsConfigLoadFailed));}else{this.loadJson(this.viewerPositioningConfigUrl,lang.hitch(this,this.handleWindowPositionsConfigLoaded),lang.hitch(this,this.handleWindowPositionsConfigLoadFailed));}},startupViewer:function(){this._initListeners();this.initListeners();this._createViewerManager();this.createLayerQueryTools();},createLayerQueryTools:function(){this.layerQueryTools=new _2ea();},initListeners:function(){},_initListeners:function(){this.inherited(arguments);_2d9.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LOADED,lang.hitch(this,this.handleMapLoaded));_2d9.subscribe(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET,lang.hitch(this,this.handleGetConfiguration));_2d9.subscribe(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,lang.hitch(this,this.handleGetConfigurationKey));},handleGetConfiguration:function(_2f2){if(_2f2&&lang.isFunction(_2f2)){_2f2(this.viewerConfig);}},handleGetConfigurationKey:function(key,_2f3){if(key!=null&&key!=""&&_2f3&&lang.isFunction(_2f3)){_2f3(this.viewerConfig[key]);}},handleMapLoaded:function(map){this.map=map;PROJECTION_UTILS.setMapSpatialReference(map.spatialReference);this.loadControllers();this.loadUI();},loadUI:function(){this.inherited(arguments);},_initializePortalSupport:function(){return this.inherited(arguments);},loadControllers:function(){if(this.viewerConfig.geometryServiceUrl!=null&&this.viewerConfig.geometryServiceUrl){this.geometryServiceController=new _2e4();_2d9.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.CONTROLLER_CREATED);}else{_2d9.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.EXISTS,lang.hitch(this,function(_2f4){if(_2f4!=null&&lang.isFunction(_2f4)){_2f4(false);}}));}if(this.viewerConfig.locators!=null&&lang.isArray(this.viewerConfig.locators)){for(var i=0;i<this.viewerConfig.locators.length;i++){this.addLocator(this.viewerConfig.locators[i].url,this.viewerConfig.locators[i].label);}}this._createBookmarkController();},handleWindowPositionsConfigLoaded:function(_2f5){VIEWER_GLOBALS.windowPositioning=_2f5;this.createMessagingAndLogging();if(!this.baseConfigurationLoaded){this.handleBaseConfigurationsLoaded();}},handleWindowPositionsConfigLoadFailed:function(){VIEWER_GLOBALS.windowPositioning={};this.createMessagingAndLogging();if(!this.baseConfigurationLoaded){this.handleBaseConfigurationsLoaded();}},createMessagingAndLogging:function(){this._createLoggingWidget();this._createMessagingWidget();},handleBaseConfigurationsLoaded:function(){this.baseConfigurationLoaded=true;this.startupViewer();},_createViewerManager:function(){this._createLayersWidget();if(this._initializePortalSupport!=null&&lang.isFunction(this._initializePortalSupport)){_2d9.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.INITIALIZED,lang.hitch(this,function(){this.mapManager=new _2e0({webMapItem:this.viewerConfig.webMapItem});}));var _2f6=this._initializePortalSupport();if(!_2f6){this.mapManager=new _2e0();}}else{this.mapManager=new _2e0();}},_createLayersWidget:function(){this.createLayersWidget();},createLayersWidget:function(){},_createBookmarkController:function(){this.bookmarkController=new _2e2();},_loadBookmarks:function(){if(lang.isObject(this.viewerConfig.bookmarks)&&this.viewerConfig.bookmarks.url!=null){var _2f7=lang.hitch(this,function(_2f8){this._setServerBookmarks(_2f8);});this.loadJson(this.viewerConfig.bookmarks.url,_2f7);}this.mainToolbar.loadCookieBookmarks();},_setServerBookmarks:function(_2f9){this.mainToolbar.addStaticBookmarks(_2f9);},_initializeStorageProvider:function(){var _2fa=dojox.storage.manager.getProvider();_2fa.initialize();},processNavigationToolbarAddons:function(){},createViewerDefaultTools:function(){this.viewerDefaultTools=new _2df();this.createAddonTools();this.viewerDefaultTools.createConfigurationMenuItem();},_createViewerAccordion:function(){if(this.viewerConfig.toolsAccordion.create==null||this.viewerConfig.toolsAccordion.create!=false){_2d9.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.LOAD_DEFAULT_TOOLS,lang.hitch(this,this.createDefaultAccordionTools));this.viewerAccordion=new _2e5({allowCollapse:this.allowAccordionCollapse,movable:this.allowAccordionMove});_2d9.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.VIEWER_ACCORDION,this.viewerAccordion);}},_createViewerMainToolbar:function(){this.mainToolbar=new _2e1();_2d9.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAIN_TOOLBAR,this.mainToolbar);if(lang.isObject(this.viewerConfig.map)){this.mainToolbar.setBasemaps(this.viewerConfig.map.basemaps);}},createDefaultAccordionTools:function(){},handleToggleAccordion:function(){this.viewerAccordion.toggle();},createAddonTools:function(){}});});},"esriviewer/map/base/MapLayersTools":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","esri/layers/OpenStreetMapLayer","esri/layers/FeatureLayer","esri/layers/GraphicsLayer","esri/layers/ArcGISImageServiceLayer","esri/layers/KMLLayer","esri/layers/WMSLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/layers/ArcGISDynamicMapServiceLayer"],function(_2fb,_2fc,lang,_2fd,_2fe,_2ff,_300,_301,_302,_303,_304){return _2fb([],{labelServicesVisible:false,constructor:function(_305){lang.mixin(this,_305);this.loadViewerConfigurationData();this.currrentBasemapKey=null;this.labelServices={};this.timeEnabledLayers=[];this.operationalLayers={};this.graphicsLayers={};this.initListeners();},loadViewerConfigurationData:function(){if(this.mapConfiguration==null){var _306=null;_2fc.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_307){_306=_307;});if(_306){this.mapConfiguration=_306;}}},initListeners:function(){_2fc.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.REMOVE,lang.hitch(this,this.handleRemoveBasemap));_2fc.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_GRAPHICS_LAYER,lang.hitch(this,this.handleAddGraphicsLayer));_2fc.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.ADD,lang.hitch(this,this.handleAddBasemap));_2fc.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.SET,lang.hitch(this,this.changeBaseMaps));_2fc.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GET_CURRENT_URL,lang.hitch(this,this.handleGetCurrentBasemapUrl));_2fc.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GET_CURRENT,lang.hitch(this,this.handleGetCurrentBasemap));_2fc.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.SHOW,lang.hitch(this,this.showLabelServices));_2fc.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.HIDE,lang.hitch(this,this.hideLabelServices));_2fc.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.SERVICE_EXISTS,lang.hitch(this,this.handleLabelServiceExists));_2fc.subscribe(VIEWER_GLOBALS.EVENTS.MAP.TIME.GET_TIME_ENABLED_SERVICES,lang.hitch(this,this.handleGetTimeEnabledLayers));_2fc.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.OPERATIONAL.GET,lang.hitch(this,this.handleGetOperationalLayers));_2fc.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_FROM_URL,lang.hitch(this,this.handleAddLayerFromUrl));_2fc.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD,lang.hitch(this,this.handleAddLayer));_2fc.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_EXTERNAL_MANAGED_LAYER,lang.hitch(this,this.handleAddExternalManagedLayer));_2fc.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE_EXTERNAL_MANAGED_LAYER,lang.hitch(this,this.handleRemoveExternalManagedLayer));_2fc.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.GET_FEATURE_LAYER_IF_EXISTS,lang.hitch(this,this.handleGetFeatureLayerIfExists));_2fc.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE,lang.hitch(this,this.handleRemoveLayer));_2fc.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_REFERENCE_LAYER,lang.hitch(this,this.handleAddReferenceLayerRequest));_2fc.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE_REFERENCE_LAYER,lang.hitch(this,this.handleRemoveReferenceLayerRequest));_2fc.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.MOVE_LAYER_TO_TOP,lang.hitch(this,this.handleMoveLayerToTop));_2fc.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.MAKE_VISIBLE,lang.hitch(this,this.handleMakeLayerVisible));_2fc.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.MAKE_INVISIBLE,lang.hitch(this,this.handleMakeLayerInvisible));this.map.on("layer-add",lang.hitch(this,this._handleLayerAdded));},handleMakeLayerVisible:function(_308){if(_308!=null){_308.show();}},handleMakeLayerInvisible:function(_309){if(_309!=null){_309.hide();}},handleMoveLayerToTop:function(_30a){if(_30a){var _30b=this.map.layerIds.length;if(this.map.graphicsLayerIds!=null&&this.map.graphicsLayerIds.length!=null){_30b+=this.map.graphicsLayerIds.length;}this.map.reorderLayer(_30a,_30b);}},_handleLayerAdded:function(evt){if(evt==null||evt.layer==null){return;}var _30c=evt.layer;if(_30c!=null&&_30c.isReferenceLayer==null||!_30c.isReferenceLayer){if(_30c.timeInfo!=null){this.timeEnabledLayers.push(_30c);VIEWER_UTILS.log("Found time enabled layer",VIEWER_GLOBALS.LOG_TYPE.INFO);_2fc.publish(VIEWER_GLOBALS.EVENTS.MAP.TIME.TIME_LAYER_FOUND,_30c);}}if(_30c.isOperationalLayer!=null&&_30c.isOperationalLayer===true){VIEWER_UTILS.log("Added operational layer",VIEWER_GLOBALS.LOG_TYPE.INFO);_2fc.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADDED,_30c);}},handleGetFeatureLayerIfExists:function(_30d,_30e){if(_30d==null||_30d==""||_30e==null||!lang.isFunction(_30e)){return;}var _30f=_30d.toLowerCase();_30e(this.operationalLayers[_30f]);},handleAddGraphicsLayer:function(_310){if(_310!=null){this.map.addLayer(_310);var uuid=VIEWER_UTILS.generateUUID();_310.id=uuid;this.graphicsLayers[uuid]=_310;}},handleAddBasemap:function(_311,_312,_313){var id=_311.toLowerCase();if(this.basemaps[id]!=null){_313("Basemap Already Exists");}var _314=lang.hitch(this,this._handleBaseMapServiceDescriptionLoaded,_311,_312,_313);VIEWER_UTILS.getServiceDescription(_311,_314);},_handleBaseMapServiceDescriptionLoaded:function(_315,_316,_317,_318){if(this.isServiceTiledAndInMapSR(_318)){var id=_315.toLowerCase();var _319={id:id,label:REG_EXP_UTILS.getServiceNameFromUrl(_315),url:_315};this.basemaps[id]=_319;VIEWER_UTILS.debug("Added Basemap: "+id);_2fc.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.ADDED,_319,id);if(_316!=null&&lang.isFunction(_316)){_316(_319);}}else{if(_317!=null&&lang.isFunction(_317)){_317("Could not add basemap. Is the service cached and in the map spatial reference ("+this.map.spatialReference.wkid+")?");}}},handleRemoveLayer:function(_31a){if(_31a==null){return;}var _31b=VIEWER_UTILS.getLayerUniqueId(_31a);if(_31b!=null){if(this.operationalLayers[_31b]){delete this.operationalLayers[_31b];}}if(_31a instanceof _2ff){if(this.graphicsLayers[_31a.id]!=null){delete this.graphicsLayers[_31a.id];}}this.map.removeLayer(_31a);VIEWER_UTILS.debug("Removed Layer: "+_31a.name);_2fc.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVED,_31a);},handleGetOperationalLayers:function(_31c){if(_31c!=null&&lang.isFunction(_31c)){var _31d=[];for(var key in this.operationalLayers){_31d.push(this.operationalLayers[key]);}_31c(_31d);}},handleGetTimeEnabledLayers:function(_31e){if(_31e!=null&&lang.isFunction(_31e)){_31e(this.timeEnabledLayers);}},handleRemoveExternalManagedLayer:function(_31f){this.map.removeLayer(_31f);},handleAddExternalManagedLayer:function(_320){this.map.addLayer(_320);},handleAddLayer:function(_321,_322,_323,_324){if(_322&&_322.isOperationalLayer!=false){var _325=VIEWER_UTILS.getLayerUniqueId(_321);if(_325!=null){if(this.operationalLayers[_325]!=null){return;}}this.operationalLayers[_325]=_321;_321.isOperationalLayer=true;}else{_321.isOperationalLayer=false;}_321.canRemove=_322!=null&&_322.canRemove!=false;this.map.addLayer(_321);if(_323!=null&&lang.isFunction(_323)){_321.on("load",_323);}if(_324!=null&&lang.isFunction(_324)){var _326=function(){_324(_321);};_321.on("error",lang.hitch(this,_326));}VIEWER_UTILS.debug("Added Layer: "+_325);},handleAddLayerFromUrl:function(_327,_328,_329,_32a){var _32b=VIEWER_UTILS.getLayerUniqueId(_327);if(this.operationalLayers[_32b]!=null){if(_32a!=null&&lang.isFunction(_32a)){_32a("Layer has already been added to the map");}else{_2fc.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Layer has already been added to the map");}return;}var _32c=null;var type=VIEWER_UTILS.getServiceTypeFromUrl(_327);if(type){if(type==VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER){if(REG_EXP_UTILS.isFeatureLayer(_327)){_32c=new _2fe(_327,lang.mixin({mode:_2fe.MODE_ONDEMAND},_328||{}));}else{this._handleAddMapServiceLayer(_327,_328,_329,_32a);return;}}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.KML){_32c=new _301(_327);}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER){_32c=new _300(_327);}else{if(type===VIEWER_GLOBALS.SERVICE_TYPES.FEATURE_SERVER){_32c=new _2fe(_327,lang.mixin({mode:_2fe.MODE_ONDEMAND},_328||{}));}}}}}else{if(_327.indexOf("/wms/")>-1){_32c=new _302(_327,_328);}}if(_32c){_32c.canRemove=_328!=null&&_328.canRemove!=false;_32c.isOperationalLayer=_328!=null&&_328.isOperationalLayer!=null&&_328.isOperationalLayer!=false;_32c.layerAliasName=(_328&&_328.label)?_328.label:REG_EXP_UTILS.getServiceNameFromUrl(_327);if(_329!=null&&lang.isFunction(_329)){_32c.on("load",_329);}if(_32a!=null&&lang.isFunction(_32a)){_32c.on("error",_32a);}var _32d=this.operationalLayers;_32c.on("load",function(){_32d[_32b]=_32c;});VIEWER_UTILS.debug("Added Layer from URL: "+_327);this.map.addLayer(_32c);}else{if(lang.isFunction(_32a)){_32a("Could Not Add Layer");}}},_handleAddMapServiceLayer:function(_32e,_32f,_330,_331){var _332=lang.hitch(this,lang.hitch(this,this._handleAddMapServiceServiceDescriptionLoaded,_32e,_32f,_330,_331));VIEWER_UTILS.getServiceDescription(_32e,_332,_331);},_handleAddMapServiceServiceDescriptionLoaded:function(_333,_334,_335,_336,_337){var _338;if(_337!=null&&lang.isObject(_337)){if(this.isServiceTiledAndInMapSR(_337)){_338=new _303(_333);}else{_338=new _304(_333);}_338.isOperationalLayer=_334!=null&&_334.isOperationalLayer!=null&&_334.isOperationalLayer!=false;var _339=this.operationalLayers;_338.on("load",function(){_339[_338.url.toLowerCase()]=_338;});_338.serviceDescription=_337;}if(_338!=null){_338.name=REG_EXP_UTILS.getServiceNameFromUrl(_333);if(_334!=null&&_334.canRemove!=null){_338.canRemove=true;}if(_335!=null&&lang.isFunction(_335)){_338.on("load",_335);}if(_336!=null&&lang.isFunction(_336)){_338.on("error",_336);}VIEWER_UTILS.debug("Added Layer: "+_338.url);this.map.addLayer(_338);}},isServiceTiledAndInMapSR:function(_33a){if(_33a!=null&&lang.isObject(_33a)){return _33a.tileInfo!=null&&_33a.spatialReference!=null&&_33a.spatialReference.wkid==this.map.spatialReference.wkid;}return false;},handleLabelServiceExists:function(_33b){if(_33b!=null&&lang.isFunction(_33b)){var _33c=false;for(var key in this.labelServices){_33c=true;break;}_33b(_33c);}},handleRemoveBasemap:function(id){var _33d=this.basemaps[id];if(this.basemaps[id]!=null){if(this.currrentBasemapKey!=null&&this.currrentBasemapKey===id){this.map.removeLayer(this.currentBasemap);for(var key in this.basemaps){this.changeBaseMaps(key);break;}}delete this.basemaps[id];VIEWER_UTILS.debug("Removed Basemap: "+id);_2fc.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.REMOVED,id);}},changeBaseMaps:function(key){var _33e=this.basemaps[key];if(_33e){if(this.currrentBasemapKey!=null&&this.currrentBasemapKey===key){return;}if(this.currentBasemap!=null){this.map.removeLayer(this.currentBasemap);}if(_33e.isOpenStreetMap==null||_33e.isOpenStreetMap==false){this.currentBasemap=new _303(_33e.url);}else{this.currentBasemap=new _2fd();}this.map.addLayer(this.currentBasemap,0);VIEWER_UTILS.debug("Changed Basemap: "+key);this.currrentBasemapKey=key;}},handleGetCurrentBasemapUrl:function(_33f){if(_33f!=null&&lang.isFunction(_33f)){if(this.mapConfiguration.useBasemapGallery==null||this.mapConfiguration.useBasemapGallery!=true){_33f(this.basemaps[this.currrentBasemapKey].url);return;}else{var _340;_2fc.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.GET,function(_341){_340=_341;});if(_340){var _342=_340.getSelected();if(_342==null){if(this.webMapItem&&this.webMapItem.itemData&&this.webMapItem.itemData.baseMap&&this.webMapItem.itemData.baseMap.baseMapLayers&&this.webMapItem.itemData.baseMap.baseMapLayers&&lang.isArray(this.webMapItem.itemData.baseMap.baseMapLayers)&&this.webMapItem.itemData.baseMap.baseMapLayers.length>0){_33f(this.webMapItem.itemData.baseMap.baseMapLayers[0].url);return;}}else{if(_342&&_342.layers&&lang.isArray(_342.layers)&&_342.layers.length>0){_33f(_342.layers[0].url);return;}}}}_33f(null);}},handleGetCurrentBasemap:function(_343){if(_343!=null&&lang.isFunction(_343)){if(this.mapConfiguration.useBasemapGallery==null||this.mapConfiguration.useBasemapGallery!=true){_343(this.currrentBasemapKey);return;}else{var _344=null;_2fc.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.GET,function(_345){_344=_345;});if(_344){var _346=_344.getSelected();if(_346==null){if(this.webMapItem&&this.webMapItem.itemData&&this.webMapItem.itemData.baseMap&&this.webMapItem.itemData.baseMap.baseMapLayers&&this.webMapItem.itemData.baseMap.baseMapLayers&&lang.isArray(this.webMapItem.itemData.baseMap.baseMapLayers)&&this.webMapItem.itemData.baseMap.baseMapLayers.length>0){_343(new _303(this.webMapItem.itemData.baseMap.baseMapLayers[0].url));return;}}else{_343(_346);return;}}}}_343(null);},showLabelServices:function(){var _347;for(var key in this.labelServices){_347=this.labelServices[key];_347.show();this.handleMoveLayerToTop(_347);}VIEWER_UTILS.debug("Displayed Label Services");this.labelServicesVisible=true;},hideLabelServices:function(){for(var key in this.labelServices){this.labelServices[key].hide();}VIEWER_UTILS.debug("Hid Label Services");this.labelServicesVisible=false;},handleAddReferenceLayerRequest:function(_348,_349,_34a){if(_348==null||_348.url==null||_348.url==""){if(_34a!=null&&lang.isFunction(_34a)){_34a("Invalid Reference Layer");}}var id=VIEWER_UTILS.getLayerUniqueId(_348);if(this.labelServices[id]!=null){if(_34a!=null&&lang.isFunction(_34a)){_34a("Reference Layer Already Exists");}}var _34b=this._addReferenceLayer(_348);if(_34b!=null){if(_349!=null&&lang.isFunction(_349)){_349(_34b);}}else{if(_34a!=null&&lang.isFunction(_34a)){_34a("Could not add reference layer");}}},_addReferenceLayers:function(){if(this.mapConfiguration.referenceLayers!=null&&lang.isArray(this.mapConfiguration.referenceLayers)){var _34c;for(var i=0;i<this.mapConfiguration.referenceLayers.length;i++){_34c=this.mapConfiguration.referenceLayers[i];this._addReferenceLayer(_34c);}}},_addReferenceLayer:function(_34d){var _34e=this._getMapLayerFromLayerObject(_34d);if(_34e!=null){if(!this.labelServicesVisible){_34e.hide();}else{_34e.show();}var id=VIEWER_UTILS.getLayerUniqueId(_34e);if(id==null){return;}this.labelServices[id]=_34e;_34e.isReferenceLayer=true;this.map.addLayer(_34e);VIEWER_UTILS.log("Added Reference Layer: "+_34e.url,VIEWER_GLOBALS.LOG_TYPE.INFO);_2fc.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REFERENCE_LAYER_ADDED,_34e);return _34e;}return null;},handleRemoveReferenceLayerRequest:function(_34f){var id=VIEWER_UTILS.getLayerUniqueId(_34f);if(id==null){return;}if(this.labelServices[id]!=null){this.map.removeLayer(_34f);delete this.labelServices[id];var _350=false;for(var key in this.labelServices){_350=true;break;}VIEWER_UTILS.log("Removed reference layer",VIEWER_GLOBALS.LOG_TYPE.INFO);_2fc.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REFERENCE_LAYER_REMOVED,_34f,_350);}},addWebMapOperationalLayers:function(_351){var _352;var _353;for(var i=0;i<_351.itemData.operationalLayers.length;i++){_352=_351.itemData.operationalLayers[i];_353=_352.layerObject;_353.name=REG_EXP_UTILS.getServiceNameFromUrl(_353.url);_353.isOperationalLayer=true;var _354=VIEWER_UTILS.getLayerUniqueId(_353);if(this.operationalLayers[_354]==null){this.operationalLayers[_354]=_353;}VIEWER_UTILS.getServiceDescription(_353.url,lang.hitch(this,function(_355,_356){_355.serviceDescription=_356;this.handleLayerAdded(_355);},_353));}},_addOperationalLayers:function(){if(this.mapConfiguration.operationalLayers!=null&&lang.isArray(this.mapConfiguration.operationalLayers)){var _357;for(var i=0;i<this.mapConfiguration.operationalLayers.length;i++){_357=this.mapConfiguration.operationalLayers[i];var _358=this._getMapLayerFromLayerObject(_357);if(_358!=null){VIEWER_UTILS.getServiceDescription(_357.url,lang.hitch(this,function(_359,_35a){_359.serviceDescription=_35a;},_358));_358.name=REG_EXP_UTILS.getServiceNameFromUrl(_357.url);if(_357.label!=null&&_357.label!=""){_358.layerAliasName=_357.label;}this.map.addLayer(_358);_358.isOperationalLayer=true;var _35b=VIEWER_UTILS.getLayerUniqueId(_358);if(this.operationalLayers[_35b]==null){this.operationalLayers[_35b]=_358;}}}}},_getMapLayerFromLayerObject:function(_35c){if(_35c.type==null||_35c.type==""||_35c.url==null||_35c.url==""){return null;}var _35d={};if(_35c.visible!=null){_35d.visible=_35c.visible;}var _35e=_35c.type.toLowerCase();if(_35e==="tiled"){return new _303(_35c.url,_35d);}else{if(_35e==="dynamic"){var _35f=new _304(_35c.url,_35d);if(_35c.visibleLayerIds!=null&&lang.isArray(_35c.visibleLayerIds)){_35f.setVisibleLayers(_35c.visibleLayerIds);}return _35f;}else{if(_35e==="image"){return new _300(_35c.url,_35d);}else{if(_35e==="feature"){_35d=lang.mixin(_35d,{mode:_2fe.MODE_ONDEMAND,outFields:["*"]});var _360=new _2fe(_35c.url,_35d);if(_35c.mapLabel!=null&&_35c.mapLabel.field!=null&&_35c.mapLabel.field!=""){this._createFeatureLayerLabels(_360,_35c.mapLabel);}return _360;}else{if(_35e==="kml"){return new _301(_35c.url);}}}}}},loadMapConfigurationLayers:function(){this._addReferenceLayers();this._addOperationalLayers();},_createFeatureLayerLabels:function(_361,_362){require(["esri/layers/LabelLayer","dojo/_base/Color","esri/renderers/SimpleRenderer","esri/symbols/TextSymbol"],lang.hitch(this,function(_363,_364,_365,_366){var _367=_362.color!=null?_362.color:"#000";var _368=new _363({id:VIEWER_UTILS.generateUUID()});var _369=new _366().setColor(new _364(_367));var _36a=_362.fontSize!=null?_362.fontSize:"12pt";_369.font.setSize(_36a);var _36b=_362.fontFamily!=null?_362.fontFamily:"arial";_369.font.setFamily(_36b);var _36c=new _365(_369);_368.addFeatureLayer(_361,_36c,"${"+_362.field+"}");this.map.addLayer(_368);_361.on("visibility-change",lang.hitch(this,function(_36d,e){if(e&&e.visible){_36d.show();}else{_36d.hide();}},_368));_361.on("opacity-change",lang.hitch(this,function(_36e,e){if(e&&e.opacity!=null){_368.setOpacity(e.opacity);}},_368));}));}});});},"esriviewer/map/base/MapDisplayWidgets":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/window","dojo/dom-attr","dojo/dom-construct","dojo/dom-class","dojo/topic","esri/geometry/webMercatorUtils","esri/geometry/scaleUtils","esri/dijit/Scalebar"],function(_36f,lang,_370,_371,_372,_373,_374,_375,_376,_377){return _36f([],{useFooterCoordPosition:false,_defaultMgrsPrecision:6,showMgrs:false,showUTM:false,showLatLong:true,hideMapScale:false,showScaleBar:false,constructor:function(_378){lang.mixin(this,_378);this.mgrsPrecision=this._defaultMgrsPrecision;this.loadViewerConfigurationData();this.createMapScaleAndCoordsElement();this.initListeners();},loadViewerConfigurationData:function(){var _379=null;_374.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_37a){_379=_37a;});if(_379&&lang.isObject(_379)){if(_379.display!=null&&lang.isObject(_379.display)){if(_379.display.showScale!=null&&_379.display.showScale===false){this.hideMapScale=true;}if(_379.display.showScaleBar!=null&&_379.display.showScaleBar===true){this.showScaleBar=true;}if(_379.display.showMGRS!=null&&_379.display.showMGRS===true){this.showMgrs=true;}if(_379.display.showUTM!=null&&_379.display.showUTM===true){this.showUTM=true;}if(_379.display.showLatLong!=null&&_379.display.showLatLong===false){this.showLatLong=false;}if(_379.display.mgrsPrecision!=null){this.mgrsPrecision=parseInt(_379.display.mgrsPrecision,10);}}}var _37b=null;_374.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"footerTogglerWidget",function(_37c){_37b=_37c;});this.useFooterCoordPosition=_37b!=null&&lang.isObject(_37b)&&_37b.create;},initListeners:function(){_374.subscribe(VIEWER_GLOBALS.EVENTS.MAP.INFO_WINDOW.HIDE,lang.hitch(this,this.handleHideInfoWindow));if(this.showLatLong||this.showMgrs||this.showUTM){this.map.on("mouse-move",lang.hitch(this,this.showCoords));}},handleHideInfoWindow:function(){if(this.map&&this.map.infoWindow&&this.map.infoWindow.isShowing){this.map.infoWindow.hide();}},createMapScaleAndCoordsElement:function(){var _37d=_372.create("div",{className:"threePixelBorderRadius mapalmanac defaultBackground"});if(this.useFooterCoordPosition){_373.add(_37d,"mapScaleAndCoordsContainerWithFooter");}else{_373.add(_37d,"mapScaleAndCoordsContainer");}if(!this.hideMapScale){this.scaleInfoElement=_372.create("span",{className:"mapScaleInfoInner"});_372.place(this.scaleInfoElement,_37d);}if(this.showScaleBar){var _37e=_372.create("div",{className:"threePixelBorderRadius  defaultBackground"});if(this.useFooterCoordPosition){_373.add(_37e,"esriScalebarContainerWithFooter");}else{_373.add(_37e,"esriScalebarContainer");}var _37f=_372.create("div");_372.place(_37f,_37e);_372.place(_37e,_370.body());var _380=new _377({map:this.map,scalebarUnit:"dual"},_37f);}if(this.showLatLong||this.showMgrs||this.showUTM){if(!this.hideMapScale){_372.place(_372.create("span",{innerHTML:"|"}),_37d);}if(this.showLatLong){this.latLongCoordsInfoElement=_372.create("span",{className:"mapCoordsInfoInner"});_372.place(this.latLongCoordsInfoElement,_37d);}if(this.showMgrs){if(this.showLatLong){_372.place(_372.create("span",{innerHTML:"|"}),_37d);}this.mrgsCoordsInfoElement=_372.create("span",{className:"mapCoordsInfoInner"});_372.place(this.mrgsCoordsInfoElement,_37d);}if(this.showUTM){if(this.showLatLong||this.showMgrs){_372.place(_372.create("span",{innerHTML:"|"}),_37d);}this.utmCoordsInfoElement=_372.create("span",{className:"mapCoordsInfoInner"});_372.place(this.utmCoordsInfoElement,_37d);}}_374.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAP_SCALE_AND_COORDINATES,_37d);},showCoords:function(evt){try{if(this.latLongCoordsInfoElement||this.mrgsCoordsInfoElement||this.utmCoordsInfoElement){var pnt=_375.webMercatorToGeographic(evt.mapPoint||evt);if(this.latLongCoordsInfoElement){if(pnt===null||pnt===undefined){return;}_371.set(this.latLongCoordsInfoElement,"innerHTML","Lat: "+pnt.y.toFixed(2)+"&deg"+((pnt.y<0)?"S":"N")+"  Lon: "+pnt.x.toFixed(2)+"&deg"+((pnt.x<0)?"W":"E"));}if(this.mrgsCoordsInfoElement){_371.set(this.mrgsCoordsInfoElement,"innerHTML","<span style='font-weight:bold'>MGRS</span> "+PROJECTION_UTILS.LLtoMGRS(pnt.y,pnt.x,this.mgrsPrecision));}if(this.utmCoordsInfoElement){var _381=PROJECTION_UTILS.LLtoUTM(pnt.y,pnt.x);if(_381.northing==null||isNaN(_381.northing)){_381.northing="?";}else{_381.northing=_381.northing.toFixed(3);}if(_381.easting==null||isNaN(_381.easting)){_381.easting="?";}else{_381.easting=_381.easting.toFixed(3);}_371.set(this.utmCoordsInfoElement,"innerHTML","<span style='font-weight:bold'>UTM</span> "+"N: "+_381.northing+" E: "+_381.easting+"   Z: "+_381.zone);}}}catch(e){}},showScale:function(){var a=Math.round(_376.getScale(this.map));a>999&&a<=999999?a=Math.round(a/1000)+" K":a>999999?a=Math.round(a/1000000)+" M":a>0&&a<=999&&(a=Math.round(a)+" Ft");_371.set(this.scaleInfoElement,"innerHTML","<span style='font-weight:bold'>Scale</span> 1 <b>:</b> "+a);}});});},"dijit/PopupMenuItem":function(){define(["dojo/_base/declare","dojo/dom-style","dojo/_base/lang","dojo/query","./popup","./registry","./MenuItem","./hccss"],function(_382,_383,lang,_384,pm,_385,_386){return _382("dijit.PopupMenuItem",_386,{_fillContent:function(){if(this.srcNodeRef){var _387=_384("*",this.srcNodeRef);this.inherited(arguments,[_387[0]]);this.dropDownContainer=this.srcNodeRef;}},_openPopup:function(_388,_389){var _38a=this.popup;pm.open(lang.delegate(_388,{popup:this.popup,around:this.domNode}));if(_389&&_38a.focus){_38a.focus();}},_closePopup:function(){pm.close(this.popup);this.popup.parentMenu=null;},startup:function(){if(this._started){return;}this.inherited(arguments);if(!this.popup){var node=_384("[widgetId]",this.dropDownContainer)[0];this.popup=_385.byNode(node);}this.ownerDocumentBody.appendChild(this.popup.domNode);this.popup.domNode.setAttribute("aria-labelledby",this.containerNode.id);this.popup.startup();this.popup.domNode.style.display="none";if(this.arrowWrapper){_383.set(this.arrowWrapper,"visibility","");}this.focusNode.setAttribute("aria-haspopup","true");},destroyDescendants:function(_38b){if(this.popup){if(!this.popup._destroyed){this.popup.destroyRecursive(_38b);}delete this.popup;}this.inherited(arguments);}});});},"dojox/flash":function(){define(["./flash/_base"],function(){});},"dijit/form/RadioButton":function(){define(["dojo/_base/declare","./CheckBox","./_RadioButtonMixin"],function(_38c,_38d,_38e){return _38c("dijit.form.RadioButton",[_38d,_38e],{baseClass:"dijitRadio"});});},"esriviewer/ui/layers/base/LayersLocalStorageMixin":function(){define(["dojo/_base/declare","dojo/has"],function(_38f,has){return _38f([],{localStoragePersistSupported:true,constructor:function(){if(!(has("ie")<8)){this.localStoragePersistSupported=false;}this.storageProvider=dojox.storage.manager.getProvider();if(this.storageProvider){this.localStoragePersistSupported=true;}this.persistedUserLayers=this.loadPersistedUserLayers();},deleteUserPersistedLayer:function(_390){if(_390!=null&&_390!=""){if(this.persistUserLayerExists(_390)){var _391=_390.toLowerCase();delete this.persistedUserLayers[_391];this.persist();}}},removeAllLayers:function(){this.persistedUserLayers={};this.persist();},persistUserLayerExists:function(_392){if(_392==null||_392==""){return true;}return this.persistedUserLayers[_392]!=null;},persistUserLayer:function(_393){if(_393==null||_393.url==null){return null;}var _394=_393.url.toLowerCase();if(_394==null){return null;}if(this.persistUserLayerExists(_394)){return null;}else{var name=VIEWER_UTILS.getLayerNameFromLayer(_393);var _395={url:_393.url,name:name};this.persistedUserLayers[_394]=_395;this.persist();return _395;}},loadPersistedUserLayers:function(){if(this.storageProvider){if(this.storageProvider.hasKey(VIEWER_GLOBALS.STORAGE.LABELS.LAYERS)){return this.storageProvider.get(VIEWER_GLOBALS.STORAGE.LABELS.LAYERS);}}return {};},persist:function(){this.storageProvider.put(VIEWER_GLOBALS.STORAGE.LABELS.LAYERS,this.persistedUserLayers);}});});},"esriviewer/ui/layers/base/LayersTocWidgetContextMenu":function(){define(["dojo/_base/declare","dojo/topic","dojo/on","dojo/_base/lang","dojo/dom-style","dijit/Menu","dijit/MenuItem","dijit/PopupMenuItem","dijit/registry","dojo/_base/connect","esri/layers/ArcGISImageServiceLayer","esri/layers/FeatureLayer","esri/layers/ArcGISDynamicMapServiceLayer"],function(_396,_397,on,lang,_398,Menu,_399,_39a,_39b,con,_39c,_39d,_39e){return _396([],{createQueryBuilderMenuItems:false,showRemoveMenuItems:true,constructor:function(_39f){lang.mixin(this,_39f);this.initialize();},initialize:function(){this.loadViewerConfigurationData();this.createServerMenu();this.createGroupLayerMenu();this.createLayerMenu();this.createGraphicsLayerMenu();this.initListeners();},initListeners:function(){this.zoomToExtentMenuItem.on("click",lang.hitch(this,this.handleZoomToExtent));if(this.createQueryBuilderMenuItems){this.queryServiceMenuItem.on("click",lang.hitch(this,this.handleQueryBuilderServiceClick));this.queryLayerMenuItem.on("click",lang.hitch(this,this.handleQueryBuilderLayerClick));}this.openMapServiceDescriptionMenu.on("click",lang.hitch(this,this.handleOpenMapServerDescriptionMenuRequest));this.confirmRemoveLayerMenuItem.on("click",lang.hitch(this,this.handleRemoveLayer));this.confirmRemoveGraphicLayerMenuItem.on("click",lang.hitch(this,this.handleRemoveGraphicsLayer));con.connect(this.serverNodeMenu,"_openMyself",lang.hitch(this,this.handleServerMenuOpen));con.connect(this.groupNodeMenu,"_openMyself",lang.hitch(this,this.handleGroupMenuOpen));con.connect(this.graphicsLayerMenu,"_openMyself",lang.hitch(this,this.handleGraphicsLayerMenuOpen));con.connect(this.layerNodeMenu,"_openMyself",lang.hitch(this,this.handleLayerMenuOpen));},loadViewerConfigurationData:function(){var _3a0=null;_397.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"queryBuilder",function(_3a1){_3a0=_3a1;});if(_3a0&&lang.isObject(_3a0)){this.createQueryBuilderMenuItems=_3a0.create===true;}},createServerMenu:function(){this.serverNodeMenu=new Menu();this.zoomToExtentMenuItem=new _399({label:"Zoom To Extent",iconClass:"commonIcons16 locationGoTo"});this.serverNodeMenu.addChild(this.zoomToExtentMenuItem);if(this.createQueryBuilderMenuItems){this.queryServiceMenuItem=new _399({label:"Query Builder",iconClass:"commonIcons16 sql"});this.serverNodeMenu.addChild(this.queryServiceMenuItem);}this.openMapServiceDescriptionMenu=new _399({label:"View Service Description",iconClass:"serviceDescriptionIcon"});this.serverNodeMenu.addChild(this.openMapServiceDescriptionMenu);var _3a2=new Menu();this.confirmRemoveLayerMenuItem=new _399({label:"Confirm",iconClass:"commonIcons16 question"});_3a2.addChild(this.confirmRemoveLayerMenuItem);this.removeServiceMenuItem=new _39a({iconClass:"commonIcons16 delete",label:"Remove Layer",popup:_3a2});this.serverNodeMenu.addChild(this.removeServiceMenuItem);this.serverNodeMenu.startup();},createGraphicsLayerMenu:function(){this.graphicsLayerMenu=new Menu();var _3a3=new Menu();this.confirmRemoveGraphicLayerMenuItem=new _399({label:"Confirm",iconClass:"commonIcons16 question"});_3a3.addChild(this.confirmRemoveGraphicLayerMenuItem);this.removeGraphicLayerMenuItem=new _39a({iconClass:"commonIcons16 delete",label:"Remove Graphics Layer",popup:_3a3});this.graphicsLayerMenu.addChild(this.removeGraphicLayerMenuItem);this.graphicsLayerMenu.startup();},createLayerMenu:function(){this.layerNodeMenu=new Menu();if(this.createQueryBuilderMenuItems){this.queryLayerMenuItem=new _399({label:"Query Builder",iconClass:"commonIcons16 sql"});this.layerNodeMenu.addChild(this.queryLayerMenuItem);}this.layerNodeMenu.startup();},createGroupLayerMenu:function(){this.groupNodeMenu=new Menu();this.groupNodeMenu.startup();_398.set(this.groupNodeMenu.domNode,"display","none");},handleGroupMenuOpen:function(){_398.set(this.groupNodeMenu.domNode,"display","none");return false;},bindNodeToGraphicsLayerMenu:function(node){this.bindNode(node,this.graphicsLayerMenu);},bindNodeToServerMenu:function(node){this.bindNode(node,this.serverNodeMenu);},bindNodeToGroupMenu:function(node){this.bindNode(node,this.groupNodeMenu);},bindNodeToLayerMenu:function(node){this.bindNode(node,this.layerNodeMenu);},bindNodeToNoContentMenu:function(node){on(node,"contextmenu",function(e){e.stopPropagation();});},bindNode:function(node,menu){if(node&&menu&&menu.bindDomNode){menu.bindDomNode(node);}},handleRemoveGraphicsLayer:function(){if(this.currentGraphicsLayerNodeFromMenu&&this.currentGraphicsLayerNodeFromMenu.item){var _3a4=this.getTreeStore().getValue(this.currentGraphicsLayerNodeFromMenu.item,"layer");if(_3a4){_397.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE,_3a4);}}},handleGraphicsLayerMenuOpen:function(e){this.currentGraphicsLayerNodeFromMenu=_39b.getEnclosingWidget(e.target);if(this.currentGraphicsLayerNodeFromMenu&&this.currentGraphicsLayerNodeFromMenu.item){var _3a5=this.getTreeStore().getValue(this.currentGraphicsLayerNodeFromMenu.item,"layer");if(_3a5){if(_3a5.removable!=null&&_3a5.removable===true){this.removeGraphicLayerMenuItem.attr("disabled",false);}else{this.removeGraphicLayerMenuItem.attr("disabled",true);}}}},handleLayerMenuOpen:function(e){if(this.queryLayerMenuItem){this.currentLayerNodeFromMenu=_39b.getEnclosingWidget(e.target);if(this.currentLayerNodeFromMenu&&this.currentLayerNodeFromMenu.item){var _3a6=this.getTreeStore().getValue(this.currentLayerNodeFromMenu.item,"layer");if(_3a6){this.queryLayerMenuItem.attr("disabled",_3a6.capabilities.indexOf("Query")<0);}}}},handleServerMenuOpen:function(e){this.currentServerNodeFromMenu=_39b.getEnclosingWidget(e.target);if(this.currentServerNodeFromMenu&&this.currentServerNodeFromMenu.item){var _3a7=this.getTreeStore().getValue(this.currentServerNodeFromMenu.item,"layer");if(_3a7){if(_3a7.canRemove!=null&&_3a7.canRemove===true){this.removeServiceMenuItem.attr("disabled",false);}else{this.removeServiceMenuItem.attr("disabled",true);}if(this.queryServiceMenuItem){var _3a8=false;if(_3a7 instanceof _39e){_3a8=false;}else{_3a8=_3a7 instanceof _39c||(_3a7.capabilities&&_3a7.capabilities.indexOf("Query")>-1);}this.queryServiceMenuItem.attr("disabled",!_3a8);}}}},handleZoomToExtent:function(){if(this.currentServerNodeFromMenu&&this.currentServerNodeFromMenu.item){var _3a9=this.getTreeStore().getValue(this.currentServerNodeFromMenu.item,"layer");if(_3a9&&_3a9.initialExtent&&!isNaN(_3a9.initialExtent.xmin)&&!isNaN(_3a9.initialExtent.xmax)&&!isNaN(_3a9.initialExtent.xmax)&&!isNaN(_3a9.initialExtent.ymax)){_397.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,_3a9.initialExtent);}}this.currentServerNodeFromMenu=null;},handleRemoveLayer:function(){if(this.currentServerNodeFromMenu&&this.currentServerNodeFromMenu.item){var _3aa=this.getTreeStore().getValue(this.currentServerNodeFromMenu.item,"layer");if(_3aa){if(_3aa.canRemove!=null&&_3aa.canRemove===true){_397.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE,_3aa);}}}this.currentServerNodeFromMenu=null;},handleOpenMapServerDescriptionMenuRequest:function(){if(this.currentServerNodeFromMenu&&this.currentServerNodeFromMenu.item){var _3ab=this.getTreeStore().getValue(this.currentServerNodeFromMenu.item,"layer");if(_3ab&&_3ab.url){this.openUrlInWindow(_3ab.url);}}this.currentMapServerNodeFromMenu=null;},handleQueryBuilderServiceClick:function(){if(this.currentServerNodeFromMenu&&this.currentServerNodeFromMenu.item){var _3ac=this.getTreeStore().getValue(this.currentServerNodeFromMenu.item,"layer");if(_3ac){if(_3ac instanceof _39c){_397.publish(VIEWER_GLOBALS.EVENTS.QUERY_BUILDER.SET_IMAGE_SERVICE_LAYER,_3ac);}else{if(_3ac instanceof _39d){_397.publish(VIEWER_GLOBALS.EVENTS.QUERY_BUILDER.SET_FEATURE_SERVICE_LAYER,_3ac);}}}}this.currentMapServerNodeFromMenu=null;},handleQueryBuilderLayerClick:function(){if(this.currentLayerNodeFromMenu&&this.currentLayerNodeFromMenu.item){var _3ad=this.getTreeStore().getValue(this.currentLayerNodeFromMenu.item,"layer");var _3ae=this.getTreeStore().getValue(this.currentLayerNodeFromMenu.item,"info");_397.publish(VIEWER_GLOBALS.EVENTS.QUERY_BUILDER.SET_MAP_SERVICE_LAYER,_3ad,_3ae);}this.currentMapServerNodeFromMenu=null;},openUrlInWindow:function(url){if(url){window.open(url);}},getTreeStore:function(){return this.tree.model.store;}});});},"esriviewer/ui/draw/base/MapDrawSupport":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/Color","dojo/_base/lang","dojo/dom-construct","dijit/form/TextBox","dijit/TooltipDialog","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Extent","esri/geometry/screenUtils","esri/graphic","esri/symbols/TextSymbol","esri/symbols/Font"],function(_3af,_3b0,_3b1,lang,_3b2,_3b3,_3b4,_3b5,_3b6,_3b7,_3b8,_3b9,_3ba,_3bb,Font){return _3af([],{constructor:function(){this.polygonOptions={};this.pointOptions={};this.envelopeOptions={};this.lineOptions={};this.geometryAddedCallback=lang.hitch(this,this.geometryAdded);},clearDraw:function(){this.currentDrawType=null;},setDraw:function(type){if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT){this.activatePointDraw();}else{if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE){this.activatePolylineDraw(this.freehandActive);}else{if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_LINE){this.activateLineDraw();}else{if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON){this.activatePolygonDraw(this.freehandActive);}else{if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_RECTANGLE){this.activateRectangleDraw();}else{if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT){this.activatePointDraw();}}}}}}this.currentDrawType=type;},activatePointDraw:function(){this.cancelDrawChangeListener();_3b0.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.POINT_INPUT,this.geometryAddedCallback,this.pointOptions);this.setupClearDrawCallback();},activateLineDraw:function(){this.cancelDrawChangeListener();_3b0.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.LINE_INPUT,this.geometryAddedCallback,this.lineOptions);this.setupClearDrawCallback();},activatePolylineDraw:function(_3bc){this.cancelDrawChangeListener();if(_3bc==null||_3bc===false){_3b0.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.POLYLINE_INPUT,this.geometryAddedCallback,this.lineOptions);}else{_3b0.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.FREEHAND_POLYLINE_INPUT,this.geometryAddedCallback,this.lineOptions);}this.setupClearDrawCallback();},activatePolygonDraw:function(_3bd){this.cancelDrawChangeListener();if(_3bd==null||_3bd===false){_3b0.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.POLYGON_INPUT,this.geometryAddedCallback,this.polygonOptions);}else{_3b0.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.FREEHAND_POLYGON_INPUT,this.geometryAddedCallback,this.polygonOptions);}this.setupClearDrawCallback();},activateRectangleDraw:function(){this.cancelDrawChangeListener();_3b0.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.RECTANGLE_INPUT,this.geometryAddedCallback,this.envelopeOptions);this.setupClearDrawCallback();},cancelDrawChangeListener:function(){if(this.toolChangeConnect){this.toolChangeConnect.remove();this.toolChangeConnect=null;}},geometryAdded:function(_3be){if(_3be==null){return;}var _3bf=null;var type=null;if(_3be instanceof _3b5){type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT;if(this.currentDrawType==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT){type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT;_3bf=this.cloneTextSymbol(this.textSymbol);_3bf.setText("");var _3c0;var _3c1;_3b0.publish(VIEWER_GLOBALS.EVENTS.MAP.DIMENSIONS.GET,function(_3c2){_3c0=_3c2;});_3b0.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,function(_3c3){_3c1=_3c3;});var _3c4=_3b9.toScreenPoint(_3c1,_3c0.width,_3c0.height,_3be);this.showTextSymbolTooltip(_3c4);}else{type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT;_3bf=this.pointSymbol;}}else{if(_3be instanceof _3b6){_3bf=this.lineSymbol;type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE;}else{if(_3be instanceof _3b7){_3bf=this.polygonSymbol;type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON;}else{if(_3be instanceof _3b8){_3bf=this.envelopeSymbol;type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_RECTANGLE;}}}}if(_3bf!=null&&type!=null){if(type===VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT){this.currentTextGraphic=new _3ba(_3be,_3bf);}else{var _3c5=new _3ba(_3be,_3bf);var uuid=VIEWER_UTILS.generateUUID();this.onAnnotationCreated({id:uuid,type:type,graphic:_3c5});}}},onClearDraw:function(){},onAnnotationCreated:function(_3c6){},setupClearDrawCallback:function(){this.toolChangeConnect=_3b0.subscribe(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,lang.hitch(this,this.handleClearDraw));},handleClearDraw:function(){this.cancelDrawChangeListener();this.clearDraw();this.onClearDraw();},createTextSymbolLabelTooltip:function(){var _3c7=_3b2.create("div");var _3c8=_3b2.create("span",{innerHTML:"Label: ",className:"textSymbolInputLabel"});this.textSymbolLabelInput=new _3b3({value:"Label"});this.textSymbolLabelInput.on("keyUp",lang.hitch(this,this.handleTextSymbolKeyUp));_3b2.place(_3c8,_3c7);_3b2.place(this.textSymbolLabelInput.domNode,_3c7);this.textSymbolLabelTooltip=new _3b4({content:_3c7});},handleTextSymbolKeyUp:function(e){if(VIEWER_UTILS.isEnterKey(e)){this.finalizeTextSymbol();this.hideTextSymbolTooltip();}},finalizeTextSymbol:function(){if(this.currentTextGraphic==null||this.currentTextGraphic.symbol==null){return;}var _3c9=this.textSymbolLabelInput.get("value");if(_3c9==""){_3c9="Label";}this.currentTextGraphic.symbol.setText(_3c9);var uuid=VIEWER_UTILS.generateUUID();this.onAnnotationCreated({id:uuid,type:VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT,graphic:this.currentTextGraphic});this.currentTextSymbol=null;},showTextSymbolTooltip:function(_3ca){if(this.textSymbolLabelTooltip==null){this.createTextSymbolLabelTooltip();}if(this.textSymbolLabelTooltip){dijit.popup.open({popup:this.textSymbolLabelTooltip,x:_3ca.x,y:_3ca.y});this.textSymbolLabelInput.set("value","");this.textSymbolLabelInput.focus();}},hideTextSymbolTooltip:function(){if(this.textSymbolLabelTooltip){dijit.popup.close(this.textSymbolLabelTooltip);}},cloneTextSymbol:function(){var _3cb=new _3bb("");_3cb.setColor(new _3b1(this.textSymbol.color));_3cb.setAlign(this.textSymbol.align);_3cb.setAngle(this.textSymbol.angle);_3cb.setFont(new Font(this.textSymbol.font.size));_3cb.font.setWeight(this.textSymbol.font.weight);_3cb.font.setStyle(this.textSymbol.font.style);return _3cb;}});});},"esriviewer/map/base/MapTimeTools":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang"],function(_3cc,_3cd,lang){return _3cc([],{constructor:function(_3ce){lang.mixin(this,_3ce);this.initListeners();},initListeners:function(){_3cd.subscribe(VIEWER_GLOBALS.EVENTS.MAP.TIME.CLEAR_TIME_EXTENT,lang.hitch(this,this.handleClearTimeExtent));_3cd.subscribe(VIEWER_GLOBALS.EVENTS.MAP.TIME.SET_MAP_TIME_SLIDER,lang.hitch(this,this.handleSetMapTimeSlider));},handleSetMapTimeSlider:function(_3cf){this.map.setTimeSlider(_3cf);_3cd.publish(VIEWER_GLOBALS.EVENTS.MAP.TIME.MAP_TIME_EXTENT_SET);},handleClearTimeExtent:function(){this.map.setTimeSlider(null);this.map.setTimeExtent(null);_3cd.publish(VIEWER_GLOBALS.EVENTS.MAP.TIME.MAP_TIME_EXTENT_CLEARED);}});});},"dojox/storage/LocalStorageProvider":function(){define(["dijit","dojo","dojox","dojo/require!dojox/storage/Provider,dojox/storage/manager"],function(_3d0,dojo,_3d1){dojo.provide("dojox.storage.LocalStorageProvider");dojo.require("dojox.storage.Provider");dojo.require("dojox.storage.manager");dojo.declare("dojox.storage.LocalStorageProvider",[_3d1.storage.Provider],{store:null,initialize:function(){this.store=localStorage;this.initialized=true;_3d1.storage.manager.loaded();},isAvailable:function(){return typeof localStorage!="undefined";},put:function(key,_3d2,_3d3,_3d4){this._assertIsValidKey(key);_3d4=_3d4||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_3d4);var _3d5=this.getFullKey(key,_3d4);_3d2=dojo.toJson(_3d2);try{this.store.setItem(_3d5,_3d2);if(_3d3){_3d3(this.SUCCESS,key,null,_3d4);}}catch(e){if(_3d3){_3d3(this.FAILED,key,e.toString(),_3d4);}}},get:function(key,_3d6){this._assertIsValidKey(key);_3d6=_3d6||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_3d6);key=this.getFullKey(key,_3d6);return dojo.fromJson(this.store.getItem(key));},getKeys:function(_3d7){_3d7=_3d7||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_3d7);_3d7="__"+_3d7+"_";var keys=[];for(var i=0;i<this.store.length;i++){var _3d8=this.store.key(i);if(this._beginsWith(_3d8,_3d7)){_3d8=_3d8.substring(_3d7.length);keys.push(_3d8);}}return keys;},clear:function(_3d9){_3d9=_3d9||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_3d9);_3d9="__"+_3d9+"_";var keys=[];for(var i=0;i<this.store.length;i++){if(this._beginsWith(this.store.key(i),_3d9)){keys.push(this.store.key(i));}}dojo.forEach(keys,dojo.hitch(this.store,"removeItem"));},remove:function(key,_3da){_3da=_3da||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_3da);this.store.removeItem(this.getFullKey(key,_3da));},getNamespaces:function(){var _3db=[this.DEFAULT_NAMESPACE];var _3dc={};_3dc[this.DEFAULT_NAMESPACE]=true;var _3dd=/^__([^_]*)_/;for(var i=0;i<this.store.length;i++){var _3de=this.store.key(i);if(_3dd.test(_3de)==true){var _3df=_3de.match(_3dd)[1];if(typeof _3dc[_3df]=="undefined"){_3dc[_3df]=true;_3db.push(_3df);}}}return _3db;},isPermanent:function(){return true;},getMaximumSize:function(){return _3d1.storage.SIZE_NO_LIMIT;},hasSettingsUI:function(){return false;},isValidKey:function(_3e0){if(_3e0===null||_3e0===undefined){return false;}return /^[0-9A-Za-z_-]*$/.test(_3e0);},isValidNamespace:function(_3e1){if(_3e1===null||_3e1===undefined){return false;}return /^[0-9A-Za-z-]*$/.test(_3e1);},getFullKey:function(key,_3e2){return "__"+_3e2+"_"+key;},_beginsWith:function(_3e3,_3e4){if(_3e4.length>_3e3.length){return false;}return _3e3.substring(0,_3e4.length)===_3e4;},_assertIsValidNamespace:function(_3e5){if(this.isValidNamespace(_3e5)===false){throw new Error("Invalid namespace given: "+_3e5);}},_assertIsValidKey:function(key){if(this.isValidKey(key)===false){throw new Error("Invalid key given: "+key);}}});_3d1.storage.manager.register("dojox.storage.LocalStorageProvider",new _3d1.storage.LocalStorageProvider());});},"dojox/storage/GearsStorageProvider":function(){define(["dijit","dojo","dojox","dojo/require!dojo/gears,dojox/storage/Provider,dojox/storage/manager,dojox/sql"],function(_3e6,dojo,_3e7){dojo.provide("dojox.storage.GearsStorageProvider");dojo.require("dojo.gears");dojo.require("dojox.storage.Provider");dojo.require("dojox.storage.manager");dojo.require("dojox.sql");if(dojo.gears.available){(function(){dojo.declare("dojox.storage.GearsStorageProvider",_3e7.storage.Provider,{constructor:function(){},TABLE_NAME:"__DOJO_STORAGE",initialized:false,_available:null,_storageReady:false,initialize:function(){if(dojo.config["disableGearsStorage"]==true){return;}this.TABLE_NAME="__DOJO_STORAGE";this.initialized=true;_3e7.storage.manager.loaded();},isAvailable:function(){return this._available=dojo.gears.available;},put:function(key,_3e8,_3e9,_3ea){this._initStorage();if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}_3ea=_3ea||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_3ea)){throw new Error("Invalid namespace given: "+key);}if(dojo.isString(_3e8)){_3e8="string:"+_3e8;}else{_3e8=dojo.toJson(_3e8);}try{_3e7.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND key = ?",_3ea,key);_3e7.sql("INSERT INTO "+this.TABLE_NAME+" VALUES (?, ?, ?)",_3ea,key,_3e8);}catch(e){_3e9(this.FAILED,key,e.toString(),_3ea);return;}if(_3e9){_3e9(_3e7.storage.SUCCESS,key,null,_3ea);}},get:function(key,_3eb){this._initStorage();if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}_3eb=_3eb||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_3eb)){throw new Error("Invalid namespace given: "+key);}var _3ec=_3e7.sql("SELECT * FROM "+this.TABLE_NAME+" WHERE namespace = ? AND "+" key = ?",_3eb,key);if(!_3ec.length){return null;}else{_3ec=_3ec[0].value;}if(dojo.isString(_3ec)&&(/^string:/.test(_3ec))){_3ec=_3ec.substring("string:".length);}else{_3ec=dojo.fromJson(_3ec);}return _3ec;},getNamespaces:function(){this._initStorage();var _3ed=[_3e7.storage.DEFAULT_NAMESPACE];var rs=_3e7.sql("SELECT namespace FROM "+this.TABLE_NAME+" DESC GROUP BY namespace");for(var i=0;i<rs.length;i++){if(rs[i].namespace!=_3e7.storage.DEFAULT_NAMESPACE){_3ed.push(rs[i].namespace);}}return _3ed;},getKeys:function(_3ee){this._initStorage();_3ee=_3ee||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_3ee)){throw new Error("Invalid namespace given: "+_3ee);}var rs=_3e7.sql("SELECT key FROM "+this.TABLE_NAME+" WHERE namespace = ?",_3ee);var _3ef=[];for(var i=0;i<rs.length;i++){_3ef.push(rs[i].key);}return _3ef;},clear:function(_3f0){this._initStorage();_3f0=_3f0||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_3f0)){throw new Error("Invalid namespace given: "+_3f0);}_3e7.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ?",_3f0);},remove:function(key,_3f1){this._initStorage();if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}_3f1=_3f1||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_3f1)){throw new Error("Invalid namespace given: "+key);}_3e7.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND"+" key = ?",_3f1,key);},putMultiple:function(keys,_3f2,_3f3,_3f4){this._initStorage();if(!this.isValidKeyArray(keys)||!_3f2 instanceof Array||keys.length!=_3f2.length){throw new Error("Invalid arguments: keys = ["+keys+"], values = ["+_3f2+"]");}if(_3f4==null||typeof _3f4=="undefined"){_3f4=_3e7.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_3f4)){throw new Error("Invalid namespace given: "+_3f4);}this._statusHandler=_3f3;try{_3e7.sql.open();_3e7.sql.db.execute("BEGIN TRANSACTION");var _3f5="REPLACE INTO "+this.TABLE_NAME+" VALUES (?, ?, ?)";for(var i=0;i<keys.length;i++){var _3f6=_3f2[i];if(dojo.isString(_3f6)){_3f6="string:"+_3f6;}else{_3f6=dojo.toJson(_3f6);}_3e7.sql.db.execute(_3f5,[_3f4,keys[i],_3f6]);}_3e7.sql.db.execute("COMMIT TRANSACTION");_3e7.sql.close();}catch(e){if(_3f3){_3f3(this.FAILED,keys,e.toString(),_3f4);}return;}if(_3f3){_3f3(_3e7.storage.SUCCESS,keys,null,_3f4);}},getMultiple:function(keys,_3f7){this._initStorage();if(!this.isValidKeyArray(keys)){throw new ("Invalid key array given: "+keys);}if(_3f7==null||typeof _3f7=="undefined"){_3f7=_3e7.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_3f7)){throw new Error("Invalid namespace given: "+_3f7);}var _3f8="SELECT * FROM "+this.TABLE_NAME+" WHERE namespace = ? AND "+" key = ?";var _3f9=[];for(var i=0;i<keys.length;i++){var _3fa=_3e7.sql(_3f8,_3f7,keys[i]);if(!_3fa.length){_3f9[i]=null;}else{_3fa=_3fa[0].value;if(dojo.isString(_3fa)&&(/^string:/.test(_3fa))){_3f9[i]=_3fa.substring("string:".length);}else{_3f9[i]=dojo.fromJson(_3fa);}}}return _3f9;},removeMultiple:function(keys,_3fb){this._initStorage();if(!this.isValidKeyArray(keys)){throw new Error("Invalid arguments: keys = ["+keys+"]");}if(_3fb==null||typeof _3fb=="undefined"){_3fb=_3e7.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_3fb)){throw new Error("Invalid namespace given: "+_3fb);}_3e7.sql.open();_3e7.sql.db.execute("BEGIN TRANSACTION");var _3fc="DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND key = ?";for(var i=0;i<keys.length;i++){_3e7.sql.db.execute(_3fc,[_3fb,keys[i]]);}_3e7.sql.db.execute("COMMIT TRANSACTION");_3e7.sql.close();},isPermanent:function(){return true;},getMaximumSize:function(){return this.SIZE_NO_LIMIT;},hasSettingsUI:function(){return false;},showSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},hideSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},_initStorage:function(){if(this._storageReady){return;}if(!google.gears.factory.hasPermission){var _3fd=null;var icon=null;var msg="This site would like to use Google Gears to enable "+"enhanced functionality.";var _3fe=google.gears.factory.getPermission(_3fd,icon,msg);if(!_3fe){throw new Error("You must give permission to use Gears in order to "+"store data");}}try{_3e7.sql("CREATE TABLE IF NOT EXISTS "+this.TABLE_NAME+"( "+" namespace TEXT, "+" key TEXT, "+" value TEXT "+")");_3e7.sql("CREATE UNIQUE INDEX IF NOT EXISTS namespace_key_index"+" ON "+this.TABLE_NAME+" (namespace, key)");}catch(e){throw new Error("Unable to create storage tables for Gears in "+"Dojo Storage");}this._storageReady=true;}});_3e7.storage.manager.register("dojox.storage.GearsStorageProvider",new _3e7.storage.GearsStorageProvider());})();}});},"esriviewer/base/LocationSupport":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic"],function(_3ff,lang,_400){return _3ff([],{handleLocate:function(_401,_402){this.currentLocateRequestId=VIEWER_UTILS.generateUUID();this.requestCompleteHandle=_400.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_REQUEST_COMPLETE,lang.hitch(this,this._handleLocateRequestComplete));this.requreErrorHandle=_400.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_REQUEST_ERROR,lang.hitch(this,this._handleLocateRequestError));VIEWER_UTILS.log("Locating: "+_401,VIEWER_GLOBALS.LOG_TYPE.INFO);_400.publish(VIEWER_GLOBALS.EVENTS.LOCATOR.SINGLE_LINE_ADDRESS_TO_LOCATION,_401,this.currentLocateRequestId,_402);},_handleLocateRequestComplete:function(_403){if(_403.requestId==this.currentLocateRequestId){this.handleLocationResponse(_403.addressCandidates);this.requestCompleteHandle.remove();this.requreErrorHandle.remove();}},_handleLocateRequestError:function(_404){VIEWER_UTILS.log("Locator Failed",VIEWER_GLOBALS.LOG_TYPE.ERROR);this.requestCompleteHandle.remove();this.requreErrorHandle.remove();},handleLocationResponse:function(_405){}});});},"esriviewer/ui/draw/base/model/UserPersistedGraphicsListViewModel":function(){define(["dojo/_base/declare","dojo/Evented"],function(_406,_407){return _406([_407],{REMOVE_USER_PERSISTED_GRAPHICS:"removeUserPersistedGraphic",ADD_USER_PERSISTED_GRAPHICS_TO_MAP:"addUserPersistedGraphicsToMap",constructor:function(){var self=this;this.addedUserPersistedGraphics=ko.observableArray();this.removeUserPersistedGraphic=function(_408){if(_408==null){return;}self.emit(self.REMOVE_USER_PERSISTED_GRAPHICS,_408);self.addedUserPersistedGraphics.remove(_408);};this.addSavedGraphics=function(_409){if(_409==null){return;}self.emit(self.ADD_USER_PERSISTED_GRAPHICS_TO_MAP,_409);};},sort:function(){this.addedUserPersistedGraphics.sort(function(left,_40a){var _40b=left.label.toLowerCase();var _40c=_40a.label.toLowerCase();return _40b==_40c?0:(_40b<_40c?-1:1);});}});});},"esriviewer/base/ViewerGlobals":function(){define(["dojo/_base/declare"],function(_40d){return _40d([],{EVENTS:{CSS:{CORE_UI_THEME_LOADED:"css:coreUILoaded"},MAP:{GET_MAP_DIV:"map:getMapDiv",GET:"map:get",INFO_WINDOW:{HIDE:"mapInfoWin:hide"},LEGEND:{CREATE:"legend:create"},RESIZE:"map:resize",LOADED:"map:loaded",ACTIONS:{TOOL_CHANGED:"MapMan:tlChngd"},FLASH:{POINT:"mapFlash:point"},LAYERS:{TRANSPARENCY:{WINDOW:{SHOW:"layerTransWindow:show",HIDE:"layerTransWindow:hide",TOGGLE:"layerTransWindow:toggle"},SET:"layerTrans:setTransparency"},WIDGET:{SHOW:"layersWidget:show"},OPERATIONAL:{GET:"operationalLayers:get"},ADD_GRAPHICS_LAYER:"layers:addGraphicsLayer",ADD_FROM_URL:"layers:addFromUrl",ADD:"layers:add",REMOVE:"layers:remove",REMOVED:"layers:removed",ADDED:"layers:added",ADD_REFERENCE_LAYER:"reference:addLayer",REMOVE_REFERENCE_LAYER:"reference:removeLayer",REFERENCE_LAYER_ADDED:"reference:added",REFERENCE_LAYER_REMOVED:"reference:removed",ADD_EXTERNAL_MANAGED_LAYER:"layers:addExternalManagedLayer",REMOVE_EXTERNAL_MANAGED_LAYER:"layers:removeExternalManagedLayer",GET_FEATURE_LAYER_IF_EXISTS:"layers:getFeatureLayerIfExists",MOVE_LAYER_TO_TOP:"layers:moveLayerToTop",QUERY_LAYER:"layers:queryLayer",MAKE_VISIBLE:"layers:makeLayerVisible",MAKE_INVISIBLE:"layers:makeLayerInvisible",GET_MIN_MAX_FOR_FIELD:"layers:getMinMax",GET_DISTINCT_FIELD_VALUES:"layers:getDistinctFieldValues",CLEAR_STORED_LAYERS:"layers:clearStoredLayers"},TOOLS:{DRAW_POINT:"tldr:dPt",DRAW_POLYGON:"tldr:dPoly",DRAW_RECTANGLE:"tldr:dRect",DRAW_FREEHAND_POLYGON:"tldr:dFPoly",DRAW_FREEHAND_LINE:"tldr:dFln",DRAW_LINE:"tldr:dLn",DRAW_POLYLINE:"tldr:dPLn",DRAW_TEXT:"tldr:dTx"},GRAPHICS:{ADD:"mapGraphics:add",REMOVE:"mapGraphics:remove",CENTER_AND_FLASH:"mapGraphics:centerAndFlash",CENTER_ON_MAP:"mapGraphics:centerOnMap",},BASEMAP:{SET:"map:setBasemap",GET_CURRENT:"map:getCurrentBasemap",GET_CURRENT_URL:"map:getCurrentBasemapUrl",ADD:"map:addBasemap",ADDED:"map:basemapAdded",REMOVE:"map:removeBasemap",REMOVED:"map:basemapRemoved",GALLERY:{TOGGLE:"map:basemapGalleryToggle",HIDE:"map:basemapGalleryHide",SHOW:"map:basemapGalleryShow",IS_HIDDEN:"map:basemapGalleryIsHidden",GET:"map:basemapGalleryGet"},CHANGED:"map:basemapChanged"},EXTENT:{GET_SPATIAL_REFERENCE:"extent:getSpatialReference",GET_EXTENT:"extent:getExtent",GET_CENTER:"extent:getCenter",GET_LEVEL:"extent:getLevel",SET_LEVEL:"extent:setLevel",PAN_TO:"extent:panTo",SET_EXTENT:"extent:setExtent",CHANGED:"extent:changed",GO_PREV_EXTENT:"extent:prevExtent",GO_NEXT_EXTENT:"extent:nextExtent",GO_INITIAL_EXTENT:"extent:initialExtent",GO_LAST_EXTENT:"extent:lastExtent",PREV_EXTENT_EXISTS:"extent:prevExtentExists",NEXT_EXTENT_EXISTS:"extent:nextExtentExists",ZOOM_OUT:"extent:zoomOut",ZOOM_TO_LAYER:"extent:zoomToLayer"},LEVEL:{CHANGED:"zoomLevel:changed",GET_LEVEL_COUNT:"zoomLevel:getCount",LEVEL_COUNT_CHANGED:"zoomLevel:lvlCountChanged"},LABEL_SERVICES:{SHOW:"lblServices:show",HIDE:"lblServices:hide",SERVICE_EXISTS:"lblServices:exist"},DIMENSIONS:{GET:"dimensions:get"},TIME:{TIME_LAYER_FOUND:"time:timeLayerFound",GET_TIME_ENABLED_SERVICES:"time:getTimeEnabledServices",SHOW_TIME_SLIDER:"time:showTimeSlider",TOGGLE_TIME_SLIDER:"time:toggleTimeSlider",MAP_TIME_EXTENT_CLEARED:"map:timeExtentCleared",CLEAR_TIME_EXTENT:"time:clearTimeExtent",SET_MAP_TIME_SLIDER:"time:setMapTimeSlider",MAP_TIME_EXTENT_SET:"time:mapTimeExtentSet",MAP_TIME_CHANGED:"time:mapTimeChanged"}},IDENTITY_MANAGER:{GET_TOKEN:"identityManager:getToken"},PORTAL:{INITIALIZED:"portal:initialized",USER_LOGGED_OUT:"portal:userLoggedOut",USER_LOGGED_IN:"portal:userLoggedIn",IS_USER_LOGGED_IN:"portal:isUserLoggedIn",LOG_IN:"portal:logIn",LOG_OUT:"portal:logOut",SEARCH_WEBMAPS:"portal:searchWebmaps",SEARCH_FEATURE_SERVICES:"portal:searchFeatureServices",SEARCH_MAP_SERVICES:"portal:searchMapServices",SEARCH_IMAGE_SERVICES:"portal:searchImageServices",SEARCH_FEATURE_SERVICE_LAYERS:"portal:searchFeatureServiceLayers",SEARCH_GEOCODE_SERVICES:"portal:searchGeocodeServices",GET_INSTANCE:"portal:getInstance",GET_BASEMAPS:"portal:getBasemaps"},TOOLS:{ACCORDION:{TOGGLE:"accordion:toggle",SHOW:"accordion:show",HIDE:"accordion:hide",ADD_ITEM:"accordion:addItem",LOAD_DEFAULT_TOOLS:"accordion:loadDefaultTools",HIDE_COMPLETE:"accordion:hideComplete",SHOW_ITEM:"accordion:showItem"},MENU:{ADD_TOOL:"toolMenu:addTool",HIDE_TOOLS_BUTTON:"toolMenu:hideToolsButton",SHOW_TOOLS_BUTTON:"toolMenu:showToolsButton",HIDE_LAYERS_BUTTON:"toolMenu:hideLayersButton",SHOW_LAYERS_BUTTON:"toolMenu:showLayersButton"}},QUERY_BUILDER:{SET_IMAGE_SERVICE_LAYER:"queryBuilder:setImgSrvLyr",SET_MAP_SERVICE_LAYER:"queryBuilder:setMapServiceLayer",SET_FEATURE_SERVICE_LAYER:"queryBuilder:setFeatureServiceLayer"},WINDOW:{REPOSITION_ALL:"window:repositionAll",SOCIAL_MEDIA:{SHOW:"socialMedia:show",HIDE:"socialMedia:hide",TOGGLE:"socialMedia:toggle"},POINT_UPLOAD:{SHOW:"ptUploadWindow:show",HIDE:"ptUploadWindow:hide",TOGGLE:"ptUploadWindow:toggle"},WEATHER:{SHOW:"weatherWindow:show",HIDE:"weatherWindow:hide",TOGGLE:"weatherWindow:toggle"},DRAW:{SHOW:"drawWindow:show",HIDE:"drawWindow:hide",TOGGLE:"drawWindow:toggle"},LEGEND:{SHOW:"legendWindow:show",HIDE:"legendWindow:hide"},QUERY_BUILDER:{SHOW:"queryBuilder:show",HIDE:"queryBuilder:hide",TOGGLE:"queryBuilder:toggle"},FEATURE_EDITOR:{SHOW:"featureEditor:show",HIDE:"featureEditor:hide",TOGGLE:"featureEditor:toggle"},MEASURE:{SHOW:"measureWindow:show",HIDE:"measureWindow:hide",TOGGLE:"measureWindow:toggle"},IDENTIFY:{SHOW:"identifyWindow:show",HIDE:"identifyWindow:hide",TOGGLE:"identifyWindow:toggle"},REVERSE_GEOCODE:{SHOW:"reverseGeocodeWindow:show",HIDE:"reverseGeocodeWindow:hide",TOGGLE:"reverseGeocodeWindow:toggle"},PORTAL_PUBLISH:{SHOW:"portalPublish:show",HIDE:"portalPublish:hide",TOGGLE:"portalPublish:toggle"},PORTAL_SEARCH:{SHOW:"portalSearch:show",HIDE:"portalSearch:hide",TOGGLE:"portalSearch:toggle"},ZOOM_TO:{SHOW:"zoomTo:show",HIDE:"zoomTo:hide",TOGGLE:"zoomTo:toggle"},REFLECTIVITY:{SHOW:"reflect:show",HIDE:"reflect:hide",TOGGLE:"reflect:toggle"},PRINT:{SHOW:"print:show",HIDE:"print:hide",TOGGLE:"print:toggle"},PLOTTING:{SHOW:"plotting:show",HIDE:"plotting:hide",TOGGLE:"plotting:toggle"}},DRAW:{CLEAR_STORED_GRAPHICS:"draw:clearStrdGraph",USER:{LINE_INPUT:"draw:usrLnIn",POINT_INPUT:"draw:usrPointIn",POLYGON_INPUT:"draw:usrPolyIn",POLYLINE_INPUT:"draw:usrPLnIn",RECTANGLE_INPUT:"draw:usrRectIn",DRAW_CANCEL:"draw:usrDrawCncl",FREEHAND_POLYLINE_INPUT:"draw:usrFrLnIn",FREEHAND_POLYGON_INPUT:"draw:usrFrPolyIn",GET_USER_GRAPHICS:"draw:usrGGraphics"},SYMBOLOGY:{SET_POLYGON:"drawSym:setPolygon",SET_POINT:"drawSym:setPoint",SET_LINE:"drawSym:setLine",SET_ENVELOPE:"drawSym:setEnvelope",SET_TEXT:"drawSym:setText"},DRAW_GRAPHICS_LAYER_CREATED:"draw:drawGraphicsLayerCreated",DRAW_STARTED:"draw:started",DRAW_COMPLETE:"draw:complete",DRAW_CANCELLED:"draw:cancelled"},NAVIGATION:{DISABLE:"nav:disable",DISABLE_TOOLBAR:"nav:disableToolbar",ENABLE_TOOLBAR:"nav:enableToolbar",PAN:"nav:pan",ZOOM_IN:"nav:zoomIn",ZOOM_OUT:"nav:zoomOut"},LOCATOR:{REVERSE_GEOCODE:"locator:reverseGeocode",SINGLE_LINE_ADDRESS_TO_LOCATION:"locator:addressToLocation",LOCATOR_REQUEST_COMPLETE:"locator:locatorRequestComplete",LOCATOR_REQUEST_ERROR:"locator:locatorRequestError",ADD_LOCATOR:"locator:addLocator",GET_LOCATORS:"locator:getLocators",LOCATOR_ADDED:"locator:locatorAdded",REMOVE_LOCATOR:"locator:remove",LOCATOR_REMOVED:"locator:removed"},BOOKMARK:{STORAGE:{GET:"bookmark:getBookmarks"},CREATE_WINDOW:{SHOW:"bookmark:show",HIDE:"bookmark:hide"},REMOVED:"bookmark:removed",CREATED:"bookmark:created",DELETE_STORED:"bookmark:deleteStored"},CONFIGURE:{WINDOW:{SHOW:"configureWindow:show",HIDE:"configureWindow:hide"}},THROBBER:{SHOW:"throbber:show",HIDE:"throbber:hide",BLOCK_HIDE:"throbber:blockHide",RELEASE_HIDE_BLOCK:"throbber:unblockHide",DISABLE:"throbber:disable",ENABLE:"throbber:enable"},TOOLTIP:{CREATE_CONFIRM:"tooltip:createConfirm"},MESSAGING:{SHOW:"messaging:show",HIDE:"messaging:hide"},GEOMETRY_SERVICE:{EXISTS:"geometryService:exists",TASKS:{PROJECT_TO_MAP_SR:"geometry:project",CALCULATE_AREA:"geometry:calculateArea",CALCULATE_DISTANCE:"geometry:calculateDistance",PROJECT_TO_LAT_LON:"geometry:projectToLatLon"},BUFFER_POINT:"geometryService:bufferPoint",BUFFER:"geometryService:buffer",MGRS_TO_LAT_LON:"geometryService:mrgsToLatLon",CONTROLLER_CREATED:"geometryService:controllerCreated"},LOGGING:{ADD:"logging:add",CLEAR:"logging:clear",WINDOW:{SHOW:"logging:windowShow",HIDE:"logging:windowHide",TOGGLE:"logging:windowToggle"}},FOOTER:{TOGGLE:"footer:toggle",COLLAPSE:"footer:collapse",EXPAND:"footer:expand",COLLAPSED:"footer:collapsed",EXPANDED:"footer:expanded",IS_EXPANDED:"footer:isExpanded"},CONFIGURATION:{GET:"config:get",GET_ENTRY:"config:getEntry"},PLACEMENT:{GLOBAL:{PLACE:{NAVIGATION_TOOLBAR:"place:navTool",HEADER:"place:header",VIEWER_ACCORDION:"place:vAccor",MAIN_TOOLBAR:"place:mTbar",MAIN_TOOLBAR_DROP_DOWN:"place:mTbardd",FOOTER:"place:ftr",MESSAGING:"place:msging",THROBBER:"place:throbber",BASEMAP_GALLERY:"place:basemapGallery",MAP_SCALE_AND_COORDINATES:"place:mSACoords",CREATE_BOOOKMARK:"place:createBmrk",MENU_BAR:"place:menuBar",USER_LOCATION:"place:usrLoc"}}}},STORAGE:{LABELS:{BOOKMARKS:"bookmarks",USER_GRAPHICS:"userGraphics","BASEMAPS":"basemaps","LOCATORS":"locators","REFERENCE_LAYERS":"referenceLayers","LAYERS":"userLayers"}},SERVICE_TYPES:{GEOMETRY_SERVER:"GeometryServer",GLOBE_SERVER:"GlobeServer",GP_SERVER:"GPServer",GP_TASK:"GPTask",IMAGE_SERVER:"ImageServer",MAP_SERVER:"MapServer",WEB_MAP:"WebMap",PORTAL_SERVER:"PortalServer",GEOCODE_SERVER:"GeocodeServer",FEATURE_LAYER:"FeatureLayer",FEATURE_SERVER:"FeatureServer",KML:"KMLLayer",OPEN_STREET_MAP:"OpenStreetMap",WMS_LAYER:"WMSLayer"},LAYER_TYPES:{IMAGE_SERVER:{LABEL:"Image Service",VALUE:"ImageServer"},MAP_SERVER:{LABEL:"Map Service",VALUE:"MapServer"},FEATURE_LAYER:{LABEL:"Feature Layer",VALUE:"FeatureLayer"},KML:{LABEL:"KML Layer",VALUE:"KMLLayer"}},LOG_TYPE:{WARNING:"warning",ERROR:"error",INFO:"info"},ESRI_FIELD_TYPES:{DATE:"esriFieldTypeDate",DOUBLE:"esriFieldTypeDouble",STRING:"esriFieldTypeString",INTEGER:"esriFieldTypeInteger",SMALL_INTEGER:"esriFieldTypeSmallInteger",GEOMETRY:"esriFieldTypeGeometry",OBJECT_ID:"esriFieldTypeOID",GUID:"esriFieldTypeGUID",GLOBAL_ID:"esriFieldTypeGlobalID"},ESRI_GEOMETRY_TYPES:{POINT:"esriGeometryPoint",LINE:"esriGeometryPolyline",POLYGON:"esriGeometryPolygon",ENVELOPE:"esriGeometryEnvelope"},ESRI_LAYER_TYPES:{FEATURE_LAYER:"Feature Layer",RASTER:"Raster Layer"},ESRI_LAYER_DECLARED_CLASSES:{GRAPHICS_LAYER:"esri.layers.GraphicsLayer",FEATURE_LAYER:"esri.layers.FeatureLayer",TILED_MAP_SERVICE:"esri.layers.ArcGISTiledMapServiceLayer",DYNAMIC_MAP_SERVICE:"esri.layers.ArcGISDynamicMapServiceLayer",IMAGE_SERVICE:"esri.layers.ArcGISImageServiceLayer"},ESRI_UNITS:{ACRES:"esriAcres",METERS:"esriMeters",FEET:"esriFeet",YARDS:"esriYards",MILES:"esriMiles",NAUTICAL_MILES:"esriNauticalMiles",MILLIMETERS:"esriMillimeters",CENTIMETERS:"esriCentimeters",DECIMETERS:"esriDecimeters",KILOMETERS:"esriKilometers",SQUARE_MILES:"esriSquareMiles",SQUARE_METERS:"esriSquareMeters",SQUARE_KILOMETERS:"esriSquareKilometers",SQUARE_ARES:"esriAres",SQUARE_HECTARES:"esriHectares",SQUARE_CENTIMETERS:"esriSquareCentimeters",SQUARE_DECIMETERS:"esriSquareDecimeters",SQUARE_FEET:"esriSquareFeet",SQUARE_INCHES:"esriSquareInches",SQUARE_MILLIMETERS:"esriSquareMillimeters",SQUARE_YARDS:"esriSquareYards",SQUARE_UNKNOWN:"esriUnknownAreaUnits",DECIMAL_DEGREES:"esriDUDecimalDegrees",DEGREE_MINUTE_SECONDS:"esriDegreeMinuteSeconds"},AGS_PORTAL_TYPES:{GEOPROCESSING_SERVICE:"Geoprocessing Service",MAP_SERVICE:"Map Service",WEB_MAP:"Web Map",MAPPING_APPLICATION:"Web Mapping Application",FEATURE_SERVICE:"Feature Service",FEATURE_SERVICE_LAYER:"Feature Service Layer",GEOCODE_SERVICE:"Geocoding Service",DESKTOP_TEMPLATE:"Desktop Application Template",FEATURE_COLLECTION_TEMPLATE:"Feature Collection Template",FEATURED_ITEMS:"Featured Items",LAYER_PACKAGE:"Layer Package",IMAGE_SERVICE:"Image Service",GRAPHICS_LAYER:"Graphics Layer",UNKNOWN:"Unknown",OPEN_STREET_MAPS:"OpenStreetMap"},DEFAULT_PORTAL_ENDPOINTS:{SEARCH_URL_PART:"/sharing/search",VIEWER_URL_PART:"home/webmap/viewer.html",CONTENT_URL_PART:"sharing/content",ITEMS_URL_PART:"sharing/content/items",DEFAULT_MAX_RESULTS:15,USER_CONTENT_PREPEND:"sharing/content/users/",USER_GROUPS_PREPEND:"/sharing/community/users",USER_SHARE_APPEND:"/shareItems",ADD_ITEM_PART_APPEND:"/addItem",PRINT_SERVICE_APPEND:"sharing/tools/print",GENERATE_TOKEN_APPEND:"/sharing/generateToken",PORTAL_VALIDATOR_ENDPOINT:"sharing",DATA_APPEND:"data"},ESRI_RENDERER_TYPES:{SIMPLE:"simple",UNIQUE_VALUE:"uniqueValue",CLASS_BREAKS:"classBreaks"},WINDOW:{TOP_POSITION_MOVE_OFFSET:30},VIEWER_MODES:{SIDEBAR:"sidebar",WINDOW:"window",MOBILE:"mobile"},GP_PARAMETER_DIRECTION:{INPUT:"esriGPParameterDirectionInput",OUTPUT:"esriGPParameterDirectionOutput"},GP_MESSAGE_TYPES:{INFO:["esriJobMessageTypeInformative","esriGPMessageTypeInformative"],WARNING:["esriJobMessageTypeWarning","esriGPMessageTypeWarning"],ERROR:["esriJobMessageTypeAbort","esriGPMessageTypeError","esriJobMessageTypeError","esriGPMessageTypeAbort"]},ANIMATIONS:{LIGHT_SPEED:{OUT:"lightSpeedOut animated",IN:"lightSpeedIn animated",DURATION:300},BOUNCE:{IN:"bounceIn animated",IN_DOWN:"bounceInDown animated",IN_RIGHT:"bounceInRight animated",IN_LEFT:"bounceInLeft animated"},FADE:{IN:"fadeIn animated",OUT:"fadeOut animated",IN_DOWN:"fadeInDown animated"},ROTATE:{IN:"rotateIn animated",OUT:"rotateOut animated"}},MIME_TYPES:{TEXT_PLAIN:"text/plain",EXCEL_VND:"application/vnd.ms-excel"},DEFAULT_REVERSE_GEOCODE_DISTANCE:50,PORTAL_SHARING_REST_URL_PART:"/sharing/rest",REFLECTIVITY_HELP_URL:"http://mesonet.agron.iastate.edu/GIS/radview.phtml"});});},"dijit/form/_RadioButtonMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/_base/lang","dojo/query","../registry"],function(_40e,_40f,_410,lang,_411,_412){return _40f("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var ary=[];_411("input[type=radio]",this.focusNode.form||this.ownerDocument).forEach(lang.hitch(this,function(_413){if(_413.name==this.name&&_413.form==this.focusNode.form){var _414=_412.getEnclosingWidget(_413);if(_414){ary.push(_414);}}}));return ary;},_setCheckedAttr:function(_415){this.inherited(arguments);if(!this._created){return;}if(_415){_40e.forEach(this._getRelatedWidgets(),lang.hitch(this,function(_416){if(_416!=this&&_416.checked){_416.set("checked",false);}}));}},_getSubmitValue:function(_417){return _417==null?"on":_417;},_onClick:function(e){if(this.checked||this.disabled){e.stopPropagation();e.preventDefault();return false;}if(this.readOnly){e.stopPropagation();e.preventDefault();_40e.forEach(this._getRelatedWidgets(),lang.hitch(this,function(_418){_410.set(this.focusNode||this.domNode,"checked",_418.checked);}));return false;}return this.inherited(arguments);}});});},"dojo/data/ItemFileWriteStore":function(){define(["../_base/lang","../_base/declare","../_base/array","../_base/json","../_base/kernel","./ItemFileReadStore","../date/stamp"],function(lang,_419,_41a,_41b,_41c,_41d,_41e){return _419("dojo.data.ItemFileWriteStore",_41d,{constructor:function(_41f){this._features["dojo.data.api.Write"]=true;this._features["dojo.data.api.Notification"]=true;this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};if(!this._datatypeMap["Date"].serialize){this._datatypeMap["Date"].serialize=function(obj){return _41e.toISOString(obj,{zulu:true});};}if(_41f&&(_41f.referenceIntegrity===false)){this.referenceIntegrity=false;}this._saveInProgress=false;},referenceIntegrity:true,_assert:function(_420){if(!_420){throw new Error("assertion failed in ItemFileWriteStore");}},_getIdentifierAttribute:function(){return this.getFeatures()["dojo.data.api.Identity"];},newItem:function(_421,_422){this._assert(!this._saveInProgress);if(!this._loadFinished){this._forceLoad();}if(typeof _421!="object"&&typeof _421!="undefined"){throw new Error("newItem() was passed something other than an object");}var _423=null;var _424=this._getIdentifierAttribute();if(_424===Number){_423=this._arrayOfAllItems.length;}else{_423=_421[_424];if(typeof _423==="undefined"){throw new Error("newItem() was not passed an identity for the new item");}if(lang.isArray(_423)){throw new Error("newItem() was not passed an single-valued identity");}}if(this._itemsByIdentity){this._assert(typeof this._itemsByIdentity[_423]==="undefined");}this._assert(typeof this._pending._newItems[_423]==="undefined");this._assert(typeof this._pending._deletedItems[_423]==="undefined");var _425={};_425[this._storeRefPropName]=this;_425[this._itemNumPropName]=this._arrayOfAllItems.length;if(this._itemsByIdentity){this._itemsByIdentity[_423]=_425;_425[_424]=[_423];}this._arrayOfAllItems.push(_425);var _426=null;if(_422&&_422.parent&&_422.attribute){_426={item:_422.parent,attribute:_422.attribute,oldValue:undefined};var _427=this.getValues(_422.parent,_422.attribute);if(_427&&_427.length>0){var _428=_427.slice(0,_427.length);if(_427.length===1){_426.oldValue=_427[0];}else{_426.oldValue=_427.slice(0,_427.length);}_428.push(_425);this._setValueOrValues(_422.parent,_422.attribute,_428,false);_426.newValue=this.getValues(_422.parent,_422.attribute);}else{this._setValueOrValues(_422.parent,_422.attribute,_425,false);_426.newValue=_425;}}else{_425[this._rootItemPropName]=true;this._arrayOfTopLevelItems.push(_425);}this._pending._newItems[_423]=_425;for(var key in _421){if(key===this._storeRefPropName||key===this._itemNumPropName){throw new Error("encountered bug in ItemFileWriteStore.newItem");}var _429=_421[key];if(!lang.isArray(_429)){_429=[_429];}_425[key]=_429;if(this.referenceIntegrity){for(var i=0;i<_429.length;i++){var val=_429[i];if(this.isItem(val)){this._addReferenceToMap(val,_425,key);}}}}this.onNew(_425,_426);return _425;},_removeArrayElement:function(_42a,_42b){var _42c=_41a.indexOf(_42a,_42b);if(_42c!=-1){_42a.splice(_42c,1);return true;}return false;},deleteItem:function(item){this._assert(!this._saveInProgress);this._assertIsItem(item);var _42d=item[this._itemNumPropName];var _42e=this.getIdentity(item);if(this.referenceIntegrity){var _42f=this.getAttributes(item);if(item[this._reverseRefMap]){item["backup_"+this._reverseRefMap]=lang.clone(item[this._reverseRefMap]);}_41a.forEach(_42f,function(_430){_41a.forEach(this.getValues(item,_430),function(_431){if(this.isItem(_431)){if(!item["backupRefs_"+this._reverseRefMap]){item["backupRefs_"+this._reverseRefMap]=[];}item["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(_431),attr:_430});this._removeReferenceFromMap(_431,item,_430);}},this);},this);var _432=item[this._reverseRefMap];if(_432){for(var _433 in _432){var _434=null;if(this._itemsByIdentity){_434=this._itemsByIdentity[_433];}else{_434=this._arrayOfAllItems[_433];}if(_434){for(var _435 in _432[_433]){var _436=this.getValues(_434,_435)||[];var _437=_41a.filter(_436,function(_438){return !(this.isItem(_438)&&this.getIdentity(_438)==_42e);},this);this._removeReferenceFromMap(item,_434,_435);if(_437.length<_436.length){this._setValueOrValues(_434,_435,_437,true);}}}}}}this._arrayOfAllItems[_42d]=null;item[this._storeRefPropName]=null;if(this._itemsByIdentity){delete this._itemsByIdentity[_42e];}this._pending._deletedItems[_42e]=item;if(item[this._rootItemPropName]){this._removeArrayElement(this._arrayOfTopLevelItems,item);}this.onDelete(item);return true;},setValue:function(item,_439,_43a){return this._setValueOrValues(item,_439,_43a,true);},setValues:function(item,_43b,_43c){return this._setValueOrValues(item,_43b,_43c,true);},unsetAttribute:function(item,_43d){return this._setValueOrValues(item,_43d,[],true);},_setValueOrValues:function(item,_43e,_43f,_440){this._assert(!this._saveInProgress);this._assertIsItem(item);this._assert(lang.isString(_43e));this._assert(typeof _43f!=="undefined");var _441=this._getIdentifierAttribute();if(_43e==_441){throw new Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");}var _442=this._getValueOrValues(item,_43e);var _443=this.getIdentity(item);if(!this._pending._modifiedItems[_443]){var _444={};for(var key in item){if((key===this._storeRefPropName)||(key===this._itemNumPropName)||(key===this._rootItemPropName)){_444[key]=item[key];}else{if(key===this._reverseRefMap){_444[key]=lang.clone(item[key]);}else{_444[key]=item[key].slice(0,item[key].length);}}}this._pending._modifiedItems[_443]=_444;}var _445=false;if(lang.isArray(_43f)&&_43f.length===0){_445=delete item[_43e];_43f=undefined;if(this.referenceIntegrity&&_442){var _446=_442;if(!lang.isArray(_446)){_446=[_446];}for(var i=0;i<_446.length;i++){var _447=_446[i];if(this.isItem(_447)){this._removeReferenceFromMap(_447,item,_43e);}}}}else{var _448;if(lang.isArray(_43f)){_448=_43f.slice(0,_43f.length);}else{_448=[_43f];}if(this.referenceIntegrity){if(_442){var _446=_442;if(!lang.isArray(_446)){_446=[_446];}var map={};_41a.forEach(_446,function(_449){if(this.isItem(_449)){var id=this.getIdentity(_449);map[id.toString()]=true;}},this);_41a.forEach(_448,function(_44a){if(this.isItem(_44a)){var id=this.getIdentity(_44a);if(map[id.toString()]){delete map[id.toString()];}else{this._addReferenceToMap(_44a,item,_43e);}}},this);for(var rId in map){var _44b;if(this._itemsByIdentity){_44b=this._itemsByIdentity[rId];}else{_44b=this._arrayOfAllItems[rId];}this._removeReferenceFromMap(_44b,item,_43e);}}else{for(var i=0;i<_448.length;i++){var _447=_448[i];if(this.isItem(_447)){this._addReferenceToMap(_447,item,_43e);}}}}item[_43e]=_448;_445=true;}if(_440){this.onSet(item,_43e,_442,_43f);}return _445;},_addReferenceToMap:function(_44c,_44d,_44e){var _44f=this.getIdentity(_44d);var _450=_44c[this._reverseRefMap];if(!_450){_450=_44c[this._reverseRefMap]={};}var _451=_450[_44f];if(!_451){_451=_450[_44f]={};}_451[_44e]=true;},_removeReferenceFromMap:function(_452,_453,_454){var _455=this.getIdentity(_453);var _456=_452[this._reverseRefMap];var _457;if(_456){for(_457 in _456){if(_457==_455){delete _456[_457][_454];if(this._isEmpty(_456[_457])){delete _456[_457];}}}if(this._isEmpty(_456)){delete _452[this._reverseRefMap];}}},_dumpReferenceMap:function(){var i;for(i=0;i<this._arrayOfAllItems.length;i++){var item=this._arrayOfAllItems[i];if(item&&item[this._reverseRefMap]){}}},_getValueOrValues:function(item,_458){var _459=undefined;if(this.hasAttribute(item,_458)){var _45a=this.getValues(item,_458);if(_45a.length==1){_459=_45a[0];}else{_459=_45a;}}return _459;},_flatten:function(_45b){if(this.isItem(_45b)){return {_reference:this.getIdentity(_45b)};}else{if(typeof _45b==="object"){for(var type in this._datatypeMap){var _45c=this._datatypeMap[type];if(lang.isObject(_45c)&&!lang.isFunction(_45c)){if(_45b instanceof _45c.type){if(!_45c.serialize){throw new Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+type+"]");}return {_type:type,_value:_45c.serialize(_45b)};}}else{if(_45b instanceof _45c){return {_type:type,_value:_45b.toString()};}}}}return _45b;}},_getNewFileContentString:function(){var _45d={};var _45e=this._getIdentifierAttribute();if(_45e!==Number){_45d.identifier=_45e;}if(this._labelAttr){_45d.label=this._labelAttr;}_45d.items=[];for(var i=0;i<this._arrayOfAllItems.length;++i){var item=this._arrayOfAllItems[i];if(item!==null){var _45f={};for(var key in item){if(key!==this._storeRefPropName&&key!==this._itemNumPropName&&key!==this._reverseRefMap&&key!==this._rootItemPropName){var _460=this.getValues(item,key);if(_460.length==1){_45f[key]=this._flatten(_460[0]);}else{var _461=[];for(var j=0;j<_460.length;++j){_461.push(this._flatten(_460[j]));_45f[key]=_461;}}}}_45d.items.push(_45f);}}var _462=true;return _41b.toJson(_45d,_462);},_isEmpty:function(_463){var _464=true;if(lang.isObject(_463)){var i;for(i in _463){_464=false;break;}}else{if(lang.isArray(_463)){if(_463.length>0){_464=false;}}}return _464;},save:function(_465){this._assert(!this._saveInProgress);this._saveInProgress=true;var self=this;var _466=function(){self._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};self._saveInProgress=false;if(_465&&_465.onComplete){var _467=_465.scope||_41c.global;_465.onComplete.call(_467);}};var _468=function(err){self._saveInProgress=false;if(_465&&_465.onError){var _469=_465.scope||_41c.global;_465.onError.call(_469,err);}};if(this._saveEverything){var _46a=this._getNewFileContentString();this._saveEverything(_466,_468,_46a);}if(this._saveCustom){this._saveCustom(_466,_468);}if(!this._saveEverything&&!this._saveCustom){_466();}},revert:function(){this._assert(!this._saveInProgress);var _46b;for(_46b in this._pending._modifiedItems){var _46c=this._pending._modifiedItems[_46b];var _46d=null;if(this._itemsByIdentity){_46d=this._itemsByIdentity[_46b];}else{_46d=this._arrayOfAllItems[_46b];}_46c[this._storeRefPropName]=this;for(var key in _46d){delete _46d[key];}lang.mixin(_46d,_46c);}var _46e;for(_46b in this._pending._deletedItems){_46e=this._pending._deletedItems[_46b];_46e[this._storeRefPropName]=this;var _46f=_46e[this._itemNumPropName];if(_46e["backup_"+this._reverseRefMap]){_46e[this._reverseRefMap]=_46e["backup_"+this._reverseRefMap];delete _46e["backup_"+this._reverseRefMap];}this._arrayOfAllItems[_46f]=_46e;if(this._itemsByIdentity){this._itemsByIdentity[_46b]=_46e;}if(_46e[this._rootItemPropName]){this._arrayOfTopLevelItems.push(_46e);}}for(_46b in this._pending._deletedItems){_46e=this._pending._deletedItems[_46b];if(_46e["backupRefs_"+this._reverseRefMap]){_41a.forEach(_46e["backupRefs_"+this._reverseRefMap],function(_470){var _471;if(this._itemsByIdentity){_471=this._itemsByIdentity[_470.id];}else{_471=this._arrayOfAllItems[_470.id];}this._addReferenceToMap(_471,_46e,_470.attr);},this);delete _46e["backupRefs_"+this._reverseRefMap];}}for(_46b in this._pending._newItems){var _472=this._pending._newItems[_46b];_472[this._storeRefPropName]=null;this._arrayOfAllItems[_472[this._itemNumPropName]]=null;if(_472[this._rootItemPropName]){this._removeArrayElement(this._arrayOfTopLevelItems,_472);}if(this._itemsByIdentity){delete this._itemsByIdentity[_46b];}}this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};return true;},isDirty:function(item){if(item){var _473=this.getIdentity(item);return new Boolean(this._pending._newItems[_473]||this._pending._modifiedItems[_473]||this._pending._deletedItems[_473]).valueOf();}else{return !this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems);}},onSet:function(item,_474,_475,_476){},onNew:function(_477,_478){},onDelete:function(_479){},close:function(_47a){if(this.clearOnClose){if(!this.isDirty()){this.inherited(arguments);}else{throw new Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");}}}});});},"dojox/storage/Provider":function(){define(["dijit","dojo","dojox"],function(_47b,dojo,_47c){dojo.provide("dojox.storage.Provider");dojo.declare("dojox.storage.Provider",null,{constructor:function(){},SUCCESS:"success",FAILED:"failed",PENDING:"pending",SIZE_NOT_AVAILABLE:"Size not available",SIZE_NO_LIMIT:"No size limit",DEFAULT_NAMESPACE:"default",onHideSettingsUI:null,initialize:function(){},isAvailable:function(){},put:function(key,_47d,_47e,_47f){},get:function(key,_480){},hasKey:function(key,_481){return !!this.get(key,_481);},getKeys:function(_482){},clear:function(_483){},remove:function(key,_484){},getNamespaces:function(){},isPermanent:function(){},getMaximumSize:function(){},putMultiple:function(keys,_485,_486,_487){for(var i=0;i<keys.length;i++){_47c.storage.put(keys[i],_485[i],_486,_487);}},getMultiple:function(keys,_488){var _489=[];for(var i=0;i<keys.length;i++){_489.push(_47c.storage.get(keys[i],_488));}return _489;},removeMultiple:function(keys,_48a){for(var i=0;i<keys.length;i++){_47c.storage.remove(keys[i],_48a);}},isValidKeyArray:function(keys){if(keys===null||keys===undefined||!dojo.isArray(keys)){return false;}return !dojo.some(keys,function(key){return !this.isValidKey(key);},this);},hasSettingsUI:function(){return false;},showSettingsUI:function(){},hideSettingsUI:function(){},isValidKey:function(_48b){if(_48b===null||_48b===undefined){return false;}return /^[0-9A-Za-z_]*$/.test(_48b);},getResourceList:function(){return [];}});});},"esriviewer/map/MapManager":function(){define(["dojo/_base/declare","dojo/on","dojo/has","dojo/topic","dojo/_base/lang","./base/MapUtils","./base/MapExtentTools","./base/MapLayersTools","./base/MapDisplayWidgets","./base/MapNavDrawTools","./base/MapTimeTools","dijit/layout/ContentPane","../ui/basemap/BasemapGalleryWidget","esri/dijit/OverviewMap","esri/config","esri/geometry/Extent","esri/map","esri/arcgis/utils"],function(_48c,on,has,_48d,lang,_48e,_48f,_490,_491,_492,_493,_494,_495,_496,_497,_498,Map,_499){return _48c([],{__defaultZoomSliderPosition:{x:10,y:120},hasGeometryService:false,maxClientZoom:null,hideLatLongDisplay:false,hideMGRSDisplay:true,disableKeyboardNavigation:true,hideMapScale:false,constructor:function(_49a){lang.mixin(this,_49a||{});this.mapInitializationParameters={wrapAround180:true,force3DTransforms:false,navigationMode:"classic"};this.loadViewerConfigurationData();this.initMap();},loadViewerConfigurationData:function(){var _49b=null;_48d.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"geometryService",function(_49c){_49b=_49c;});this.hasGeometryService=_49b!=null;var _49d=null;_48d.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_49e){_49d=_49e;});if(_49d&&lang.isObject(_49d)){this.mapConfiguration=_49d;this.basemaps=this.mapConfiguration.basemaps;var _49f=false;if(this.mapConfiguration.display!=null&&lang.isObject(this.mapConfiguration.display)&&this.mapConfiguration.display.showScale!=null&&this.mapConfiguration.display.showScale==false){this.hideMapScale=true;}if(this.mapConfiguration.disableKeyboardNavigation!=null&&this.mapConfiguration.disableKeyboardNavigation==false){this.disableKeyboardNavigation=false;}if(this.mapConfiguration.maxClientZoom!=null){try{this.maxClientZoom=parseInt(this.mapConfiguration.maxClientZoom,10);}catch(err){}}lang.mixin(this.mapInitializationParameters,this.mapConfiguration.initializationParameters||{});}},initListeners:function(){this.map.on("load",lang.hitch(this,this.handleMapLoaded));this.map.on("update-start",function(){_48d.publish(VIEWER_GLOBALS.EVENTS.THROBBER.SHOW);});this.map.on("zoom-end",lang.hitch(this,this.handleZoomLevelChanged));this.map.on("update-end",function(){_48d.publish(VIEWER_GLOBALS.EVENTS.THROBBER.HIDE);});this.map.on("extent-change",lang.hitch(this,this.handleMapExtentChange));_48d.subscribe(VIEWER_GLOBALS.EVENTS.MAP.GET,lang.hitch(this,this.handleGetMap));on(window,"resize",lang.hitch(this,function(){this.map.resize();}));},handleMapExtentChange:function(evt){if(!this.hideMapScale){this.mapExtentTools.handleMapExtentChanged();}_48d.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.CHANGED,evt);},handleGetMap:function(_4a0){if(_4a0!=null&&lang.isFunction(_4a0)){_4a0(this.map);}},initMap:function(){var _4a1;_48d.publish(VIEWER_GLOBALS.EVENTS.MAP.GET_MAP_DIV,function(mD){_4a1=mD;});this.mapDiv=_4a1;new _494({region:"center",style:"height: 100%; width: 100%; margin: 0; padding: 0; overflow: hidden;"},this.mapDiv);if(this.mapConfiguration.zoomSlider==null||this.mapConfiguration.zoomSlider.create!=false){var _4a2=this.__defaultZoomSliderPosition.x;var _4a3=this.__defaultZoomSliderPosition.y;if(VIEWER_GLOBALS&&VIEWER_GLOBALS.windowPositioning&&VIEWER_GLOBALS.windowPositioning.zoomSlider&&lang.isObject(VIEWER_GLOBALS.windowPositioning.zoomSlider)){_4a2=VIEWER_GLOBALS.windowPositioning.zoomSlider.x;_4a3=VIEWER_GLOBALS.windowPositioning.zoomSlider.y;var _4a4="left";var _4a5="top";if(VIEWER_GLOBALS.windowPositioning.zoomSlider.alignY!=null&&lang.isString(VIEWER_GLOBALS.windowPositioning.zoomSlider.alignY)){var _4a6=VIEWER_GLOBALS.windowPositioning.zoomSlider.alignY.toLowerCase();if(_4a6==="top"||_4a6==="bottom"){_4a5=_4a6;}}if(VIEWER_GLOBALS.windowPositioning.zoomSlider.alignX!=null&&lang.isString(VIEWER_GLOBALS.windowPositioning.zoomSlider.alignX)){var _4a7=VIEWER_GLOBALS.windowPositioning.zoomSlider.alignX.toLowerCase();if(_4a7==="left"||_4a7==="right"){_4a4=_4a7;}}}var _4a8={width:null,height:"150px"};_4a8[_4a4]=_4a2+"px";_4a8[_4a5]=_4a3+"px";if(has("ie")){_4a8.height="80px";}_497.defaults.map.slider=_4a8;}else{this.mapInitializationParameters.slider=false;}if(this.mapConfiguration.initialExtent!=null&&lang.isObject(this.mapConfiguration.initialExtent)){var _4a9=this.mapConfiguration.initialExtent;this.initialExtent=new _498({xmin:_4a9.xmin,ymin:_4a9.ymin,xmax:_4a9.xmax,ymax:_4a9.ymax,spatialReference:_4a9.spatialReference});this.mapInitializationParameters.extent=this.initialExtent;}if(lang.isArray(this.mapConfiguration.lods)){this.mapInitializationParameters.lods=this.mapConfiguration.lods;}if(this.webMapItem){this.map=_499.createMap(this.webMapItem,this.mapDiv).then(lang.hitch(this,function(_4aa){this.mapCreated(_4aa.map);this.handleMapLoaded();}));}else{var map=new Map(this.mapDiv,this.mapInitializationParameters);if(this.disableKeyboardNavigation){map.disableKeyboardNavigation();}this.mapCreated(map);}},mapCreated:function(map){this.map=map;this.mapDisplayWidgets=new _491({map:this.map,mapDiv:this.mapDiv});this.mapExtentTools=new _48f({mapDisplayWidgets:this.mapDisplayWidgets,map:this.map,mapUtils:this.mapUtils,maxClientZoom:this.maxClientZoom});this.mapLayersTools=new _490({map:this.map,basemaps:this.basemaps,mapConfiguration:this.mapConfiguration,webMapItem:this.webMapItem});this.mapUtils=new _48e({map:this.map,mapDiv:this.mapDiv,operationalLayers:this.mapLayersTools.operationalLayers});this.mapNavDrawTools=new _492({map:this.map});this.mapTimeTools=new _493({map:this.map});this.initListeners();this.initBasemaps();},initBasemaps:function(){if(this.mapConfiguration.useBasemapGallery==null||this.mapConfiguration.useBasemapGallery!=true){for(var key in this.basemaps){this.mapLayersTools.changeBaseMaps(key);break;}}else{this.basemapGalleryWidget=new _495();}},handleMapLoaded:function(){if(this.webMapItem&&this.webMapItem.itemData){this.mapLayersTools.addWebMapOperationalLayers(this.webMapItem);}else{this.mapLayersTools.loadMapConfigurationLayers();}if(this.mapConfiguration.overview==null||this.mapConfiguration.overview.create!=false){this.overviewMapDijit=new _496({attachTo:"bottom-right",color:"#D84E13",opacity:0.4,map:this.map,visible:true,width:225,height:175});this.overviewMapDijit.startup();}_48d.publish(VIEWER_GLOBALS.EVENTS.MAP.LOADED,this.map);this.onMapLoaded();},handleZoomLevelChanged:function(evt){if(evt==null){return;}var _4ab=evt.extent;var _4ac=evt.zoomFactor;var _4ad=evt.anchor;var _4ae=evt.level;_48d.publish(VIEWER_GLOBALS.EVENTS.MAP.LEVEL.CHANGED,_4ab,_4ac,_4ad,_4ae);},onMapLoaded:function(){}});});},"esriviewer/util/GeometryUtils":function(){define(["dojo/_base/declare"],function(_4af){return _4af([],{polygonIntersectsPoint:function(pt,_4b0){var ext=_4b0.getExtent();return (pt.x>=ext.xmin&&pt.y>=ext.ymin&&pt.x<=ext.xmax&&pt.y<=ext.ymax);},ddToDMSString:function(_4b1){var _4b2;var _4b3=false;if(_4b1<0){_4b3=true;_4b1=Math.abs(_4b1);}_4b2=Math.floor(_4b1)+""+Math.floor((_4b1-Math.floor(_4b1))*60)+"'"+Math.floor(((_4b1-Math.floor(_4b1))*60-Math.floor((_4b1-Math.floor(_4b1))*60))*60)+"\"";if(_4b3){_4b2="-"+_4b2;}return _4b2;}});});},"esriviewer/ui/weather/conditions/WeatherWidgetWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","../../window/WindowWidget"],function(_4b4,lang,_4b5,_4b6){return _4b4([_4b6],{defaultPositioning:{x:400,y:125},windowWidth:"350px",windowHeaderText:"Weather",windowIconAltText:"Weather",windowIconClass:"commonIcons16 weather",positioningParamName:"weather",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/weather/conditions/WeatherWidget"],lang.hitch(this,function(_4b7){this.weatherWidget=new _4b7();this.setContent(this.weatherWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_4b5.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.WEATHER.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_4b5.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.WEATHER.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_4b5.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.WEATHER.TOGGLE,lang.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.weatherWidget){this.weatherWidget.clearDraw();}}});});},"esriviewer/ui/draw/configure/geometry/ConfigurePolygonWidget":function(){define(["dojo/_base/declare","dojo/text!./template/ConfigurePolygonTemplate.html","dojo/_base/lang","dojo/_base/Color","./model/ConfigurePolygonViewModel","./BaseGeometryConfigurationWidget","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol"],function(_4b8,_4b9,lang,_4ba,_4bb,_4bc,_4bd,_4be){return _4b8([_4bc],{defaultTransparency:50,templateString:_4b9,postCreate:function(){this.inherited(arguments);this.viewModel=new _4bb();this.viewModel.fillColorActive.subscribe(lang.hitch(this,this.handleFillColorToggled));this.viewModel.selectedAngle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedFillStyle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedOutlineStyle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedAngle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedOutlineWidth.subscribe(lang.hitch(this,this.processChange));this.outlineColor=new _4ba([255,0,0,this.getTransparency()/100]);this.fillColor=new _4ba([255,0,0,this.getTransparency()/100]);this.colorPicker.set("value",this.outlineColor.toHex());ko.applyBindings(this.viewModel,this.domNode);},handleTransparencyChanged:function(){var _4bf=this.getTransparency()/100;this.outlineColor=new _4ba([this.outlineColor.r,this.outlineColor.g,this.outlineColor.b,_4bf]);this.fillColor=new _4ba([this.fillColor.r,this.fillColor.g,this.fillColor.b,_4bf]);this.inherited(arguments);},handleFillColorToggled:function(_4c0){if(_4c0){this.colorPicker.set("value",this.fillColor.toHex());}else{this.colorPicker.set("value",this.outlineColor.toHex());}},handleColorPickerChanged:function(){if(this.viewModel.outlineColorActive()){this.outlineColor=this.getColor();}else{this.fillColor=this.getColor();}this.processChange();},processChange:function(){this.onChange(this.getSymbol());},getSymbol:function(){return new _4bd(this.viewModel.selectedFillStyle(),new _4be(this.viewModel.selectedOutlineStyle(),this.outlineColor,this.viewModel.selectedOutlineWidth()),this.fillColor);}});});},"esriviewer/ui/draw/configure/ConfigureDrawWidget":function(){define(["dojo/_base/declare","dojo/text!./template/ConfigureDrawTemplate.html","dojo/_base/lang","../../base/UITemplatedWidget","./model/ConfigureDrawViewModel","./geometry/ConfigurePointWidget","./geometry/ConfigureLineWidget","./geometry/ConfigureTextWidget","./geometry/ConfigurePolygonWidget"],function(_4c1,_4c2,lang,_4c3,_4c4,_4c5,_4c6,_4c7,_4c8){return _4c1([_4c3],{showConfigureGeometryIcons:true,showTextIcon:true,showEnvelopeIcon:true,templateString:_4c2,postCreate:function(){this.inherited(arguments);this.viewModel=new _4c4();this.viewModel.showEnvelopeIcon(this.showEnvelopeIcon);this.viewModel.showTextIcon(this.showTextIcon);this.viewModel.showConfigureGeometryIcons(this.showConfigureGeometryIcons);ko.applyBindings(this.viewModel,this.domNode);this.createConfigurationWidgets();},createConfigurationWidgets:function(){this.pointConfigurationWidget=new _4c5();this.pointConfigurationWidget.placeAt(this.configurePointWidgetContainer);this.pointConfigurationWidget.on("change",lang.hitch(this,this.handlePointSymbolChanged));this.lineConfigurationWidget=new _4c6();this.lineConfigurationWidget.placeAt(this.configureLineWidgetContainer);this.lineConfigurationWidget.on("change",lang.hitch(this,this.handleLineSymbolChanged));this.rectangleConfigurationWidget=new _4c8();this.rectangleConfigurationWidget.placeAt(this.configureRectangleWidgetContainer);this.rectangleConfigurationWidget.on("change",lang.hitch(this,this.handleRectangleSymbolChanged));this.configureTextWidget=new _4c7();this.configureTextWidget.placeAt(this.configureTextWidgetContainer);this.configureTextWidget.on("change",lang.hitch(this,this.handleTextSymbolChanged));this.configurePolygonWidget=new _4c8();this.configurePolygonWidget.placeAt(this.configurePolygonWidgetContainer);this.configurePolygonWidget.on("change",lang.hitch(this,this.handlePolygonSymbolChanged));},handlePointSymbolChanged:function(_4c9){this.onPointSymbolChanged(_4c9);},handleLineSymbolChanged:function(_4ca){this.onLineSymbolChanged(_4ca);},handlePolygonSymbolChanged:function(_4cb){this.onPolygonSymbolChanged(_4cb);},handleTextSymbolChanged:function(_4cc){this.onTextSymbolChanged(_4cc);},handleRectangleSymbolChanged:function(_4cd){this.onRectangleSymbolChanged(_4cd);},onPointSymbolChanged:function(_4ce){},onLineSymbolChanged:function(_4cf){},onPolygonSymbolChanged:function(_4d0){},onTextSymbolChanged:function(_4d1){},onRectangleSymbolChanged:function(_4d2){}});});},"esriviewer/ui/draw/configure/geometry/ConfigureLineWidget":function(){define(["dojo/_base/declare","dojo/text!./template/ConfigureLineTemplate.html","dojo/_base/lang","./model/ConfigureLineViewModel","./BaseGeometryConfigurationWidget","esri/symbols/SimpleLineSymbol"],function(_4d3,_4d4,lang,_4d5,_4d6,_4d7){return _4d3([_4d6],{templateString:_4d4,postCreate:function(){this.inherited(arguments);this.viewModel=new _4d5();this.viewModel.selectedLineStyle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedWidth.subscribe(lang.hitch(this,this.processChange));ko.applyBindings(this.viewModel,this.domNode);},processChange:function(){this.onChange(this.getSymbol());},getSymbol:function(){return new _4d7(this.viewModel.selectedLineStyle(),this.getColor(),this.viewModel.selectedWidth());}});});},"esriviewer/ui/layers/LayersTocWidget":function(){define(["dojo/_base/declare","dojo/text!./template/LayersTocWidgetTemplate.html","dojo/_base/array","dojo/_base/lang","dojo/dom-style","dojo/dom-construct","dijit/Tree","dijit/tree/ForestStoreModel","dojo/data/ItemFileWriteStore","./base/LayersTocWidgetContextMenu","../base/UITemplatedWidget","esri/layers/ArcGISTiledMapServiceLayer"],function(_4d8,_4d9,_4da,lang,_4db,_4dc,Tree,_4dd,_4de,_4df,_4e0,_4e1){return _4d8([_4e0],{templateString:_4d9,constructor:function(){this.treeStore=new _4de({data:{items:[],identifier:"id",label:"label"}});this.treeModel=new _4dd({store:this.treeStore,openOnClick:true});this.tree=new Tree({model:this.treeModel,getIconClass:lang.hitch(this,this.getTreeIcon),showRoot:false});_4db.set(this.tree.domNode,"height","100%");this.treeContextMenu=new _4df({tree:this.tree});this.treeContextMenu.bindNodeToNoContentMenu(this.tree.rootNode.domNode);},postCreate:function(){this.inherited(arguments);_4dc.place(this.tree.domNode,this.tocContainer);},initListeners:function(){this.tree.on("click",lang.hitch(this,this.treeClickHandler));},getNodeFromItem:function(item){var _4e2=item.id[0];return this.tree._itemNodesMap[_4e2][0];},getTreeIcon:function(item,_4e3){if(item.root){return "tocIcons layerService";}var _4e4=null;var _4e5=null;if(item.layer){_4e4=this.treeStore.getValue(item,"layer");}if(item.layerId){_4e5=this.treeStore.getValue(item,"layerId");}if(_4e4){if(_4e5!=null){var _4e6=this.treeStore.getValue(item,"info");if(lang.isArray(_4e6.subLayerIds)&&_4e6.subLayerIds.length>0){if(_4e3){return "tocIcons folderOpen";}else{return "tocIcons folderClosed";}}else{var _4e7=_4da.indexOf(_4e4.visibleLayers,_4e5)>-1;if(lang.isObject(_4e6.metadata)){var _4e8=_4e6.metadata;if(_4e8.geometryType!=""){if(_4e8.geometryType==VIEWER_GLOBALS.ESRI_GEOMETRY_TYPES.POINT){if(_4e4.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.TILED_MAP_SERVICE){return "tocIcons layerPoint";}if(_4e7){return "tocIcons layerPointChecked";}else{return "tocIcons layerPointUnchecked";}}else{if(_4e8.geometryType==VIEWER_GLOBALS.ESRI_GEOMETRY_TYPES.LINE){if(_4e4.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.TILED_MAP_SERVICE){return "tocIcons layerLine";}if(_4e7){return "tocIcons layerLineChecked";}else{return "tocIcons layerLineUnchecked";}}else{if(_4e8.geometryType==VIEWER_GLOBALS.ESRI_GEOMETRY_TYPES.POLYGON){if(_4e4.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.TILED_MAP_SERVICE){return "tocIcons layerPolygon";}if(_4e7){return "tocIcons layerPolygonChecked";}else{return "tocIcons layerPolygonUnchecked";}}else{if(_4e4.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.TILED_MAP_SERVICE){return "tocIcons layerGeneric";}if(_4e7){return "layerGenericChecked";}else{return "layerGenericUnchecked";}}}}}else{if(_4e8.type==VIEWER_GLOBALS.ESRI_LAYER_TYPES.RASTER){if(_4e4 instanceof _4e1){return "tocIcons layerRasterIcon";}if(_4e7){return "tocIcons layerRasterIconChecked";}else{return "tocIcons layerRasterIconUnchecked";}}else{return _4e7?"tocIcons layerGenericChecked":"tocIcons layerGenericUnchecked";}}}else{if(_4e4.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.IMAGE_SERVICE){return "genericLayerIcon";}else{return _4e7?"tocIcons layerGenericChecked":"tocIcons layerGenericUnchecked";}}}}else{if(_4e4.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.IMAGE_SERVICE){if(_4e4.visible){return "tocIcons imageServiceChecked";}else{return "tocIcons imageServiceUnchecked";}}else{if(_4e4.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.DYNAMIC_MAP_SERVICE){if(_4e4.visible){return "tocIcons globeChecked";}else{return "tocIcons globeUnchecked";}}else{if(_4e4.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.TILED_MAP_SERVICE){if(_4e4.visible){return "tocIcons layerRasterChecked";}else{return "tocIcons layerRasterUnchecked";}}else{if(_4e4.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.FEATURE_LAYER){if(_4e4.visible){return "tocIcons layerGenericChecked";}else{return "tocIcons layerGenericUnchecked";}}else{if(_4e4.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.GRAPHICS_LAYER){if(_4e4.visible){return "tocIcons graphicsLayerChecked";}else{return "tocIcons graphicsLayerUnchecked";}}else{if(_4e4.visible){return "tocIcons layerGenericChecked";}else{return "tocIcons layerGenericUnchecked";}}}}}}}}return "tocIcons layerGeneric";},addTreeNode:function(item,_4e9){var _4ea={children:[]};_4ea.parent=_4e9;if(_4e9.children!=null){_4ea.attribute="children";}return this.treeStore.newItem(item,_4ea);},addLayer:function(_4eb){if(_4eb==null||!_4eb.isOperationalLayer){return;}var _4ec=VIEWER_UTILS.getLayerNameFromLayer(_4eb);var _4ed={label:_4ec,serviceId:_4eb.id,layer:_4eb,id:VIEWER_UTILS.generateUUID()};if(lang.isArray(_4eb.layerInfos)&&_4eb.layerInfos.length>0){_4ed.children=[];}var _4ee=this.addTreeNode(_4ed,this.tree.rootNode);var _4ef=this.getNodeFromItem(_4ee);if(!(_4eb.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.GRAPHICS_LAYER)||(_4eb.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.FEATURE_LAYER)){this.treeContextMenu.bindNodeToServerMenu(_4ef.domNode);}else{this.treeContextMenu.bindNodeToGraphicsLayerMenu(_4ef.domNode);}this.checkForChildLayers(_4eb,_4ee);},checkForChildLayers:function(_4f0,_4f1){var _4f2={};var _4f3=_4f0.layerInfos;if(lang.isArray(_4f3)){var _4f4=_4f1;var _4f5;for(var i=0;i<_4f3.length;i++){_4f5=false;var info=_4f3[i];if(info==null){continue;}var name=info.name;var _4f6={id:VIEWER_UTILS.generateUUID(),label:name,layerId:info.id,serviceId:_4f0.id,layer:_4f0,info:info};if(lang.isArray(info.subLayerIds)){_4f6.children=[];_4f5=true;}if(info.parentLayerId>-1){_4f4=_4f2[info.parentLayerId];if(_4f4==null){return;}}var _4f7=this.addTreeNode(_4f6,_4f4);var _4f8=this.getNodeFromItem(_4f7);if(_4f5){_4f2[info.id]=_4f7;this.treeContextMenu.bindNodeToGroupMenu(_4f8.domNode);}else{this.treeContextMenu.bindNodeToLayerMenu(_4f8.domNode);}}}},removeLayer:function(_4f9){if(_4f9==null){return;}var _4fa;this.treeStore.fetch({query:{serviceId:_4f9.id},queryOptions:{deep:false},onComplete:lang.hitch(this,this.deleteNodes)});},deleteNodes:function(_4fb){for(var i=0;i<_4fb.length;i++){this.deleteNode(_4fb[i]);}},deleteChildNodes:function(item){var _4fc=this.treeStore.getValue(item,"isPersistedToCookie");if(_4fc){var url=this.treeStore.getValue(item,"url");}var node=this.getNodeFromItem(item);var _4fd=node.getChildren();for(var i=0;i<_4fd.length;i++){this.deleteNode(_4fd[i].item);}this.treeStore.save();},deleteNode:function(item){this.deleteChildNodes(item);this.treeStore.deleteItem(item);this.treeStore.save();},treeClickHandler:function(item,node,_4fe){var _4ff=null;var _500=null;if(item.layer){_4ff=this.treeStore.getValue(item,"layer");}if(item.layerId){_500=this.treeStore.getValue(item,"layerId");}if(_4ff instanceof _4e1&&item.layerId!=null){return;}if(_4ff&&_500==null){if(_4ff.visible){_4ff.hide();}else{_4ff.show();}}else{if(_4ff&&_500!=null){this.toggleDynamicSubLayerItem(_4ff,_500);this.processVisibleLayers(_4ff);}}node._updateItemClasses(item);},processVisibleLayers:function(_501){if(_501.visibleLayers.length==0){_501.setVisibleLayers([-1]);}else{var _502=VIEWER_UTILS.sortIntegerArray(_501.visibleLayers);_501.setVisibleLayers(_502);}},toggleDynamicSubLayerItem:function(_503,_504){if(_503==null){return;}var _505=_4da.indexOf(_503.visibleLayers,_504)>-1;if(_505){var _506=_4da.indexOf(_503.visibleLayers,_504);if(_506>-1){_503.visibleLayers.splice(_506,1);}}else{_503.visibleLayers.push(_504);}}});});},"esriviewer/map/base/MapNavDrawTools":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/connect","dojo/_base/lang","dojox/timing","dojo/_base/Color","esri/toolbars/draw","esri/graphic","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Extent","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol"],function(_507,_508,con,lang,_509,_50a,Draw,_50b,_50c,_50d,_50e,_50f,_510,_511){return _507([],{CROSSHAIR:"crosshair",DEFAULT:"default",MOVE:"move",POINTER:"pointer",currentGraphicFlashCount:0,maxGraphicFlashCount:3,currentFlashGraphicVisible:false,constructor:function(_512){lang.mixin(this,_512);this.initListeners();this.createDrawToolbar();},createDrawToolbar:function(){this.drawToolbar=new Draw(this.map,{showTooltips:true});},initListeners:function(){_508.subscribe(VIEWER_GLOBALS.EVENTS.MAP.FLASH.POINT,lang.hitch(this,this.flashPoint));_508.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.DRAW_CANCEL,lang.hitch(this,this.handleDrawCancel));_508.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.RECTANGLE_INPUT,lang.hitch(this,this.handleUserRectangleDrawInput));_508.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.POLYLINE_INPUT,lang.hitch(this,this.handleUserPolyLineDrawInput));_508.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.LINE_INPUT,lang.hitch(this,this.handleUserLineDrawInput));_508.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.POINT_INPUT,lang.hitch(this,this.handleUserPointClickInput));_508.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.POLYGON_INPUT,lang.hitch(this,this.handleUserPolygonClickInput));_508.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.FREEHAND_POLYLINE_INPUT,lang.hitch(this,this.handleUserFreehandLineDrawInput));_508.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.FREEHAND_POLYGON_INPUT,lang.hitch(this,this.handleUserFreehandPolygonDrawInput));_508.subscribe(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.ADD,lang.hitch(this,this.handleAddGraphic));_508.subscribe(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.REMOVE,lang.hitch(this,this.removeGraphic));_508.subscribe(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.CENTER_AND_FLASH,lang.hitch(this,this.handleCenterAndFlashGraphic));_508.subscribe(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.CENTER_ON_MAP,lang.hitch(this,this.centerMapAtGraphic));},handleAddGraphic:function(_513){if(this.map&&this.map.graphics){this.map.graphics.add(_513);}},removeGraphic:function(_514){if(this.map&&this.map.graphics){this.map.graphics.remove(_514);}},handleDrawCancel:function(){this.drawToolbar.deactivate();if(this._drawEventHandle){con.disconnect(this._drawEventHandle);this._drawEventHandle=null;_508.publish(VIEWER_GLOBALS.EVENTS.DRAW.DRAW_CANCELLED);}this.map.enableMapNavigation();this.map.setMapCursor(this.DEFAULT);},handleUserRectangleDrawInput:function(_515,_516){_508.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_RECTANGLE);this._userRectangleDrawInput(_515,_516);},handleUserLineDrawInput:function(_517,_518){_508.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_LINE);this._userLineDrawInput(_517,_518);},handleUserPolyLineDrawInput:function(_519,_51a){_508.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_POLYLINE);this._userPolylineDrawInput(_519,_51a);},handleUserPointClickInput:function(_51b,_51c){_508.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_POINT);this._userPointDrawInput(_51b,_51c);},handleUserPolygonClickInput:function(_51d,_51e){_508.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_POLYGON);this._userPolygonDrawInput(_51d,_51e);},handleUserFreehandLineDrawInput:function(_51f,_520){_508.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_FREEHAND_LINE);this._userFreehandLineDrawInput(_51f,_520);},handleUserFreehandPolygonDrawInput:function(_521,_522){_508.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_FREEHAND_POLYGON);this._userFreehandPolygonDrawInput(_521,_522);},_userFreehandPolygonDrawInput:function(_523,_524){this.userDrawCancel();var _525=_524&&_524.cursor?_524.cursor:this.CROSSHAIR;this.map.setMapCursor(_525);this.activateDraw(Draw.FREEHAND_POLYGON,_523,_524);},_userFreehandLineDrawInput:function(_526,_527){this.userDrawCancel();var _528=_527&&_527.cursor?_527.cursor:this.CROSSHAIR;this.map.setMapCursor(_528);this.activateDraw(Draw.FREEHAND_POLYLINE,_526,_527);},_userRectangleDrawInput:function(_529,_52a){this.userDrawCancel();var _52b=_52a&&_52a.cursor?_52a.cursor:this.CROSSHAIR;this.map.setMapCursor(_52b);this.activateDraw(Draw.EXTENT,_529,_52a);},_userLineDrawInput:function(_52c,_52d){this.userDrawCancel();var _52e=_52d&&_52d.cursor?_52d.cursor:this.CROSSHAIR;this.map.setMapCursor(_52e);this.activateDraw(Draw.LINE,_52c,_52d);},_userPolylineDrawInput:function(_52f,_530){this.userDrawCancel();var _531=_530&&_530.cursor?_530.cursor:this.CROSSHAIR;this.map.setMapCursor(_531);this.activateDraw(Draw.POLYLINE,_52f,_530);},_userPointDrawInput:function(_532,_533){this.userDrawCancel();var _534=_533&&_533.cursor?_533.cursor:this.POINTER;this.map.setMapCursor(_534);this.activateDraw(Draw.POINT,_532,_533);},_userPolygonDrawInput:function(_535,_536){this.userDrawCancel();var _537=_536&&_536.cursor?_536.cursor:this.CROSSHAIR;this.map.setMapCursor(_537);this.activateDraw(Draw.POLYGON,_535,_536);},activateDraw:function(type,_538,_539){if(_539==null){_539={};}if(_538!=null&&lang.isFunction(_538)){this._drawEventHandle=con.connect(this.drawToolbar,"onDrawEnd",lang.hitch(this,this._internalDrawComplete,_538));}_539.showTooltips=_539.showTooltips==null?true:_539.showTooltips;this.drawToolbar.activate(type,_539);this.map.disableMapNavigation();_508.publish(VIEWER_GLOBALS.EVENTS.DRAW.DRAW_STARTED);},_internalDrawComplete:function(_53a,_53b){_508.publish(VIEWER_GLOBALS.EVENTS.DRAW.DRAW_COMPLETE);this.drawToolbar.deactivate();this.map.setMapCursor(this.DEFAULT);this.map.enableMapNavigation();if(_53a!=null&&lang.isFunction(_53a)){_53a(_53b);}},userDrawCancel:function(){this.drawToolbar.deactivate();if(this._drawEventHandle){con.disconnect(this._drawEventHandle);this._drawEventHandle=null;_508.publish(VIEWER_GLOBALS.EVENTS.DRAW.DRAW_CANCELLED);}this.map.setMapCursor(this.DEFAULT);},handleCenterAndFlashGraphic:function(_53c){this.centerMapAtGraphic(_53c);this.flashGraphic(_53c);},centerMapAtGraphic:function(_53d){var _53e=this.getGraphicCenter(_53d);if(_53e){this.centerMapAtPoint(_53e);}},centerMapAtPoint:function(_53f){this.map.centerAt(_53f);},flashGraphic:function(_540){if(_540==null||!(_540 instanceof _50b)||this.graphicFlashInProgress){return;}this.currentGraphicFlashCount=0;this.currentFlashGraphic=_540;this.graphicFlashTimer=new _509.Timer(500);var _541=_540.visible;_540.hide();this.graphicFlashTimer.onTick=lang.hitch(this,function(_542){try{if(this.currentGraphicFlashCount==this.maxGraphicFlashCount){this.currentGraphicFlashCount=0;this.graphicFlashTimer.stop();this.graphicFlashInProgress=false;if(_542){this.currentFlashGraphic.show();}else{this.currentFlashGraphic.hide();}}else{if(this.currentFlashGraphic.visible){if(this.currentFlashGraphic!=null){this.currentFlashGraphic.hide();}}else{if(this.currentFlashGraphic!=null){this.currentFlashGraphic.show();this.currentGraphicFlashCount++;}}}}catch(err){}},_541);this.graphicFlashInProgress=true;this.graphicFlashTimer.start();},getGraphicCenter:function(_543){if(_543==null){return;}if(_543.geometry==null){return;}var _544=_543.geometry;if(_544 instanceof _50c){return _544;}else{if(_544 instanceof _50d||_544 instanceof _50e){var _545=_544.getExtent();return _545.getCenter();}else{if(_544 instanceof _50f){return _544.getCenter();}}}return null;},flashPoint:function(pt,_546){if(_546==null){_546=20;}var _547;if(pt==null||!(pt instanceof _50c)){return;}var _548=new _510(_510.STYLE_X,2,new _511(_511.STYLE_SOLID,new _50a([255,0,0])));_547=new _50b(pt,_548);var opac=1;setTimeout(function(){_508.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.ADD,_547);var i_id=setInterval(function(){_548.setColor(new _50a([255,0,0,opac]));_547.setSymbol(_548);if(opac<0.01){clearInterval(i_id);_508.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.REMOVE,_547);}opac-=0.01;},_546);},700);}});});},"dijit/ColorPalette":function(){define(["require","dojo/text!./templates/ColorPalette.html","./_Widget","./_TemplatedMixin","./_PaletteMixin","./hccss","dojo/i18n","dojo/_base/Color","dojo/_base/declare","dojo/dom-construct","dojo/string","dojo/i18n!dojo/nls/colors","dojo/colors"],function(_549,_54a,_54b,_54c,_54d,has,i18n,_54e,_54f,_550,_551){var _552=_54f("dijit.ColorPalette",[_54b,_54c,_54d],{palette:"7x10",_palettes:{"7x10":[["white","seashell","cornsilk","lemonchiffon","lightyellow","palegreen","paleturquoise","lightcyan","lavender","plum"],["lightgray","pink","bisque","moccasin","khaki","lightgreen","lightseagreen","lightskyblue","cornflowerblue","violet"],["silver","lightcoral","sandybrown","orange","palegoldenrod","chartreuse","mediumturquoise","skyblue","mediumslateblue","orchid"],["gray","red","orangered","darkorange","yellow","limegreen","darkseagreen","royalblue","slateblue","mediumorchid"],["dimgray","crimson","chocolate","coral","gold","forestgreen","seagreen","blue","blueviolet","darkorchid"],["darkslategray","firebrick","saddlebrown","sienna","olive","green","darkcyan","mediumblue","darkslateblue","darkmagenta"],["black","darkred","maroon","brown","darkolivegreen","darkgreen","midnightblue","navy","indigo","purple"]],"3x4":[["white","lime","green","blue"],["silver","yellow","fuchsia","navy"],["gray","red","purple","black"]]},templateString:_54a,baseClass:"dijitColorPalette",_dyeFactory:function(_553,row,col,_554){return new this._dyeClass(_553,row,col,_554);},buildRendering:function(){this.inherited(arguments);this._dyeClass=_54f(_552._Color,{palette:this.palette});this._preparePalette(this._palettes[this.palette],i18n.getLocalization("dojo","colors",this.lang));}});_552._Color=_54f("dijit._Color",_54e,{template:"<span class='dijitInline dijitPaletteImg'>"+"<img src='${blankGif}' alt='${alt}' title='${title}' class='dijitColorPaletteSwatch' style='background-color: ${color}'/>"+"</span>",hcTemplate:"<span class='dijitInline dijitPaletteImg' style='position: relative; overflow: hidden; height: 12px; width: 14px;'>"+"<img src='${image}' alt='${alt}' title='${title}' style='position: absolute; left: ${left}px; top: ${top}px; ${size}'/>"+"</span>",_imagePaths:{"7x10":_549.toUrl("./themes/a11y/colors7x10.png"),"3x4":_549.toUrl("./themes/a11y/colors3x4.png")},constructor:function(_555,row,col,_556){this._title=_556;this._row=row;this._col=col;this.setColor(_54e.named[_555]);},getValue:function(){return this.toHex();},fillCell:function(cell,_557){var html=_551.substitute(has("highcontrast")?this.hcTemplate:this.template,{color:this.toHex(),blankGif:_557,alt:this._title,title:this._title,image:this._imagePaths[this.palette].toString(),left:this._col*-20-5,top:this._row*-20-5,size:this.palette=="7x10"?"height: 145px; width: 206px":"height: 64px; width: 86px"});_550.place(html,cell);}});return _552;});},"esriviewer/ui/base/UIWidget":function(){define(["dojo/_base/declare","dijit/_Widget","dojo/_base/lang","dojo/_base/connect","dojo/dom-class","dojo/dom-construct","dojo/dom-style","../../base/ConfigurationEntryMixin"],function(_558,_559,lang,con,_55a,_55b,_55c,_55d){return _558([_559,_55d],{defaultPositioning:{x:0,y:0},animateOnPlace:true,animate:false,animation:"fadeIn animated",positioningParamName:null,isPositionedByConfig:false,LEFT_LOWER:"left",RIGHT_LOWER:"right",TOP_LOWER:"top",BOTTOM_LOWER:"bottom",constructor:function(){this.creationPositioning=lang.mixin({},this.defaultPositioning);this.connects=[];this.subscribes=[];},postCreate:function(){this.loadViewerConfigurationData();this.initListeners();if(this.isPositionedByConfig){this.positionNode();}},initListeners:function(){},destroy:function(){this.clearSubscribes();this.clearConnects();},placeAt:function(node){_55b.place(this.domNode,node);if(this.animate&&this.animateOnPlace){this._animateWidget();}return this;},clearSubscribes:function(){if(lang.isArray(this.subscribes)){for(var i=0;i<this.subscribes.length;i++){this.subscribes[i].remove();}}},positionNode:function(){_55c.set(this.domNode,"position","absolute");var _55e=VIEWER_GLOBALS.windowPositioning[this.positioningParamName];var _55f=(_55e!=null&&_55e.x!=null)?_55e.x:this.defaultPositioning.x;var _560=(_55e!=null&&_55e.y!=null)?_55e.y:this.defaultPositioning.y;var _561="left";var _562="top";if(_55e){if(_55e.alignY!=null&&lang.isString(_55e.alignY)){var _563=_55e.alignY.toLowerCase();if(_563===this.TOP_LOWER||_563===this.BOTTOM_LOWER){_562=_563;}}if(_55e.alignX!=null&&lang.isString(_55e.alignX)){var _564=_55e.alignX.toLowerCase();if(_564===this.LEFT_LOWER||_564===this.RIGHT_LOWER){_561=_564;}}}_55c.set(this.domNode,_561,_55f+"px");_55c.set(this.domNode,_562,_560+"px");this.creationPositioning={x:_55f,y:_560,alignX:_561,alignY:_562};},clearConnects:function(){if(lang.isArray(this.connects)){for(var i=0;i<this.connects.length;i++){if(this.connects[i].remove!=null&&lang.isFunction(this.connects[i].remove)){this.connects[i].remove();}else{con.disconnect(this.connects[i]);}}}},show:function(){_55c.set(this.domNode,"display","block");},hide:function(){_55c.set(this.domNode,"display","none");},hidePopups:function(){},_animateWidget:function(){this._removeAnimationClasses();_55a.add(this.domNode,this.animation);},_removeAnimationClasses:function(){_55a.remove(this.domNode,this.animation);},_handleContentAnimation:function(_565,node){if(_565){_55a.add(node,VIEWER_GLOBALS.ANIMATIONS.FADE.IN);}else{_55a.remove(node,VIEWER_GLOBALS.ANIMATIONS.FADE.IN);}}});});},"dojox/storage":function(){define(["./storage/_common"],function(){});},"dojox/main":function(){define(["dojo/_base/kernel"],function(dojo){return dojo.dojox;});},"esriviewer/ui/measure/MeasureWidget":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/topic","../base/UITemplatedWidget","dojo/text!./template/MeasureWidgetTemplate.html","./model/MeasureWidgetViewModel","../draw/base/MapDrawSupport","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleMarkerSymbol"],function(_566,lang,_567,_568,_569,_56a,_56b,_56c,_56d,_56e,_56f,_570,_571,_572){return _566([_569,_56c],{measureFloatPrecision:2,locationFloatPrecision:3,templateString:_56a,AREA:"area",DISTANCE:"distance",LOCATION:"location",constructor:function(){this.currentGeometry=null;this.currentGraphic=null;},postCreate:function(){this.distanceResponseCallback=lang.hitch(this,this.handleDistanceResponse);this.areaResponseCallback=lang.hitch(this,this.handleAreaResponse);this.locationResponseCallback=lang.hitch(this,this.handleLocationResponse);this.initSymbology();this.viewModel=new _56b();this.viewModel.areaActive.subscribe(lang.hitch(this,this.handleAreaActiveChanged));this.viewModel.distanceActive.subscribe(lang.hitch(this,this.handleDistanceActiveChanged));this.viewModel.locationActive.subscribe(lang.hitch(this,this.handleLocationActiveChanged));this.viewModel.selectedAreaUnits.subscribe(lang.hitch(this,this.handleSelectedAreaUnitsChanged));this.viewModel.selectedDistanceUnits.subscribe(lang.hitch(this,this.handleSelectedDistanceUnitsChanged));this.viewModel.selectedLocationUnits.subscribe(lang.hitch(this,this.handleSelectedLocationUnitsChanged));ko.applyBindings(this.viewModel,this.domNode);},handleSelectedLocationUnitsChanged:function(_573){if(this.currentGeometry&&this.currentGeometry instanceof _56d){_568.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_LAT_LON,this.currentGeometry,this.locationResponseCallback);}},handleSelectedDistanceUnitsChanged:function(_574){if(this.currentGeometry&&this.currentGeometry instanceof _56e){_568.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_DISTANCE,this.currentGeometry,_574,this.distanceResponseCallback);}},handleSelectedAreaUnitsChanged:function(_575){if(this.currentGeometry&&this.currentGeometry instanceof _56f){_568.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_AREA,this.currentGeometry,_575,this.areaResponseCallback);}},initSymbology:function(){this.polygonSymbol=new _570(_570.STYLE_SOLID,new _571(_571.STYLE_SOLID,new _567([0,0,255]),1),new _567([0,0,255,0]));this.pointSymbol=new _572(_572.STYLE_X,1,new _571(_571.STYLE_SOLID,new _567("blue")));this.lineSymbol=new _571(_571.STYLE_SOLID,new _567([0,0,255]),1);},handleAreaActiveChanged:function(_576){if(_576){this.handlePolygonDraw();this.activeMode=this.AREA;}else{if(this.activeMode==this.AREA){this.activeMode="";this.clearCurrentGraphic();this.clearDraw();}}},handleDistanceActiveChanged:function(_577){if(_577){this.handleLineDraw();this.activeMode=this.DISTANCE;}else{if(this.activeMode==this.DISTANCE){this.activeMode="";this.clearCurrentGraphic();this.clearDraw();}}},handleLocationActiveChanged:function(_578){if(_578){this.handlePointDraw();this.activeMode=this.LOCATION;}else{if(this.activeMode==this.LOCATION){this.activeMode="";this.clearCurrentGraphic();this.clearDraw();}}},clearDraw:function(){this.inherited(arguments);this.viewModel.areaActive(false);this.viewModel.distanceActive(false);this.viewModel.locationActive(false);this.viewModel.measureMethodText("");this.viewModel.unitsText("");this.viewModel.resultsText("");_568.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.DRAW_CANCEL);},clearCurrentGraphic:function(){if(this.currentGraphic){_568.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.REMOVE,this.currentGraphic);this.currentGraphic=null;}},handleLineDraw:function(){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_LINE);},handlePolygonDraw:function(){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON);},handlePointDraw:function(){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT);},geometryAdded:function(_579){this.currentGeometry=_579;this.inherited(arguments);if(this.viewModel.locationActive()){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT);_568.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_LAT_LON,_579,this.locationResponseCallback);}if(this.viewModel.areaActive()){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON);_568.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_AREA,_579,this.viewModel.selectedAreaUnits(),this.areaResponseCallback);}if(this.viewModel.distanceActive()){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_LINE);_568.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_DISTANCE,_579,this.viewModel.selectedDistanceUnits(),this.distanceResponseCallback);}},handleDistanceResponse:function(_57a){if(_57a==null||!lang.isObject(_57a)||_57a.lengths==null||!lang.isArray(_57a.lengths)||_57a.lengths.length<1){return;}this.viewModel.measureMethodText("Distance: ");this.viewModel.resultsText(REG_EXP_UTILS.numberToStringWithCommas(_57a.lengths[0].toFixed(this.measureFloatPrecision)));this.viewModel.unitsText(this.viewModel.getLabelForDistanceValue(this.viewModel.selectedDistanceUnits()));},handleAreaResponse:function(_57b){if(_57b==null||!lang.isObject(_57b)||_57b.areas==null||!lang.isArray(_57b.areas)||_57b.areas.length<1){return;}var area=_57b.areas[0];this.viewModel.measureMethodText("Area: ");this.viewModel.unitsText(this.viewModel.getLabelForAreaValue(this.viewModel.selectedAreaUnits()));this.viewModel.resultsText(REG_EXP_UTILS.numberToStringWithCommas(area.toFixed(this.measureFloatPrecision)));},handleLocationResponse:function(_57c){if(_57c==null||!lang.isArray(_57c)||_57c.length<1){return;}var pt=_57c[0];this.viewModel.measureMethodText("");this.viewModel.unitsText("");if(this.viewModel.selectedLocationUnits()==VIEWER_GLOBALS.ESRI_UNITS.DEGREE_MINUTE_SECONDS){this.viewModel.resultsText("Latitude: "+GEOMETRY_UTILS.ddToDMSString(pt.y)+" Longitude:"+GEOMETRY_UTILS.ddToDMSString(pt.x));}else{this.viewModel.resultsText("Latitude: "+pt.y.toFixed(this.locationFloatPrecision)+" Longitude: "+pt.x.toFixed(this.locationFloatPrecision));}},onAnnotationCreated:function(_57d){if(_57d!=null&&_57d.graphic!=null){this.inherited(arguments);this.clearCurrentGraphic();this.currentGraphic=_57d.graphic;_568.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.ADD,_57d.graphic);}},reset:function(){this.clearCurrentGraphic();this.clearDraw();}});});},"esriviewer/map/geometry/base/ProjectionUtils":function(){define(["dojo/_base/declare","dojo/_base/lang","esri/geometry/webMercatorUtils","esri/geometry/Point","esri/SpatialReference"],function(_57e,lang,_57f,_580,_581){return _57e([],{DEG_2_RAD:Math.PI/180,BLOCK_SIZE:100000,GRIDSQUARE_SET_COL_SIZE:8,GRIDSQUARE_SET_ROW_SIZE:20,UNDEFINED_STR:"undefined",WEB_MERCATOR_WKID:102100,WGS_84_WKID:4326,EASTING_OFFSET:500000,NORTHING_OFFSET:10000000,k0:0.9996,RAD_2_DEG:(180/Math.PI),EQUATORIAL_RADIUS_NAD83:6378137,EQUATORIAL_RADIUS_NAD27:6378206.4,ECC_SQUARED_NAD83:0.006694380023,ECC_SQUARED_NAD27:0.006768658,UTMGzdLetters:"NPQRSTUVWX",USNGSqEast:"ABCDEFGHJKLMNPQRSTUVWXYZ",USNGSqLetOdd:"ABCDEFGHJKLMNPQRSTUV",USNGSqLetEven:"FGHJKLMNPQRSTUVABCDE",zoneBase:[1.1,2,2.9,3.8,4.7,5.6,6.5,7.3,8.2,9.1,0,0.8,1.7,2.6,3.5,4.4,5.3,6.2,7,7.9],segBase:[0,2,2,2,4,4,6,6,8,8,0,0,0,2,2,4,4,6,6,6],isNad83Mode:true,constructor:function(){if(this.isNad83Mode){this.EQUATORIAL_RADIUS=this.EQUATORIAL_RADIUS_NAD83;this.ECC_SQUARED=this.ECC_SQUARED_NAD83;}else{this.EQUATORIAL_RADIUS=this.EQUATORIAL_RADIUS_NAD27;this.ECC_SQUARED=this.ECC_SQUARED_NAD27;}this.ECC_PRIME_SQUARED=this.ECC_SQUARED/(1-this.ECC_SQUARED);this.E1=(1-Math.sqrt(1-this.ECC_SQUARED))/(1+Math.sqrt(1-this.ECC_SQUARED));},setMapSpatialReference:function(_582){this.mapSpatialReference=_582;},graphicsToMapSpatialReference:function(_583){if(_583==null){return null;}if(!lang.isArray(_583)){_583=[_583];}if(_583.length<1){return [];}if((this.mapSpatialReference.wkid===this.WEB_MERCATOR_WKID||this.mapSpatialReference.wkid===this.WGS_84_WKID)&&_583[0].geometry.spatialReference.wkid===this.WEB_MERCATOR_WKID||_583[0].geometry.spatialReference.wkid===this.WGS_84_WKID){var _584=null;if(this.mapSpatialReference.wkid===this.WEB_MERCATOR_WKID&&_583[0].geometry.spatialReference.wkid===this.WGS_84_WKID){_584=_57f.geographicToWebMercator;}else{if(_583[0].geometry.spatialReference.wkid===this.WEB_MERCATOR_WKID&&this.mapSpatialReference.wkid===this.WGS_84_WKID){_584=_57f.webMercatorToGeographic;}}if(lang.isFunction(_584)){var _585;for(var i=0;i<_583.length;i++){_585=_583[i];_585.geometry=_584(_585.geometry);}}}return _583;},geometryToMapSpatialReference:function(_586){if(_586==null){return null;}if(!lang.isArray(_586)){_586=[_586];}if(_586.length<1){return [];}if(this.mapSpatialReference.wkid==_586[0].spatialReference.wkid){return _586;}var _587=null;if((this.mapSpatialReference.wkid===this.WEB_MERCATOR_WKID||this.mapSpatialReference.wkid===this.WGS_84_WKID)&&_586[0].spatialReference.wkid===this.WEB_MERCATOR_WKID||_586[0].spatialReference.wkid===this.WGS_84_WKID){var _588=null;if(this.mapSpatialReference.wkid===this.WEB_MERCATOR_WKID&&_586[0].spatialReference.wkid===this.WGS_84_WKID){_588=_57f.geographicToWebMercator;}else{if(_586[0].spatialReference.wkid===this.WEB_MERCATOR_WKID&&this.mapSpatialReference.wkid===this.WGS_84_WKID){_588=_57f.webMercatorToGeographic;}}if(lang.isFunction(_588)){_587=[];for(var i=0;i<_586.length;i++){_587.push(_588(_586[i]));}}}return _587;},USNGtoLL:function(_589,_58a){var _58b=[];var _58c={};this.parseUSNG_str(_589,_58c);var _58d={};this.USNGtoUTM(_58c.zone,_58c.letN,_58c.sq1,_58c.sq2,_58c.east,_58c.north,_58d);if(_58c.letN<"N"){_58d.N-=this.NORTHING_OFFSET;}this.UTMtoLL(_58d.N,_58d.E,_58c.zone,_58d);_58b[0]=_58d.lat;_58b[1]=_58d.lon;var _58e=new _580(_58d.lon,_58d.lat,new _581(4326));if(_58a&&lang.isFunction(_58a)){_58a(_58e);}else{return _58e;}},USNGtoUTM:function(zone,letN,sq1,sq2,east,_58f,ret){var _590=this.USNGSqEast.indexOf(sq1);var _591=1+_590%8;var _592;var _593="CDEFGHJKLMNPQRSTUVWX".indexOf(letN);if(zone%2){_592="ABCDEFGHJKLMNPQRSTUV".indexOf(sq2);}else{_592="FGHJKLMNPQRSTUVABCDE".indexOf(sq2);}var _594=this.zoneBase[_593];var _595=Number(this.segBase[_593])+_592/10;if(_595<_594){_595+=2;}ret.N=_595*1000000+Number(_58f)*Math.pow(10,5-_58f.length);ret.E=_591*100000+Number(east)*Math.pow(10,5-east.length);ret.zone=zone;ret.letter=letN;},parseUSNG_str:function(_596,_597){var j=0;var k;var _598=[];var _599=[];_599=_596.toUpperCase();var _59a=/%20/g;_598=_599.replace(_59a,"");_59a=/ /g;_598=_599.replace(_59a,"");if(_598.length<7){return 0;}_597.zone=_598.charAt(j++)*10+_598.charAt(j++)*1;_597.letN=_598.charAt(j++);_597.sq1=_598.charAt(j++);_597.sq2=_598.charAt(j++);_597.precision=(_598.length-j)/2;_597.east="";_597.north="";for(k=0;k<_597.precision;k++){_597.east+=_598.charAt(j++);}if(_598[j]==" "){j++;}for(k=0;k<_597.precision;k++){_597.north+=_598.charAt(j++);}},UTMtoLL:function(_59b,_59c,_59d,ret){var xUTM=parseFloat(_59c)-this.EASTING_OFFSET;var yUTM=parseFloat(_59b);var _59e=parseInt(_59d,10);var _59f=(_59e-1)*6-180+3;var M=yUTM/this.k0;var mu=M/(this.EQUATORIAL_RADIUS*(1-this.ECC_SQUARED/4-3*this.ECC_SQUARED*this.ECC_SQUARED/64-5*this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED/256));var _5a0=mu+(3*this.E1/2-27*this.E1*this.E1*this.E1/32)*Math.sin(2*mu)+(21*this.E1*this.E1/16-55*this.E1*this.E1*this.E1*this.E1/32)*Math.sin(4*mu)+(151*this.E1*this.E1*this.E1/96)*Math.sin(6*mu);var phi1=_5a0*this.RAD_2_DEG;var N1=this.EQUATORIAL_RADIUS/Math.sqrt(1-this.ECC_SQUARED*Math.sin(_5a0)*Math.sin(_5a0));var T1=Math.tan(_5a0)*Math.tan(_5a0);var C1=this.ECC_PRIME_SQUARED*Math.cos(_5a0)*Math.cos(_5a0);var R1=this.EQUATORIAL_RADIUS*(1-this.ECC_SQUARED)/Math.pow(1-this.ECC_SQUARED*Math.sin(_5a0)*Math.sin(_5a0),1.5);var D=xUTM/(N1*this.k0);var lat=_5a0-(N1*Math.tan(_5a0)/R1)*(D*D/2-(5+3*T1+10*C1-4*C1*C1-9*this.ECC_PRIME_SQUARED)*D*D*D*D/24+(61+90*T1+298*C1+45*T1*T1-252*this.ECC_PRIME_SQUARED-3*C1*C1)*D*D*D*D*D*D/720);lat=lat*this.RAD_2_DEG;var lon=(D-(1+2*T1+C1)*D*D*D/6+(5-2*C1+28*T1-3*C1*C1+8*this.ECC_PRIME_SQUARED+24*T1*T1)*D*D*D*D*D/120)/Math.cos(_5a0);lon=_59f+lon*this.RAD_2_DEG;ret.lat=lat;ret.lon=lon;},LLtoMGRS:function(lat,lon,_5a1){var _5a2="";var _5a3=this.LLtoUSNG(lat,lon,_5a1);var _5a4=/ /g;return _5a3.replace(_5a4,"");},LLtoUSNG:function(lat,lon,_5a5){var USNG;lat=parseFloat(lat);lon=parseFloat(lon);var _5a6=this.LLtoUTM(lat,lon);var _5a7=_5a6.easting;var _5a8=_5a6.northing;if(lat<0){_5a8+=this.NORTHING_OFFSET;}var _5a9=this.getZoneNumber(lat,lon);var _5aa=this.findGridLetters(_5a9,_5a8,_5a7);var _5ab=Math.round(_5a8)%this.BLOCK_SIZE;var _5ac=Math.round(_5a7)%this.BLOCK_SIZE;_5ab=Math.floor(_5ab/Math.pow(10,(5-_5a5)));_5ac=Math.floor(_5ac/Math.pow(10,(5-_5a5)));USNG=this.getZoneNumber(lat,lon)+this.UTMLetterDesignator(lat)+" "+_5aa+" ";var i;for(i=String(_5ac).length;i<_5a5;i++){USNG+="0";}USNG+=_5ac+" ";for(i=String(_5ab).length;i<_5a5;i++){USNG+="0";}return USNG;},LLtoUTM:function(lat,lon,zone){lat=parseFloat(lat);lon=parseFloat(lon);if(lat>84||lat<-80){return this.UNDEFINED_STR;}var _5ad=(lon+180)-parseInt((lon+180)/360,10)*360-180;var _5ae=lat*this.DEG_2_RAD;var _5af=_5ad*this.DEG_2_RAD;var _5b0=this.getZoneNumber(lat,lon);var _5b1=(_5b0-1)*6-180+3;var _5b2=_5b1*this.DEG_2_RAD;var _5b3=_5b0+""+this.UTMLetterDesignator(lat)+" ";var N=this.EQUATORIAL_RADIUS/Math.sqrt(1-this.ECC_SQUARED*Math.sin(_5ae)*Math.sin(_5ae));var T=Math.tan(_5ae)*Math.tan(_5ae);var C=this.ECC_PRIME_SQUARED*Math.cos(_5ae)*Math.cos(_5ae);var A=Math.cos(_5ae)*(_5af-_5b2);var M=this.EQUATORIAL_RADIUS*((1-this.ECC_SQUARED/4-3*(this.ECC_SQUARED*this.ECC_SQUARED)/64-5*(this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED)/256)*_5ae-(3*this.ECC_SQUARED/8+3*this.ECC_SQUARED*this.ECC_SQUARED/32+45*this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED/1024)*Math.sin(2*_5ae)+(15*this.ECC_SQUARED*this.ECC_SQUARED/256+45*this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED/1024)*Math.sin(4*_5ae)-(35*this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED/3072)*Math.sin(6*_5ae));var _5b4=(this.k0*N*(A+(1-T+C)*(A*A*A)/6+(5-18*T+T*T+72*C-58*this.ECC_PRIME_SQUARED)*(A*A*A*A*A)/120)+this.EASTING_OFFSET);var _5b5=(this.k0*(M+N*Math.tan(_5ae)*((A*A)/2+(5-T+9*C+4*C*C)*(A*A*A*A)/24+(61-58*T+T*T+600*C-330*this.ECC_PRIME_SQUARED)*(A*A*A*A*A*A)/720)));return {easting:_5b4,northing:_5b5,zone:_5b0};},getZoneNumber:function(lat,lon){lat=parseFloat(lat);lon=parseFloat(lon);var _5b6=(lon+180)-parseInt((lon+180)/360,10)*360-180;var _5b7=parseInt((_5b6+180)/6,10)+1;if(lat>=56&&lat<64&&_5b6>=3&&_5b6<12){_5b7=32;}if(lat>=72&&lat<84){if(_5b6>=0&&_5b6<9){_5b7=31;}else{if(_5b6>=9&&_5b6<21){_5b7=33;}else{if(_5b6>=21&&_5b6<33){_5b7=35;}else{if(_5b6>=33&&_5b6<42){_5b7=37;}}}}}return _5b7;},findGridLetters:function(_5b8,_5b9,_5ba){_5b8=parseInt(_5b8,10);_5b9=parseFloat(_5b9);_5ba=parseFloat(_5ba);row=1;var _5bb=Math.round(_5b9);while(_5bb>=this.BLOCK_SIZE){_5bb=_5bb-this.BLOCK_SIZE;row++;}var row=row%this.GRIDSQUARE_SET_ROW_SIZE;var col=0;var _5bc=Math.round(_5ba);while(_5bc>=this.BLOCK_SIZE){_5bc=_5bc-this.BLOCK_SIZE;col++;}col=col%this.GRIDSQUARE_SET_COL_SIZE;return this.lettersHelper(this.findSet(_5b8),row,col);},findSet:function(_5bd){_5bd=parseInt(_5bd,10);_5bd=_5bd%6;switch(_5bd){case 0:return 6;break;case 1:return 1;break;case 2:return 2;break;case 3:return 3;break;case 4:return 4;break;case 5:return 5;break;default:return -1;break;}},lettersHelper:function(set,row,col){if(row==0){row=this.GRIDSQUARE_SET_ROW_SIZE-1;}else{row--;}if(col==0){col=this.GRIDSQUARE_SET_COL_SIZE-1;}else{col--;}var l1;var l2;switch(set){case 1:l1="ABCDEFGH";l2="ABCDEFGHJKLMNPQRSTUV";return l1.charAt(col)+l2.charAt(row);break;case 2:l1="JKLMNPQR";l2="FGHJKLMNPQRSTUVABCDE";return l1.charAt(col)+l2.charAt(row);break;case 3:l1="STUVWXYZ";l2="ABCDEFGHJKLMNPQRSTUV";return l1.charAt(col)+l2.charAt(row);break;case 4:l1="ABCDEFGH";l2="FGHJKLMNPQRSTUVABCDE";return l1.charAt(col)+l2.charAt(row);break;case 5:l1="JKLMNPQR";l2="ABCDEFGHJKLMNPQRSTUV";return l1.charAt(col)+l2.charAt(row);break;case 6:l1="STUVWXYZ";l2="FGHJKLMNPQRSTUVABCDE";return l1.charAt(col)+l2.charAt(row);break;}},UTMLetterDesignator:function(lat){lat=parseFloat(lat);var _5be;if((84>=lat)&&(lat>=72)){_5be="X";}else{if((72>lat)&&(lat>=64)){_5be="W";}else{if((64>lat)&&(lat>=56)){_5be="V";}else{if((56>lat)&&(lat>=48)){_5be="U";}else{if((48>lat)&&(lat>=40)){_5be="T";}else{if((40>lat)&&(lat>=32)){_5be="S";}else{if((32>lat)&&(lat>=24)){_5be="R";}else{if((24>lat)&&(lat>=16)){_5be="Q";}else{if((16>lat)&&(lat>=8)){_5be="P";}else{if((8>lat)&&(lat>=0)){_5be="N";}else{if((0>lat)&&(lat>=-8)){_5be="M";}else{if((-8>lat)&&(lat>=-16)){_5be="L";}else{if((-16>lat)&&(lat>=-24)){_5be="K";}else{if((-24>lat)&&(lat>=-32)){_5be="J";}else{if((-32>lat)&&(lat>=-40)){_5be="H";}else{if((-40>lat)&&(lat>=-48)){_5be="G";}else{if((-48>lat)&&(lat>=-56)){_5be="F";}else{if((-56>lat)&&(lat>=-64)){_5be="E";}else{if((-64>lat)&&(lat>=-72)){_5be="D";}else{if((-72>lat)&&(lat>=-80)){_5be="C";}else{_5be="Z";}}}}}}}}}}}}}}}}}}}}return _5be;}});});},"esriviewer/ui/toolbar/model/ActionsToolbarViewModel":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang"],function(_5bf,_5c0,lang){return _5bf([],{showLabelsButton:ko.observable(true),showBookmarksButton:ko.observable(true),showLocator:ko.observable(true),showConfigureLocatorsButton:ko.observable(true),showExtentActionsToolbar:ko.observable(true),prevExtentEnabled:ko.observable(false),nextExtentEnabled:ko.observable(false),constructor:function(){this.toolsButtonVisible=ko.observable(true);this.layersButtonVisible=ko.observable(true);_5c0.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PREV_EXTENT_EXISTS,lang.hitch(this,this.updatePrevExtentEnabled));_5c0.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.NEXT_EXTENT_EXISTS,lang.hitch(this,this.updateNextExtentEnabled));},updatePrevExtentEnabled:function(_5c1){this.prevExtentEnabled(_5c1);},updateNextExtentEnabled:function(_5c2){this.nextExtentEnabled(_5c2);}});});},"esriviewer/ui/navigation/model/NavigationWidgetViewModel":function(){define(["dojo/_base/declare"],function(_5c3){return _5c3([],{constructor:function(){this.visible=ko.observable(true);}});});},"dojox/uuid/generateTimeBasedUuid":function(){define(["dojo/_base/lang","./_base"],function(lang){dojox.uuid.generateTimeBasedUuid=function(node){var _5c4=dojox.uuid.generateTimeBasedUuid._generator.generateUuidString(node);return _5c4;};dojox.uuid.generateTimeBasedUuid.isValidNode=function(node){var _5c5=16;var _5c6=parseInt(node,_5c5);var _5c7=lang.isString(node)&&node.length==12&&isFinite(_5c6);return _5c7;};dojox.uuid.generateTimeBasedUuid.setNode=function(node){dojox.uuid.assert((node===null)||this.isValidNode(node));this._uniformNode=node;};dojox.uuid.generateTimeBasedUuid.getNode=function(){return this._uniformNode;};dojox.uuid.generateTimeBasedUuid._generator=new function(){this.GREGORIAN_CHANGE_OFFSET_IN_HOURS=3394248;var _5c8=null;var _5c9=null;var _5ca=null;var _5cb=0;var _5cc=null;var _5cd=null;var _5ce=16;function _5cf(_5d0){_5d0[2]+=_5d0[3]>>>16;_5d0[3]&=65535;_5d0[1]+=_5d0[2]>>>16;_5d0[2]&=65535;_5d0[0]+=_5d0[1]>>>16;_5d0[1]&=65535;dojox.uuid.assert((_5d0[0]>>>16)===0);};function _5d1(x){var _5d2=new Array(0,0,0,0);_5d2[3]=x%65536;x-=_5d2[3];x/=65536;_5d2[2]=x%65536;x-=_5d2[2];x/=65536;_5d2[1]=x%65536;x-=_5d2[1];x/=65536;_5d2[0]=x;return _5d2;};function _5d3(_5d4,_5d5){dojox.uuid.assert(lang.isArray(_5d4));dojox.uuid.assert(lang.isArray(_5d5));dojox.uuid.assert(_5d4.length==4);dojox.uuid.assert(_5d5.length==4);var _5d6=new Array(0,0,0,0);_5d6[3]=_5d4[3]+_5d5[3];_5d6[2]=_5d4[2]+_5d5[2];_5d6[1]=_5d4[1]+_5d5[1];_5d6[0]=_5d4[0]+_5d5[0];_5cf(_5d6);return _5d6;};function _5d7(_5d8,_5d9){dojox.uuid.assert(lang.isArray(_5d8));dojox.uuid.assert(lang.isArray(_5d9));dojox.uuid.assert(_5d8.length==4);dojox.uuid.assert(_5d9.length==4);var _5da=false;if(_5d8[0]*_5d9[0]!==0){_5da=true;}if(_5d8[0]*_5d9[1]!==0){_5da=true;}if(_5d8[0]*_5d9[2]!==0){_5da=true;}if(_5d8[1]*_5d9[0]!==0){_5da=true;}if(_5d8[1]*_5d9[1]!==0){_5da=true;}if(_5d8[2]*_5d9[0]!==0){_5da=true;}dojox.uuid.assert(!_5da);var _5db=new Array(0,0,0,0);_5db[0]+=_5d8[0]*_5d9[3];_5cf(_5db);_5db[0]+=_5d8[1]*_5d9[2];_5cf(_5db);_5db[0]+=_5d8[2]*_5d9[1];_5cf(_5db);_5db[0]+=_5d8[3]*_5d9[0];_5cf(_5db);_5db[1]+=_5d8[1]*_5d9[3];_5cf(_5db);_5db[1]+=_5d8[2]*_5d9[2];_5cf(_5db);_5db[1]+=_5d8[3]*_5d9[1];_5cf(_5db);_5db[2]+=_5d8[2]*_5d9[3];_5cf(_5db);_5db[2]+=_5d8[3]*_5d9[2];_5cf(_5db);_5db[3]+=_5d8[3]*_5d9[3];_5cf(_5db);return _5db;};function _5dc(_5dd,_5de){while(_5dd.length<_5de){_5dd="0"+_5dd;}return _5dd;};function _5df(){var _5e0=Math.floor((Math.random()%1)*Math.pow(2,32));var _5e1=_5e0.toString(_5ce);while(_5e1.length<8){_5e1="0"+_5e1;}return _5e1;};this.generateUuidString=function(node){if(node){dojox.uuid.assert(dojox.uuid.generateTimeBasedUuid.isValidNode(node));}else{if(dojox.uuid.generateTimeBasedUuid._uniformNode){node=dojox.uuid.generateTimeBasedUuid._uniformNode;}else{if(!_5c8){var _5e2=32768;var _5e3=Math.floor((Math.random()%1)*Math.pow(2,15));var _5e4=(_5e2|_5e3).toString(_5ce);_5c8=_5e4+_5df();}node=_5c8;}}if(!_5c9){var _5e5=32768;var _5e6=Math.floor((Math.random()%1)*Math.pow(2,14));_5c9=(_5e5|_5e6).toString(_5ce);}var now=new Date();var _5e7=now.valueOf();var _5e8=_5d1(_5e7);if(!_5cc){var _5e9=_5d1(60*60);var _5ea=_5d1(dojox.uuid.generateTimeBasedUuid._generator.GREGORIAN_CHANGE_OFFSET_IN_HOURS);var _5eb=_5d7(_5ea,_5e9);var _5ec=_5d1(1000);_5cc=_5d7(_5eb,_5ec);_5cd=_5d1(10000);}var _5ed=_5e8;var _5ee=_5d3(_5cc,_5ed);var _5ef=_5d7(_5ee,_5cd);if(now.valueOf()==_5ca){_5ef[3]+=_5cb;_5cf(_5ef);_5cb+=1;if(_5cb==10000){while(now.valueOf()==_5ca){now=new Date();}}}else{_5ca=now.valueOf();_5cb=1;}var _5f0=_5ef[2].toString(_5ce);var _5f1=_5ef[3].toString(_5ce);var _5f2=_5dc(_5f0,4)+_5dc(_5f1,4);var _5f3=_5ef[1].toString(_5ce);_5f3=_5dc(_5f3,4);var _5f4=_5ef[0].toString(_5ce);_5f4=_5dc(_5f4,3);var _5f5="-";var _5f6="1";var _5f7=_5f2+_5f5+_5f3+_5f5+_5f6+_5f4+_5f5+_5c9+_5f5+node;_5f7=_5f7.toLowerCase();return _5f7;};}();return dojox.uuid.generateTimeBasedUuid;});},"dojo/gears":function(){define(["./_base/lang","./sniff"],function(lang,has){var _5f8={};lang.setObject("dojo.gears",_5f8);_5f8._gearsObject=function(){var _5f9;var _5fa=lang.getObject("google.gears");if(_5fa){return _5fa;}if(typeof GearsFactory!="undefined"){_5f9=new GearsFactory();}else{if(has("ie")){try{_5f9=new ActiveXObject("Gears.Factory");}catch(e){}}else{if(navigator.mimeTypes["application/x-googlegears"]){_5f9=document.createElement("object");_5f9.setAttribute("type","application/x-googlegears");_5f9.setAttribute("width",0);_5f9.setAttribute("height",0);_5f9.style.display="none";document.documentElement.appendChild(_5f9);}}}if(!_5f9){return null;}lang.setObject("google.gears.factory",_5f9);return lang.getObject("google.gears");};_5f8.available=(!!_5f8._gearsObject())||0;return _5f8;});},"esriviewer/ui/identify/IdentifyWindowWidget":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/dom-class","../window/WindowWidget"],function(_5fb,lang,_5fc,_5fd,_5fe){return _5fb([_5fe],{defaultPositioning:{x:400,y:125},windowWidth:"310px",windowHeaderText:"Identify",windowIconAltText:"Identify",windowIconClass:"commonIcons16 information",positioningParamName:"identify",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_5fd.add(this.windowContent,"identifyWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/identify/IdentifyWidget"],lang.hitch(this,function(_5ff){this.identifyWidget=new _5ff();this.setContent(this.identifyWidget.domNode);this.identifyWidget.showQueryView();}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_5fc.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.IDENTIFY.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_5fc.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.IDENTIFY.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_5fc.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.IDENTIFY.TOGGLE,lang.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.identifyWidget){this.identifyWidget.reset();}},show:function(){this.inherited(arguments);if(this.identifyWidget){this.identifyWidget.showQueryView();}}});});},"dijit/layout/AccordionPane":function(){define(["dojo/_base/declare","dojo/_base/kernel","./ContentPane"],function(_600,_601,_602){return _600("dijit.layout.AccordionPane",_602,{constructor:function(){_601.deprecated("dijit.layout.AccordionPane deprecated, use ContentPane instead","","2.0");},onSelected:function(){}});});},"esriviewer/portal/PortalViewerManagerSupportMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","./PortalSupport"],function(_603,lang,_604){return _603([],{portalSupported:false,_initializePortalSupport:function(){if(this.viewerConfig.portal!=null&&lang.isObject(this.viewerConfig.portal)&&this.viewerConfig.portal.url!=null&&this.viewerConfig.portal.url!=""){this.portalSupported=true;new _604();this._createPortalSearchWidget();return true;}return false;},_createPortalSearchWidget:function(){if(this.portalSupported){if(this.viewerConfig.portalSearchWidget!=null&&this.viewerConfig.portalSearchWidget.create!=null&&this.viewerConfig.portalSearchWidget.create==true){require(["esriviewer/ui/portal/PortalSearchWidgetWindow"],function(_605){this.portalSearchWidgetWindow=new _605();});}}}});});},"dojox/storage/_common":function(){define(["dijit","dojo","dojox","dojo/require!dojox/storage/Provider,dojox/storage/manager,dojox/storage/LocalStorageProvider,dojox/storage/GearsStorageProvider,dojox/storage/WhatWGStorageProvider,dojox/storage/FlashStorageProvider,dojox/storage/BehaviorStorageProvider,dojox/storage/CookieStorageProvider"],function(_606,dojo,_607){dojo.provide("dojox.storage._common");dojo.require("dojox.storage.Provider");dojo.require("dojox.storage.manager");dojo.require("dojox.storage.LocalStorageProvider");dojo.require("dojox.storage.GearsStorageProvider");dojo.require("dojox.storage.WhatWGStorageProvider");dojo.require("dojox.storage.FlashStorageProvider");dojo.require("dojox.storage.BehaviorStorageProvider");dojo.require("dojox.storage.CookieStorageProvider");_607.storage.manager.initialize();});},"dojox/sql":function(){define(["./sql/_base"],function(){});},"esriviewer/ui/toolbar/ActionsToolbarWidget":function(){define(["dojo/_base/declare","dojo/text!./template/ActionsToolbarWidgetTemplate.html","dojo/topic","dojo/_base/lang","dojo/on","dojo/has","dojo/dom-style","dojo/dom-class","dojo/dom-construct","dijit/Menu","dijit/MenuItem","../base/UITemplatedWidget","./base/BookmarkListingWidget","./base/LocatorToolbarSupportMixin","./model/ActionsToolbarViewModel","./base/BasemapListingWidget","dijit/form/DropDownButton","dijit/form/ToggleButton"],function(_608,_609,_60a,lang,on,has,_60b,_60c,_60d,Menu,_60e,_60f,_610,_611,_612,_613,_614,_615){return _608([_60f,_611],{animateOnPlace:false,animate:true,showExtentActions:true,useBasemapGallery:false,basemapsDropdownWidth:"125px",bookmarksDropdownWidth:"224px",showLabelServicesButton:true,showConfigureLocatorsIcon:true,showLayersButton:true,showBookmarksButton:true,showToolsDropdownButton:true,configureLocatorTooltipVisible:false,locateDefaultInput:"Enter a location...",templateString:_609,constructor:function(_616){lang.mixin(this,_616||{});},postCreate:function(){this.inherited(arguments);this.viewModel=new _612();this.viewModel.showExtentActionsToolbar(this.showExtentActions);this.toolsDropDownMenu=new Menu({});this.toolsDropDownButton.dropDown=this.toolsDropDownMenu;if(!this.showToolsDropdownButton){this.handleHideToolsButton();}else{this.handleShowToolsButton();}if(this.showLabelServicesButton){var _617=false;_60a.publish(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.SERVICE_EXISTS,function(_618){_617=_618;});if(!_617){this.viewModel.showLabelsButton(false);}}else{this.viewModel.showLabelsButton(false);}if(!this.showLayersButton){this.viewModel.layersButtonVisible(false);}if(!this.showBookmarksButton){this.viewModel.showBookmarksButton(false);}if(!this.showLocator){this.viewModel.showLocator(false);}if(!this.showConfigureLocatorsIcon){this.viewModel.showConfigureLocatorsButton(false);}ko.applyBindings(this.viewModel,this.domNode);this.createToolbarDropDown();this.tweakUI();},loadViewerConfigurationData:function(){var _619=null;_60a.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"animationsEnabled",function(_61a){_619=_61a;});if(_619!=null){this.animate=_619;}var _61b=null;_60a.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"toolsBar",function(_61c){_61b=_61c;});if(_61b&&lang.isObject(_61b)){if(_61b.showExtentActions!=null&&_61b.showExtentActions===false){this.showExtentActions=false;}if(_61b.showToolsDropdown!=null&&_61b.showToolsDropdown===false){this.showToolsDropdownButton=false;}if(_61b.showLayersButton!=null&&_61b.showLayersButton===false){this.showLayersButton=false;}if(_61b.showConfigureLocatorsIcon!=null&&_61b.showConfigureLocatorsIcon===false){this.showConfigureLocatorsIcon=false;}if(_61b.showBookmarksButton!=null&&_61b.showBookmarksButton===false){this.showBookmarksButton=false;}if(_61b.showLocator!=null&&_61b.showLocator===false){this.showLocator=false;}}var _61d=null;_60a.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_61e){_61d=_61e;});if(_61d!=null&&lang.isObject(_61d)){if(_61d.useBasemapGallery!=null&&_61d.useBasemapGallery===true){this.useBasemapGallery=true;}}},handleBookmarksWidgetVisibilityChanged:function(_61f){if(_61f){if(!this.useBasemapGallery){this.basemapListingWidget.hide();}else{var _620;_60a.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.IS_HIDDEN,function(_621){_620=_621;});if(!_620){_60a.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.HIDE);}}this.handleDropdownContentVisibility(true,this.bookmarksDropdownWidth);}else{if(!this.useBasemapGallery){if(!this.basemapListingWidget.viewModel.visible()){this.handleDropdownContentVisibility(false);}}else{this.handleDropdownContentVisibility(false);}}},handleBasemapsWidgetVisibilityChanged:function(_622){if(_622){this.bookmarkListingWidget.hide();if(!this.useBasemapGallery){this.handleDropdownContentVisibility(true,this.basemapsDropdownWidth);}}else{if(!this.bookmarkListingWidget.viewModel.visible()){this.handleDropdownContentVisibility(false);}}},handleDropdownContentVisibility:function(_623,_624){if(!_623){this._showDropdownContent();}else{this._hideDropdownContent(_624);}},_hideDropdownContent:function(_625){if(_625!=null){_60b.set(this.toolbarDropdownElement,"width",_625);}_60b.set(this.toolbarDropdownElement,"display","block");if(this.animate){_60c.add(this.toolbarDropdownElement,VIEWER_GLOBALS.ANIMATIONS.FADE.IN);}},_showDropdownContent:function(){_60b.set(this.toolbarDropdownElement,"display","none");if(this.animate){_60c.remove(this.toolbarDropdownElement,VIEWER_GLOBALS.ANIMATIONS.FADE.IN);}},toggleBasemapsListing:function(){if(!this.useBasemapGallery){this.basemapListingWidget.toggle();}else{var _626;_60a.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.IS_HIDDEN,function(_627){_626=_627;});if(_626){_60a.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.SHOW);if(this.bookmarkListingWidget.viewModel.visible()){this.bookmarkListingWidget.hide();}}else{_60a.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.HIDE);}}},toggleBookmarksListing:function(){this.bookmarkListingWidget.toggle();},initListeners:function(){this.inherited(arguments);if(this.showToolsDropdownButton){_60a.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.ADD_TOOL,lang.hitch(this,this.handleAddToolToMenu));}this.initLocatorListeners();if(this.showLabelServicesButton){_60a.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REFERENCE_LAYER_ADDED,lang.hitch(this,this.handleReferenceLayerAdded));_60a.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REFERENCE_LAYER_REMOVED,lang.hitch(this,this.handleReferenceLayerRemoved));this.labelsButton.on("change",lang.hitch(this,this.handleToggleLabels));on(this.layersButton,"click",lang.hitch(this,this.handleShowLayersWindow));}_60a.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.HIDE_TOOLS_BUTTON,lang.hitch(this,this.handleHideToolsButton));_60a.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.SHOW_TOOLS_BUTTON,lang.hitch(this,this.handleShowToolsButton));_60a.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.HIDE_LAYERS_BUTTON,lang.hitch(this,this.handleHideLayersButton));_60a.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.SHOW_LAYERS_BUTTON,lang.hitch(this,this.handleShowLayersButton));this.loadCurrentLocators();},handleShowLayersButton:function(){this.viewModel.layersButtonVisible(true);},handleHideLayersButton:function(){this.viewModel.layersButtonVisible(false);},handleShowToolsButton:function(){this.viewModel.toolsButtonVisible(true);},handleHideToolsButton:function(){this.viewModel.toolsButtonVisible(false);},handleShowLayersWindow:function(){_60a.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.WIDGET.SHOW);},handleToggleLabels:function(_628){if(_628){_60a.publish(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.SHOW);}else{_60a.publish(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.HIDE);}},handleReferenceLayerRemoved:function(_629,_62a){if(!_62a){this.viewModel.showLabelsButton(false);}},handleReferenceLayerAdded:function(){this.viewModel.showLabelsButton(true);},setBasemaps:function(_62b){if(!this.useBasemapGallery){this.basemapListingWidget.setBasemaps(_62b);}},addStaticBookmarks:function(_62c){if(this.bookmarkListingWidget){this.bookmarkListingWidget.addStaticBookmarks(_62c,false);}},loadCookieBookmarks:function(){if(this.bookmarkListingWidget){this.bookmarkListingWidget.loadCookieBookmarks();}},createToolbarDropDown:function(){this.toolbarDropdownElement=_60d.create("div",{className:"defaultBorder threePixelBorderRadius " +
    "defaultBoxShadow toolbarDropdownContainer",style:{display:"none"}});_60a.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAIN_TOOLBAR_DROP_DOWN,this.toolbarDropdownElement);this.bookmarkListingWidget=new _610();this.bookmarkListingWidget.placeAt(this.toolbarDropdownElement);this.bookmarkListingWidget.viewModel.visible.subscribe(lang.hitch(this,this.handleBookmarksWidgetVisibilityChanged));if(!this.useBasemapGallery){this.basemapListingWidget=new _613();this.basemapListingWidget.placeAt(this.toolbarDropdownElement);this.basemapListingWidget.viewModel.visible.subscribe(lang.hitch(this,this.handleBasemapsWidgetVisibilityChanged));}},tweakUI:function(){this.inherited(arguments);if(has("ie")<9){_60b.set(this.locateButton,"position","relative");_60b.set(this.locateButton,"top","-2px");_60b.set(this.configureLocateButton,"position","relative");_60b.set(this.configureLocateButton,"top","-2px");}else{if(has("ie")>=9){_60b.set(this.locateButton,"height","17px");_60b.set(this.configureLocateButton,"height","17px");_60b.set(this.locateButton,"marginTop","0");_60b.set(this.configureLocateButton,"marginTop","0");}else{if(has("ff")){_60b.set(this.locateButton,"marginTop","0");_60b.set(this.configureLocateButton,"marginTop","0");}}}if(this.toolsDropDownButton){_60b.set(this.toolsDropDownButton.domNode,"float","right");_60b.set(this.toolsDropDownButton.domNode.firstChild,"background","none");_60b.set(this.toolsDropDownButton.domNode.firstChild,"border","none");}_60b.set(this.labelsButton.domNode,"float","right");_60b.set(this.labelsButton.domNode,"marginRight","20px");_60c.add(this.labelsButton.domNode,"defaultTextColor");_60b.set(this.labelsButton.domNode.firstChild,"background","none");_60b.set(this.labelsButton.domNode.firstChild,"border","none");},handleAddToolToMenu:function(_62d){if(_62d instanceof _60e&&this.toolsDropDownMenu){this.toolsDropDownMenu.addChild(_62d);}},handleGotoPrevExtent:function(){_60a.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_PREV_EXTENT);},handleGotoNextExtent:function(){_60a.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_NEXT_EXTENT);},handleGotoFullExtent:function(){var _62e;_60a.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,function(ext){_62e=ext;var _62f=lang.clone(_62e);_62f.xmin=-25924231.641352512;_62f.xmax=24169539.215607613;_62f.ymin=-12751827.549115097;_62f.ymax=22157269.016828995;_60a.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,_62f);});},handleGotoInitialExtent:function(){_60a.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_INITIAL_EXTENT);},handleGotoLastExtent:function(){_60a.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_LAST_EXTENT);}});});},"esriviewer/ui/time/TimeSliderWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/window","dojo/dom-style","../window/WindowWidget"],function(_630,lang,_631,_632,_633,_634){return _630([_634],{defaultPositioning:{x:10,y:50},windowWidth:"450px",windowHeaderText:"Time Slider",windowIconAltText:"Time Slider",windowIconClass:"commonIcons16 clock",positioningParamName:"time",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/time/TimeSliderWidget"],lang.hitch(this,function(_635){this.timeSliderWidget=new _635();this.setContent(this.timeSliderWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_631.subscribe(VIEWER_GLOBALS.EVENTS.MAP.TIME.SHOW_TIME_SLIDER,lang.hitch(this,this.show)));this.subscribes.push(_631.subscribe(VIEWER_GLOBALS.EVENTS.MAP.TIME.TOGGLE_TIME_SLIDER,lang.hitch(this,this.toggle)));},postCreate:function(){var _636=_632.getBox();if(_636.w>1600){_633.set(this.domNode,"width","25%");}else{_633.set(this.domNode,"width","35%");}this.inherited(arguments);},hide:function(){this.inherited(arguments);if(this.timeSliderWidget){this.timeSliderWidget.clearTimeSlider();}}});});},"dijit/MenuItem":function(){define(["dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/kernel","dojo/sniff","dojo/_base/lang","./_Widget","./_TemplatedMixin","./_Contained","./_CssStateMixin","dojo/text!./templates/MenuItem.html"],function(_637,dom,_638,_639,_63a,has,lang,_63b,_63c,_63d,_63e,_63f){var _640=_637("dijit.MenuItem"+(has("dojo-bidi")?"_NoBidi":""),[_63b,_63c,_63d,_63e],{templateString:_63f,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(val){this._set("label",val);var _641="";var text;var ndx=val.search(/{\S}/);if(ndx>=0){_641=val.charAt(ndx+1);var _642=val.substr(0,ndx);var _643=val.substr(ndx+3);text=_642+_641+_643;val=_642+"<span class=\"dijitMenuItemShortcutKey\">"+_641+"</span>"+_643;}else{text=val;}this.domNode.setAttribute("aria-label",text+" "+this.accelKey);this.containerNode.innerHTML=val;this._set("shortcutKey",_641);},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:false,_fillContent:function(_644){if(_644&&!("label" in this.params)){this._set("label",_644.innerHTML);}},buildRendering:function(){this.inherited(arguments);var _645=this.id+"_text";_638.set(this.containerNode,"id",_645);if(this.accelKeyNode){_638.set(this.accelKeyNode,"id",this.id+"_accel");}dom.setSelectable(this.domNode,false);},onClick:function(){},focus:function(){try{if(has("ie")==8){this.containerNode.focus();}this.focusNode.focus();}catch(e){}},_onFocus:function(){this.getParent()._onItemFocus(this);this.inherited(arguments);},_setSelected:function(_646){_639.toggle(this.domNode,"dijitMenuItemSelected",_646);},setLabel:function(_647){_63a.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_647);},setDisabled:function(_648){_63a.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",_648);},_setDisabledAttr:function(_649){this.focusNode.setAttribute("aria-disabled",_649?"true":"false");this._set("disabled",_649);},_setAccelKeyAttr:function(_64a){if(this.accelKeyNode){this.accelKeyNode.style.display=_64a?"":"none";this.accelKeyNode.innerHTML=_64a;_638.set(this.containerNode,"colSpan",_64a?"1":"2");}this._set("accelKey",_64a);}});if(has("dojo-bidi")){_640=_637("dijit.MenuItem",_640,{_setLabelAttr:function(val){this.inherited(arguments);if(this.textDir==="auto"){this.applyTextDir(this.textDirNode);}}});}return _640;});},"esriviewer/ui/measure/MeasureWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","../window/WindowWidget","./MeasureWidget"],function(_64b,lang,_64c,_64d,_64e){return _64b([_64d],{defaultPositioning:{x:50,y:50},windowWidth:"300px",windowHeaderText:"Measure",windowIconAltText:"Measure",windowIconClass:"commonIcons16 triangle",positioningParamName:"measure",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/measure/MeasureWidget"],lang.hitch(this,function(_64f){this.measureWidget=new _64f();this.setContent(this.measureWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_64c.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.MEASURE.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_64c.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.MEASURE.TOGGLE,lang.hitch(this,this.toggle)));this.subscribes.push(_64c.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.MEASURE.HIDE,lang.hitch(this,this.hide)));},hide:function(){this.inherited(arguments);if(this.measureWidget){this.measureWidget.reset();}}});});},"esriviewer/map/geometry/GeometryServiceController":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","esri/tasks/GeometryService","esri/config","esri/tasks/AreasAndLengthsParameters","esri/tasks/LengthsParameters","esri/tasks/BufferParameters","esri/tasks/ProjectParameters","esri/geometry/webMercatorUtils","esri/SpatialReference"],function(_650,_651,lang,_652,_653,_654,_655,_656,_657,_658,_659){return _650([],{constructor:function(_65a){lang.mixin(this,_65a||{});this.init();},init:function(){this.loadViewerConfigurationData();if(this.geometryService==null){return;}else{this.initListeners();}var _65b=null;_651.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,function(ext){_65b=ext;});if(_65b&&_65b.spatialReference&&_65b.spatialReference!=null){this.mapSpatialReference=_65b.spatialReference;}this.createMapConfigGeometryService();},loadViewerConfigurationData:function(){var _65c=null;_651.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"geometryServiceUrl",function(_65d){_65c=_65d;});this.geometryServiceUrl=_65c;if(this.geometryServiceUrl!=null&&this.geometryServiceUrl!=""){this.geometryService=new _652(this.geometryServiceUrl);}else{_651.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"No Geometry Service in configuration. Service disabled");VIEWER_UTILS.log("No Geometry Service in configuration. Service disabled",VIEWER_GLOBALS.LOG_TYPE.WARNING);}},createMapConfigGeometryService:function(){if(this.geometryServiceUrl){if(_653&&_653.defaults){_653.defaults.geometryService=new _652(this.geometryServiceUrl);}}},initListeners:function(){_651.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_LAT_LON,lang.hitch(this,this.handleProjectGeometriesToLatLon));_651.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.MGRS_TO_LAT_LON,lang.hitch(this,this.handleMgrsToLatLon));_651.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_MAP_SR,lang.hitch(this,this.handleProjectGeometriesToMapSR));_651.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_AREA,lang.hitch(this,this.handleCalculateArea));_651.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_DISTANCE,lang.hitch(this,this.handleCalculateDistance));_651.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.EXISTS,lang.hitch(this,this.handleGeometryServiceExists));_651.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.BUFFER_POINT,lang.hitch(this,this.handleBufferPoint));_651.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.BUFFER,lang.hitch(this,this.handleBuffer));this.projectErrorDefaultCallback=lang.hitch(this,this.handleProjectionError);},handleCalculateArea:function(_65e,_65f,_660){if(_660!=null&&lang.isFunction(_660)){var _661=new _654();_661.areaUnit=_65f;_661.polygons=[_65e];this.geometryService.areasAndLengths(_661,_660,_660);}},handleCalculateDistance:function(_662,_663,_664){if(_664!=null&&lang.isFunction(_664)){var _665=new _655();_665.lengthUnit=_663;_665.polylines=[_662];_665.geodesic=true;this.geometryService.lengths(_665,_664,_664);}},handleMgrsToLatLon:function(_666,_667){PROJECTION_UTILS.USNGtoLL(_666,_667);},handleBuffer:function(_668,_669,_66a){this.geometryService.buffer(_668,_669,_66a);},handleBufferPoint:function(pt,_66b,_66c,_66d){if(pt==null||_66b==null||_66b.distance==null||_66b.units==null){return;}if(_66c==null||!lang.isFunction(_66c)||this.mapSpatialReference==null){return;}var _66e=new _656();if(!lang.isArray(pt)){_66e.geometries=[pt];}else{_66e.geometries=pt;}_66e.distances=[_66b.distance];_66e.unit=_66b.units;_66e.bufferSpatialReference=pt.spatialReference;_66e.outSpatialReference=this.mapSpatialReference;this.geometryService.buffer(_66e,_66c,_66d);},handleProjectGeometriesToLatLon:function(_66f,_670){if(_670==null||!lang.isFunction(_670)||_66f==null){return;}if(!lang.isArray(_66f)){_66f=[_66f];}if(_66f.length==0){_670([]);}var _671=false;var _672=[];if(_66f[0].spatialReference.wkid===PROJECTION_UTILS.WEB_MERCATOR_WKID||_66f[0].spatialReference.wkid===PROJECTION_UTILS.WGS_84_WKID){if(_66f[0].spatialReference.wkid===PROJECTION_UTILS.WGS_84_WKID){_670(_66f);}var _673=_658.webMercatorToGeographic;if(lang.isFunction(_673)){for(var i=0;i<_66f.length;i++){_672.push(_673(_66f[i]));}}}if(_672.length>0){_670(_672);}else{var _674=new _657();_674.geometries=_66f;_674.outSR=new _659({wkid:PROJECTION_UTILS.WGS_84_WKID});this.geometryService.project(_674,_670,_670);}},handleProjectGeometriesToMapSR:function(_675,_676,_677,_678){if(_675==null){if(_678&&lang.isFunction(_678)){_678("No geometries to project");}return;}if(_676==null||!lang.isFunction(_676)||this.mapSpatialReference==null){if(_678&&lang.isFunction(_678)){_678("Cannot process project");}return;}if(!lang.isArray(_675)){_675=[_675];}if(_675.length<0){_676([]);}var _679=PROJECTION_UTILS.geometryToMapSpatialReference(_675);if(_679!=null&&lang.isArray(_679)){_676(_679);}else{this._handleServerSideProject(_675,_676,_677,_678);}},_handleServerSideProject:function(_67a,_67b,_67c,_67d){if(_67c==null){_67c={};}var _67e=new _657();_67e.geometries=_67a;_67e.outSR=this.mapSpatialReference;if(_67c.transformation){_67e.transformation=_67c.transformation;}if(_67d==null||!lang.isFunction(_67d)){_67d=this.projectErrorDefaultCallback;}this.geometryService.project(_67e,_67b,_67d);},handleProjectionError:function(err){VIEWER_UTILS.log("Error Projecting data",VIEWER_GLOBALS.LOG_TYPE.ERROR);},handleGeometryServiceExists:function(_67f){if(_67f!=null&&lang.isFunction(_67f)){_67f(this.geometryService!=null);}}});});},"esriviewer/base/LocationServiceSupport":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","esri/tasks/locator"],function(_680,_681,lang,_682){return _680([],{constructor:function(){this.locatorLookup={};},_initListeners:function(){_681.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.SINGLE_LINE_ADDRESS_TO_LOCATION,lang.hitch(this,this._handleSingleAddressLineAddressToLocations));_681.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.REVERSE_GEOCODE,lang.hitch(this,this.handleReverseGeocode));_681.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.ADD_LOCATOR,lang.hitch(this,this.handleAddLocatorRequest));_681.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.REMOVE_LOCATOR,lang.hitch(this,this.handleRemoveLocatorRequest));_681.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.GET_LOCATORS,lang.hitch(this,this.handleGetLocators));},handleGetLocators:function(_683){if(_683!=null&&lang.isFunction(_683)){var _684=[];for(var key in this.locatorLookup){_684.push(this.locatorLookup[key]);}_683(_684);}},handleReverseGeocode:function(_685,_686,_687,_688){if(_687!=null&&lang.isFunction(_687)){var _689;var _68a=null;for(var key in this.locatorLookup){_689=this.locatorLookup[key];if(_689!=null&&_689.locator!=null&&lang.isFunction(_689.locator.locationToAddress)){_68a=_689.locator;break;}}if(_68a==null){if(_688!=null&&lang.isFunction(_688)){_688("Reverse Geocode Not Supported");return;}}if(_686==null){_686=VIEWER_GLOBALS.DEFAULT_REVERSE_GEOCODE_DISTANCE;}_68a.locationToAddress(_685,_686,_687,_688);}},_handleSingleAddressLineAddressToLocations:function(_68b,_68c,_68d){this.singleLineAddressToLocations(_68b,_68c,_68d);},handleRemoveLocatorRequest:function(_68e){if(this.locatorLookup[_68e]!=null){delete this.locatorLookup[_68e];_681.publish(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_REMOVED,_68e);}},handleAddLocatorRequest:function(_68f,_690,_691){this.addLocator(_68f,null,function(id){if(id!=null){if(_690!=null&&lang.isFunction(_690)){_690(id,_68f);}}else{if(_691!=null&&lang.isFunction(_691)){_691("Locator Exists");}}});},addLocator:function(_692,_693,_694){var id=_692.toLowerCase();if(this.locatorLookup[id]==null){var _695=new _682(_692);var _696={locator:_695,label:(_693!=null&&_693!="")?_693:REG_EXP_UTILS.getServiceNameFromUrl(_695.url)};var _697=null;_681.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,function(ext){_697=ext;});if(_697&&_697.spatialReference){_695.setOutSpatialReference(_697.spatialReference);}var _698=_694;var _699=this.locatorLookup;VIEWER_UTILS.getServiceDescription(_692,function(_69a){if(_69a!=null&&lang.isObject(_69a)){if(_69a.singleLineAddressField!=null&&lang.isObject(_69a.singleLineAddressField)&&_69a.singleLineAddressField.name!=null&&_69a.singleLineAddressField.name!=""){_695.serviceDescription=_69a;_699[id]=_696;_681.publish(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_ADDED,_696);if(_698!=null&&lang.isFunction(_698)){_698(id);}}else{_681.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Locator does not support single line address.");}}});}else{VIEWER_UTILS.log("Locator Already Exists: "+_692,VIEWER_GLOBALS.LOG_TYPE.ERROR);_681.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Locator already exists.");}},singleLineAddressToLocations:function(_69b,_69c,_69d){if(_69d!=null){var _69e={};_69e[_69d.serviceDescription.singleLineAddressField.name]=VIEWER_UTILS.trim(_69b);var _69f=lang.hitch(this,this._handleLocatorResponse,_69d.url.toLowerCase(),_69c);var _6a0=lang.hitch(this,this._handleLocatorError,_69d.url.toLowerCase(),_69c);_69d.addressToLocations(_69e,["*"],_69f,_6a0);}},_handleLocatorResponse:function(_6a1,_6a2,_6a3){_681.publish(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_REQUEST_COMPLETE,{addressCandidates:_6a3,locatorId:_6a1,requestId:_6a2});},_handleLocatorError:function(_6a4,_6a5,_6a6){_681.publish(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_REQUEST_ERROR,{error:_6a6,locatorId:_6a4,requestId:_6a5});VIEWER_UTILS.log("Could not perform locate",VIEWER_GLOBALS.LOG_TYPE.ERROR);_681.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Could not perform locate");}});});},"esriviewer/ui/zoomto/ZoomToWidgetWindow":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","../window/WindowWidget"],function(_6a7,_6a8,lang,_6a9){return _6a7([_6a9],{defaultPositioning:{x:10,y:240},windowWidth:"275px",windowHeaderText:"Zoom To",windowIconAltText:"Zoom To",windowIconClass:"commonIcons16 magnifyingGlass",positioningParamName:"zoomTo",initListeners:function(){this.inherited(arguments);this.subscribes.push(_6a8.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.ZOOM_TO.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_6a8.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.ZOOM_TO.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_6a8.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.ZOOM_TO.TOGGLE,lang.hitch(this,this.toggle)));this.firstShowListener=this.on("firstWindowShow",lang.hitch(this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/zoomto/ZoomToWidget"],lang.hitch(this,function(_6aa){this.zoomToWidget=new _6aa();this.setContent(this.zoomToWidget.domNode);}));}});});},"dijit/layout/_LayoutWidget":function(){define(["dojo/_base/lang","../_Widget","../_Container","../_Contained","../Viewport","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style"],function(lang,_6ab,_6ac,_6ad,_6ae,_6af,_6b0,_6b1,_6b2){return _6af("dijit.layout._LayoutWidget",[_6ab,_6ac,_6ad],{baseClass:"dijitLayoutContainer",isLayoutContainer:true,buildRendering:function(){this.inherited(arguments);_6b0.add(this.domNode,"dijitContainer");},startup:function(){if(this._started){return;}this.inherited(arguments);var _6b3=this.getParent&&this.getParent();if(!(_6b3&&_6b3.isLayoutContainer)){this.resize();this.own(_6ae.on("resize",lang.hitch(this,"resize")));}},resize:function(_6b4,_6b5){var node=this.domNode;if(_6b4){_6b1.setMarginBox(node,_6b4);}var mb=_6b5||{};lang.mixin(mb,_6b4||{});if(!("h" in mb)||!("w" in mb)){mb=lang.mixin(_6b1.getMarginBox(node),mb);}var cs=_6b2.getComputedStyle(node);var me=_6b1.getMarginExtents(node,cs);var be=_6b1.getBorderExtents(node,cs);var bb=(this._borderBox={w:mb.w-(me.w+be.w),h:mb.h-(me.h+be.h)});var pe=_6b1.getPadExtents(node,cs);this._contentBox={l:_6b2.toPixelValue(node,cs.paddingLeft),t:_6b2.toPixelValue(node,cs.paddingTop),w:bb.w-pe.w,h:bb.h-pe.h};this.layout();},layout:function(){},_setupChild:function(_6b6){var cls=this.baseClass+"-child "+(_6b6.baseClass?this.baseClass+"-"+_6b6.baseClass:"");_6b0.add(_6b6.domNode,cls);},addChild:function(_6b7,_6b8){this.inherited(arguments);if(this._started){this._setupChild(_6b7);}},removeChild:function(_6b9){var cls=this.baseClass+"-child"+(_6b9.baseClass?" "+this.baseClass+"-"+_6b9.baseClass:"");_6b0.remove(_6b9.domNode,cls);this.inherited(arguments);}});});},"dojox/uuid/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang"],function(dojo){dojo.getObject("uuid",true,dojox);dojox.uuid.NIL_UUID="00000000-0000-0000-0000-000000000000";dojox.uuid.version={UNKNOWN:0,TIME_BASED:1,DCE_SECURITY:2,NAME_BASED_MD5:3,RANDOM:4,NAME_BASED_SHA1:5};dojox.uuid.variant={NCS:"0",DCE:"10",MICROSOFT:"110",UNKNOWN:"111"};dojox.uuid.assert=function(_6ba,_6bb){if(!_6ba){if(!_6bb){_6bb="An assert statement failed.\n"+"The method dojox.uuid.assert() was called with a 'false' value.\n";}throw new Error(_6bb);}};dojox.uuid.generateNilUuid=function(){return dojox.uuid.NIL_UUID;};dojox.uuid.isValid=function(_6bc){_6bc=_6bc.toString();var _6bd=(dojo.isString(_6bc)&&(_6bc.length==36)&&(_6bc==_6bc.toLowerCase()));if(_6bd){var _6be=_6bc.split("-");_6bd=((_6be.length==5)&&(_6be[0].length==8)&&(_6be[1].length==4)&&(_6be[2].length==4)&&(_6be[3].length==4)&&(_6be[4].length==12));var _6bf=16;for(var i in _6be){var part=_6be[i];var _6c0=parseInt(part,_6bf);_6bd=_6bd&&isFinite(_6c0);}}return _6bd;};dojox.uuid.getVariant=function(_6c1){if(!dojox.uuid._ourVariantLookupTable){var _6c2=dojox.uuid.variant;var _6c3=[];_6c3[0]=_6c2.NCS;_6c3[1]=_6c2.NCS;_6c3[2]=_6c2.NCS;_6c3[3]=_6c2.NCS;_6c3[4]=_6c2.NCS;_6c3[5]=_6c2.NCS;_6c3[6]=_6c2.NCS;_6c3[7]=_6c2.NCS;_6c3[8]=_6c2.DCE;_6c3[9]=_6c2.DCE;_6c3[10]=_6c2.DCE;_6c3[11]=_6c2.DCE;_6c3[12]=_6c2.MICROSOFT;_6c3[13]=_6c2.MICROSOFT;_6c3[14]=_6c2.UNKNOWN;_6c3[15]=_6c2.UNKNOWN;dojox.uuid._ourVariantLookupTable=_6c3;}_6c1=_6c1.toString();var _6c4=_6c1.charAt(19);var _6c5=16;var _6c6=parseInt(_6c4,_6c5);dojox.uuid.assert((_6c6>=0)&&(_6c6<=16));return dojox.uuid._ourVariantLookupTable[_6c6];};dojox.uuid.getVersion=function(_6c7){var _6c8="dojox.uuid.getVersion() was not passed a DCE Variant UUID.";dojox.uuid.assert(dojox.uuid.getVariant(_6c7)==dojox.uuid.variant.DCE,_6c8);_6c7=_6c7.toString();var _6c9=_6c7.charAt(14);var _6ca=16;var _6cb=parseInt(_6c9,_6ca);return _6cb;};dojox.uuid.getNode=function(_6cc){var _6cd="dojox.uuid.getNode() was not passed a TIME_BASED UUID.";dojox.uuid.assert(dojox.uuid.getVersion(_6cc)==dojox.uuid.version.TIME_BASED,_6cd);_6cc=_6cc.toString();var _6ce=_6cc.split("-");var _6cf=_6ce[4];return _6cf;};dojox.uuid.getTimestamp=function(_6d0,_6d1){var _6d2="dojox.uuid.getTimestamp() was not passed a TIME_BASED UUID.";dojox.uuid.assert(dojox.uuid.getVersion(_6d0)==dojox.uuid.version.TIME_BASED,_6d2);_6d0=_6d0.toString();if(!_6d1){_6d1=null;}switch(_6d1){case "string":case String:return dojox.uuid.getTimestamp(_6d0,Date).toUTCString();break;case "hex":var _6d3=_6d0.split("-");var _6d4=_6d3[0];var _6d5=_6d3[1];var _6d6=_6d3[2];_6d6=_6d6.slice(1);var _6d7=_6d6+_6d5+_6d4;dojox.uuid.assert(_6d7.length==15);return _6d7;break;case null:case "date":case Date:var _6d8=3394248;var _6d9=16;var _6da=_6d0.split("-");var _6db=parseInt(_6da[0],_6d9);var _6dc=parseInt(_6da[1],_6d9);var _6dd=parseInt(_6da[2],_6d9);var _6de=_6dd&4095;_6de<<=16;_6de+=_6dc;_6de*=4294967296;_6de+=_6db;var _6df=_6de/10000;var _6e0=60*60;var _6e1=_6d8;var _6e2=_6e1*_6e0;var _6e3=_6e2*1000;var _6e4=_6df-_6e3;var _6e5=new Date(_6e4);return _6e5;break;default:dojox.uuid.assert(false,"dojox.uuid.getTimestamp was not passed a valid returnType: "+_6d1);break;}};return dojox.uuid;});},"esriviewer/ui/user/location/UserLocationWidget":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-class","dojo/_base/lang","dojo/on","dojo/topic","../../base/UIWidget","esri/geometry/Point","esri/SpatialReference"],function(_6e6,_6e7,_6e8,lang,on,_6e9,_6ea,_6eb,_6ec){return _6e6([_6ea],{defaultPositioning:{x:20,y:205},browserLocationWkid:4326,isPositionedByConfig:true,positioningParamName:"zoomToUserLocation",maximumAge:0,timeout:6000,enableHighAccuracy:true,postCreate:function(){this.inherited(arguments);_6e8.add(this.domNode,"userLocationCrosshairContainer fivePixelBorderRadius defaultTwoPixelBorder defaultBackground");var _6ed=_6e7.create("div",{className:"commonIcons32 locationCrosshair"});_6e7.place(_6ed,this.domNode);on(_6ed,"click",lang.hitch(this,this.handleZoomToCurrentLocation));this.handleProjectResponse=lang.hitch(this,this._handleProjectResponse);this.zoomToCurrentLocation=lang.hitch(this,this._zoomToCurrentLocation);this.zoomToCurrentLocationError=lang.hitch(this,this._zoomToCurrentLocationError);},handleZoomToCurrentLocation:function(){if(navigator&&navigator.geolocation){navigator.geolocation.getCurrentPosition(this.zoomToCurrentLocation,this.zoomToCurrentLocationError,{maximumAge:this.maximumAge,timeout:this.timeout,enableHighAccuracy:this.enableHighAccuracy});}},_zoomToCurrentLocation:function(_6ee){if(_6ee!=null&&lang.isObject(_6ee)&&_6ee.coords){var pt=new _6eb(_6ee.coords.longitude,_6ee.coords.latitude,new _6ec({wkid:this.browserLocationWkid}));_6e9.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_MAP_SR,pt,this.handleProjectResponse);}},_handleProjectResponse:function(_6ef){if(_6ef!=null&&lang.isArray(_6ef)&&_6ef.length>0){_6e9.publish(VIEWER_GLOBALS.EVENTS.MAP.FLASH.POINT,_6ef[0]);_6e9.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PAN_TO,_6ef[0],{deepest:true});}},_zoomToCurrentLocationError:function(){_6e9.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Could not zoom to current location");VIEWER_UTILS.log("Could not get users current location");}});});},"esriviewer/ui/geocode/ReverseGeocodeWindowWidget":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","../window/WindowWidget"],function(_6f0,_6f1,lang,_6f2){return _6f0([_6f2],{defaultPositioning:{x:600,y:150},windowWidth:"310px",windowHeaderText:"Find Address By Point",windowIconAltText:"Find Address By Point",positioningParamName:"reverseGeocode",windowIconClass:"commonIcons16 binoculars",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/geocode/ReverseGeocodeWidget"],lang.hitch(this,function(_6f3){this.reverseGeocodeWidget=new _6f3();this.setContent(this.reverseGeocodeWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_6f1.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REVERSE_GEOCODE.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_6f1.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REVERSE_GEOCODE.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_6f1.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REVERSE_GEOCODE.TOGGLE,lang.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.reverseGeocodeWidget){this.reverseGeocodeWidget.reset();}}});});},"esriviewer/ui/logging/LoggingWidget":function(){define(["dojo/_base/declare","dojo/text!./template/LoggingWidgetTemplate.html","dojo/topic","../base/UITemplatedWidget","dojo/_base/lang","../tooltip/ConfirmTooltip","./model/LoggingViewModel"],function(_6f4,_6f5,_6f6,_6f7,lang,_6f8,_6f9){return _6f4([_6f7],{templateString:_6f5,initListeners:function(){this.inherited(arguments);this.subscribes.push(_6f6.subscribe(VIEWER_GLOBALS.EVENTS.LOGGING.ADD,lang.hitch(this,this._addLogging)));this.subscribes.push(_6f6.subscribe(VIEWER_GLOBALS.EVENTS.LOGGING.CLEAR,lang.hitch(this,this._clearLogging)));},postCreate:function(){this.inherited(arguments);this.viewModel=new _6f9();ko.applyBindings(this.viewModel,this.domNode);},_addLogging:function(_6fa,type){if(type!=null&&type!=""){type=type.toLowerCase();}if(type===VIEWER_GLOBALS.LOG_TYPE.WARNING){this._createWarningMessage(_6fa);}else{if(type===VIEWER_GLOBALS.LOG_TYPE.ERROR){this._createErrorMessage(_6fa);}else{this._createInfoMessage(_6fa);}}},_createErrorMessage:function(_6fb){this._createMessage(_6fb,"commonIcons16 error","loggingErrorMessage",VIEWER_GLOBALS.LOG_TYPE.ERROR);},_createInfoMessage:function(_6fc){this._createMessage(_6fc,"commonIcons16 information","loggingInfoMessage",VIEWER_GLOBALS.LOG_TYPE.INFO);},_createWarningMessage:function(_6fd){this._createMessage(_6fd,"commonIcons16 warning","loggingWarningMessage",VIEWER_GLOBALS.LOG_TYPE.WARNING);},_createMessage:function(_6fe,_6ff,_700,type){this.viewModel.logEntries.push({message:_6fe,messageStyleClass:_700,iconClass:_6ff,time:VIEWER_UTILS.getTimeStamp(),type:type});},_clearLogging:function(){this.viewModel.logEntries.removeAll();},_createDeleteAllMessagesTooltip:function(){this.confirmClearLogTooltip=new _6f8({confirmCallback:lang.hitch(this,this._clearLogging),aroundNode:this.clearLogIcon,displayText:"Clear Log? "});},_showConfirmLogTooltip:function(){if(this.confirmClearLogTooltip==null){this._createDeleteAllMessagesTooltip();}if(this.confirmClearLogTooltip){this.confirmClearLogTooltip.show();}},hidePopups:function(){if(this.confirmClearLogTooltip){this.confirmClearLogTooltip.hide();}}});});},"dijit/layout/StackController":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/keys","dojo/_base/lang","dojo/on","dojo/topic","../focus","../registry","../_Widget","../_TemplatedMixin","../_Container","../form/ToggleButton","dojo/touch","dojo/i18n!../nls/common"],function(_701,_702,_703,_704,keys,lang,on,_705,_706,_707,_708,_709,_70a,_70b){var _70c=_702("dijit.layout._StackButton",_70b,{tabIndex:"-1",closeButton:false,_aria_attr:"aria-selected",buildRendering:function(evt){this.inherited(arguments);(this.focusNode||this.domNode).setAttribute("role","tab");}});var _70d=_702("dijit.layout.StackController",[_708,_709,_70a],{baseClass:"dijitStackController",templateString:"<span role='tablist' data-dojo-attach-event='onkeydown'></span>",containerId:"",buttonWidget:_70c,buttonWidgetCloseClass:"dijitStackCloseButton",pane2button:function(id){return _707.byId(this.id+"_"+id);},postCreate:function(){this.inherited(arguments);this.own(_705.subscribe(this.containerId+"-startup",lang.hitch(this,"onStartup")),_705.subscribe(this.containerId+"-addChild",lang.hitch(this,"onAddChild")),_705.subscribe(this.containerId+"-removeChild",lang.hitch(this,"onRemoveChild")),_705.subscribe(this.containerId+"-selectChild",lang.hitch(this,"onSelectChild")),_705.subscribe(this.containerId+"-containerKeyDown",lang.hitch(this,"onContainerKeyDown")));this.containerNode.dojoClick=true;this.own(on(this.containerNode,"click",lang.hitch(this,function(evt){var _70e=_707.getEnclosingWidget(evt.target);if(_70e!=this.containerNode&&!_70e.disabled&&_70e.page){for(var _70f=evt.target;_70f!==this.containerNode;_70f=_70f.parentNode){if(_703.contains(_70f,this.buttonWidgetCloseClass)){this.onCloseButtonClick(_70e.page);break;}else{if(_70f==_70e.domNode){this.onButtonClick(_70e.page);break;}}}}})));},onStartup:function(info){this.textDir=info.textDir;_701.forEach(info.children,this.onAddChild,this);if(info.selected){this.onSelectChild(info.selected);}var _710=_707.byId(this.containerId).containerNode,_711=lang.hitch(this,"pane2button"),_712={"title":"label","showtitle":"showLabel","iconclass":"iconClass","closable":"closeButton","tooltip":"title","disabled":"disabled","textdir":"textdir"},_713=function(attr,_714){return on(_710,"attrmodified-"+attr,function(evt){var _715=_711(evt.detail&&evt.detail.widget&&evt.detail.widget.id);if(_715){_715.set(_714,evt.detail.newValue);}});};for(var attr in _712){this.own(_713(attr,_712[attr]));}},destroy:function(_716){this.destroyDescendants(_716);this.inherited(arguments);},onAddChild:function(page,_717){var Cls=lang.isString(this.buttonWidget)?lang.getObject(this.buttonWidget):this.buttonWidget;var _718=new Cls({id:this.id+"_"+page.id,name:this.id+"_"+page.id,label:page.title,disabled:page.disabled,ownerDocument:this.ownerDocument,dir:page.dir,lang:page.lang,textDir:page.textDir||this.textDir,showLabel:page.showTitle,iconClass:page.iconClass,closeButton:page.closable,title:page.tooltip,page:page});this.addChild(_718,_717);page.controlButton=_718;if(!this._currentChild){this.onSelectChild(page);}var _719=page._wrapper.getAttribute("aria-labelledby")?page._wrapper.getAttribute("aria-labelledby")+" "+_718.id:_718.id;page._wrapper.removeAttribute("aria-label");page._wrapper.setAttribute("aria-labelledby",_719);},onRemoveChild:function(page){if(this._currentChild===page){this._currentChild=null;}var _71a=this.pane2button(page.id);if(_71a){this.removeChild(_71a);_71a.destroy();}delete page.controlButton;},onSelectChild:function(page){if(!page){return;}if(this._currentChild){var _71b=this.pane2button(this._currentChild.id);_71b.set("checked",false);_71b.focusNode.setAttribute("tabIndex","-1");}var _71c=this.pane2button(page.id);_71c.set("checked",true);this._currentChild=page;_71c.focusNode.setAttribute("tabIndex","0");var _71d=_707.byId(this.containerId);},onButtonClick:function(page){var _71e=this.pane2button(page.id);_706.focus(_71e.focusNode);if(this._currentChild&&this._currentChild.id===page.id){_71e.set("checked",true);}var _71f=_707.byId(this.containerId);_71f.selectChild(page);},onCloseButtonClick:function(page){var _720=_707.byId(this.containerId);_720.closeChild(page);if(this._currentChild){var b=this.pane2button(this._currentChild.id);if(b){_706.focus(b.focusNode||b.domNode);}}},adjacent:function(_721){if(!this.isLeftToRight()&&(!this.tabPosition||/top|bottom/.test(this.tabPosition))){_721=!_721;}var _722=this.getChildren();var idx=_701.indexOf(_722,this.pane2button(this._currentChild.id)),_723=_722[idx];var _724;do{idx=(idx+(_721?1:_722.length-1))%_722.length;_724=_722[idx];}while(_724.disabled&&_724!=_723);return _724;},onkeydown:function(e,_725){if(this.disabled||e.altKey){return;}var _726=null;if(e.ctrlKey||!e._djpage){switch(e.keyCode){case keys.LEFT_ARROW:case keys.UP_ARROW:if(!e._djpage){_726=false;}break;case keys.PAGE_UP:if(e.ctrlKey){_726=false;}break;case keys.RIGHT_ARROW:case keys.DOWN_ARROW:if(!e._djpage){_726=true;}break;case keys.PAGE_DOWN:if(e.ctrlKey){_726=true;}break;case keys.HOME:var _727=this.getChildren();for(var idx=0;idx<_727.length;idx++){var _728=_727[idx];if(!_728.disabled){this.onButtonClick(_728.page);break;}}e.stopPropagation();e.preventDefault();break;case keys.END:var _727=this.getChildren();for(var idx=_727.length-1;idx>=0;idx--){var _728=_727[idx];if(!_728.disabled){this.onButtonClick(_728.page);break;}}e.stopPropagation();e.preventDefault();break;case keys.DELETE:case "W".charCodeAt(0):if(this._currentChild.closable&&(e.keyCode==keys.DELETE||e.ctrlKey)){this.onCloseButtonClick(this._currentChild);}e.stopPropagation();e.preventDefault();break;case keys.TAB:if(e.ctrlKey){this.onButtonClick(this.adjacent(!e.shiftKey).page);e.stopPropagation();e.preventDefault();}break;}if(_726!==null){this.onButtonClick(this.adjacent(_726).page);e.stopPropagation();e.preventDefault();}}},onContainerKeyDown:function(info){info.e._djpage=info.page;this.onkeydown(info.e);}});_70d.StackButton=_70c;return _70d;});},"esriviewer/ui/header/model/HeaderLogoViewModel":function(){define(["dojo/_base/declare"],function(_729){return _729([],{constructor:function(){this.showHeaderIcon=ko.observable(true);this.headerIconUrl=ko.observable();this.headerMainText=ko.observable("Esri Map Viewer");this.helpUrl=ko.observable("http://www.esri.com");this.contactUrl=ko.observable("http://www.esri.com/about-esri/contact");this.contactText=ko.observable("Contact Esri");this.helpText=ko.observable("Help");}});});},"esriviewer/ui/basemap/BasemapGalleryWidget":function(){define(["dojo/_base/declare","dojo/text!./template/BasemapGalleryTemplate.html","dojo/_base/lang","dojo/_base/connect","dojo/topic","../base/UITemplatedWidget","./model/BasemapGalleryViewModel","esri/dijit/BasemapGallery","esri/arcgis/utils"],function(_72a,_72b,lang,con,_72c,_72d,_72e,_72f,_730){return _72a([_72d],{configuredPortalBasemapsGroupId:null,animateOnPlace:false,usePortalBasemaps:false,animate:true,_defaultArcGISBasemapTitle:null,templateString:_72b,constructor:function(){this.animation=VIEWER_GLOBALS.ANIMATIONS.FADE.IN;},initListeners:function(){_72c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.TOGGLE,lang.hitch(this,this.handleToggleBasemapGallery));_72c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.SHOW,lang.hitch(this,this.handleShowBasemapGallery));_72c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.HIDE,lang.hitch(this,this.handleHideBasemapGallery));_72c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.IS_HIDDEN,lang.hitch(this,this.handleBasemapGalleryIsHidden));_72c.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.GET,lang.hitch(this,this.handleGetBasemapGallery));},handleGetBasemapGallery:function(_731){if(_731!=null&&lang.isFunction(_731)){_731(this.basemapGallery);}},loadViewerConfigurationData:function(){var _732;_72c.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_733){_732=_733;});if(_732){if(_732.useConfiguredPortalBasemaps!=null){this.usePortalBasemaps=_732.useConfiguredPortalBasemaps;}if(_732.basemapGalleryDefault!=null){this._defaultArcGISBasemapTitle=_732.basemapGalleryDefault;}if(_732.configuredPortalBasemapsGroupId!=null){this.configuredPortalBasemapsGroupId=_732.configuredPortalBasemapsGroupId;}}var _734=null;_72c.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"animationsEnabled",function(_735){_734=_735;});if(_734!=null){this.animate=_734;}},handleBasemapGalleryIsHidden:function(_736){if(_736!=null&&lang.isFunction(_736)){_736(!this.viewModel.visible());}},handleHideBasemapGallery:function(){if(this.viewModel.visible()){this.viewModel.visible(false);if(this.animate){this._removeAnimationClasses();}}},handleShowBasemapGallery:function(){if(!this.viewModel.visible()){this.viewModel.visible(true);if(this.animate){this._animateWidget();}}},handleToggleBasemapGallery:function(){if(!this.viewModel.visible()){this.handleShowBasemapGallery();}else{this.handleHideBasemapGallery();}},postCreate:function(){this.inherited(arguments);this.viewModel=new _72e();ko.applyBindings(this.viewModel,this.domNode);_72c.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.BASEMAP_GALLERY,this);var map;_72c.publish(VIEWER_GLOBALS.EVENTS.MAP.GET,function(_737){map=_737;});var _738={map:map,showArcGISBasemaps:true};var _739;_72c.publish(VIEWER_GLOBALS.EVENTS.PORTAL.GET_INSTANCE,function(_73a){_739=_73a;});if(this.usePortalBasemaps&&_739){var _73b;_72c.publish(VIEWER_GLOBALS.EVENTS.PORTAL.GET_BASEMAPS,lang.hitch(this,function(_73c){_73b=_73c;if(_73b&&_73b.length>0){_738.showArcGISBasemaps=false;_738.basemaps=_73b;}this._initGallery(_738);}),this.configuredPortalBasemapsGroupId);}else{this._initGallery(_738);}},_initGallery:function(_73d){this.basemapGallery=new _72f(_73d,this.basemapGalleryContents);this.basemapGallery.on("load",lang.hitch(this,this.handleBasemapGalleryLoaded));con.connect(this.basemapGallery,"onSelectionChange",lang.hitch(this,this.handleBasemapSelectionChanged));this.basemapGallery.startup();},handleBasemapSelectionChanged:function(evt){this.handleHideBasemapGallery();_72c.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.CHANGED);},_setArcGISBasemapByTitle:function(){if(this._defaultArcGISBasemapTitle){var _73e=this._getBasemapIdByTitle(this._defaultArcGISBasemapTitle);if(_73e!=null){this.basemapGallery.select(_73e);}}},handleBasemapGalleryLoaded:function(){if(this._defaultArcGISBasemapTitle!=null){this._setArcGISBasemapByTitle();}},_getBasemapIdByTitle:function(_73f){if(this.basemapGallery&&this.basemapGallery.basemaps){var _740;for(var i=0;i<this.basemapGallery.basemaps.length;i++){_740=this.basemapGallery.basemaps[i];if(_740!=null&&_740.title!=null){if(_740.title==_73f){return _740.id;}}}}return null;}});});},"dojo/dnd/move":function(){define(["../_base/declare","../dom-geometry","../dom-style","./common","./Mover","./Moveable"],function(_741,_742,_743,dnd,_744,_745){var _746=_741("dojo.dnd.move.constrainedMoveable",_745,{constraints:function(){},within:false,constructor:function(node,_747){if(!_747){_747={};}this.constraints=_747.constraints;this.within=_747.within;},onFirstMove:function(_748){var c=this.constraintBox=this.constraints.call(this,_748);c.r=c.l+c.w;c.b=c.t+c.h;if(this.within){var mb=_742.getMarginSize(_748.node);c.r-=mb.w;c.b-=mb.h;}},onMove:function(_749,_74a){var c=this.constraintBox,s=_749.node.style;this.onMoving(_749,_74a);_74a.l=_74a.l<c.l?c.l:c.r<_74a.l?c.r:_74a.l;_74a.t=_74a.t<c.t?c.t:c.b<_74a.t?c.b:_74a.t;s.left=_74a.l+"px";s.top=_74a.t+"px";this.onMoved(_749,_74a);}});var _74b=_741("dojo.dnd.move.boxConstrainedMoveable",_746,{box:{},constructor:function(node,_74c){var box=_74c&&_74c.box;this.constraints=function(){return box;};}});var _74d=_741("dojo.dnd.move.parentConstrainedMoveable",_746,{area:"content",constructor:function(node,_74e){var area=_74e&&_74e.area;this.constraints=function(){var n=this.node.parentNode,s=_743.getComputedStyle(n),mb=_742.getMarginBox(n,s);if(area=="margin"){return mb;}var t=_742.getMarginExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="border"){return mb;}t=_742.getBorderExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="padding"){return mb;}t=_742.getPadExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;return mb;};}});return {constrainedMoveable:_746,boxConstrainedMoveable:_74b,parentConstrainedMoveable:_74d};});},"esriviewer/portal/PortalSupport":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/connect","dojo/_base/lang","esri/arcgis/Portal","../base/ConfigurationEntryMixin","./PortalSearcher","../base/DataLoaderSupport","esri/dijit/Basemap","esri/dijit/BasemapLayer"],function(_74f,_750,con,lang,_751,_752,_753,_754,_755,_756){return _74f([_752,_754],{constructor:function(){this.portalConfiguration=null;this.loadViewerConfigurationData();if(this.portalConfiguration!=null&&lang.isObject(this.portalConfiguration)&&this.portalConfiguration.url!=null&&this.portalConfiguration.url!=""){this.initPortal();}else{VIEWER_UTILS.log("Portal Configuration not found",VIEWER_GLOBALS.LOG_TYPE.ERROR);_750.publish(VIEWER_GLOBALS.EVENTS.PORTAL.INITIALIZED);}},initPortal:function(){this.portal=new _751.Portal(this.portalConfiguration.url);con.connect(this.portal,"onLoad",lang.hitch(this,this._handlePortalLoaded));},_handlePortalLoaded:function(_757){this._createPortalSearcher();this.initListeners();_750.publish(VIEWER_GLOBALS.EVENTS.PORTAL.INITIALIZED);},initListeners:function(){_750.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.GET_INSTANCE,lang.hitch(this,this.handleGetPortalInstance));_750.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.LOG_IN,lang.hitch(this,this.handlePortalLogIn));_750.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.LOG_OUT,lang.hitch(this,this.handlePortalLogOut));_750.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.IS_USER_LOGGED_IN,lang.hitch(this,this.handleIsUserLoggedIn));_750.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.GET_BASEMAPS,lang.hitch(this,this.getBasemaps));},getBasemaps:function(_758,_759){if(_758!=null&&lang.isFunction(_758)){var self=this;var _75a=[];if(this.portal){var _75b;if(_759!=null){_75b="group:"+_759;}else{if(this.portal.basemapGalleryGroupQuery){_75b=this.portal.basemapGalleryGroupQuery.replace("id:","group:");}else{return;}}_750.publish(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_WEBMAPS,_75b,null,null,null,function(_75c){if(_75c&&_75c.results){var _75d;var _75e={f:"json"};for(var i=0;i<_75c.results.length;i++){_75d=_75c.results[i];self.loadJsonP(_75d.itemDataUrl,_75e,lang.partial(function(item,_75f){var _760=[];for(var j=0;j<_75f.baseMap.baseMapLayers.length;j++){var _761=new _756({url:_75f.baseMap.baseMapLayers[j].url});_760.push(_761);}var _762=new _755({thumbnailUrl:item.thumbnailUrl,title:item.title,layers:_760});_75a.push(_762);if(_75a.length==_75c.results.length){_758(_75a);}},_75d));}}});}}},handleIsUserLoggedIn:function(_763){if(_763!=null&&lang.isFunction(_763)){_763(this.portal&&this.portal.getPortalUser()!=null);}},handlePortalLogOut:function(){this.portal.signOut();_750.publish(VIEWER_GLOBALS.EVENTS.PORTAL.USER_LOGGED_OUT);},handlePortalLogIn:function(_764){this.portal.signIn().then(lang.hitch(this,function(user){_750.publish(VIEWER_GLOBALS.EVENTS.PORTAL.USER_LOGGED_IN,user);if(_764!=null&&lang.isFunction(_764)){_764(user);}}));},loadViewerConfigurationData:function(){var _765;_750.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"portal",function(_766){_765=_766;});this.portalConfiguration=_765;},handleGetPortalInstance:function(_767){if(_767!=null&&lang.isFunction(_767)){_767(this.portal);}},_createPortalSearcher:function(){this.portalSearcher=new _753();}});});},"dojox/sql/_crypto":function(){define(["dijit","dojo","dojox"],function(_768,dojo,_769){dojo.provide("dojox.sql._crypto");dojo.mixin(_769.sql._crypto,{_POOL_SIZE:100,encrypt:function(_76a,_76b,_76c){this._initWorkerPool();var msg={plaintext:_76a,password:_76b};msg=dojo.toJson(msg);msg="encr:"+String(msg);this._assignWork(msg,_76c);},decrypt:function(_76d,_76e,_76f){this._initWorkerPool();var msg={ciphertext:_76d,password:_76e};msg=dojo.toJson(msg);msg="decr:"+String(msg);this._assignWork(msg,_76f);},_initWorkerPool:function(){if(!this._manager){try{this._manager=google.gears.factory.create("beta.workerpool","1.0");this._unemployed=[];this._employed={};this._handleMessage=[];var self=this;this._manager.onmessage=function(msg,_770){var _771=self._employed["_"+_770];self._employed["_"+_770]=undefined;self._unemployed.push("_"+_770);if(self._handleMessage.length){var _772=self._handleMessage.shift();self._assignWork(_772.msg,_772.callback);}_771(msg);};var _773="function _workerInit(){"+"gearsWorkerPool.onmessage = "+String(this._workerHandler)+";"+"}";var code=_773+" _workerInit();";for(var i=0;i<this._POOL_SIZE;i++){this._unemployed.push("_"+this._manager.createWorker(code));}}catch(exp){throw exp.message||exp;}}},_assignWork:function(msg,_774){if(!this._handleMessage.length&&this._unemployed.length){var _775=this._unemployed.shift().substring(1);this._employed["_"+_775]=_774;this._manager.sendMessage(msg,parseInt(_775,10));}else{this._handleMessage={msg:msg,callback:_774};}},_workerHandler:function(msg,_776){var Sbox=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22];var Rcon=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]];function _777(_778,w){var Nb=4;var Nr=w.length/Nb-1;var _779=[[],[],[],[]];for(var i=0;i<4*Nb;i++){_779[i%4][Math.floor(i/4)]=_778[i];}_779=_77a(_779,w,0,Nb);for(var _77b=1;_77b<Nr;_77b++){_779=_77c(_779,Nb);_779=_77d(_779,Nb);_779=_77e(_779,Nb);_779=_77a(_779,w,_77b,Nb);}_779=_77c(_779,Nb);_779=_77d(_779,Nb);_779=_77a(_779,w,Nr,Nb);var _77f=new Array(4*Nb);for(var i=0;i<4*Nb;i++){_77f[i]=_779[i%4][Math.floor(i/4)];}return _77f;};function _77c(s,Nb){for(var r=0;r<4;r++){for(var c=0;c<Nb;c++){s[r][c]=Sbox[s[r][c]];}}return s;};function _77d(s,Nb){var t=new Array(4);for(var r=1;r<4;r++){for(var c=0;c<4;c++){t[c]=s[r][(c+r)%Nb];}for(var c=0;c<4;c++){s[r][c]=t[c];}}return s;};function _77e(s,Nb){for(var c=0;c<4;c++){var a=new Array(4);var b=new Array(4);for(var i=0;i<4;i++){a[i]=s[i][c];b[i]=s[i][c]&128?s[i][c]<<1^283:s[i][c]<<1;}s[0][c]=b[0]^a[1]^b[1]^a[2]^a[3];s[1][c]=a[0]^b[1]^a[2]^b[2]^a[3];s[2][c]=a[0]^a[1]^b[2]^a[3]^b[3];s[3][c]=a[0]^b[0]^a[1]^a[2]^b[3];}return s;};function _77a(_780,w,rnd,Nb){for(var r=0;r<4;r++){for(var c=0;c<Nb;c++){_780[r][c]^=w[rnd*4+c][r];}}return _780;};function _781(key){var Nb=4;var Nk=key.length/4;var Nr=Nk+6;var w=new Array(Nb*(Nr+1));var temp=new Array(4);for(var i=0;i<Nk;i++){var r=[key[4*i],key[4*i+1],key[4*i+2],key[4*i+3]];w[i]=r;}for(var i=Nk;i<(Nb*(Nr+1));i++){w[i]=new Array(4);for(var t=0;t<4;t++){temp[t]=w[i-1][t];}if(i%Nk==0){temp=_782(_783(temp));for(var t=0;t<4;t++){temp[t]^=Rcon[i/Nk][t];}}else{if(Nk>6&&i%Nk==4){temp=_782(temp);}}for(var t=0;t<4;t++){w[i][t]=w[i-Nk][t]^temp[t];}}return w;};function _782(w){for(var i=0;i<4;i++){w[i]=Sbox[w[i]];}return w;};function _783(w){w[4]=w[0];for(var i=0;i<4;i++){w[i]=w[i+1];}return w;};function _784(_785,_786,_787){if(!(_787==128||_787==192||_787==256)){return "";}var _788=_787/8;var _789=new Array(_788);for(var i=0;i<_788;i++){_789[i]=_786.charCodeAt(i)&255;}var key=_777(_789,_781(_789));key=key.concat(key.slice(0,_788-16));var _78a=16;var _78b=new Array(_78a);var _78c=(new Date()).getTime();for(var i=0;i<4;i++){_78b[i]=(_78c>>>i*8)&255;}for(var i=0;i<4;i++){_78b[i+4]=(_78c/4294967296>>>i*8)&255;}var _78d=_781(key);var _78e=Math.ceil(_785.length/_78a);var _78f=new Array(_78e);for(var b=0;b<_78e;b++){for(var c=0;c<4;c++){_78b[15-c]=(b>>>c*8)&255;}for(var c=0;c<4;c++){_78b[15-c-4]=(b/4294967296>>>c*8);}var _790=_777(_78b,_78d);var _791=b<_78e-1?_78a:(_785.length-1)%_78a+1;var ct="";for(var i=0;i<_791;i++){var _792=_785.charCodeAt(b*_78a+i);var _793=_792^_790[i];ct+=String.fromCharCode(_793);}_78f[b]=_794(ct);}var _795="";for(var i=0;i<8;i++){_795+=String.fromCharCode(_78b[i]);}_795=_794(_795);return _795+"-"+_78f.join("-");};function _796(_797,_798,_799){if(!(_799==128||_799==192||_799==256)){return "";}var _79a=_799/8;var _79b=new Array(_79a);for(var i=0;i<_79a;i++){_79b[i]=_798.charCodeAt(i)&255;}var _79c=_781(_79b);var key=_777(_79b,_79c);key=key.concat(key.slice(0,_79a-16));var _79d=_781(key);_797=_797.split("-");var _79e=16;var _79f=new Array(_79e);var _7a0=_7a1(_797[0]);for(var i=0;i<8;i++){_79f[i]=_7a0.charCodeAt(i);}var _7a2=new Array(_797.length-1);for(var b=1;b<_797.length;b++){for(var c=0;c<4;c++){_79f[15-c]=((b-1)>>>c*8)&255;}for(var c=0;c<4;c++){_79f[15-c-4]=((b/4294967296-1)>>>c*8)&255;}var _7a3=_777(_79f,_79d);_797[b]=_7a1(_797[b]);var pt="";for(var i=0;i<_797[b].length;i++){var _7a4=_797[b].charCodeAt(i);var _7a5=_7a4^_7a3[i];pt+=String.fromCharCode(_7a5);}_7a2[b-1]=pt;}return _7a2.join("");};function _794(str){return str.replace(/[\0\t\n\v\f\r\xa0!-]/g,function(c){return "!"+c.charCodeAt(0)+"!";});};function _7a1(str){return str.replace(/!\d\d?\d?!/g,function(c){return String.fromCharCode(c.slice(1,-1));});};function _7a6(_7a7,_7a8){return _784(_7a7,_7a8,256);};function _7a9(_7aa,_7ab){return _796(_7aa,_7ab,256);};var cmd=msg.substr(0,4);var arg=msg.substr(5);if(cmd=="encr"){arg=eval("("+arg+")");var _7ac=arg.plaintext;var _7ad=arg.password;var _7ae=_7a6(_7ac,_7ad);gearsWorkerPool.sendMessage(String(_7ae),_776);}else{if(cmd=="decr"){arg=eval("("+arg+")");var _7af=arg.ciphertext;var _7ad=arg.password;var _7ae=_7a9(_7af,_7ad);gearsWorkerPool.sendMessage(String(_7ae),_776);}}}});});},"esriviewer/ui/layers/base/model/UserPersistedLayersListViewModel":function(){define(["dojo/_base/declare","dojo/Evented","dojo/has"],function(_7b0,_7b1,has){return _7b0([_7b1],{persistedInfoIconDefaultClasses:"commonIcons16 information",CLEAR_USER_PERSISTED_LAYERS:"clearUserPersistedLayers",REMOVE_USER_PERSISTED_LAYER:"removeUserPersistedLayer",ADD_USER_PERSISTED_LAYER_TO_MAP:"addUserPersistedLayerToMap",constructor:function(){this.persistedLayerInfoIconClass=ko.observable();if((has("ie")<8)){this.persistedLayerInfoIconClass(this.persistedInfoIconDefaultClasses+" userPersistedLayersInfoIconIEHack");}else{this.persistedLayerInfoIconClass(this.persistedInfoIconDefaultClasses+" userPersistedLayersInfoIcon");}var self=this;this.addedUserPersistedLayers=ko.observableArray();this.removeUserPersistedLayer=function(_7b2){if(_7b2==null){return;}self.emit(self.REMOVE_USER_PERSISTED_LAYER,_7b2);self.addedUserPersistedLayers.remove(_7b2);};this.addPersistedLayerToMap=function(_7b3){if(_7b3==null){return;}self.emit(self.ADD_USER_PERSISTED_LAYER_TO_MAP,_7b3);};this.hasEntries=ko.computed(function(){return self.addedUserPersistedLayers().length>0;});},sort:function(){this.addedUserPersistedLayers.sort(function(left,_7b4){var _7b5=left.name.toLowerCase();var _7b6=_7b4.name.toLowerCase();return _7b5==_7b6?0:(_7b5<_7b6?-1:1);});},clearEntries:function(){this.addedUserPersistedLayers.removeAll();this.emit(this.CLEAR_USER_PERSISTED_LAYERS);}});});},"esriviewer/manager/base/ViewerManagerUI":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","./../../ui/user/location/UserLocationWidget","../../ui/footer/FooterTogglerWidget","../../ui/header/HeaderLogo","../../ui/messaging/MessagingWidget","../../ui/navigation/NavigationWidget","../../ui/throbber/ThrobberWidget","dojo/Evented"],function(_7b7,lang,_7b8,_7b9,_7ba,_7bb,_7bc,_7bd,_7be,_7bf){return _7b7([_7bf],{FINALIZE_UI_LOAD_COMPLETE:"finalizeUILoadComplete",loadUI:function(){var _7c0=true;if(lang.isObject(this.viewerConfig.header)){if(this.viewerConfig.header.display!=null){_7c0=!(String(this.viewerConfig.header.display).toLowerCase()=="false");}}if(_7c0){this._createHeaderLogo();}this._createIdentifyWidget();this._createMeasureWidget();this._createQueryBuilderWidget();this._createReverseGeocodeWidget();this.createFooterWidget();this._createConfigureViewerWidget();this._createDrawWidget();this._createLegendWidget();this._createReflectivityWidget();this._createViewerMainToolbar();this.createViewerDefaultTools();this._createNavigationToolbar();this._createWeatherWidget();this._createTimeSliderWidget();if(VIEWER_UTILS.isHtml5FileUploadSupported()){this._createPointUploadWidget();}else{VIEWER_UTILS.log("Point upload widget disabled. HTML 5 not supported",VIEWER_GLOBALS.LOG_TYPE.WARNING);}this._createFeatureEditorWidget();this._createSocialMediaWidget();this._createPrintWidget();this._createZoomToWidget();this._createZoomToUserLocationWidget();this._createLayersTransparencyWidget();this._createViewerAccordion();this._createPortalPublisherWidget();this._createPlottingWidget();this.finalizeUILoad();},finalizeUILoad:function(){if(this.viewerAccordion!=null){this.viewerAccordion.startup();var _7c1=true;}if(this.bookmarkController!=null){this._loadBookmarks();}this.createThrobberWidget();this.emit(this.FINALIZE_UI_LOAD_COMPLETE);},_createHeaderLogo:function(){this.headerLogo=new _7bb();_7b8.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.HEADER,this.headerLogo);},_createIdentifyWidget:function(){if(this.viewerConfig.identifyWidget!=null&&lang.isObject(this.viewerConfig.identifyWidget)&&this.viewerConfig.identifyWidget.create!=null&&this.viewerConfig.identifyWidget.create==true){this.createIdentifyWidget();}},createIdentifyWidget:function(){},_createMeasureWidget:function(){if(this.viewerConfig.geometryServiceUrl!=null&&this.viewerConfig.geometryServiceUrl){if(this.viewerConfig.measureWidget==null||(lang.isObject(this.viewerConfig.measureWidget)&&this.viewerConfig.measureWidget.create!=false)){this.createMeasureWidget();}}},createMeasureWidget:function(){},_createPrintWidget:function(){if(this.viewerConfig.printWidget==null||(lang.isObject(this.viewerConfig.printWidget)&&this.viewerConfig.printWidget.create!=null&&this.viewerConfig.printWidget.create&&this.viewerConfig.printWidget.printTaskUrl!=null)){this.createPrintWidget();}},createPrintWidget:function(){},_createSocialMediaWidget:function(){if(this.viewerConfig.socialMediaWidget==null||(lang.isObject(this.viewerConfig.socialMediaWidget)&&this.viewerConfig.socialMediaWidget.create!=null&&this.viewerConfig.socialMediaWidget.create)){this.createSocialMediaWidget();}},createSocialMediaWidget:function(){},_createFeatureEditorWidget:function(){if(this.viewerConfig.featureEditorWidget!=null&&this.viewerConfig.featureEditorWidget.service!=null&&this.viewerConfig.featureEditorWidget.service.url!=""){this.createFeatureEditorWidget();}},createFeatureEditorWidget:function(){},_createZoomToUserLocationWidget:function(){if(navigator&&navigator.geolocation&&this.viewerConfig.zoomToUserLocationWidget!=null&&lang.isObject(this.viewerConfig.zoomToUserLocationWidget)&&this.viewerConfig.zoomToUserLocationWidget.create===true){this.createZoomToUserLocationWidget();}},createZoomToUserLocationWidget:function(){this.userLocationWidget=new _7b9();_7b8.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.USER_LOCATION,this.userLocationWidget);},_createZoomToWidget:function(){if(this.viewerConfig.zoomToWidget==null||(lang.isObject(this.viewerConfig.zoomToWidget)&&this.viewerConfig.zoomToWidget.create!=null&&this.viewerConfig.zoomToWidget.create)){this.createZoomToWidget();}},createZoomToWidget:function(){},_createPointUploadWidget:function(){if(this.viewerConfig.pointUploadWidget!=null&&this.viewerConfig.pointUploadWidget.create==true){this.createPointUploadWidget();}},createPointUploadWidget:function(){},_createTimeSliderWidget:function(){if(!this.forceHideCoreTimeSlider&&(this.viewerConfig.timeSliderWidget!=null&&this.viewerConfig.timeSliderWidget.create!=false)){this.createTimeSliderWidget();}},createTimeSliderWidget:function(){},_createLayersTransparencyWidget:function(){if(this.viewerConfig.layersTransparencyWidget==null||(lang.isObject(this.viewerConfig.layersTransparencyWidget)&&this.viewerConfig.layersTransparencyWidget.create!=null&&this.viewerConfig.layersTransparencyWidget.create)){this.createLayersTransparencyWidget();}},createLayersTransparencyWidget:function(){},_createConfigureViewerWidget:function(){if(this.viewerConfig.configureWidget==null||this.viewerConfig.configureWidget.create==null||this.viewerConfig.configureWidget.create==true){this.createConfigureViewerWidget();}},createConfigureViewerWidget:function(){},_createReverseGeocodeWidget:function(){if(this.viewerConfig.reverseGeocodeWidget==null||this.viewerConfig.reverseGeocodeWidget.create==null||this.viewerConfig.reverseGeocodeWidget.create==true){if(this.viewerConfig.locators!=null&&lang.isArray(this.viewerConfig.locators)&&this.viewerConfig.locators.length>0){this.createReverseGeocodeWidget();}}},createReverseGeocodeWidget:function(){},_createQueryBuilderWidget:function(){if(this.viewerConfig.queryBuilder&&this.viewerConfig.queryBuilder.create!=null&&this.viewerConfig.queryBuilder.create){this.createQueryBuilderWidget();}},createQueryBuilderWidget:function(){},_createWeatherWidget:function(){if(lang.isObject(this.viewerConfig.weatherWidget)&&this.viewerConfig.weatherWidget.create!=null&&this.viewerConfig.weatherWidget.create==true){this.createWeatherWidget();}},createWeatherWidget:function(){},_createPlottingWidget:function(){if(lang.isObject(this.viewerConfig.plottingWidget)&&this.viewerConfig.plottingWidget.create!=null&&this.viewerConfig.plottingWidget.create==true){this.createPlottingWidget();}},createPlottingWidget:function(){},_createPortalPublisherWidget:function(){if(this.viewerConfig.portal!=null&&lang.isObject(this.viewerConfig.portal)&&this.viewerConfig.portal.url){if(this.viewerConfig.portalPublisher&&this.viewerConfig.portalPublisher.window&&this.viewerConfig.portalPublisher.window.create){this.createPortalPublisherWidget();}}},createPortalPublisherWidget:function(){},createFooterWidget:function(){var _7c2=false;if(lang.isObject(this.viewerConfig.footerTogglerWidget)){if(this.viewerConfig.footerTogglerWidget.create!=null){_7c2=!(String(this.viewerConfig.footerTogglerWidget.create).toLowerCase()=="false");}}if(_7c2){this.footerTogglerWidget=new _7ba();this.footerTogglerWidget.on("firstFooterShow",lang.hitch(this,this.handleFirstFooterShow));_7b8.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.FOOTER,this.footerTogglerWidget);}},handleFirstFooterShow:function(){},_createLoggingWidget:function(){if(this.viewerConfig.logging&&this.viewerConfig.logging.window&&this.viewerConfig.logging.window.create){this.createLoggingWidget();}},createLoggingWidget:function(){},_createMessagingWidget:function(){this.messagingWidget=new _7bc();_7b8.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MESSAGING,this.messagingWidget);},createThrobberWidget:function(){this.loadingThrobber=new _7be();_7b8.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.THROBBER,this.loadingThrobber);},_createReflectivityWidget:function(){if(this.viewerConfig.reflectivityWidget!=null&&lang.isObject(this.viewerConfig.reflectivityWidget)&&this.viewerConfig.reflectivityWidget.create==true){this.createReflectivityWidget();}},createReflectivityWidget:function(){},_createLegendWidget:function(){if(this.viewerConfig.map.legend==null||this.viewerConfig.map.legend.create==true){this.createLegendWidget();}},createLegendWidget:function(){},_createNavigationToolbar:function(){this.createNavigationToolbar();if(this.navigationToolbar){_7b8.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.NAVIGATION_TOOLBAR,this.navigationToolbar);}this.processNavigationToolbarAddons();},createNavigationToolbar:function(){this.navigationToolbar=new _7bd();},_createDrawWidget:function(){if(this.viewerConfig.drawWidget==null||!lang.isObject(this.viewerConfig.drawWidget)||this.viewerConfig.drawWidget.create==null||this.viewerConfig.drawWidget.create!=false){this.createDrawWidget();}},createDrawWidget:function(){}});});},"esriviewer/ui/measure/model/MeasureWidgetViewModel":function(){define(["dojo/_base/declare","esri/tasks/GeometryService"],function(_7c3,_7c4){return _7c3([],{constructor:function(){this.areaMeasurementUnits=ko.observableArray([{label:"Acres",value:_7c4.UNIT_ACRES},{label:"Sq Miles",value:_7c4.UNIT_SQUARE_MILES},{label:"Sq Kilometers",value:_7c4.UNIT_SQUARE_KILOMETERS},{label:"Hectares",value:_7c4.UNIT_HECTARES},{label:"Sq Yards",value:_7c4.UNIT_SQUARE_YARDS},{label:"Sq Feet",value:_7c4.UNIT_SQUARE_FEET},{label:"Sq Meters",value:_7c4.UNIT_SQUARE_METERS}]);this.distanceMeasurementUnits=ko.observableArray([{label:"Miles",value:_7c4.UNIT_STATUTE_MILE},{label:"Kilometers",value:_7c4.UNIT_KILOMETER},{label:"Feet",value:_7c4.UNIT_FOOT},{label:"Meters",value:_7c4.UNIT_METER}]);this.locationUnits=ko.observableArray([{label:"Degrees",value:VIEWER_GLOBALS.ESRI_UNITS.DECIMAL_DEGREES},{label:"DMS",value:VIEWER_GLOBALS.ESRI_UNITS.DEGREE_MINUTE_SECONDS}]);this.measureMethodText=ko.observable("");this.unitsText=ko.observable("");this.resultsText=ko.observable("");this.selectedAreaUnits=ko.observable("");this.selectedDistanceUnits=ko.observable("");this.selectedLocationUnits=ko.observable("");this.areaActive=ko.observable(false);this.distanceActive=ko.observable(false);this.locationActive=ko.observable(false);this.measurementResult=ko.observable("");},handleAreaButtonClick:function(){var _7c5=this.areaActive();this.areaActive(!_7c5);this.distanceActive(false);this.locationActive(false);},handleDistanceButtonClick:function(){var _7c6=this.distanceActive();this.distanceActive(!_7c6);this.areaActive(false);this.locationActive(false);},handleLocationButtonClick:function(){var _7c7=this.locationActive();this.locationActive(!_7c7);this.areaActive(false);this.distanceActive(false);},getLabelForDistanceValue:function(_7c8){var _7c9=this.distanceMeasurementUnits();for(var i=0;i<_7c9.length;i++){if(_7c9[i].value==_7c8){return _7c9[i].label;}}return "Unknown";},getLabelForLocationValue:function(_7ca){var _7cb=this.locationUnits();for(var i=0;i<_7cb.length;i++){if(_7cb[i].value==_7ca){return _7cb[i].label;}}return "Unknown";},getLabelForAreaValue:function(_7cc){var _7cd=this.areaMeasurementUnits();for(var i=0;i<_7cd.length;i++){if(_7cd[i].value==_7cc){return _7cd[i].label;}}return "Unknown";}});});},"esriviewer/ui/weather/reflectivity/ReflectivityWidgetWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","../../window/WindowWidget"],function(_7ce,lang,_7cf,_7d0){return _7ce([_7d0],{defaultPositioning:{x:400,y:125},windowWidth:"300px",windowHeaderText:"NEXRAD Reflectance",windowIconAltText:"Alt Text",windowIconClass:"commonIcons16 weather",positioningParamName:"reflectance",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/weather/reflectivity/ReflectivityWidget"],lang.hitch(this,function(_7d1){this.reflectivityWidget=new _7d1();this.setContent(this.reflectivityWidget.domNode);if(this.reflectivityWidget){this.reflectivityWidget.showWmsLayer();}}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_7cf.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REFLECTIVITY.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_7cf.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REFLECTIVITY.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_7cf.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REFLECTIVITY.TOGGLE,lang.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.reflectivityWidget&&this.reflectivityWidget){this.reflectivityWidget.hideWmsLayer();}},show:function(){this.inherited(arguments);if(this.reflectivityWidget){this.reflectivityWidget.showWmsLayer();}}});});},"esri/dijit/Scalebar":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/query","esri/kernel","esri/lang","esri/domUtils","esri/units","esri/SpatialReference","esri/WKIDUnitConversion","esri/geometry/Point","esri/geometry/ScreenPoint","esri/geometry/Polyline","esri/geometry/geodesicUtils","esri/geometry/webMercatorUtils","esri/geometry/screenUtils","esri/geometry/normalizeUtils"],function(_7d2,lang,_7d3,conn,_7d4,_7d5,_7d6,_7d7,has,_7d8,_7d9,_7da,_7db,_7dc,_7dd,_7de,_7df,_7e0,_7e1,_7e2,_7e3,_7e4,_7e5){var _7e6=_7d2(null,{declaredClass:"esri.dijit.Scalebar",map:null,mapUnit:null,scalebarUnit:null,unitsDictionary:[],domNode:null,screenPt1:null,screenPt2:null,constructor:function(_7e7,_7e8){this.metricScalebar=_7d5.create("div",{innerHTML:"<div class='esriScaleLabelDiv'><div class='esriScalebarLabel esriScalebarLineLabel esriScalebarSecondNumber'></div></div><div class='esriScalebarLine esriScalebarMetricLine'></div>"});this.englishScalebar=_7d5.create("div",{innerHTML:"<div class='esriScalebarLine esriScalebarEnglishLine'></div><div class='esriScaleLabelDiv'><div class='esriScalebarLabel esriScalebarLineLabel esriScalebarSecondNumber'></div></div>"});this.domNode=_7d5.create("div");_7e7=_7e7||{};if(!_7e7.map){return;}if(!_7e7.scalebarUnit){this.scalebarUnit="english";}else{if(_7e7.scalebarUnit!=="english"&&_7e7.scalebarUnit!=="metric"&&_7e7.scalebarUnit!=="dual"){return;}else{this.scalebarUnit=_7e7.scalebarUnit;}}if(!_7e7.scalebarStyle){this.scalebarStyle="ruler";}else{if(_7e7.scalebarStyle!=="ruler"&&_7e7.scalebarStyle!=="line"){return;}else{this.scalebarStyle=_7e7.scalebarStyle;}}this.background=_7e7.background;switch(this.scalebarUnit){case "english":if(this.scalebarStyle==="ruler"){this.englishScalebar.innerHTML="<div class='esriScalebarRuler'><div class='esriScalebarRulerBlock upper_firstpiece'></div><div class='esriScalebarRulerBlock upper_secondpiece'></div><div class='esriScalebarRulerBlock lower_firstpiece'></div><div class='esriScalebarRulerBlock lower_secondpiece'></div></div><div class='scaleLabelDiv'><div class='esriScalebarLabel' style='left: -3%'>0</div><div class='esriScalebarLabel esriScalebarFirstNumber'></div><div class='esriScalebarLabel esriScalebarSecondNumber'></div></div>";}this.domNode.appendChild(this.englishScalebar);break;case "metric":if(this.scalebarStyle==="ruler"){this.metricScalebar.innerHTML="<div class='esriScalebarRuler'><div class='esriScalebarRulerBlock upper_firstpiece'></div><div class='esriScalebarRulerBlock upper_secondpiece'></div><div class='esriScalebarRulerBlock lower_firstpiece'></div><div class='esriScalebarRulerBlock lower_secondpiece'></div></div><div class='scaleLabelDiv'><div class='esriScalebarLabel' style='left: -3%'>0</div><div class='esriScalebarLabel esriScalebarFirstNumber'></div><div class='esriScalebarLabel esriScalebarSecondNumber'></div></div>";}this.domNode.appendChild(this.metricScalebar);break;case "dual":this.domNode.appendChild(this.metricScalebar);this.domNode.appendChild(this.englishScalebar);break;}this.map=_7e7.map;if(_7e8){_7e8.appendChild(this.domNode);}else{this.map.container.appendChild(this.domNode);if(_7e7.attachTo){_7d4.add(this.domNode,"scalebar_"+_7e7.attachTo);}else{_7d4.add(this.domNode,"scalebar_bottom-left");}}_7d4.add(this.domNode,"esriScalebar");if(this.map.loaded){this._getDistance(this.map.extent);this._checkBingMaps();}else{var _7e9=conn.connect(this.map,"onLoad",this,function(){conn.disconnect(_7e9);_7e9=null;this._getDistance(this.map.extent);this._checkBingMaps();});}this._mapOnPan=conn.connect(this.map,"onPan",this,this._getDistance);this._mapOnExtentChange=conn.connect(this.map,"onExtentChange",this,this._getDistance);_7d3.forEach(this.map.layerIds,function(_7ea,idx){if(this.map.getLayer(_7ea).declaredClass==="esri.virtualearth.VETiledLayer"){conn.connect(this.map.getLayer(_7ea),"onVisibilityChange",lang.hitch(this,function(_7eb){this._checkBingMaps();}));}},this);this._mapOnLayerAdd=conn.connect(this.map,"onLayerAdd",lang.hitch(this,function(_7ec){if(_7ec.declaredClass==="esri.virtualearth.VETiledLayer"){conn.connect(_7ec,"onVisibilityChange",lang.hitch(this,function(_7ed){this._checkBingMaps();}));}this._checkBingMaps();}));this._mapOnLayerRemove=conn.connect(this.map,"onLayerRemove",lang.hitch(this,this._checkBingMaps));},hide:function(){this._hidden=true;_7db.hide(this.domNode);},show:function(){this._hidden=false;_7db.show(this.domNode);},destroy:function(){conn.disconnect(this._mapOnPan);conn.disconnect(this._mapOnExtentChange);conn.disconnect(this._mapOnLayerAdd);conn.disconnect(this._mapOnLayerRemove);this.hide();this.map=null;_7d5.destroy(this.domNode);},_checkBingMaps:function(){if(_7d4.contains(this.domNode,"scalebar_bottom-left")){_7d7.set(this.domNode,"left","25px");_7d3.forEach(this.map.layerIds,function(_7ee,idx){if(this.map.getLayer(_7ee).declaredClass==="esri.virtualearth.VETiledLayer"&&this.map.getLayer(_7ee).visible){var _7ef="95px";if(this.map._mapParams.nav){_7ef="115px";}_7d7.set(this.domNode,"left",_7ef);}},this);}},_getDistance:function(_7f0){var _7f1=_7d6.position(this.domNode,true);var _7f2=_7f1.y-this.map.position.y;_7f2=(_7f2>this.map.height)?this.map.height:_7f2;_7f2=(_7f2<0)?0:_7f2;var _7f3=new _7e0(0,_7f2);var _7f4=new _7e0(this.map.width,_7f2);var _7f5,_7f6,_7f7,_7f8;this.mapUnit="esriDecimalDegrees";var pt1=_7e4.toMapPoint(_7f0,this.map.width,this.map.height,_7f3);var pt2=_7e4.toMapPoint(_7f0,this.map.width,this.map.height,_7f4);var _7f9=new _7df(_7f0.xmin,(_7f0.ymin+_7f0.ymax)/2,this.map.spatialReference);var _7fa=new _7df(_7f0.xmax,(_7f0.ymin+_7f0.ymax)/2,this.map.spatialReference);if(this.map.spatialReference.wkid===3857||this.map.spatialReference.wkid===102100||this.map.spatialReference.wkid===102113||(this.map.spatialReference.wkt&&this.map.spatialReference.wkt.indexOf("WGS_1984_Web_Mercator")!=-1)){pt1=_7e3.webMercatorToGeographic(pt1,true);pt2=_7e3.webMercatorToGeographic(pt2,true);_7f9=_7e3.webMercatorToGeographic(_7f9,true);_7fa=_7e3.webMercatorToGeographic(_7fa,true);}else{if(_7da.isDefined(_7de[this.map.spatialReference.wkid])||(this.map.spatialReference.wkt&&this.map.spatialReference.wkt.indexOf("PROJCS")===0)){this.mapUnit="linearUnit";_7f5=Math.abs(_7f0.xmax-_7f0.xmin);var _7fb;if(_7da.isDefined(_7de[this.map.spatialReference.wkid])){_7fb=_7de.values[_7de[this.map.spatialReference.wkid]];}else{var wkt=this.map.spatialReference.wkt;var _7fc=wkt.lastIndexOf(",")+1;var end=wkt.lastIndexOf("]]");_7fb=parseFloat(wkt.substring(_7fc,end));}_7f5*=_7fb;_7f8=_7f5/1609;_7f7=_7f5/1000;_7f5/=1000;}}if(this.mapUnit==="esriDecimalDegrees"){var line=new _7e1(new _7dd({wkid:4326}));line.addPath([pt1,pt2]);var _7fd=_7e5._straightLineDensify(line,10);_7f5=_7e2.geodesicLengths([_7fd],_7dc.KILOMETERS)[0];var _7fe=new _7e1(new _7dd({wkid:4326}));_7fe.addPath([_7f9,_7fa]);var _7ff=_7e5._straightLineDensify(_7fe,10);_7f6=_7e2.geodesicLengths([_7ff],_7dc.KILOMETERS)[0];_7f8=_7f5/1.609;_7f6/=1.609;_7f7=_7f5;}if(this.scalebarUnit==="english"){this._getScaleBarLength(_7f8,"mi");}else{if(this.scalebarUnit==="metric"){this._getScaleBarLength(_7f7,"km");}else{if(this.scalebarUnit==="dual"){this._getScaleBarLength(_7f8,"mi");this._getScaleBarLength(_7f7,"km");}}}},_getScaleBarLength:function(_800,unit){var _801=50;var _802=_801*_800/this.map.width;var i=0;var _803=unit;if(_802<0.1){if(unit==="mi"){_802*=5280;_803="ft";}else{if(unit==="km"){_802*=1000;_803="m";}}}while(_802>=1){_802/=10;i++;}var _804,_805;if(_802>0.5){_804=1;_805=0.5;}else{if(_802>0.3){_804=0.5;_805=0.3;}else{if(_802>0.2){_804=0.3;_805=0.2;}else{if(_802>0.15){_804=0.2;_805=0.15;}else{if(_802>0.1){_804=0.15;_805=0.1;}}}}}var _806=((_804/_802)>=(_802/_805))?_805:_804;var _807=_806/_802;var _808=_801*_807;var _809=Math.pow(10,i)*_806;this._drawScaleBar(_808,_809,_803);},_drawScaleBar:function(_80a,_80b,_80c){var _80d=2*Math.round(_80a),_80e,_80f,_810;if(_80c==="mi"||_80c==="ft"){this.englishScalebar.style.width=_80d+"px";_80e=_7d8(".esriScalebarFirstNumber",this.englishScalebar);_80f=_7d8(".esriScalebarSecondNumber",this.englishScalebar);_810=_7d8(".esriScalebarMetricLineBackground",this.englishScalebar);}else{this.metricScalebar.style.width=_80d+"px";_80e=_7d8(".esriScalebarFirstNumber",this.metricScalebar);_80f=_7d8(".esriScalebarSecondNumber",this.metricScalebar);_810=_7d8(".esriScalebarMetricLineBackground",this.metricScalebar);}_7d3.forEach(_810,function(_811,idx){_811.style.width=_80d-2+"px";},this);_7d3.forEach(_80e,function(_812,idx){_812.innerHTML=_80b;},this);_7d3.forEach(_80f,function(_813,idx){if(this.mapUnit!=="esriUnknown"){_813.innerHTML=2*_80b+_80c;}else{_813.innerHTML=2*_80b+"Unknown Unit";}},this);}});if(has("extend-esri")){lang.setObject("dijit.Scalebar",_7e6,_7d9);}return _7e6;});},"dijit/layout/StackContainer":function(){define(["dojo/_base/array","dojo/cookie","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/has","dojo/_base/lang","dojo/on","dojo/ready","dojo/topic","dojo/when","../registry","../_WidgetBase","./_LayoutWidget","dojo/i18n!../nls/common"],function(_814,_815,_816,_817,_818,has,lang,on,_819,_81a,when,_81b,_81c,_81d){if(has("dijit-legacy-requires")){_819(0,function(){var _81e=["dijit/layout/StackController"];require(_81e);});}var _81f=_816("dijit.layout.StackContainer",_81d,{doLayout:true,persist:false,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);_817.add(this.domNode,"dijitLayoutContainer");},postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,"keydown",lang.hitch(this,"_onKeyDown")));},startup:function(){if(this._started){return;}var _820=this.getChildren();_814.forEach(_820,this._setupChild,this);if(this.persist){this.selectedChildWidget=_81b.byId(_815(this.id+"_selectedChild"));}else{_814.some(_820,function(_821){if(_821.selected){this.selectedChildWidget=_821;}return _821.selected;},this);}var _822=this.selectedChildWidget;if(!_822&&_820[0]){_822=this.selectedChildWidget=_820[0];_822.selected=true;}_81a.publish(this.id+"-startup",{children:_820,selected:_822,textDir:this.textDir});this.inherited(arguments);},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=true;var _823=this.selectedChildWidget;if(_823){this._showChild(_823);}}this.inherited(arguments);},_setupChild:function(_824){var _825=_824.domNode,_826=_818.place("<div role='tabpanel' class='"+this.baseClass+"ChildWrapper dijitHidden'>",_824.domNode,"replace"),_827=_824["aria-label"]||_824.title||_824.label;if(_827){_826.setAttribute("aria-label",_827);}_818.place(_825,_826);_824._wrapper=_826;this.inherited(arguments);if(_825.style.display=="none"){_825.style.display="block";}_824.domNode.title="";},addChild:function(_828,_829){this.inherited(arguments);if(this._started){_81a.publish(this.id+"-addChild",_828,_829);this.layout();if(!this.selectedChildWidget){this.selectChild(_828);}}},removeChild:function(page){var idx=_814.indexOf(this.getChildren(),page);this.inherited(arguments);_818.destroy(page._wrapper);delete page._wrapper;if(this._started){_81a.publish(this.id+"-removeChild",page);}if(this._descendantsBeingDestroyed){return;}if(this.selectedChildWidget===page){this.selectedChildWidget=undefined;if(this._started){var _82a=this.getChildren();if(_82a.length){this.selectChild(_82a[Math.max(idx-1,0)]);}}}if(this._started){this.layout();}},selectChild:function(page,_82b){var d;page=_81b.byId(page);if(this.selectedChildWidget!=page){d=this._transition(page,this.selectedChildWidget,_82b);this._set("selectedChildWidget",page);_81a.publish(this.id+"-selectChild",page);if(this.persist){_815(this.id+"_selectedChild",this.selectedChildWidget.id);}}return when(d||true);},_transition:function(_82c,_82d){if(_82d){this._hideChild(_82d);}var d=this._showChild(_82c);if(_82c.resize){if(this.doLayout){_82c.resize(this._containerContentBox||this._contentBox);}else{_82c.resize();}}return d;},_adjacent:function(_82e){var _82f=this.getChildren();var _830=_814.indexOf(_82f,this.selectedChildWidget);_830+=_82e?1:_82f.length-1;return _82f[_830%_82f.length];},forward:function(){return this.selectChild(this._adjacent(true),true);},back:function(){return this.selectChild(this._adjacent(false),true);},_onKeyDown:function(e){_81a.publish(this.id+"-containerKeyDown",{e:e,page:this});},layout:function(){var _831=this.selectedChildWidget;if(_831&&_831.resize){if(this.doLayout){_831.resize(this._containerContentBox||this._contentBox);}else{_831.resize();}}},_showChild:function(page){var _832=this.getChildren();page.isFirstChild=(page==_832[0]);page.isLastChild=(page==_832[_832.length-1]);page._set("selected",true);if(page._wrapper){_817.replace(page._wrapper,"dijitVisible","dijitHidden");}return (page._onShow&&page._onShow())||true;},_hideChild:function(page){page._set("selected",false);if(page._wrapper){_817.replace(page._wrapper,"dijitHidden","dijitVisible");}page.onHide&&page.onHide();},closeChild:function(page){var _833=page.onClose&&page.onClose(this,page);if(_833){this.removeChild(page);page.destroyRecursive();}},destroyDescendants:function(_834){this._descendantsBeingDestroyed=true;this.selectedChildWidget=undefined;_814.forEach(this.getChildren(),function(_835){if(!_834){this.removeChild(_835);}_835.destroyRecursive(_834);},this);this._descendantsBeingDestroyed=false;}});_81f.ChildWidgetProperties={selected:false,disabled:false,closable:false,iconClass:"dijitNoIcon",showTitle:true};lang.extend(_81c,_81f.ChildWidgetProperties);return _81f;});},"esriviewer/ui/window/WindowWidget":function(){define(["dojo/_base/declare","dojo/text!./template/WindowWidgetTemplate.html","dojo/topic","dojo/_base/window","dojo/_base/lang","dojo/on","dojo/dom-construct","dojo/dom-class","dojo/dom-style","../base/UITemplatedWidget","dojo/dnd/Moveable","dojox/layout/ResizeHandle","dojo/_base/connect","dojo/dom-geometry"],function(_836,_837,_838,_839,lang,on,_83a,_83b,_83c,_83d,_83e,_83f,con,_840){return _836([_83d],{resizeAxis:"xy",animate:true,resizable:false,isPositionedByConfig:true,firstShow:true,showOnLoad:false,visible:false,movable:true,canMinimize:true,windowHeight:null,windowWidth:"35%",positioningParamName:"",windowHeaderText:"Window",windowIconClass:"commonIcons16 application",templateString:_837,closeWindowTitle:"Close Window",windowIconAltText:"Window",constructor:function(){this.animation=VIEWER_GLOBALS.ANIMATIONS.FADE.IN;this.windowTopOffset=(VIEWER_GLOBALS.WINDOW&&VIEWER_GLOBALS.WINDOW.TOP_POSITION_MOVE_OFFSET)?(VIEWER_GLOBALS.WINDOW.TOP_POSITION_MOVE_OFFSET):3;},postCreate:function(){this.inherited(arguments);_83a.place(this.domNode,_839.body());this.visible=false;_83b.add(this.domNode,"windowHidden");if(this.movable){this._initMover();}else{_83c.set(this.windowHeader,"cursor","default");}if(this.windowHeight!=null){_83c.set(this.domNode,"height",this.windowHeight);}if(this.windowWidth!=null){_83c.set(this.domNode,"width",this.windowWidth);}if(this.resizable){var _841={targetId:this.id,activeResize:true};if(this.minWidth!=null){_841["minWidth"]=this.minWidth;}if(this.minHeight!=null){_841["minHeight"]=this.minHeight;}if(this.resizeAxis){_841["resizeAxis"]=this.resizeAxis;}this.handle=new _83f(_841).placeAt(this.domNode);}if(!this.canMinimize){_83c.set(this.windowMinimizeImg,"display","none");}if(!this.showOnLoad){this.hide();}else{this.show();}},initListeners:function(){this.inherited(arguments);this.connects.push(on(this.windowCloseImg,"click",lang.hitch(this,this.hide,0)));this.connects.push(on(this.windowMinimizeImg,"click",lang.hitch(this,this.toggleContent)));this.subscribes.push(_838.subscribe("/dojo/resize/stop",lang.hitch(this,this.handleGlobalResizeFired)));this.subscribes.push(_838.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REPOSITION_ALL,lang.hitch(this,this.handleReposition)));},loadViewerConfigurationData:function(){var _842=null;_838.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"animationsEnabled",function(_843){_842=_843;});if(_842!=null){this.animate=_842;}},handleReposition:function(){var pos=_840.position(this.domNode);if(pos.y<this.windowTopOffset){_83c.set(this.domNode,"top",this.windowTopOffset+"px");}},handleGlobalResizeFired:function(_844){if(this.handle){if(_844.id===this.handle.id){this.onWindowResize();}}},setContent:function(_845){_83a.empty(this.windowContent);_83a.place(_845,this.windowContent);},toggle:function(){if(this.visible){this.hide();}else{this.show();}},show:function(){if(!this.visible){this.onBeforeWindowShow();_83b.remove(this.domNode,"windowHidden");if(this.animate){this._animateWidget();}this.visible=true;if(this.firstShow){this.firstShow=false;this.onFirstWindowShow();}this.onAfterWindowShow();}},hide:function(){if(this.visible){this.onBeforeWindowHide();_83b.add(this.domNode,"windowHidden");if(this.animate){this._removeAnimationClasses();}this.visible=false;this.hidePopups();this.onAfterWindowHide();}},_initMover:function(){this.mover=new _83e(this.domNode,{handle:this.headerMoverContainer});con.connect(this.mover,"onMove",VIEWER_UTILS,VIEWER_UTILS.handleContainerMoved);},toggleContent:function(){var _846=_83c.get(this.windowContentOuter,"display");if(_846=="none"){this._expand();}else{this._collapse();}},_expand:function(){_83b.remove(this.windowHeader,"windowHeaderCollapsed");_83c.set(this.windowContentOuter,"display","block");_83b.add(this.windowHeader,"windowHeader");if(this.windowHeight!=null){_83c.set(this.domNode,"height",this.windowHeight);}this.onWindowExpanded();if(this.handle&&this.handle.resizeHandle){this.handle.resizeHandle.style.display="block";}},_collapse:function(){_83b.add(this.windowHeader,"windowHeaderCollapsed");_83b.remove(this.windowHeader,"windowHeader");_83c.set(this.windowContentOuter,"display","none");if(this.windowHeight!=null){_83c.set(this.domNode,"height",null);}this.hidePopups();this.onWindowCollapsed();if(this.handle&&this.handle.resizeHandle){this.handle.resizeHandle.style.display="none";}},hidePopups:function(){},setWindowWidthFromInt:function(_847){_83c.set(this.domNode,"width",_847+"px");},onWindowExpanded:function(){},onWindowCollapsed:function(){},onWindowResize:function(){},onBeforeWindowShow:function(){},onBeforeWindowHide:function(){},onAfterWindowShow:function(){},onAfterWindowHide:function(){},onFirstWindowShow:function(){}});});},"esriviewer/ui/toolbar/base/model/BookmarkListingViewModel":function(){define(["dojo/_base/declare","dojo/topic","dojo/Evented","dojo/dom-construct","dojo/dom-class","dojox/timing"],function(_848,_849,_84a,_84b,_84c,_84d){return _848([_84a],{animate:true,SHOW_CREATE_BOOKMARK:"showCreateBookmark",REMOVE_BOOKMARK_REQUEST:"removeBookmarkRequest",ignoreAddAnimation:true,constructor:function(){this.loadViewerConfigurationData();var self=this;this.showCreateBookmarkIcon=ko.observable(true);this.visible=ko.observable(false);this._removableBookmarks=ko.observableArray();this._bookmarks=ko.observableArray();this.removeClick=function(item,evt){self._removeClick(item,evt);};this.handleBeforeRemoveBookmark=function(_84e){if(self.animate){_84c.add(_84e,VIEWER_GLOBALS.ANIMATIONS.LIGHT_SPEED.OUT);var _84f=new _84d.Timer(VIEWER_GLOBALS.ANIMATIONS.LIGHT_SPEED.DURATION);_84f.onTick=function(){_84b.destroy(_84e);_84f.stop();_84f=null;};_84f.start();}else{_84b.destroy(_84e);}};this.handleAfterAddBookmark=function(e){if(!self.ignoreAddAnimation&&self.animate){_84c.add(e,VIEWER_GLOBALS.ANIMATIONS.LIGHT_SPEED.IN);var _850=new _84d.Timer(VIEWER_GLOBALS.ANIMATIONS.LIGHT_SPEED.DURATION);_850.onTick=function(){_84c.remove(e,VIEWER_GLOBALS.ANIMATIONS.LIGHT_SPEED.IN);_850.stop();_850=null;};_850.start();}};},loadViewerConfigurationData:function(){var _851=null;_849.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"animationsEnabled",function(_852){_851=_852;});if(_851!=null){this.animate=_851;}},handleBookmarkClick:function(_853){if(_853==null){return;}_849.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PAN_TO,_853.point,{zoomLevel:_853.zoomLevel});},addRemovableBookmark:function(_854){if(this._removableBookmarks.indexOf(_854)>-1){return;}this._removableBookmarks.push(_854);this._removableBookmarks.sort(this._bookmarkSorter);},addBookmark:function(_855){if(this._bookmarks.indexOf(_855)>-1){return;}this._bookmarks.push(_855);this._bookmarks.sort(this._bookmarkSorter);},_bookmarkSorter:function(left,_856){return left.label==_856.label?0:(left.label<_856.label?-1:1);},showCreateBookmark:function(){this.emit(this.SHOW_CREATE_BOOKMARK);},_removeClick:function(_857,evt){if(_857!=null){this.emit(this.REMOVE_BOOKMARK_REQUEST,_857,evt);}},removeBookmark:function(_858){this._removableBookmarks.remove(_858);},sortStatic:function(){this._bookmarks.sort(function(left,_859){var _85a=left.label.toLowerCase();var _85b=_859.label.toLowerCase();return _85a==_85b?0:(_85a<_85b?-1:1);});},sortRemovable:function(){this._removableBookmarks.sort(function(left,_85c){var _85d=left.label.toLowerCase();var _85e=_85c.label.toLowerCase();return _85d==_85e?0:(_85d<_85e?-1:1);});},sortAll:function(){this.sortRemovable();this.sortStatic();}});});},"esriviewer/ui/layers/base/UserPersistedLayersListWidget":function(){define(["dojo/_base/declare","dojo/text!./template/UserPersistedLayersListingTemplate.html","../../base/UITemplatedWidget","dojo/_base/lang","./model/UserPersistedLayersListViewModel"],function(_85f,_860,_861,lang,_862){return _85f([_861],{bindingsApplied:false,templateString:_860,constructor:function(){this.userPersistedGraphics={};},postCreate:function(){this.inherited(arguments);this.viewModel=new _862();this.viewModel.on(this.viewModel.REMOVE_USER_PERSISTED_LAYER,lang.hitch(this,this.handleRemoveUserPersistedLayer));this.viewModel.on(this.viewModel.ADD_USER_PERSISTED_LAYER_TO_MAP,lang.hitch(this,this.handleAddUserPersistedLayerToMap));this.viewModel.on(this.viewModel.CLEAR_USER_PERSISTED_LAYERS,lang.hitch(this,this.handleClearUserPersistedLayers));},applyBindings:function(){if(!this.bindingsApplied){this.bindingsApplied=true;ko.applyBindings(this.viewModel,this.domNode);}},handleAddUserPersistedLayerToMap:function(_863){if(_863==null||!lang.isObject(_863)||_863.url==null||_863.url==""){return;}this.onAddUserPersistedLayerToMap(_863.url,_863.name);},onAddUserPersistedLayerToMap:function(_864,_865){},handleClearUserPersistedLayers:function(){this.onRemoveAllUserPersistedLayers();},handleRemoveUserPersistedLayer:function(_866){if(_866&&lang.isObject(_866)){var id=VIEWER_UTILS.getLayerUniqueId(_866);if(id==null){return;}this.onRemoveUserPersistedLayer(id);}},onRemoveAllUserPersistedLayers:function(){},onRemoveUserPersistedLayer:function(_867){},addExistingPersistedLayerItems:function(_868){for(var key in _868){this.viewModel.addedUserPersistedLayers.push(_868[key]);}this.viewModel.sort();this.applyBindings();},addPersistedLayer:function(_869){this.viewModel.addedUserPersistedLayers.push(_869);this.viewModel.sort();}});});},"dijit/DropDownMenu":function(){define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_OnDijitClickMixin","./_MenuBase"],function(_86a,keys,_86b,_86c,_86d){return _86a("dijit.DropDownMenu",[_86d,_86c],{templateString:_86b,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev();},_onDownArrow:function(){this.focusNext();},_onRightArrow:function(evt){this._moveToPopup(evt);evt.stopPropagation();evt.preventDefault();},_onLeftArrow:function(){if(this.parentMenu){if(this.parentMenu._isMenuBar){this.parentMenu.focusPrev();}else{this.onCancel(false);}}else{evt.stopPropagation();evt.preventDefault();}}});});},"dijit/Menu":function(){define(["require","dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window","dojo/window","./popup","./DropDownMenu","dojo/ready"],function(_86e,_86f,_870,dom,_871,_872,_873,keys,lang,on,has,win,_874,pm,_875,_876){if(has("dijit-legacy-requires")){_876(0,function(){var _877=["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"];_86e(_877);});}return _870("dijit.Menu",_875,{constructor:function(){this._bindings=[];},targetNodeIds:[],selector:"",contextMenuForWindow:false,leftClickToOpen:false,refocus:true,postCreate:function(){if(this.contextMenuForWindow){this.bindDomNode(this.ownerDocumentBody);}else{_86f.forEach(this.targetNodeIds,this.bindDomNode,this);}this.inherited(arguments);},_iframeContentWindow:function(_878){return _874.get(this._iframeContentDocument(_878))||this._iframeContentDocument(_878)["__parent__"]||(_878.name&&document.frames[_878.name])||null;},_iframeContentDocument:function(_879){return _879.contentDocument||(_879.contentWindow&&_879.contentWindow.document)||(_879.name&&document.frames[_879.name]&&document.frames[_879.name].document)||null;},bindDomNode:function(node){node=dom.byId(node,this.ownerDocument);var cn;if(node.tagName.toLowerCase()=="iframe"){var _87a=node,_87b=this._iframeContentWindow(_87a);cn=win.body(_87b.document);}else{cn=(node==win.body(this.ownerDocument)?this.ownerDocument.documentElement:node);}var _87c={node:node,iframe:_87a};_871.set(node,"_dijitMenu"+this.id,this._bindings.push(_87c));var _87d=lang.hitch(this,function(cn){var _87e=this.selector,_87f=_87e?function(_880){return on.selector(_87e,_880);}:function(_881){return _881;},self=this;return [on(cn,_87f(this.leftClickToOpen?"click":"contextmenu"),function(evt){evt.stopPropagation();evt.preventDefault();self._scheduleOpen(this,_87a,{x:evt.pageX,y:evt.pageY});}),on(cn,_87f("keydown"),function(evt){if(evt.shiftKey&&evt.keyCode==keys.F10){evt.stopPropagation();evt.preventDefault();self._scheduleOpen(this,_87a);}})];});_87c.connects=cn?_87d(cn):[];if(_87a){_87c.onloadHandler=lang.hitch(this,function(){var _882=this._iframeContentWindow(_87a),cn=win.body(_882.document);_87c.connects=_87d(cn);});if(_87a.addEventListener){_87a.addEventListener("load",_87c.onloadHandler,false);}else{_87a.attachEvent("onload",_87c.onloadHandler);}}},unBindDomNode:function(_883){var node;try{node=dom.byId(_883,this.ownerDocument);}catch(e){return;}var _884="_dijitMenu"+this.id;if(node&&_871.has(node,_884)){var bid=_871.get(node,_884)-1,b=this._bindings[bid],h;while((h=b.connects.pop())){h.remove();}var _885=b.iframe;if(_885){if(_885.removeEventListener){_885.removeEventListener("load",b.onloadHandler,false);}else{_885.detachEvent("onload",b.onloadHandler);}}_871.remove(node,_884);delete this._bindings[bid];}},_scheduleOpen:function(_886,_887,_888){if(!this._openTimer){this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:_886,iframe:_887,coords:_888});},1);}},_openMyself:function(args){var _889=args.target,_88a=args.iframe,_88b=args.coords,_88c=!_88b;this.currentTarget=_889;if(_88b){if(_88a){var ifc=_872.position(_88a,true),_88d=this._iframeContentWindow(_88a),_88e=_872.docScroll(_88d.document);var cs=_873.getComputedStyle(_88a),tp=_873.toPixelValue,left=(has("ie")&&has("quirks")?0:tp(_88a,cs.paddingLeft))+(has("ie")&&has("quirks")?tp(_88a,cs.borderLeftWidth):0),top=(has("ie")&&has("quirks")?0:tp(_88a,cs.paddingTop))+(has("ie")&&has("quirks")?tp(_88a,cs.borderTopWidth):0);_88b.x+=ifc.x+left-_88e.x;_88b.y+=ifc.y+top-_88e.y;}}else{_88b=_872.position(_889,true);_88b.x+=10;_88b.y+=10;}var self=this;var _88f=this._focusManager.get("prevNode");var _890=this._focusManager.get("curNode");var _891=!_890||(dom.isDescendant(_890,this.domNode))?_88f:_890;function _892(){if(self.refocus&&_891){_891.focus();}pm.close(self);};pm.open({popup:this,x:_88b.x,y:_88b.y,onExecute:_892,onCancel:_892,orient:this.isLeftToRight()?"L":"R"});this.focus();if(!_88c){this.defer(function(){this._cleanUp(true);});}this._onBlur=function(){this.inherited("_onBlur",arguments);pm.close(this);};},destroy:function(){_86f.forEach(this._bindings,function(b){if(b){this.unBindDomNode(b.node);}},this);this.inherited(arguments);}});});},"dijit/form/_CheckBoxMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(_893,_894){return _893("dijit.form._CheckBoxMixin",null,{type:"checkbox",value:"on",readOnly:false,_aria_attr:"aria-checked",_setReadOnlyAttr:function(_895){this._set("readOnly",_895);_894.set(this.focusNode,"readOnly",_895);},_setLabelAttr:undefined,_getSubmitValue:function(_896){return (_896==null||_896==="")?"on":_896;},_setValueAttr:function(_897){_897=this._getSubmitValue(_897);this._set("value",_897);_894.set(this.focusNode,"value",_897);},reset:function(){this.inherited(arguments);this._set("value",this._getSubmitValue(this.params.value));_894.set(this.focusNode,"value",this.value);},_onClick:function(e){if(this.readOnly){e.stopPropagation();e.preventDefault();return false;}return this.inherited(arguments);}});});},"esriviewer/ui/footer/model/FooterTogglerViewModel":function(){define(["dojo/_base/declare"],function(_898){return _898([],{constructor:function(){this.expanded=ko.observable(false);}});});},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(_899,_89a){return _899("dijit._Contained",null,{_getSibling:function(_89b){var node=this.domNode;do{node=node[_89b+"Sibling"];}while(node&&node.nodeType!=1);return node&&_89a.byNode(node);},getPreviousSibling:function(){return this._getSibling("previous");},getNextSibling:function(){return this._getSibling("next");},getIndexInParent:function(){var p=this.getParent();if(!p||!p.getIndexOfChild){return -1;}return p.getIndexOfChild(this);}});});},"dijit/_KeyNavContainer":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/_base/kernel","dojo/keys","dojo/_base/lang","./registry","./_Container","./_FocusMixin","./_KeyNavMixin"],function(_89c,_89d,_89e,_89f,keys,lang,_8a0,_8a1,_8a2,_8a3){return _89d("dijit._KeyNavContainer",[_8a2,_8a3,_8a1],{connectKeyNavHandlers:function(_8a4,_8a5){var _8a6=(this._keyNavCodes={});var prev=lang.hitch(this,"focusPrev");var next=lang.hitch(this,"focusNext");_89c.forEach(_8a4,function(code){_8a6[code]=prev;});_89c.forEach(_8a5,function(code){_8a6[code]=next;});_8a6[keys.HOME]=lang.hitch(this,"focusFirstChild");_8a6[keys.END]=lang.hitch(this,"focusLastChild");},startupKeyNavChildren:function(){_89f.deprecated("startupKeyNavChildren() call no longer needed","","2.0");},startup:function(){this.inherited(arguments);_89c.forEach(this.getChildren(),lang.hitch(this,"_startupChild"));},addChild:function(_8a7,_8a8){this.inherited(arguments);this._startupChild(_8a7);},_startupChild:function(_8a9){_8a9.set("tabIndex","-1");},_getFirst:function(){var _8aa=this.getChildren();return _8aa.length?_8aa[0]:null;},_getLast:function(){var _8ab=this.getChildren();return _8ab.length?_8ab[_8ab.length-1]:null;},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1));},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),true);},childSelector:function(node){var node=_8a0.byNode(node);return node&&node.getParent()==this;}});});},"esriviewer/ui/draw/configure/model/ConfigureDrawViewModel":function(){define(["dojo/_base/declare"],function(_8ac){return _8ac([],{constructor:function(){this.showConfigureGeometryIcons=ko.observable(true);this.showEnvelopeIcon=ko.observable(true);this.showTextIcon=ko.observable(true);this.pointConfigurationActive=ko.observable(true);this.lineConfigurationActive=ko.observable(false);this.rectangleConfigurationActive=ko.observable(false);this.polygonConfigurationActive=ko.observable(false);this.textConfigurationActive=ko.observable(false);},showPointConfiguration:function(){this.pointConfigurationActive(true);this.lineConfigurationActive(false);this.rectangleConfigurationActive(false);this.polygonConfigurationActive(false);this.textConfigurationActive(false);},showLineConfiguration:function(){this.lineConfigurationActive(true);this.pointConfigurationActive(false);this.rectangleConfigurationActive(false);this.polygonConfigurationActive(false);this.textConfigurationActive(false);},showRectangleConfiguration:function(){this.rectangleConfigurationActive(true);this.lineConfigurationActive(false);this.pointConfigurationActive(false);this.polygonConfigurationActive(false);this.textConfigurationActive(false);},showPolygonConfiguration:function(){this.polygonConfigurationActive(true);this.rectangleConfigurationActive(false);this.lineConfigurationActive(false);this.pointConfigurationActive(false);this.textConfigurationActive(false);},showTextConfiguration:function(){this.textConfigurationActive(true);this.polygonConfigurationActive(false);this.rectangleConfigurationActive(false);this.lineConfigurationActive(false);this.pointConfigurationActive(false);}});});},"esriviewer/ui/layers/model/LayersWidgetViewModel":function(){define(["dojo/_base/declare","dojo/topic","dojo/Evented"],function(_8ad,_8ae,_8af){return _8ad([_8af],{ADD_LAYERS_VISIBLE:"addLayersVisible",constructor:function(){this.firstAddLayersDisplay=true;this.layersListVisible=ko.observable(true);this.addLayersVisible=ko.observable(false);this.persistedLayersVisible=ko.observable(false);this.showWKIDInAddLayers=ko.observable(true);this.showUserPersistedLayersIcon=ko.observable(true);this.viewerWKID=ko.observable("");},showLayersList:function(){this.layersListVisible(true);this.addLayersVisible(false);this.persistedLayersVisible(false);},showAddLayers:function(){if(this.addLayersVisible()){return;}if(this.firstAddLayersDisplay){var _8b0=null;_8ae.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,function(ext){_8b0=ext;});if(_8b0&&_8b0.spatialReference&&_8b0.spatialReference.wkid!=null){this.viewerWKID(_8b0.spatialReference.wkid.toString());}this.firstAddLayersDisplay=false;}this.layersListVisible(false);this.addLayersVisible(true);this.persistedLayersVisible(false);this.emit(this.ADD_LAYERS_VISIBLE);},showUserPersistedLayers:function(){this.layersListVisible(false);this.addLayersVisible(false);this.persistedLayersVisible(true);}});});},"dojox/sql/_base":function(){define(["dijit","dojo","dojox","dojo/require!dojox/sql/_crypto"],function(_8b1,dojo,_8b2){dojo.provide("dojox.sql._base");dojo.require("dojox.sql._crypto");dojo.mixin(_8b2.sql,{dbName:null,debug:(dojo.exists("dojox.sql.debug")?_8b2.sql.debug:false),open:function(_8b3){if(this._dbOpen&&(!_8b3||_8b3==this.dbName)){return;}if(!this.dbName){this.dbName="dot_store_"+window.location.href.replace(/[^0-9A-Za-z_]/g,"_");if(this.dbName.length>63){this.dbName=this.dbName.substring(0,63);}}if(!_8b3){_8b3=this.dbName;}try{this._initDb();this.db.open(_8b3);this._dbOpen=true;}catch(exp){throw exp.message||exp;}},close:function(_8b4){if(dojo.isIE){return;}if(!this._dbOpen&&(!_8b4||_8b4==this.dbName)){return;}if(!_8b4){_8b4=this.dbName;}try{this.db.close(_8b4);this._dbOpen=false;}catch(exp){throw exp.message||exp;}},_exec:function(_8b5){try{this._initDb();if(!this._dbOpen){this.open();this._autoClose=true;}var sql=null;var _8b6=null;var _8b7=null;var args=dojo._toArray(_8b5);sql=args.splice(0,1)[0];if(this._needsEncrypt(sql)||this._needsDecrypt(sql)){_8b6=args.splice(args.length-1,1)[0];_8b7=args.splice(args.length-1,1)[0];}if(this.debug){this._printDebugSQL(sql,args);}var _8b8;if(this._needsEncrypt(sql)){_8b8=new _8b2.sql._SQLCrypto("encrypt",sql,_8b7,args,_8b6);return null;}else{if(this._needsDecrypt(sql)){_8b8=new _8b2.sql._SQLCrypto("decrypt",sql,_8b7,args,_8b6);return null;}}var rs=this.db.execute(sql,args);rs=this._normalizeResults(rs);if(this._autoClose){this.close();}return rs;}catch(exp){exp=exp.message||exp;if(this._autoClose){try{this.close();}catch(e){}}throw exp;}return null;},_initDb:function(){if(!this.db){try{this.db=google.gears.factory.create("beta.database","1.0");}catch(exp){dojo.setObject("google.gears.denied",true);if(_8b2.off){_8b2.off.onFrameworkEvent("coreOperationFailed");}throw "Google Gears must be allowed to run";}}},_printDebugSQL:function(sql,args){var msg="dojox.sql(\""+sql+"\"";for(var i=0;i<args.length;i++){if(typeof args[i]=="string"){msg+=", \""+args[i]+"\"";}else{msg+=", "+args[i];}}msg+=")";},_normalizeResults:function(rs){var _8b9=[];if(!rs){return [];}while(rs.isValidRow()){var row={};for(var i=0;i<rs.fieldCount();i++){var _8ba=rs.fieldName(i);var _8bb=rs.field(i);row[_8ba]=_8bb;}_8b9.push(row);rs.next();}rs.close();return _8b9;},_needsEncrypt:function(sql){return /encrypt\([^\)]*\)/i.test(sql);},_needsDecrypt:function(sql){return /decrypt\([^\)]*\)/i.test(sql);}});dojo.declare("dojox.sql._SQLCrypto",null,{constructor:function(_8bc,sql,_8bd,args,_8be){if(_8bc=="encrypt"){this._execEncryptSQL(sql,_8bd,args,_8be);}else{this._execDecryptSQL(sql,_8bd,args,_8be);}},_execEncryptSQL:function(sql,_8bf,args,_8c0){var _8c1=this._stripCryptoSQL(sql);var _8c2=this._flagEncryptedArgs(sql,args);var self=this;this._encrypt(_8c1,_8bf,args,_8c2,function(_8c3){var _8c4=false;var _8c5=[];var exp=null;try{_8c5=_8b2.sql.db.execute(_8c1,_8c3);}catch(execError){_8c4=true;exp=execError.message||execError;}if(exp!=null){if(_8b2.sql._autoClose){try{_8b2.sql.close();}catch(e){}}_8c0(null,true,exp.toString());return;}_8c5=_8b2.sql._normalizeResults(_8c5);if(_8b2.sql._autoClose){_8b2.sql.close();}if(_8b2.sql._needsDecrypt(sql)){var _8c6=self._determineDecryptedColumns(sql);self._decrypt(_8c5,_8c6,_8bf,function(_8c7){_8c0(_8c7,false,null);});}else{_8c0(_8c5,false,null);}});},_execDecryptSQL:function(sql,_8c8,args,_8c9){var _8ca=this._stripCryptoSQL(sql);var _8cb=this._determineDecryptedColumns(sql);var _8cc=false;var _8cd=[];var exp=null;try{_8cd=_8b2.sql.db.execute(_8ca,args);}catch(execError){_8cc=true;exp=execError.message||execError;}if(exp!=null){if(_8b2.sql._autoClose){try{_8b2.sql.close();}catch(e){}}_8c9(_8cd,true,exp.toString());return;}_8cd=_8b2.sql._normalizeResults(_8cd);if(_8b2.sql._autoClose){_8b2.sql.close();}this._decrypt(_8cd,_8cb,_8c8,function(_8ce){_8c9(_8ce,false,null);});},_encrypt:function(sql,_8cf,args,_8d0,_8d1){this._totalCrypto=0;this._finishedCrypto=0;this._finishedSpawningCrypto=false;this._finalArgs=args;for(var i=0;i<args.length;i++){if(_8d0[i]){var _8d2=args[i];var _8d3=i;this._totalCrypto++;_8b2.sql._crypto.encrypt(_8d2,_8cf,dojo.hitch(this,function(_8d4){this._finalArgs[_8d3]=_8d4;this._finishedCrypto++;if(this._finishedCrypto>=this._totalCrypto&&this._finishedSpawningCrypto){_8d1(this._finalArgs);}}));}}this._finishedSpawningCrypto=true;},_decrypt:function(_8d5,_8d6,_8d7,_8d8){this._totalCrypto=0;this._finishedCrypto=0;this._finishedSpawningCrypto=false;this._finalResultSet=_8d5;for(var i=0;i<_8d5.length;i++){var row=_8d5[i];for(var _8d9 in row){if(_8d6=="*"||_8d6[_8d9]){this._totalCrypto++;var _8da=row[_8d9];this._decryptSingleColumn(_8d9,_8da,_8d7,i,function(_8db){_8d8(_8db);});}}}this._finishedSpawningCrypto=true;},_stripCryptoSQL:function(sql){sql=sql.replace(/DECRYPT\(\*\)/ig,"*");var _8dc=sql.match(/ENCRYPT\([^\)]*\)/ig);if(_8dc!=null){for(var i=0;i<_8dc.length;i++){var _8dd=_8dc[i];var _8de=_8dd.match(/ENCRYPT\(([^\)]*)\)/i)[1];sql=sql.replace(_8dd,_8de);}}_8dc=sql.match(/DECRYPT\([^\)]*\)/ig);if(_8dc!=null){for(i=0;i<_8dc.length;i++){var _8df=_8dc[i];var _8e0=_8df.match(/DECRYPT\(([^\)]*)\)/i)[1];sql=sql.replace(_8df,_8e0);}}return sql;},_flagEncryptedArgs:function(sql,args){var _8e1=new RegExp(/([\"][^\"]*\?[^\"]*[\"])|([\'][^\']*\?[^\']*[\'])|(\?)/ig);var _8e2;var _8e3=0;var _8e4=[];while((_8e2=_8e1.exec(sql))!=null){var _8e5=RegExp.lastMatch+"";if(/^[\"\']/.test(_8e5)){continue;}var _8e6=false;if(/ENCRYPT\([^\)]*$/i.test(RegExp.leftContext)){_8e6=true;}_8e4[_8e3]=_8e6;_8e3++;}return _8e4;},_determineDecryptedColumns:function(sql){var _8e7={};if(/DECRYPT\(\*\)/i.test(sql)){_8e7="*";}else{var _8e8=/DECRYPT\((?:\s*\w*\s*\,?)*\)/ig;var _8e9=_8e8.exec(sql);while(_8e9){var _8ea=new String(RegExp.lastMatch);var _8eb=_8ea.replace(/DECRYPT\(/i,"");_8eb=_8eb.replace(/\)/,"");_8eb=_8eb.split(/\s*,\s*/);dojo.forEach(_8eb,function(_8ec){if(/\s*\w* AS (\w*)/i.test(_8ec)){_8ec=_8ec.match(/\s*\w* AS (\w*)/i)[1];}_8e7[_8ec]=true;});_8e9=_8e8.exec(sql);}}return _8e7;},_decryptSingleColumn:function(_8ed,_8ee,_8ef,_8f0,_8f1){_8b2.sql._crypto.decrypt(_8ee,_8ef,dojo.hitch(this,function(_8f2){this._finalResultSet[_8f0][_8ed]=_8f2;this._finishedCrypto++;if(this._finishedCrypto>=this._totalCrypto&&this._finishedSpawningCrypto){_8f1(this._finalResultSet);}}));}});(function(){var _8f3=_8b2.sql;_8b2.sql=new Function("return dojox.sql._exec(arguments);");dojo.mixin(_8b2.sql,_8f3);})();});},"dojox/timing/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang"],function(dojo){dojo.experimental("dojox.timing");dojo.getObject("timing",true,dojox);dojox.timing.Timer=function(_8f4){this.timer=null;this.isRunning=false;this.interval=_8f4;this.onStart=null;this.onStop=null;};dojo.extend(dojox.timing.Timer,{onTick:function(){},setInterval:function(_8f5){if(this.isRunning){window.clearInterval(this.timer);}this.interval=_8f5;if(this.isRunning){this.timer=window.setInterval(dojo.hitch(this,"onTick"),this.interval);}},start:function(){if(typeof this.onStart=="function"){this.onStart();}this.isRunning=true;this.timer=window.setInterval(dojo.hitch(this,"onTick"),this.interval);},stop:function(){if(typeof this.onStop=="function"){this.onStop();}this.isRunning=false;window.clearInterval(this.timer);}});return dojox.timing;});},"dijit/form/CheckBox":function(){define(["require","dojo/_base/declare","dojo/dom-attr","dojo/has","dojo/query","dojo/ready","./ToggleButton","./_CheckBoxMixin","dojo/text!./templates/CheckBox.html","dojo/NodeList-dom","../a11yclick"],function(_8f6,_8f7,_8f8,has,_8f9,_8fa,_8fb,_8fc,_8fd){if(has("dijit-legacy-requires")){_8fa(0,function(){var _8fe=["dijit/form/RadioButton"];_8f6(_8fe);});}return _8f7("dijit.form.CheckBox",[_8fb,_8fc],{templateString:_8fd,baseClass:"dijitCheckBox",_setValueAttr:function(_8ff,_900){if(typeof _8ff=="string"){this.inherited(arguments);_8ff=true;}if(this._created){this.set("checked",_8ff,_900);}},_getValueAttr:function(){return this.checked&&this._get("value");},_setIconClassAttr:null,_setNameAttr:"focusNode",postMixInProperties:function(){this.inherited(arguments);this.checkedAttrSetting="";},_fillContent:function(){},_onFocus:function(){if(this.id){_8f9("label[for='"+this.id+"']").addClass("dijitFocusedLabel");}this.inherited(arguments);},_onBlur:function(){if(this.id){_8f9("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");}this.inherited(arguments);}});});},"dojox/storage/manager":function(){define(["dijit","dojo","dojox"],function(_901,dojo,_902){dojo.provide("dojox.storage.manager");_902.storage.manager=new function(){this.currentProvider=null;this.available=false;this.providers=[];this._initialized=false;this._onLoadListeners=[];this.initialize=function(){this.autodetect();};this.register=function(name,_903){this.providers.push(_903);this.providers[name]=_903;};this.setProvider=function(_904){};this.autodetect=function(){if(this._initialized){return;}var _905=dojo.config["forceStorageProvider"]||false;var _906;for(var i=0;i<this.providers.length;i++){_906=this.providers[i];if(_905&&_905==_906.declaredClass){_906.isAvailable();break;}else{if(!_905&&_906.isAvailable()){break;}}}if(!_906){this._initialized=true;this.available=false;this.currentProvider=null;this.loaded();return;}this.currentProvider=_906;dojo.mixin(_902.storage,this.currentProvider);_902.storage.initialize();this._initialized=true;this.available=true;};this.isAvailable=function(){return this.available;};this.addOnLoad=function(func){this._onLoadListeners.push(func);if(this.isInitialized()){this._fireLoaded();}};this.removeOnLoad=function(func){for(var i=0;i<this._onLoadListeners.length;i++){if(func==this._onLoadListeners[i]){this._onLoadListeners.splice(i,1);break;}}};this.isInitialized=function(){if(this.currentProvider!=null&&this.currentProvider.declaredClass=="dojox.storage.FlashStorageProvider"&&_902.flash.ready==false){return false;}else{return this._initialized;}};this.supportsProvider=function(_907){try{var _908=eval("new "+_907+"()");var _909=_908.isAvailable();if(!_909){return false;}return _909;}catch(e){return false;}};this.getProvider=function(){return this.currentProvider;};this.loaded=function(){this._fireLoaded();};this._fireLoaded=function(){dojo.forEach(this._onLoadListeners,function(i){try{i();}catch(e){}});};this.getResourceList=function(){var _90a=[];dojo.forEach(_902.storage.manager.providers,function(_90b){_90a=_90a.concat(_90b.getResourceList());});return _90a;};};});},"dijit/tree/_dndSelector":function(){define(["dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/dom","dojo/mouse","dojo/on","dojo/touch","../a11yclick","./_dndContainer"],function(_90c,_90d,_90e,_90f,lang,dom,_910,on,_911,_912,_913){return _90e("dijit.tree._dndSelector",_913,{constructor:function(){this.selection={};this.anchor=null;this.events.push(on(this.tree.domNode,_911.press,lang.hitch(this,"onMouseDown")),on(this.tree.domNode,_911.release,lang.hitch(this,"onMouseUp")),on(this.tree.domNode,_911.move,lang.hitch(this,"onMouseMove")),on(this.tree.domNode,_912.press,lang.hitch(this,"onClickPress")),on(this.tree.domNode,_912.release,lang.hitch(this,"onClickRelease")));},singular:false,getSelectedTreeNodes:function(){var _914=[],sel=this.selection;for(var i in sel){_914.push(sel[i]);}return _914;},selectNone:function(){this.setSelection([]);return this;},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null;},addTreeNode:function(node,_915){this.setSelection(this.getSelectedTreeNodes().concat([node]));if(_915){this.anchor=node;}return node;},removeTreeNode:function(node){var _916=_90c.filter(this.getSelectedTreeNodes(),function(_917){return !dom.isDescendant(_917.domNode,node.domNode);});this.setSelection(_916);return node;},isTreeNodeSelected:function(node){return node.id&&!!this.selection[node.id];},setSelection:function(_918){var _919=this.getSelectedTreeNodes();_90c.forEach(this._setDifference(_919,_918),lang.hitch(this,function(node){node.setSelected(false);if(this.anchor==node){delete this.anchor;}delete this.selection[node.id];}));_90c.forEach(this._setDifference(_918,_919),lang.hitch(this,function(node){node.setSelected(true);this.selection[node.id]=node;}));this._updateSelectionProperties();},_setDifference:function(xs,ys){_90c.forEach(ys,function(y){y.__exclude__=true;});var ret=_90c.filter(xs,function(x){return !x.__exclude__;});_90c.forEach(ys,function(y){delete y["__exclude__"];});return ret;},_updateSelectionProperties:function(){var _91a=this.getSelectedTreeNodes();var _91b=[],_91c=[],_91d=[];_90c.forEach(_91a,function(node){var ary=node.getTreePath(),_91e=this.tree.model;_91c.push(node);_91b.push(ary);ary=_90c.map(ary,function(item){return _91e.getIdentity(item);},this);_91d.push(ary.join("/"));},this);var _91f=_90c.map(_91c,function(node){return node.item;});this.tree._set("paths",_91b);this.tree._set("path",_91b[0]||[]);this.tree._set("selectedNodes",_91c);this.tree._set("selectedNode",_91c[0]||null);this.tree._set("selectedItems",_91f);this.tree._set("selectedItem",_91f[0]||null);},onClickPress:function(e){if(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(e.target,this.current)){return;}if(_910.isLeft(e)){e.preventDefault();}var _920=e.type=="keydown"?this.tree.focusedChild:this.current;if(!_920){return;}var copy=_90d.isCopyKey(e),id=_920.id;if(!this.singular&&!e.shiftKey&&this.selection[id]){this._doDeselect=true;return;}else{this._doDeselect=false;}this.userSelect(_920,copy,e.shiftKey);},onClickRelease:function(e){if(!this._doDeselect){return;}this._doDeselect=false;this.userSelect(e.type=="keyup"?this.tree.focusedChild:this.current,_90d.isCopyKey(e),e.shiftKey);},onMouseMove:function(){this._doDeselect=false;},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(n1,n2){if(n1===n2){return 0;}if("sourceIndex" in document.documentElement){return n1.sourceIndex-n2.sourceIndex;}else{if("compareDocumentPosition" in document.documentElement){return n1.compareDocumentPosition(n2)&2?1:-1;}else{if(document.createRange){var r1=doc.createRange();r1.setStartBefore(n1);var r2=doc.createRange();r2.setStartBefore(n2);return r1.compareBoundaryPoints(r1.END_TO_END,r2);}else{throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");}}}},userSelect:function(node,_921,_922){if(this.singular){if(this.anchor==node&&_921){this.selectNone();}else{this.setSelection([node]);this.anchor=node;}}else{if(_922&&this.anchor){var cr=this._compareNodes(this.anchor.rowNode,node.rowNode),_923,end,_924=this.anchor;if(cr<0){_923=_924;end=node;}else{_923=node;end=_924;}var _925=[];while(_923!=end){_925.push(_923);_923=this.tree._getNext(_923);}_925.push(end);this.setSelection(_925);}else{if(this.selection[node.id]&&_921){this.removeTreeNode(node);}else{if(_921){this.addTreeNode(node,true);}else{this.setSelection([node]);this.anchor=node;}}}}},getItem:function(key){var _926=this.selection[key];return {data:_926,type:["treeNode"]};},forInSelectedItems:function(f,o){o=o||_90f.global;for(var id in this.selection){f.call(o,this.getItem(id),id,this);}}});});},"dojox/flash/_base":function(){define(["dijit","dojo","dojox","dojo/require!dojo/window"],function(_927,dojo,_928){dojo.provide("dojox.flash._base");dojo.experimental("dojox.flash");dojo.require("dojo.window");_928.flash={ready:false,url:null,_visible:true,_loadedListeners:[],_installingListeners:[],setSwf:function(url,_929){this.url=url;this._visible=true;if(_929!==null&&_929!==undefined){this._visible=_929;}this._initialize();},addLoadedListener:function(_92a){this._loadedListeners.push(_92a);},addInstallingListener:function(_92b){this._installingListeners.push(_92b);},loaded:function(){_928.flash.ready=true;if(_928.flash._loadedListeners.length){for(var i=0;i<_928.flash._loadedListeners.length;i++){_928.flash._loadedListeners[i].call(null);}}},installing:function(){if(_928.flash._installingListeners.length){for(var i=0;i<_928.flash._installingListeners.length;i++){_928.flash._installingListeners[i].call(null);}}},_initialize:function(){var _92c=new _928.flash.Install();_928.flash.installer=_92c;if(_92c.needed()){_92c.install();}else{_928.flash.obj=new _928.flash.Embed(this._visible);_928.flash.obj.write();_928.flash.comm=new _928.flash.Communicator();}}};_928.flash.Info=function(){this._detectVersion();};_928.flash.Info.prototype={version:-1,versionMajor:-1,versionMinor:-1,versionRevision:-1,capable:false,installing:false,isVersionOrAbove:function(_92d,_92e,_92f){_92f=parseFloat("."+_92f);if(this.versionMajor>=_92d&&this.versionMinor>=_92e&&this.versionRevision>=_92f){return true;}else{return false;}},_detectVersion:function(){var _930;for(var _931=25;_931>0;_931--){if(dojo.isIE){var axo;try{if(_931>6){axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_931);}else{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}if(typeof axo=="object"){if(_931==6){axo.AllowScriptAccess="always";}_930=axo.GetVariable("$version");}}catch(e){continue;}}else{_930=this._JSFlashInfo(_931);}if(_930==-1){this.capable=false;return;}else{if(_930!=0){var _932;if(dojo.isIE){var _933=_930.split(" ");var _934=_933[1];_932=_934.split(",");}else{_932=_930.split(".");}this.versionMajor=_932[0];this.versionMinor=_932[1];this.versionRevision=_932[2];var _935=this.versionMajor+"."+this.versionRevision;this.version=parseFloat(_935);this.capable=true;break;}}}},_JSFlashInfo:function(_936){if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var _937=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"";var _938=navigator.plugins["Shockwave Flash"+_937].description;var _939=_938.split(" ");var _93a=_939[2].split(".");var _93b=_93a[0];var _93c=_93a[1];var _93d=(_939[3]||_939[4]).split("r");var _93e=_93d[1]>0?_93d[1]:0;var _93f=_93b+"."+_93c+"."+_93e;return _93f;}}return -1;}};_928.flash.Embed=function(_940){this._visible=_940;};_928.flash.Embed.prototype={width:215,height:138,id:"flashObject",_visible:true,protocol:function(){switch(window.location.protocol){case "https:":return "https";break;default:return "http";break;}},write:function(_941){var _942;var _943=_928.flash.url;var _944=_943;var _945=_943;var _946=dojo.baseUrl;var _947=document.location.protocol+"//"+document.location.host;if(_941){var _948=escape(window.location);document.title=document.title.slice(0,47)+" - Flash Player Installation";var _949=escape(document.title);_944+="?MMredirectURL="+_948+"&MMplayerType=ActiveX"+"&MMdoctitle="+_949+"&baseUrl="+escape(_946)+"&xdomain="+escape(_947);_945+="?MMredirectURL="+_948+"&MMplayerType=PlugIn"+"&baseUrl="+escape(_946)+"&xdomain="+escape(_947);}else{_944+="?cachebust="+new Date().getTime();_944+="&baseUrl="+escape(_946);_944+="&xdomain="+escape(_947);}if(_945.indexOf("?")==-1){_945+="?baseUrl="+escape(_946);}else{_945+="&baseUrl="+escape(_946);}_945+="&xdomain="+escape(_947);_942="<object classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" "+"codebase=\""+this.protocol()+"://fpdownload.macromedia.com/pub/shockwave/cabs/flash/"+"swflash.cab#version=8,0,0,0\"\n "+"width=\""+this.width+"\"\n "+"height=\""+this.height+"\"\n "+"id=\""+this.id+"\"\n "+"name=\""+this.id+"\"\n "+"align=\"middle\">\n "+"<param name=\"allowScriptAccess\" value=\"always\"></param>\n "+"<param name=\"movie\" value=\""+_944+"\"></param>\n "+"<param name=\"quality\" value=\"high\"></param>\n "+"<param name=\"bgcolor\" value=\"#ffffff\"></param>\n "+"<embed src=\""+_945+"\" "+"quality=\"high\" "+"bgcolor=\"#ffffff\" "+"width=\""+this.width+"\" "+"height=\""+this.height+"\" "+"id=\""+this.id+"Embed"+"\" "+"name=\""+this.id+"\" "+"swLiveConnect=\"true\" "+"align=\"middle\" "+"allowScriptAccess=\"always\" "+"type=\"application/x-shockwave-flash\" "+"pluginspage=\""+this.protocol()+"://www.macromedia.com/go/getflashplayer\" "+"></embed>\n"+"</object>\n";dojo.connect(dojo,"loaded",dojo.hitch(this,function(){var _94a=this.id+"Container";if(dojo.byId(_94a)){return;}var div=document.createElement("div");div.id=this.id+"Container";div.style.width=this.width+"px";div.style.height=this.height+"px";if(!this._visible){div.style.position="absolute";div.style.zIndex="10000";div.style.top="-1000px";}div.innerHTML=_942;var body=document.getElementsByTagName("body");if(!body||!body.length){throw new Error("No body tag for this page");}body=body[0];body.appendChild(div);}));},get:function(){if(dojo.isIE||dojo.isWebKit){return dojo.byId(this.id);}else{return document[this.id+"Embed"];}},setVisible:function(_94b){var _94c=dojo.byId(this.id+"Container");if(_94b){_94c.style.position="absolute";_94c.style.visibility="visible";}else{_94c.style.position="absolute";_94c.style.y="-1000px";_94c.style.visibility="hidden";}},center:function(){var _94d=this.width;var _94e=this.height;var _94f=dojo.window.getBox();var x=_94f.l+(_94f.w-_94d)/2;var y=_94f.t+(_94f.h-_94e)/2;var _950=dojo.byId(this.id+"Container");_950.style.top=y+"px";_950.style.left=x+"px";}};_928.flash.Communicator=function(){};_928.flash.Communicator.prototype={_addExternalInterfaceCallback:function(_951){var _952=dojo.hitch(this,function(){var _953=new Array(arguments.length);for(var i=0;i<arguments.length;i++){_953[i]=this._encodeData(arguments[i]);}var _954=this._execFlash(_951,_953);_954=this._decodeData(_954);return _954;});this[_951]=_952;},_encodeData:function(data){if(!data||typeof data!="string"){return data;}data=data.replace("\\","&custom_backslash;");data=data.replace(/\0/g,"&custom_null;");return data;},_decodeData:function(data){if(data&&data.length&&typeof data!="string"){data=data[0];}if(!data||typeof data!="string"){return data;}data=data.replace(/\&custom_null\;/g,"\x00");data=data.replace(/\&custom_lt\;/g,"<").replace(/\&custom_gt\;/g,">").replace(/\&custom_backslash\;/g,"\\");return data;},_execFlash:function(_955,_956){var _957=_928.flash.obj.get();_956=(_956)?_956:[];for(var i=0;i<_956;i++){if(typeof _956[i]=="string"){_956[i]=this._encodeData(_956[i]);}}var _958=function(){return eval(_957.CallFunction("<invoke name=\""+_955+"\" returntype=\"javascript\">"+__flash__argumentsToXML(_956,0)+"</invoke>"));};var _959=_958.call(_956);if(typeof _959=="string"){_959=this._decodeData(_959);}return _959;}};_928.flash.Install=function(){};_928.flash.Install.prototype={needed:function(){if(!_928.flash.info.capable){return true;}if(!_928.flash.info.isVersionOrAbove(8,0,0)){return true;}return false;},install:function(){var _95a;_928.flash.info.installing=true;_928.flash.installing();if(_928.flash.info.capable==false){_95a=new _928.flash.Embed(false);_95a.write();}else{if(_928.flash.info.isVersionOrAbove(6,0,65)){_95a=new _928.flash.Embed(false);_95a.write(true);_95a.setVisible(true);_95a.center();}else{alert("This content requires a more recent version of the Macromedia "+" Flash Player.");window.location.href=+_928.flash.Embed.protocol()+"://www.macromedia.com/go/getflashplayer";}}},_onInstallStatus:function(msg){if(msg=="Download.Complete"){_928.flash._initialize();}else{if(msg=="Download.Cancelled"){alert("This content requires a more recent version of the Macromedia "+" Flash Player.");window.location.href=_928.flash.Embed.protocol()+"://www.macromedia.com/go/getflashplayer";}else{if(msg=="Download.Failed"){alert("There was an error downloading the Flash Player update. "+"Please try again later, or visit macromedia.com to download "+"the latest version of the Flash plugin.");}}}}};_928.flash.info=new _928.flash.Info();});},"esriviewer/ui/basemap/model/BasemapGalleryViewModel":function(){define(["dojo/_base/declare"],function(_95b){return _95b([],{constructor:function(){this.visible=ko.observable(false);}});});},"dojo/data/ItemFileReadStore":function(){define(["../_base/kernel","../_base/lang","../_base/declare","../_base/array","../_base/xhr","../Evented","./util/filter","./util/simpleFetch","../date/stamp"],function(_95c,lang,_95d,_95e,xhr,_95f,_960,_961,_962){var _963=_95d("dojo.data.ItemFileReadStore",[_95f],{constructor:function(_964){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=_964.url;this._ccUrl=_964.url;this.url=_964.url;this._jsonData=_964.data;this.data=null;this._datatypeMap=_964.typeMap||{};if(!this._datatypeMap["Date"]){this._datatypeMap["Date"]={type:Date,deserialize:function(_965){return _962.fromISOString(_965);}};}this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(_964.urlPreventCache!==undefined){this.urlPreventCache=_964.urlPreventCache?true:false;}if(_964.hierarchical!==undefined){this.hierarchical=_964.hierarchical?true:false;}if(_964.clearOnClose){this.clearOnClose=true;}if("failOk" in _964){this.failOk=_964.failOk?true:false;}},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,failOk:false,hierarchical:true,_assertIsItem:function(item){if(!this.isItem(item)){throw new Error(this.declaredClass+": Invalid item argument.");}},_assertIsAttribute:function(_966){if(typeof _966!=="string"){throw new Error(this.declaredClass+": Invalid attribute argument.");}},getValue:function(item,_967,_968){var _969=this.getValues(item,_967);return (_969.length>0)?_969[0]:_968;},getValues:function(item,_96a){this._assertIsItem(item);this._assertIsAttribute(_96a);return (item[_96a]||[]).slice(0);},getAttributes:function(item){this._assertIsItem(item);var _96b=[];for(var key in item){if((key!==this._storeRefPropName)&&(key!==this._itemNumPropName)&&(key!==this._rootItemPropName)&&(key!==this._reverseRefMap)){_96b.push(key);}}return _96b;},hasAttribute:function(item,_96c){this._assertIsItem(item);this._assertIsAttribute(_96c);return (_96c in item);},containsValue:function(item,_96d,_96e){var _96f=undefined;if(typeof _96e==="string"){_96f=_960.patternToRegExp(_96e,false);}return this._containsValue(item,_96d,_96e,_96f);},_containsValue:function(item,_970,_971,_972){return _95e.some(this.getValues(item,_970),function(_973){if(_973!==null&&!lang.isObject(_973)&&_972){if(_973.toString().match(_972)){return true;}}else{if(_971===_973){return true;}}});},isItem:function(_974){if(_974&&_974[this._storeRefPropName]===this){if(this._arrayOfAllItems[_974[this._itemNumPropName]]===_974){return true;}}return false;},isItemLoaded:function(_975){return this.isItem(_975);},loadItem:function(_976){this._assertIsItem(_976.item);},getFeatures:function(){return this._features;},getLabel:function(item){if(this._labelAttr&&this.isItem(item)){return this.getValue(item,this._labelAttr);}return undefined;},getLabelAttributes:function(item){if(this._labelAttr){return [this._labelAttr];}return null;},filter:function(_977,_978,_979){var _97a=[],i,key;if(_977.query){var _97b,_97c=_977.queryOptions?_977.queryOptions.ignoreCase:false;var _97d={};for(key in _977.query){_97b=_977.query[key];if(typeof _97b==="string"){_97d[key]=_960.patternToRegExp(_97b,_97c);}else{if(_97b instanceof RegExp){_97d[key]=_97b;}}}for(i=0;i<_978.length;++i){var _97e=true;var _97f=_978[i];if(_97f===null){_97e=false;}else{for(key in _977.query){_97b=_977.query[key];if(!this._containsValue(_97f,key,_97b,_97d[key])){_97e=false;}}}if(_97e){_97a.push(_97f);}}_979(_97a,_977);}else{for(i=0;i<_978.length;++i){var item=_978[i];if(item!==null){_97a.push(item);}}_979(_97a,_977);}},_fetchItems:function(_980,_981,_982){var self=this;if(this._loadFinished){this.filter(_980,this._getItemsArray(_980.queryOptions),_981);}else{if(this._jsonFileUrl!==this._ccUrl){_95c.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_980,filter:lang.hitch(self,"filter"),findCallback:lang.hitch(self,_981)});}else{this._loadInProgress=true;var _983={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _984=xhr.get(_983);_984.addCallback(function(data){try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;self.filter(_980,self._getItemsArray(_980.queryOptions),_981);self._handleQueuedFetches();}catch(e){self._loadFinished=true;self._loadInProgress=false;_982(e,_980);}});_984.addErrback(function(_985){self._loadInProgress=false;_982(_985,_980);});var _986=null;if(_980.abort){_986=_980.abort;}_980.abort=function(){var df=_984;if(df&&df.fired===-1){df.cancel();df=null;}if(_986){_986.call(_980);}};}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;self.filter(_980,this._getItemsArray(_980.queryOptions),_981);}catch(e){_982(e,_980);}}else{_982(new Error(this.declaredClass+": No JSON source data was provided as either URL or a nested Javascript object."),_980);}}}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var i=0;i<this._queuedFetches.length;i++){var _987=this._queuedFetches[i],_988=_987.args,_989=_987.filter,_98a=_987.findCallback;if(_989){_989(_988,this._getItemsArray(_988.queryOptions),_98a);}else{this.fetchItemByIdentity(_988);}}this._queuedFetches=[];}},_getItemsArray:function(_98b){if(_98b&&_98b.deep){return this._arrayOfAllItems;}return this._arrayOfTopLevelItems;},close:function(_98c){if(this.clearOnClose&&this._loadFinished&&!this._loadInProgress){if(((this._jsonFileUrl==""||this._jsonFileUrl==null)&&(this.url==""||this.url==null))&&this.data==null){}this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[];}},_getItemsFromLoadedData:function(_98d){var _98e=false,self=this;function _98f(_990){return (_990!==null)&&(typeof _990==="object")&&(!lang.isArray(_990)||_98e)&&(!lang.isFunction(_990))&&(_990.constructor==Object||lang.isArray(_990))&&(typeof _990._reference==="undefined")&&(typeof _990._type==="undefined")&&(typeof _990._value==="undefined")&&self.hierarchical;};function _991(_992){self._arrayOfAllItems.push(_992);for(var _993 in _992){var _994=_992[_993];if(_994){if(lang.isArray(_994)){var _995=_994;for(var k=0;k<_995.length;++k){var _996=_995[k];if(_98f(_996)){_991(_996);}}}else{if(_98f(_994)){_991(_994);}}}}};this._labelAttr=_98d.label;var i,item;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=_98d.items;for(i=0;i<this._arrayOfTopLevelItems.length;++i){item=this._arrayOfTopLevelItems[i];if(lang.isArray(item)){_98e=true;}_991(item);item[this._rootItemPropName]=true;}var _997={},key;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){if(key!==this._rootItemPropName){var _998=item[key];if(_998!==null){if(!lang.isArray(_998)){item[key]=[_998];}}else{item[key]=[null];}}_997[key]=key;}}while(_997[this._storeRefPropName]){this._storeRefPropName+="_";}while(_997[this._itemNumPropName]){this._itemNumPropName+="_";}while(_997[this._reverseRefMap]){this._reverseRefMap+="_";}var _999;var _99a=_98d.identifier;if(_99a){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=_99a;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];_999=item[_99a];var _99b=_999[0];if(!Object.hasOwnProperty.call(this._itemsByIdentity,_99b)){this._itemsByIdentity[_99b]=item;}else{if(this._jsonFileUrl){throw new Error(this.declaredClass+":  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+_99a+"].  Value collided: ["+_99b+"]");}else{if(this._jsonData){throw new Error(this.declaredClass+":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+_99a+"].  Value collided: ["+_99b+"]");}}}}}else{this._features["dojo.data.api.Identity"]=Number;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];item[this._storeRefPropName]=this;item[this._itemNumPropName]=i;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){_999=item[key];for(var j=0;j<_999.length;++j){_998=_999[j];if(_998!==null&&typeof _998=="object"){if(("_type" in _998)&&("_value" in _998)){var type=_998._type;var _99c=this._datatypeMap[type];if(!_99c){throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+type+"'");}else{if(lang.isFunction(_99c)){_999[j]=new _99c(_998._value);}else{if(lang.isFunction(_99c.deserialize)){_999[j]=_99c.deserialize(_998._value);}else{throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");}}}}if(_998._reference){var _99d=_998._reference;if(!lang.isObject(_99d)){_999[j]=this._getItemByIdentity(_99d);}else{for(var k=0;k<this._arrayOfAllItems.length;++k){var _99e=this._arrayOfAllItems[k],_99f=true;for(var _9a0 in _99d){if(_99e[_9a0]!=_99d[_9a0]){_99f=false;}}if(_99f){_999[j]=_99e;}}}if(this.referenceIntegrity){var _9a1=_999[j];if(this.isItem(_9a1)){this._addReferenceToMap(_9a1,item,key);}}}else{if(this.isItem(_998)){if(this.referenceIntegrity){this._addReferenceToMap(_998,item,key);}}}}}}}},_addReferenceToMap:function(_9a2,_9a3,_9a4){},getIdentity:function(item){var _9a5=this._features["dojo.data.api.Identity"];if(_9a5===Number){return item[this._itemNumPropName];}else{var _9a6=item[_9a5];if(_9a6){return _9a6[0];}}return null;},fetchItemByIdentity:function(_9a7){var item,_9a8;if(!this._loadFinished){var self=this;if(this._jsonFileUrl!==this._ccUrl){_95c.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_9a7});}else{this._loadInProgress=true;var _9a9={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _9aa=xhr.get(_9a9);_9aa.addCallback(function(data){var _9ab=_9a7.scope?_9a7.scope:_95c.global;try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;item=self._getItemByIdentity(_9a7.identity);if(_9a7.onItem){_9a7.onItem.call(_9ab,item);}self._handleQueuedFetches();}catch(error){self._loadInProgress=false;if(_9a7.onError){_9a7.onError.call(_9ab,error);}}});_9aa.addErrback(function(_9ac){self._loadInProgress=false;if(_9a7.onError){var _9ad=_9a7.scope?_9a7.scope:_95c.global;_9a7.onError.call(_9ad,_9ac);}});}}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;item=self._getItemByIdentity(_9a7.identity);if(_9a7.onItem){_9a8=_9a7.scope?_9a7.scope:_95c.global;_9a7.onItem.call(_9a8,item);}}}}else{item=this._getItemByIdentity(_9a7.identity);if(_9a7.onItem){_9a8=_9a7.scope?_9a7.scope:_95c.global;_9a7.onItem.call(_9a8,item);}}},_getItemByIdentity:function(_9ae){var item=null;if(this._itemsByIdentity){if(Object.hasOwnProperty.call(this._itemsByIdentity,_9ae)){item=this._itemsByIdentity[_9ae];}}else{if(Object.hasOwnProperty.call(this._arrayOfAllItems,_9ae)){item=this._arrayOfAllItems[_9ae];}}if(item===undefined){item=null;}return item;},getIdentityAttributes:function(item){var _9af=this._features["dojo.data.api.Identity"];if(_9af===Number){return null;}else{return [_9af];}},_forceLoad:function(){var self=this;if(this._jsonFileUrl!==this._ccUrl){_95c.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){var _9b0={url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:true};var _9b1=xhr.get(_9b0);_9b1.addCallback(function(data){try{if(self._loadInProgress!==true&&!self._loadFinished){self._getItemsFromLoadedData(data);self._loadFinished=true;}else{if(self._loadInProgress){throw new Error(this.declaredClass+":  Unable to perform a synchronous load, an async load is in progress.");}}}catch(e){throw e;}});_9b1.addErrback(function(_9b2){throw _9b2;});}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;}}}});lang.extend(_963,_961);return _963;});},"dijit/_PaletteMixin":function(){define(["dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/keys","dojo/_base/lang","dojo/on","./_CssStateMixin","./a11yclick","./focus","./typematic"],function(_9b3,_9b4,_9b5,_9b6,keys,lang,on,_9b7,_9b8,_9b9,_9ba){var _9bb=_9b3("dijit._PaletteMixin",_9b7,{defaultTimeout:500,timeoutChangeRate:0.9,value:"",_selectedCell:-1,tabIndex:"0",cellClass:"dijitPaletteCell",dyeClass:null,_dyeFactory:function(_9bc){var _9bd=typeof this.dyeClass=="string"?lang.getObject(this.dyeClass):this.dyeClass;return new _9bd(_9bc);},_preparePalette:function(_9be,_9bf){this._cells=[];var url=this._blankGif;this.own(on(this.gridNode,_9b8,lang.hitch(this,"_onCellClick")));for(var row=0;row<_9be.length;row++){var _9c0=_9b6.create("tr",{tabIndex:"-1",role:"row"},this.gridNode);for(var col=0;col<_9be[row].length;col++){var _9c1=_9be[row][col];if(_9c1){var _9c2=this._dyeFactory(_9c1,row,col,_9bf[_9c1]);var _9c3=_9b6.create("td",{"class":this.cellClass,tabIndex:"-1",title:_9bf[_9c1],role:"gridcell"},_9c0);_9c2.fillCell(_9c3,url);_9c3.idx=this._cells.length;this._cells.push({node:_9c3,dye:_9c2});}}}this._xDim=_9be[0].length;this._yDim=_9be.length;var _9c4={UP_ARROW:-this._xDim,DOWN_ARROW:this._xDim,RIGHT_ARROW:this.isLeftToRight()?1:-1,LEFT_ARROW:this.isLeftToRight()?-1:1};for(var key in _9c4){this.own(_9ba.addKeyListener(this.domNode,{keyCode:keys[key],ctrlKey:false,altKey:false,shiftKey:false},this,function(){var _9c5=_9c4[key];return function(_9c6){this._navigateByKey(_9c5,_9c6);};}(),this.timeoutChangeRate,this.defaultTimeout));}},postCreate:function(){this.inherited(arguments);this._setCurrent(this._cells[0].node);},focus:function(){_9b9.focus(this._currentFocus);},_onCellClick:function(evt){var _9c7=evt.target;while(_9c7.tagName!="TD"){if(!_9c7.parentNode||_9c7==this.gridNode){return;}_9c7=_9c7.parentNode;}var _9c8=this._getDye(_9c7).getValue();this._setCurrent(_9c7);_9b9.focus(_9c7);this._setValueAttr(_9c8,true);evt.stopPropagation();evt.preventDefault();},_setCurrent:function(node){if("_currentFocus" in this){_9b4.set(this._currentFocus,"tabIndex","-1");}this._currentFocus=node;if(node){_9b4.set(node,"tabIndex",this.tabIndex);}},_setValueAttr:function(_9c9,_9ca){if(this._selectedCell>=0){_9b5.remove(this._cells[this._selectedCell].node,this.cellClass+"Selected");}this._selectedCell=-1;if(_9c9){for(var i=0;i<this._cells.length;i++){if(_9c9==this._cells[i].dye.getValue()){this._selectedCell=i;_9b5.add(this._cells[i].node,this.cellClass+"Selected");break;}}}this._set("value",this._selectedCell>=0?_9c9:null);if(_9ca||_9ca===undefined){this.onChange(_9c9);}},onChange:function(){},_navigateByKey:function(_9cb,_9cc){if(_9cc==-1){return;}var _9cd=this._currentFocus.idx+_9cb;if(_9cd<this._cells.length&&_9cd>-1){var _9ce=this._cells[_9cd].node;this._setCurrent(_9ce);this.defer(lang.hitch(_9b9,"focus",_9ce));}},_getDye:function(cell){return this._cells[cell.idx].dye;}});return _9bb;});},"esriviewer/base/Configurable":function(){define(["dojo/_base/declare","dojo/_base/xhr","dojo/_base/lang","./DataLoaderSupport"],function(_9cf,xhr,lang,_9d0){return _9cf([_9d0],{configUrl:"",loadConfig:function(){xhr.get({url:this.configUrl,handleAs:"json",load:lang.hitch(this,this.handleConfigLoaded),error:lang.hitch(this,this.handleConfigLoadError)});},loadProxiedConfig:function(){this.loadProxiedJson(this.configUrl,lang.hitch(this,this.handleConfigLoaded),lang.hitch(this,this.handleConfigLoadError));},handleConfigLoaded:function(_9d1){},handleConfigLoadError:function(err){}});});},"esriviewer/util/ViewerUtils":function(){define(["dojo/_base/declare","dojo/window","dojo/keys","dojo/_base/lang","dojo/dom-style","dojox/uuid/Uuid","dojox/uuid/generateTimeBasedUuid","dojo/Deferred","dojo/topic","esri/request"],function(_9d2,_9d3,keys,lang,_9d4,Uuid,_9d5,_9d6,_9d7,_9d8){return _9d2([],{isDebug:false,constructor:function(_9d9){this.html5UploadSupported=window.File&&window.FileReader&&window.FileList&&window.Blob;lang.mixin(this,_9d9||{});Uuid.setGenerator(_9d5);},isHtml5FileUploadSupported:function(){return this.html5UploadSupported;},debug:function(_9da){if(this.isDebug){this.log(_9da,VIEWER_GLOBALS.LOG_TYPE.INFO);}},log:function(_9db,type){if(_9db==null||_9db===""){return;}_9d7.publish(VIEWER_GLOBALS.EVENTS.LOGGING.ADD,_9db,type);},handleContainerMoved:function(_9dc,_9dd){var _9de=false;var _9df=false;if(_9dd.l<3){_9d4.set(_9dc.node,"left","3px");_9de=true;}var _9e0=(VIEWER_GLOBALS.WINDOW&&VIEWER_GLOBALS.WINDOW.TOP_POSITION_MOVE_OFFSET)?(VIEWER_GLOBALS.WINDOW.TOP_POSITION_MOVE_OFFSET):3;if(_9dd.t<_9e0){_9d4.set(_9dc.node,"top",_9e0+"px");_9df=true;}if(_9de&&_9df){return;}var _9e1=_9d3.getBox();if(!_9de){var _9e2=_9d4.get(_9dc.node,"width");var _9e3=_9d4.get(_9dc.node,"left");var _9e4=_9e3+_9e2;if(_9e4>(_9e1.w-3)){_9d4.set(_9dc.node,"left",(_9e1.w-_9e2-3)+"px");}}if(!_9df){var _9e5=_9d4.get(_9dc.node,"height");var _9e6=_9d4.get(_9dc.node,"top");var _9e7=_9e6+_9e5;if(_9e7>(_9e1.h-5)){_9d4.set(_9dc.node,"top",(_9e1.h-_9e5-5)+"px");}}},generateUUID:function(){var uuid=new Uuid();return uuid.toString();},getTimeStamp:function(){var date=new Date();var _9e8=date.getHours();if(_9e8<12){if(_9e8==0){_9e8=12;}}else{if(_9e8!=12){_9e8=_9e8-12;}}_9e8=_9e8.toString();if(_9e8.length<2){_9e8="0"+_9e8;}var _9e9=date.getMinutes().toString();if(_9e9.length<2){_9e9="0"+_9e9;}var _9ea=date.getSeconds().toString();if(_9ea.length<2){_9ea="0"+_9ea;}return _9e8+":"+_9e9+":"+_9ea;},sendJsonPQuery:function(url,_9eb,_9ec,_9ed,_9ee){if(_9ed==null){_9ed=lang.hitch(this,function(_9ef){var msg="Could not resource : "+url+". Please verify URL is accessible.";VIEWER_UTILS.log(msg,VIEWER_GLOBALS.LOG_TYPE.ERROR);_9d7.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,msg);});}if(_9ee==null){_9ee="callback";}var _9f0={callbackParamName:_9ee,content:_9eb,url:url};_9d8(_9f0).then(_9ec,_9ed);},isEnterKey:function(e){return e.keyCode==keys.ENTER;},joinUrl:function(url,_9f1){var _9f2=url.lastIndexOf("/")==url.length-1;if(!_9f2){url+="/";}if(_9f1[0]==="/"){_9f1=_9f1.substring(1);}return url+_9f1;},getLayerInfoFromService:function(_9f3,_9f4,_9f5,_9f6){if(_9f6==null){_9f6="callback";}var _9f7=lang.hitch(this,function(_9f8){var msg="could not load layer from service: "+_9f9;VIEWER_UTILS.log(msg,VIEWER_GLOBALS.LOG_TYPE.ERROR);_9d7.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,msg);});if(_9f3!=null&&_9f4!=null&&_9f5){var _9f9=_9f3+"/"+_9f4;}var _9fa={callbackParamName:_9f6,content:{f:"json"},url:_9f9};_9d8(_9fa).then(_9f5,_9f7);},endsWith:function(_9fb,_9fc){var _9fd=_9fb.lastIndexOf(_9fc);return (_9fd!=-1)&&(_9fd+_9fc.length==_9fb.length);},getFileExtension:function(_9fe){var _9ff=_9fe.lastIndexOf(".");if(_9ff<0||_9ff===_9fe.length-1){return "";}return _9fe.substr(_9ff+1);},getFileExtensionLower:function(_a00){return this.getFileExtension(_a00).toLowerCase();},getServiceTypeFromUrl:function(url){if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER;}else{if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER;}else{if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GP_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GP_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.GP_SERVER;}else{if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GLOBE_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GLOBE_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.GLOBE_SERVER;}else{if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GEOCODE_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GEOCODE_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.GEOCODE_SERVER;}else{if(REG_EXP_UTILS.isKMLExtension(url)){return VIEWER_GLOBALS.SERVICE_TYPES.KML;}else{if(REG_EXP_UTILS.isFeatureLayer(url)){return VIEWER_GLOBALS.SERVICE_TYPES.FEATURE_SERVER;}else{return null;}}}}}}}},getServiceDescription:function(_a01,_a02,_a03,_a04){if(_a04==null){_a04="callback";}if(_a03==null){_a03=lang.hitch(this,function(_a05){var msg="Could not load service description for : "+_a01+". Please verify service is online.";});}if(_a01!=null&&_a02){var _a06={callbackParamName:_a04,content:{f:"json"},url:_a01};_9d8(_a06).then(_a02,_a03);}},getLayerNameFromLayer:function(_a07){if(_a07.layerAliasName!=null&&_a07.layerAliasName!=""){return _a07.layerAliasName;}else{if(_a07.name!=null&&_a07.name!=""){return _a07.name;}else{if(_a07.id!=null){return _a07.id;}else{if(_a07.url!=null){return _a07.url;}}}}return "Layer";},getLabelForEsriUnit:function(_a08){if(_a08===VIEWER_GLOBALS.ESRI_UNITS.METERS){return "meters";}else{if(_a08===VIEWER_GLOBALS.ESRI_UNITS.FEET){return "feet";}else{if(_a08===VIEWER_GLOBALS.ESRI_UNITS.YARDS){return "yards";}else{if(_a08===VIEWER_GLOBALS.ESRI_UNITS.MILES){return "miles";}else{if(_a08===VIEWER_GLOBALS.ESRI_UNITS.NAUTICAL_MILES){return "nautical miles";}else{if(_a08===VIEWER_GLOBALS.ESRI_UNITS.MILLIMETERS){return "millimeters";}else{if(_a08===VIEWER_GLOBALS.ESRI_UNITS.CENTIMETERS){return "centimeters";}else{if(_a08===VIEWER_GLOBALS.ESRI_UNITS.DECIMETERS){return "decimeters";}else{if(_a08===VIEWER_GLOBALS.ESRI_UNITS.KILOMETERS){return "kilometers";}else{if(_a08===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_MILES){return "square miles";}else{if(_a08===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_METERS){return "square meters";}else{if(_a08===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_KILOMETERS){return "square kilometers";}else{if(_a08===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_ARES){return "square ares";}else{if(_a08===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_HECTARES){return "square hectares";}else{if(_a08===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_CENTIMETERS){return "square centimeters";}else{if(_a08===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_DECIMETERS){return "square decimeters";}else{if(_a08===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_FEET){return "square feet";}else{if(_a08===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_INCHES){return "square inches";}else{if(_a08===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_MILLIMETERS){return "square millimeters";}else{if(_a08===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_YARDS){return "square yards";}else{if(_a08===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_UNKNOWN){return "square unknown";}else{if(_a08===VIEWER_GLOBALS.ESRI_UNITS.DECIMAL_DEGREES){return "decimal degrees";}}}}}}}}}}}}}}}}}}}}}}return "unknown";},getShortLabelForEsriUnit:function(_a09){if(_a09===VIEWER_GLOBALS.ESRI_UNITS.METERS){return "m";}else{if(_a09===VIEWER_GLOBALS.ESRI_UNITS.FEET){return "f";}else{if(_a09===VIEWER_GLOBALS.ESRI_UNITS.YARDS){return "y";}else{if(_a09===VIEWER_GLOBALS.ESRI_UNITS.MILES){return "M";}else{if(_a09===VIEWER_GLOBALS.ESRI_UNITS.NAUTICAL_MILES){return "NM";}else{if(_a09===VIEWER_GLOBALS.ESRI_UNITS.MILLIMETERS){return "mm";}else{if(_a09===VIEWER_GLOBALS.ESRI_UNITS.CENTIMETERS){return "cm";}else{if(_a09===VIEWER_GLOBALS.ESRI_UNITS.DECIMETERS){return "dm";}else{if(_a09===VIEWER_GLOBALS.ESRI_UNITS.KILOMETERS){return "KM";}else{if(_a09===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_MILES){return "square miles";}else{if(_a09===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_METERS){return "Sq m";}else{if(_a09===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_KILOMETERS){return "Sq KM";}else{if(_a09===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_ARES){return "Sq Ares";}else{if(_a09===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_HECTARES){return "Sq Hectares";}else{if(_a09===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_CENTIMETERS){return "Sq cm";}else{if(_a09===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_DECIMETERS){return "Sq dm";}else{if(_a09===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_FEET){return "Sq f";}else{if(_a09===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_INCHES){return "Sq in";}else{if(_a09===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_MILLIMETERS){return "Sq mm";}else{if(_a09===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_YARDS){return "Sq y";}else{if(_a09===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_UNKNOWN){return "Sq unknown";}else{if(_a09===VIEWER_GLOBALS.ESRI_UNITS.DECIMAL_DEGREES){return "Dec. Deg.";}}}}}}}}}}}}}}}}}}}}}}return "Unknown";},getFieldTypeFromLayer:function(_a0a,_a0b){var _a0c=_a0b.fields?_a0b.fields:(_a0b.serviceDescription?_a0b.serviceDescription.fields:[]);if(_a0b&&_a0c&&_a0a){for(var i=0;i<_a0c.length;i++){if(_a0c[i].alias===_a0a||_a0c[i].name===_a0a){return _a0c[i].type;}}}return null;},getFileNameFromAtEndOfUrl:function(_a0d){if(_a0d==null||_a0d.lastIndexOf("/")<0){return "";}_a0d=_a0d.substring(0,(_a0d.indexOf("#")==-1)?_a0d.length:_a0d.indexOf("#"));_a0d=_a0d.substring(0,(_a0d.indexOf("?")==-1)?_a0d.length:_a0d.indexOf("?"));return _a0d.substring(_a0d.lastIndexOf("/")+1,_a0d.length);},getFileNameFromAtEndOfPath:function(_a0e){if(_a0e==null||_a0e.lastIndexOf("\\")<0){return "";}return _a0e.substring(_a0e.lastIndexOf("\\")+1,_a0e.length);},_intSorter:function(a,b){return a-b;},sortIntegerArray:function(arr){return arr.sort(this._intSorter);},validateUrl:function(url){var def=new _9d6();def.resolve(true);return def;},trim:function(str){return str.replace(/^\s*/,"").replace(/\s*$/,"");},getLayerUniqueId:function(_a0f){if(_a0f==null){return null;}if(lang.isString(_a0f)){return _a0f.toLowerCase();}var id;if(_a0f.url){id=_a0f.url.toLowerCase();}else{if(_a0f.id!=null){id=_a0f.id;}else{id="lyr_"+VIEWER_UTILS.generateUUID();_a0f.id=id;}}return id;}});});},"esriviewer/map/base/MapExtentTools":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","esri/geometry/Extent","esri/geometry/Point"],function(_a10,_a11,lang,_a12,_a13){return _a10([],{maxClientZoom:null,extentArray:[],currentExtentIdx:0,extentActionInProgress:false,constructor:function(_a14){lang.mixin(this,_a14);this.initListeners();},initListeners:function(){_a11.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_SPATIAL_REFERENCE,lang.hitch(this,this.handleGetSpatialReference));_a11.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.CHANGED,lang.hitch(this,this.handleBasemapChanged));_a11.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PAN_TO,lang.hitch(this,this.panToPoint));_a11.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.ZOOM_OUT,lang.hitch(this,this.zoomOut));_a11.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_CENTER,lang.hitch(this,this.handleGetCenter));_a11.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,lang.hitch(this,this.handleGetExtent));_a11.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_LEVEL,lang.hitch(this,this.handleGetLevel));_a11.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_LEVEL,lang.hitch(this,this.handleSetLevel));_a11.subscribe(VIEWER_GLOBALS.EVENTS.MAP.DIMENSIONS.GET,lang.hitch(this,this.handleGetMapDimensions));_a11.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,lang.hitch(this,this.setMapExtent));_a11.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LEVEL.GET_LEVEL_COUNT,lang.hitch(this,this.getZoomLevelCount));_a11.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_PREV_EXTENT,lang.hitch(this,this.handleGotoPrevExtent));_a11.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_NEXT_EXTENT,lang.hitch(this,this.handleGotoNextExtent));_a11.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.CHANGED,lang.hitch(this,this.handleRecordNewMapExtent));_a11.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_INITIAL_EXTENT,lang.hitch(this,this.handleGotoInitialExtent));_a11.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_LAST_EXTENT,lang.hitch(this,this.handleGotoLastExtent));_a11.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.ZOOM_TO_LAYER,lang.hitch(this,this.handleZoomToLayer));},handleZoomToLayer:function(_a15){if(_a15.fullExtent){this.setExtent(_a15.fullExtent);}},handleGetSpatialReference:function(_a16){if(_a16!=null&&lang.isFunction(_a16)){_a16(this.map.extent.spatialReference);}},zoomOut:function(){var _a17=this.map.getLevel();var _a18=-1;if(_a17>1){_a18=_a17-1;}else{_a18=0;}this.map.setLevel(_a18);},handleBasemapChanged:function(){var _a19=this.getZoomLevelCount();_a11.publish(VIEWER_GLOBALS.EVENTS.MAP.LEVEL.LEVEL_COUNT_CHANGED,_a19);},getZoomLevelCount:function(_a1a){var _a1b=null;if(lang.isObject(this.map.__tileInfo)&&lang.isArray(this.map.__tileInfo.lods)){_a1b=this.map.__tileInfo.lods.length-1;}var _a1c={count:_a1b,current:this.map.getLevel()};if(_a1a!=null&&lang.isFunction(_a1a)){_a1a(_a1c);}else{return _a1c;}return null;},setMapExtent:function(_a1d){if(_a1d!=null&&_a1d instanceof _a12){if(_a1d.spatialReference.wkid==this.map.spatialReference.wkid){this.map.setExtent(_a1d);}else{_a11.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_MAP_SR,_a1d,lang.hitch(this,function(_a1e){if(lang.isArray(_a1e)&&_a1e.length>0){if(this.maxClientZoom!=null){this.map.setLevel(this.maxClientZoom);}this.map.setExtent(_a1e[0]);}}));}}},handleGetMapDimensions:function(_a1f){if(_a1f!=null&&lang.isFunction(_a1f)){_a1f({width:this.map.width,height:this.map.height});}},handleMapExtentChanged:function(){this.mapDisplayWidgets.showScale();},panToPoint:function(_a20,_a21){var _a22;if(!(_a20 instanceof _a13)){return;}if(_a21!=null&&lang.isObject(_a21)){if(_a21.zoomTo!=null&&_a21.zoomTo===false){this.map.centerAt(_a20);}else{if(_a21.deepest!=null&&_a21.deepest==true){if(lang.isObject(this.map.__tileInfo)&&lang.isArray(this.map.__tileInfo.lods)){_a22=this.map.__tileInfo.lods.length-1;}}else{if(_a21.zoomLevel!=null&&lang.isObject(this.map.__tileInfo)&&lang.isArray(this.map.__tileInfo.lods)){if(_a22>=this.map.__tileInfo.lods.length){_a22=this.map.__tileInfo.lods.length-1;}else{_a22=_a21.zoomLevel;}}}if(_a22!=null){this.map.centerAndZoom(_a20,_a22);}}}else{if(this.map.getLevel()<8||this.map.getLevel()>15){_a22=7;}else{_a22=this.map.getLevel();}if(this.map.getLevel()==_a22){this.map.centerAt(_a20);}else{this.map.centerAndZoom(_a20,_a22);}}},handleSetLevel:function(_a23){if(_a23<this.map.__tileInfo.lods.length){this.map.setLevel(_a23);}},handleGetLevel:function(_a24){if(_a24==null||!lang.isFunction(_a24)){return;}_a24(this.map.getLevel());},handleGetExtent:function(_a25){if(_a25==null||!lang.isFunction(_a25)){return;}_a25(this.map.extent);},handleGetCenter:function(_a26){if(_a26==null||!lang.isFunction(_a26)){return;}_a26(this.map.extent.getCenter());},handleRecordNewMapExtent:function(){if(arguments&&arguments[0]&&arguments[0].extent){if(!this.extentActionInProgress){if(this.currentExtentIdx<(this.extentArray.length-1)){this.extentArray.splice(this.currentExtentIdx+1,this.extentArray.length-(this.currentExtentIdx+1));}this.extentArray.push(arguments[0].extent);this.currentExtentIdx=this.extentArray.length-1;_a11.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PREV_EXTENT_EXISTS,(this.currentExtentIdx>0));_a11.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.NEXT_EXTENT_EXISTS,(this.currentExtentIdx<(this.extentArray.length-1)));}else{this.extentActionInProgress=false;}}},handleGotoPrevExtent:function(){if(this.currentExtentIdx>0){this.currentExtentIdx-=1;this.extentActionInProgress=true;_a11.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,this.extentArray[this.currentExtentIdx]);_a11.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PREV_EXTENT_EXISTS,(this.currentExtentIdx>0));_a11.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.NEXT_EXTENT_EXISTS,(this.currentExtentIdx<(this.extentArray.length-1)));}},handleGotoNextExtent:function(){if(this.currentExtentIdx<this.extentArray.length-1){this.currentExtentIdx+=1;this.extentActionInProgress=true;_a11.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,this.extentArray[this.currentExtentIdx]);_a11.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PREV_EXTENT_EXISTS,(this.currentExtentIdx>0));_a11.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.NEXT_EXTENT_EXISTS,(this.currentExtentIdx<(this.extentArray.length-1)));}},handleGotoInitialExtent:function(){this.currentExtentIdx=0;this.extentActionInProgress=true;_a11.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,this.extentArray[this.currentExtentIdx]);_a11.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PREV_EXTENT_EXISTS,(this.currentExtentIdx>0));_a11.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.NEXT_EXTENT_EXISTS,(this.currentExtentIdx<(this.extentArray.length-1)));},handleGotoLastExtent:function(){this.currentExtentIdx=this.extentArray.length-1;this.extentActionInProgress=true;_a11.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,this.extentArray[this.currentExtentIdx]);_a11.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PREV_EXTENT_EXISTS,(this.currentExtentIdx>0));_a11.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.NEXT_EXTENT_EXISTS,(this.currentExtentIdx<(this.extentArray.length-1)));}});});},"dojox/timing":function(){define(["./timing/_base"],function(_a27){return _a27;});},"esriviewer/util/RegExpUtils":function(){define(["dojo/_base/declare"],function(_a28){return _a28([],{URLRegExp:new RegExp(/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/),xmlExtensionRegExp:new RegExp(/\.xml$/i),jsonExtensionRegExp:new RegExp(/\.json$/i),kmlExtensionRegExp:new RegExp(/\.kml/i),featureLayerRegExp:new RegExp(/\/[0-9]+$/i),dateRegexp:new RegExp(/\d+\/\d+\/\d{4}/),numberRegExp:new RegExp(/^[+-]?\d*\.?\d*$/),numericRegexp:new RegExp(/[^0-9\.]/g),unsignedNumberRegExp:new RegExp(/^\d*\.?\d*$/),mapServiceNameRegExp:new RegExp(/.*\/(.*)\/MapServer\/?$/),geocodeServiceNameRegExp:new RegExp(/.*\/(.*)\/GeocodeServer\/?$/),imageServiceNameRegExp:new RegExp(/.*\/(.*)\/ImageServer\/?$/),globeServiceNameRegExp:new RegExp(/.*\/(.*)\/GlobeServer\/?$/),gpServerServiceNameRegExp:new RegExp(/.*\/(.*)\/GPServer\/?$/),featureServerServiceNameRegExp:new RegExp(/.*\/(.*)\/FeatureServer\/?$/),numberToStringWithCommasRegexp:new RegExp(/\B(?=(\d{3})+(?!\d))/g),whitespaceRegexp:new RegExp(/\s*/g),isUrl:function(_a29){return this.URLRegExp.test(_a29);},isFeatureLayer:function(url){var _a2a=url.indexOf("/"+VIEWER_GLOBALS.SERVICE_TYPES.FEATURE_SERVER+"/")>-1;var _a2b=url.indexOf("/"+VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER+"/")>-1;if(_a2a||_a2b){return this.featureLayerRegExp.test(url);}return false;},isXmlExtension:function(_a2c){return this.xmlExtensionRegExp.test(_a2c);},isJsonExtension:function(_a2d){return this.jsonExtensionRegExp.test(_a2d);},isKMLExtension:function(_a2e){return this.kmlExtensionRegExp.test(_a2e);},isDate:function(_a2f){return this.dateRegexp.test(_a2f);},isNumber:function(_a30){return this.numberRegExp.test(_a30);},isUnsignedNumber:function(_a31){return this.unsignedNumberRegExp.test(_a31);},stripNonNumeric:function(_a32){var _a33=_a32.toString();var _a34=false;if(_a33.length>0&&_a33[0]==="-"){_a34=true;}var res=_a33.replace(this.numericRegexp,"");if(_a34){res="-"+res;}return res;},stripWhitespace:function(_a35){return _a35.toString().replace(this.whitespaceRegexp,"");},getCharacterOccurrenceCount:function(_a36,_a37){return this.getCharacterOccuranceCount(_a36,_a37);},getCharacterOccuranceCount:function(_a38,_a39){return _a39.split(_a38).length-1;},getServiceNameFromUrl:function(url){var type=VIEWER_UTILS.getServiceTypeFromUrl(url);if(type){var _a3a=null;if(type==VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER){_a3a=this.mapServiceNameRegExp;}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER){_a3a=this.imageServiceNameRegExp;}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.GP_SERVER){_a3a=this.gpServerServiceNameRegExp;}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.GLOBE_SERVER){_a3a=this.globeServiceNameRegExp;}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.FEATURE_SERVER){_a3a=this.featureServerServiceNameRegExp;}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.GEOCODE_SERVER){_a3a=this.geocodeServiceNameRegExp;}else{return url;}}}}}}var res=_a3a.exec(url);if(res!=undefined&&res[1]!=undefined){return res[1].replace("_"," ");}return url;}else{return url;}},numberToStringWithCommas:function(x){var _a3b=x.toString().split(".");_a3b[0]=_a3b[0].replace(this.numberToStringWithCommasRegexp,",");return _a3b.join(".");}});});},"esriviewer/ui/draw/DrawWidget":function(){define(["dojo/_base/declare","dojo/text!./template/DrawWidgetTemplate.html","dojo/topic","dojo/_base/lang","../base/UITemplatedWidget","./base/MapDrawSupport","./configure/ConfigureDrawWidget","./base/GraphicsListWidget","./model/DrawWidgetViewModel","./base/GraphicsLocalStorageMixin","./base/UserPersistedGraphicsListWidget","dijit/form/CheckBox","esri/layers/GraphicsLayer","esri/graphic"],function(_a3c,_a3d,_a3e,lang,_a3f,_a40,_a41,_a42,_a43,_a44,_a45,_a46,_a47,_a48){return _a3c([_a3f,_a40,_a44],{bindingsApplied:false,templateString:_a3d,constructor:function(){this.freehandActive=false;},initListeners:function(){this.inherited(arguments);_a3e.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.GET_USER_GRAPHICS,lang.hitch(this,this.getUserGraphics));_a3e.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.CLEAR_STORED_GRAPHICS,lang.hitch(this,this._clearStoredGraphics));},postCreate:function(){this.viewModel=new _a43();this.viewModel.drawVisible.subscribe(lang.hitch(this,this._handleDrawVisibilityChanged));this.viewModel.configurationVisible.subscribe(lang.hitch(this,this._handleConfigurationVisibilityChanged));this.viewModel.graphicsListVisible.subscribe(lang.hitch(this,this._handleGraphicsListVisibilityChanged));this.viewModel.userPersistedGraphicsVisible.subscribe(lang.hitch(this,this._handleUserPersistedVisibilityChanged));this.viewModel.showUserPersistedGraphicsIcon(this.localStoragePersistSupported);var _a49=false;for(var key in this.persistedUserGraphics){_a49=true;break;}this.viewModel.showSavedGraphicsTab(_a49);this.applyBindings();this._createConfigureDrawWidget();this._createGraphicsListWidget();if(this.localStoragePersistSupported){this._createUserPersistedGraphicsListWidget();}this.inherited(arguments);this.drawGraphicsLayer=_a47();_a3e.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_EXTERNAL_MANAGED_LAYER,this.drawGraphicsLayer);_a3e.publish(VIEWER_GLOBALS.EVENTS.DRAW.DRAW_GRAPHICS_LAYER_CREATED);},_clearStoredGraphics:function(){this.deleteAllPersistedGraphics();},_handleConfigurationVisibilityChanged:function(_a4a){this._handleContentAnimation(_a4a,this.drawWindowConfigureContainer);},_handleGraphicsListVisibilityChanged:function(_a4b){this._handleContentAnimation(_a4b,this.drawWindowGraphicsListContainer);},_handleUserPersistedVisibilityChanged:function(_a4c){this._handleContentAnimation(_a4c,this.drawWindowUserPersistedGraphicsContainer);},_handleDrawVisibilityChanged:function(_a4d){this._handleContentAnimation(_a4d,this.drawWindowInputIconsContainer);},applyBindings:function(){if(!this.bindingsApplied){this._applyBindings();}},_applyBindings:function(){if(!this.bindingsApplied){ko.applyBindings(this.viewModel,this.domNode);this.bindingsApplied=true;}},_createConfigureDrawWidget:function(){if(this.configureDrawWidget==null){this.configureDrawWidget=new _a41();this.configureDrawWidget.placeAt(this.drawWindowConfigureContainer);this.configureDrawWidget.on("pointSymbolChanged",lang.hitch(this,this.handlePointSymbolChanged));this.configureDrawWidget.on("lineSymbolChanged",lang.hitch(this,this.handleLineSymbolChanged));this.configureDrawWidget.on("polygonSymbolChanged",lang.hitch(this,this.handlePolygonSymbolChanged));this.configureDrawWidget.on("rectangleSymbolChanged",lang.hitch(this,this.handleRectangleSymbolChanged));this.configureDrawWidget.on("textSymbolChanged",lang.hitch(this,this.handleTextSymbolChanged));this.pointSymbol=this.configureDrawWidget.pointConfigurationWidget.getSymbol();this.lineSymbol=this.configureDrawWidget.lineConfigurationWidget.getSymbol();this.envelopeSymbol=this.configureDrawWidget.rectangleConfigurationWidget.getSymbol();this.textSymbol=this.configureDrawWidget.configureTextWidget.getSymbol();this.polygonSymbol=this.configureDrawWidget.configurePolygonWidget.getSymbol();}},handlePointSymbolChanged:function(_a4e){this.pointSymbol=_a4e;},handleLineSymbolChanged:function(_a4f){this.lineSymbol=_a4f;},handlePolygonSymbolChanged:function(_a50){this.polygonSymbol=_a50;},handleRectangleSymbolChanged:function(_a51){this.envelopeSymbol=_a51;},handleTextSymbolChanged:function(_a52){this.textSymbol=_a52;},_createUserPersistedGraphicsListWidget:function(){if(this.userPersistedGraphicsListWidget==null){this.userPersistedGraphicsListWidget=new _a45();this.userPersistedGraphicsListWidget.placeAt(this.drawWindowUserPersistedGraphicsContainer);this.userPersistedGraphicsListWidget.on("removeUserPersistedGraphics",lang.hitch(this,this.removeUserPersistedGraphics));this.userPersistedGraphicsListWidget.on("addUserPersistedGraphicsToMap",lang.hitch(this,this.addUserPersistedGraphicsToMap));this.userPersistedGraphicsListWidget.addExistingPersistedGraphicsItems(this.persistedUserGraphics);}},_createGraphicsListWidget:function(){if(this.graphicsListWidget==null){this.graphicsListWidget=new _a42({saveSupported:this.localStoragePersistSupported});this.graphicsListWidget.placeAt(this.drawWindowGraphicsListContainer);this.graphicsListWidget.viewModel.hasGraphics.subscribe(lang.hitch(this,this._handleCheckForExistingGraphics));this.graphicsListWidget.on("removeAllGraphics",lang.hitch(this,this.removeAllGraphics));this.graphicsListWidget.on("removeGraphic",lang.hitch(this,this.removeGraphic));this.graphicsListWidget.on("saveGraphics",lang.hitch(this,this.saveUserGraphics));}},saveUserGraphics:function(_a53,_a54){var _a55=this.persistUserGraphics(_a53,_a54);if(_a55){this.userPersistedGraphicsListWidget.addUserPersistedGraphics(_a55);this.viewModel.showSavedGraphicsTab(true);}},addUserPersistedGraphicsToMap:function(_a56){if(_a56==null||!lang.isObject(_a56)){return;}if(_a56.graphics==null||!lang.isArray(_a56.graphics)){return;}var _a57;for(var i=0;i<_a56.graphics.length;i++){_a57=_a56.graphics[i].graphic;var _a58=new _a48(_a57);var _a59={label:_a56.graphics[i].label,graphic:_a58};this.onAnnotationCreated(_a59);}},removeUserPersistedGraphics:function(_a5a){var _a5b=this.deleteUserPersistedGraphics(_a5a);this.viewModel.showSavedGraphicsTab(_a5b);},removeAllGraphics:function(){this.drawGraphicsLayer.clear();},removeGraphic:function(_a5c){if(_a5c){this.drawGraphicsLayer.remove(_a5c);}},getUserGraphics:function(_a5d){if(_a5d&&lang.isFunction(_a5d)){_a5d(this.graphicsListWidget.getGraphics());}},_handleCheckForExistingGraphics:function(_a5e){if(!_a5e){this.viewModel.graphicsListTabVisible(false);this.viewModel.showDraw();}else{this.viewModel.graphicsListTabVisible(true);}},handlePointDrawClick:function(){var _a5f=this.viewModel.pointActive();this.clearDraw();if(!_a5f){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT);this.viewModel.setDrawMode(this.viewModel.drawModes.point);}},handleTextDrawClick:function(){var _a60=this.viewModel.textActive();this.clearDraw();if(!_a60){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT);this.viewModel.setDrawMode(this.viewModel.drawModes.text);}},handleLineDrawClick:function(){var _a61=this.viewModel.lineActive();this.clearDraw();if(!_a61){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_LINE);this.viewModel.setDrawMode(this.viewModel.drawModes.line);}},handlePolylineDrawClick:function(){var _a62=this.viewModel.polylineActive();this.clearDraw();if(!_a62){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE);this.viewModel.setDrawMode(this.viewModel.drawModes.polyline);}},handlePolygonDrawClick:function(){var _a63=this.viewModel.polygonActive();this.clearDraw();if(!_a63){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON);this.viewModel.setDrawMode(this.viewModel.drawModes.polygon);}},handleRectangleDrawClick:function(){var _a64=this.viewModel.rectangleActive();this.clearDraw();if(!_a64){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_RECTANGLE);this.viewModel.setDrawMode(this.viewModel.drawModes.rectangle);}},clearDraw:function(){this.inherited(arguments);this.viewModel.setDrawMode(null);_a3e.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.DRAW_CANCEL);},geometryAdded:function(_a65){this.inherited(arguments);var _a66=this.viewModel.getCurrentDrawType();this.clearDraw();if(_a66!=null){if(_a66===this.viewModel.drawModes.rectangle){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_RECTANGLE);this.viewModel.setDrawMode(this.viewModel.drawModes.rectangle);}if(_a66===this.viewModel.drawModes.point){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT);this.viewModel.setDrawMode(this.viewModel.drawModes.point);}if(_a66===this.viewModel.drawModes.polygon){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON);this.viewModel.setDrawMode(this.viewModel.drawModes.polygon);}if(_a66===this.viewModel.drawModes.polyline){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE);this.viewModel.setDrawMode(this.viewModel.drawModes.polyline);}if(_a66===this.viewModel.drawModes.line){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_LINE);this.viewModel.setDrawMode(this.viewModel.drawModes.line);}if(_a66===this.viewModel.drawModes.text){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT);this.viewModel.setDrawMode(this.viewModel.drawModes.text);}}},toggleFreehand:function(){this.freeHandDrawCheckbox.set("checked",!this.freeHandDrawCheckbox.get("checked"));},handleFreehandToggled:function(){this.freehandActive=this.freeHandDrawCheckbox.get("checked");var _a67=this.viewModel.getCurrentDrawType();if(_a67===this.viewModel.drawModes.polygon){this.clearDraw();this.viewModel.setDrawMode(this.viewModel.drawModes.polygon);this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON);}if(_a67===this.viewModel.drawModes.polyline){this.clearDraw();this.viewModel.setDrawMode(this.viewModel.drawModes.polyline);this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE);}},onAnnotationCreated:function(_a68){this.inherited(arguments);this.graphicsListWidget.addGraphic(_a68);this.drawGraphicsLayer.add(_a68.graphic);},hidePopups:function(){if(this.graphicsListWidget){this.graphicsListWidget.hidePopups();}}});});},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(dojo,lang,_a69,_a6a){var _a6b={};lang.setObject("dojo.colors",_a6b);var _a6c=function(m1,m2,h){if(h<0){++h;}if(h>1){--h;}var h6=6*h;if(h6<1){return m1+(m2-m1)*h6;}if(2*h<1){return m2;}if(3*h<2){return m1+(m2-m1)*(2/3-h)*6;}return m1;};dojo.colorFromRgb=_a69.fromRgb=function(_a6d,obj){var m=_a6d.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(m){var c=m[2].split(/\s*,\s*/),l=c.length,t=m[1],a;if((t=="rgb"&&l==3)||(t=="rgba"&&l==4)){var r=c[0];if(r.charAt(r.length-1)=="%"){a=_a6a.map(c,function(x){return parseFloat(x)*2.56;});if(l==4){a[3]=c[3];}return _a69.fromArray(a,obj);}return _a69.fromArray(c,obj);}if((t=="hsl"&&l==3)||(t=="hsla"&&l==4)){var H=((parseFloat(c[0])%360)+360)%360/360,S=parseFloat(c[1])/100,L=parseFloat(c[2])/100,m2=L<=0.5?L*(S+1):L+S-L*S,m1=2*L-m2;a=[_a6c(m1,m2,H+1/3)*256,_a6c(m1,m2,H)*256,_a6c(m1,m2,H-1/3)*256,1];if(l==4){a[3]=c[3];}return _a69.fromArray(a,obj);}}return null;};var _a6e=function(c,low,high){c=Number(c);return isNaN(c)?high:c<low?low:c>high?high:c;};_a69.prototype.sanitize=function(){var t=this;t.r=Math.round(_a6e(t.r,0,255));t.g=Math.round(_a6e(t.g,0,255));t.b=Math.round(_a6e(t.b,0,255));t.a=_a6e(t.a,0,1);return this;};_a6b.makeGrey=_a69.makeGrey=function(g,a){return _a69.fromArray([g,g,g,a]);};lang.mixin(_a69.named,{"aliceblue":[240,248,255],"antiquewhite":[250,235,215],"aquamarine":[127,255,212],"azure":[240,255,255],"beige":[245,245,220],"bisque":[255,228,196],"blanchedalmond":[255,235,205],"blueviolet":[138,43,226],"brown":[165,42,42],"burlywood":[222,184,135],"cadetblue":[95,158,160],"chartreuse":[127,255,0],"chocolate":[210,105,30],"coral":[255,127,80],"cornflowerblue":[100,149,237],"cornsilk":[255,248,220],"crimson":[220,20,60],"cyan":[0,255,255],"darkblue":[0,0,139],"darkcyan":[0,139,139],"darkgoldenrod":[184,134,11],"darkgray":[169,169,169],"darkgreen":[0,100,0],"darkgrey":[169,169,169],"darkkhaki":[189,183,107],"darkmagenta":[139,0,139],"darkolivegreen":[85,107,47],"darkorange":[255,140,0],"darkorchid":[153,50,204],"darkred":[139,0,0],"darksalmon":[233,150,122],"darkseagreen":[143,188,143],"darkslateblue":[72,61,139],"darkslategray":[47,79,79],"darkslategrey":[47,79,79],"darkturquoise":[0,206,209],"darkviolet":[148,0,211],"deeppink":[255,20,147],"deepskyblue":[0,191,255],"dimgray":[105,105,105],"dimgrey":[105,105,105],"dodgerblue":[30,144,255],"firebrick":[178,34,34],"floralwhite":[255,250,240],"forestgreen":[34,139,34],"gainsboro":[220,220,220],"ghostwhite":[248,248,255],"gold":[255,215,0],"goldenrod":[218,165,32],"greenyellow":[173,255,47],"grey":[128,128,128],"honeydew":[240,255,240],"hotpink":[255,105,180],"indianred":[205,92,92],"indigo":[75,0,130],"ivory":[255,255,240],"khaki":[240,230,140],"lavender":[230,230,250],"lavenderblush":[255,240,245],"lawngreen":[124,252,0],"lemonchiffon":[255,250,205],"lightblue":[173,216,230],"lightcoral":[240,128,128],"lightcyan":[224,255,255],"lightgoldenrodyellow":[250,250,210],"lightgray":[211,211,211],"lightgreen":[144,238,144],"lightgrey":[211,211,211],"lightpink":[255,182,193],"lightsalmon":[255,160,122],"lightseagreen":[32,178,170],"lightskyblue":[135,206,250],"lightslategray":[119,136,153],"lightslategrey":[119,136,153],"lightsteelblue":[176,196,222],"lightyellow":[255,255,224],"limegreen":[50,205,50],"linen":[250,240,230],"magenta":[255,0,255],"mediumaquamarine":[102,205,170],"mediumblue":[0,0,205],"mediumorchid":[186,85,211],"mediumpurple":[147,112,219],"mediumseagreen":[60,179,113],"mediumslateblue":[123,104,238],"mediumspringgreen":[0,250,154],"mediumturquoise":[72,209,204],"mediumvioletred":[199,21,133],"midnightblue":[25,25,112],"mintcream":[245,255,250],"mistyrose":[255,228,225],"moccasin":[255,228,181],"navajowhite":[255,222,173],"oldlace":[253,245,230],"olivedrab":[107,142,35],"orange":[255,165,0],"orangered":[255,69,0],"orchid":[218,112,214],"palegoldenrod":[238,232,170],"palegreen":[152,251,152],"paleturquoise":[175,238,238],"palevioletred":[219,112,147],"papayawhip":[255,239,213],"peachpuff":[255,218,185],"peru":[205,133,63],"pink":[255,192,203],"plum":[221,160,221],"powderblue":[176,224,230],"rosybrown":[188,143,143],"royalblue":[65,105,225],"saddlebrown":[139,69,19],"salmon":[250,128,114],"sandybrown":[244,164,96],"seagreen":[46,139,87],"seashell":[255,245,238],"sienna":[160,82,45],"skyblue":[135,206,235],"slateblue":[106,90,205],"slategray":[112,128,144],"slategrey":[112,128,144],"snow":[255,250,250],"springgreen":[0,255,127],"steelblue":[70,130,180],"tan":[210,180,140],"thistle":[216,191,216],"tomato":[255,99,71],"turquoise":[64,224,208],"violet":[238,130,238],"wheat":[245,222,179],"whitesmoke":[245,245,245],"yellowgreen":[154,205,50]});return _a69;});},"dojox/uuid/Uuid":function(){define(["dojo/_base/lang","./_base"],function(dojo,uuid){dojox.uuid.Uuid=function(_a6f){this._uuidString=dojox.uuid.NIL_UUID;if(_a6f){dojox.uuid.assert(dojo.isString(_a6f));this._uuidString=_a6f.toLowerCase();dojox.uuid.assert(this.isValid());}else{var _a70=dojox.uuid.Uuid.getGenerator();if(_a70){this._uuidString=_a70();dojox.uuid.assert(this.isValid());}}};dojox.uuid.Uuid.compare=function(_a71,_a72){var _a73=_a71.toString();var _a74=_a72.toString();if(_a73>_a74){return 1;}if(_a73<_a74){return -1;}return 0;};dojox.uuid.Uuid.setGenerator=function(_a75){dojox.uuid.assert(!_a75||dojo.isFunction(_a75));dojox.uuid.Uuid._ourGenerator=_a75;};dojox.uuid.Uuid.getGenerator=function(){return dojox.uuid.Uuid._ourGenerator;};dojox.uuid.Uuid.prototype.toString=function(){return this._uuidString;};dojox.uuid.Uuid.prototype.compare=function(_a76){return dojox.uuid.Uuid.compare(this,_a76);};dojox.uuid.Uuid.prototype.isEqual=function(_a77){return (this.compare(_a77)==0);};dojox.uuid.Uuid.prototype.isValid=function(){return dojox.uuid.isValid(this);};dojox.uuid.Uuid.prototype.getVariant=function(){return dojox.uuid.getVariant(this);};dojox.uuid.Uuid.prototype.getVersion=function(){if(!this._versionNumber){this._versionNumber=dojox.uuid.getVersion(this);}return this._versionNumber;};dojox.uuid.Uuid.prototype.getNode=function(){if(!this._nodeString){this._nodeString=dojox.uuid.getNode(this);}return this._nodeString;};dojox.uuid.Uuid.prototype.getTimestamp=function(_a78){if(!_a78){_a78=null;}switch(_a78){case "string":case String:return this.getTimestamp(Date).toUTCString();break;case "hex":if(!this._timestampAsHexString){this._timestampAsHexString=dojox.uuid.getTimestamp(this,"hex");}return this._timestampAsHexString;break;case null:case "date":case Date:if(!this._timestampAsDate){this._timestampAsDate=dojox.uuid.getTimestamp(this,Date);}return this._timestampAsDate;break;default:dojox.uuid.assert(false,"The getTimestamp() method dojox.uuid.Uuid was passed a bogus returnType: "+_a78);break;}};return dojox.uuid.Uuid;});},"esriviewer/ui/social/SocialMediaWidgetWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/dom-class","../window/WindowWidget"],function(_a79,lang,_a7a,_a7b,_a7c){return _a79([_a7c],{defaultPositioning:{x:400,y:125},constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/social/SocialMediaWidget"],lang.hitch(this,function(_a7d){this.socialMediaWidget=new _a7d();this.setContent(this.socialMediaWidget.domNode);this.socialMediaWidget.listenForMapCursor();}));},windowWidth:"400px",windowHeaderText:"Search Social Media",windowIconAltText:"Search Social Media",windowIconClass:"commonIcons16 binoculars",positioningParamName:"socialMedia",postCreate:function(){this.inherited(arguments);_a7b.add(this.windowContent,"socialMediaWindowContent");},initListeners:function(){this.inherited(arguments);this.subscribes.push(_a7a.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.SOCIAL_MEDIA.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_a7a.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.SOCIAL_MEDIA.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_a7a.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.SOCIAL_MEDIA.TOGGLE,lang.hitch(this,this.toggle)));},show:function(){this.inherited(arguments);if(this.socialMediaWidget){this.socialMediaWidget.listenForMapCursor();}},hide:function(){this.inherited(arguments);if(this.socialMediaWidget){this.socialMediaWidget.stopMapCursorListener();}}});});},"esriviewer/ui/toolbar/base/model/BasemapsListingViewModel":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic"],function(_a7e,lang,_a7f){return _a7e([],{constructor:function(){this.basemapKeyLookup={};this.visible=ko.observable(false);this.basemaps=ko.observableArray();this.handleBasemapClick=lang.hitch(this,this._handleBaseMapClick);},addBasemap:function(_a80){var _a81=lang.mixin({selected:ko.observable(false)},_a80);this.basemaps.push(_a81);this.basemapKeyLookup[_a81.key]=_a81;},_handleBaseMapClick:function(_a82){if(_a82==null){return;}this.setCurrentBasemap(_a82.key);this.visible(false);},removeBasemap:function(key){var _a83=this.basemapKeyLookup[key];if(_a83==null){return false;}delete this.basemapKeyLookup[key];this.basemaps.remove(_a83);return true;},setCurrentBasemap:function(key){var _a84=this.basemapKeyLookup[key];if(_a84==null){return;}_a84.selected(true);var _a85=this.basemaps.indexOf(_a84);var _a86=this.basemaps();for(var i=0;i<_a86.length;i++){if(i!=_a85){_a86[i].selected(false);}}_a7f.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.SET,key);}});});},"dijit/tree/_dndContainer":function(){define(["dojo/aspect","dojo/_base/declare","dojo/dom-class","dojo/_base/lang","dojo/on","dojo/touch"],function(_a87,_a88,_a89,lang,on,_a8a){return _a88("dijit.tree._dndContainer",null,{constructor:function(tree,_a8b){this.tree=tree;this.node=tree.domNode;lang.mixin(this,_a8b);this.containerState="";_a89.add(this.node,"dojoDndContainer");this.events=[on(this.node,_a8a.enter,lang.hitch(this,"onOverEvent")),on(this.node,_a8a.leave,lang.hitch(this,"onOutEvent")),_a87.after(this.tree,"_onNodeMouseEnter",lang.hitch(this,"onMouseOver"),true),_a87.after(this.tree,"_onNodeMouseLeave",lang.hitch(this,"onMouseOut"),true),on(this.node,"dragstart, selectstart",function(evt){evt.preventDefault();})];},destroy:function(){var h;while(h=this.events.pop()){h.remove();}this.node=this.parent=null;},onMouseOver:function(_a8c){this.current=_a8c;},onMouseOut:function(){this.current=null;},_changeState:function(type,_a8d){var _a8e="dojoDnd"+type;var _a8f=type.toLowerCase()+"State";_a89.replace(this.node,_a8e+_a8d,_a8e+this[_a8f]);this[_a8f]=_a8d;},_addItemClass:function(node,type){_a89.add(node,"dojoDndItem"+type);},_removeItemClass:function(node,type){_a89.remove(node,"dojoDndItem"+type);},onOverEvent:function(){this._changeState("Container","Over");},onOutEvent:function(){this._changeState("Container","");}});});},"dijit/form/_FormSelectWidget":function(){define(["dojo/_base/array","dojo/_base/Deferred","dojo/aspect","dojo/data/util/sorter","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/when","dojo/store/util/QueryResults","./_FormValueWidget"],function(_a90,_a91,_a92,_a93,_a94,dom,_a95,_a96,lang,_a97,when,_a98,_a99){var _a9a=_a94("dijit.form._FormSelectWidget",_a99,{multiple:false,options:null,store:null,query:null,queryOptions:null,labelAttr:"",onFetch:null,sortByLabel:true,loadChildrenOnOpen:false,onLoadDeferred:null,getOptions:function(_a9b){var opts=this.options||[];if(_a9b==null){return opts;}if(lang.isArray(_a9b)){return _a90.map(_a9b,"return this.getOptions(item);",this);}if(lang.isString(_a9b)){_a9b={value:_a9b};}if(lang.isObject(_a9b)){if(!_a90.some(opts,function(_a9c,idx){for(var a in _a9b){if(!(a in _a9c)||_a9c[a]!=_a9b[a]){return false;}}_a9b=idx;return true;})){_a9b=-1;}}if(_a9b>=0&&_a9b<opts.length){return opts[_a9b];}return null;},addOption:function(_a9d){_a90.forEach(lang.isArray(_a9d)?_a9d:[_a9d],function(i){if(i&&lang.isObject(i)){this.options.push(i);}},this);this._loadChildren();},removeOption:function(_a9e){var _a9f=this.getOptions(lang.isArray(_a9e)?_a9e:[_a9e]);_a90.forEach(_a9f,function(_aa0){if(_aa0){this.options=_a90.filter(this.options,function(node){return (node.value!==_aa0.value||node.label!==_aa0.label);});this._removeOptionItem(_aa0);}},this);this._loadChildren();},updateOption:function(_aa1){_a90.forEach(lang.isArray(_aa1)?_aa1:[_aa1],function(i){var _aa2=this.getOptions({value:i.value}),k;if(_aa2){for(k in i){_aa2[k]=i[k];}}},this);this._loadChildren();},setStore:function(_aa3,_aa4,_aa5){var _aa6=this.store;_aa5=_aa5||{};if(_aa6!==_aa3){var h;while((h=this._notifyConnections.pop())){h.remove();}if(!_aa3.get){lang.mixin(_aa3,{_oldAPI:true,get:function(id){var _aa7=new _a91();this.fetchItemByIdentity({identity:id,onItem:function(_aa8){_aa7.resolve(_aa8);},onError:function(_aa9){_aa7.reject(_aa9);}});return _aa7.promise;},query:function(_aaa,_aab){var _aac=new _a91(function(){if(_aad.abort){_aad.abort();}});_aac.total=new _a91();var _aad=this.fetch(lang.mixin({query:_aaa,onBegin:function(_aae){_aac.total.resolve(_aae);},onComplete:function(_aaf){_aac.resolve(_aaf);},onError:function(_ab0){_aac.reject(_ab0);}},_aab));return new _a98(_aac);}});if(_aa3.getFeatures()["dojo.data.api.Notification"]){this._notifyConnections=[_a92.after(_aa3,"onNew",lang.hitch(this,"_onNewItem"),true),_a92.after(_aa3,"onDelete",lang.hitch(this,"_onDeleteItem"),true),_a92.after(_aa3,"onSet",lang.hitch(this,"_onSetItem"),true)];}}this._set("store",_aa3);}if(this.options&&this.options.length){this.removeOption(this.options);}if(this._queryRes&&this._queryRes.close){this._queryRes.close();}if(_aa5.query){this._set("query",_aa5.query);this._set("queryOptions",_aa5.queryOptions);}if(_aa3){this._loadingStore=true;this.onLoadDeferred=new _a91();this._queryRes=_aa3.query(this.query,this.queryOptions);when(this._queryRes,lang.hitch(this,function(_ab1){if(this.sortByLabel&&!_aa5.sort&&_ab1.length){if(_aa3.getValue){_ab1.sort(_a93.createSortFunction([{attribute:_aa3.getLabelAttributes(_ab1[0])[0]}],_aa3));}else{var _ab2=this.labelAttr;_ab1.sort(function(a,b){return a[_ab2]>b[_ab2]?1:b[_ab2]>a[_ab2]?-1:0;});}}if(_aa5.onFetch){_ab1=_aa5.onFetch.call(this,_ab1,_aa5);}_a90.forEach(_ab1,function(i){this._addOptionForItem(i);},this);if(this._queryRes.observe){this._queryRes.observe(lang.hitch(this,function(_ab3,_ab4,_ab5){if(_ab4==_ab5){this._onSetItem(_ab3);}else{if(_ab4!=-1){this._onDeleteItem(_ab3);}if(_ab5!=-1){this._onNewItem(_ab3);}}}),true);}this._loadingStore=false;this.set("value","_pendingValue" in this?this._pendingValue:_aa4);delete this._pendingValue;if(!this.loadChildrenOnOpen){this._loadChildren();}else{this._pseudoLoadChildren(_ab1);}this.onLoadDeferred.resolve(true);this.onSetStore();}),function(err){this.onLoadDeferred.reject(err);});}return _aa6;},_setValueAttr:function(_ab6,_ab7){if(!this._onChangeActive){_ab7=null;}if(this._loadingStore){this._pendingValue=_ab6;return;}if(_ab6==null){return;}if(lang.isArray(_ab6)){_ab6=_a90.map(_ab6,function(_ab8){return lang.isObject(_ab8)?_ab8:{value:_ab8};});}else{if(lang.isObject(_ab6)){_ab6=[_ab6];}else{_ab6=[{value:_ab6}];}}_ab6=_a90.filter(this.getOptions(_ab6),function(i){return i&&i.value;});var opts=this.getOptions()||[];if(!this.multiple&&(!_ab6[0]||!_ab6[0].value)&&!!opts.length){_ab6[0]=opts[0];}_a90.forEach(opts,function(opt){opt.selected=_a90.some(_ab6,function(v){return v.value===opt.value;});});var val=_a90.map(_ab6,function(opt){return opt.value;});if(typeof val=="undefined"||typeof val[0]=="undefined"){return;}var disp=_a90.map(_ab6,function(opt){return opt.label;});this._setDisplay(this.multiple?disp:disp[0]);this.inherited(arguments,[this.multiple?val:val[0],_ab7]);this._updateSelection();},_getDisplayedValueAttr:function(){var ret=_a90.map([].concat(this.get("selectedOptions")),function(v){if(v&&"label" in v){return v.label;}else{if(v){return v.value;}}return null;},this);return this.multiple?ret:ret[0];},_setDisplayedValueAttr:function(_ab9){this.set("value",this.getOptions(typeof _ab9=="string"?{label:_ab9}:_ab9));},_loadChildren:function(){if(this._loadingStore){return;}_a90.forEach(this._getChildren(),function(_aba){_aba.destroyRecursive();});_a90.forEach(this.options,this._addOptionItem,this);this._updateSelection();},_updateSelection:function(){this.focusedChild=null;this._set("value",this._getValueFromOpts());var val=[].concat(this.value);if(val&&val[0]){var self=this;_a90.forEach(this._getChildren(),function(_abb){var _abc=_a90.some(val,function(v){return _abb.option&&(v===_abb.option.value);});if(_abc&&!self.multiple){self.focusedChild=_abb;}_a95.toggle(_abb.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),_abc);_abb.domNode.setAttribute("aria-selected",_abc?"true":"false");},this);}},_getValueFromOpts:function(){var opts=this.getOptions()||[];if(!this.multiple&&opts.length){var opt=_a90.filter(opts,function(i){return i.selected;})[0];if(opt&&opt.value){return opt.value;}else{opts[0].selected=true;return opts[0].value;}}else{if(this.multiple){return _a90.map(_a90.filter(opts,function(i){return i.selected;}),function(i){return i.value;})||[];}}return "";},_onNewItem:function(item,_abd){if(!_abd||!_abd.parent){this._addOptionForItem(item);}},_onDeleteItem:function(item){var _abe=this.store;this.removeOption({value:_abe.getIdentity(item)});},_onSetItem:function(item){this.updateOption(this._getOptionObjForItem(item));},_getOptionObjForItem:function(item){var _abf=this.store,_ac0=(this.labelAttr&&this.labelAttr in item)?item[this.labelAttr]:_abf.getLabel(item),_ac1=(_ac0?_abf.getIdentity(item):null);return {value:_ac1,label:_ac0,item:item};},_addOptionForItem:function(item){var _ac2=this.store;if(_ac2.isItemLoaded&&!_ac2.isItemLoaded(item)){_ac2.loadItem({item:item,onItem:function(i){this._addOptionForItem(i);},scope:this});return;}var _ac3=this._getOptionObjForItem(item);this.addOption(_ac3);},constructor:function(_ac4){this._oValue=(_ac4||{}).value||null;this._notifyConnections=[];},buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.focusNode,false);},_fillContent:function(){if(!this.options){this.options=this.srcNodeRef?_a97("> *",this.srcNodeRef).map(function(node){if(node.getAttribute("type")==="separator"){return {value:"",label:"",selected:false,disabled:false};}return {value:(node.getAttribute("data-"+_a96._scopeName+"-value")||node.getAttribute("value")),label:String(node.innerHTML),selected:node.getAttribute("selected")||false,disabled:node.getAttribute("disabled")||false};},this):[];}if(!this.value){this._set("value",this._getValueFromOpts());}else{if(this.multiple&&typeof this.value=="string"){this._set("value",this.value.split(","));}}},postCreate:function(){this.inherited(arguments);_a92.after(this,"onChange",lang.hitch(this,"_updateSelection"));var _ac5=this.store;if(_ac5&&(_ac5.getIdentity||_ac5.getFeatures()["dojo.data.api.Identity"])){this.store=null;this.setStore(_ac5,this._oValue);}},startup:function(){this._loadChildren();this.inherited(arguments);},destroy:function(){var h;while((h=this._notifyConnections.pop())){h.remove();}if(this._queryRes&&this._queryRes.close){this._queryRes.close();}this.inherited(arguments);},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return [];},_getSelectedOptionsAttr:function(){return this.getOptions({selected:true});},_pseudoLoadChildren:function(){},onSetStore:function(){}});return _a9a;});},"esriviewer/ui/configure/ConfigureViewerWindow":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/dom-class","../window/WindowWidget"],function(_ac6,_ac7,lang,_ac8,_ac9){return _ac6([_ac9],{defaultPositioning:{x:500,y:50},constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/configure/ConfigureViewerWidget"],lang.hitch(this,function(_aca){this.configureViewerWidget=new _aca();this.setContent(this.configureViewerWidget.domNode);}));},isPositionedByConfig:true,canMinimize:false,windowHeaderText:"Configure Viewer",windowIconAltText:"Configure Viewer",windowIconClass:"commonIcons16 gear",postCreate:function(){this.inherited(arguments);_ac8.add(this.windowContent,"configureWindowContent");},initListeners:function(){this.inherited(arguments);this.subscribes.push(_ac7.subscribe(VIEWER_GLOBALS.EVENTS.CONFIGURE.WINDOW.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_ac7.subscribe(VIEWER_GLOBALS.EVENTS.CONFIGURE.WINDOW.HIDE,lang.hitch(this,this.hide)));},hidePopups:function(){this.inherited(arguments);if(this.configureViewerWidget){this.configureViewerWidget.hidePopups();}}});});},"dijit/form/Select":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/i18n","dojo/_base/lang","dojo/on","dojo/sniff","./_FormSelectWidget","../_HasDropDown","../DropDownMenu","../MenuItem","../MenuSeparator","../Tooltip","../_KeyNavMixin","../registry","dojo/text!./templates/Select.html","dojo/i18n!./nls/validate"],function(_acb,_acc,_acd,_ace,_acf,i18n,lang,on,has,_ad0,_ad1,_ad2,_ad3,_ad4,_ad5,_ad6,_ad7,_ad8){var _ad9=_acc("dijit.form._SelectMenu",_ad2,{autoFocus:true,buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("role","listbox");},postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,"selectstart",function(evt){evt.preventDefault();evt.stopPropagation();}));},focus:function(){var _ada=false,val=this.parentWidget.value;if(lang.isArray(val)){val=val[val.length-1];}if(val){_acb.forEach(this.parentWidget._getChildren(),function(_adb){if(_adb.option&&(val===_adb.option.value)){_ada=true;this.focusChild(_adb,false);}},this);}if(!_ada){this.inherited(arguments);}}});var _adc=_acc("dijit.form.Select"+(has("dojo-bidi")?"_NoBidi":""),[_ad0,_ad1,_ad6],{baseClass:"dijitSelect dijitValidationTextBox",templateString:_ad8,_buttonInputDisabled:has("ie")?"disabled":"",required:false,state:"",message:"",tooltipPosition:[],emptyLabel:"&#160;",_isLoaded:false,_childrenLoaded:false,_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var si=this.srcNodeRef.selectedIndex||0;this._set("value",this.options[si>=0?si:0].value);}this.dropDown=new _ad9({id:this.id+"_menu",parentWidget:this});_ace.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "));},_getMenuItemForOption:function(_add){if(!_add.value&&!_add.label){return new _ad4({ownerDocument:this.ownerDocument});}else{var _ade=lang.hitch(this,"_setValueAttr",_add);var item=new _ad3({option:_add,label:_add.label||this.emptyLabel,onClick:_ade,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:_add.disabled||false});item.focusNode.setAttribute("role","option");return item;}},_addOptionItem:function(_adf){if(this.dropDown){this.dropDown.addChild(this._getMenuItemForOption(_adf));}},_getChildren:function(){if(!this.dropDown){return [];}return this.dropDown.getChildren();},focus:function(){if(!this.disabled&&this.focusNode.focus){try{this.focusNode.focus();}catch(e){}}},focusChild:function(_ae0){if(_ae0){this.set("value",_ae0.option);}},_getFirst:function(){var _ae1=this._getChildren();return _ae1.length?_ae1[0]:null;},_getLast:function(){var _ae2=this._getChildren();return _ae2.length?_ae2[_ae2.length-1]:null;},childSelector:function(node){var node=_ad7.byNode(node);return node&&node.getParent()==this.dropDown;},onKeyboardSearch:function(item,evt,_ae3,_ae4){if(item){this.focusChild(item);}},_loadChildren:function(_ae5){if(_ae5===true){if(this.dropDown){delete this.dropDown.focusedChild;this.focusedChild=null;}if(this.options.length){this.inherited(arguments);}else{_acb.forEach(this._getChildren(),function(_ae6){_ae6.destroyRecursive();});var item=new _ad3({ownerDocument:this.ownerDocument,label:this.emptyLabel});this.dropDown.addChild(item);}}else{this._updateSelection();}this._isLoaded=false;this._childrenLoaded=true;if(!this._loadingStore){this._setValueAttr(this.value,false);}},_refreshState:function(){if(this._started){this.validate(this.focused);}},startup:function(){this.inherited(arguments);this._refreshState();},_setValueAttr:function(_ae7){this.inherited(arguments);_acd.set(this.valueNode,"value",this.get("value"));this._refreshState();},_setNameAttr:"valueNode",_setDisabledAttr:function(_ae8){this.inherited(arguments);this._refreshState();},_setRequiredAttr:function(_ae9){this._set("required",_ae9);this.focusNode.setAttribute("aria-required",_ae9);this._refreshState();},_setOptionsAttr:function(_aea){this._isLoaded=false;this._set("options",_aea);},_setDisplay:function(_aeb){var lbl=_aeb||this.emptyLabel;this.containerNode.innerHTML="<span role=\"option\" class=\"dijitReset dijitInline "+this.baseClass.replace(/\s+|$/g,"Label ")+"\">"+lbl+"</span>";},validate:function(_aec){var _aed=this.disabled||this.isValid(_aec);this._set("state",_aed?"":(this._hasBeenBlurred?"Error":"Incomplete"));this.focusNode.setAttribute("aria-invalid",_aed?"false":"true");var _aee=_aed?"":this._missingMsg;if(_aee&&this.focused&&this._hasBeenBlurred){_ad5.show(_aee,this.domNode,this.tooltipPosition,!this.isLeftToRight());}else{_ad5.hide(this.domNode);}this._set("message",_aee);return _aed;},isValid:function(){return (!this.required||this.value===0||!(/^\s*$/.test(this.value||"")));},reset:function(){this.inherited(arguments);_ad5.hide(this.domNode);this._refreshState();},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=i18n.getLocalization("dijit.form","validate",this.lang).missingMessage;},postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,"selectstart",function(evt){evt.preventDefault();evt.stopPropagation();}));this.domNode.setAttribute("aria-expanded","false");if(has("ie")<9){this.defer(function(){try{var s=domStyle.getComputedStyle(this.domNode);if(s){var ff=s.fontFamily;if(ff){var _aef=this.domNode.getElementsByTagName("INPUT");if(_aef){for(var i=0;i<_aef.length;i++){_aef[i].style.fontFamily=ff;}}}}}catch(e){}});}},_setStyleAttr:function(_af0){this.inherited(arguments);_ace.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width);},isLoaded:function(){return this._isLoaded;},loadDropDown:function(_af1){this._loadChildren(true);this._isLoaded=true;_af1();},destroy:function(_af2){if(this.dropDown&&!this.dropDown._destroyed){this.dropDown.destroyRecursive(_af2);delete this.dropDown;}this.inherited(arguments);},_onFocus:function(){this.validate(true);this.inherited(arguments);},_onBlur:function(){_ad5.hide(this.domNode);this.inherited(arguments);this.validate(false);}});if(has("dojo-bidi")){_adc=_acc("dijit.form.Select",_adc,{_setDisplay:function(_af3){this.inherited(arguments);this.applyTextDir(this.containerNode);}});}_adc._Menu=_ad9;function _af4(_af5){return function(evt){if(!this._isLoaded){this.loadDropDown(lang.hitch(this,_af5,evt));}else{this.inherited(_af5,arguments);}};};_adc.prototype._onContainerKeydown=_af4("_onContainerKeydown");_adc.prototype._onContainerKeypress=_af4("_onContainerKeypress");return _adc;});},"esriviewer/loader/base/BaseViewerPlacement":function(){define(["dojo/_base/declare","dojo/_base/window","dojo/topic","dojo/_base/lang","dojo/dom-construct","dojo/dom-class","dojo/dom"],function(_af6,_af7,_af8,lang,_af9,_afa,dom){return _af6([],{label:"unknown",isAbsolutePositioned:false,isWindowless:true,MAP_DIV_CLASS:"mapdiv",constructor:function(_afb){this.mapDiv=null;if(_afb!=null&&_afb.mapDiv!=null){if(_afb.mapDiv instanceof String){this.mapDiv=dom.byId(_afb.mapDiv);}else{if(!_afa.contains(_afb.mapDiv,this.MAP_DIV_CLASS)){_afa.add(_afb.mapDiv,this.MAP_DIV_CLASS);}}this.mapDiv=_afb.mapDiv;}if(this.mapDiv==null){this.initUI();}this.initListeners();},initUI:function(){this.mapDiv=_af9.create("div",{className:this.MAP_DIV_CLASS});},initListeners:function(){_af8.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAIN_TOOLBAR,lang.hitch(this,this.placeMainToolbar));_af8.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAIN_TOOLBAR_DROP_DOWN,lang.hitch(this,this.placeMainToolbarDropdown));_af8.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.NAVIGATION_TOOLBAR,lang.hitch(this,this.placeNavigationToolbar));_af8.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.HEADER,lang.hitch(this,this.placeHeader));_af8.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.VIEWER_ACCORDION,lang.hitch(this,this.placeViewerAccordion));_af8.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.FOOTER,lang.hitch(this,this.placeFooterWidget));_af8.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MESSAGING,lang.hitch(this,this.placeMessagingWidget));_af8.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.THROBBER,lang.hitch(this,this.placeThrobberWidget));_af8.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.BASEMAP_GALLERY,lang.hitch(this,this.placeBasemapGallery));_af8.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAP_SCALE_AND_COORDINATES,lang.hitch(this,this.placeMapScaleAndCoordinates));_af8.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.CREATE_BOOOKMARK,lang.hitch(this,this.placeCreateBookmarkWidget));_af8.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MENU_BAR,lang.hitch(this,this.placeMenuBarWidget));_af8.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.USER_LOCATION,lang.hitch(this,this.placeUserLocationWidget));_af8.subscribe(VIEWER_GLOBALS.EVENTS.MAP.GET_MAP_DIV,lang.hitch(this,this.handleGetMapDiv));},handleGetMapDiv:function(_afc){if(_afc!=null&&lang.isFunction(_afc)){_afc(this.mapDiv);}},placeMainToolbarDropdown:function(_afd){},placeMenuBarWidget:function(_afe){},placeCreateBookmarkWidget:function(_aff){},placeMapScaleAndCoordinates:function(_b00){},placeBasemapGallery:function(_b01){},placeNavigationToolbar:function(_b02){},placeHeader:function(_b03){},placeViewerAccordion:function(_b04){},placeMainToolbar:function(_b05){},placeUserLocationWidget:function(_b06){if(_b06){var _b07=this._getMapContainer();if(_b07){_b06.placeAt(_b07);}}},placeFooterWidget:function(_b08){if(_b08){_b08.placeAt(_af7.body());}},placeMessagingWidget:function(_b09){},placeThrobberWidget:function(_b0a){},_getMapContainer:function(){if(this.mapContainer==null){var _b0b;_af8.publish(VIEWER_GLOBALS.EVENTS.MAP.GET_MAP_DIV,function(mDiv){_b0b=mDiv;});this.mapContainer=_b0b;}return this.mapContainer;}});});},"esriviewer/ui/draw/configure/geometry/BaseGeometryConfigurationWidget":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/form/HorizontalSlider","dojo/_base/Color","dijit/ColorPalette","dojo/dom-attr","dojo/dom-style","dojo/dom-construct","dojo/dom-class","../../../base/UITemplatedWidget"],function(_b0c,lang,_b0d,_b0e,_b0f,_b10,_b11,_b12,_b13,_b14){return _b0c([_b14],{defaultColor:"#ff0000",transparencySliderContainer:null,colorPickerContainer:null,defaultTransparency:75,postCreate:function(){this.inherited(arguments);if(this.transparencySliderContainer!=null){this.createTransparencySlider();}if(this.colorPickerContainer!=null){this.createColorPicker();}},createTransparencySlider:function(){this.transparencySliderLabel=_b12.create("div");_b11.set(this.transparencySliderLabel,"margin","8px 0 5px 0");_b10.set(this.transparencySliderLabel,"innerHTML","Opacity - "+this.defaultTransparency+"%");_b13.add(this.transparencySliderLabel,"configureGeometryOpacityLabel");_b12.place(this.transparencySliderLabel,this.transparencySliderContainer);var _b15=_b12.create("div");_b12.place(_b15,this.transparencySliderContainer);this.transparencySlider=new _b0d({value:this.defaultTransparency,maximum:100,minimum:5,showButtons:false,pageIncrement:10,style:"width:195px"},_b15);this.transparencySlider.on("change",lang.hitch(this,this.handleTransparencyChanged));this.transparencySlider.startup();},createColorPicker:function(){var _b16=_b12.create("div");_b12.place(_b16,this.colorPickerContainer);this.colorPicker=new _b0f({value:this.defaultColor},_b16);this.colorPicker.on("change",lang.hitch(this,this.handleColorPickerChanged));},handleTransparencyChanged:function(_b17){_b10.set(this.transparencySliderLabel,"innerHTML","Opacity - "+Math.ceil(_b17)+" %");this.processChange();},handleColorPickerChanged:function(_b18){this.processChange();},getTransparency:function(){if(this.transparencySlider==null){return 100;}else{return Math.ceil(this.transparencySlider.get("value"));}},getColor:function(){var _b19=_b0e.fromHex(this.colorPicker.get("value"));var _b1a=this.getTransparency()/100;return new _b0e([_b19.r,_b19.g,_b19.b,_b1a]);},processChange:function(){},onChange:function(_b1b){},getSymbol:function(){return null;}});});},"dijit/_KeyNavMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","dijit/registry","dijit/_FocusMixin"],function(_b1c,_b1d,_b1e,keys,lang,on,_b1f,_b20){return _b1d("dijit._KeyNavMixin",_b20,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments);_b1e.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var _b21=this._keyNavCodes={};_b21[keys.HOME]=lang.hitch(this,"focusFirstChild");_b21[keys.END]=lang.hitch(this,"focusLastChild");_b21[this.isLeftToRight()?keys.LEFT_ARROW:keys.RIGHT_ARROW]=lang.hitch(this,"_onLeftArrow");_b21[this.isLeftToRight()?keys.RIGHT_ARROW:keys.LEFT_ARROW]=lang.hitch(this,"_onRightArrow");_b21[keys.UP_ARROW]=lang.hitch(this,"_onUpArrow");_b21[keys.DOWN_ARROW]=lang.hitch(this,"_onDownArrow");}var self=this,_b22=typeof this.childSelector=="string"?this.childSelector:lang.hitch(this,"childSelector");this.own(on(this.domNode,"keypress",lang.hitch(this,"_onContainerKeypress")),on(this.domNode,"keydown",lang.hitch(this,"_onContainerKeydown")),on(this.domNode,"focus",lang.hitch(this,"_onContainerFocus")),on(this.containerNode,on.selector(_b22,"focusin"),function(evt){self._onChildFocus(_b1f.getEnclosingWidget(this),evt);}));},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild();},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1);},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1);},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild());},focusLastChild:function(){this.focusChild(this._getLastFocusableChild());},focusChild:function(_b23,last){if(!_b23){return;}if(this.focusedChild&&_b23!==this.focusedChild){this._onChildBlur(this.focusedChild);}_b23.set("tabIndex",this.tabIndex);_b23.focus(last?"end":"start");},_onContainerFocus:function(evt){if(evt.target!==this.domNode||this.focusedChild){return;}this.focus();},_onFocus:function(){_b1e.set(this.domNode,"tabIndex","-1");this.inherited(arguments);},_onBlur:function(evt){_b1e.set(this.domNode,"tabIndex",this.tabIndex);if(this.focusedChild){this.focusedChild.set("tabIndex","-1");this.lastFocusedChild=this.focusedChild;this._set("focusedChild",null);}this.inherited(arguments);},_onChildFocus:function(_b24){if(_b24&&_b24!=this.focusedChild){if(this.focusedChild&&!this.focusedChild._destroyed){this.focusedChild.set("tabIndex","-1");}_b24.set("tabIndex",this.tabIndex);this.lastFocused=_b24;this._set("focusedChild",_b24);}},_searchString:"",multiCharSearchDuration:1000,onKeyboardSearch:function(item,evt,_b25,_b26){if(item){this.focusChild(item);}},_keyboardSearchCompare:function(item,_b27){var _b28=item.domNode,text=item.label||(_b28.focusNode?_b28.focusNode.label:"")||_b28.innerText||_b28.textContent||"",_b29=text.replace(/^\s+/,"").substr(0,_b27.length).toLowerCase();return (!!_b27.length&&_b29==_b27)?-1:0;},_onContainerKeydown:function(evt){var func=this._keyNavCodes[evt.keyCode];if(func){func(evt,this.focusedChild);evt.stopPropagation();evt.preventDefault();this._searchString="";}else{if(evt.keyCode==keys.SPACE&&this._searchTimer&&!(evt.ctrlKey||evt.altKey||evt.metaKey)){evt.stopImmediatePropagation();evt.preventDefault();this._keyboardSearch(evt," ");}}},_onContainerKeypress:function(evt){if(evt.charCode<keys.SPACE||evt.ctrlKey||evt.altKey||evt.metaKey||(evt.charCode==keys.SPACE&&this._searchTimer)){return;}evt.preventDefault();evt.stopPropagation();this._keyboardSearch(evt,String.fromCharCode(evt.charCode).toLowerCase());},_keyboardSearch:function(evt,_b2a){var _b2b=null,_b2c,_b2d=0,_b2e=lang.hitch(this,function(){if(this._searchTimer){this._searchTimer.remove();}this._searchString+=_b2a;var _b2f=/^(.)\1*$/.test(this._searchString);var _b30=_b2f?1:this._searchString.length;_b2c=this._searchString.substr(0,_b30);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString="";},this.multiCharSearchDuration);var _b31=this.focusedChild||null;if(_b30==1||!_b31){_b31=this._getNextFocusableChild(_b31,1);if(!_b31){return;}}var stop=_b31;do{var rc=this._keyboardSearchCompare(_b31,_b2c);if(!!rc&&_b2d++==0){_b2b=_b31;}if(rc==-1){_b2d=-1;break;}_b31=this._getNextFocusableChild(_b31,1);}while(_b31!=stop);});_b2e();this.onKeyboardSearch(_b2b,evt,_b2c,_b2d);},_onChildBlur:function(){},_getNextFocusableChild:function(_b32,dir){var _b33=_b32;do{if(!_b32){_b32=this[dir>0?"_getFirst":"_getLast"]();if(!_b32){break;}}else{_b32=this._getNext(_b32,dir);}if(_b32!=null&&_b32!=_b33&&_b32.isFocusable()){return _b32;}}while(_b32!=_b33);return null;},_getFirst:function(){return null;},_getLast:function(){return null;},_getNext:function(_b34,dir){if(_b34){_b34=_b34.domNode;while(_b34){_b34=_b34[dir<0?"previousSibling":"nextSibling"];if(_b34&&"getAttribute" in _b34){var w=_b1f.byNode(_b34);if(w){return w;}}}}return null;}});});},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../when"],function(_b35,lang,when){var _b36=function(_b37){if(!_b37){return _b37;}if(_b37.then){_b37=lang.delegate(_b37);}function _b38(_b39){if(!_b37[_b39]){_b37[_b39]=function(){var args=arguments;return when(_b37,function(_b3a){Array.prototype.unshift.call(args,_b3a);return _b36(_b35[_b39].apply(_b35,args));});};}};_b38("forEach");_b38("filter");_b38("map");if(!_b37.total){_b37.total=when(_b37,function(_b3b){return _b3b.length;});}return _b37;};lang.setObject("dojo.store.util.QueryResults",_b36);return _b36;});},"xstyle/util/createStyleSheet":function(){define([],function(){function has(){return !document.createStyleSheet;};var head=document.head;return function insertCss(css){if(has("dom-create-style-element")){_b3c=document.createElement("style");_b3c.setAttribute("type","text/css");_b3c.appendChild(document.createTextNode(css));head.insertBefore(_b3c,head.firstChild);return _b3c;}else{var _b3c=document.createStyleSheet();_b3c.cssText=css;return _b3c.owningElement;}};});},"dijit/CheckedMenuItem":function(){define(["dojo/_base/declare","dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(_b3d,_b3e,_b3f,_b40){return _b3d("dijit.CheckedMenuItem",_b3f,{baseClass:"dijitCheckedMenuItem",templateString:_b40,checked:false,_setCheckedAttr:function(_b41){_b3e.toggle(this.domNode,this.baseClass+"Checked",_b41);this.domNode.setAttribute("aria-checked",_b41?"true":"false");this._set("checked",_b41);},iconClass:"",role:"menuitemcheckbox",checkedChar:"&#10003;",onChange:function(){},_onClick:function(evt){if(!this.disabled){this.set("checked",!this.checked);this.onChange(this.checked);}this.onClick(evt);}});});},"esriviewer/ui/draw/model/DrawWidgetViewModel":function(){define(["dojo/_base/declare"],function(_b42){return _b42([],{drawModes:{"point":"point","line":"line","polyline":"polyline","polygon":"polygon","rectangle":"rectangle","text":"text"},constructor:function(){var self=this;this.showUserPersistedGraphicsIcon=ko.observable(true);this.showDrawWindowActions=ko.observable(true);this.showDrawPolylineIcon=ko.observable(true);this.showDrawTextIcon=ko.observable(true);this.showDrawPointIcon=ko.observable(true);this.showDrawLineIcon=ko.observable(true);this.showDrawPolygonIcon=ko.observable(true);this.showDrawRectangleIcon=ko.observable(true);this.forceHideGraphicsListTab=ko.observable(false);this.polylineActive=ko.observable(false);this.pointActive=ko.observable(false);this.lineActive=ko.observable(false);this.rectangleActive=ko.observable(false);this.polygonActive=ko.observable(false);this.textActive=ko.observable(false);this.graphicsListTabVisible=ko.observable(false);this.freehandContainerVisible=ko.observable(false);this.userPersistedGraphicsVisible=ko.observable(false);this.graphicsListVisible=ko.observable(false);this.configurationVisible=ko.observable(false);this.drawVisible=ko.observable(true);var _b43=function(){return (!self.forceHideGraphicsListTab())&&self.graphicsListTabVisible();};this.showGraphicsListTab=ko.computed(_b43);this.showSavedGraphicsTab=ko.observable(false);},showUserPersistedGraphics:function(){this.graphicsListVisible(false);this.configurationVisible(false);this.drawVisible(false);this.userPersistedGraphicsVisible(true);this.freehandContainerVisible(false);},showGraphicsList:function(){this.graphicsListVisible(true);this.configurationVisible(false);this.drawVisible(false);this.userPersistedGraphicsVisible(false);this.freehandContainerVisible(false);},showConfiguration:function(){this.graphicsListVisible(false);this.configurationVisible(true);this.userPersistedGraphicsVisible(false);this.drawVisible(false);this.freehandContainerVisible(false);},showDraw:function(){this.graphicsListVisible(false);this.userPersistedGraphicsVisible(false);this.configurationVisible(false);this.drawVisible(true);this.freehandContainerVisible(this.polygonActive()||this.lineActive());},setDrawMode:function(mode){this.pointActive(false);this.lineActive(false);this.polylineActive(false);this.rectangleActive(false);this.polygonActive(false);this.textActive(false);this.freehandContainerVisible(false);if(mode!=null){if(mode===this.drawModes.point){this.pointActive(true);}else{if(mode===this.drawModes.line){this.lineActive(true);if(this.drawVisible()){this.freehandContainerVisible(false);}}else{if(mode===this.drawModes.polyline){this.polylineActive(true);if(this.drawVisible()){this.freehandContainerVisible(true);}}else{if(mode===this.drawModes.rectangle){this.rectangleActive(true);}else{if(mode===this.drawModes.polygon){this.polygonActive(true);if(this.drawVisible()){this.freehandContainerVisible(true);}}else{if(mode===this.drawModes.text){this.textActive(true);}}}}}}}},getCurrentDrawType:function(){if(this.polygonActive()){return this.drawModes.polygon;}else{if(this.lineActive()){return this.drawModes.line;}else{if(this.rectangleActive()){return this.drawModes.rectangle;}else{if(this.pointActive()){return this.drawModes.point;}else{if(this.polylineActive()){return this.drawModes.polyline;}else{if(this.textActive()){return this.drawModes.text;}else{return null;}}}}}}}});});},"esriviewer/ui/logging/LoggingWidgetWindow":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","../window/WindowWidget","./LoggingWidget"],function(_b44,_b45,lang,_b46,_b47){return _b44([_b46],{defaultPositioning:{x:10,y:240},windowWidth:"500px",windowHeaderText:"Logging",windowIconAltText:"Logging",windowIconClass:"commonIcons16 list",positioningParamName:"logging",postCreate:function(){this.inherited(arguments);this.loggingWidget=new _b47();this.setContent(this.loggingWidget.domNode);},initListeners:function(){this.inherited(arguments);this.subscribes.push(_b45.subscribe(VIEWER_GLOBALS.EVENTS.LOGGING.WINDOW.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_b45.subscribe(VIEWER_GLOBALS.EVENTS.LOGGING.WINDOW.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_b45.subscribe(VIEWER_GLOBALS.EVENTS.LOGGING.WINDOW.TOGGLE,lang.hitch(this,this.toggle)));},hidePopups:function(){this.inherited(arguments);if(this.loggingWidget){this.loggingWidget.hidePopups();}}});});},"esriviewer/ui/portal/PortalPublisherWindowWidget":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/dom-class","../window/WindowWidget"],function(_b48,lang,_b49,_b4a,_b4b){return _b48([_b4b],{defaultPositioning:{x:400,y:125},windowWidth:"375px",windowHeaderText:"Publish to Portal",windowIconAltText:"Publish to Portal",windowIconClass:"commonIcons16 worldAdd",positioningParamName:"portalPublisher",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_b4a.add(this.windowContent,"portalPublisherWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/portal/PortalPublisherWidget"],lang.hitch(this,function(_b4c){this.portalPublisherWidget=new _b4c();this.setContent(this.portalPublisherWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_b49.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PORTAL_PUBLISH.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_b49.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PORTAL_PUBLISH.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_b49.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PORTAL_PUBLISH.TOGGLE,lang.hitch(this,this.toggle)));}});});},"esriviewer/ui/legend/MapLegendWindow":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","../window/WindowWidget"],function(_b4d,_b4e,lang,_b4f){return _b4d([_b4f],{defaultPositioning:{x:62,y:150},windowWidth:"300px",windowHeight:"400px",windowHeaderText:"Map Legend",windowIconAltText:"Map Legend",windowIconClass:"commonIcons16 list",positioningParamName:"legend",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/legend/MapLegendWidget"],lang.hitch(this,function(_b50){this.mapLegendWidget=new _b50();this.setContent(this.mapLegendWidget.domNode);this.mapLegendWidget.startup();}));},initListeners:function(){this.inherited(arguments);_b4e.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.LEGEND.SHOW,lang.hitch(this,this.show));_b4e.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.LEGEND.HIDE,lang.hitch(this,this.hide));}});});},"esriviewer/ui/header/HeaderLogo":function(){define(["dojo/_base/declare","dojo/text!./template/HeaderLogoTemplate.html","../base/UITemplatedWidget","dojo/_base/lang","dojo/topic","./model/HeaderLogoViewModel"],function(_b51,_b52,_b53,lang,_b54,_b55){return _b51([_b53],{animate:true,templateString:_b52,constructor:function(){this.animation=VIEWER_GLOBALS.ANIMATIONS.BOUNCE.IN_DOWN;},postCreate:function(){this.viewModel=new _b55();this.inherited(arguments);ko.applyBindings(this.viewModel,this.domNode);},loadViewerConfigurationData:function(){var _b56=null;_b54.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"animationsEnabled",function(_b57){_b56=_b57;});if(_b56!=null){this.animate=_b56;}var _b58=null;_b54.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"header",function(_b59){_b58=_b59;});if(_b58!=null&&lang.isObject(_b58)){if(_b58.headerText){this.viewModel.headerMainText(_b58.headerText);}if(_b58.headerImage!=null&&_b58.headerImage!=""){this.viewModel.headerIconUrl(_b58.headerImage);}else{this.viewModel.showHeaderIcon(false);}if(_b58.contact!=null&&lang.isObject(_b58.contact)){if(_b58.contact.label){this.viewModel.contactText(_b58.contact.label);}if(_b58.contact.url){this.viewModel.contactUrl(_b58.contact.url);}}if(_b58.help!=null&&lang.isObject(_b58.help)){if(_b58.help.label){this.viewModel.helpText(_b58.help.label);}if(_b58.help.url){this.viewModel.helpUrl(_b58.help.url);}}}}});});},"dijit/MenuSeparator":function(){define(["dojo/_base/declare","dojo/dom","./_WidgetBase","./_TemplatedMixin","./_Contained","dojo/text!./templates/MenuSeparator.html"],function(_b5a,dom,_b5b,_b5c,_b5d,_b5e){return _b5a("dijit.MenuSeparator",[_b5b,_b5c,_b5d],{templateString:_b5e,buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});});},"esriviewer/ui/draw/configure/geometry/model/ConfigureTextViewModel":function(){define(["dojo/_base/declare","esri/symbols/TextSymbol","esri/symbols/Font"],function(_b5f,_b60,Font){return _b5f([],{textAligns:ko.observableArray([{value:_b60.ALIGN_START,label:"Start"},{value:_b60.ALIGN_MIDDLE,label:"Middle"},{value:_b60.ALIGN_END,label:"End"}]),textWeights:ko.observableArray([{value:Font.WEIGHT_NORMAL,label:"Normal"},{value:Font.WEIGHT_LIGHTER,label:"Lighter"},{value:Font.WEIGHT_BOLD,label:"Bold"},{value:Font.WEIGHT_BOLDER,label:"Bolder"}]),fontFaces:ko.observableArray([{value:Font.STYLE_NORMAL,label:"Normal"},{value:Font.STYLE_ITALIC,label:"Italic"},{value:Font.STYLE_OBLIQUE,label:"Oblique"}]),textSizes:ko.observableArray([{value:"8pt",label:"8"},{value:"9pt",label:"9"},{value:"10pt",label:"10"},{value:"11pt",label:"11"},{value:"12pt",label:"12"},{value:"13pt",label:"13"},{value:"14pt",label:"14"},{value:"15pt",label:"15"},{value:"20pt",label:"20"},{value:"25pt",label:"25"},{value:"30pt",label:"30"},{value:"50pt",label:"50"},{value:"75pt",label:"75"}]),angles:ko.observableArray([0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85]),constructor:function(){this.selectedTextSize=ko.observable("15pt");this.selectedTextAlign=ko.observable(_b60.ALIGN_END);this.selectedTextWeight=ko.observable(Font.WEIGHT_NORMAL);this.selectedFontFace=ko.observable(Font.STYLE_NORMAL);this.selectedAngle=ko.observable(0);}});});},"esriviewer/map/base/DistinctQuery":function(){define(["dojo/_base/declare","esri/tasks/query"],function(_b61,_b62){return _b61([_b62],{toJson:function(){var json=this.inherited(arguments);json.returnDistinctValues=true;return json;}});});},"esriviewer/base/DataLoaderSupport":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/xhr","esri/config","esri/request"],function(_b63,lang,xhr,_b64,_b65){return _b63([],{loadJson:function(url,_b66,_b67){if(url==null||url==""||_b66==null||!lang.isFunction(_b66)){return;}var _b68={url:url,handleAs:"json",load:_b66};if(_b67!=null&&lang.isFunction(_b67)){_b68.error=_b67;}xhr.get(_b68);},loadProxiedJson:function(url,_b69,_b6a){if(_b64==null||_b64.defaults==null||_b64.defaults.io==null||_b64.defaults.io.proxyUrl==null){alert("You Must Configure a proxy for this request: "+url);return;}this.loadJson(_b64.defaults.io.proxyUrl+"?"+url,_b69,_b6a);},loadJsonP:function(url,_b6b,_b6c,_b6d,_b6e){if(_b6d==null){_b6d=lang.hitch(this,function(_b6f){var msg="Could not resource : "+url+". Please verify URL is accessible.";});}if(_b6e==null){_b6e="callback";}var _b70={callbackParamName:_b6e,content:_b6b,url:url};_b65(_b70).then(_b6c,_b6d);},loadText:function(url,_b71,_b72){if(url==null||url==""||!lang.isFunction(_b71)){return;}var _b73={url:url,handleAs:"text",load:_b71};if(_b72!=null&&lang.isFunction(_b72)){_b73.error=_b72;}xhr.get(_b73);}});});},"esriviewer/ui/draw/DrawWindow":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/dom-class","../window/WindowWidget","./DrawWidget"],function(_b74,_b75,lang,_b76,_b77,_b78){return _b74([_b77],{defaultPositioning:{x:500,y:50},windowWidth:"335px",windowHeaderText:"Draw",windowIconAltText:"Draw",positioningParamName:"draw",windowIconClass:"commonIcons16 pencil",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_b76.add(this.windowContent,"drawWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();this.drawWidget=new _b78();this.setContent(this.drawWidget.domNode);},initListeners:function(){this.inherited(arguments);this.subscribes.push(_b75.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.DRAW.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_b75.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.DRAW.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_b75.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.DRAW.TOGGLE,lang.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.drawWidget){if(this.drawWidget.currentDrawType!=null){this.drawWidget.clearDraw();}}},hidePopups:function(){this.inherited(arguments);if(this.drawWidget){this.drawWidget.hidePopups();}}});});},"esriviewer/ui/query/QueryBuilderWindowWidget":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/dom-class","../window/WindowWidget","dojox/html/metrics"],function(_b79,lang,_b7a,_b7b,_b7c,_b7d){return _b79([_b7c],{defaultPositioning:{x:400,y:125},pendingQueryLayerCallback:null,minWidth:400,resizable:true,resizeAxis:"xy",windowHeight:"38em",windowHeaderText:"Query Builder",windowIconAltText:"Query Builder",windowIconClass:"commonIcons16 sql",positioningParamName:"queryBuilder",constructor:function(){var _b7e=_b7d.getFontMeasurements();this.minHeight=38*_b7e["1em"];this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_b7b.add(this.windowContent,"queryBuilderWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/query/QueryBuilderWidget"],lang.hitch(this,function(_b7f){this.queryBuilderWidget=new _b7f();this.setContent(this.queryBuilderWidget.domNode);if(this.pendingQueryLayerCallback!=null&&lang.isFunction(this.pendingQueryLayerCallback)){this.pendingQueryLayerCallback();}}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_b7a.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.QUERY_BUILDER.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_b7a.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.QUERY_BUILDER.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_b7a.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.QUERY_BUILDER.TOGGLE,lang.hitch(this,this.toggle)));_b7a.subscribe(VIEWER_GLOBALS.EVENTS.QUERY_BUILDER.SET_IMAGE_SERVICE_LAYER,lang.hitch(this,this.setImageServiceLayer));_b7a.subscribe(VIEWER_GLOBALS.EVENTS.QUERY_BUILDER.SET_MAP_SERVICE_LAYER,lang.hitch(this,this.setMapServiceLayer));_b7a.subscribe(VIEWER_GLOBALS.EVENTS.QUERY_BUILDER.SET_FEATURE_SERVICE_LAYER,lang.hitch(this,this.setFeatureServiceLayer));},hide:function(){this.inherited(arguments);if(this.queryBuilderWidget){this.queryBuilderWidget.clearGraphics();}},setImageServiceLayer:function(_b80){if(this.queryBuilderWidget==null){this.pendingQueryLayerCallback=lang.hitch(this,function(_b81){this.queryBuilderWidget.setImageServiceLayer(_b81);this.pendingQueryLayerCallback=null;},_b80);}else{this.queryBuilderWidget.setImageServiceLayer(_b80);}this.show();},setMapServiceLayer:function(_b82,_b83){if(this.queryBuilderWidget==null){this.pendingQueryLayerCallback=lang.hitch(this,function(_b84,_b85){this.queryBuilderWidget.setMapServiceLayer(_b84,_b85);this.pendingQueryLayerCallback=null;},_b82,_b83);}else{this.queryBuilderWidget.setMapServiceLayer(_b82,_b83);}this.show();},setFeatureServiceLayer:function(_b86){if(this.queryBuilderWidget==null){this.pendingQueryLayerCallback=lang.hitch(this,function(_b87){this.queryBuilderWidget.setFeatureServiceLayer(_b87);this.pendingQueryLayerCallback=null;},_b86);}else{this.queryBuilderWidget.setFeatureServiceLayer(_b86);}this.show();}});});},"dojo/require":function(){define(["./_base/loader"],function(_b88){return {dynamic:0,normalize:function(id){return id;},load:_b88.require};});},"xstyle/css":function(){define(["require"],function(_b89){"use strict";function _b8a(tag,id,_b8b){var _b8c=document.documentElement;var _b8d=_b8c.insertBefore(document.createElement(tag),_b8c.firstChild);_b8d.id=id;var _b8e=(_b8d.currentStyle||getComputedStyle(_b8d,null))[_b8b];_b8c.removeChild(_b8d);return _b8e;};return {load:function(_b8f,_b90,_b91,_b92){var url=_b90.toUrl(_b8f);var _b93=_b90.cache["url:"+url];if(_b93){if(_b93.xCss){var _b94=_b93.parser;var xCss=_b93.xCss;_b93=_b93.cssText;}_b89(["./util/createStyleSheet"],function(_b95){_b95(_b93);});if(xCss){}return _b96();}function _b96(){var _b97=_b8a("x-parse",null,"content");if(_b97&&_b97!="none"){_b90([eval(_b97)],_b91);}else{_b91();}};var _b98=_b8a("div",_b8f.replace(/\//g,"-").replace(/\..*/,"")+"-loaded","display");if(_b98=="none"){return _b96();}_b89(["./load-css"],function(load){load(url,_b96);});}};});},"esriviewer/ui/draw/configure/geometry/model/ConfigurePolygonViewModel":function(){define(["dojo/_base/declare","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol"],function(_b99,_b9a,_b9b){return _b99([],{fillStyles:ko.observableArray([{value:_b9b.STYLE_BACKWARD_DIAGONAL,label:"Backward Diagonal"},{value:_b9b.STYLE_CROSS,label:"Cross"},{value:_b9b.STYLE_DIAGONAL_CROSS,label:"Diagonal Cross"},{value:_b9b.STYLE_FORWARD_DIAGONAL,label:"Forward Diagonal"},{value:_b9b.STYLE_HORIZONTAL,label:"Horizontal Lines"},{value:_b9b.STYLE_SOLID,label:"Solid"},{value:_b9b.STYLE_VERTICAL,label:"Vertical Lines"},{value:_b9b.STYLE_NULL,label:"None"}]),outlineStyles:ko.observableArray([{value:_b9a.STYLE_DASH,label:"Dashed Line"},{value:_b9a.STYLE_DASHDOT,label:"Dash Dot Line"},{value:_b9a.STYLE_DASHDOTDOT,label:"Dash Dot Dot Line"},{value:_b9a.STYLE_DOT,label:"Dotted Line"},{value:_b9a.STYLE_SOLID,label:"Solid Line"},{value:_b9a.STYLE_NULL,label:"None"}]),outlineWidths:ko.observableArray([1,2,3,4,5,6,7,8,9,10,15,20,25,30,40,50]),angles:ko.observableArray([0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85]),constructor:function(){this.selectedFillStyle=ko.observable(_b9b.STYLE_SOLID);this.selectedOutlineStyle=ko.observable(_b9a.STYLE_SOLID);this.selectedAngle=ko.observable(0);this.selectedOutlineWidth=ko.observable(1);this.outlineColorActive=ko.observable(true);this.fillColorActive=ko.observable(false);},setOutlineColorMode:function(){this.outlineColorActive(true);this.fillColorActive(false);},setFillColorMode:function(){this.outlineColorActive(false);this.fillColorActive(true);}});});},"dojox/storage/CookieStorageProvider":function(){define(["dijit","dojo","dojox","dojo/require!dojox/storage/Provider,dojox/storage/manager,dojo/cookie"],function(_b9c,dojo,_b9d){dojo.provide("dojox.storage.CookieStorageProvider");dojo.require("dojox.storage.Provider");dojo.require("dojox.storage.manager");dojo.require("dojo.cookie");dojo.declare("dojox.storage.CookieStorageProvider",[_b9d.storage.Provider],{store:null,cookieName:"dojoxStorageCookie",storageLife:730,initialize:function(){this.store=dojo.fromJson(dojo.cookie(this.cookieName))||{};this.initialized=true;_b9d.storage.manager.loaded();},isAvailable:function(){return dojo.cookie.isSupported();},put:function(key,_b9e,_b9f,_ba0){this._assertIsValidKey(key);_ba0=_ba0||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_ba0);fullKey=this.getFullKey(key,_ba0);this.store[fullKey]=dojo.toJson(_b9e);this._save();var _ba1=dojo.toJson(this.store)===dojo.cookie(this.cookieName);if(!_ba1){this.remove(key,_ba0);}if(_b9f){_b9f(_ba1?this.SUCCESS:this.FAILED,key,null,_ba0);}},get:function(key,_ba2){this._assertIsValidKey(key);_ba2=_ba2||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_ba2);key=this.getFullKey(key,_ba2);return this.store[key]?dojo.fromJson(this.store[key]):null;},getKeys:function(_ba3){_ba3=_ba3||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_ba3);_ba3="__"+_ba3+"_";var keys=[];for(var _ba4 in this.store){if(this._beginsWith(_ba4,_ba3)){_ba4=_ba4.substring(_ba3.length);keys.push(_ba4);}}return keys;},clear:function(_ba5){_ba5=_ba5||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_ba5);_ba5="__"+_ba5+"_";for(var _ba6 in this.store){if(this._beginsWith(_ba6,_ba5)){delete (this.store[_ba6]);}}this._save();},remove:function(key,_ba7){_ba7=_ba7||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_ba7);this._assertIsValidKey(key);key=this.getFullKey(key,_ba7);delete this.store[key];this._save();},getNamespaces:function(){var _ba8=[this.DEFAULT_NAMESPACE];var _ba9={};_ba9[this.DEFAULT_NAMESPACE]=true;var _baa=/^__([^_]*)_/;for(var _bab in this.store){if(_baa.test(_bab)==true){var _bac=_bab.match(_baa)[1];if(typeof _ba9[_bac]=="undefined"){_ba9[_bac]=true;_ba8.push(_bac);}}}return _ba8;},isPermanent:function(){return true;},getMaximumSize:function(){return 4;},hasSettingsUI:function(){return false;},isValidKey:function(_bad){if(_bad===null||_bad===undefined){return false;}return /^[0-9A-Za-z_-]*$/.test(_bad);},isValidNamespace:function(_bae){if(_bae===null||_bae===undefined){return false;}return /^[0-9A-Za-z-]*$/.test(_bae);},getFullKey:function(key,_baf){return "__"+_baf+"_"+key;},_save:function(){dojo.cookie(this.cookieName,dojo.toJson(this.store),{expires:this.storageLife});},_beginsWith:function(_bb0,_bb1){if(_bb1.length>_bb0.length){return false;}return _bb0.substring(0,_bb1.length)===_bb1;},_assertIsValidNamespace:function(_bb2){if(this.isValidNamespace(_bb2)===false){throw new Error("Invalid namespace given: "+_bb2);}},_assertIsValidKey:function(key){if(this.isValidKey(key)===false){throw new Error("Invalid key given: "+key);}}});_b9d.storage.manager.register("dojox.storage.CookieStorageProvider",new _b9d.storage.CookieStorageProvider());});},"esriviewer/ui/accordion/ToolsAccordion":function(){define(["dojo/_base/declare","dojo/text!./template/ToolsAccordionTemplate.html","dojo/topic","dojo/_base/lang","dojo/on","dijit/layout/AccordionContainer","dojo/dom-style","dojo/dom-class","dojo/dom-attr","dojo/dom-construct","dojo/dnd/Moveable","../base/UITemplatedWidget","dojo/_base/connect"],function(_bb3,_bb4,_bb5,lang,on,_bb6,_bb7,_bb8,_bb9,_bba,_bbb,_bbc,con){return _bb3([_bbc],{templateString:_bb4,isPositionedByConfig:true,positionForHeader:false,headerVisiblePositioning:{x:75,y:145},defaultPositioning:{x:75,y:100},allowCollapse:true,movable:false,isFirstAddedItem:true,showOnLoad:true,positioningParamName:"accordion",returnToOriginOnShow:true,constructor:function(){this.accordion=new _bb6();_bb8.add(this.accordion.domNode,"toolsAccordion");this.visible=true;},postCreate:function(){this.inherited(arguments);if(this.allowCollapse){this.addMinimizeIcon();}_bba.place(this.accordion.domNode,this.domNode);_bb5.publish(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.LOAD_DEFAULT_TOOLS);if(!this.showOnLoad){this.hide();}if(this.positionForHeader){this.creationPositioning.x=this.headerVisiblePositioning.x;this.creationPositioning.y=this.headerVisiblePositioning.y;}this.returnToOrigin();},loadViewerConfigurationData:function(){var _bbd=null;_bb5.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"toolsAccordion",function(_bbe){_bbd=_bbe;});if(_bbd&&_bbd.showOnLoad!=null){this.showOnLoad=_bbd.showOnLoad;}var _bbf;_bb5.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"header",function(_bc0){_bbf=_bc0;});if(_bbf!=null&&lang.isObject(_bbf)){this.positionForHeader=_bbf.display===true&&_bbf.small!=true;}},initMover:function(){var _bc1=_bba.create("div",{title:"Move",className:"accordionMoveIcon accordionAction move"});_bba.place(_bc1,this.domNode);this.mover=new _bbb(this.domNode,{handle:_bc1});con.connect(this.mover,"onMove",VIEWER_UTILS,VIEWER_UTILS.handleContainerMoved);},placeAt:function(node){_bba.place(this.domNode,node);if(this.toolsAccordionActions){_bba.place(this.toolsAccordionActions,node);}if(this.movable){this.initMover();}},addMinimizeIcon:function(){if(this.minimizeIconElement==null){this.minimizeIconElement=_bba.create("div",{title:"Minimize",className:"accordionMimimizeIcon accordionAction minimize"});_bba.place(this.minimizeIconElement,this.domNode);on(this.minimizeIconElement,"click",lang.hitch(this,this.hide));if(!this.movable){_bb7.set(this.minimizeIconElement,"right","5px");}}},addItem:function(_bc2){_bb8.add(_bc2.domNode,"accordionChild");this.accordion.addChild(_bc2);if(this.isFirstAddedItem){this.isFirstAddedItem=false;this.selectedChild=_bc2;}},initListeners:function(){this.inherited(arguments);_bb5.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.TOGGLE,lang.hitch(this,this.toggle));_bb5.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.SHOW,lang.hitch(this,this.show));_bb5.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.HIDE,lang.hitch(this,this.hide));_bb5.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.ADD_ITEM,lang.hitch(this,this.addItem));_bb5.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.SHOW_ITEM,lang.hitch(this,this.selectChild));},startup:function(){this.accordion.startup();},destroy:function(){if(this.imageryDisplayWidget){this.imageryDisplayWidget.destroy();}if(this.imageryQueryFilterManager){this.imageryQueryFilterManager.destroy();}},toggle:function(){if(this.visible){this.hide();}else{this.show();}},show:function(){_bb7.set(this.domNode,"display","block");this.visible=true;if(this.toolsAccordionActions){_bb9.set(this.toolsAccordionActions,"title","Collapse Tools");if(!_bb8.contains(this.toolsAccordionActions,"toolsAccordionCollapserExpanded")){_bb8.add(this.toolsAccordionActions,"toolsAccordionCollapserExpanded");}_bb8.remove(this.toolsAccordionActions,"toolsAccordionCollapserCollapsed");}if(this.returnToOriginOnShow){this.returnToOrigin();}},returnToOrigin:function(){_bb7.set(this.domNode,this.creationPositioning.alignX,this.creationPositioning.x+"px");_bb7.set(this.domNode,this.creationPositioning.alignY,this.creationPositioning.y+"px");},hide:function(){_bb7.set(this.domNode,"display","none");this.visible=false;if(this.toolsAccordionActions){_bb9.set(this.toolsAccordionActions,"title","Show Tools");if(!_bb8.contains(this.toolsAccordionActions,"toolsAccordionCollapserCollapsed")){_bb8.add(this.toolsAccordionActions,"toolsAccordionCollapserCollapsed");}_bb8.remove(this.toolsAccordionActions,"toolsAccordionCollapserExpanded");}_bb5.publish(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.HIDE_COMPLETE);},toggleVisibility:function(){if(this.visible){this.hide();}else{this.show();}},selectChild:function(_bc3){this.accordion.selectChild(_bc3);this.selectedChild=_bc3;}});});},"esriviewer/ui/draw/base/GraphicsLocalStorageMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","dojo/topic"],function(_bc4,lang,has,_bc5){return _bc4([],{localStoragePersistSupported:true,constructor:function(){if(!(has("ie")<8)){this.localStoragePersistSupported=false;}this.storageProvider=dojox.storage.manager.getProvider();if(this.storageProvider){this.localStoragePersistSupported=true;}this.persistedUserGraphics=this.loadPersistedUserGraphics();},deleteAllPersistedGraphics:function(){if(this.storageProvider){this.storageProvider.remove(VIEWER_GLOBALS.STORAGE.LABELS.USER_GRAPHICS);}},deleteUserPersistedGraphics:function(_bc6){if(this.persistUserGraphicsLabelExists(_bc6)){delete this.persistedUserGraphics[_bc6];this.persist();}var _bc7=false;for(var key in this.persistedUserGraphics){_bc7=true;break;}return _bc7;},persistUserGraphicsLabelExists:function(_bc8){return this.persistedUserGraphics[_bc8]!=null;},persistUserGraphics:function(_bc9,_bca){if(_bc9==null||_bc9==""||_bca==null||!lang.isArray(_bca)||_bca.length==0){return null;}if(this.persistUserGraphicsLabelExists(_bc9)){VIEWER_UTILS.log("Attempted to save graphics with an existing label: "+_bc9,VIEWER_GLOBALS.LOG_TYPE.ERROR);_bc5.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Cannot save graphics. Label already exists.");return null;}else{var _bcb=[];for(var i=0;i<_bca.length;i++){_bcb.push({label:_bca[i].label,graphic:_bca[i].graphic.toJson()});}var _bcc={label:_bc9,graphics:_bcb};this.persistedUserGraphics[_bc9]=_bcc;this.persist();VIEWER_UTILS.log("Saved graphics with label: "+_bc9,VIEWER_GLOBALS.LOG_TYPE.INFO);_bc5.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Graphics Saved");return _bcc;}},loadPersistedUserGraphics:function(){if(this.storageProvider){if(this.storageProvider.hasKey(VIEWER_GLOBALS.STORAGE.LABELS.USER_GRAPHICS)){return this.storageProvider.get(VIEWER_GLOBALS.STORAGE.LABELS.USER_GRAPHICS);}}return {};},persist:function(){this.storageProvider.put(VIEWER_GLOBALS.STORAGE.LABELS.USER_GRAPHICS,this.persistedUserGraphics);}});});},"esriviewer/ui/navigation/NavigationWidget":function(){define(["dojo/_base/declare","dojo/text!./template/NavigationWidgetTemplate.html","dojo/topic","dojo/dom-class","../base/UITemplatedWidget","dojo/_base/lang","./model/NavigationWidgetViewModel"],function(_bcd,_bce,_bcf,_bd0,_bd1,lang,_bd2){return _bcd([_bd1],{defaultPositioning:{y:5,x:0},positionWithSmallHeader:false,isPositionedByConfig:true,positioningParamName:"navigation",templateString:_bce,constructor:function(_bd3){lang.mixin(this,_bd3||{});this.visible=true;},postCreate:function(){this.viewModel=new _bd2();this.inherited(arguments);ko.applyBindings(this.viewModel,this.domNode);if(this.positionWithSmallHeader){_bd0.add(this.navigationToolbar,"navigationWithSmallHeaderPositioning");}this.show();},loadViewerConfigurationData:function(){var _bd4;_bcf.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"header",function(_bd5){_bd4=_bd5;});if(_bd4!=null&&lang.isObject(_bd4)){this.positionWithSmallHeader=_bd4.display===true&&_bd4.small===true;}},handleToggle:function(){this.viewModel.visible(!this.viewModel.visible());},show:function(){this.viewModel.visible(true);},hide:function(){this.viewModel.visible(false);}});});},"dojox/storage/FlashStorageProvider":function(){define(["dijit","dojo","dojox","dojo/require!dojox/flash,dojox/storage/manager,dojox/storage/Provider"],function(_bd6,dojo,_bd7){dojo.provide("dojox.storage.FlashStorageProvider");dojo.require("dojox.flash");dojo.require("dojox.storage.manager");dojo.require("dojox.storage.Provider");dojo.declare("dojox.storage.FlashStorageProvider",_bd7.storage.Provider,{initialized:false,_available:null,_statusHandler:null,_flashReady:false,_pageReady:false,initialize:function(){if(dojo.config["disableFlashStorage"]==true){return;}_bd7.flash.addLoadedListener(dojo.hitch(this,function(){this._flashReady=true;if(this._flashReady&&this._pageReady){this._loaded();}}));var _bd8=dojo.moduleUrl("dojox","storage/Storage.swf").toString();_bd7.flash.setSwf(_bd8,false);dojo.connect(dojo,"loaded",this,function(){this._pageReady=true;if(this._flashReady&&this._pageReady){this._loaded();}});},setFlushDelay:function(_bd9){if(_bd9===null||typeof _bd9==="undefined"||isNaN(_bd9)){throw new Error("Invalid argunment: "+_bd9);}_bd7.flash.comm.setFlushDelay(String(_bd9));},getFlushDelay:function(){return Number(_bd7.flash.comm.getFlushDelay());},flush:function(_bda){if(_bda==null||typeof _bda=="undefined"){_bda=_bd7.storage.DEFAULT_NAMESPACE;}_bd7.flash.comm.flush(_bda);},isAvailable:function(){return (this._available=!dojo.config["disableFlashStorage"]);},put:function(key,_bdb,_bdc,_bdd){if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}if(!_bdd){_bdd=_bd7.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_bdd)){throw new Error("Invalid namespace given: "+_bdd);}this._statusHandler=_bdc;if(dojo.isString(_bdb)){_bdb="string:"+_bdb;}else{_bdb=dojo.toJson(_bdb);}_bd7.flash.comm.put(key,_bdb,_bdd);},putMultiple:function(keys,_bde,_bdf,_be0){if(!this.isValidKeyArray(keys)||!_bde instanceof Array||keys.length!=_bde.length){throw new Error("Invalid arguments: keys = ["+keys+"], values = ["+_bde+"]");}if(!_be0){_be0=_bd7.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_be0)){throw new Error("Invalid namespace given: "+_be0);}this._statusHandler=_bdf;var _be1=keys.join(",");var _be2=[];for(var i=0;i<_bde.length;i++){if(dojo.isString(_bde[i])){_bde[i]="string:"+_bde[i];}else{_bde[i]=dojo.toJson(_bde[i]);}_be2[i]=_bde[i].length;}var _be3=_bde.join("");var _be4=_be2.join(",");_bd7.flash.comm.putMultiple(_be1,_be3,_be4,_be0);},get:function(key,_be5){if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}if(!_be5){_be5=_bd7.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_be5)){throw new Error("Invalid namespace given: "+_be5);}var _be6=_bd7.flash.comm.get(key,_be5);if(_be6==""){return null;}return this._destringify(_be6);},getMultiple:function(keys,_be7){if(!this.isValidKeyArray(keys)){throw new ("Invalid key array given: "+keys);}if(!_be7){_be7=_bd7.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_be7)){throw new Error("Invalid namespace given: "+_be7);}var _be8=keys.join(",");var _be9=_bd7.flash.comm.getMultiple(_be8,_be7);var _bea=eval("("+_be9+")");for(var i=0;i<_bea.length;i++){_bea[i]=(_bea[i]=="")?null:this._destringify(_bea[i]);}return _bea;},_destringify:function(_beb){if(dojo.isString(_beb)&&(/^string:/.test(_beb))){_beb=_beb.substring("string:".length);}else{_beb=dojo.fromJson(_beb);}return _beb;},getKeys:function(_bec){if(!_bec){_bec=_bd7.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_bec)){throw new Error("Invalid namespace given: "+_bec);}var _bed=_bd7.flash.comm.getKeys(_bec);if(_bed==null||_bed=="null"){_bed="";}_bed=_bed.split(",");_bed.sort();return _bed;},getNamespaces:function(){var _bee=_bd7.flash.comm.getNamespaces();if(_bee==null||_bee=="null"){_bee=_bd7.storage.DEFAULT_NAMESPACE;}_bee=_bee.split(",");_bee.sort();return _bee;},clear:function(_bef){if(!_bef){_bef=_bd7.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_bef)){throw new Error("Invalid namespace given: "+_bef);}_bd7.flash.comm.clear(_bef);},remove:function(key,_bf0){if(!_bf0){_bf0=_bd7.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_bf0)){throw new Error("Invalid namespace given: "+_bf0);}_bd7.flash.comm.remove(key,_bf0);},removeMultiple:function(keys,_bf1){if(!this.isValidKeyArray(keys)){dojo.raise("Invalid key array given: "+keys);}if(!_bf1){_bf1=_bd7.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_bf1)){throw new Error("Invalid namespace given: "+_bf1);}var _bf2=keys.join(",");_bd7.flash.comm.removeMultiple(_bf2,_bf1);},isPermanent:function(){return true;},getMaximumSize:function(){return _bd7.storage.SIZE_NO_LIMIT;},hasSettingsUI:function(){return true;},showSettingsUI:function(){_bd7.flash.comm.showSettings();_bd7.flash.obj.setVisible(true);_bd7.flash.obj.center();},hideSettingsUI:function(){_bd7.flash.obj.setVisible(false);if(dojo.isFunction(_bd7.storage.onHideSettingsUI)){_bd7.storage.onHideSettingsUI.call(null);}},getResourceList:function(){return [];},_loaded:function(){this._allNamespaces=this.getNamespaces();this.initialized=true;_bd7.storage.manager.loaded();},_onStatus:function(_bf3,key,_bf4){var ds=_bd7.storage;var dfo=_bd7.flash.obj;if(_bf3==ds.PENDING){dfo.center();dfo.setVisible(true);}else{dfo.setVisible(false);}if(ds._statusHandler){ds._statusHandler.call(null,_bf3,key,null,_bf4);}}});_bd7.storage.manager.register("dojox.storage.FlashStorageProvider",new _bd7.storage.FlashStorageProvider());});},"esriviewer/ui/transparency/LayersTransparencyWindowWidget":function(){define(["dojo/_base/declare","dojo/topic","dojo/dom-class","dojo/_base/lang","../window/WindowWidget"],function(_bf5,_bf6,_bf7,lang,_bf8){return _bf5([_bf8],{defaultPositioning:{x:700,y:50},windowHeight:"250px",windowWidth:"300px",windowHeaderText:"Layer Transparency",windowIconAltText:"Layer Transparency",windowIconClass:"commonIcons16 slider",positioningParamName:"layerTransparency",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_bf7.add(this.windowContent,"layerTransparencyWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/transparency/LayersTransparencyWidget"],lang.hitch(this,function(_bf9){this.layersTransparencyWidget=new _bf9();this.setContent(this.layersTransparencyWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_bf6.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.TRANSPARENCY.WINDOW.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_bf6.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.TRANSPARENCY.WINDOW.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_bf6.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.TRANSPARENCY.WINDOW.TOGGLE,lang.hitch(this,this.toggle)));}});});},"esriviewer/ui/messaging/MessagingWidget":function(){define(["dojo/_base/declare","dojo/text!./template/MessagingWidgetTemplate.html","dojo/topic","dojo/_base/lang","../base/UITemplatedWidget","dojox/timing","./model/MessagingWidgetViewModel"],function(_bfa,_bfb,_bfc,lang,_bfd,_bfe,_bff){return _bfa([_bfd],{templateString:_bfb,defaultTimerInterval:4000,isPositionedByConfig:true,defaultPositioning:{x:375,y:50},positioningParamName:"messaging",postCreate:function(){this.inherited(arguments);this.viewModel=new _bff();ko.applyBindings(this.viewModel,this.domNode);this.messageTimer=new _bfe.Timer(this.defaultTimerInterval);this.messageTimer.onTick=lang.hitch(this,this.hideMessage);this.hideMessage();},initListeners:function(){this.inherited(arguments);_bfc.subscribe(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,lang.hitch(this,this.showMessage));_bfc.subscribe(VIEWER_GLOBALS.EVENTS.MESSAGING.HIDE,lang.hitch(this,this.hideMessage));},showMessage:function(_c00,_c01){this.viewModel.showMessage(_c00);_c01=(_c01==null)?this.defaultTimerInterval:_c01;this.messageTimer.setInterval(_c01);this.messageTimer.start();},hideMessage:function(){if(this.messageTimer){this.messageTimer.stop();}this.viewModel.hideMessage();}});});},"esriviewer/ui/pointupload/PointUploadWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","../window/WindowWidget"],function(_c02,lang,_c03,_c04){return _c02([_c04],{defaultPositioning:{x:510,y:45},windowWidth:"20%",windowHeaderText:"CSV Point Upload",windowIconAltText:"CSV Point Upload",windowIconClass:"commonIcons16 upload",positioningParamName:"pointUpload",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/pointupload/PointUploadWidget"],lang.hitch(this,function(_c05){this.pointUploadWidget=new _c05();this.setContent(this.pointUploadWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_c03.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.POINT_UPLOAD.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_c03.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.POINT_UPLOAD.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_c03.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.POINT_UPLOAD.TOGGLE,lang.hitch(this,this.toggle)));}});});},"esriviewer/ui/messaging/model/MessagingWidgetViewModel":function(){define(["dojo/_base/declare"],function(_c06){return _c06([],{constructor:function(){this.message=ko.observable("");this.visible=ko.observable(false);},showMessage:function(_c07){if(_c07!=null&&_c07!=""){this.visible(true);this.message(_c07);}},hideMessage:function(){this.visible(false);}});});},"dojo/request/notify":function(){define(["../Evented","../_base/lang","./util"],function(_c08,lang,util){var _c09=0,_c0a=[].slice;var hub=lang.mixin(new _c08,{onsend:function(data){if(!_c09){this.emit("start");}_c09++;},_onload:function(data){this.emit("done",data);},_onerror:function(data){this.emit("done",data);},_ondone:function(data){if(--_c09<=0){_c09=0;this.emit("stop");}},emit:function(type,_c0b){var _c0c=_c08.prototype.emit.apply(this,arguments);if(this["_on"+type]){this["_on"+type].apply(this,_c0a.call(arguments,1));}return _c0c;}});function _c0d(type,_c0e){return hub.on(type,_c0e);};_c0d.emit=function(type,_c0f,_c10){return hub.emit(type,_c0f,_c10);};return util.notify=_c0d;});},"esriviewer/ui/draw/configure/geometry/model/ConfigureLineViewModel":function(){define(["dojo/_base/declare","esri/symbols/SimpleLineSymbol"],function(_c11,_c12){return _c11([],{lineStyles:ko.observableArray([{value:_c12.STYLE_DASH,label:"Dashed Line"},{value:_c12.STYLE_DASHDOT,label:"Dash Dot Line"},{value:_c12.STYLE_DASHDOTDOT,label:"Dash Dot Dot Line"},{value:_c12.STYLE_DOT,label:"Dotted Line"},{value:_c12.STYLE_SOLID,label:"Solid Line"},{value:_c12.STYLE_NULL,label:"None"}]),lineWidths:ko.observableArray([1,2,3,4,5,6,7,8,9,10,15,20,25,30,40,50]),constructor:function(){this.selectedLineStyle=ko.observable(_c12.STYLE_SOLID);this.selectedWidth=ko.observable(2);}});});},"dijit/form/HorizontalSlider":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dnd/move","dojo/_base/fx","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/dnd/Moveable","dojo/dnd/Mover","dojo/query","dojo/mouse","dojo/on","../_base/manager","../focus","../typematic","./Button","./_FormValueWidget","../_Container","dojo/text!./templates/HorizontalSlider.html"],function(_c13,_c14,move,fx,_c15,_c16,keys,lang,has,_c17,_c18,_c19,_c1a,on,_c1b,_c1c,_c1d,_c1e,_c1f,_c20,_c21){var _c22=_c14("dijit.form._SliderMover",_c18,{onMouseMove:function(e){var _c23=this.widget;var _c24=_c23._abspos;if(!_c24){_c24=_c23._abspos=_c15.position(_c23.sliderBarContainer,true);_c23._setPixelValue_=lang.hitch(_c23,"_setPixelValue");_c23._isReversed_=_c23._isReversed();}var _c25=e[_c23._mousePixelCoord]-_c24[_c23._startingPixelCoord];_c23._setPixelValue_(_c23._isReversed_?(_c24[_c23._pixelCount]-_c25):_c25,_c24[_c23._pixelCount],false);},destroy:function(e){_c18.prototype.destroy.apply(this,arguments);var _c26=this.widget;_c26._abspos=null;_c26._setValueAttr(_c26.value,true);}});var _c27=_c14("dijit.form.HorizontalSlider",[_c1f,_c20],{templateString:_c21,value:0,showButtons:true,minimum:0,maximum:100,discreteValues:Infinity,pageIncrement:2,clickSelect:true,slideDuration:_c1b.defaultDuration,_setIdAttr:"",_setNameAttr:"valueNode",baseClass:"dijitSlider",cssStateNodes:{incrementButton:"dijitSliderIncrementButton",decrementButton:"dijitSliderDecrementButton",focusNode:"dijitSliderThumb"},_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_handleOffsetCoord:"left",_progressPixelSize:"width",_onKeyUp:function(e){if(this.disabled||this.readOnly||e.altKey||e.ctrlKey||e.metaKey){return;}this._setValueAttr(this.value,true);},_onKeyDown:function(e){if(this.disabled||this.readOnly||e.altKey||e.ctrlKey||e.metaKey){return;}switch(e.keyCode){case keys.HOME:this._setValueAttr(this.minimum,false);break;case keys.END:this._setValueAttr(this.maximum,false);break;case ((this._descending||this.isLeftToRight())?keys.RIGHT_ARROW:keys.LEFT_ARROW):case (this._descending===false?keys.DOWN_ARROW:keys.UP_ARROW):case (this._descending===false?keys.PAGE_DOWN:keys.PAGE_UP):this.increment(e);break;case ((this._descending||this.isLeftToRight())?keys.LEFT_ARROW:keys.RIGHT_ARROW):case (this._descending===false?keys.UP_ARROW:keys.DOWN_ARROW):case (this._descending===false?keys.PAGE_UP:keys.PAGE_DOWN):this.decrement(e);break;default:return;}e.stopPropagation();e.preventDefault();},_onHandleClick:function(e){if(this.disabled||this.readOnly){return;}if(!has("ie")){_c1c.focus(this.sliderHandle);}e.stopPropagation();e.preventDefault();},_isReversed:function(){return !this.isLeftToRight();},_onBarClick:function(e){if(this.disabled||this.readOnly||!this.clickSelect){return;}_c1c.focus(this.sliderHandle);e.stopPropagation();e.preventDefault();var _c28=_c15.position(this.sliderBarContainer,true);var _c29=e[this._mousePixelCoord]-_c28[this._startingPixelCoord];this._setPixelValue(this._isReversed()?(_c28[this._pixelCount]-_c29):_c29,_c28[this._pixelCount],true);this._movable.onMouseDown(e);},_setPixelValue:function(_c2a,_c2b,_c2c){if(this.disabled||this.readOnly){return;}var _c2d=this.discreteValues;if(_c2d<=1||_c2d==Infinity){_c2d=_c2b;}_c2d--;var _c2e=_c2b/_c2d;var _c2f=Math.round(_c2a/_c2e);this._setValueAttr(Math.max(Math.min((this.maximum-this.minimum)*_c2f/_c2d+this.minimum,this.maximum),this.minimum),_c2c);},_setValueAttr:function(_c30,_c31){this._set("value",_c30);this.valueNode.value=_c30;this.focusNode.setAttribute("aria-valuenow",_c30);this.inherited(arguments);var _c32=(_c30-this.minimum)/(this.maximum-this.minimum);var _c33=(this._descending===false)?this.remainingBar:this.progressBar;var _c34=(this._descending===false)?this.progressBar:this.remainingBar;if(this._inProgressAnim&&this._inProgressAnim.status!="stopped"){this._inProgressAnim.stop(true);}if(_c31&&this.slideDuration>0&&_c33.style[this._progressPixelSize]){var _c35=this;var _c36={};var _c37=parseFloat(_c33.style[this._progressPixelSize]);var _c38=this.slideDuration*(_c32-_c37/100);if(_c38==0){return;}if(_c38<0){_c38=0-_c38;}_c36[this._progressPixelSize]={start:_c37,end:_c32*100,units:"%"};this._inProgressAnim=fx.animateProperty({node:_c33,duration:_c38,onAnimate:function(v){_c34.style[_c35._progressPixelSize]=(100-parseFloat(v[_c35._progressPixelSize]))+"%";},onEnd:function(){delete _c35._inProgressAnim;},properties:_c36});this._inProgressAnim.play();}else{_c33.style[this._progressPixelSize]=(_c32*100)+"%";_c34.style[this._progressPixelSize]=((1-_c32)*100)+"%";}},_bumpValue:function(_c39,_c3a){if(this.disabled||this.readOnly){return;}var s=_c16.getComputedStyle(this.sliderBarContainer);var c=_c15.getContentBox(this.sliderBarContainer,s);var _c3b=this.discreteValues;if(_c3b<=1||_c3b==Infinity){_c3b=c[this._pixelCount];}_c3b--;var _c3c=(this.value-this.minimum)*_c3b/(this.maximum-this.minimum)+_c39;if(_c3c<0){_c3c=0;}if(_c3c>_c3b){_c3c=_c3b;}_c3c=_c3c*(this.maximum-this.minimum)/_c3b+this.minimum;this._setValueAttr(_c3c,_c3a);},_onClkBumper:function(val){if(this.disabled||this.readOnly||!this.clickSelect){return;}this._setValueAttr(val,true);},_onClkIncBumper:function(){this._onClkBumper(this._descending===false?this.minimum:this.maximum);},_onClkDecBumper:function(){this._onClkBumper(this._descending===false?this.maximum:this.minimum);},decrement:function(e){this._bumpValue(e.keyCode==keys.PAGE_DOWN?-this.pageIncrement:-1);},increment:function(e){this._bumpValue(e.keyCode==keys.PAGE_UP?this.pageIncrement:1);},_mouseWheeled:function(evt){evt.stopPropagation();evt.preventDefault();this._bumpValue(evt.wheelDelta<0?-1:1,true);},startup:function(){if(this._started){return;}_c13.forEach(this.getChildren(),function(_c3d){if(this[_c3d.container]!=this.containerNode){this[_c3d.container].appendChild(_c3d.domNode);}},this);this.inherited(arguments);},_typematicCallback:function(_c3e,_c3f,e){if(_c3e==-1){this._setValueAttr(this.value,true);}else{this[(_c3f==(this._descending?this.incrementButton:this.decrementButton))?"decrement":"increment"](e);}},buildRendering:function(){this.inherited(arguments);if(this.showButtons){this.incrementButton.style.display="";this.decrementButton.style.display="";}var _c40=_c19("label[for=\""+this.id+"\"]");if(_c40.length){if(!_c40[0].id){_c40[0].id=this.id+"_label";}this.focusNode.setAttribute("aria-labelledby",_c40[0].id);}this.focusNode.setAttribute("aria-valuemin",this.minimum);this.focusNode.setAttribute("aria-valuemax",this.maximum);},postCreate:function(){this.inherited(arguments);if(this.showButtons){this.own(_c1d.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500),_c1d.addMouseListener(this.incrementButton,this,"_typematicCallback",25,500));}this.own(on(this.domNode,_c1a.wheel,lang.hitch(this,"_mouseWheeled")));var _c41=_c14(_c22,{widget:this});this._movable=new _c17(this.sliderHandle,{mover:_c41});this._layoutHackIE7();},destroy:function(){this._movable.destroy();if(this._inProgressAnim&&this._inProgressAnim.status!="stopped"){this._inProgressAnim.stop(true);}this.inherited(arguments);}});_c27._Mover=_c22;return _c27;});},"dojox/layout/ResizeHandle":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/connect","dojo/_base/array","dojo/_base/event","dojo/_base/fx","dojo/_base/window","dojo/fx","dojo/window","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dijit/_base/manager","dijit/_Widget","dijit/_TemplatedMixin","dojo/_base/declare"],function(_c42,lang,_c43,_c44,_c45,_c46,_c47,_c48,_c49,_c4a,_c4b,_c4c,_c4d,_c4e,_c4f,_c50,_c51){_c42.experimental("dojox.layout.ResizeHandle");var _c52=_c51("dojox.layout.ResizeHandle",[_c4f,_c50],{targetId:"",targetContainer:null,resizeAxis:"xy",activeResize:false,activeResizeClass:"dojoxResizeHandleClone",animateSizing:true,animateMethod:"chain",animateDuration:225,minHeight:100,minWidth:100,constrainMax:false,maxHeight:0,maxWidth:0,fixedAspect:false,intermediateChanges:false,startTopic:"/dojo/resize/start",endTopic:"/dojo/resize/stop",templateString:"<div dojoAttachPoint=\"resizeHandle\" class=\"dojoxResizeHandle\"><div></div></div>",postCreate:function(){this.connect(this.resizeHandle,"onmousedown","_beginSizing");if(!this.activeResize){this._resizeHelper=_c4e.byId("dojoxGlobalResizeHelper");if(!this._resizeHelper){this._resizeHelper=new _c53({id:"dojoxGlobalResizeHelper"}).placeAt(_c47.body());_c4b.add(this._resizeHelper.domNode,this.activeResizeClass);}}else{this.animateSizing=false;}if(!this.minSize){this.minSize={w:this.minWidth,h:this.minHeight};}if(this.constrainMax){this.maxSize={w:this.maxWidth,h:this.maxHeight};}this._resizeX=this._resizeY=false;var _c54=lang.partial(_c4b.add,this.resizeHandle);switch(this.resizeAxis.toLowerCase()){case "xy":this._resizeX=this._resizeY=true;_c54("dojoxResizeNW");break;case "x":this._resizeX=true;_c54("dojoxResizeW");break;case "y":this._resizeY=true;_c54("dojoxResizeN");break;}},_beginSizing:function(e){if(this._isSizing){return;}_c43.publish(this.startTopic,[this]);this.targetWidget=_c4e.byId(this.targetId);this.targetDomNode=this.targetWidget?this.targetWidget.domNode:_c4a.byId(this.targetId);if(this.targetContainer){this.targetDomNode=this.targetContainer;}if(!this.targetDomNode){return;}if(!this.activeResize){var c=_c4c.position(this.targetDomNode,true);this._resizeHelper.resize({l:c.x,t:c.y,w:c.w,h:c.h});this._resizeHelper.show();if(!this.isLeftToRight()){this._resizeHelper.startPosition={l:c.x,t:c.y};}}this._isSizing=true;this.startPoint={x:e.clientX,y:e.clientY};var _c55=_c4d.getComputedStyle(this.targetDomNode),_c56=_c4c.boxModel==="border-model",_c57=_c56?{w:0,h:0}:_c4c.getPadBorderExtents(this.targetDomNode,_c55),_c58=_c4c.getMarginExtents(this.targetDomNode,_c55),mb;mb=this.startSize={w:_c4d.get(this.targetDomNode,"width",_c55),h:_c4d.get(this.targetDomNode,"height",_c55),pbw:_c57.w,pbh:_c57.h,mw:_c58.w,mh:_c58.h};if(!this.isLeftToRight()&&dojo.style(this.targetDomNode,"position")=="absolute"){var p=_c4c.position(this.targetDomNode,true);this.startPosition={l:p.x,t:p.y};}this._pconnects=[_c43.connect(_c47.doc,"onmousemove",this,"_updateSizing"),_c43.connect(_c47.doc,"onmouseup",this,"_endSizing")];_c45.stop(e);},_updateSizing:function(e){if(this.activeResize){this._changeSizing(e);}else{var tmp=this._getNewCoords(e,"border",this._resizeHelper.startPosition);if(tmp===false){return;}this._resizeHelper.resize(tmp);}e.preventDefault();},_getNewCoords:function(e,box,_c59){try{if(!e.clientX||!e.clientY){return false;}}catch(e){return false;}this._activeResizeLastEvent=e;var dx=(this.isLeftToRight()?1:-1)*(this.startPoint.x-e.clientX),dy=this.startPoint.y-e.clientY,newW=this.startSize.w-(this._resizeX?dx:0),newH=this.startSize.h-(this._resizeY?dy:0),r=this._checkConstraints(newW,newH);_c59=(_c59||this.startPosition);if(_c59&&this._resizeX){r.l=_c59.l+dx;if(r.w!=newW){r.l+=(newW-r.w);}r.t=_c59.t;}switch(box){case "margin":r.w+=this.startSize.mw;r.h+=this.startSize.mh;case "border":r.w+=this.startSize.pbw;r.h+=this.startSize.pbh;break;}return r;},_checkConstraints:function(newW,newH){if(this.minSize){var tm=this.minSize;if(newW<tm.w){newW=tm.w;}if(newH<tm.h){newH=tm.h;}}if(this.constrainMax&&this.maxSize){var ms=this.maxSize;if(newW>ms.w){newW=ms.w;}if(newH>ms.h){newH=ms.h;}}if(this.fixedAspect){var w=this.startSize.w,h=this.startSize.h,_c5a=w*newH-h*newW;if(_c5a<0){newW=newH*w/h;}else{if(_c5a>0){newH=newW*h/w;}}}return {w:newW,h:newH};},_changeSizing:function(e){var _c5b=this.targetWidget&&lang.isFunction(this.targetWidget.resize),tmp=this._getNewCoords(e,_c5b&&"margin");if(tmp===false){return;}if(_c5b){this.targetWidget.resize(tmp);}else{if(this.animateSizing){var anim=_c48[this.animateMethod]([_c46.animateProperty({node:this.targetDomNode,properties:{width:{start:this.startSize.w,end:tmp.w}},duration:this.animateDuration}),_c46.animateProperty({node:this.targetDomNode,properties:{height:{start:this.startSize.h,end:tmp.h}},duration:this.animateDuration})]);anim.play();}else{_c4d.set(this.targetDomNode,{width:tmp.w+"px",height:tmp.h+"px"});}}if(this.intermediateChanges){this.onResize(e);}},_endSizing:function(e){_c44.forEach(this._pconnects,_c43.disconnect);var pub=lang.partial(_c43.publish,this.endTopic,[this]);if(!this.activeResize){this._resizeHelper.hide();this._changeSizing(e);setTimeout(pub,this.animateDuration+15);}else{pub();}this._isSizing=false;this.onResize(e);},onResize:function(e){}});var _c53=dojo.declare("dojox.layout._ResizeHelper",_c4f,{show:function(){_c4d.set(this.domNode,"display","");},hide:function(){_c4d.set(this.domNode,"display","none");},resize:function(dim){_c4c.setMarginBox(this.domNode,dim);}});return _c52;});},"dijit/Tree":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/connect","dojo/cookie","dojo/_base/declare","dojo/Deferred","dojo/promise/all","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/errors/create","dojo/fx","dojo/has","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/topic","dojo/touch","dojo/when","./a11yclick","./focus","./registry","./_base/manager","./_Widget","./_TemplatedMixin","./_Container","./_Contained","./_CssStateMixin","./_KeyNavMixin","dojo/text!./templates/TreeNode.html","dojo/text!./templates/Tree.html","./tree/TreeStoreModel","./tree/ForestStoreModel","./tree/_dndSelector","dojo/query!css2"],function(_c5c,_c5d,_c5e,_c5f,_c60,_c61,all,dom,_c62,_c63,_c64,_c65,_c66,has,_c67,keys,lang,on,_c68,_c69,when,_c6a,_c6b,_c6c,_c6d,_c6e,_c6f,_c70,_c71,_c72,_c73,_c74,_c75,_c76,_c77,_c78){function _c79(d){return lang.delegate(d.promise||d,{addCallback:function(_c7a){this.then(_c7a);},addErrback:function(_c7b){this.otherwise(_c7b);}});};var _c7c=_c60("dijit._TreeNode",[_c6e,_c6f,_c70,_c71,_c72],{item:null,isTreeNode:true,label:"",_setLabelAttr:function(val){this.labelNode[this.labelType=="html"?"innerHTML":"innerText" in this.labelNode?"innerText":"textContent"]=val;this._set("label",val);},labelType:"text",isExpandable:null,isExpanded:false,state:"NotLoaded",templateString:_c74,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);if(this.isExpandable){this.labelNode.setAttribute("aria-expanded",this.isExpanded);}this.setSelected(false);},_setIndentAttr:function(_c7d){var _c7e=(Math.max(_c7d,0)*this.tree._nodePixelIndent)+"px";_c64.set(this.domNode,"backgroundPosition",_c7e+" 0px");_c64.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",_c7e);_c5c.forEach(this.getChildren(),function(_c7f){_c7f.set("indent",_c7d+1);});this._set("indent",_c7d);},markProcessing:function(){this.state="Loading";this._setExpando(true);},unmarkProcessing:function(){this._setExpando(false);},_updateItemClasses:function(item){var tree=this.tree,_c80=tree.model;if(tree._v10Compat&&item===_c80.root){item=null;}this._applyClassAndStyle(item,"icon","Icon");this._applyClassAndStyle(item,"label","Label");this._applyClassAndStyle(item,"row","Row");this.tree._startPaint(true);},_applyClassAndStyle:function(item,_c81,_c82){var _c83="_"+_c81+"Class";var _c84=_c81+"Node";var _c85=this[_c83];this[_c83]=this.tree["get"+_c82+"Class"](item,this.isExpanded);_c62.replace(this[_c84],this[_c83]||"",_c85||"");_c64.set(this[_c84],this.tree["get"+_c82+"Style"](item,this.isExpanded)||{});},_updateLayout:function(){var _c86=this.getParent();if(!_c86||!_c86.rowNode||_c86.rowNode.style.display=="none"){_c62.add(this.domNode,"dijitTreeIsRoot");}else{_c62.toggle(this.domNode,"dijitTreeIsLast",!this.getNextSibling());}},_setExpando:function(_c87){var _c88=["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"],_c89=["*","-","+","*"],idx=_c87?0:(this.isExpandable?(this.isExpanded?1:2):3);_c62.replace(this.expandoNode,_c88[idx],_c88);this.expandoNodeText.innerHTML=_c89[idx];},expand:function(){if(this._expandDeferred){return _c79(this._expandDeferred);}if(this._collapseDeferred){this._collapseDeferred.cancel();delete this._collapseDeferred;}this.isExpanded=true;this.labelNode.setAttribute("aria-expanded","true");if(this.tree.showRoot||this!==this.tree.rootNode){this.containerNode.setAttribute("role","group");}_c62.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);if(this==this.tree.rootNode&&this.tree.showRoot){this.tree.domNode.setAttribute("aria-expanded","true");}var _c8a=_c66.wipeIn({node:this.containerNode,duration:_c6d.defaultDuration});var def=(this._expandDeferred=new _c61(function(){_c8a.stop();}));_c5d.after(_c8a,"onEnd",function(){def.resolve(true);},true);_c8a.play();return _c79(def);},collapse:function(){if(this._collapseDeferred){return _c79(this._collapseDeferred);}if(this._expandDeferred){this._expandDeferred.cancel();delete this._expandDeferred;}this.isExpanded=false;this.labelNode.setAttribute("aria-expanded","false");if(this==this.tree.rootNode&&this.tree.showRoot){this.tree.domNode.setAttribute("aria-expanded","false");}_c62.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var _c8b=_c66.wipeOut({node:this.containerNode,duration:_c6d.defaultDuration});var def=(this._collapseDeferred=new _c61(function(){_c8b.stop();}));_c5d.after(_c8b,"onEnd",function(){def.resolve(true);},true);_c8b.play();return _c79(def);},indent:0,setChildItems:function(_c8c){var tree=this.tree,_c8d=tree.model,defs=[];var _c8e=this.getChildren();_c5c.forEach(_c8e,function(_c8f){_c70.prototype.removeChild.call(this,_c8f);},this);this.defer(function(){_c5c.forEach(_c8e,function(node){if(!node._destroyed&&!node.getParent()){tree.dndController.removeTreeNode(node);function _c90(node){var id=_c8d.getIdentity(node.item),ary=tree._itemNodesMap[id];if(ary.length==1){delete tree._itemNodesMap[id];}else{var _c91=_c5c.indexOf(ary,node);if(_c91!=-1){ary.splice(_c91,1);}}_c5c.forEach(node.getChildren(),_c90);};_c90(node);if(tree.persist){var _c92=_c5c.map(node.getTreePath(),function(item){return tree.model.getIdentity(item);}).join("/");for(var path in tree._openedNodes){if(path.substr(0,_c92.length)==_c92){delete tree._openedNodes[path];}}tree._saveExpandedNodes();}node.destroyRecursive();}});});this.state="Loaded";if(_c8c&&_c8c.length>0){this.isExpandable=true;_c5c.forEach(_c8c,function(item){var id=_c8d.getIdentity(item),_c93=tree._itemNodesMap[id],node;if(_c93){for(var i=0;i<_c93.length;i++){if(_c93[i]&&!_c93[i].getParent()){node=_c93[i];node.set("indent",this.indent+1);break;}}}if(!node){node=this.tree._createTreeNode({item:item,tree:tree,isExpandable:_c8d.mayHaveChildren(item),label:tree.getLabel(item),labelType:(tree.model&&tree.model.labelType)||"text",tooltip:tree.getTooltip(item),ownerDocument:tree.ownerDocument,dir:tree.dir,lang:tree.lang,textDir:tree.textDir,indent:this.indent+1});if(_c93){_c93.push(node);}else{tree._itemNodesMap[id]=[node];}}this.addChild(node);if(this.tree.autoExpand||this.tree._state(node)){defs.push(tree._expandNode(node));}},this);_c5c.forEach(this.getChildren(),function(_c94){_c94._updateLayout();});}else{this.isExpandable=false;}if(this._setExpando){this._setExpando(false);}this._updateItemClasses(this.item);var def=all(defs);this.tree._startPaint(def);return _c79(def);},getTreePath:function(){var node=this;var path=[];while(node&&node!==this.tree.rootNode){path.unshift(node.item);node=node.getParent();}path.unshift(this.tree.rootNode.item);return path;},getIdentity:function(){return this.tree.model.getIdentity(this.item);},removeChild:function(node){this.inherited(arguments);var _c95=this.getChildren();if(_c95.length==0){this.isExpandable=false;this.collapse();}_c5c.forEach(_c95,function(_c96){_c96._updateLayout();});},makeExpandable:function(){this.isExpandable=true;this._setExpando(false);},setSelected:function(_c97){this.labelNode.setAttribute("aria-selected",_c97?"true":"false");_c62.toggle(this.rowNode,"dijitTreeRowSelected",_c97);},focus:function(){_c6b.focus(this.focusNode);}});if(has("dojo-bidi")){_c7c.extend({_setTextDirAttr:function(_c98){if(_c98&&((this.textDir!=_c98)||!this._created)){this._set("textDir",_c98);this.applyTextDir(this.labelNode);_c5c.forEach(this.getChildren(),function(_c99){_c99.set("textDir",_c98);},this);}}});}var Tree=_c60("dijit.Tree",[_c6e,_c73,_c6f,_c72],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:true,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:false,openOnDblClick:false,templateString:_c75,persist:false,autoExpand:false,dndController:_c78,dndParams:["onDndDrop","itemCreator","onDndCancel","checkAcceptance","checkItemAcceptance","dragThreshold","betweenThreshold"],onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(_c9a,_c9b){_c68.publish(this.id,lang.mixin({tree:this,event:_c9a},_c9b||{}));},postMixInProperties:function(){this.tree=this;if(this.autoExpand){this.persist=false;}this._itemNodesMap={};if(!this.cookieName&&this.id){this.cookieName=this.id+"SaveStateCookie";}this.expandChildrenDeferred=new _c61();this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments);},postCreate:function(){this._initState();var self=this;this.own(on(this.containerNode,on.selector(".dijitTreeNode",_c69.enter),function(evt){self._onNodeMouseEnter(_c6c.byNode(this),evt);}),on(this.containerNode,on.selector(".dijitTreeNode",_c69.leave),function(evt){self._onNodeMouseLeave(_c6c.byNode(this),evt);}),on(this.containerNode,_c6a,function(evt){var node=_c6c.getEnclosingWidget(evt.target);if(node.isInstanceOf(_c7c)){self._onClick(node,evt);}}),on(this.containerNode,on.selector(".dijitTreeNode","dblclick"),function(evt){self._onDblClick(_c6c.byNode(this),evt);}));if(!this.model){this._store2model();}this.own(_c5d.after(this.model,"onChange",lang.hitch(this,"_onItemChange"),true),_c5d.after(this.model,"onChildrenChange",lang.hitch(this,"_onItemChildrenChange"),true),_c5d.after(this.model,"onDelete",lang.hitch(this,"_onItemDelete"),true));this.inherited(arguments);if(this.dndController){if(lang.isString(this.dndController)){this.dndController=lang.getObject(this.dndController);}var _c9c={};for(var i=0;i<this.dndParams.length;i++){if(this[this.dndParams[i]]){_c9c[this.dndParams[i]]=this[this.dndParams[i]];}}this.dndController=new this.dndController(this,_c9c);}this._load();this.onLoadDeferred=_c79(this.pendingCommandsPromise);this.onLoadDeferred.then(lang.hitch(this,"onLoad"));},_store2model:function(){this._v10Compat=true;_c67.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var _c9d={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};if(this.params.mayHaveChildren){_c9d.mayHaveChildren=lang.hitch(this,"mayHaveChildren");}if(this.params.getItemChildren){_c9d.getChildren=lang.hitch(this,function(item,_c9e,_c9f){this.getItemChildren((this._v10Compat&&item===this.model.root)?null:item,_c9e,_c9f);});}this.model=new _c77(_c9d);this.showRoot=Boolean(this.label);},onLoad:function(){},_load:function(){this.model.getRoot(lang.hitch(this,function(item){var rn=(this.rootNode=this.tree._createTreeNode({item:item,tree:this,isExpandable:true,label:this.label||this.getLabel(item),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1}));if(!this.showRoot){rn.rowNode.style.display="none";this.domNode.setAttribute("role","presentation");this.domNode.removeAttribute("aria-expanded");this.domNode.removeAttribute("aria-multiselectable");if(this["aria-label"]){rn.containerNode.setAttribute("aria-label",this["aria-label"]);this.domNode.removeAttribute("aria-label");}else{if(this["aria-labelledby"]){rn.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]);this.domNode.removeAttribute("aria-labelledby");}}rn.labelNode.setAttribute("role","presentation");rn.containerNode.setAttribute("role","tree");rn.containerNode.setAttribute("aria-expanded","true");rn.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular);}else{this.domNode.setAttribute("aria-multiselectable",!this.dndController.singular);this.rootLoadingIndicator.style.display="none";}this.containerNode.appendChild(rn.domNode);var _ca0=this.model.getIdentity(item);if(this._itemNodesMap[_ca0]){this._itemNodesMap[_ca0].push(rn);}else{this._itemNodesMap[_ca0]=[rn];}rn._updateLayout();this._expandNode(rn).then(lang.hitch(this,function(){this.rootLoadingIndicator.style.display="none";this.expandChildrenDeferred.resolve(true);}));}),lang.hitch(this,function(err){}));},getNodesByItem:function(item){if(!item){return [];}var _ca1=lang.isString(item)?item:this.model.getIdentity(item);return [].concat(this._itemNodesMap[_ca1]);},_setSelectedItemAttr:function(item){this.set("selectedItems",[item]);},_setSelectedItemsAttr:function(_ca2){var tree=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(lang.hitch(this,function(){var _ca3=_c5c.map(_ca2,function(item){return (!item||lang.isString(item))?item:tree.model.getIdentity(item);});var _ca4=[];_c5c.forEach(_ca3,function(id){_ca4=_ca4.concat(tree._itemNodesMap[id]||[]);});this.set("selectedNodes",_ca4);}));},_setPathAttr:function(path){if(path.length){return _c79(this.set("paths",[path]).then(function(_ca5){return _ca5[0];}));}else{return _c79(this.set("paths",[]).then(function(_ca6){return _ca6[0];}));}},_setPathsAttr:function(_ca7){var tree=this;function _ca8(path,_ca9){var _caa=path.shift();var _cab=_c5c.filter(_ca9,function(node){return node.getIdentity()==_caa;})[0];if(!!_cab){if(path.length){return tree._expandNode(_cab).then(function(){return _ca8(path,_cab.getChildren());});}else{return _cab;}}else{throw new Tree.PathError("Could not expand path at "+_caa);}};return _c79(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return all(_c5c.map(_ca7,function(path){path=_c5c.map(path,function(item){return lang.isString(item)?item:tree.model.getIdentity(item);});if(path.length){return _ca8(path,[tree.rootNode]);}else{throw new Tree.PathError("Empty path");}}));}).then(function setNodes(_cac){tree.set("selectedNodes",_cac);return tree.paths;}));},_setSelectedNodeAttr:function(node){this.set("selectedNodes",[node]);},_setSelectedNodesAttr:function(_cad){this.dndController.setSelection(_cad);},expandAll:function(){var _cae=this;function _caf(node){return _cae._expandNode(node).then(function(){var _cb0=_c5c.filter(node.getChildren()||[],function(node){return node.isExpandable;});return all(_c5c.map(_cb0,_caf));});};return _c79(_caf(this.rootNode));},collapseAll:function(){var _cb1=this;function _cb2(node){var _cb3=_c5c.filter(node.getChildren()||[],function(node){return node.isExpandable;}),defs=all(_c5c.map(_cb3,_cb2));if(!node.isExpanded||(node==_cb1.rootNode&&!_cb1.showRoot)){return defs;}else{return defs.then(function(){return _cb1._collapseNode(node);});}};return _c79(_cb2(this.rootNode));},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(item){return this.model.getLabel(item);},getIconClass:function(item,_cb4){return (!item||this.model.mayHaveChildren(item))?(_cb4?"dijitFolderOpened":"dijitFolderClosed"):"dijitLeaf";},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return "";},_onDownArrow:function(evt,node){var _cb5=this._getNext(node);if(_cb5&&_cb5.isTreeNode){this.focusNode(_cb5);}},_onUpArrow:function(evt,node){var _cb6=node.getPreviousSibling();if(_cb6){node=_cb6;while(node.isExpandable&&node.isExpanded&&node.hasChildren()){var _cb7=node.getChildren();node=_cb7[_cb7.length-1];}}else{var _cb8=node.getParent();if(!(!this.showRoot&&_cb8===this.rootNode)){node=_cb8;}}if(node&&node.isTreeNode){this.focusNode(node);}},_onRightArrow:function(evt,node){if(node.isExpandable&&!node.isExpanded){this._expandNode(node);}else{if(node.hasChildren()){node=node.getChildren()[0];if(node&&node.isTreeNode){this.focusNode(node);}}}},_onLeftArrow:function(evt,node){if(node.isExpandable&&node.isExpanded){this._collapseNode(node);}else{var _cb9=node.getParent();if(_cb9&&_cb9.isTreeNode&&!(!this.showRoot&&_cb9===this.rootNode)){this.focusNode(_cb9);}}},focusLastChild:function(){var node=this._getLast();if(node&&node.isTreeNode){this.focusNode(node);}},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0];},_getLast:function(){var node=this.rootNode;while(node.isExpanded){var c=node.getChildren();if(!c.length){break;}node=c[c.length-1];}return node;},_getNext:function(node){if(node.isExpandable&&node.isExpanded&&node.hasChildren()){return node.getChildren()[0];}else{while(node&&node.isTreeNode){var _cba=node.getNextSibling();if(_cba){return _cba;}node=node.getParent();}return null;}},childSelector:".dijitTreeRow",isExpandoNode:function(node,_cbb){return dom.isDescendant(node,_cbb.expandoNode)||dom.isDescendant(node,_cbb.expandoNodeText);},__click:function(_cbc,e,_cbd,func){var _cbe=e.target,_cbf=this.isExpandoNode(_cbe,_cbc);if(_cbc.isExpandable&&(_cbd||_cbf)){this._onExpandoClick({node:_cbc});}else{this._publish("execute",{item:_cbc.item,node:_cbc,evt:e});this[func](_cbc.item,_cbc,e);this.focusNode(_cbc);}e.stopPropagation();e.preventDefault();},_onClick:function(_cc0,e){this.__click(_cc0,e,this.openOnClick,"onClick");},_onDblClick:function(_cc1,e){this.__click(_cc1,e,this.openOnDblClick,"onDblClick");},_onExpandoClick:function(_cc2){var node=_cc2.node;this.focusNode(node);if(node.isExpanded){this._collapseNode(node);}else{this._expandNode(node);}},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(node){_c67.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(node);},_getRootOrFirstNode:function(){_c67.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst();},_collapseNode:function(node){if(node._expandNodeDeferred){delete node._expandNodeDeferred;}if(node.state=="Loading"){return;}if(node.isExpanded){var ret=node.collapse();this.onClose(node.item,node);this._state(node,false);this._startPaint(ret);return ret;}},_expandNode:function(node){if(node._expandNodeDeferred){return node._expandNodeDeferred;}var _cc3=this.model,item=node.item,_cc4=this;if(!node._loadDeferred){node.markProcessing();node._loadDeferred=new _c61();_cc3.getChildren(item,function(_cc5){node.unmarkProcessing();node.setChildItems(_cc5).then(function(){node._loadDeferred.resolve(_cc5);});},function(err){node._loadDeferred.reject(err);});}var def=node._loadDeferred.then(lang.hitch(this,function(){var def2=node.expand();this.onOpen(node.item,node);this._state(node,true);return def2;}));this._startPaint(def);return def;},focusNode:function(node){this.focusChild(node);},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(item){var _cc6=this.model,_cc7=_cc6.getIdentity(item),_cc8=this._itemNodesMap[_cc7];if(_cc8){var _cc9=this.getLabel(item),_cca=this.getTooltip(item);_c5c.forEach(_cc8,function(node){node.set({item:item,label:_cc9,tooltip:_cca});node._updateItemClasses(item);});}},_onItemChildrenChange:function(_ccb,_ccc){var _ccd=this.model,_cce=_ccd.getIdentity(_ccb),_ccf=this._itemNodesMap[_cce];if(_ccf){_c5c.forEach(_ccf,function(_cd0){_cd0.setChildItems(_ccc);});}},_onItemDelete:function(item){var _cd1=this.model,_cd2=_cd1.getIdentity(item),_cd3=this._itemNodesMap[_cd2];if(_cd3){_c5c.forEach(_cd3,function(node){this.dndController.removeTreeNode(node);var _cd4=node.getParent();if(_cd4){_cd4.removeChild(node);}node.destroyRecursive();},this);delete this._itemNodesMap[_cd2];}},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var oreo=_c5f(this.cookieName);if(oreo){_c5c.forEach(oreo.split(","),function(item){this._openedNodes[item]=true;},this);}}},_state:function(node,_cd5){if(!this.persist){return false;}var path=_c5c.map(node.getTreePath(),function(item){return this.model.getIdentity(item);},this).join("/");if(arguments.length===1){return this._openedNodes[path];}else{if(_cd5){this._openedNodes[path]=true;}else{delete this._openedNodes[path];}this._saveExpandedNodes();}},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var ary=[];for(var id in this._openedNodes){ary.push(id);}_c5f(this.cookieName,ary.join(","),{expires:365});}},destroy:function(){if(this._curSearch){this._curSearch.timer.remove();delete this._curSearch;}if(this.rootNode){this.rootNode.destroyRecursive();}if(this.dndController&&!lang.isString(this.dndController)){this.dndController.destroy();}this.rootNode=null;this.inherited(arguments);},destroyRecursive:function(){this.destroy();},resize:function(_cd6){if(_cd6){_c63.setMarginBox(this.domNode,_cd6);}this._nodePixelIndent=_c63.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(lang.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths();}));},_outstandingPaintOperations:0,_startPaint:function(p){this._outstandingPaintOperations++;if(this._adjustWidthsTimer){this._adjustWidthsTimer.remove();delete this._adjustWidthsTimer;}var oc=lang.hitch(this,function(){this._outstandingPaintOperations--;if(this._outstandingPaintOperations<=0&&!this._adjustWidthsTimer&&this._started){this._adjustWidthsTimer=this.defer("_adjustWidths");}});when(p,oc,oc);},_adjustWidths:function(){if(this._adjustWidthsTimer){this._adjustWidthsTimer.remove();delete this._adjustWidthsTimer;}this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%";},_createTreeNode:function(args){return new _c7c(args);},focus:function(){if(this.lastFocusedChild){this.focusNode(this.lastFocusedChild);}else{this.focusFirstChild();}}});if(has("dojo-bidi")){Tree.extend({_setTextDirAttr:function(_cd7){if(_cd7&&this.textDir!=_cd7){this._set("textDir",_cd7);this.rootNode.set("textDir",_cd7);}}});}Tree.PathError=_c65("TreePathError");Tree._TreeNode=_c7c;return Tree;});},"esriviewer/loader/ViewerLoader":function(){define(["dojo/_base/declare","xstyle/css!../theme/coreTheme.css","dojo/_base/window","dojo/_base/lang","dojo/topic","dojo/_base/connect","dojo/dom-class","../base/ViewerGlobals","../manager/ViewerManagerWindow","../util/RegExpUtils","../util/ViewerUtils","../util/GeometryUtils","../map/geometry/base/ProjectionUtils","dojo/on","dojo/io-query","xstyle/css","./base/ViewerPlacementWindow","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/layout/StackController","dijit/layout/AccordionPane","xstyle/css!dojox/layout/resources/ResizeHandle.css"],function(_cd8,_cd9,_cda,lang,_cdb,con,_cdc,_cdd,_cde,_cdf,_ce0,_ce1,_ce2,on,_ce3,Css,_ce4){return _cd8([],{isDebug:false,constructor:function(_ce5){lang.mixin(this,_ce5||{});this._initPageResizeListener();this.viewerConfigurationParameters={useProxyForConfig:false};this.createGlobalClasses();this.initCss();this.processConfigurationSettings();this.createViewerPlacementWindow();this.createViewerManager();this.tweakUI();},_initPageResizeListener:function(){on(window,"resize",lang.hitch(this,function(){_cdb.publish(VIEWER_GLOBALS.EVENTS.WINDOW.REPOSITION_ALL);}));},initCss:function(){Css.load("dijit/themes/tundra/tundra.css",require,function(){});Css.load("esri/css/esri.css",require,function(){});var _ce6=location.pathname.replace(/[^\/]+$/,"")+"css/overrides.css";Css.load(_ce6,require,function(){});_cdb.publish(VIEWER_GLOBALS.EVENTS.CSS.CORE_UI_THEME_LOADED);},createViewerPlacementWindow:function(){this.viewPlacement=new _ce4({mapDiv:this.mapDiv});},tweakUI:function(){if(VIEWER_UTILS.isHtml5FileUploadSupported()){con.connect(_cda.body(),"dragover",function(e){e.stopPropagation();e.preventDefault();e.dataTransfer.effectAllowed=e.dataTransfer.dropEffect="none";});}_cdc.add(_cda.body(),["defaultTextColor","defaultFont","defaultFontSize"]);},createGlobalClasses:function(){window.VIEWER_GLOBALS=this.createGlobals();window.VIEWER_UTILS=this.createUtils();window.GEOMETRY_UTILS=this.createGeometryUtils();window.REG_EXP_UTILS=this.createRegExpUtils();window.PROJECTION_UTILS=new _ce2();},processConfigurationSettings:function(){if(window&&window.location&&window.location.href){var _ce7=window.location.href.substring(window.location.href.indexOf("?")+1,window.location.href.length);this.windowQueryObject=_ce3.queryToObject(_ce7);if(this.windowQueryObject!=null&&lang.isObject(this.windowQueryObject)){if(this.windowQueryObject.viewerConfig!=null){this.viewerConfigurationParameters.configUrl=this.windowQueryObject.viewerConfig;this.viewerConfigurationParameters.useProxyForConfig=true;}if(this.windowQueryObject.viewerPositionConfig!=null){this.viewerConfigurationParameters.viewerPositioningConfigUrl=this.windowQueryObject.viewerPositionConfig;this.viewerConfigurationParameters.useProxyForPositionConfig=true;}}}},createGlobals:function(){return new _cdd();},createGeometryUtils:function(){return new _ce1();},createUtils:function(){return new _ce0({isDebug:this.isDebug});},createRegExpUtils:function(){return new _cdf();},createViewerManager:function(){window.VIEWER_MANAGER=this.createViewerManagerWindow();return window.VIEWER_MANAGER;},createViewerManagerWindow:function(){return new _cde(this.viewerConfigurationParameters);}});});},"url:esriviewer/ui/layers/base/template/UserPersistedLayersListingTemplate.html":"<div>\r\n    <div class=\"userPersistsedLayersClearContainer\" data-bind=\"visible: hasEntries\">\r\n        <div class=\"userPersistsedLayersClearLbl\" data-bind=\"click:clearEntries\">Clear Entries</div>\r\n    </div>\r\n    <div class=\"addedUserPersistedLayersListContainer\" data-dojo-attach-point=\"addedUserPersistedGraphicsListContainer\">\r\n        <ul class=\"viewerList\" data-bind=\"foreach: addedUserPersistedLayers\">\r\n            <li class=\"graphicsListEntry\">\r\n                <div title=\"Delete Layer\" class=\"viewerListEntryRemoveIcon commonIcons16 remove\"\r\n                     data-bind=\"click:$parent.removeUserPersistedLayer\"></div>\r\n                <div title=\"Add Layer To Map\" class=\"viewerListGenericIcon commonIcons16 layerShow\"\r\n                     data-bind=\"click:$parent.addPersistedLayerToMap\"></div>\r\n                <span class=\"graphicsListEntryLabel\" data-bind=\"text: $data.name\"></span>\r\n\r\n                <div data-bind=\"css: $parent.persistedLayerInfoIconClass, attr:{title:$data.url}\"></div>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>","url:esriviewer/ui/draw/configure/geometry/template/ConfigureTextTemplate.html":"<div class=\"configureDrawGeometryContainer\">\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Font Face</span>\r\n        <select data-bind=\"options: fontFaces ,value:selectedFontFace, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Text Align</span>\r\n        <select data-bind=\"options: textAligns ,value:selectedTextAlign, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Weight</span>\r\n        <select data-bind=\"options: textWeights ,value:selectedTextWeight, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Size</span>\r\n        <select data-bind=\"options: textSizes ,value:selectedTextSize, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Angle</span>\r\n        <select data-bind=\"options: angles ,value:selectedAngle\"></select>\r\n    </div>\r\n    <div class=\"configureDrawColorPickerContainer\" data-dojo-attach-point=\"colorPickerContainer\"></div>\r\n\r\n</div>","url:esriviewer/ui/header/template/HeaderLogoTemplate.html":"<div class=\"logoHeaderContainer defaultBoxShadow defaultBackground defaultBorder fourPixelBorderRadius\">\r\n    <img alt=\"header logo\" data-bind=\"visible: showHeaderIcon, attr:{ src: headerIconUrl, alt:headerMainText}\"  class='headerLogoIcon'>\r\n    <span class=\"headerMainText\" data-bind=\"text: headerMainText\"></span>\r\n    <div class=\"logolinks\">\r\n        <a data-bind=\"attr:{href: contactUrl},text: contactText\" target=\"_blank\" title=\"Opens in a new window.\"></a>\r\n        <span class=\"headerLogoLinksSpace\">|</span>\r\n        <a data-bind=\"attr:{href: helpUrl}, text: helpText\" target=\"_blank\" title=\"Opens in a new window.\"></a>\r\n    </div>\r\n</div>","url:dijit/form/templates/Select.html":"<table class=\"dijit dijitReset dijitInline dijitLeft\"\n\tdata-dojo-attach-point=\"_buttonNode,tableNode,focusNode,_popupStateNode\" cellspacing='0' cellpadding='0'\n\trole=\"listbox\" aria-haspopup=\"true\"\n\t><tbody role=\"presentation\"><tr role=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonContents\" role=\"presentation\"\n\t\t\t><div class=\"dijitReset dijitInputField dijitButtonText\"  data-dojo-attach-point=\"containerNode,textDirNode\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitValidationContainer\"\n\t\t\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t/></div\n\t\t\t><input type=\"hidden\" ${!nameAttrSetting} data-dojo-attach-point=\"valueNode\" value=\"${value}\" aria-hidden=\"true\"\n\t\t/></td\n\t\t><td class=\"dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\"\n\t\t\tdata-dojo-attach-point=\"titleNode\" role=\"presentation\"\n\t\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t${_buttonInputDisabled}\n\t\t/></td\n\t></tr></tbody\n></table>\n","url:dijit/layout/templates/AccordionButton.html":"<div data-dojo-attach-event='ondijitclick:_onTitleClick' class='dijitAccordionTitle' role=\"presentation\">\n\t<div data-dojo-attach-point='titleNode,focusNode' data-dojo-attach-event='onkeydown:_onTitleKeyDown'\n\t\t\tclass='dijitAccordionTitleFocus' role=\"tab\" aria-expanded=\"false\"\n\t\t><span class='dijitInline dijitAccordionArrow' role=\"presentation\"></span\n\t\t><span class='arrowTextUp' role=\"presentation\">+</span\n\t\t><span class='arrowTextDown' role=\"presentation\">-</span\n\t\t><span role=\"presentation\" class=\"dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span>\n\t\t<span role=\"presentation\" data-dojo-attach-point='titleTextNode, textDirNode' class='dijitAccordionText'></span>\n\t</div>\n</div>\n","url:dijit/templates/MenuSeparator.html":"<tr class=\"dijitMenuSeparator\" role=\"separator\">\n\t<td class=\"dijitMenuSeparatorIconCell\">\n\t\t<div class=\"dijitMenuSeparatorTop\"></div>\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\n\t</td>\n\t<td colspan=\"3\" class=\"dijitMenuSeparatorLabelCell\">\n\t\t<div class=\"dijitMenuSeparatorTop dijitMenuSeparatorLabel\"></div>\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\n\t</td>\n</tr>\n","url:esriviewer/ui/draw/base/template/UserPersistedGrahicsListingTemplate.html":"<div>\r\n    <div class=\"addedUserPersistedGraphicsListContainer\" data-dojo-attach-point=\"addedUserPersistedGraphicsListContainer\">\r\n        <ul data-dojo-attach-point=\"addedGraphicsList\" class=\"viewerList\" data-bind=\"foreach: addedUserPersistedGraphics\">\r\n            <li class=\"graphicsListEntry\">\r\n                <div title=\"Delete Saved Graphics\" class=\"viewerListEntryRemoveIcon commonIcons16 remove\" data-bind=\"click:$parent.removeUserPersistedGraphic\"></div>\r\n                <div title=\"Add Saved Graphics To Map\" class=\"viewerListGenericIcon commonIcons16 layerShow\" data-bind=\"click:$parent.addSavedGraphics\"></div>\r\n                <span class=\"graphicsListEntryLabel\" data-bind=\"text: $data.label\"></span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>","url:esriviewer/ui/footer/template/FooterTogglerTemplate.html":"<div class=\"footerWidget\" data-dojo-attach-point=\"footerWidget\" data-bind=\"css:{footerExpanded: expanded() == true, footerCollapsed: expanded() != true}\">\r\n    <div class=\"footerExpanderContent headerFooterBg\" data-dojo-attach-point=\"footerExpanderContent\"  data-dojo-attach-event=\"onclick:toggle\">\r\n        <div class=\"footerTogglerArrow\" data-dojo-attach-point=\"footerTogglerArrow\" data-bind=\"css:{footerTogglerDown: expanded() == true, footerTogglerUp: expanded() != true}\"></div>\r\n    </div>\r\n    <div data-dojo-attach-point=\"footerContent\"></div>\r\n</div>","url:esriviewer/ui/toolbar/base/template/BookmarkListingTemplate.html":"<div class=\"bookmarksToolbarDropdown toolbarDropdownContent\" data-bind=\"visible:visible\">\r\n    <div class=\"createBookmarkIcon commonIcons16 add\" title=\"Create Bookmark\"\r\n         data-bind=\"visible:showCreateBookmarkIcon, click:showCreateBookmark\"></div>\r\n    <div class=\"bookmarksToolbarDropdownBookmarkEntries\" data-bind=\"foreach:_bookmarks\">\r\n        <div class=\"threePixelBorderRadius bookmarkToolbarEntry\" data-bind=\"click: $parent.handleBookmarkClick\">\r\n            <span class=\"bookmarkToolbarEntryText\" data-bind=\"text: $data.label\"></span>\r\n        </div>\r\n    </div>\r\n    <div class=\"bookmarksToolbarDropdownBookmarkRemovableEntries\" data-bind=\"template: {foreach:_removableBookmarks, afterAdd:handleAfterAddBookmark, beforeRemove:handleBeforeRemoveBookmark}\">\r\n        <div class=\"bookmarkToolbarEntryOuter\">\r\n            <div title=\"Remove Bookmark\" class=\"commonIcons16 bookmarkToolbarEntryRemoveIcon remove\"\r\n                 data-bind=\"click: $parent.removeClick\"></div>\r\n            <div class=\"threePixelBorderRadius bookmarkToolbarEntry\" data-bind=\"click: $parent.handleBookmarkClick\">\r\n                <span class=\"bookmarkToolbarEntryText\" data-bind=\"text: $data.label\"></span>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</div>","url:esriviewer/ui/messaging/template/MessagingWidgetTemplate.html":"<div class=\"defaultBorder defaultBackground statusMessageContainer threePixelBorderRadius defaultBoxShadow\"\r\n     data-bind=\"visible:visible\">\r\n    <div class=\"commonIcons16 infoBlock messagingIcon\"></div>\r\n    <div class=\"statusDivInner threePixelBorderRadius\">\r\n        <div class=\"statusDivMessage\" data-bind=\"text:message\"></div>\r\n    </div>\r\n</div>","url:dijit/form/templates/HorizontalSlider.html":"<table class=\"dijit dijitReset dijitSlider dijitSliderH\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" rules=\"none\" data-dojo-attach-event=\"onkeydown:_onKeyDown, onkeyup:_onKeyUp\"\n\trole=\"presentation\"\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td data-dojo-attach-point=\"topDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\n\t\t\t><div class=\"dijitSliderDecrementIconH\" style=\"display:none\" data-dojo-attach-point=\"decrementButton\"><span class=\"dijitSliderButtonInner\">-</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper\" data-dojo-attach-event=\"press:_onClkDecBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><input data-dojo-attach-point=\"valueNode\" type=\"hidden\" ${!nameAttrSetting}\n\t\t\t/><div class=\"dijitReset dijitSliderBarContainerH\" role=\"presentation\" data-dojo-attach-point=\"sliderBarContainer\"\n\t\t\t\t><div role=\"presentation\" data-dojo-attach-point=\"progressBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH\" data-dojo-attach-event=\"press:_onBarClick\"\n\t\t\t\t\t><div class=\"dijitSliderMoveable dijitSliderMoveableH\"\n\t\t\t\t\t\t><div data-dojo-attach-point=\"sliderHandle,focusNode\" class=\"dijitSliderImageHandle dijitSliderImageHandleH\" data-dojo-attach-event=\"press:_onHandleClick\" role=\"slider\"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t\t><div role=\"presentation\" data-dojo-attach-point=\"remainingBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH\" data-dojo-attach-event=\"press:_onBarClick\"></div\n\t\t\t></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper\" data-dojo-attach-event=\"press:_onClkIncBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\n\t\t\t><div class=\"dijitSliderIncrementIconH\" style=\"display:none\" data-dojo-attach-point=\"incrementButton\"><span class=\"dijitSliderButtonInner\">+</span></div\n\t\t></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td data-dojo-attach-point=\"containerNode,bottomDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n></table>\n","url:esriviewer/ui/draw/configure/template/ConfigureDrawTemplate.html":"<div>\r\n    <div data-bind=\"visible:showConfigureGeometryIcons\" data-dojo-attach-point=\"annotationOptionsButtons\" class=\"annotationOptionButtons\">\r\n        <div title=\"Set Point Symbol\"\r\n             data-bind=\"click: showPointConfiguration, css:{pointSelected: pointConfigurationActive}\"\r\n             class=\"annotationOptionButton pointUnselected\"></div>\r\n        <div title=\"Set Line Symbol\"\r\n             data-bind=\"click: showLineConfiguration, css:{polylineSelected: lineConfigurationActive}\"\r\n                    class=\"annotationOptionButton polylineUnselected\"></div>\r\n        <div title=\"Set Polygon Symbol\"\r\n             data-bind=\"click: showPolygonConfiguration, css:{polygonSelected: polygonConfigurationActive}\"\r\n             class=\"annotationOptionButton polygonUnselected\"></div>\r\n        <div title=\"Set Rectangle Symbol\"\r\n             data-bind=\"visible: showEnvelopeIcon, click: showRectangleConfiguration, css:{rectangleSelected: rectangleConfigurationActive}\"\r\n             class=\"annotationOptionButton rectangleUnselected\"></div>\r\n        <div title=\"Set Text Symbol\"\r\n             data-bind=\"visible: showTextIcon, click: showTextConfiguration, css:{textSelected: textConfigurationActive}\"\r\n             class=\"annotationOptionButton textUnselected\"></div>\r\n    </div>\r\n    <div data-dojo-attach-point=\"configurePointWidgetContainer\" data-bind=\"visible:pointConfigurationActive\"></div>\r\n    <div data-dojo-attach-point=\"configureLineWidgetContainer\" data-bind=\"visible:lineConfigurationActive\"></div>\r\n    <div data-dojo-attach-point=\"configureRectangleWidgetContainer\" data-bind=\"visible:rectangleConfigurationActive\"></div>\r\n    <div data-dojo-attach-point=\"configurePolygonWidgetContainer\" data-bind=\"visible:polygonConfigurationActive\"></div>\r\n\r\n    <div data-dojo-attach-point=\"configureTextWidgetContainer\" data-bind=\"visible:textConfigurationActive\"></div>\r\n\r\n</div>","url:esriviewer/ui/draw/configure/geometry/template/ConfigurePointTemplate.html":"<div class=\"configureDrawGeometryContainer\">\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Marker Style</span>\r\n        <select data-bind=\"options: markerStyles ,value:selectedMarkerStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Marker Size</span>\r\n        <select data-bind=\"options: markerSizes ,value:selectedMarkerSize\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Outline Style</span>\r\n        <select data-bind=\"options: outlineStyles ,value:selectedOutlineStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Outline Width</span>\r\n        <select data-bind=\"options: outlineWidths ,value:selectedOutlineWidth\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Angle</span>\r\n        <select data-bind=\"options: angles ,value:selectedAngle\"></select>\r\n    </div>\r\n    <div data-dojo-attach-point=\"transparencySliderContainer\"></div>\r\n    <div class=\"colorPickerTextContainer\">\r\n        <span class=\"colorPickerText\"\r\n              data-bind=\"click: setMarkerColorMode,css:{colorPickerTextSelected: markerColorActive}\"> Marker Color</span>\r\n        <span class=\"colorPickerText\"\r\n              data-bind=\"click: setOutlineColorMode,css:{colorPickerTextSelected: outlineColorActive}\"> Outline Color</span>\r\n\r\n    </div>\r\n\r\n    <div class=\"configureDrawColorPickerContainer\" data-dojo-attach-point=\"colorPickerContainer\"></div>\r\n</div>","url:esriviewer/ui/bookmark/template/CreateBookmarkTemplate.html":"<div class=\"createBookmarkWindow fivePixelBorderRadius defaultBorder defaultBoxShadow\">\r\n    <div class=\"createBookmarkHeader\">\r\n    </div>\r\n    <div class=\"createBookmarkContent\">\r\n        <div class=\"createBookmarkLabelEntry createBookmarkEntry\">\r\n            <span class=\"createBookmarkLabel\">Label:</span>\r\n            <div data-dojo-type=\"dijit/form/TextBox\" data-dojo-attach-event=\"onKeyUp: onBookmarkLabelKeyUp\" data-dojo-attach-point=\"bookmarkLabelElement\"></div>\r\n        </div>\r\n    </div>\r\n    <div class=\"createBookmarkActionsContent\">\r\n        <span data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:hide\" class=\"createBookmarkButton\">Cancel</span>\r\n        <span data-dojo-type=\"dijit/form/Button\" class=\"createBookmarkButton\" data-dojo-attach-event=\"onClick:createBookmark\">Create</span>\r\n    </div>\r\n</div>","url:esriviewer/ui/toolbar/template/ActionsToolbarWidgetTemplate.html":"<div class='viewerMainToolbar headerFooterBg'>\r\n    <div class=\"mainToolbarContents\" data-dojo-attach-point=\"mainToolbarContents\">\r\n            <span data-bind=\"visible: toolsButtonVisible\"\r\n                  data-dojo-type=\"dijit/form/DropDownButton\"\r\n                  data-dojo-attach-point=\"toolsDropDownButton\"\r\n                  data-dojo-props=\"iconClass:'commonIcons16 wrench'\">\r\n                <span>Tools</span>\r\n            </span>\r\n\r\n        <div data-dojo-attach-point=\"layersButton\" class=\"actionsToolbarButton\"\r\n             data-bind=\"visible: layersButtonVisible\">\r\n            <div class=\"commonIcons16 layerList actionsToolbarIcon\"></div>\r\n            <div class=\"actionsToolbarText\">Layers</div>\r\n        </div>\r\n        <div data-dojo-attach-point=\"bookmarksButton\" class=\"actionsToolbarButton\"\r\n             data-bind=\"visible:showBookmarksButton\"\r\n             data-dojo-attach-event=\"onclick:toggleBookmarksListing\">\r\n            <div class=\"commonIcons16 bookmark actionsToolbarIcon\"></div>\r\n            <div class=\"actionsToolbarText\">Bookmarks</div>\r\n        </div>\r\n        <div data-dojo-attach-point=\"basemapsButton\" class=\"actionsToolbarButton\"\r\n             data-dojo-attach-event=\"onclick:toggleBasemapsListing\">\r\n            <div class=\"commonIcons16 blocks actionsToolbarIcon\"></div>\r\n            <div class=\"actionsToolbarText\">Basemaps</div>\r\n\r\n        </div>\r\n        <span data-bind=\"visible:showLabelsButton\">\r\n            <span data-dojo-type=\"dijit/form/ToggleButton\"\r\n                  data-dojo-attach-point=\"labelsButton\"\r\n                  data-dojo-props=\"iconClass:'dijitCheckBoxIcon'\">Labels</span>\r\n        </span>\r\n\r\n        <div data-dojo-attach-point=\"addOnContentContainer\"></div>\r\n        <div class=\"locateToolbarContainer locateToolbarContainerOnMap\" data-dojo-attach-point=\"locateToolbarContainer\"\r\n             data-bind=\"visible: showLocator\">\r\n            <input value=\"${locateDefaultInput}\" type=\"text\" class=\"locateTextBox defaultBorder\"\r\n                   data-dojo-attach-point=\"locateTextBox\"/>\r\n\r\n            <div data-dojo-attach-point=\"locateButton\" title=\"Locate\"\r\n                 class=\"defaultBorder searchButton searchButtonIcon\"></div>\r\n            <div data-dojo-attach-point=\"configureLocateButton\"\r\n                 data-bind=\"visible:showConfigureLocatorsButton\"\r\n                 data-dojo-attach-event=\"onclick:toggleConfigureLocatorTooltip\" title=\"Configure Locate\"\r\n                 class=\"defaultBorder configureLocate configureButtonIcon\"></div>\r\n        </div>\r\n        <div class=\"extentActionsToolbar\" data-bind=\"visible:showExtentActionsToolbar\">\r\n            <div class=\"smallActionsToolbarButton\">\r\n                <div data-dojo-attach-point=\"initialExtentButton\" title=\"Initial Extent\"\r\n                     class=\"commonIcons16 firstItem\"\r\n                     data-dojo-attach-event=\"onclick:handleGotoInitialExtent\"></div>\r\n            </div>\r\n            <div class=\"smallActionsToolbarButton\">\r\n                <div data-dojo-attach-point=\"prevExtentButton\" title=\"Previous Extent\"\r\n                     class=\"commonIcons16 previousGray\"\r\n                     data-bind=\"css:{previous: prevExtentEnabled()}\"\r\n                     data-dojo-attach-event=\"onclick:handleGotoPrevExtent\"></div>\r\n            </div>\r\n            <div class=\"smallActionsToolbarButton\">\r\n                <div data-dojo-attach-point=\"nextExtentButton\" title=\"Full Extent\"\r\n                     class=\"commonIcons16 locationGoTo\"\r\n                     data-dojo-attach-event=\"onclick:handleGotoFullExtent\"></div>\r\n            </div>\r\n            <div class=\"smallActionsToolbarButton\">\r\n                <div data-dojo-attach-point=\"nextExtentButton\" title=\"Next Extent\"\r\n                     class=\"commonIcons16 nextGray\"\r\n                     data-bind=\"css:{next: nextExtentEnabled()}\"\r\n                     data-dojo-attach-event=\"onclick:handleGotoNextExtent\"></div>\r\n            </div>\r\n            <div class=\"smallActionsToolbarButton\">\r\n                <div data-dojo-attach-point=\"lastExtentButton\" title=\"Last Extent\"\r\n                     class=\"commonIcons16 lastItem\"\r\n                     data-dojo-attach-event=\"onclick:handleGotoLastExtent\"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","url:dijit/templates/ColorPalette.html":"<div class=\"dijitInline dijitColorPalette\" role=\"grid\">\n\t<table dojoAttachPoint=\"paletteTableNode\" class=\"dijitPaletteTable\" cellSpacing=\"0\" cellPadding=\"0\" role=\"presentation\">\n\t\t<tbody data-dojo-attach-point=\"gridNode\"></tbody>\n\t</table>\n</div>\n","url:esriviewer/ui/draw/template/DrawWidgetTemplate.html":"<div class=\"drawWindow\">\r\n    <div class=\"defaultTabContainer\">\r\n        <span  data-bind=\"click:showDraw, css: {selectedTab: drawVisible}\">Create</span>\r\n        <span data-bind=\"click:showConfiguration, css: {selectedTab: configurationVisible}\">Configure</span>\r\n        <span  data-bind=\"visible:showGraphicsListTab, click:showGraphicsList, css: {selectedTab: graphicsListVisible}\">Added</span>\r\n        <span data-bind=\"visible:showSavedGraphicsTab, click:showUserPersistedGraphics, css: {selectedTab: userPersistedGraphicsVisible}\">Saved</span>\r\n    </div>\r\n    <div class=\"drawWindowInputIconsContainer\" data-dojo-attach-point=\"drawWindowInputIconsContainer\"\r\n         data-bind=\"visible: drawVisible\">\r\n        <div class=\"threePixelBorderRadius commonIcons32 pointUnselected\"\r\n             data-bind=\"visible: showDrawPointIcon, css: {pointSelected: pointActive}\"\r\n             title=\"Draw Point\" data-dojo-attach-event=\"onclick:handlePointDrawClick\"></div>\r\n        <div class=\"threePixelBorderRadius commonIcons32 lineUnselected\"\r\n             data-bind=\"visible: showDrawLineIcon, css: {lineSelected: lineActive}\"\r\n             title=\"Draw Line\" data-dojo-attach-event=\"onclick:handleLineDrawClick\"></div>\r\n        <div class=\"threePixelBorderRadius commonIcons32 polylineUnselected\"\r\n                data-bind=\"visible: showDrawPolylineIcon, css: {polylineSelected: polylineActive}\"\r\n                title=\"Draw Polyline\" data-dojo-attach-event=\"onclick:handlePolylineDrawClick\"></div>\r\n        <div data-bind=\"visible: showDrawPolygonIcon, css: {polygonSelected: polygonActive}\"\r\n             class=\"threePixelBorderRadius commonIcons32 polygonUnselected\"\r\n             title=\"Draw Polygon\" data-dojo-attach-event=\"onclick:handlePolygonDrawClick\"></div>\r\n        <div data-bind=\"visible: showDrawRectangleIcon,css: {rectangleSelected: rectangleActive}\"\r\n             class=\"threePixelBorderRadius commonIcons32 rectangleUnselected\"\r\n             title=\"Draw Rectangle\" data-dojo-attach-event=\"onclick:handleRectangleDrawClick\"></div>\r\n        <div class=\"threePixelBorderRadius commonIcons32 textUnselected\"\r\n             data-bind=\"visible: showDrawTextIcon,css: {textSelected: textActive}\"\r\n             title=\"Draw Text\" data-dojo-attach-event=\"onclick:handleTextDrawClick\"></div>\r\n    </div>\r\n    <div class=\"drawFreehandContainer\"\r\n         data-bind=\"visible: freehandContainerVisible\">\r\n        <span data-dojo-type=\"dijit/form/CheckBox\" data-dojo-attach-event=\"onChange:handleFreehandToggled\"\r\n              data-dojo-attach-point=\"freeHandDrawCheckbox\"></span>\r\n        <span class=\"drawFreehandCheckboxLabel\" data-dojo-attach-event=\"onclick:toggleFreehand\">Freehand</span>\r\n    </div>\r\n    <div class=\"drawWindowConfigureContainer\" data-bind=\"visible: configurationVisible\"\r\n         data-dojo-attach-point=\"drawWindowConfigureContainer\">\r\n    </div>\r\n    <div class=\"drawWindowGraphicsListContainer\" data-dojo-attach-point=\"drawWindowGraphicsListContainer\"\r\n         data-bind=\"visible: graphicsListVisible\">\r\n    </div>\r\n    <div class=\"drawWindowUserPersistedGraphicsContainer\"\r\n         data-dojo-attach-point=\"drawWindowUserPersistedGraphicsContainer\"\r\n         data-bind=\"visible: userPersistedGraphicsVisible\">\r\n    </div>\r\n</div>","url:dijit/templates/Menu.html":"<table class=\"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable\" role=\"menu\" tabIndex=\"${tabIndex}\"\n\t   cellspacing=\"0\">\n\t<tbody class=\"dijitReset\" data-dojo-attach-point=\"containerNode\"></tbody>\n</table>\n","url:esriviewer/ui/logging/template/LoggingWidgetTemplate.html":"<div class=\"loggingWidgetContainer\">\r\n    <div class=\"windowActions\">\r\n        <div class=\"loggingWidgetActionContainerToggleEntry\">\r\n            <div class=\"commonIcons16 information loggingWidgetActionDisplayToggleIcon\"></div>\r\n            <input type=\"checkbox\" data-bind=\"checked:infoDisplayed\"\r\n                   title=\"Toggle Info Messages\"\r\n                   class=\"loggingWidgetActionDisplayCheckbox\"/>\r\n        </div>\r\n        <div class=\"loggingWidgetActionContainerToggleEntry\">\r\n            <div class=\"commonIcons16 warning loggingWidgetActionDisplayToggleIcon\"></div>\r\n            <input type=\"checkbox\" data-bind=\"checked:warningDisplayed\"\r\n                   title=\"Toggle Warning Messages\"\r\n                   class=\"loggingWidgetActionDisplayCheckbox\"/>\r\n        </div>\r\n        <div class=\"loggingWidgetActionContainerToggleEntry\">\r\n            <div class=\"commonIcons16 error loggingWidgetActionDisplayToggleIcon\"></div>\r\n            <input type=\"checkbox\" data-bind=\"checked:errorDisplayed\"\r\n                   title=\"Toggle Error Messages\"\r\n                   class=\"loggingWidgetActionDisplayCheckbox\"/>\r\n\r\n        </div>\r\n        <div class=\"commonIcons16 deleteCross loggingWidgetActionClearIcon\" data-bind=\"visible: hasLogEntries\"\r\n             data-dojo-attach-point=\"clearLogIcon\"\r\n             data-dojo-attach-event=\"onclick: _showConfirmLogTooltip\"></div>\r\n    </div>\r\n    <ul class=\"loggingWidgetEntryList\"\r\n        data-bind=\"foreach: filteredEntries\">\r\n        <li class=\"loggingInfoMessage\" data-bind=\"css: $data.messageStyleClass\">\r\n            <span class=\"loggingMessageTimestamp\"><span>(</span><span\r\n                data-bind=\"text: $data.time\"></span><span>)</span></span>\r\n            <div class=\"loggingWidgetTypeIcon commonIcons16\" data-bind=\"css: $data.iconClass\" style=\"cursor: default\"></div>\r\n            <span class=\"loggingMessageText\" data-bind=\"text:$data.message\"></span>\r\n        </li>\r\n    </ul>\r\n</div>","url:dijit/form/templates/CheckBox.html":"<div class=\"dijit dijitReset dijitInline\" role=\"presentation\"\n\t><input\n\t \t${!nameAttrSetting} type=\"${type}\" role=\"${type}\" aria-checked=\"false\" ${checkedAttrSetting}\n\t\tclass=\"dijitReset dijitCheckBoxInput\"\n\t\tdata-dojo-attach-point=\"focusNode\"\n\t \tdata-dojo-attach-event=\"ondijitclick:_onClick\"\n/></div>\n","url:esriviewer/ui/layers/template/LayersTocWidgetTemplate.html":"<div>\r\n    <div class=\"tocRightClickLbl\">Right click for actions</div>\r\n    <div data-dojo-attach-point=\"tocContainer\" class=\"tocContainer\">\r\n\r\n\r\n    </div>\r\n</div>","url:esriviewer/ui/navigation/template/NavigationWidgetTemplate.html":"<div data-bind=\"visible: visible\" class=\"navigationHorizontalWidgetContainer\">\r\n    <div class=\"navigationTextToolbarHorizontal\">\r\n        <div class=\"navigationTextToolbarHorizontalInner\" data-dojo-attach-point=\"navigationToolbar\">\r\n        </div>\r\n    </div>\r\n</div>\r\n","url:esriviewer/ui/draw/configure/geometry/template/ConfigureLineTemplate.html":"<div class=\"configureDrawGeometryContainer\">\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Line Style</span>\r\n        <select data-bind=\"options: lineStyles ,value:selectedLineStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Width</span>\r\n        <select data-bind=\"options: lineWidths ,value:selectedWidth\"></select>\r\n    </div>\r\n    <div data-dojo-attach-point=\"transparencySliderContainer\"></div>\r\n\r\n    <div class=\"configureDrawColorPickerContainer\" data-dojo-attach-point=\"colorPickerContainer\"></div>\r\n</div>","url:esriviewer/ui/draw/base/template/GraphicsListingTemplate.html":"<div>\r\n    <div class=\"addGraphicsActionsContainer\" data-dojo-attach-point=\"addGraphicsActionsContainer\">\r\n        <div class=\"graphicsListRightIcon commonIcons16 disk\" title=\"Save Graphics\"\r\n             data-bind=\"click:toggleSaveGraphics, visible:saveGraphicsIconVisible\"></div>\r\n        <div class=\"graphicsListLeftIcon commonIcons16 layerHide\" title=\"Toggle Graphics\"\r\n             data-bind=\"click:toggleAllGraphics, css:{layerShow: allGraphicsVisible}\"></div>\r\n        <div class=\"graphicsListLeftIcon commonIcons16 trash\" title=\"Remove All Graphics\"\r\n             data-dojo-attach-event=\"onclick:showConfirmRemoveAllTooltip\"\r\n             data-dojo-attach-point=\"removeAllGraphicsIcon\"\r\n                ></div>\r\n    </div>\r\n    <div class=\"saveGraphicsInputContainer\" data-bind=\"visible: saveGraphicsInputVisible\">\r\n        <input data-dojo-type=\"dijit/form/TextBox\" data-dojo-attach-event=\"onKeyUp: handleSaveGraphicsKeyUp\" data-dojo-attach-point=\"userSaveGraphicsNameInput\" placeholder=\"Enter A Label...\"/>\r\n        <span data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:handleSaveGraphics\">Save</span>\r\n    </div>\r\n\r\n    <div class=\"addedGraphicsListContainer\" data-dojo-attach-point=\"addedGraphicsListContainer\">\r\n        <ul data-dojo-attach-point=\"addedGraphicsList\" class=\"viewerList\" data-bind=\"foreach: addedGraphics\">\r\n            <li class=\"graphicsListEntry\">\r\n                <div title=\"Pan And Flash Graphic\"\r\n                     class=\"viewerListGenericIcon commonIcons16 magnifyingGlass\"\r\n                     data-bind=\"click:$parent.zoomToGraphic\"></div>\r\n                <div title=\"Remove Graphic\" class=\"viewerListEntryRemoveIcon commonIcons16 remove\"\r\n                     data-bind=\"click:$parent.removeGraphic\"></div>\r\n                <span class=\"graphicsListEntryLabel\" data-bind=\"text: $data.label\"></span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>","url:dijit/templates/TreeNode.html":"<div class=\"dijitTreeNode\" role=\"presentation\"\n\t><div data-dojo-attach-point=\"rowNode\" class=\"dijitTreeRow\" role=\"presentation\"\n\t\t><span data-dojo-attach-point=\"expandoNode\" class=\"dijitInline dijitTreeExpando\" role=\"presentation\"></span\n\t\t><span data-dojo-attach-point=\"expandoNodeText\" class=\"dijitExpandoText\" role=\"presentation\"></span\n\t\t><span data-dojo-attach-point=\"contentNode\"\n\t\t\tclass=\"dijitTreeContent\" role=\"presentation\">\n\t\t\t<span role=\"presentation\" class=\"dijitInline dijitIcon dijitTreeIcon\" data-dojo-attach-point=\"iconNode\"></span\n\t\t\t><span data-dojo-attach-point=\"labelNode,focusNode\" class=\"dijitTreeLabel\" role=\"treeitem\" tabindex=\"-1\" aria-selected=\"false\"></span>\n\t\t</span\n\t></div>\n\t<div data-dojo-attach-point=\"containerNode\" class=\"dijitTreeNodeContainer\" role=\"presentation\" style=\"display: none;\"></div>\n</div>\n","url:esriviewer/ui/throbber/template/ThrobberTemplate.html":"<div class=\"loadingThrobber\"\r\n     style=\"display:none\">\r\n    <div class=\"loadingThrobberInner\">\r\n        <div class=\"loadingIcon\"></div>\r\n    </div>\r\n</div>","undefined":undefined,"url:esriviewer/ui/draw/configure/geometry/template/ConfigurePolygonTemplate.html":"<div class=\"configureDrawGeometryContainer\">\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Fill Style</span>\r\n        <select data-bind=\"options: fillStyles ,value:selectedFillStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Outline Style</span>\r\n        <select data-bind=\"options: outlineStyles ,value:selectedOutlineStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Outline Width</span>\r\n        <select data-bind=\"options: outlineWidths ,value:selectedOutlineWidth\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Angle</span>\r\n        <select data-bind=\"options: angles ,value:selectedAngle\"></select>\r\n    </div>\r\n    <div data-dojo-attach-point=\"transparencySliderContainer\"></div>\r\n\r\n    <div class=\"colorPickerTextContainer\">\r\n        <span class=\"colorPickerText\"\r\n              data-bind=\"click: setOutlineColorMode,css:{colorPickerTextSelected: outlineColorActive}\"> Outline Color</span>\r\n        <span class=\"colorPickerText\"\r\n              data-bind=\"click: setFillColorMode,css:{colorPickerTextSelected: fillColorActive}\"> Fill Color</span>\r\n\r\n    </div>\r\n\r\n\r\n    <div class=\"configureDrawColorPickerContainer\" data-dojo-attach-point=\"colorPickerContainer\"></div>\r\n</div>","url:esriviewer/ui/toolbar/base/template/BasemapsListingTemplate.html":"<div data-bind=\"visible: visible\" class=\"basemapsToolbarDropdown toolbarDropdownContent\">\r\n    <div data-bind=\"foreach:basemaps\">\r\n        <div class=\"basemapToolbarEntry\">\r\n            <div class=\"basemapToolbarEntryLabel\" data-bind=\"text: $data.label\"></div>\r\n            <img class=\"basemapToolbarThumb\"\r\n                 data-bind=\"click:$parent.handleBasemapClick, css:{basemapThumbSelected: $data.selected},attr:{src:$data.thumbnail, title: $data.label}\">\r\n        </div>\r\n    </div>\r\n</div>","url:dijit/templates/Tree.html":"<div role=\"tree\">\n\t<div class=\"dijitInline dijitTreeIndent\" style=\"position: absolute; top: -9999px\" data-dojo-attach-point=\"indentDetector\"></div>\n\t<div class=\"dijitTreeExpando dijitTreeExpandoLoading\" data-dojo-attach-point=\"rootLoadingIndicator\"></div>\n\t<div data-dojo-attach-point=\"containerNode\" class=\"dijitTreeContainer\" role=\"presentation\">\n\t</div>\n</div>\n","url:esriviewer/ui/window/template/WindowWidgetTemplate.html":"<div class=\"windowContainer defaultBorder fivePixelBorderRadius defaultBoxShadow\">\r\n    <div data-dojo-attach-point=\"windowHeader\" class=\"windowHeader\">\r\n        <div class=\"windowCloseImg windowAction close\" data-dojo-attach-point=\"windowCloseImg\"\r\n             title=\"Close\"></div>\r\n        <div class=\"windowMinimizeImg windowAction minimize\" data-dojo-attach-point=\"windowMinimizeImg\"\r\n             title=\"Minimize\"></div>\r\n        <div data-dojo-attach-point=\"headerMoverContainer\" class=\"headerMoverContainer\">\r\n            <div class=\"windowIcon ${windowIconClass}\" title=\"${windowIconAltText}\"></div>\r\n            <span class=\"windowHeaderText\">${windowHeaderText}</span>\r\n        </div>\r\n    </div>\r\n    <div class=\"windowContentOuter\" data-dojo-attach-point=\"windowContentOuter\">\r\n        <div data-dojo-attach-point=\"windowContent\" class=\"windowContent\">\r\n            <div data-dojo-attach-point=\"windowLoadingThrobber\" class=\"windowLoadingThrobber\"></div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n</div>","url:esriviewer/ui/accordion/template/ToolsAccordionTemplate.html":"<div class=\"toolsAccordionContainer fivePixelBorderRadius defaultBoxShadow\">\r\n\r\n</div>","url:esriviewer/ui/basemap/template/BasemapGalleryTemplate.html":"<div data-bind=\"visible: visible\" class=\"defaultBackground basemapGalleryContainer\">\r\n    <div data-dojo-attach-point=\"basemapGalleryContents\"></div>\r\n</div>","url:dijit/templates/MenuItem.html":"<tr class=\"dijitReset dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<span role=\"presentation\" class=\"dijitInline dijitIcon dijitMenuItemIcon\" data-dojo-attach-point=\"iconNode\"></span>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode,textDirNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">\n\t\t<span data-dojo-attach-point=\"arrowWrapper\" style=\"visibility: hidden\">\n\t\t\t<span class=\"dijitInline dijitIcon dijitMenuExpand\"></span>\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</span>\n\t</td>\n</tr>\n","url:esriviewer/ui/layers/template/LayersWidgetTemplate.html":"<div>\r\n    <div class=\"defaultTabContainer\" data-dojo-attach-point=\"layersTabContainer\">\r\n        <span data-dojo-attach-point=\"layersTab\"\r\n              data-bind=\"click:showLayersList, css: {selectedTab: layersListVisible}\">Layers</span>\r\n        <span data-dojo-attach-point=\"addLayersTab\"\r\n              data-bind=\"click:showAddLayers, css: {selectedTab: addLayersVisible}\">Add Layer</span>\r\n        <span data-dojo-attach-point=\"persistedLayersTab\"\r\n              data-bind=\"click:showUserPersistedLayers, css: {selectedTab: persistedLayersVisible}\">Saved Layers</span>\r\n    </div>\r\n    <div data-bind=\"visible:addLayersVisible\" class=\"addLayerContainer\" data-dojo-attach-point=\"addLayerContainer\">\r\n        <div class=\"addLayerContainerInner\">\r\n            <div class=\"viewerAddLayerWorkingWKIDContainer\" data-bind=\"visible:showWKIDInAddLayers\">\r\n                <span class=\"viewerAddLayerLabel \">Map WKID:</span>\r\n                <span class=\"viewerAddLayerWorkingWKIDLabel\" data-bind=\"text: viewerWKID\"></span>\r\n            </div>\r\n            <div class=\"viewerAddLayerLabel viewerAddLayerUrlLabel \">URL:</div>\r\n            <div data-dojo-type=\"dijit/form/TextBox\" style=\"width: 100%\" data-dojo-attach-point=\"addLayerTextInput\"\r\n                 data-dojo-attach-event=\"onKeyUp:handleLayerAddUrlKeyUp\"></div>\r\n            <div class=\"viewerAddLayerLabel viewerAddLayerUrlLabel \">Label:</div>\r\n            <div data-dojo-type=\"dijit/form/TextBox\" style=\"width: 100%\" data-dojo-attach-point=\"addLayerLabelInput\"\r\n                 value=\"Added Layer\"></div>\r\n            <div class=\"viewerAddLayerActions\">\r\n                <div class=\"layerTypeContainer\">\r\n                    <div class=\"viewerAddLayerLabel\">Type:</div>\r\n                    <select data-dojo-type=\"dijit/form/Select\" style=\"width: 100%\"\r\n                            data-dojo-attach-point=\"addLayerTypeSelect\"\r\n                            style=\"width: 15em\"></select>\r\n                </div>\r\n                <div class=\"viewerAddLayerButtonActions\">\r\n                    <div data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:addManualLayer\">Add Layer\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n    <div data-dojo-attach-point=\"layerTocContainer\" data-bind=\"visible:layersListVisible\">\r\n\r\n    </div>\r\n    <div data-bind=\"visible:persistedLayersVisible\" data-dojo-attach-point=\"userPersistedLayersContainer\">\r\n    </div>\r\n</div>","url:esriviewer/ui/measure/template/MeasureWidgetTemplate.html":"<div class=\"measurementWidget\">\r\n    <div class=\"measureIcon areaIcon\"\r\n         title=\"Area\"\r\n         data-bind=\"click:handleAreaButtonClick, css: {measurementIconSelected: areaActive}\"></div>\r\n    <div class=\"measureIcon distanceIcon\"\r\n         title=\"Distance\"\r\n         data-bind=\"click:handleDistanceButtonClick, css: {measurementIconSelected: distanceActive}\"></div>\r\n    <div class=\"measureIcon locationIcon\"\r\n         title=\"Location\"\r\n         data-bind=\"click:handleLocationButtonClick, css: {measurementIconSelected: locationActive}\"></div>\r\n    <div class=\"measurementSpacer\">|</div>\r\n    <select data-bind=\"visible: areaActive, options: areaMeasurementUnits ,value:selectedAreaUnits, optionsText: 'label', optionsValue: 'value'\">\r\n    </select>\r\n    <select data-bind=\"visible: distanceActive, options: distanceMeasurementUnits ,value:selectedDistanceUnits, optionsText: 'label', optionsValue: 'value'\">\r\n    </select>\r\n    <select data-bind=\"visible: locationActive, options: locationUnits ,value:selectedLocationUnits, optionsText: 'label', optionsValue: 'value'\">\r\n    </select>\r\n\r\n\r\n    <div class=\"measurementResultsContainer\">\r\n        <span data-bind=\"text: measureMethodText\" class=\"measureMethodText\"></span>\r\n        <span data-bind=\"text: resultsText\" class=\"measureResultsText\"></span>\r\n        <span data-bind=\"text: unitsText\"  class=\"measureUnitsText\"></span>\r\n    </div>\r\n</div>","url:dijit/templates/CheckedMenuItem.html":"<tr class=\"dijitReset dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"${role}\" tabIndex=\"-1\" aria-checked=\"${checked}\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<span class=\"dijitInline dijitIcon dijitMenuItemIcon dijitCheckedMenuItemIcon\" data-dojo-attach-point=\"iconNode\"></span>\n\t\t<span class=\"dijitMenuItemIconChar dijitCheckedMenuItemIconChar\">${checkedChar}</span>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode,labelNode,textDirNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">&#160;</td>\n</tr>\n","*now":function(r){r(["dojo/i18n!*preload*esriviewer/nls/esriviewer*[\"ar\",\"ca\",\"cs\",\"da\",\"de\",\"el\",\"en-gb\",\"en-us\",\"es-es\",\"fi-fi\",\"fr-fr\",\"he-il\",\"hu\",\"it-it\",\"ja-jp\",\"ko-kr\",\"nl-nl\",\"nb\",\"pl\",\"pt-br\",\"pt-pt\",\"ru\",\"sk\",\"sl\",\"sv\",\"th\",\"tr\",\"zh-tw\",\"zh-cn\",\"ROOT\"]"]);}}});define("esriviewer/esriviewer",[],1);