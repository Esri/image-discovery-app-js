//>>built
require({cache:{"esriviewer/ui/footer/FooterTogglerWidget":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/text!./template/FooterTogglerTemplate.html","../base/UITemplatedWidget","dojo/dom-construct","./model/FooterTogglerViewModel"],function(_1,_2,_3,_4,_5,_6,_7){return _1([_5],{firstFooterShow:true,templateString:_4,postCreate:function(){this.inherited(arguments);this.viewModel=new _7();ko.applyBindings(this.viewModel,this.domNode);},initListeners:function(){this.inherited(arguments);_2.subscribe(VIEWER_GLOBALS.EVENTS.FOOTER.TOGGLE,_3.hitch(this,this.toggle));_2.subscribe(VIEWER_GLOBALS.EVENTS.FOOTER.COLLAPSE,_3.hitch(this,this.collapse));_2.subscribe(VIEWER_GLOBALS.EVENTS.FOOTER.EXPAND,_3.hitch(this,this.expand));_2.subscribe(VIEWER_GLOBALS.EVENTS.FOOTER.IS_EXPANDED,_3.hitch(this,this._handleIsExpanded));},_handleIsExpanded:function(_8){if(_8!=null&&_3.isFunction(_8)){_8(this.viewModel.expanded());}},toggle:function(){if(this.viewModel.expanded()){this.collapse();}else{this.expand();}},collapse:function(){if(this.viewModel.expanded()){this.viewModel.expanded(false);_2.publish(VIEWER_GLOBALS.EVENTS.FOOTER.COLLAPSED);}},expand:function(){if(!this.viewModel.expanded()){this.viewModel.expanded(true);if(this.firstFooterShow){this.onFirstFooterShow();this.firstFooterShow=false;}_2.publish(VIEWER_GLOBALS.EVENTS.FOOTER.EXPANDED);}},setContent:function(_9){_6.place(_9,this.footerContent);},onFirstFooterShow:function(){}});});},"esriviewer/ui/editor/FeatureServiceEditorWindowWidget":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","../window/WindowWidget"],function(_a,_b,_c,_d){return _a([_d],{defaultPositioning:{x:600,y:50},windowWidth:"310px",windowHeaderText:"Feature Edit",windowIconAltText:"Feature Edit",positioningParamName:"featureEdit",windowIconClass:"commonIcons16 pencil",constructor:function(){this.firstShowListener=this.on("firstWindowShow",_c.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/editor/FeatureServiceEditor"],_c.hitch(this,function(_e){this.featureServiceEditor=new _e();this.featureServiceEditor.on("setParentWidth",_c.hitch(this,this.setWindowWidthFromInt));this.setContent(this.featureServiceEditor.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_b.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.FEATURE_EDITOR.SHOW,_c.hitch(this,this.show)));this.subscribes.push(_b.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.FEATURE_EDITOR.HIDE,_c.hitch(this,this.hide)));this.subscribes.push(_b.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.FEATURE_EDITOR.TOGGLE,_c.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.featureServiceEditor){if(this.featureServiceEditor.currentDrawType!=null){this.featureServiceEditor.clearDraw();}}},show:function(){this.inherited(arguments);if(this.featureServiceEditor){this.featureServiceEditor.showFeatureLayers();}}});});},"esriviewer/map/base/LayerQueryTools":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","esri/tasks/QueryTask","esri/tasks/query","esri/tasks/StatisticDefinition","./DistinctQuery"],function(_f,_10,_11,_12,_13,_14,_15){return _f([],{constructor:function(){this.layerFieldsCache={};this.initListeners();},initListeners:function(){this.inherited(arguments);_11.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.QUERY_LAYER,_10.hitch(this,this.handleQueryLayer));_11.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.GET_MIN_MAX_FOR_FIELD,_10.hitch(this,this._handleGetMinMaxForField));_11.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.GET_DISTINCT_FIELD_VALUES,_10.hitch(this,this._handleGetDistinctFieldValues));},_handleGetDistinctFieldValues:function(_16){if(!this._validateParameters(_16)){return;}var _17=new _15();_17.returnGeometry=false;if(_16.whereClause!=null&&_16.whereClause.length>0){_17.where=_16.whereClause;}else{_17.where="1 = 1";}if(_16.geometry!=null){_17.geometry=_16.geometry;}if(_16.distinctField!=null){_17.orderByFields=[_16.distinctField];_17.outFields=[_16.distinctField];}else{if(_16.errback!=null&&_10.isFunction(_16.errback)){_16.errback("Must supply distinct field");return;}}var _18=this._getQueryTask(_16);this._performQuery(_18,_17,function(res){if(!_16.processResponse){_16.callback(res);}else{var _19=[];if(res&&res.features&&res.features.length>0){var _1a;for(var i=0;i<res.features.length;i++){_1a=res.features[i].attributes;_19.push(_1a[_16.distinctField]);}}_16.callback(_19);}},_16.errback);},_validateParameters:function(_1b){if(_1b.layer==null||_1b.layer.url==null){if(_1b.errback!=null&&_10.isFunction(_1b.errback)){_1b.errback("There is no query layer");}return false;}if(_1b.callback==null||!_10.isFunction(_1b.callback)){return false;}if(_1b.errback==null){_1b.errback=_10.hitch(this,this._handleQueryLayerDefaultErrback,_1b.layer);}return true;},_getQueryTask:function(_1c){var _1d=_1c.layer.url;if(_1c.layerId!=null){_1d=VIEWER_UTILS.joinUrl(_1d,_1c.layerId);}return new _12(_1d);},_handleGetMinMaxForField:function(_1e){if(!this._validateParameters(_1e)){return;}var _1f=this._getQueryTask(_1e);var _20=new _13();_20.returnGeometry=false;var _21=[];var _22=new _14();_22.onStatisticField=_1e.minFieldName;_22.outStatisticFieldName="min";_22.statisticType="min";var _23=new _14();_23.onStatisticField=_1e.maxFieldName;_23.outStatisticFieldName="max";_23.statisticType="max";_21.push(_22);_21.push(_23);_20.outStatistics=_21;this._performQuery(_1f,_20,function(res){var min=null;var max=null;if(res&&res.features&&res.features.length>0){min=res.features[0].attributes.min;max=res.features[0].attributes.max;}_1e.callback({min:min,max:max});},_1e.errback);},handleQueryLayer:function(_24){if(!this._validateParameters(_24)){return;}var _25=this._getQueryTask(_24);var _26=new _13();_26.returnGeometry=_24.returnGeometry;var map;_11.publish(VIEWER_GLOBALS.EVENTS.MAP.GET,function(_27){map=_27;});_26.outSpatialReference=map.extent.spatialReference;if(_24.objectIds!=null&&_24.objectIds.length>0){_26.objectIds=_24.objectIds;}if(_24.whereClause!=null&&_24.whereClause.length>0){_26.where=_24.whereClause;}if(_24.geometry!=null){_26.geometry=_24.geometry;}if(_24.outFields!=null){_26.outFields=_24.outFields;}else{if(_24.returnGeometry){_26.outFields=["*"];}else{var _28=queryUrl.toLowerCase();if(this.layerFieldsCache[_28]==null){if(_24.layerId!=null){var _29=_24.callback;var _2a=_24.errback;VIEWER_UTILS.getLayerInfoFromService(_24.layer.url,_24.layerId,_10.hitch(this,function(_2b){var _2c=this._generateOutFieldsFromLayer(_2b);this.layerFieldsCache[_28]=_2c;_26.outFields=_2c;this._performQuery(_25,_26,_29,_2a);}));return;}else{var _2d=this._generateOutFieldsFromLayer(_24.layer);this.layerFieldsCache[_28]=_2d;_26.outFields=_2d;}}else{_26.outFields=this.layerFieldsCache[_28];}}}this._performQuery(_25,_26,_24.callback,_24.errback);},_generateOutFieldsFromLayer:function(_2e){if(_2e==null||!_10.isObject(_2e)||_2e.fields==null||!_10.isArray(_2e.fields)){return ["*"];}var _2f=[];var _30;for(var i=0;i<_2e.fields.length;i++){_30=_2e.fields[i];if(_30.type!=VIEWER_GLOBALS.ESRI_FIELD_TYPES.GEOMETRY){_2f.push(_30.name);}}return _2f;},_performQuery:function(_31,_32,_33,_34){_31.execute(_32,_33,_34);},_handleQueryLayerDefaultErrback:function(_35,err){VIEWER_UTILS.log("Could not perform layer query",VIEWER_GLOBALS.LOG_TYPE.ERROR);_11.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Could not perform layer query");}});});},"esriviewer/base/ConfigurationEntryMixin":function(){define(["dojo/_base/declare"],function(_36){return _36([],{constructor:function(){},loadViewerConfigurationData:function(){}});});},"esriviewer/ui/draw/base/GraphicsListWidget":function(){define(["dojo/_base/declare","dojo/text!./template/GraphicsListingTemplate.html","../../base/UITemplatedWidget","dojo/_base/lang","../../tooltip/ConfirmTooltip","./model/GraphicsListViewModel","dijit/form/TextBox","dijit/form/Button"],function(_37,_38,_39,_3a,_3b,_3c,_3d,_3e){return _37([_39],{templateString:_38,graphicsCount:0,saveSupported:false,allGraphicsOff:false,constructor:function(_3f){_3a.mixin(this,_3f||{});this.typeLabelLookup={};this.typeLabelLookup[VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT]="Point";this.typeLabelLookup[VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE]="Line";this.typeLabelLookup[VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON]="Polygon";this.typeLabelLookup[VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_RECTANGLE]="Rectangle";this.typeLabelLookup[VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT]="Text Label";},postCreate:function(){this.inherited(arguments);this.viewModel=new _3c();this.viewModel.saveGraphicsIconVisible(this.saveSupported);this.viewModel.on(this.viewModel.REMOVE_ALL_GRAPHICS,_3a.hitch(this,this.handleRemoveAllGraphics));this.viewModel.on(this.viewModel.REMOVE_GRAPHIC,_3a.hitch(this,this.handleRemoveGraphic));ko.applyBindings(this.viewModel,this.domNode);},handleRemoveAllGraphics:function(){this.onRemoveAllGraphics();},onRemoveAllGraphics:function(){},handleRemoveGraphic:function(_40){this.onRemoveGraphic(_40);},onRemoveGraphic:function(_41){},addGraphic:function(_42){this.viewModel.addedGraphics.push({label:_42.label?_42.label:(this.typeLabelLookup[_42.type]+" "+VIEWER_UTILS.getTimeStamp()),graphic:_42.graphic});},showConfirmRemoveAllTooltip:function(){if(this.confirmDeleteAllTooltip==null){this.createConfirmDeleteBookmarkTooltip();}if(this.confirmDeleteAllTooltip){this.confirmDeleteAllTooltip.show();}},createConfirmDeleteBookmarkTooltip:function(){this.confirmDeleteAllTooltip=new _3b({confirmCallback:_3a.hitch(this.viewModel,this.viewModel.removeAllGraphics),aroundNode:this.removeAllGraphicsIcon,displayText:"Delete Graphics? "});this.confirmDeleteAllTooltip.on("hide",_3a.hitch(this,function(){this.deleteBookmarkConfirmedCallback=null;}));},hidePopups:function(){if(this.confirmDeleteAllTooltip){this.confirmDeleteAllTooltip.hide();}},handleSaveGraphicsKeyUp:function(e){if(VIEWER_UTILS.isEnterKey(e)){this.handleSaveGraphics();}},handleSaveGraphics:function(){var _43=this.userSaveGraphicsNameInput.get("value");if(_43!=null&&_43!=""){this.onSaveGraphics(_43,this.viewModel.addedGraphics());this.viewModel.saveGraphicsInputVisible(false);this.userSaveGraphicsNameInput.set("value","");}},getGraphics:function(){var _44=this.viewModel.addedGraphics();var _45=[];for(var i=0;i<_44.length;i++){_45.push(_44[i].graphic);}return _45;},onSaveGraphics:function(_46,_47){}});});},"esriviewer/ui/layers/LayersWindowWidget":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/dom-class","../window/WindowWidget","./LayersWidget"],function(_48,_49,_4a,_4b,_4c,_4d){return _48([_4c],{defaultPositioning:{x:700,y:50},windowWidth:null,windowHeaderText:"Map Layers",windowIconAltText:"Map Layers",windowIconClass:"commonIcons16 layerList",positioningParamName:"layers",constructor:function(){this.firstShowListener=this.on("firstWindowShow",_4a.hitch(this,this.handleFirstWindowShow));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_49.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.WIDGET.SHOW,_4a.hitch(this,this.show)));},handleFirstWindowShow:function(){this.firstShowListener.remove();this.setContent(this.layersWidget.domNode);},postCreate:function(){_4b.add(this.domNode,"layersWindow");_4b.add(this.windowContent,"layersWindowContent");this.layersWidget=new _4d();this.inherited(arguments);},show:function(){this.inherited(arguments);this.layersWidget.showLayerList();},hidePopups:function(){this.inherited(arguments);if(this.layersWidget){this.layersWidget.hidePopups();}}});});},"esriviewer/map/base/MapUtils":function(){define(["dojo/_base/declare"],function(_4e){return _4e([],{});});},"esriviewer/ui/base/UITemplatedWidget":function(){define(["dojo/_base/declare","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","./UIWidget"],function(_4f,_50,_51,_52){return _4f([_52,_50,_51],{widgetsInTemplate:true});});},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(_53,_54,_55,_56){return _55("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:false,constructor:function(_57){_56.mixin(this,_57);this.connects=[];var _58=this.store;if(!_58.getFeatures()["dojo.data.api.Identity"]){throw new Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");}if(_58.getFeatures()["dojo.data.api.Notification"]){this.connects=this.connects.concat([_54.after(_58,"onNew",_56.hitch(this,"onNewItem"),true),_54.after(_58,"onDelete",_56.hitch(this,"onDeleteItem"),true),_54.after(_58,"onSet",_56.hitch(this,"onSetItem"),true)]);}},destroy:function(){var h;while(h=this.connects.pop()){h.remove();}},getRoot:function(_59,_5a){if(this.root){_59(this.root);}else{this.store.fetch({query:this.query,onComplete:_56.hitch(this,function(_5b){if(_5b.length!=1){throw new Error("dijit.tree.TreeStoreModel: root query returned "+_5b.length+" items, but must return exactly one");}this.root=_5b[0];_59(this.root);}),onError:_5a});}},mayHaveChildren:function(_5c){return _53.some(this.childrenAttrs,function(_5d){return this.store.hasAttribute(_5c,_5d);},this);},getChildren:function(_5e,_5f,_60){var _61=this.store;if(!_61.isItemLoaded(_5e)){var _62=_56.hitch(this,arguments.callee);_61.loadItem({item:_5e,onItem:function(_63){_62(_63,_5f,_60);},onError:_60});return;}var _64=[];for(var i=0;i<this.childrenAttrs.length;i++){var _65=_61.getValues(_5e,this.childrenAttrs[i]);_64=_64.concat(_65);}var _66=0;if(!this.deferItemLoadingUntilExpand){_53.forEach(_64,function(_67){if(!_61.isItemLoaded(_67)){_66++;}});}if(_66==0){_5f(_64);}else{_53.forEach(_64,function(_68,idx){if(!_61.isItemLoaded(_68)){_61.loadItem({item:_68,onItem:function(_69){_64[idx]=_69;if(--_66==0){_5f(_64);}},onError:_60});}});}},isItem:function(_6a){return this.store.isItem(_6a);},fetchItemByIdentity:function(_6b){this.store.fetchItemByIdentity(_6b);},getIdentity:function(_6c){return this.store.getIdentity(_6c);},getLabel:function(_6d){if(this.labelAttr){return this.store.getValue(_6d,this.labelAttr);}else{return this.store.getLabel(_6d);}},newItem:function(_6e,_6f,_70){var _71={parent:_6f,attribute:this.childrenAttrs[0]},_72;if(this.newItemIdAttr&&_6e[this.newItemIdAttr]){this.fetchItemByIdentity({identity:_6e[this.newItemIdAttr],scope:this,onItem:function(_73){if(_73){this.pasteItem(_73,null,_6f,true,_70);}else{_72=this.store.newItem(_6e,_71);if(_72&&(_70!=undefined)){this.pasteItem(_72,_6f,_6f,false,_70);}}}});}else{_72=this.store.newItem(_6e,_71);if(_72&&(_70!=undefined)){this.pasteItem(_72,_6f,_6f,false,_70);}}},pasteItem:function(_74,_75,_76,_77,_78){var _79=this.store,_7a=this.childrenAttrs[0];if(_75){_53.forEach(this.childrenAttrs,function(_7b){if(_79.containsValue(_75,_7b,_74)){if(!_77){var _7c=_53.filter(_79.getValues(_75,_7b),function(x){return x!=_74;});_79.setValues(_75,_7b,_7c);}_7a=_7b;}});}if(_76){if(typeof _78=="number"){var _7d=_79.getValues(_76,_7a).slice();_7d.splice(_78,0,_74);_79.setValues(_76,_7a,_7d);}else{_79.setValues(_76,_7a,_79.getValues(_76,_7a).concat(_74));}}},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(_7e,_7f){if(!_7f){return;}this.getChildren(_7f.item,_56.hitch(this,function(_80){this.onChildrenChange(_7f.item,_80);}));},onDeleteItem:function(_81){this.onDelete(_81);},onSetItem:function(_82,_83){if(_53.indexOf(this.childrenAttrs,_83)!=-1){this.getChildren(_82,_56.hitch(this,function(_84){this.onChildrenChange(_82,_84);}));}else{this.onChange(_82);}}});});},"esriviewer/ui/zoomin/ZoomInWidget":function(){define(["dojo/_base/declare","dojo/text!./template/ZoomInWidgetTemplate.html","dojo/topic","dojo/_base/lang","../base/UITemplatedWidget","dojo/_base/window","dojo/dom-construct","esri/toolbars/navigation","dojo/dom-class"],function(_85,_86,_87,_88,_89,_8a,_8b,_8c,_8d){return _85([_89],{ZOOM_IN:"zoomInType",ZOOM_OUT:"zoomOutType",templateString:_86,isPositionedByConfig:true,defaultPositioning:{x:158,y:44},positioningParamName:"zoomInOut",postCreate:function(){this.inherited(arguments);var map;_87.publish(VIEWER_GLOBALS.EVENTS.MAP.GET,function(_8e){map=_8e;});this.map=map;this._navigation=new _8c(this.map);_8b.place(this.domNode,_8a.body());},initListeners:function(){this.inherited(arguments);this.toolChangeConnect=_87.subscribe(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,_88.hitch(this,this.deactivate));},deactivate:function(){if(_8d.contains(this.zoomOutButton,"active")){_8d.remove(this.zoomOutButton,"active");}if(_8d.contains(this.zoomInButton,"active")){_8d.remove(this.zoomInButton,"active");}this._navigation.deactivate();},zoomIn:function(){if(_8d.contains(this.zoomOutButton,"active")){_8d.remove(this.zoomOutButton,"active");}if(_8d.contains(this.zoomInButton,"active")){_8d.remove(this.zoomInButton,"active");this._navigation.deactivate();}else{_87.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED);this._navigation.activate(_8c.ZOOM_IN);_8d.add(this.zoomInButton,"active");}},zoomOut:function(){if(_8d.contains(this.zoomInButton,"active")){_8d.remove(this.zoomInButton,"active");}if(_8d.contains(this.zoomOutButton,"active")){_8d.remove(this.zoomOutButton,"active");this._navigation.deactivate();}else{_87.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED);this._navigation.activate(_8c.ZOOM_OUT);_8d.add(this.zoomOutButton,"active");}}});});},"dijit/_MenuBase":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/lang","dojo/mouse","dojo/on","dojo/window","./a11yclick","./registry","./_Widget","./_CssStateMixin","./_KeyNavContainer","./_TemplatedMixin"],function(_8f,_90,dom,_91,_92,_93,_94,on,_95,_96,_97,_98,_99,_9a,_9b){return _90("dijit._MenuBase",[_98,_9b,_9a,_99],{selected:null,_setSelectedAttr:function(_9c){if(this.selected!=_9c){if(this.selected){this.selected._setSelected(false);this._onChildDeselect(this.selected);}if(_9c){_9c._setSelected(true);}this._set("selected",_9c);}},activated:false,_setActivatedAttr:function(val){_92.toggle(this.domNode,"dijitMenuActive",val);_92.toggle(this.domNode,"dijitMenuPassive",!val);this._set("activated",val);},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:false,childSelector:function(_9d){var _9e=_97.byNode(_9d);return _9d.parentNode==this.containerNode&&_9e&&_9e.focus;},postCreate:function(){var _9f=this,_a0=typeof this.childSelector=="string"?this.childSelector:_93.hitch(this,"childSelector");this.own(on(this.containerNode,on.selector(_a0,_94.enter),function(){_9f.onItemHover(_97.byNode(this));}),on(this.containerNode,on.selector(_a0,_94.leave),function(){_9f.onItemUnhover(_97.byNode(this));}),on(this.containerNode,on.selector(_a0,_96),function(evt){_9f.onItemClick(_97.byNode(this),evt);evt.stopPropagation();evt.preventDefault();}));this.inherited(arguments);},onKeyboardSearch:function(_a1,evt,_a2,_a3){this.inherited(arguments);if(!!_a1&&(_a3==-1||(!!_a1.popup&&_a3==1))){this.onItemClick(_a1,evt);}},_keyboardSearchCompare:function(_a4,_a5){if(!!_a4.shortcutKey){return _a5==_a4.shortcutKey.toLowerCase()?-1:0;}return this.inherited(arguments)?1:0;},onExecute:function(){},onCancel:function(){},_moveToPopup:function(evt){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled){this.onItemClick(this.focusedChild,evt);}else{var _a6=this._getTopMenu();if(_a6&&_a6._isMenuBar){_a6.focusNext();}}},_onPopupHover:function(){this.set("selected",this.currentPopupItem);this._stopPendingCloseTimer();},onItemHover:function(_a7){if(this.activated){this.set("selected",_a7);if(_a7.popup&&!_a7.disabled&&!this.hover_timer){this.hover_timer=this.defer(function(){this._openItemPopup(_a7);},this.popupDelay);}}else{if(this.passivePopupDelay<Infinity){if(this.passive_hover_timer){this.passive_hover_timer.remove();}this.passive_hover_timer=this.defer(function(){this.onItemClick(_a7,{type:"click"});},this.passivePopupDelay);}}this._hoveredChild=_a7;_a7._set("hovering",true);},_onChildDeselect:function(_a8){this._stopPopupTimer();if(this.currentPopupItem==_a8){this._stopPendingCloseTimer();this._pendingClose_timer=this.defer(function(){this._pendingClose_timer=null;this.currentPopupItem=null;_a8._closePopup();},this.popupDelay);}},onItemUnhover:function(_a9){if(this._hoveredChild==_a9){this._hoveredChild=null;}if(this.passive_hover_timer){this.passive_hover_timer.remove();this.passive_hover_timer=null;}_a9._set("hovering",false);},_stopPopupTimer:function(){if(this.hover_timer){this.hover_timer=this.hover_timer.remove();}},_stopPendingCloseTimer:function(){if(this._pendingClose_timer){this._pendingClose_timer=this._pendingClose_timer.remove();}},_getTopMenu:function(){for(var top=this;top.parentMenu;top=top.parentMenu){}return top;},onItemClick:function(_aa,evt){if(this.passive_hover_timer){this.passive_hover_timer.remove();}this.focusChild(_aa);if(_aa.disabled){return false;}if(_aa.popup){this.set("selected",_aa);this.set("activated",true);var _ab=/^key/.test(evt._origType||evt.type)||(evt.clientX==0&&evt.clientY==0);this._openItemPopup(_aa,_ab);}else{this.onExecute();_aa._onClick?_aa._onClick(evt):_aa.onClick(evt);}},_openItemPopup:function(_ac,_ad){if(_ac==this.currentPopupItem){return;}if(this.currentPopupItem){this._stopPendingCloseTimer();this.currentPopupItem._closePopup();}this._stopPopupTimer();var _ae=_ac.popup;_ae.parentMenu=this;this.own(this._mouseoverHandle=on.once(_ae.domNode,"mouseover",_93.hitch(this,"_onPopupHover")));var _af=this;_ac._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){if(_ad){_af.focusChild(_ac);}_af._cleanUp();},onExecute:_93.hitch(this,"_cleanUp",true),onClose:function(){if(_af._mouseoverHandle){_af._mouseoverHandle.remove();delete _af._mouseoverHandle;}}},_ad);this.currentPopupItem=_ac;},onOpen:function(){this.isShowingNow=true;this.set("activated",true);},onClose:function(){this.set("activated",false);this.set("selected",null);this.isShowingNow=false;this.parentMenu=null;},_closeChild:function(){this._stopPopupTimer();if(this.currentPopupItem){if(this.focused){_91.set(this.selected.focusNode,"tabIndex",this.tabIndex);this.selected.focusNode.focus();}this.currentPopupItem._closePopup();this.currentPopupItem=null;}},_onItemFocus:function(_b0){if(this._hoveredChild&&this._hoveredChild!=_b0){this.onItemUnhover(this._hoveredChild);}this.set("selected",_b0);},_onBlur:function(){this._cleanUp(true);this.inherited(arguments);},_cleanUp:function(_b1){this._closeChild();if(typeof this.isShowingNow=="undefined"){this.set("activated",false);}if(_b1){this.set("selected",null);}}});});},"esriviewer/ui/logging/model/LoggingViewModel":function(){define(["dojo/_base/declare","dojo/_base/lang"],function(_b2,_b3){return _b2([],{constructor:function(){this.infoDisplayed=ko.observable(false);this.warningDisplayed=ko.observable(true);this.errorDisplayed=ko.observable(true);this.logEntries=ko.observableArray();this.hasLogEntries=ko.computed(_b3.hitch(this,this._hasEntries));this.filteredEntries=ko.computed(_b3.hitch(this,this._filteredEntries));},_hasEntries:function(){return this.logEntries().length>0;},_filteredEntries:function(){var _b4=[];var _b5=this.logEntries();var _b6;for(var i=0;i<_b5.length;i++){_b6=_b5[i];if(_b6.type===VIEWER_GLOBALS.LOG_TYPE.ERROR&&this.errorDisplayed()){_b4.push(_b6);}else{if(_b6.type===VIEWER_GLOBALS.LOG_TYPE.WARNING&&this.warningDisplayed()){_b4.push(_b6);}else{if(_b6.type===VIEWER_GLOBALS.LOG_TYPE.INFO&&this.infoDisplayed()){_b4.push(_b6);}}}}return _b4;}});});},"esriviewer/ui/tooltip/ConfirmTooltip":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","dojo/dom-construct","dijit/TooltipDialog","../base/UIWidget"],function(_b7,_b8,on,_b9,_ba,_bb){return _b7([_bb],{optionClassName:"confirmTooltipOptionText",contentHeaderLabelClassName:"confirmTooltipContentLbl",defaultYesLabel:"Yes",defaultNoLabel:"No",defaultDisplayText:"Confirm:",visible:false,constructor:function(_bc){this.confirmCallback=null;_b8.mixin(this,_bc||{});this._createTooltip();},getYesLabel:function(){return this.yesLabel==null?this.defaultYesLabel:this.yesLabel;},getNoLabel:function(){return this.noLabel==null?this.defaultNoLabel:this.noLabel;},getDisplayText:function(){return this.displayText==null?this.defaultDisplayText:this.displayText;},getConfirmCallback:function(){return this.confirmCallback;},hasConfirmCallback:function(){return this.confirmCallback!=null&&_b8.isFunction(this.confirmCallback);},onTooltipCreated:function(_bd){},setAtMouseEvent:function(evt){this.aroundNode=null;this.mouseEvent=evt;},setAroundNode:function(_be){this.aroundNode=_be;this.mouseEvent=null;},hasAroundNode:function(){return this.aroundNode!=null;},hasMouseEvent:function(){return this.mouseEvent!=null;},_createTooltip:function(){if(!this.hasConfirmCallback()){this.onError("must provide a confirm callback");return;}var _bf=_b9.create("div");var _c0=_b9.create("span",{innerHTML:this.getDisplayText(),className:this.contentHeaderLabelClassName});var _c1=_b9.create("span",{innerHTML:this.getYesLabel(),className:this.optionClassName});var _c2=_b9.create("span",{innerHTML:this.getNoLabel(),className:this.optionClassName});_b9.place(_c0,_bf);_b9.place(_c1,_bf);_b9.place(_c2,_bf);this.tooltip=new _ba({content:_bf});this.tooltip.on("close",_b8.hitch(this,function(){this.visible=false;}));var _c3=this.getConfirmCallback();var _c4=_b8.hitch(this,function(){this.confirmCallback();this.hide();});on(_c1,"click",_c4);on(_c2,"click",_b8.hitch(this,this.hide));this.onTooltipCreated(this.tooltip);},show:function(){if(!this.hasAroundNode()&&!this.hasMouseEvent()){this.onError("No Position passed for popup");return;}var _c5={popup:this.tooltip};if(this.aroundNode){_c5.around=this.aroundNode;}if(this.mouseEvent){_c5.x=(this.mouseEvent.pageX!=null?this.mouseEvent.pageX:this.mouseEvent.clientX)+5;_c5.y=(this.mouseEvent.pageY!=null?this.mouseEvent.pageY:this.mouseEvent.clientY)+5;}if(this.tooltip){dijit.popup.open(_c5);this.visible=true;}},hide:function(){if(this.tooltip){dijit.popup.close(this.tooltip);this.onHide();this.visible=false;}},onHide:function(){},onError:function(_c6){}});});},"esriviewer/ui/plotting/PlottingWidgetWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/dom-class","../window/WindowWidget"],function(_c7,_c8,_c9,_ca,_cb){return _c7([_cb],{defaultPositioning:{x:600,y:125},windowWidth:"300px",windowHeaderText:"Plot Coordinates",windowIconAltText:"Plot Coordinates",windowIconClass:"commonIcons16 pushpin",positioningParamName:"plotting",constructor:function(){this.firstShowListener=this.on("firstWindowShow",_c8.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_ca.add(this.windowContent,"plottingWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/plotting/PlottingWidget"],_c8.hitch(this,function(_cc){this.plottingWidget=new _cc();this.setContent(this.plottingWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_c9.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PLOTTING.SHOW,_c8.hitch(this,this.show)));this.subscribes.push(_c9.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PLOTTING.HIDE,_c8.hitch(this,this.hide)));this.subscribes.push(_c9.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PLOTTING.TOGGLE,_c8.hitch(this,this.toggle)));}});});},"dojox/storage/WhatWGStorageProvider":function(){define(["dijit","dojo","dojox","dojo/require!dojox/storage/Provider,dojox/storage/manager"],function(_cd,_ce,_cf){_ce.provide("dojox.storage.WhatWGStorageProvider");_ce.require("dojox.storage.Provider");_ce.require("dojox.storage.manager");_ce.declare("dojox.storage.WhatWGStorageProvider",[_cf.storage.Provider],{initialized:false,_domain:null,_available:null,_statusHandler:null,_allNamespaces:null,_storageEventListener:null,initialize:function(){if(_ce.config["disableWhatWGStorage"]==true){return;}this._domain=location.hostname;this.initialized=true;_cf.storage.manager.loaded();},isAvailable:function(){try{var _d0=globalStorage[location.hostname];}catch(e){this._available=false;return this._available;}this._available=true;return this._available;},put:function(key,_d1,_d2,_d3){if(this.isValidKey(key)==false){throw new Error("Invalid key given: "+key);}_d3=_d3||this.DEFAULT_NAMESPACE;key=this.getFullKey(key,_d3);this._statusHandler=_d2;if(_ce.isString(_d1)){_d1="string:"+_d1;}else{_d1=_ce.toJson(_d1);}var _d4=_ce.hitch(this,function(evt){window.removeEventListener("storage",_d4,false);if(_d2){_d2.call(null,this.SUCCESS,key,null,_d3);}});window.addEventListener("storage",_d4,false);try{var _d5=globalStorage[this._domain];_d5.setItem(key,_d1);}catch(e){this._statusHandler.call(null,this.FAILED,key,e.toString(),_d3);}},get:function(key,_d6){if(this.isValidKey(key)==false){throw new Error("Invalid key given: "+key);}_d6=_d6||this.DEFAULT_NAMESPACE;key=this.getFullKey(key,_d6);var _d7=globalStorage[this._domain];var _d8=_d7.getItem(key);if(_d8==null||_d8==""){return null;}_d8=_d8.value;if(_ce.isString(_d8)&&(/^string:/.test(_d8))){_d8=_d8.substring("string:".length);}else{_d8=_ce.fromJson(_d8);}return _d8;},getNamespaces:function(){var _d9=[this.DEFAULT_NAMESPACE];var _da={};var _db=globalStorage[this._domain];var _dc=/^__([^_]*)_/;for(var i=0;i<_db.length;i++){var _dd=_db.key(i);if(_dc.test(_dd)==true){var _de=_dd.match(_dc)[1];if(typeof _da[_de]=="undefined"){_da[_de]=true;_d9.push(_de);}}}return _d9;},getKeys:function(_df){_df=_df||this.DEFAULT_NAMESPACE;if(this.isValidKey(_df)==false){throw new Error("Invalid namespace given: "+_df);}var _e0;if(_df==this.DEFAULT_NAMESPACE){_e0=new RegExp("^([^_]{2}.*)$");}else{_e0=new RegExp("^__"+_df+"_(.*)$");}var _e1=globalStorage[this._domain];var _e2=[];for(var i=0;i<_e1.length;i++){var _e3=_e1.key(i);if(_e0.test(_e3)==true){_e3=_e3.match(_e0)[1];_e2.push(_e3);}}return _e2;},clear:function(_e4){_e4=_e4||this.DEFAULT_NAMESPACE;if(this.isValidKey(_e4)==false){throw new Error("Invalid namespace given: "+_e4);}var _e5;if(_e4==this.DEFAULT_NAMESPACE){_e5=new RegExp("^[^_]{2}");}else{_e5=new RegExp("^__"+_e4+"_");}var _e6=globalStorage[this._domain];var _e7=[];for(var i=0;i<_e6.length;i++){if(_e5.test(_e6.key(i))==true){_e7[_e7.length]=_e6.key(i);}}_ce.forEach(_e7,_ce.hitch(_e6,"removeItem"));},remove:function(key,_e8){key=this.getFullKey(key,_e8);var _e9=globalStorage[this._domain];_e9.removeItem(key);},isPermanent:function(){return true;},getMaximumSize:function(){return this.SIZE_NO_LIMIT;},hasSettingsUI:function(){return false;},showSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},hideSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},getFullKey:function(key,_ea){_ea=_ea||this.DEFAULT_NAMESPACE;if(this.isValidKey(_ea)==false){throw new Error("Invalid namespace given: "+_ea);}if(_ea==this.DEFAULT_NAMESPACE){return key;}else{return "__"+_ea+"_"+key;}}});_cf.storage.manager.register("dojox.storage.WhatWGStorageProvider",new _cf.storage.WhatWGStorageProvider());});},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(_eb,_ec,_ed,_ee,_ef){return _ec("dijit.tree.ForestStoreModel",_ef,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(_f0){this.root={store:this,root:true,id:_f0.rootId,label:_f0.rootLabel,children:_f0.rootChildren};},mayHaveChildren:function(_f1){return _f1===this.root||this.inherited(arguments);},getChildren:function(_f2,_f3,_f4){if(_f2===this.root){if(this.root.children){_f3(this.root.children);}else{this.store.fetch({query:this.query,onComplete:_ee.hitch(this,function(_f5){this.root.children=_f5;_f3(_f5);}),onError:_f4});}}else{this.inherited(arguments);}},isItem:function(_f6){return (_f6===this.root)?true:this.inherited(arguments);},fetchItemByIdentity:function(_f7){if(_f7.identity==this.root.id){var _f8=_f7.scope||_ed.global;if(_f7.onItem){_f7.onItem.call(_f8,this.root);}}else{this.inherited(arguments);}},getIdentity:function(_f9){return (_f9===this.root)?this.root.id:this.inherited(arguments);},getLabel:function(_fa){return (_fa===this.root)?this.root.label:this.inherited(arguments);},newItem:function(_fb,_fc,_fd){if(_fc===this.root){this.onNewRootItem(_fb);return this.store.newItem(_fb);}else{return this.inherited(arguments);}},onNewRootItem:function(){},pasteItem:function(_fe,_ff,_100,_101,_102){if(_ff===this.root){if(!_101){this.onLeaveRoot(_fe);}}this.inherited(arguments,[_fe,_ff===this.root?null:_ff,_100===this.root?null:_100,_101,_102]);if(_100===this.root){this.onAddToRoot(_fe);}},onAddToRoot:function(item){},onLeaveRoot:function(item){},_requeryTop:function(){var _103=this.root.children||[];this.store.fetch({query:this.query,onComplete:_ee.hitch(this,function(_104){this.root.children=_104;if(_103.length!=_104.length||_eb.some(_103,function(item,idx){return _104[idx]!=item;})){this.onChildrenChange(this.root,_104);}})});},onNewItem:function(item,_105){this._requeryTop();this.inherited(arguments);},onDeleteItem:function(item){if(_eb.indexOf(this.root.children,item)!=-1){this._requeryTop();}this.inherited(arguments);},onSetItem:function(item,_106,_107,_108){this._requeryTop();this.inherited(arguments);}});});},"dojox/html/metrics":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/sniff","dojo/ready","dojo/_base/unload","dojo/_base/window","dojo/dom-geometry"],function(_109,lang,has,_10a,_10b,_10c,_10d){var dhm=lang.getObject("dojox.html.metrics",true);var _10e=lang.getObject("dojox");dhm.getFontMeasurements=function(){var _10f={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,"small":0,"medium":0,"large":0,"x-large":0,"xx-large":0};if(has("ie")){_10c.doc.documentElement.style.fontSize="100%";}var div=_10c.doc.createElement("div");var ds=div.style;ds.position="absolute";ds.left="-100px";ds.top="0";ds.width="30px";ds.height="1000em";ds.borderWidth="0";ds.margin="0";ds.padding="0";ds.outline="0";ds.lineHeight="1";ds.overflow="hidden";_10c.body().appendChild(div);for(var p in _10f){ds.fontSize=p;_10f[p]=Math.round(div.offsetHeight*12/16)*16/12/1000;}_10c.body().removeChild(div);div=null;return _10f;};var _110=null;dhm.getCachedFontMeasurements=function(_111){if(_111||!_110){_110=dhm.getFontMeasurements();}return _110;};var _112=null,_113={};dhm.getTextBox=function(text,_114,_115){var m,s;if(!_112){m=_112=_10c.doc.createElement("div");var c=_10c.doc.createElement("div");c.appendChild(m);s=c.style;s.overflow="scroll";s.position="absolute";s.left="0px";s.top="-10000px";s.width="1px";s.height="1px";s.visibility="hidden";s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";_10c.body().appendChild(c);}else{m=_112;}m.className="";s=m.style;s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";if(arguments.length>1&&_114){for(var i in _114){if(i in _113){continue;}s[i]=_114[i];}}if(arguments.length>2&&_115){m.className=_115;}m.innerHTML=text;var box=_10d.position(m);box.w=m.parentNode.scrollWidth;return box;};var _116={w:16,h:16};dhm.getScrollbar=function(){return {w:_116.w,h:_116.h};};dhm._fontResizeNode=null;dhm.initOnFontResize=function(_117){var f=dhm._fontResizeNode=_10c.doc.createElement("iframe");var fs=f.style;fs.position="absolute";fs.width="5em";fs.height="10em";fs.top="-10000px";fs.display="none";if(has("ie")){f.onreadystatechange=function(){if(f.contentWindow.document.readyState=="complete"){f.onresize=f.contentWindow.parent[_10e._scopeName].html.metrics._fontresize;}};}else{f.onload=function(){f.contentWindow.onresize=f.contentWindow.parent[_10e._scopeName].html.metrics._fontresize;};}f.setAttribute("src","javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}</script></head><body></body></html>'");_10c.body().appendChild(f);dhm.initOnFontResize=function(){};};dhm.onFontResize=function(){};dhm._fontresize=function(){dhm.onFontResize();};_10b.addOnUnload(function(){var f=dhm._fontResizeNode;if(f){if(has("ie")&&f.onresize){f.onresize=null;}else{if(f.contentWindow&&f.contentWindow.onresize){f.contentWindow.onresize=null;}}dhm._fontResizeNode=null;}});_10a(function(){try{var n=_10c.doc.createElement("div");n.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";_10c.body().appendChild(n);_116.w=n.offsetWidth-n.clientWidth;_116.h=n.offsetHeight-n.clientHeight;_10c.body().removeChild(n);delete n;}catch(e){}if("fontSizeWatch" in _109.config&&!!_109.config.fontSizeWatch){dhm.initOnFontResize();}});return dhm;});},"esriviewer/manager/base/IdentityManagerMixin":function(){define(["dojo/_base/declare","esri/IdentityManager","esri/kernel","dojo/_base/lang","dojo/cookie","dojo/topic","dojo/json","dojo/_base/unload"],function(_118,_119,_11a,lang,_11b,_11c,JSON,_11d){return _118([],{forcedUserLogout:false,cred:"esri_jsapi_id_manager_data",constructor:function(){_11d.addOnUnload(lang.hitch(this,this._storeCredentials));this._loadCredentials();this._loadIdentityManagerListeners();},_loadIdentityManagerListeners:function(){_11c.subscribe(VIEWER_GLOBALS.EVENTS.IDENTITY_MANAGER.GET_TOKEN,lang.hitch(this,this._getToken));_11c.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.USER_LOGGED_OUT,lang.hitch(this,this._clearToken));},_clearToken:function(){if(this._supportsLocalStorage()){window.localStorage.removeItem(this.cred);}else{_11b(this.cred,null,{expire:-1});}this.forcedUserLogout=true;},_getToken:function(_11e,_11f){if(_11f!=null&&lang.isFunction(_11f)){if(_119.credentials==null||_119.credentials.length<1){_11f(null);return;}var _120;var _121;for(var i=0;i<_119.credentials.length;i++){_120=_119.credentials[i];_121=_120.resources;if(_121!=null&&lang.isArray(_121)){for(var j=0;j<_121.length;j++){if(_121[j].indexOf(_11e)>-1){_11f({username:_120.userId,token:_120.token});}}}}}},_loadCredentials:function(){var _122,_123;if(this._supportsLocalStorage()){_122=window.localStorage.getItem(this.cred);}else{_122=_11b(this.cred);}if(_122&&_122!="null"&&_122.length>4){_123=JSON.parse(_122);_11a.id.initialize(_123);}else{}},_storeCredentials:function(){if(this.forcedUserLogout){return;}if(_11a.id.credentials.length===0){return;}var _124=JSON.stringify(_11a.id.toJson());if(this._supportsLocalStorage()){window.localStorage.setItem(this.cred,_124);}else{_11b(cred,_124,{expires:1});}},_supportsLocalStorage:function(){try{return "localStorage" in window&&window["localStorage"]!==null;}catch(e){return false;}}});});},"esriviewer/ui/draw/base/model/GraphicsListViewModel":function(){define(["dojo/_base/declare","dojo/topic","dojo/Evented"],function(_125,_126,_127){return _125([_127],{REMOVE_GRAPHIC:"removeGraphic",REMOVE_ALL_GRAPHICS:"removeAllGraphics",constructor:function(){var self=this;this.saveGraphicsIconVisible=ko.observable(false);this.saveGraphicsInputVisible=ko.observable(false);this.allGraphicsVisible=ko.observable(true);this.addedGraphics=ko.observableArray();var _128=function(){return self.addedGraphics().length>0;};this.hasGraphics=ko.computed(_128);this.removeGraphic=function(_129){if(_129==null){return;}self.emit(self.REMOVE_GRAPHIC,_129.graphic);self.addedGraphics.remove(_129);};this.zoomToGraphic=function(_12a){_126.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.CENTER_AND_FLASH,_12a.graphic);};},removeAllGraphics:function(){var _12b=this.addedGraphics();this.emit(this.REMOVE_ALL_GRAPHICS);this.addedGraphics.removeAll();},toggleAllGraphics:function(){var _12c=this.addedGraphics();var i;if(!this.allGraphicsVisible()){for(i=0;i<_12c.length;i++){_12c[i].graphic.show();}this.allGraphicsVisible(true);}else{for(i=0;i<_12c.length;i++){_12c[i].graphic.hide();}this.allGraphicsVisible(false);}},toggleSaveGraphics:function(){this.saveGraphicsInputVisible(!this.saveGraphicsInputVisible());}});});},"esriviewer/ui/draw/configure/geometry/ConfigurePointWidget":function(){define(["dojo/_base/declare","dojo/text!./template/ConfigurePointTemplate.html","dojo/_base/Color","dojo/_base/lang","./model/ConfigurePointViewModel","./BaseGeometryConfigurationWidget","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol"],function(_12d,_12e,_12f,lang,_130,_131,_132,_133){return _12d([_131],{templateString:_12e,postCreate:function(){this.inherited(arguments);this.viewModel=new _130();this.viewModel.selectedMarkerStyle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedMarkerSize.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedAngle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedOutlineWidth.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedOutlineStyle.subscribe(lang.hitch(this,this.processChange));this.viewModel.markerColorActive.subscribe(lang.hitch(this,this.handleMarkerColorToggled));this.markerColor=new _12f([255,0,0,this.getTransparency()/100]);this.outlineColor=new _12f([255,0,0,this.getTransparency()/100]);this.colorPicker.set("value",this.markerColor.toHex());ko.applyBindings(this.viewModel,this.domNode);},handleTransparencyChanged:function(){var _134=this.getTransparency()/100;this.outlineColor=new _12f([this.outlineColor.r,this.outlineColor.g,this.outlineColor.b,_134]);this.markerColor=new _12f([this.markerColor.r,this.markerColor.g,this.markerColor.b,_134]);this.inherited(arguments);},handleMarkerColorToggled:function(_135){if(_135){this.colorPicker.set("value",this.markerColor.toHex());}else{this.colorPicker.set("value",this.outlineColor.toHex());}},handleColorPickerChanged:function(){if(this.viewModel.outlineColorActive()){this.outlineColor=this.getColor();}else{this.markerColor=this.getColor();}this.processChange();},processChange:function(){this.onChange(this.getSymbol());},getSymbol:function(){return new _132(this.viewModel.selectedMarkerStyle(),parseInt(this.viewModel.selectedMarkerSize(),10),new _133(this.viewModel.selectedOutlineStyle(),this.outlineColor,this.viewModel.selectedOutlineWidth()),this.markerColor).setAngle(this.viewModel.selectedAngle());}});});},"esriviewer/ui/draw/configure/geometry/model/ConfigurePointViewModel":function(){define(["dojo/_base/declare","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol"],function(_136,_137,_138){return _136([],{pointColorTypes:{outline:"outline",fill:"fill"},markerStyles:ko.observableArray([{value:_137.STYLE_CIRCLE,label:"Circle"},{value:_137.STYLE_CROSS,label:"Cross"},{value:_137.STYLE_DIAMOND,label:"Diamond"},{value:_137.STYLE_SQUARE,label:"Square"},{value:_137.STYLE_X,label:"X"}]),outlineStyles:ko.observableArray([{value:_138.STYLE_DASH,label:"Dashed Line"},{value:_138.STYLE_DASHDOT,label:"Dash Dot Line"},{value:_138.STYLE_DASHDOTDOT,label:"Dash Dot Dot Line"},{value:_138.STYLE_DOT,label:"Dotted Line"},{value:_138.STYLE_SOLID,label:"Solid Line"},{value:_138.STYLE_NULL,label:"None"}]),markerSizes:ko.observableArray([1,2,3,4,5,6,7,8,9,10,15,20,25,30,40,50,75]),outlineWidths:ko.observableArray([1,2,3,4,5,6,7,8,9,10]),angles:ko.observableArray([0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85]),constructor:function(){this.selectedMarkerStyle=ko.observable(_137.STYLE_CIRCLE);this.selectedMarkerSize=ko.observable(10);this.selectedAngle=ko.observable(0);this.selectedOutlineStyle=ko.observable(_138.STYLE_SOLID);this.selectedOutlineWidth=ko.observable(1);this.markerColorActive=ko.observable(true);this.outlineColorActive=ko.observable(false);},setOutlineColorMode:function(){this.outlineColorActive(true);this.markerColorActive(false);},setMarkerColorMode:function(){this.outlineColorActive(false);this.markerColorActive(true);}});});},"esriviewer/ui/print/PrintWidgetWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","../window/WindowWidget"],function(_139,lang,_13a,_13b){return _139([_13b],{defaultPositioning:{x:500,y:125},windowWidth:"300px",windowHeaderText:"Print",windowIconAltText:"Print",windowIconClass:"commonIcons16 print",positioningParamName:"print",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/print/PrintWidget"],lang.hitch(this,function(_13c){this.printWidget=new _13c();this.setContent(this.printWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_13a.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PRINT.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_13a.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PRINT.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_13a.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PRINT.TOGGLE,lang.hitch(this,this.toggle)));}});});},"esriviewer/manager/base/WebMapTemplateConfigurationUtil":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Deferred","esri/request","dojo/_base/array","../../base/DataLoaderSupport","esri/arcgis/utils"],function(_13d,lang,_13e,_13f,_140,_141,_142){return _13d([_141],{showOverviewParameter:"showOverview",showLegendParameter:"showLegend",showHeaderParameter:"showHeader",headerTextParameter:"headerText",helpLinkParameter:"helpUrl",contactUsParameter:"contactUsUrl",ignoreProcessingConfigurationEntries:["webmap","geometryServiceUrl","locators","baseViewer","showOverview","showLegend"],appConfigToViewerWindowWidgetConfigLookup:{logging:"logging"},appConfigToViewerWidgetConfigLookup:{pointUploadWidget:"pointUploadWidget",drawWidget:"drawWidget",plottingWidget:"plottingWidget",reverseGeocodeWidget:"reverseGeocodeWidget",portalSearchWidget:"portalSearchWidget",reflectivityWidget:"reflectivityWidget",zoomToWidget:"zoomToWidget",timeSliderWidget:"timeSliderWidget",identifyWidget:"identifyWidget",configureWidget:"configureWidget",measureWidget:"measureWidget",socialMediaWidget:"socialMediaWidget",printWidget:"printWidget",weatherWidget:"weatherWidget"},defaultConfigFile:"config/portal/config.json",constructor:function(){this.init();},init:function(){},loadConfiguration:function(_143){this.appId=_143;this.deferred=new _13e();this._loadDefaultConfiguration();return this.deferred.promise;},_loadDefaultConfiguration:function(){this.loadJson(this.defaultConfigFile,lang.hitch(this,this._handleDefaultConfigurationLoaded),lang.hitch(this,this._handleDefaultConfigurationLoadError));},_loadTemplateConfiguration:function(){var _144=_13f({url:_142.arcgisUrl+"/"+this.appId+"/data",content:{f:"json"},callbackParamName:"callback",load:lang.hitch(this,this.handleTemplateResponse),error:lang.hitch(this,this.handleTemplateErrorResponse)},{useProxy:false});},handleTemplateErrorResponse:function(err){alert("Could not load application data from "+_142.arcgisUrl);},handleTemplateResponse:function(_145){this.templateResponse=_145;this.appConfig={};for(var key in _145.values){if(_145.values[key]!==undefined){this.appConfig[key]=_145.values[key];}}this._loadWebMapItem(this.appConfig.webmap);},_loadWebMapItem:function(_146){_142.getItem(_146).then(lang.hitch(this,this.handleWebMapItemLoaded));},handleWebMapItemLoaded:function(_147){this.webMapItem=_147;var _148=lang.mixin(this.defaultConfiguration.values,this.appConfig);this.viewerConfiguration=this._applicationConfigurationToViewerConfiguration(_148);this.viewerConfiguration.webMapItem=this.webMapItem;this.handleWebMapConfigurationComplete();},_handleDefaultConfigurationLoaded:function(_149){this.defaultConfiguration=_149;this.portalUrl=this.defaultConfiguration.values.portalConfiguration.url;_142.arcgisUrl=VIEWER_UTILS.joinUrl(this.portalUrl,this.defaultConfiguration.values.portalConfiguration.itemsPath);this._loadTemplateConfiguration();},handleWebMapConfigurationComplete:function(){this.finalizeLoad();},finalizeLoad:function(){this.deferred.resolve(this.viewerConfiguration);},_handleDefaultConfigurationLoadError:function(){alert("Could not load default configuration");},_applicationConfigurationToViewerConfiguration:function(_14a){var _14b={small:true,display:true,headerText:"Mapping Application",headerImage:"images/logoSmall.png",contact:{label:"Contact Us",url:"http://www.esri.com/about-esri/contact"},help:{label:"Help",url:"http://support.esri.com/en/"}};var _14c={webMapItem:_14a.webmap,header:_14b};for(var key in _14a){if(_140.indexOf(this.ignoreProcessingConfigurationEntries,key)>-1){continue;}else{if(key===this.showHeaderParameter){_14c.header.display=_14a[key];}else{if(key===this.headerTextParameter){_14c.header.headerText=_14a[key];}else{if(key===this.helpLinkParameter){_14c.header.contact.url=_14a[key];}else{if(key===this.contactUsParameter){_14c.header.help.url=_14a[key];}else{if(this.appConfigToViewerWidgetConfigLookup[key]){_14c[key]={create:_14a[key]};}else{if(this.appConfigToViewerWindowWidgetConfigLookup[key]){_14c[key]={window:{create:_14a[key]}};}else{_14c[key]={create:false};}}}}}}}}this._applyWebMappingApplicationDefaults(_14a,_14c);return _14c;},_applyWebMappingApplicationDefaults:function(_14d,_14e){var _14f=_14d[this.showOverviewParameter]!=null&&_14d[this.showOverviewParameter];var _150=_14d[this.showLegendParameter]!=null&&_14d[this.showLegendParameter];_14e.map={overview:{create:_14f},useBasemapGallery:true,useConfiguredPortalBasemaps:true,legend:{create:_150}};_14e.toolsBar={showToolsDropdown:true,showLayersButton:true,showConfigureLocatorsIcon:false,showBookmarksButton:true,showExtentActions:false,display:true};_14e.toolsAccordion={create:false};if(this.portalUrl){_14e.portal={url:this.portalUrl};}if(_14d.geometryServiceUrl){_14e.geometryServiceUrl=_14d.geometryServiceUrl;}if(_14d.locators){_14e.locators=_14d.locators;}var _151=_14e[this.appConfigToViewerWidgetConfigLookup.socialMediaWidget];if(_151){if(_151.create){_151.configurationUrl=this.defaultConfiguration.values.baseViewer.socialMediaWidgetConfiguration.configurationUrl;}}var _152=_14e[this.appConfigToViewerWidgetConfigLookup.weatherWidget];if(_152){if(_152.create){_152.configurationUrl=this.defaultConfiguration.values.baseViewer.weatherWidgetConfiguration.configurationUrl;}}var _153=_14e[this.appConfigToViewerWidgetConfigLookup.printWidget];if(_153){if(_153.create){_153.printTaskUrl=this.defaultConfiguration.values.baseViewer.printWidgetConfiguration.printTaskUrl;}}var _154=_14e[this.appConfigToViewerWidgetConfigLookup.zoomToWidget];if(_154){if(_154.create){_154.stateJson=this.defaultConfiguration.values.baseViewer.zoomToWidgetConfiguration.stateJson;_154.countyJson=this.defaultConfiguration.values.baseViewer.zoomToWidgetConfiguration.countyJson;}}}});});},"dojox/storage/BehaviorStorageProvider":function(){define(["dijit","dojo","dojox","dojo/require!dojox/storage/Provider,dojox/storage/manager"],function(_155,dojo,_156){dojo.provide("dojox.storage.BehaviorStorageProvider");dojo.require("dojox.storage.Provider");dojo.require("dojox.storage.manager");dojo.declare("dojox.storage.BehaviorStorageProvider",[_156.storage.Provider],{store:null,storeName:"__dojox_BehaviorStorage",keys:[],initialize:function(){try{this.store=this._createStore();this.store.load(this.storeName);}catch(e){throw new Error("Store is not available: "+e);}var keys=this.get("keys","dojoxSystemNS");this.keys=keys||[];this.initialized=true;_156.storage.manager.loaded();},isAvailable:function(){return dojo.isIE&&dojo.isIE>=5;},_createStore:function(){var _157=dojo.create("link",{id:this.storeName+"Node",style:{"display":"none"}},dojo.query("head")[0]);_157.addBehavior("#default#userdata");return _157;},put:function(key,_158,_159,_15a){this._assertIsValidKey(key);_15a=_15a||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_15a);var _15b=this.getFullKey(key,_15a);_158=dojo.toJson(_158);this.store.setAttribute(_15b,_158);this.store.save(this.storeName);var _15c=this.store.getAttribute(_15b)===_158;if(_15c){this._addKey(_15b);this.store.setAttribute("__dojoxSystemNS_keys",dojo.toJson(this.keys));this.store.save(this.storeName);}if(_159){_159(_15c?this.SUCCESS:this.FAILED,key,null,_15a);}},get:function(key,_15d){this._assertIsValidKey(key);_15d=_15d||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_15d);key=this.getFullKey(key,_15d);return dojo.fromJson(this.store.getAttribute(key));},getKeys:function(_15e){_15e=_15e||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_15e);_15e="__"+_15e+"_";var keys=[];for(var i=0;i<this.keys.length;i++){var _15f=this.keys[i];if(this._beginsWith(_15f,_15e)){_15f=_15f.substring(_15e.length);keys.push(_15f);}}return keys;},clear:function(_160){_160=_160||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_160);_160="__"+_160+"_";var keys=[];for(var i=0;i<this.keys.length;i++){var _161=this.keys[i];if(this._beginsWith(_161,_160)){keys.push(_161);}}dojo.forEach(keys,function(key){this.store.removeAttribute(key);this._removeKey(key);},this);this.put("keys",this.keys,null,"dojoxSystemNS");this.store.save(this.storeName);},remove:function(key,_162){this._assertIsValidKey(key);_162=_162||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_162);key=this.getFullKey(key,_162);this.store.removeAttribute(key);this._removeKey(key);this.put("keys",this.keys,null,"dojoxSystemNS");this.store.save(this.storeName);},getNamespaces:function(){var _163=[this.DEFAULT_NAMESPACE];var _164={};_164[this.DEFAULT_NAMESPACE]=true;var _165=/^__([^_]*)_/;for(var i=0;i<this.keys.length;i++){var _166=this.keys[i];if(_165.test(_166)==true){var _167=_166.match(_165)[1];if(typeof _164[_167]=="undefined"){_164[_167]=true;_163.push(_167);}}}return _163;},isPermanent:function(){return true;},getMaximumSize:function(){return 64;},hasSettingsUI:function(){return false;},isValidKey:function(_168){if(_168===null||_168===undefined){return false;}return /^[0-9A-Za-z_-]*$/.test(_168);},isValidNamespace:function(_169){if(_169===null||_169===undefined){return false;}return /^[0-9A-Za-z-]*$/.test(_169);},getFullKey:function(key,_16a){return "__"+_16a+"_"+key;},_beginsWith:function(_16b,_16c){if(_16c.length>_16b.length){return false;}return _16b.substring(0,_16c.length)===_16c;},_assertIsValidNamespace:function(_16d){if(this.isValidNamespace(_16d)===false){throw new Error("Invalid namespace given: "+_16d);}},_assertIsValidKey:function(key){if(this.isValidKey(key)===false){throw new Error("Invalid key given: "+key);}},_addKey:function(key){this._removeKey(key);this.keys.push(key);},_removeKey:function(key){this.keys=dojo.filter(this.keys,function(item){return item!==key;},this);}});_156.storage.manager.register("dojox.storage.BehaviorStorageProvider",new _156.storage.BehaviorStorageProvider());});},"dijit/layout/AccordionContainer":function(){define(["require","dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/topic","../focus","../_base/manager","dojo/ready","../_Widget","../_Container","../_TemplatedMixin","../_CssStateMixin","./StackContainer","./ContentPane","dojo/text!./templates/AccordionButton.html","../a11yclick"],function(_16e,_16f,_170,fx,dom,_171,_172,_173,_174,keys,lang,has,_175,_176,_177,_178,_179,_17a,_17b,_17c,_17d,_17e,_17f){var _180=_170("dijit.layout._AccordionButton",[_179,_17b,_17c],{templateString:_17f,label:"",_setLabelAttr:{node:"titleTextNode",type:"innerHTML"},title:"",_setTitleAttr:{node:"titleTextNode",type:"attribute",attribute:"title"},iconClassAttr:"",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitAccordionTitle",getParent:function(){return this.parent;},buildRendering:function(){this.inherited(arguments);var _181=this.id.replace(" ","_");_171.set(this.titleTextNode,"id",_181+"_title");this.focusNode.setAttribute("aria-labelledby",_171.get(this.titleTextNode,"id"));dom.setSelectable(this.domNode,false);},getTitleHeight:function(){return _174.getMarginSize(this.domNode).h;},_onTitleClick:function(){var _182=this.getParent();_182.selectChild(this.contentWidget,true);_176.focus(this.focusNode);},_onTitleKeyDown:function(evt){return this.getParent()._onKeyDown(evt,this.contentWidget);},_setSelectedAttr:function(_183){this._set("selected",_183);this.focusNode.setAttribute("aria-expanded",_183?"true":"false");this.focusNode.setAttribute("aria-selected",_183?"true":"false");this.focusNode.setAttribute("tabIndex",_183?"0":"-1");}});if(has("dojo-bidi")){_180.extend({_setLabelAttr:function(_184){this._set("label",_184);_171.set(this.titleTextNode,"innerHTML",_184);this.applyTextDir(this.titleTextNode);},_setTitleAttr:function(_185){this._set("title",_185);_171.set(this.titleTextNode,"title",_185);this.applyTextDir(this.titleTextNode);}});}var _186=_170("dijit.layout._AccordionInnerContainer"+(has("dojo-bidi")?"_NoBidi":""),[_179,_17c],{baseClass:"dijitAccordionInnerContainer",isLayoutContainer:true,buildRendering:function(){this.domNode=_173.place("<div class='"+this.baseClass+"' role='presentation'>",this.contentWidget.domNode,"after");var _187=this.contentWidget,cls=lang.isString(this.buttonWidget)?lang.getObject(this.buttonWidget):this.buttonWidget;this.button=_187._buttonWidget=(new cls({contentWidget:_187,label:_187.title,title:_187.tooltip,dir:_187.dir,lang:_187.lang,textDir:_187.textDir||this.textDir,iconClass:_187.iconClass,id:_187.id+"_button",parent:this.parent})).placeAt(this.domNode);this.containerNode=_173.place("<div class='dijitAccordionChildWrapper' role='tabpanel' style='display:none'>",this.domNode);this.containerNode.setAttribute("aria-labelledby",this.button.id);_173.place(this.contentWidget.domNode,this.containerNode);},postCreate:function(){this.inherited(arguments);var _188=this.button,cw=this.contentWidget;this._contentWidgetWatches=[cw.watch("title",lang.hitch(this,function(name,_189,_18a){_188.set("label",_18a);})),cw.watch("tooltip",lang.hitch(this,function(name,_18b,_18c){_188.set("title",_18c);})),cw.watch("iconClass",lang.hitch(this,function(name,_18d,_18e){_188.set("iconClass",_18e);}))];},_setSelectedAttr:function(_18f){this._set("selected",_18f);this.button.set("selected",_18f);if(_18f){var cw=this.contentWidget;if(cw.onSelected){cw.onSelected();}}},startup:function(){this.contentWidget.startup();},destroy:function(){this.button.destroyRecursive();_16f.forEach(this._contentWidgetWatches||[],function(w){w.unwatch();});delete this.contentWidget._buttonWidget;delete this.contentWidget._wrapperWidget;this.inherited(arguments);},destroyDescendants:function(_190){this.contentWidget.destroyRecursive(_190);}});if(has("dojo-bidi")){_186=_170("dijit.layout._AccordionInnerContainer",_186,{postCreate:function(){this.inherited(arguments);var _191=this.button;this._contentWidgetWatches.push(this.contentWidget.watch("textDir",function(name,_192,_193){_191.set("textDir",_193);}));}});}var _194=_170("dijit.layout.AccordionContainer",_17d,{duration:_177.defaultDuration,buttonWidget:_180,baseClass:"dijitAccordionContainer",buildRendering:function(){this.inherited(arguments);this.domNode.style.overflow="hidden";this.domNode.setAttribute("role","tablist");},startup:function(){if(this._started){return;}this.inherited(arguments);if(this.selectedChildWidget){this.selectedChildWidget._wrapperWidget.set("selected",true);}},layout:function(){var _195=this.selectedChildWidget;if(!_195){return;}var _196=_195._wrapperWidget.domNode,_197=_174.getMarginExtents(_196),_198=_174.getPadBorderExtents(_196),_199=_195._wrapperWidget.containerNode,_19a=_174.getMarginExtents(_199),_19b=_174.getPadBorderExtents(_199),_19c=this._contentBox;var _19d=0;_16f.forEach(this.getChildren(),function(_19e){if(_19e!=_195){_19d+=_174.getMarginSize(_19e._wrapperWidget.domNode).h;}});this._verticalSpace=_19c.h-_19d-_197.h-_198.h-_19a.h-_19b.h-_195._buttonWidget.getTitleHeight();this._containerContentBox={h:this._verticalSpace,w:this._contentBox.w-_197.w-_198.w-_19a.w-_19b.w};if(_195){_195.resize(this._containerContentBox);}},_setupChild:function(_19f){_19f._wrapperWidget=_186({contentWidget:_19f,buttonWidget:this.buttonWidget,id:_19f.id+"_wrapper",dir:_19f.dir,lang:_19f.lang,textDir:_19f.textDir||this.textDir,parent:this});this.inherited(arguments);_173.place(_19f.domNode,_19f._wrapper,"replace");},removeChild:function(_1a0){if(_1a0._wrapperWidget){_173.place(_1a0.domNode,_1a0._wrapperWidget.domNode,"after");_1a0._wrapperWidget.destroy();delete _1a0._wrapperWidget;}_172.remove(_1a0.domNode,"dijitHidden");this.inherited(arguments);},getChildren:function(){return _16f.map(this.inherited(arguments),function(_1a1){return _1a1.declaredClass=="dijit.layout._AccordionInnerContainer"?_1a1.contentWidget:_1a1;},this);},destroy:function(){if(this._animation){this._animation.stop();}_16f.forEach(this.getChildren(),function(_1a2){if(_1a2._wrapperWidget){_1a2._wrapperWidget.destroy();}else{_1a2.destroyRecursive();}});this.inherited(arguments);},_showChild:function(_1a3){_1a3._wrapperWidget.containerNode.style.display="block";return this.inherited(arguments);},_hideChild:function(_1a4){_1a4._wrapperWidget.containerNode.style.display="none";this.inherited(arguments);},_transition:function(_1a5,_1a6,_1a7){if(has("ie")<8){_1a7=false;}if(this._animation){this._animation.stop(true);delete this._animation;}var self=this;if(_1a5){_1a5._wrapperWidget.set("selected",true);var d=this._showChild(_1a5);if(this.doLayout&&_1a5.resize){_1a5.resize(this._containerContentBox);}}if(_1a6){_1a6._wrapperWidget.set("selected",false);if(!_1a7){this._hideChild(_1a6);}}if(_1a7){var _1a8=_1a5._wrapperWidget.containerNode,_1a9=_1a6._wrapperWidget.containerNode;var _1aa=_1a5._wrapperWidget.containerNode,_1ab=_174.getMarginExtents(_1aa),_1ac=_174.getPadBorderExtents(_1aa),_1ad=_1ab.h+_1ac.h;_1a9.style.height=(self._verticalSpace-_1ad)+"px";this._animation=new fx.Animation({node:_1a8,duration:this.duration,curve:[1,this._verticalSpace-_1ad-1],onAnimate:function(_1ae){_1ae=Math.floor(_1ae);_1a8.style.height=_1ae+"px";_1a9.style.height=(self._verticalSpace-_1ad-_1ae)+"px";},onEnd:function(){delete self._animation;_1a8.style.height="auto";_1a6._wrapperWidget.containerNode.style.display="none";_1a9.style.height="auto";self._hideChild(_1a6);}});this._animation.onStop=this._animation.onEnd;this._animation.play();}return d;},_onKeyDown:function(e,_1af){if(this.disabled||e.altKey||!(_1af||e.ctrlKey)){return;}var c=e.keyCode;if((_1af&&(c==keys.LEFT_ARROW||c==keys.UP_ARROW))||(e.ctrlKey&&c==keys.PAGE_UP)){this._adjacent(false)._buttonWidget._onTitleClick();e.stopPropagation();e.preventDefault();}else{if((_1af&&(c==keys.RIGHT_ARROW||c==keys.DOWN_ARROW))||(e.ctrlKey&&(c==keys.PAGE_DOWN||c==keys.TAB))){this._adjacent(true)._buttonWidget._onTitleClick();e.stopPropagation();e.preventDefault();}}}});if(has("dijit-legacy-requires")){_178(0,function(){var _1b0=["dijit/layout/AccordionPane"];_16e(_1b0);});}_194._InnerContainer=_186;_194._Button=_180;return _194;});},"esriviewer/portal/PortalSearcher":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","../base/ConfigurationEntryMixin"],function(_1b1,_1b2,lang,_1b3){return _1b1([_1b3],{_defaultMaxResults:50,_defaultSortField:"avgRating",constructor:function(){this.initListeners();},initListeners:function(){_1b2.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_WEBMAPS,lang.hitch(this,this.searchWebmaps));_1b2.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_GEOCODE_SERVICES,lang.hitch(this,this.searchGeocodeServices));_1b2.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_IMAGE_SERVICES,lang.hitch(this,this.searchImageServices));_1b2.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_FEATURE_SERVICE_LAYERS,lang.hitch(this,this.searchFeatureServiceLayers));_1b2.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_FEATURE_SERVICES,lang.hitch(this,this.searchFeatureServices));_1b2.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_MAP_SERVICES,lang.hitch(this,this.searchMapServices));},searchGeocodeServices:function(_1b4,_1b5,_1b6,_1b7,_1b8,_1b9){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.GEOCODE_SERVICE,_1b4,_1b5,_1b6,_1b7,_1b8,_1b9);},searchFeatureServiceLayers:function(_1ba,_1bb,_1bc,_1bd,_1be,_1bf){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.FEATURE_SERVICE_LAYER,_1ba,_1bb,_1bc,_1bd,_1be,_1bf);},searchImageServices:function(_1c0,_1c1,_1c2,_1c3,_1c4,_1c5){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.IMAGE_SERVICE,_1c0,_1c1,_1c2,_1c3,_1c4,_1c5);},searchFeatureServices:function(_1c6,_1c7,_1c8,_1c9,_1ca,_1cb){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.FEATURE_SERVICE,_1c6,_1c7,_1c8,_1c9,_1ca,_1cb);},searchMapServices:function(_1cc,_1cd,_1ce,_1cf,_1d0,_1d1){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.MAP_SERVICE,_1cc,_1cd,_1ce,_1cf,_1d0,_1d1);},searchWebmaps:function(_1d2,_1d3,_1d4,_1d5,_1d6,_1d7){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.WEB_MAP,_1d2,_1d3,_1d4,_1d5,_1d6,_1d7);},_performSearch:function(_1d8,_1d9,_1da,_1db,_1dc,_1dd,_1de){if(_1dd==null||!lang.isFunction(_1dd)){return;}if(_1da==null){_1da=this._defaultMaxResults;}if(_1db==null||_1db==""){_1db=this._defaultSortField;}if(_1dc==null){_1dc=0;}var _1df={};_1df.q=_1d9+this._getItemTypeAppend(_1d8);_1df.sortField=_1db;_1df.start=_1dc;this._search(_1df,_1dd,_1de);},_getItemTypeAppend:function(_1e0){if(_1e0==null){return "";}return " AND (type: \""+_1e0+"\") AND NOT (type: \""+VIEWER_GLOBALS.AGS_PORTAL_TYPES.MAPPING_APPLICATION+"\")";},_search:function(_1e1,_1e2,_1e3){var _1e4=null;_1b2.publish(VIEWER_GLOBALS.EVENTS.PORTAL.GET_INSTANCE,function(_1e5){_1e4=_1e5;});if(_1e4){var _1e6=_1e2;_1e4.queryItems(_1e1).then(function(_1e7){_1e6(_1e7);});}else{if(_1e3!=null&&lang.isFunction(_1e3)){_1e3("Portal is not configured");}}}});});},"esriviewer/manager/ViewerManagerWindow":function(){define(["dojo/_base/declare","dojo/on","dojo/dom-style","dojo/_base/window","dojo/dom-construct","./base/ViewerManager","../ui/identify/IdentifyWindowWidget","../ui/measure/MeasureWindow","../ui/editor/FeatureServiceEditorWindowWidget","../ui/time/TimeSliderWindow","../ui/transparency/LayersTransparencyWindowWidget","../ui/geocode/ReverseGeocodeWindowWidget","../ui/query/QueryBuilderWindowWidget","../ui/draw/DrawWindow","../ui/logging/LoggingWidgetWindow","../ui/layers/LayersWindowWidget","../ui/legend/MapLegendWindow","../ui/zoomto/ZoomToWidgetWindow","../ui/configure/ConfigureViewerWindow","../ui/weather/conditions/WeatherWidgetWindow","../ui/weather/reflectivity/ReflectivityWidgetWindow","../ui/portal/PortalPublisherWindowWidget","../ui/plotting/PlottingWidgetWindow","../ui/print/PrintWidgetWindow","../ui/pointupload/PointUploadWindow","../ui/social/SocialMediaWidgetWindow","../ui/zoomin/ZoomInWidget"],function(_1e8,on,_1e9,_1ea,_1eb,_1ec,_1ed,_1ee,_1ef,_1f0,_1f1,_1f2,_1f3,_1f4,_1f5,_1f6,_1f7,_1f8,_1f9,_1fa,_1fb,_1fc,_1fd,_1fe,_1ff,_200,_201){return _1e8([_1ec],{createPlottingWidget:function(){new _1fd();},createZoomInOutWidget:function(){new _201();},createSocialMediaWidget:function(){new _200();},createReflectivityWidget:function(){new _1fb();},createWeatherWidget:function(){new _1fa();},createIdentifyWidget:function(){new _1ed();},createMeasureWidget:function(){new _1ee();},createFeatureEditorWidget:function(){new _1ef();},createTimeSliderWidget:function(){new _1f0();},createLayersTransparencyWidget:function(){new _1f1();},createConfigureViewerWidget:function(){new _1f9();},createReverseGeocodeWidget:function(){new _1f2();},createQueryBuilderWidget:function(){new _1f3();},createDrawWidget:function(){new _1f4();},createLoggingWidget:function(){new _1f5();},createLayersWidget:function(){new _1f6();},createLegendWidget:function(){new _1f7();},createZoomToWidget:function(){new _1f8();},createPortalPublisherWidget:function(){new _1fc();},createPrintWidget:function(){new _1fe();},createPointUploadWidget:function(){new _1ff();},_createHeaderLogo:function(){if(this.viewerConfig.header.small===true){var _202=_1eb.create("span",{className:"smallWindowHeaderContainer"});var _203=_1eb.create("img",{src:this.viewerConfig.header.headerImage});var _204=_1eb.create("span",{innerHTML:this.viewerConfig.header.headerText});_1eb.place(_203,_202);_1eb.place(_204,_202);_1eb.place(_202,_1ea.body());if(this.viewerConfig.header.contact&&this.viewerConfig.header.contact.url){_1e9.set(_202,"cursor","pointer");var _205=this.viewerConfig.header.contact.url;on(_202,"click",function(){window.open(_205);});}}else{this.inherited(arguments);}}});});},"esriviewer/ui/throbber/ThrobberWidget":function(){define(["dojo/_base/declare","dojo/text!./template/ThrobberTemplate.html","dojo/topic","../base/UITemplatedWidget","dojo/_base/lang","dojo/request/notify"],function(_206,_207,_208,_209,lang,_20a){return _206([_209],{enabled:true,blockHideEnabled:false,defaultPositioning:{x:10,y:10,alignX:"left",alignY:"bottom"},positioningParamName:"throbber",isPositionedByConfig:true,templateString:_207,postCreate:function(){this.inherited(arguments);_20a("start",lang.hitch(this,this.show));_20a("done",lang.hitch(this,this.hide));},initListeners:function(){this.inherited(arguments);_208.subscribe(VIEWER_GLOBALS.EVENTS.THROBBER.DISABLE,lang.hitch(this,this.disable));_208.subscribe(VIEWER_GLOBALS.EVENTS.THROBBER.ENABLE,lang.hitch(this,this.enable));_208.subscribe(VIEWER_GLOBALS.EVENTS.THROBBER.SHOW,lang.hitch(this,this.show));_208.subscribe(VIEWER_GLOBALS.EVENTS.THROBBER.HIDE,lang.hitch(this,this.hide));_208.subscribe(VIEWER_GLOBALS.EVENTS.THROBBER.BLOCK_HIDE,lang.hitch(this,this._blockHide));_208.subscribe(VIEWER_GLOBALS.EVENTS.THROBBER.RELEASE_HIDE_BLOCK,lang.hitch(this,this._releaseHideBlock));},show:function(){if(this.enabled){this.inherited(arguments);}},_blockHide:function(){this.blockHideEnabled=true;},_releaseHideBlock:function(){this.blockHideEnabled=false;this.hide();},hide:function(){if(!this.blockHideEnabled){this.inherited(arguments);}},disable:function(){this.enabled=false;},enable:function(){this.enabled=true;}});});},"esriviewer/ui/draw/configure/geometry/ConfigureTextWidget":function(){define(["dojo/_base/declare","dojo/text!./template/ConfigureTextTemplate.html","dojo/_base/lang","./model/ConfigureTextViewModel","./BaseGeometryConfigurationWidget","esri/symbols/Font","esri/symbols/TextSymbol"],function(_20b,_20c,lang,_20d,_20e,Font,_20f){return _20b([_20e],{templateString:_20c,postCreate:function(){this.inherited(arguments);this.viewModel=new _20d();this.viewModel.selectedAngle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedTextAlign.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedTextSize.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedTextWeight.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedFontFace.subscribe(lang.hitch(this,this.processChange));ko.applyBindings(this.viewModel,this.domNode);},processChange:function(){this.onChange(this.getSymbol());},getSymbol:function(){var font=new Font(this.viewModel.selectedTextSize());font.setWeight(this.viewModel.selectedTextWeight());font.setStyle(this.viewModel.selectedFontFace());return new _20f("").setColor(this.getColor()).setAlign(this.viewModel.selectedTextAlign()).setAngle(parseInt(this.viewModel.selectedAngle(),10)).setFont(font);}});});},"esriviewer/ui/layers/LayersWidget":function(){define(["dojo/_base/declare","dojo/text!./template/LayersWidgetTemplate.html","dojo/topic","dojo/_base/lang","dojo/dom-style","dojo/dom-construct","../base/UITemplatedWidget","../tooltip/ConfirmTooltip","./base/LayersLocalStorageMixin","./model/LayersWidgetViewModel","./LayersTocWidget","./base/UserPersistedLayersListWidget","dijit/form/TextBox","dijit/form/Select","dijit/form/Button"],function(_210,_211,_212,lang,_213,_214,_215,_216,_217,_218,_219,_21a,_21b,_21c,_21d){return _210([_215,_217],{showWKIDInAddLayers:true,firstAddLayerDisplay:true,errorMessageDelay:5000,successMessageDelay:2000,allowAddLayers:true,templateString:_211,constructor:function(_21e){lang.mixin(this,_21e||{});this.addedLayers={};},postCreate:function(){this.inherited(arguments);this.viewModel=new _218();this.viewModel.showWKIDInAddLayers(this.showWKIDInAddLayers);this.viewModel.showUserPersistedLayersIcon(this.localStoragePersistSupported);this.viewModel.layersListVisible.subscribe(lang.hitch(this,this.handleLayerListVisibilityChanged));this.viewModel.addLayersVisible.subscribe(lang.hitch(this,this.handleAddLayersVisibilityChanged));this.viewModel.persistedLayersVisible.subscribe(lang.hitch(this,this.handlePersistedLayersVisibilityChanged));this.viewModel.on(this.viewModel.ADD_LAYERS_VISIBLE,lang.hitch(this,this.handleAddLayersVisible));ko.applyBindings(this.viewModel,this.domNode);this.createLayersTocWidget();_213.set(this.domNode,"minHeight","250px");if(this.allowAddLayers){this.populateLayerTypesDropdown();}else{_213.set(this.layersTabContainer,"display","none");}this.manualLayerLoadedSuccessCallback=lang.hitch(this,this.handleManualLayerLoadedCallback);this.manualLayerLoadedErrCallback=lang.hitch(this,this.handleManualLayerLoadErrorCallback);if(this.localStoragePersistSupported){this.createUserPersistedLayerListWidget();}},handleLayerListVisibilityChanged:function(_21f){this._handleContentAnimation(_21f,this.layerTocContainer);},handleAddLayersVisibilityChanged:function(_220){this._handleContentAnimation(_220,this.addLayerContainer);},handlePersistedLayersVisibilityChanged:function(_221){this._handleContentAnimation(_221,this.userPersistedLayersContainer);},handleAddLayersVisible:function(){this.addLayerTextInput.set("value","");this.addLayerLabelInput.set("value","");this.addLayerTextInput.focus();},createLayersTocWidget:function(){this.layersTocWidget=new _219();_214.place(this.layersTocWidget.domNode,this.layerTocContainer);},createUserPersistedLayerListWidget:function(){if(this.userPersistedLayersListWidget==null){this.userPersistedLayersListWidget=new _21a();this.userPersistedLayersListWidget.placeAt(this.userPersistedLayersContainer);this.userPersistedLayersListWidget.on("removeUserPersistedLayer",lang.hitch(this,this.handleRemoveUserPersistedLayer));this.userPersistedLayersListWidget.on("addUserPersistedLayerToMap",lang.hitch(this,this.handleAddUserPersistedLayerToMap));this.userPersistedLayersListWidget.on("removeAllUserPersistedLayers",lang.hitch(this,this.handleRemoveAllUserPersistedLayers));this.userPersistedLayersListWidget.addExistingPersistedLayerItems(this.persistedUserLayers);}},showLayerList:function(){this.viewModel.showLayersList();},handleRemoveAllUserPersistedLayers:function(){this.removeAllLayers();},handleRemoveUserPersistedLayer:function(_222){if(_222!=null&&_222!=""){this.deleteUserPersistedLayer(_222);}},handleAddUserPersistedLayerToMap:function(_223,_224){if(_223!=null&&_223!=""){this._addLayer(_223,_224);}},loadViewerConfigurationData:function(){var _225=null;_212.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"layersWidget",function(_226){_225=_226;});if(_225){for(var key in _225){if(key==null||key.toString()==null){continue;}if(key.toString().toLowerCase()=="allowAddLayers".toLowerCase()){this.allowAddLayers=_225[key];}else{if(key.toString().toLowerCase()=="showWKIDInAddLayers".toLowerCase()){if(_225[key]==false){this.showWKIDInAddLayers=false;}}}}}},handleManualLayerLoadedCallback:function(){_212.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Layer Added");VIEWER_UTILS.log("Layer Added",VIEWER_GLOBALS.LOG_TYPE.INFO);},handleManualLayerLoadErrorCallback:function(msg){if(msg!=null&&lang.isString(msg)){VIEWER_UTILS.log("Could not add layer: "+msg,VIEWER_GLOBALS.LOG_TYPE.ERROR);}else{VIEWER_UTILS.log("Add Layer Failed",VIEWER_GLOBALS.LOG_TYPE.ERROR);}},initListeners:function(){this.inherited(arguments);_212.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADDED,lang.hitch(this,this.addLayer));_212.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVED,lang.hitch(this,this.handleLayerRemoved));_212.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.CLEAR_STORED_LAYERS,lang.hitch(this,this.handleRemoveAllUserPersistedLayers));},populateLayerTypesDropdown:function(){var _227;for(var key in VIEWER_GLOBALS.LAYER_TYPES){_227=VIEWER_GLOBALS.LAYER_TYPES[key];var _228={label:_227.LABEL,value:_227.VALUE};this.addLayerTypeSelect.addOption(_228);}},handleAddLayers:function(_229){if(_229!=null&&lang.isArray(_229)){for(var i=0;i<_229.length;i++){this.addLayer(_229[i]);}}},addLayer:function(_22a){if(_22a==null){return;}var _22b=VIEWER_UTILS.getLayerUniqueId(_22a);if(_22b==null||this.addedLayers[_22b]!=null){return;}this.layersTocWidget.addLayer(_22a);this.addedLayers[_22b]={layer:_22a};if(_22a.url&&this.localStoragePersistSupported){this.saveLayer(_22a);}},saveLayer:function(_22c){var _22d=this.persistUserLayer(_22c);if(_22d&&_22d.url){this.userPersistedLayersListWidget.addPersistedLayer(_22d);}},handleToggleLayerVisibility:function(_22e){if(_22e.visible){_22e.hide();}else{_22e.show();}},handleZoomToLayer:function(_22f){_212.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,_22f.fullExtent);},handleLayerAddUrlKeyUp:function(e){if(VIEWER_UTILS.isEnterKey(e)){this.addManualLayer();}else{var url=this.addLayerTextInput.get("value");if(url==""){return;}var _230=VIEWER_UTILS.getServiceTypeFromUrl(url);if(_230!=null){if(_230===VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER){this.addLayerTypeSelect.set("value",VIEWER_GLOBALS.LAYER_TYPES.IMAGE_SERVER.VALUE);}else{if(_230===VIEWER_GLOBALS.SERVICE_TYPES.FEATURE_SERVER){this.addLayerTypeSelect.set("value",VIEWER_GLOBALS.LAYER_TYPES.FEATURE_LAYER.VALUE);}else{if(_230===VIEWER_GLOBALS.SERVICE_TYPES.KML){this.addLayerTypeSelect.set("value",VIEWER_GLOBALS.LAYER_TYPES.KML.VALUE);}else{if(_230===VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER){var _231=REG_EXP_UTILS.featureLayerRegExp.test(url);if(_231){this.addLayerTypeSelect.set("value",VIEWER_GLOBALS.LAYER_TYPES.FEATURE_LAYER.VALUE);}else{this.addLayerTypeSelect.set("value",VIEWER_GLOBALS.LAYER_TYPES.MAP_SERVER.VALUE);}}}}}}}},addManualLayer:function(){var url=this.addLayerTextInput.get("value");if(url!=""){if(VIEWER_UTILS.endsWith(url,"/")){url=url.substring(0,url.length-1);}this._addLayer(url);}},_addLayer:function(_232,_233){var _234=_233;if(_234==null||_234==""){_234=this.addLayerLabelInput.get("value");}_212.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_FROM_URL,_232,{isOperationalLayer:true,canRemove:true,label:_234},this.manualLayerLoadedSuccessCallback,this.manualLayerLoadedErrCallback);},showConfirmDeleteLayerTooltip:function(_235,_236){this.deleteLayerConfirmedCallback=lang.hitch(this,this.handleRemoveLayerFromClick,_235);this.showDeleteLayerTooltip(_236);},handleRemoveLayerFromClick:function(_237){_212.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE,_237);},createConfirmDeleteLayerTooltip:function(){this.confirmDeleteLayerTooltip=new _216({confirmCallback:lang.hitch(this,this.handleConfirmedLayerDelete)});this.confirmDeleteLayerTooltip.on("hide",lang.hitch(this,function(){this.deleteLayerConfirmedCallback=null;}));},handleConfirmedLayerDelete:function(){if(lang.isFunction(this.deleteLayerConfirmedCallback)){this.deleteLayerConfirmedCallback();}this.deleteLayerConfirmedCallback=null;},showDeleteLayerTooltip:function(_238){if(_238==null){return;}if(this.confirmDeleteLayerTooltip==null){this.createConfirmDeleteLayerTooltip();}if(this.confirmDeleteLayerTooltip){this.confirmDeleteLayerTooltip.setAroundNode(_238);this.confirmDeleteLayerTooltip.show();}},handleLayerRemoved:function(_239){if(_239==null){return;}var _23a=VIEWER_UTILS.getLayerUniqueId(_239);if(_23a==null){return;}if(this.addedLayers[_23a]!=null){this.layersTocWidget.removeLayer(_239);delete this.addedLayers[_23a];}},hidePopups:function(){if(this.confirmDeleteLayerTooltip){this.confirmDeleteLayerTooltip.hide();}}});});},"esriviewer/loader/base/ViewerPlacementWindow":function(){define(["dojo/_base/declare","dojo/_base/window","dojo/dom-construct","./BaseViewerPlacement"],function(_23b,_23c,_23d,_23e){return _23b([_23e],{label:"window",isAbsolutePositioned:true,isWindowless:false,initUI:function(){this.inherited(arguments);_23d.place(this.mapDiv,_23c.body());},placeNavigationToolbar:function(_23f){if(_23f){_23f.placeAt(_23c.body());}},placeHeader:function(_240){if(_240){_240.placeAt(_23c.body());}},placeViewerAccordion:function(_241){if(_241){_241.placeAt(_23c.body());}},placeMainToolbar:function(_242){if(_242){_242.placeAt(_23c.body());}},placeMainToolbarDropdown:function(_243){if(_243){_23d.place(_243,_23c.body());}},placeMessagingWidget:function(_244){if(_244){_244.placeAt(_23c.body());}},placeThrobberWidget:function(_245){if(_245){_245.placeAt(_23c.body());}},placeBasemapGallery:function(_246){if(_246){_246.placeAt(_23c.body());}},placeMapScaleAndCoordinates:function(_247){if(_247!=null){_23d.place(_247,_23c.body());}},placeCreateBookmarkWidget:function(_248){if(_248){_248.placeAt(_23c.body());}},placeMenuBarWidget:function(_249){if(_249){_249.placeAt(_23c.body());}},placeZoomToWidget:function(_24a){if(_24a){_24a.placeAt(_23c.body());}}});});},"esriviewer/ui/draw/base/UserPersistedGraphicsListWidget":function(){define(["dojo/_base/declare","dojo/text!./template/UserPersistedGrahicsListingTemplate.html","../../base/UITemplatedWidget","dojo/_base/lang","./model/UserPersistedGraphicsListViewModel"],function(_24b,_24c,_24d,lang,_24e){return _24b([_24d],{bindingsApplied:false,templateString:_24c,constructor:function(){this.userPersistedGraphics={};},postCreate:function(){this.inherited(arguments);this.viewModel=new _24e();this.viewModel.on(this.viewModel.REMOVE_USER_PERSISTED_GRAPHICS,lang.hitch(this,this.handleRemoveUserPersistedGraphics));this.viewModel.on(this.viewModel.ADD_USER_PERSISTED_GRAPHICS_TO_MAP,lang.hitch(this,this.handleAddUserPersistedGraphicsToMap));},applyBindings:function(){if(!this.bindingsApplied){this.bindingsApplied=true;ko.applyBindings(this.viewModel,this.domNode);}},handleAddUserPersistedGraphicsToMap:function(_24f){if(_24f&&lang.isObject(_24f)){this.onAddUserPersistedGraphicsToMap(_24f);}},onAddUserPersistedGraphicsToMap:function(_250){},handleRemoveUserPersistedGraphics:function(_251){if(_251&&lang.isObject(_251)&&_251.label!=null&&_251.label!=""){this.onRemoveUserPersistedGraphics(_251.label);}},onRemoveUserPersistedGraphics:function(_252){},addExistingPersistedGraphicsItems:function(_253){for(var key in _253){this.viewModel.addedUserPersistedGraphics.push(_253[key]);}this.viewModel.sort();this.applyBindings();},addUserPersistedGraphics:function(_254){this.viewModel.addedUserPersistedGraphics.push(_254);this.viewModel.sort();}});});},"esriviewer/manager/base/ViewerManager":function(){define(["dojo/_base/declare","dojox/storage","dojo/topic","dojo/_base/window","dojo/_base/lang","./IdentityManagerMixin","../../base/Configurable","../../base/LocationServiceSupport","../../base/DataLoaderSupport","../../map/MapManager","../../portal/PortalViewerManagerSupportMixin","../../map/geometry/GeometryServiceController","./ViewerManagerUI","./WebMapTemplateConfigurationUtil","esri/urlUtils","esri/arcgis/utils","../../map/base/LayerQueryTools"],function(_255,_256,_257,_258,lang,_259,_25a,_25b,_25c,_25d,_25e,_25f,_260,_261,_262,_263,_264){return _255([_25e,_25a,_25b,_25c,_260,_259],{portalSharingRestUrl:"/sharing/rest",portalContentUrl:"/sharing/rest/content/items",baseConfigurationLoaded:false,forceHideCoreTimeSlider:false,useProxyForConfig:false,useProxyForPositionConfig:false,allowAccordionMove:true,allowAccordionCollapse:true,forceHideAccordionTab:false,configUrl:"config/baseConfig.json",viewerPositioningConfigUrl:"config/viewerPositioning.json",constructor:function(_265){lang.mixin(this,_265||{});this._initializeStorageProvider();var _266=_262.urlToObject(document.location.href);this.appId=_266.query?_266.query.appid:null;this.processConfig();},processConfig:function(){if(this.appId!=null){var _267=new _261();_267.loadConfiguration(this.appId).then(lang.hitch(this,this._handleWebMapTemplateConfigurationLoaded));}else{if(this.useProxyForConfig){this.loadProxiedConfig();}else{this.loadConfig();}}},_handleWebMapTemplateConfigurationLoaded:function(_268){this.handleConfigLoaded(_268);},handleConfigLoaded:function(_269){VIEWER_UTILS.debug("Configuration Loaded");this.viewerConfig=_269;if(_269.windowTitle){_258.doc.title=_269.windowTitle;}else{_258.doc.title="JavaScript Map Viewer";}if(this.viewerConfig&&this.viewerConfig.portal!=null&&lang.isObject(this.viewerConfig.portal)&&this.viewerConfig.portal.url){var _26a=this.viewerConfig.portal.url;var _26b=_26a.toLowerCase();if(_26b.indexOf("http://")<0&&_26b.indexOf("https://")<0){_26a="http://"+_26a;}_263.arcgisUrl=VIEWER_UTILS.joinUrl(_26a,this.portalContentUrl);}if(this.useProxyForPositionConfig){this.loadProxiedJson(this.viewerPositioningConfigUrl,lang.hitch(this,this.handleWindowPositionsConfigLoaded),lang.hitch(this,this.handleWindowPositionsConfigLoadFailed));}else{this.loadJson(this.viewerPositioningConfigUrl,lang.hitch(this,this.handleWindowPositionsConfigLoaded),lang.hitch(this,this.handleWindowPositionsConfigLoadFailed));}},startupViewer:function(){this._initListeners();this.initListeners();this._createViewerManager();this.createLayerQueryTools();},createLayerQueryTools:function(){this.layerQueryTools=new _264();},initListeners:function(){},_initListeners:function(){this.inherited(arguments);_257.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LOADED,lang.hitch(this,this.handleMapLoaded));_257.subscribe(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET,lang.hitch(this,this.handleGetConfiguration));_257.subscribe(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,lang.hitch(this,this.handleGetConfigurationKey));},handleGetConfiguration:function(_26c){if(_26c&&lang.isFunction(_26c)){_26c(this.viewerConfig);}},handleGetConfigurationKey:function(key,_26d){if(key!=null&&key!=""&&_26d&&lang.isFunction(_26d)){_26d(this.viewerConfig[key]);}},handleMapLoaded:function(map){this.map=map;this._createLayersWidget();PROJECTION_UTILS.setMapSpatialReference(map.spatialReference);this.loadControllers();this.loadUI();},loadUI:function(){this.inherited(arguments);},_initializePortalSupport:function(){return this.inherited(arguments);},loadControllers:function(){if(this.viewerConfig.geometryServiceUrl!=null&&this.viewerConfig.geometryServiceUrl){this.geometryServiceController=new _25f();_257.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.CONTROLLER_CREATED);}else{_257.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.EXISTS,lang.hitch(this,function(_26e){if(_26e!=null&&lang.isFunction(_26e)){_26e(false);}}));}if(this.viewerConfig.locators!=null&&lang.isArray(this.viewerConfig.locators)){for(var i=0;i<this.viewerConfig.locators.length;i++){this.addLocator(this.viewerConfig.locators[i].url,this.viewerConfig.locators[i].label);}}},handleWindowPositionsConfigLoaded:function(_26f){VIEWER_GLOBALS.windowPositioning=_26f;this.createMessagingAndLogging();if(!this.baseConfigurationLoaded){this.handleBaseConfigurationsLoaded();}},handleWindowPositionsConfigLoadFailed:function(){VIEWER_GLOBALS.windowPositioning={};this.createMessagingAndLogging();if(!this.baseConfigurationLoaded){this.handleBaseConfigurationsLoaded();}},createMessagingAndLogging:function(){this._createLoggingWidget();this._createMessagingWidget();},handleBaseConfigurationsLoaded:function(){this.baseConfigurationLoaded=true;this.startupViewer();},_createViewerManager:function(){if(this._initializePortalSupport!=null&&lang.isFunction(this._initializePortalSupport)){_257.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.INITIALIZED,lang.hitch(this,function(){this.mapManager=new _25d({webMapItem:this.viewerConfig.webMapItem});}));var _270=this._initializePortalSupport();if(!_270){this.mapManager=new _25d();}}else{this.mapManager=new _25d();}},_createLayersWidget:function(){this.createLayersWidget();},createLayersWidget:function(){},_initializeStorageProvider:function(){var _271=dojox.storage.manager.getProvider();_271.initialize();},createDefaultAccordionTools:function(){},handleToggleAccordion:function(){this.viewerAccordion.toggle();}});});},"esriviewer/map/base/MapLayersTools":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","esri/layers/OpenStreetMapLayer","esri/layers/FeatureLayer","esri/layers/GraphicsLayer","esri/layers/ArcGISImageServiceLayer","esri/layers/KMLLayer","esri/layers/WMSLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/layers/ArcGISDynamicMapServiceLayer"],function(_272,_273,lang,_274,_275,_276,_277,_278,_279,_27a,_27b){return _272([],{labelServicesVisible:false,constructor:function(_27c){lang.mixin(this,_27c);this.loadViewerConfigurationData();this.currrentBasemapKey=null;this.labelServices={};this.timeEnabledLayers=[];this.operationalLayers={};this.graphicsLayers={};this.initListeners();},loadViewerConfigurationData:function(){if(this.mapConfiguration==null){var _27d=null;_273.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_27e){_27d=_27e;});if(_27d){this.mapConfiguration=_27d;}}},initListeners:function(){_273.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.REMOVE,lang.hitch(this,this.handleRemoveBasemap));_273.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_GRAPHICS_LAYER,lang.hitch(this,this.handleAddGraphicsLayer));_273.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.ADD,lang.hitch(this,this.handleAddBasemap));_273.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.SET,lang.hitch(this,this.changeBaseMaps));_273.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GET_CURRENT_URL,lang.hitch(this,this.handleGetCurrentBasemapUrl));_273.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GET_CURRENT,lang.hitch(this,this.handleGetCurrentBasemap));_273.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.SHOW,lang.hitch(this,this.showLabelServices));_273.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.HIDE,lang.hitch(this,this.hideLabelServices));_273.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.SERVICE_EXISTS,lang.hitch(this,this.handleLabelServiceExists));_273.subscribe(VIEWER_GLOBALS.EVENTS.MAP.TIME.GET_TIME_ENABLED_SERVICES,lang.hitch(this,this.handleGetTimeEnabledLayers));_273.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.OPERATIONAL.GET,lang.hitch(this,this.handleGetOperationalLayers));_273.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_FROM_URL,lang.hitch(this,this.handleAddLayerFromUrl));_273.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD,lang.hitch(this,this.handleAddLayer));_273.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_EXTERNAL_MANAGED_LAYER,lang.hitch(this,this.handleAddExternalManagedLayer));_273.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE_EXTERNAL_MANAGED_LAYER,lang.hitch(this,this.handleRemoveExternalManagedLayer));_273.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.GET_FEATURE_LAYER_IF_EXISTS,lang.hitch(this,this.handleGetFeatureLayerIfExists));_273.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE,lang.hitch(this,this.handleRemoveLayer));_273.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_REFERENCE_LAYER,lang.hitch(this,this.handleAddReferenceLayerRequest));_273.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE_REFERENCE_LAYER,lang.hitch(this,this.handleRemoveReferenceLayerRequest));_273.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.MOVE_LAYER_TO_TOP,lang.hitch(this,this.handleMoveLayerToTop));_273.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.MAKE_VISIBLE,lang.hitch(this,this.handleMakeLayerVisible));_273.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.MAKE_INVISIBLE,lang.hitch(this,this.handleMakeLayerInvisible));this.map.on("layer-add",lang.hitch(this,this._handleLayerAdded));},handleMakeLayerVisible:function(_27f){if(_27f!=null){_27f.show();}},handleMakeLayerInvisible:function(_280){if(_280!=null){_280.hide();}},handleMoveLayerToTop:function(_281){if(_281){var _282=this.map.layerIds.length;if(this.map.graphicsLayerIds!=null&&this.map.graphicsLayerIds.length!=null){_282+=this.map.graphicsLayerIds.length;}this.map.reorderLayer(_281,_282);}},_handleLayerAdded:function(evt){if(evt==null||evt.layer==null){return;}var _283=evt.layer;if(_283!=null&&_283.isReferenceLayer==null||!_283.isReferenceLayer){if(_283.timeInfo!=null){this.timeEnabledLayers.push(_283);VIEWER_UTILS.log("Found time enabled layer",VIEWER_GLOBALS.LOG_TYPE.INFO);_273.publish(VIEWER_GLOBALS.EVENTS.MAP.TIME.TIME_LAYER_FOUND,_283);}}if(_283.isOperationalLayer!=null&&_283.isOperationalLayer===true){VIEWER_UTILS.log("Added operational layer",VIEWER_GLOBALS.LOG_TYPE.INFO);_273.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADDED,_283);}},handleGetFeatureLayerIfExists:function(_284,_285){if(_284==null||_284==""||_285==null||!lang.isFunction(_285)){return;}var _286=_284.toLowerCase();_285(this.operationalLayers[_286]);},handleAddGraphicsLayer:function(_287){if(_287!=null){this.map.addLayer(_287);var uuid=VIEWER_UTILS.generateUUID();_287.id=uuid;this.graphicsLayers[uuid]=_287;}},handleAddBasemap:function(_288,_289,_28a){var id=_288.toLowerCase();if(this.basemaps[id]!=null){_28a("Basemap Already Exists");}var _28b=lang.hitch(this,this._handleBaseMapServiceDescriptionLoaded,_288,_289,_28a);VIEWER_UTILS.getServiceDescription(_288,_28b);},_handleBaseMapServiceDescriptionLoaded:function(_28c,_28d,_28e,_28f){if(this.isServiceTiledAndInMapSR(_28f)){var id=_28c.toLowerCase();var _290={id:id,label:REG_EXP_UTILS.getServiceNameFromUrl(_28c),url:_28c};this.basemaps[id]=_290;VIEWER_UTILS.debug("Added Basemap: "+id);_273.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.ADDED,_290,id);if(_28d!=null&&lang.isFunction(_28d)){_28d(_290);}}else{if(_28e!=null&&lang.isFunction(_28e)){_28e("Could not add basemap. Is the service cached and in the map spatial reference ("+this.map.spatialReference.wkid+")?");}}},handleRemoveLayer:function(_291){if(_291==null){return;}var _292=VIEWER_UTILS.getLayerUniqueId(_291);if(_292!=null){if(this.operationalLayers[_292]){delete this.operationalLayers[_292];}}if(_291 instanceof _276){if(this.graphicsLayers[_291.id]!=null){delete this.graphicsLayers[_291.id];}}this.map.removeLayer(_291);VIEWER_UTILS.debug("Removed Layer: "+_291.name);_273.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVED,_291);},handleGetOperationalLayers:function(_293){if(_293!=null&&lang.isFunction(_293)){var _294=[];for(var key in this.operationalLayers){_294.push(this.operationalLayers[key]);}_293(_294);}},handleGetTimeEnabledLayers:function(_295){if(_295!=null&&lang.isFunction(_295)){_295(this.timeEnabledLayers);}},handleRemoveExternalManagedLayer:function(_296){this.map.removeLayer(_296);},handleAddExternalManagedLayer:function(_297){this.map.addLayer(_297);},handleAddLayer:function(_298,_299,_29a,_29b){if(_299&&_299.isOperationalLayer!=false){var _29c=VIEWER_UTILS.getLayerUniqueId(_298);if(_29c!=null){if(this.operationalLayers[_29c]!=null){return;}}this.operationalLayers[_29c]=_298;_298.isOperationalLayer=true;}else{_298.isOperationalLayer=false;}_298.canRemove=_299!=null&&_299.canRemove!=false;this.map.addLayer(_298);if(_29a!=null&&lang.isFunction(_29a)){_298.on("load",_29a);}if(_29b!=null&&lang.isFunction(_29b)){var _29d=function(){_29b(_298);};_298.on("error",lang.hitch(this,_29d));}VIEWER_UTILS.debug("Added Layer: "+_29c);},handleAddLayerFromUrl:function(_29e,_29f,_2a0,_2a1){var _2a2=VIEWER_UTILS.getLayerUniqueId(_29e);if(this.operationalLayers[_2a2]!=null){if(_2a1!=null&&lang.isFunction(_2a1)){_2a1("Layer has already been added to the map");}else{_273.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Layer has already been added to the map");}return;}var _2a3=null;var type=VIEWER_UTILS.getServiceTypeFromUrl(_29e);if(type){if(type==VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER){if(REG_EXP_UTILS.isFeatureLayer(_29e)){_2a3=new _275(_29e,lang.mixin({mode:_275.MODE_ONDEMAND},_29f||{}));}else{this._handleAddMapServiceLayer(_29e,_29f,_2a0,_2a1);return;}}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.KML){_2a3=new _278(_29e);}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER){_2a3=new _277(_29e);}else{if(type===VIEWER_GLOBALS.SERVICE_TYPES.FEATURE_SERVER){_2a3=new _275(_29e,lang.mixin({mode:_275.MODE_ONDEMAND},_29f||{}));}}}}}else{if(_29e.indexOf("/wms/")>-1){_2a3=new _279(_29e,_29f);}}if(_2a3){_2a3.canRemove=_29f!=null&&_29f.canRemove!=false;_2a3.isOperationalLayer=_29f!=null&&_29f.isOperationalLayer!=null&&_29f.isOperationalLayer!=false;_2a3.layerAliasName=(_29f&&_29f.label)?_29f.label:REG_EXP_UTILS.getServiceNameFromUrl(_29e);if(_2a0!=null&&lang.isFunction(_2a0)){_2a3.on("load",_2a0);}if(_2a1!=null&&lang.isFunction(_2a1)){_2a3.on("error",_2a1);}var _2a4=this.operationalLayers;_2a3.on("load",function(){_2a4[_2a2]=_2a3;});VIEWER_UTILS.debug("Added Layer from URL: "+_29e);this.map.addLayer(_2a3);}else{if(lang.isFunction(_2a1)){_2a1("Could Not Add Layer");}}},_handleAddMapServiceLayer:function(_2a5,_2a6,_2a7,_2a8){var _2a9=lang.hitch(this,lang.hitch(this,this._handleAddMapServiceServiceDescriptionLoaded,_2a5,_2a6,_2a7,_2a8));VIEWER_UTILS.getServiceDescription(_2a5,_2a9,_2a8);},_handleAddMapServiceServiceDescriptionLoaded:function(_2aa,_2ab,_2ac,_2ad,_2ae){var _2af;if(_2ae!=null&&lang.isObject(_2ae)){if(this.isServiceTiledAndInMapSR(_2ae)){_2af=new _27a(_2aa);}else{_2af=new _27b(_2aa);}_2af.isOperationalLayer=_2ab!=null&&_2ab.isOperationalLayer!=null&&_2ab.isOperationalLayer!=false;var _2b0=this.operationalLayers;_2af.on("load",function(){_2b0[_2af.url.toLowerCase()]=_2af;});_2af.serviceDescription=_2ae;}if(_2af!=null){_2af.layerAliasName=(_2ab&&_2ab.label)?_2ab.label:REG_EXP_UTILS.getServiceNameFromUrl(_2aa);if(_2ab!=null&&_2ab.canRemove!=null){_2af.canRemove=true;}if(_2ac!=null&&lang.isFunction(_2ac)){_2af.on("load",_2ac);}if(_2ad!=null&&lang.isFunction(_2ad)){_2af.on("error",_2ad);}VIEWER_UTILS.debug("Added Layer: "+_2af.url);this.map.addLayer(_2af);}},isServiceTiledAndInMapSR:function(_2b1){if(_2b1!=null&&lang.isObject(_2b1)){return _2b1.tileInfo!=null&&_2b1.spatialReference!=null&&_2b1.spatialReference.wkid==this.map.spatialReference.wkid;}return false;},handleLabelServiceExists:function(_2b2){if(_2b2!=null&&lang.isFunction(_2b2)){var _2b3=false;for(var key in this.labelServices){_2b3=true;break;}_2b2(_2b3);}},handleRemoveBasemap:function(id){var _2b4=this.basemaps[id];if(this.basemaps[id]!=null){if(this.currrentBasemapKey!=null&&this.currrentBasemapKey===id){this.map.removeLayer(this.currentBasemap);for(var key in this.basemaps){this.changeBaseMaps(key);break;}}delete this.basemaps[id];VIEWER_UTILS.debug("Removed Basemap: "+id);_273.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.REMOVED,id);}},changeBaseMaps:function(key){var _2b5=this.basemaps[key];if(_2b5){if(this.currrentBasemapKey!=null&&this.currrentBasemapKey===key){return;}if(this.currentBasemap!=null){this.map.removeLayer(this.currentBasemap);}if(_2b5.isOpenStreetMap==null||_2b5.isOpenStreetMap==false){this.currentBasemap=new _27a(_2b5.url);}else{this.currentBasemap=new _274();}this.map.addLayer(this.currentBasemap,0);VIEWER_UTILS.debug("Changed Basemap: "+key);this.currrentBasemapKey=key;}},handleGetCurrentBasemapUrl:function(_2b6){if(_2b6!=null&&lang.isFunction(_2b6)){if(this.mapConfiguration.useBasemapGallery==null||this.mapConfiguration.useBasemapGallery!=true){_2b6(this.basemaps[this.currrentBasemapKey].url);return;}else{var _2b7;_273.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.GET,function(_2b8){_2b7=_2b8;});if(_2b7){var _2b9=_2b7.getSelected();if(_2b9==null){if(this.webMapItem&&this.webMapItem.itemData&&this.webMapItem.itemData.baseMap&&this.webMapItem.itemData.baseMap.baseMapLayers&&this.webMapItem.itemData.baseMap.baseMapLayers&&lang.isArray(this.webMapItem.itemData.baseMap.baseMapLayers)&&this.webMapItem.itemData.baseMap.baseMapLayers.length>0){_2b6(this.webMapItem.itemData.baseMap.baseMapLayers[0].url);return;}}else{if(_2b9&&_2b9.layers&&lang.isArray(_2b9.layers)&&_2b9.layers.length>0){_2b6(_2b9.layers[0].url);return;}}}}_2b6(null);}},handleGetCurrentBasemap:function(_2ba){if(_2ba!=null&&lang.isFunction(_2ba)){if(this.mapConfiguration.useBasemapGallery==null||this.mapConfiguration.useBasemapGallery!=true){_2ba(this.currrentBasemapKey);return;}else{var _2bb=null;_273.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.GET,function(_2bc){_2bb=_2bc;});if(_2bb){var _2bd=_2bb.getSelected();if(_2bd==null){if(this.webMapItem&&this.webMapItem.itemData&&this.webMapItem.itemData.baseMap&&this.webMapItem.itemData.baseMap.baseMapLayers&&this.webMapItem.itemData.baseMap.baseMapLayers&&lang.isArray(this.webMapItem.itemData.baseMap.baseMapLayers)&&this.webMapItem.itemData.baseMap.baseMapLayers.length>0){_2ba(new _27a(this.webMapItem.itemData.baseMap.baseMapLayers[0].url));return;}}else{_2ba(_2bd);return;}}}}_2ba(null);},showLabelServices:function(){var _2be;for(var key in this.labelServices){_2be=this.labelServices[key];_2be.show();this.handleMoveLayerToTop(_2be);}VIEWER_UTILS.debug("Displayed Label Services");this.labelServicesVisible=true;},hideLabelServices:function(){for(var key in this.labelServices){this.labelServices[key].hide();}VIEWER_UTILS.debug("Hid Label Services");this.labelServicesVisible=false;},handleAddReferenceLayerRequest:function(_2bf,_2c0,_2c1){if(_2bf==null||_2bf.url==null||_2bf.url==""){if(_2c1!=null&&lang.isFunction(_2c1)){_2c1("Invalid Reference Layer");}}var id=VIEWER_UTILS.getLayerUniqueId(_2bf);if(this.labelServices[id]!=null){if(_2c1!=null&&lang.isFunction(_2c1)){_2c1("Reference Layer Already Exists");}}var _2c2=this._addReferenceLayer(_2bf);if(_2c2!=null){if(_2c0!=null&&lang.isFunction(_2c0)){_2c0(_2c2);}}else{if(_2c1!=null&&lang.isFunction(_2c1)){_2c1("Could not add reference layer");}}},_addReferenceLayers:function(){if(this.mapConfiguration.referenceLayers!=null&&lang.isArray(this.mapConfiguration.referenceLayers)){var _2c3;for(var i=0;i<this.mapConfiguration.referenceLayers.length;i++){_2c3=this.mapConfiguration.referenceLayers[i];this._addReferenceLayer(_2c3);}}},_addReferenceLayer:function(_2c4){var _2c5=this._getMapLayerFromLayerObject(_2c4);if(_2c5!=null){if(!this.labelServicesVisible){_2c5.hide();}else{_2c5.show();}var id=VIEWER_UTILS.getLayerUniqueId(_2c5);if(id==null){return;}this.labelServices[id]=_2c5;_2c5.isReferenceLayer=true;this.map.addLayer(_2c5);VIEWER_UTILS.log("Added Reference Layer: "+_2c5.url,VIEWER_GLOBALS.LOG_TYPE.INFO);_273.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REFERENCE_LAYER_ADDED,_2c5);return _2c5;}return null;},handleRemoveReferenceLayerRequest:function(_2c6){var id=VIEWER_UTILS.getLayerUniqueId(_2c6);if(id==null){return;}if(this.labelServices[id]!=null){this.map.removeLayer(_2c6);delete this.labelServices[id];var _2c7=false;for(var key in this.labelServices){_2c7=true;break;}VIEWER_UTILS.log("Removed reference layer",VIEWER_GLOBALS.LOG_TYPE.INFO);_273.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REFERENCE_LAYER_REMOVED,_2c6,_2c7);}},addWebMapOperationalLayers:function(_2c8){var _2c9;var _2ca;for(var i=0;i<_2c8.itemData.operationalLayers.length;i++){_2c9=_2c8.itemData.operationalLayers[i];_2ca=_2c9.layerObject;_2ca.name=REG_EXP_UTILS.getServiceNameFromUrl(_2ca.url);_2ca.isOperationalLayer=true;var _2cb=VIEWER_UTILS.getLayerUniqueId(_2ca);if(this.operationalLayers[_2cb]==null){this.operationalLayers[_2cb]=_2ca;}VIEWER_UTILS.getServiceDescription(_2ca.url,lang.hitch(this,function(_2cc,_2cd){_2cc.serviceDescription=_2cd;this.handleLayerAdded(_2cc);},_2ca));}},_addOperationalLayers:function(){if(this.mapConfiguration.operationalLayers!=null&&lang.isArray(this.mapConfiguration.operationalLayers)){var _2ce;for(var i=0;i<this.mapConfiguration.operationalLayers.length;i++){_2ce=this.mapConfiguration.operationalLayers[i];var _2cf=this._getMapLayerFromLayerObject(_2ce);if(_2cf!=null){VIEWER_UTILS.getServiceDescription(_2ce.url,lang.hitch(this,function(_2d0,_2d1){_2d0.serviceDescription=_2d1;},_2cf));_2cf.name=REG_EXP_UTILS.getServiceNameFromUrl(_2ce.url);if(_2ce.label!=null&&_2ce.label!=""){_2cf.layerAliasName=_2ce.label;}this.map.addLayer(_2cf);_2cf.isOperationalLayer=true;var _2d2=VIEWER_UTILS.getLayerUniqueId(_2cf);if(this.operationalLayers[_2d2]==null){this.operationalLayers[_2d2]=_2cf;}}}}},_getMapLayerFromLayerObject:function(_2d3){if(_2d3.type==null||_2d3.type==""||_2d3.url==null||_2d3.url==""){return null;}var _2d4={};if(_2d3.visible!=null){_2d4.visible=_2d3.visible;}var _2d5=_2d3.type.toLowerCase();if(_2d5==="tiled"){return new _27a(_2d3.url,_2d4);}else{if(_2d5==="dynamic"){var _2d6=new _27b(_2d3.url,_2d4);if(_2d3.visibleLayerIds!=null&&lang.isArray(_2d3.visibleLayerIds)){_2d6.setVisibleLayers(_2d3.visibleLayerIds);}return _2d6;}else{if(_2d5==="image"){return new _277(_2d3.url,_2d4);}else{if(_2d5==="feature"){_2d4=lang.mixin(_2d4,{mode:_275.MODE_ONDEMAND,outFields:["*"]});var _2d7=new _275(_2d3.url,_2d4);if(_2d3.mapLabel!=null&&_2d3.mapLabel.field!=null&&_2d3.mapLabel.field!=""){this._createFeatureLayerLabels(_2d7,_2d3.mapLabel);}return _2d7;}else{if(_2d5==="kml"){return new _278(_2d3.url);}}}}}},loadMapConfigurationLayers:function(){this._addReferenceLayers();this._addOperationalLayers();},_createFeatureLayerLabels:function(_2d8,_2d9){require(["esri/layers/LabelLayer","dojo/_base/Color","esri/renderers/SimpleRenderer","esri/symbols/TextSymbol"],lang.hitch(this,function(_2da,_2db,_2dc,_2dd){var _2de=_2d9.color!=null?_2d9.color:"#000";var _2df=new _2da({id:VIEWER_UTILS.generateUUID()});var _2e0=new _2dd().setColor(new _2db(_2de));var _2e1=_2d9.fontSize!=null?_2d9.fontSize:"12pt";_2e0.font.setSize(_2e1);var _2e2=_2d9.fontFamily!=null?_2d9.fontFamily:"arial";_2e0.font.setFamily(_2e2);var _2e3=new _2dc(_2e0);_2df.addFeatureLayer(_2d8,_2e3,"${"+_2d9.field+"}");this.map.addLayer(_2df);_2d8.on("visibility-change",lang.hitch(this,function(_2e4,e){if(e&&e.visible){_2e4.show();}else{_2e4.hide();}},_2df));_2d8.on("opacity-change",lang.hitch(this,function(_2e5,e){if(e&&e.opacity!=null){_2df.setOpacity(e.opacity);}},_2df));}));}});});},"esriviewer/map/base/MapDisplayWidgets":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/window","dojo/dom-attr","dojo/dom-construct","dojo/dom-class","dojo/topic","esri/geometry/webMercatorUtils","esri/geometry/scaleUtils"],function(_2e6,lang,_2e7,_2e8,_2e9,_2ea,_2eb,_2ec,_2ed){return _2e6([],{useFooterCoordPosition:false,_defaultMgrsPrecision:6,showMgrs:false,showUTM:false,showLatLong:true,hideMapScale:false,showScaleBar:false,constructor:function(_2ee){lang.mixin(this,_2ee);this.mgrsPrecision=this._defaultMgrsPrecision;this.loadViewerConfigurationData();this.createMapScaleAndCoordsElement();this.initListeners();},loadViewerConfigurationData:function(){var _2ef=null;_2eb.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_2f0){_2ef=_2f0;});if(_2ef&&lang.isObject(_2ef)){if(_2ef.display!=null&&lang.isObject(_2ef.display)){if(_2ef.display.showScale!=null&&_2ef.display.showScale===false){this.hideMapScale=true;}if(_2ef.display.showScaleBar!=null&&_2ef.display.showScaleBar===true){this.showScaleBar=true;}if(_2ef.display.showMGRS!=null&&_2ef.display.showMGRS===true){this.showMgrs=true;}if(_2ef.display.showUTM!=null&&_2ef.display.showUTM===true){this.showUTM=true;}if(_2ef.display.showLatLong!=null&&_2ef.display.showLatLong===false){this.showLatLong=false;}if(_2ef.display.mgrsPrecision!=null){this.mgrsPrecision=parseInt(_2ef.display.mgrsPrecision,10);}}}var _2f1=null;_2eb.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"footerTogglerWidget",function(_2f2){_2f1=_2f2;});this.useFooterCoordPosition=_2f1!=null&&lang.isObject(_2f1)&&_2f1.create;},initListeners:function(){_2eb.subscribe(VIEWER_GLOBALS.EVENTS.MAP.INFO_WINDOW.HIDE,lang.hitch(this,this.handleHideInfoWindow));if(this.showLatLong||this.showMgrs||this.showUTM){this.map.on("mouse-move",lang.hitch(this,this.showCoords));}},handleHideInfoWindow:function(){if(this.map&&this.map.infoWindow&&this.map.infoWindow.isShowing){this.map.infoWindow.hide();}},createMapScaleAndCoordsElement:function(){var _2f3=_2e9.create("div",{className:"threePixelBorderRadius mapalmanac defaultBackground"});if(this.useFooterCoordPosition){_2ea.add(_2f3,"mapScaleAndCoordsContainerWithFooter");}else{_2ea.add(_2f3,"mapScaleAndCoordsContainer");}if(!this.hideMapScale){this.scaleInfoElement=_2e9.create("span",{className:"mapScaleInfoInner"});_2e9.place(this.scaleInfoElement,_2f3);}if(this.showScaleBar){var _2f4=_2e9.create("div",{className:"threePixelBorderRadius  defaultBackground"});if(this.useFooterCoordPosition){_2ea.add(_2f4,"esriScalebarContainerWithFooter");}else{_2ea.add(_2f4,"esriScalebarContainer");}var _2f5=_2e9.create("div");_2e9.place(_2f5,_2f4);_2e9.place(_2f4,_2e7.body());require(["esri/dijit/Scalebar"],lang.hitch(this,function(_2f6){var _2f7=new _2f6({map:this.map,scalebarUnit:"dual"},_2f5);}));}if(this.showLatLong||this.showMgrs||this.showUTM){if(!this.hideMapScale){_2e9.place(_2e9.create("span",{innerHTML:"|"}),_2f3);}if(this.showLatLong){this.latLongCoordsInfoElement=_2e9.create("span",{className:"mapCoordsInfoInner"});_2e9.place(this.latLongCoordsInfoElement,_2f3);}if(this.showMgrs){if(this.showLatLong){_2e9.place(_2e9.create("span",{innerHTML:"|"}),_2f3);}this.mrgsCoordsInfoElement=_2e9.create("span",{className:"mapCoordsInfoInner"});_2e9.place(this.mrgsCoordsInfoElement,_2f3);}if(this.showUTM){if(this.showLatLong||this.showMgrs){_2e9.place(_2e9.create("span",{innerHTML:"|"}),_2f3);}this.utmCoordsInfoElement=_2e9.create("span",{className:"mapCoordsInfoInner"});_2e9.place(this.utmCoordsInfoElement,_2f3);}}_2eb.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAP_SCALE_AND_COORDINATES,_2f3);},showCoords:function(evt){try{if(this.latLongCoordsInfoElement||this.mrgsCoordsInfoElement||this.utmCoordsInfoElement){var pnt=_2ec.webMercatorToGeographic(evt.mapPoint||evt);if(this.latLongCoordsInfoElement){if(pnt===null||pnt===undefined){return;}_2e8.set(this.latLongCoordsInfoElement,"innerHTML","Lat: "+pnt.y.toFixed(2)+"&deg"+((pnt.y<0)?"S":"N")+"  Lon: "+pnt.x.toFixed(2)+"&deg"+((pnt.x<0)?"W":"E"));}if(this.mrgsCoordsInfoElement){_2e8.set(this.mrgsCoordsInfoElement,"innerHTML","<span style='font-weight:bold'>MGRS</span> "+PROJECTION_UTILS.LLtoMGRS(pnt.y,pnt.x,this.mgrsPrecision));}if(this.utmCoordsInfoElement){var _2f8=PROJECTION_UTILS.LLtoUTM(pnt.y,pnt.x);if(_2f8.northing==null||isNaN(_2f8.northing)){_2f8.northing="?";}else{_2f8.northing=_2f8.northing.toFixed(3);}if(_2f8.easting==null||isNaN(_2f8.easting)){_2f8.easting="?";}else{_2f8.easting=_2f8.easting.toFixed(3);}_2e8.set(this.utmCoordsInfoElement,"innerHTML","<span style='font-weight:bold'>UTM</span> "+"N: "+_2f8.northing+" E: "+_2f8.easting+"   Z: "+_2f8.zone);}}}catch(e){}},showScale:function(){var a=Math.round(_2ed.getScale(this.map));a>999&&a<=999999?a=Math.round(a/1000)+" K":a>999999?a=Math.round(a/1000000)+" M":a>0&&a<=999&&(a=Math.round(a)+" Ft");_2e8.set(this.scaleInfoElement,"innerHTML","<span style='font-weight:bold'>Scale</span> 1 <b>:</b> "+a);}});});},"dijit/PopupMenuItem":function(){define(["dojo/_base/declare","dojo/dom-style","dojo/_base/lang","dojo/query","./popup","./registry","./MenuItem","./hccss"],function(_2f9,_2fa,lang,_2fb,pm,_2fc,_2fd){return _2f9("dijit.PopupMenuItem",_2fd,{_fillContent:function(){if(this.srcNodeRef){var _2fe=_2fb("*",this.srcNodeRef);this.inherited(arguments,[_2fe[0]]);this.dropDownContainer=this.srcNodeRef;}},_openPopup:function(_2ff,_300){var _301=this.popup;pm.open(lang.delegate(_2ff,{popup:this.popup,around:this.domNode}));if(_300&&_301.focus){_301.focus();}},_closePopup:function(){pm.close(this.popup);this.popup.parentMenu=null;},startup:function(){if(this._started){return;}this.inherited(arguments);if(!this.popup){var node=_2fb("[widgetId]",this.dropDownContainer)[0];this.popup=_2fc.byNode(node);}this.ownerDocumentBody.appendChild(this.popup.domNode);this.popup.domNode.setAttribute("aria-labelledby",this.containerNode.id);this.popup.startup();this.popup.domNode.style.display="none";if(this.arrowWrapper){_2fa.set(this.arrowWrapper,"visibility","");}this.focusNode.setAttribute("aria-haspopup","true");},destroyDescendants:function(_302){if(this.popup){if(!this.popup._destroyed){this.popup.destroyRecursive(_302);}delete this.popup;}this.inherited(arguments);}});});},"dojox/flash":function(){define(["./flash/_base"],function(){});},"esriviewer/ui/layers/base/LayersLocalStorageMixin":function(){define(["dojo/_base/declare","dojo/has"],function(_303,has){return _303([],{localStoragePersistSupported:true,constructor:function(){if(!(has("ie")<8)){this.localStoragePersistSupported=false;}this.storageProvider=dojox.storage.manager.getProvider();if(this.storageProvider){this.localStoragePersistSupported=true;}this.persistedUserLayers=this.loadPersistedUserLayers();},deleteUserPersistedLayer:function(_304){if(_304!=null&&_304!=""){if(this.persistUserLayerExists(_304)){var _305=_304.toLowerCase();delete this.persistedUserLayers[_305];this.persist();}}},removeAllLayers:function(){this.persistedUserLayers={};this.persist();},persistUserLayerExists:function(_306){if(_306==null||_306==""){return true;}return this.persistedUserLayers[_306]!=null;},persistUserLayer:function(_307){if(_307==null||_307.url==null){return null;}var _308=_307.url.toLowerCase();if(_308==null){return null;}if(this.persistUserLayerExists(_308)){return null;}else{var name=VIEWER_UTILS.getLayerNameFromLayer(_307);var _309={url:_307.url,name:name};this.persistedUserLayers[_308]=_309;this.persist();return _309;}},loadPersistedUserLayers:function(){if(this.storageProvider){if(this.storageProvider.hasKey(VIEWER_GLOBALS.STORAGE.LABELS.LAYERS)){return this.storageProvider.get(VIEWER_GLOBALS.STORAGE.LABELS.LAYERS);}}return {};},persist:function(){this.storageProvider.put(VIEWER_GLOBALS.STORAGE.LABELS.LAYERS,this.persistedUserLayers);}});});},"esriviewer/ui/layers/base/LayersTocWidgetContextMenu":function(){define(["dojo/_base/declare","dojo/topic","dojo/on","dojo/_base/lang","dojo/dom-style","dijit/Menu","dijit/MenuItem","dijit/PopupMenuItem","dijit/registry","dojo/_base/connect","esri/layers/ArcGISImageServiceLayer","esri/layers/FeatureLayer","esri/layers/ArcGISDynamicMapServiceLayer"],function(_30a,_30b,on,lang,_30c,Menu,_30d,_30e,_30f,con,_310,_311,_312){return _30a([],{createQueryBuilderMenuItems:false,showRemoveMenuItems:true,constructor:function(_313){lang.mixin(this,_313);this.initialize();},initialize:function(){this.loadViewerConfigurationData();this.createServerMenu();this.createGroupLayerMenu();this.createLayerMenu();this.createGraphicsLayerMenu();this.initListeners();},initListeners:function(){this.zoomToExtentMenuItem.on("click",lang.hitch(this,this.handleZoomToExtent));if(this.createQueryBuilderMenuItems){this.queryServiceMenuItem.on("click",lang.hitch(this,this.handleQueryBuilderServiceClick));this.queryLayerMenuItem.on("click",lang.hitch(this,this.handleQueryBuilderLayerClick));}this.openMapServiceDescriptionMenu.on("click",lang.hitch(this,this.handleOpenMapServerDescriptionMenuRequest));this.confirmRemoveLayerMenuItem.on("click",lang.hitch(this,this.handleRemoveLayer));this.confirmRemoveGraphicLayerMenuItem.on("click",lang.hitch(this,this.handleRemoveGraphicsLayer));con.connect(this.serverNodeMenu,"_openMyself",lang.hitch(this,this.handleServerMenuOpen));con.connect(this.groupNodeMenu,"_openMyself",lang.hitch(this,this.handleGroupMenuOpen));con.connect(this.graphicsLayerMenu,"_openMyself",lang.hitch(this,this.handleGraphicsLayerMenuOpen));con.connect(this.layerNodeMenu,"_openMyself",lang.hitch(this,this.handleLayerMenuOpen));},loadViewerConfigurationData:function(){var _314=null;_30b.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"queryBuilder",function(_315){_314=_315;});if(_314&&lang.isObject(_314)){this.createQueryBuilderMenuItems=_314.create===true;}},createServerMenu:function(){this.serverNodeMenu=new Menu();this.zoomToExtentMenuItem=new _30d({label:"Zoom To Extent",iconClass:"commonIcons16 locationGoTo"});this.serverNodeMenu.addChild(this.zoomToExtentMenuItem);if(this.createQueryBuilderMenuItems){this.queryServiceMenuItem=new _30d({label:"Query Builder",iconClass:"commonIcons16 sql"});this.serverNodeMenu.addChild(this.queryServiceMenuItem);}this.openMapServiceDescriptionMenu=new _30d({label:"View Service Description",iconClass:"serviceDescriptionIcon"});this.serverNodeMenu.addChild(this.openMapServiceDescriptionMenu);var _316=new Menu();this.confirmRemoveLayerMenuItem=new _30d({label:"Confirm",iconClass:"commonIcons16 question"});_316.addChild(this.confirmRemoveLayerMenuItem);this.removeServiceMenuItem=new _30e({iconClass:"commonIcons16 delete",label:"Remove Layer",popup:_316});this.serverNodeMenu.addChild(this.removeServiceMenuItem);this.serverNodeMenu.startup();},createGraphicsLayerMenu:function(){this.graphicsLayerMenu=new Menu();var _317=new Menu();this.confirmRemoveGraphicLayerMenuItem=new _30d({label:"Confirm",iconClass:"commonIcons16 question"});_317.addChild(this.confirmRemoveGraphicLayerMenuItem);this.removeGraphicLayerMenuItem=new _30e({iconClass:"commonIcons16 delete",label:"Remove Graphics Layer",popup:_317});this.graphicsLayerMenu.addChild(this.removeGraphicLayerMenuItem);this.graphicsLayerMenu.startup();},createLayerMenu:function(){this.layerNodeMenu=new Menu();if(this.createQueryBuilderMenuItems){this.queryLayerMenuItem=new _30d({label:"Query Builder",iconClass:"commonIcons16 sql"});this.layerNodeMenu.addChild(this.queryLayerMenuItem);}this.layerNodeMenu.startup();},createGroupLayerMenu:function(){this.groupNodeMenu=new Menu();this.groupNodeMenu.startup();_30c.set(this.groupNodeMenu.domNode,"display","none");},handleGroupMenuOpen:function(){_30c.set(this.groupNodeMenu.domNode,"display","none");return false;},bindNodeToGraphicsLayerMenu:function(node){this.bindNode(node,this.graphicsLayerMenu);},bindNodeToServerMenu:function(node){this.bindNode(node,this.serverNodeMenu);},bindNodeToGroupMenu:function(node){this.bindNode(node,this.groupNodeMenu);},bindNodeToLayerMenu:function(node){this.bindNode(node,this.layerNodeMenu);},bindNodeToNoContentMenu:function(node){on(node,"contextmenu",function(e){e.stopPropagation();});},bindNode:function(node,menu){if(node&&menu&&menu.bindDomNode){menu.bindDomNode(node);}},handleRemoveGraphicsLayer:function(){if(this.currentGraphicsLayerNodeFromMenu&&this.currentGraphicsLayerNodeFromMenu.item){var _318=this.getTreeStore().getValue(this.currentGraphicsLayerNodeFromMenu.item,"layer");if(_318){_30b.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE,_318);}}},handleGraphicsLayerMenuOpen:function(e){this.currentGraphicsLayerNodeFromMenu=_30f.getEnclosingWidget(e.target);if(this.currentGraphicsLayerNodeFromMenu&&this.currentGraphicsLayerNodeFromMenu.item){var _319=this.getTreeStore().getValue(this.currentGraphicsLayerNodeFromMenu.item,"layer");if(_319){if(_319.removable!=null&&_319.removable===true){this.removeGraphicLayerMenuItem.attr("disabled",false);}else{this.removeGraphicLayerMenuItem.attr("disabled",true);}}}},handleLayerMenuOpen:function(e){if(this.queryLayerMenuItem){this.currentLayerNodeFromMenu=_30f.getEnclosingWidget(e.target);if(this.currentLayerNodeFromMenu&&this.currentLayerNodeFromMenu.item){var _31a=this.getTreeStore().getValue(this.currentLayerNodeFromMenu.item,"layer");if(_31a){this.queryLayerMenuItem.attr("disabled",_31a.capabilities.indexOf("Query")<0);}}}},handleServerMenuOpen:function(e){this.currentServerNodeFromMenu=_30f.getEnclosingWidget(e.target);if(this.currentServerNodeFromMenu&&this.currentServerNodeFromMenu.item){var _31b=this.getTreeStore().getValue(this.currentServerNodeFromMenu.item,"layer");if(_31b){if(_31b.canRemove!=null&&_31b.canRemove===true){this.removeServiceMenuItem.attr("disabled",false);}else{this.removeServiceMenuItem.attr("disabled",true);}if(this.queryServiceMenuItem){var _31c=false;if(_31b instanceof _312){_31c=false;}else{_31c=_31b instanceof _310||(_31b.capabilities&&_31b.capabilities.indexOf("Query")>-1);}this.queryServiceMenuItem.attr("disabled",!_31c);}}}},handleZoomToExtent:function(){if(this.currentServerNodeFromMenu&&this.currentServerNodeFromMenu.item){var _31d=this.getTreeStore().getValue(this.currentServerNodeFromMenu.item,"layer");if(_31d&&_31d.initialExtent&&!isNaN(_31d.initialExtent.xmin)&&!isNaN(_31d.initialExtent.xmax)&&!isNaN(_31d.initialExtent.xmax)&&!isNaN(_31d.initialExtent.ymax)){_30b.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,_31d.initialExtent);}}this.currentServerNodeFromMenu=null;},handleRemoveLayer:function(){if(this.currentServerNodeFromMenu&&this.currentServerNodeFromMenu.item){var _31e=this.getTreeStore().getValue(this.currentServerNodeFromMenu.item,"layer");if(_31e){if(_31e.canRemove!=null&&_31e.canRemove===true){_30b.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REMOVE,_31e);}}}this.currentServerNodeFromMenu=null;},handleOpenMapServerDescriptionMenuRequest:function(){if(this.currentServerNodeFromMenu&&this.currentServerNodeFromMenu.item){var _31f=this.getTreeStore().getValue(this.currentServerNodeFromMenu.item,"layer");if(_31f&&_31f.url){this.openUrlInWindow(_31f.url);}}this.currentMapServerNodeFromMenu=null;},handleQueryBuilderServiceClick:function(){if(this.currentServerNodeFromMenu&&this.currentServerNodeFromMenu.item){var _320=this.getTreeStore().getValue(this.currentServerNodeFromMenu.item,"layer");if(_320){if(_320 instanceof _310){_30b.publish(VIEWER_GLOBALS.EVENTS.QUERY_BUILDER.SET_IMAGE_SERVICE_LAYER,_320);}else{if(_320 instanceof _311){_30b.publish(VIEWER_GLOBALS.EVENTS.QUERY_BUILDER.SET_FEATURE_SERVICE_LAYER,_320);}}}}this.currentMapServerNodeFromMenu=null;},handleQueryBuilderLayerClick:function(){if(this.currentLayerNodeFromMenu&&this.currentLayerNodeFromMenu.item){var _321=this.getTreeStore().getValue(this.currentLayerNodeFromMenu.item,"layer");var _322=this.getTreeStore().getValue(this.currentLayerNodeFromMenu.item,"info");_30b.publish(VIEWER_GLOBALS.EVENTS.QUERY_BUILDER.SET_MAP_SERVICE_LAYER,_321,_322);}this.currentMapServerNodeFromMenu=null;},openUrlInWindow:function(url){if(url){window.open(url);}},getTreeStore:function(){return this.tree.model.store;}});});},"esriviewer/ui/draw/base/MapDrawSupport":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/Color","dojo/_base/lang","dojo/dom-construct","dijit/form/TextBox","dijit/TooltipDialog","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Extent","esri/geometry/screenUtils","esri/graphic","esri/symbols/TextSymbol","esri/symbols/Font"],function(_323,_324,_325,lang,_326,_327,_328,_329,_32a,_32b,_32c,_32d,_32e,_32f,Font){return _323([],{constructor:function(){this.polygonOptions={};this.pointOptions={};this.envelopeOptions={};this.lineOptions={};this.geometryAddedCallback=lang.hitch(this,this.geometryAdded);},clearDraw:function(){this.currentDrawType=null;},setDraw:function(type){if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT){this.activatePointDraw();}else{if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE){this.activatePolylineDraw(this.freehandActive);}else{if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_LINE){this.activateLineDraw();}else{if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON){this.activatePolygonDraw(this.freehandActive);}else{if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_RECTANGLE){this.activateRectangleDraw();}else{if(type==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT){this.activatePointDraw();}}}}}}this.currentDrawType=type;},activatePointDraw:function(){this.cancelDrawChangeListener();_324.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.POINT_INPUT,this.geometryAddedCallback,this.pointOptions);this.setupClearDrawCallback();},activateLineDraw:function(){this.cancelDrawChangeListener();_324.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.LINE_INPUT,this.geometryAddedCallback,this.lineOptions);this.setupClearDrawCallback();},activatePolylineDraw:function(_330){this.cancelDrawChangeListener();if(_330==null||_330===false){_324.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.POLYLINE_INPUT,this.geometryAddedCallback,this.lineOptions);}else{_324.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.FREEHAND_POLYLINE_INPUT,this.geometryAddedCallback,this.lineOptions);}this.setupClearDrawCallback();},activatePolygonDraw:function(_331){this.cancelDrawChangeListener();if(_331==null||_331===false){_324.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.POLYGON_INPUT,this.geometryAddedCallback,this.polygonOptions);}else{_324.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.FREEHAND_POLYGON_INPUT,this.geometryAddedCallback,this.polygonOptions);}this.setupClearDrawCallback();},activateRectangleDraw:function(){this.cancelDrawChangeListener();_324.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.RECTANGLE_INPUT,this.geometryAddedCallback,this.envelopeOptions);this.setupClearDrawCallback();},cancelDrawChangeListener:function(){if(this.toolChangeConnect){this.toolChangeConnect.remove();this.toolChangeConnect=null;}},geometryAdded:function(_332){if(_332==null){return;}var _333=null;var type=null;if(_332 instanceof _329){type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT;if(this.currentDrawType==VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT){type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT;_333=this.cloneTextSymbol(this.textSymbol);_333.setText("");var _334;var _335;_324.publish(VIEWER_GLOBALS.EVENTS.MAP.DIMENSIONS.GET,function(_336){_334=_336;});_324.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,function(_337){_335=_337;});var _338=_32d.toScreenPoint(_335,_334.width,_334.height,_332);this.showTextSymbolTooltip(_338);}else{type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT;_333=this.pointSymbol;}}else{if(_332 instanceof _32a){_333=this.lineSymbol;type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE;}else{if(_332 instanceof _32b){_333=this.polygonSymbol;type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON;}else{if(_332 instanceof _32c){_333=this.envelopeSymbol;type=VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_RECTANGLE;}}}}if(_333!=null&&type!=null){if(type===VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT){this.currentTextGraphic=new _32e(_332,_333);}else{var _339=new _32e(_332,_333);var uuid=VIEWER_UTILS.generateUUID();this.onAnnotationCreated({id:uuid,type:type,graphic:_339});}}},onClearDraw:function(){},onAnnotationCreated:function(_33a){},setupClearDrawCallback:function(){this.toolChangeConnect=_324.subscribe(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,lang.hitch(this,this.handleClearDraw));},handleClearDraw:function(){this.cancelDrawChangeListener();this.clearDraw();this.onClearDraw();},createTextSymbolLabelTooltip:function(){var _33b=_326.create("div");var _33c=_326.create("span",{innerHTML:"Label: ",className:"textSymbolInputLabel"});this.textSymbolLabelInput=new _327({value:"Label"});this.textSymbolLabelInput.on("keyUp",lang.hitch(this,this.handleTextSymbolKeyUp));_326.place(_33c,_33b);_326.place(this.textSymbolLabelInput.domNode,_33b);this.textSymbolLabelTooltip=new _328({content:_33b});},handleTextSymbolKeyUp:function(e){if(VIEWER_UTILS.isEnterKey(e)){this.finalizeTextSymbol();this.hideTextSymbolTooltip();}},finalizeTextSymbol:function(){if(this.currentTextGraphic==null||this.currentTextGraphic.symbol==null){return;}var _33d=this.textSymbolLabelInput.get("value");if(_33d==""){_33d="Label";}this.currentTextGraphic.symbol.setText(_33d);var uuid=VIEWER_UTILS.generateUUID();this.onAnnotationCreated({id:uuid,type:VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT,graphic:this.currentTextGraphic});this.currentTextSymbol=null;},showTextSymbolTooltip:function(_33e){if(this.textSymbolLabelTooltip==null){this.createTextSymbolLabelTooltip();}if(this.textSymbolLabelTooltip){dijit.popup.open({popup:this.textSymbolLabelTooltip,x:_33e.x,y:_33e.y});this.textSymbolLabelInput.set("value","");this.textSymbolLabelInput.focus();}},hideTextSymbolTooltip:function(){if(this.textSymbolLabelTooltip){dijit.popup.close(this.textSymbolLabelTooltip);}},cloneTextSymbol:function(){var _33f=new _32f("");_33f.setColor(new _325(this.textSymbol.color));_33f.setAlign(this.textSymbol.align);_33f.setAngle(this.textSymbol.angle);_33f.setFont(new Font(this.textSymbol.font.size));_33f.font.setWeight(this.textSymbol.font.weight);_33f.font.setStyle(this.textSymbol.font.style);return _33f;}});});},"esriviewer/map/base/MapTimeTools":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang"],function(_340,_341,lang){return _340([],{constructor:function(_342){lang.mixin(this,_342);this.initListeners();},initListeners:function(){_341.subscribe(VIEWER_GLOBALS.EVENTS.MAP.TIME.CLEAR_TIME_EXTENT,lang.hitch(this,this.handleClearTimeExtent));_341.subscribe(VIEWER_GLOBALS.EVENTS.MAP.TIME.SET_MAP_TIME_SLIDER,lang.hitch(this,this.handleSetMapTimeSlider));},handleSetMapTimeSlider:function(_343){this.map.setTimeSlider(_343);_341.publish(VIEWER_GLOBALS.EVENTS.MAP.TIME.MAP_TIME_EXTENT_SET);},handleClearTimeExtent:function(){this.map.setTimeSlider(null);this.map.setTimeExtent(null);_341.publish(VIEWER_GLOBALS.EVENTS.MAP.TIME.MAP_TIME_EXTENT_CLEARED);}});});},"dojox/storage/LocalStorageProvider":function(){define(["dijit","dojo","dojox","dojo/require!dojox/storage/Provider,dojox/storage/manager"],function(_344,dojo,_345){dojo.provide("dojox.storage.LocalStorageProvider");dojo.require("dojox.storage.Provider");dojo.require("dojox.storage.manager");dojo.declare("dojox.storage.LocalStorageProvider",[_345.storage.Provider],{store:null,initialize:function(){this.store=localStorage;this.initialized=true;_345.storage.manager.loaded();},isAvailable:function(){return typeof localStorage!="undefined";},put:function(key,_346,_347,_348){this._assertIsValidKey(key);_348=_348||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_348);var _349=this.getFullKey(key,_348);_346=dojo.toJson(_346);try{this.store.setItem(_349,_346);if(_347){_347(this.SUCCESS,key,null,_348);}}catch(e){if(_347){_347(this.FAILED,key,e.toString(),_348);}}},get:function(key,_34a){this._assertIsValidKey(key);_34a=_34a||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_34a);key=this.getFullKey(key,_34a);return dojo.fromJson(this.store.getItem(key));},getKeys:function(_34b){_34b=_34b||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_34b);_34b="__"+_34b+"_";var keys=[];for(var i=0;i<this.store.length;i++){var _34c=this.store.key(i);if(this._beginsWith(_34c,_34b)){_34c=_34c.substring(_34b.length);keys.push(_34c);}}return keys;},clear:function(_34d){_34d=_34d||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_34d);_34d="__"+_34d+"_";var keys=[];for(var i=0;i<this.store.length;i++){if(this._beginsWith(this.store.key(i),_34d)){keys.push(this.store.key(i));}}dojo.forEach(keys,dojo.hitch(this.store,"removeItem"));},remove:function(key,_34e){_34e=_34e||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_34e);this.store.removeItem(this.getFullKey(key,_34e));},getNamespaces:function(){var _34f=[this.DEFAULT_NAMESPACE];var _350={};_350[this.DEFAULT_NAMESPACE]=true;var _351=/^__([^_]*)_/;for(var i=0;i<this.store.length;i++){var _352=this.store.key(i);if(_351.test(_352)==true){var _353=_352.match(_351)[1];if(typeof _350[_353]=="undefined"){_350[_353]=true;_34f.push(_353);}}}return _34f;},isPermanent:function(){return true;},getMaximumSize:function(){return _345.storage.SIZE_NO_LIMIT;},hasSettingsUI:function(){return false;},isValidKey:function(_354){if(_354===null||_354===undefined){return false;}return /^[0-9A-Za-z_-]*$/.test(_354);},isValidNamespace:function(_355){if(_355===null||_355===undefined){return false;}return /^[0-9A-Za-z-]*$/.test(_355);},getFullKey:function(key,_356){return "__"+_356+"_"+key;},_beginsWith:function(_357,_358){if(_358.length>_357.length){return false;}return _357.substring(0,_358.length)===_358;},_assertIsValidNamespace:function(_359){if(this.isValidNamespace(_359)===false){throw new Error("Invalid namespace given: "+_359);}},_assertIsValidKey:function(key){if(this.isValidKey(key)===false){throw new Error("Invalid key given: "+key);}}});_345.storage.manager.register("dojox.storage.LocalStorageProvider",new _345.storage.LocalStorageProvider());});},"dojox/storage/GearsStorageProvider":function(){define(["dijit","dojo","dojox","dojo/require!dojo/gears,dojox/storage/Provider,dojox/storage/manager,dojox/sql"],function(_35a,dojo,_35b){dojo.provide("dojox.storage.GearsStorageProvider");dojo.require("dojo.gears");dojo.require("dojox.storage.Provider");dojo.require("dojox.storage.manager");dojo.require("dojox.sql");if(dojo.gears.available){(function(){dojo.declare("dojox.storage.GearsStorageProvider",_35b.storage.Provider,{constructor:function(){},TABLE_NAME:"__DOJO_STORAGE",initialized:false,_available:null,_storageReady:false,initialize:function(){if(dojo.config["disableGearsStorage"]==true){return;}this.TABLE_NAME="__DOJO_STORAGE";this.initialized=true;_35b.storage.manager.loaded();},isAvailable:function(){return this._available=dojo.gears.available;},put:function(key,_35c,_35d,_35e){this._initStorage();if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}_35e=_35e||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_35e)){throw new Error("Invalid namespace given: "+key);}if(dojo.isString(_35c)){_35c="string:"+_35c;}else{_35c=dojo.toJson(_35c);}try{_35b.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND key = ?",_35e,key);_35b.sql("INSERT INTO "+this.TABLE_NAME+" VALUES (?, ?, ?)",_35e,key,_35c);}catch(e){_35d(this.FAILED,key,e.toString(),_35e);return;}if(_35d){_35d(_35b.storage.SUCCESS,key,null,_35e);}},get:function(key,_35f){this._initStorage();if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}_35f=_35f||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_35f)){throw new Error("Invalid namespace given: "+key);}var _360=_35b.sql("SELECT * FROM "+this.TABLE_NAME+" WHERE namespace = ? AND "+" key = ?",_35f,key);if(!_360.length){return null;}else{_360=_360[0].value;}if(dojo.isString(_360)&&(/^string:/.test(_360))){_360=_360.substring("string:".length);}else{_360=dojo.fromJson(_360);}return _360;},getNamespaces:function(){this._initStorage();var _361=[_35b.storage.DEFAULT_NAMESPACE];var rs=_35b.sql("SELECT namespace FROM "+this.TABLE_NAME+" DESC GROUP BY namespace");for(var i=0;i<rs.length;i++){if(rs[i].namespace!=_35b.storage.DEFAULT_NAMESPACE){_361.push(rs[i].namespace);}}return _361;},getKeys:function(_362){this._initStorage();_362=_362||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_362)){throw new Error("Invalid namespace given: "+_362);}var rs=_35b.sql("SELECT key FROM "+this.TABLE_NAME+" WHERE namespace = ?",_362);var _363=[];for(var i=0;i<rs.length;i++){_363.push(rs[i].key);}return _363;},clear:function(_364){this._initStorage();_364=_364||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_364)){throw new Error("Invalid namespace given: "+_364);}_35b.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ?",_364);},remove:function(key,_365){this._initStorage();if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}_365=_365||this.DEFAULT_NAMESPACE;if(!this.isValidKey(_365)){throw new Error("Invalid namespace given: "+key);}_35b.sql("DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND"+" key = ?",_365,key);},putMultiple:function(keys,_366,_367,_368){this._initStorage();if(!this.isValidKeyArray(keys)||!_366 instanceof Array||keys.length!=_366.length){throw new Error("Invalid arguments: keys = ["+keys+"], values = ["+_366+"]");}if(_368==null||typeof _368=="undefined"){_368=_35b.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_368)){throw new Error("Invalid namespace given: "+_368);}this._statusHandler=_367;try{_35b.sql.open();_35b.sql.db.execute("BEGIN TRANSACTION");var _369="REPLACE INTO "+this.TABLE_NAME+" VALUES (?, ?, ?)";for(var i=0;i<keys.length;i++){var _36a=_366[i];if(dojo.isString(_36a)){_36a="string:"+_36a;}else{_36a=dojo.toJson(_36a);}_35b.sql.db.execute(_369,[_368,keys[i],_36a]);}_35b.sql.db.execute("COMMIT TRANSACTION");_35b.sql.close();}catch(e){if(_367){_367(this.FAILED,keys,e.toString(),_368);}return;}if(_367){_367(_35b.storage.SUCCESS,keys,null,_368);}},getMultiple:function(keys,_36b){this._initStorage();if(!this.isValidKeyArray(keys)){throw new ("Invalid key array given: "+keys);}if(_36b==null||typeof _36b=="undefined"){_36b=_35b.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_36b)){throw new Error("Invalid namespace given: "+_36b);}var _36c="SELECT * FROM "+this.TABLE_NAME+" WHERE namespace = ? AND "+" key = ?";var _36d=[];for(var i=0;i<keys.length;i++){var _36e=_35b.sql(_36c,_36b,keys[i]);if(!_36e.length){_36d[i]=null;}else{_36e=_36e[0].value;if(dojo.isString(_36e)&&(/^string:/.test(_36e))){_36d[i]=_36e.substring("string:".length);}else{_36d[i]=dojo.fromJson(_36e);}}}return _36d;},removeMultiple:function(keys,_36f){this._initStorage();if(!this.isValidKeyArray(keys)){throw new Error("Invalid arguments: keys = ["+keys+"]");}if(_36f==null||typeof _36f=="undefined"){_36f=_35b.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_36f)){throw new Error("Invalid namespace given: "+_36f);}_35b.sql.open();_35b.sql.db.execute("BEGIN TRANSACTION");var _370="DELETE FROM "+this.TABLE_NAME+" WHERE namespace = ? AND key = ?";for(var i=0;i<keys.length;i++){_35b.sql.db.execute(_370,[_36f,keys[i]]);}_35b.sql.db.execute("COMMIT TRANSACTION");_35b.sql.close();},isPermanent:function(){return true;},getMaximumSize:function(){return this.SIZE_NO_LIMIT;},hasSettingsUI:function(){return false;},showSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},hideSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface");},_initStorage:function(){if(this._storageReady){return;}if(!google.gears.factory.hasPermission){var _371=null;var icon=null;var msg="This site would like to use Google Gears to enable "+"enhanced functionality.";var _372=google.gears.factory.getPermission(_371,icon,msg);if(!_372){throw new Error("You must give permission to use Gears in order to "+"store data");}}try{_35b.sql("CREATE TABLE IF NOT EXISTS "+this.TABLE_NAME+"( "+" namespace TEXT, "+" key TEXT, "+" value TEXT "+")");_35b.sql("CREATE UNIQUE INDEX IF NOT EXISTS namespace_key_index"+" ON "+this.TABLE_NAME+" (namespace, key)");}catch(e){throw new Error("Unable to create storage tables for Gears in "+"Dojo Storage");}this._storageReady=true;}});_35b.storage.manager.register("dojox.storage.GearsStorageProvider",new _35b.storage.GearsStorageProvider());})();}});},"esriviewer/ui/draw/base/model/UserPersistedGraphicsListViewModel":function(){define(["dojo/_base/declare","dojo/Evented"],function(_373,_374){return _373([_374],{REMOVE_USER_PERSISTED_GRAPHICS:"removeUserPersistedGraphic",ADD_USER_PERSISTED_GRAPHICS_TO_MAP:"addUserPersistedGraphicsToMap",constructor:function(){var self=this;this.addedUserPersistedGraphics=ko.observableArray();this.removeUserPersistedGraphic=function(_375){if(_375==null){return;}self.emit(self.REMOVE_USER_PERSISTED_GRAPHICS,_375);self.addedUserPersistedGraphics.remove(_375);};this.addSavedGraphics=function(_376){if(_376==null){return;}self.emit(self.ADD_USER_PERSISTED_GRAPHICS_TO_MAP,_376);};},sort:function(){this.addedUserPersistedGraphics.sort(function(left,_377){var _378=left.label.toLowerCase();var _379=_377.label.toLowerCase();return _378==_379?0:(_378<_379?-1:1);});}});});},"esriviewer/base/ViewerGlobals":function(){define(["dojo/_base/declare"],function(_37a){return _37a([],{EVENTS:{CSS:{CORE_UI_THEME_LOADED:"css:coreUILoaded"},MAP:{GET_MAP_DIV:"map:getMapDiv",GET:"map:get",INFO_WINDOW:{HIDE:"mapInfoWin:hide"},LEGEND:{CREATE:"legend:create"},RESIZE:"map:resize",LOADED:"map:loaded",ACTIONS:{TOOL_CHANGED:"MapMan:tlChngd"},FLASH:{POINT:"mapFlash:point"},LAYERS:{TRANSPARENCY:{WINDOW:{SHOW:"layerTransWindow:show",HIDE:"layerTransWindow:hide",TOGGLE:"layerTransWindow:toggle"},SET:"layerTrans:setTransparency"},WIDGET:{SHOW:"layersWidget:show"},OPERATIONAL:{GET:"operationalLayers:get"},ADD_GRAPHICS_LAYER:"layers:addGraphicsLayer",ADD_FROM_URL:"layers:addFromUrl",ADD:"layers:add",REMOVE:"layers:remove",REMOVED:"layers:removed",ADDED:"layers:added",ADD_REFERENCE_LAYER:"reference:addLayer",REMOVE_REFERENCE_LAYER:"reference:removeLayer",REFERENCE_LAYER_ADDED:"reference:added",REFERENCE_LAYER_REMOVED:"reference:removed",ADD_EXTERNAL_MANAGED_LAYER:"layers:addExternalManagedLayer",REMOVE_EXTERNAL_MANAGED_LAYER:"layers:removeExternalManagedLayer",GET_FEATURE_LAYER_IF_EXISTS:"layers:getFeatureLayerIfExists",MOVE_LAYER_TO_TOP:"layers:moveLayerToTop",QUERY_LAYER:"layers:queryLayer",MAKE_VISIBLE:"layers:makeLayerVisible",MAKE_INVISIBLE:"layers:makeLayerInvisible",GET_MIN_MAX_FOR_FIELD:"layers:getMinMax",GET_DISTINCT_FIELD_VALUES:"layers:getDistinctFieldValues",CLEAR_STORED_LAYERS:"layers:clearStoredLayers"},TOOLS:{DRAW_POINT:"tldr:dPt",DRAW_POLYGON:"tldr:dPoly",DRAW_RECTANGLE:"tldr:dRect",DRAW_FREEHAND_POLYGON:"tldr:dFPoly",DRAW_FREEHAND_LINE:"tldr:dFln",DRAW_LINE:"tldr:dLn",DRAW_POLYLINE:"tldr:dPLn",DRAW_TEXT:"tldr:dTx"},GRAPHICS:{ADD:"mapGraphics:add",REMOVE:"mapGraphics:remove",CENTER_AND_FLASH:"mapGraphics:centerAndFlash",CENTER_ON_MAP:"mapGraphics:centerOnMap"},BASEMAP:{SET:"map:setBasemap",GET_CURRENT:"map:getCurrentBasemap",GET_CURRENT_URL:"map:getCurrentBasemapUrl",ADD:"map:addBasemap",ADDED:"map:basemapAdded",REMOVE:"map:removeBasemap",REMOVED:"map:basemapRemoved",GALLERY:{TOGGLE:"map:basemapGalleryToggle",HIDE:"map:basemapGalleryHide",SHOW:"map:basemapGalleryShow",IS_HIDDEN:"map:basemapGalleryIsHidden",GET:"map:basemapGalleryGet"},CHANGED:"map:basemapChanged"},EXTENT:{GET_SPATIAL_REFERENCE:"extent:getSpatialReference",GET_EXTENT:"extent:getExtent",GET_CENTER:"extent:getCenter",GET_LEVEL:"extent:getLevel",SET_LEVEL:"extent:setLevel",PAN_TO:"extent:panTo",SET_EXTENT:"extent:setExtent",CHANGED:"extent:changed",GO_PREV_EXTENT:"extent:prevExtent",GO_NEXT_EXTENT:"extent:nextExtent",GO_INITIAL_EXTENT:"extent:initialExtent",GO_LAST_EXTENT:"extent:lastExtent",PREV_EXTENT_EXISTS:"extent:prevExtentExists",NEXT_EXTENT_EXISTS:"extent:nextExtentExists",ZOOM_OUT:"extent:zoomOut",ZOOM_TO_LAYER:"extent:zoomToLayer"},LEVEL:{CHANGED:"zoomLevel:changed",GET_LEVEL_COUNT:"zoomLevel:getCount",LEVEL_COUNT_CHANGED:"zoomLevel:lvlCountChanged"},LABEL_SERVICES:{SHOW:"lblServices:show",HIDE:"lblServices:hide",SERVICE_EXISTS:"lblServices:exist"},DIMENSIONS:{GET:"dimensions:get"},TIME:{TIME_LAYER_FOUND:"time:timeLayerFound",GET_TIME_ENABLED_SERVICES:"time:getTimeEnabledServices",SHOW_TIME_SLIDER:"time:showTimeSlider",TOGGLE_TIME_SLIDER:"time:toggleTimeSlider",MAP_TIME_EXTENT_CLEARED:"map:timeExtentCleared",CLEAR_TIME_EXTENT:"time:clearTimeExtent",SET_MAP_TIME_SLIDER:"time:setMapTimeSlider",MAP_TIME_EXTENT_SET:"time:mapTimeExtentSet",MAP_TIME_CHANGED:"time:mapTimeChanged"}},IDENTITY_MANAGER:{GET_TOKEN:"identityManager:getToken"},PORTAL:{INITIALIZED:"portal:initialized",USER_LOGGED_OUT:"portal:userLoggedOut",USER_LOGGED_IN:"portal:userLoggedIn",IS_USER_LOGGED_IN:"portal:isUserLoggedIn",LOG_IN:"portal:logIn",LOG_OUT:"portal:logOut",SEARCH_WEBMAPS:"portal:searchWebmaps",SEARCH_FEATURE_SERVICES:"portal:searchFeatureServices",SEARCH_MAP_SERVICES:"portal:searchMapServices",SEARCH_IMAGE_SERVICES:"portal:searchImageServices",SEARCH_FEATURE_SERVICE_LAYERS:"portal:searchFeatureServiceLayers",SEARCH_GEOCODE_SERVICES:"portal:searchGeocodeServices",GET_INSTANCE:"portal:getInstance",GET_BASEMAPS:"portal:getBasemaps"},TOOLS:{ACCORDION:{TOGGLE:"accordion:toggle",SHOW:"accordion:show",HIDE:"accordion:hide",ADD_ITEM:"accordion:addItem",LOAD_DEFAULT_TOOLS:"accordion:loadDefaultTools",HIDE_COMPLETE:"accordion:hideComplete",SHOW_ITEM:"accordion:showItem"},MENU:{ADD_TOOL:"toolMenu:addTool",HIDE_TOOLS_BUTTON:"toolMenu:hideToolsButton",SHOW_TOOLS_BUTTON:"toolMenu:showToolsButton",HIDE_LAYERS_BUTTON:"toolMenu:hideLayersButton",SHOW_LAYERS_BUTTON:"toolMenu:showLayersButton"}},QUERY_BUILDER:{SET_IMAGE_SERVICE_LAYER:"queryBuilder:setImgSrvLyr",SET_MAP_SERVICE_LAYER:"queryBuilder:setMapServiceLayer",SET_FEATURE_SERVICE_LAYER:"queryBuilder:setFeatureServiceLayer"},WINDOW:{REPOSITION_ALL:"window:repositionAll",SOCIAL_MEDIA:{SHOW:"socialMedia:show",HIDE:"socialMedia:hide",TOGGLE:"socialMedia:toggle"},POINT_UPLOAD:{SHOW:"ptUploadWindow:show",HIDE:"ptUploadWindow:hide",TOGGLE:"ptUploadWindow:toggle"},WEATHER:{SHOW:"weatherWindow:show",HIDE:"weatherWindow:hide",TOGGLE:"weatherWindow:toggle"},DRAW:{SHOW:"drawWindow:show",HIDE:"drawWindow:hide",TOGGLE:"drawWindow:toggle"},LEGEND:{SHOW:"legendWindow:show",HIDE:"legendWindow:hide"},QUERY_BUILDER:{SHOW:"queryBuilder:show",HIDE:"queryBuilder:hide",TOGGLE:"queryBuilder:toggle"},FEATURE_EDITOR:{SHOW:"featureEditor:show",HIDE:"featureEditor:hide",TOGGLE:"featureEditor:toggle"},MEASURE:{SHOW:"measureWindow:show",HIDE:"measureWindow:hide",TOGGLE:"measureWindow:toggle"},IDENTIFY:{SHOW:"identifyWindow:show",HIDE:"identifyWindow:hide",TOGGLE:"identifyWindow:toggle"},REVERSE_GEOCODE:{SHOW:"reverseGeocodeWindow:show",HIDE:"reverseGeocodeWindow:hide",TOGGLE:"reverseGeocodeWindow:toggle"},PORTAL_PUBLISH:{SHOW:"portalPublish:show",HIDE:"portalPublish:hide",TOGGLE:"portalPublish:toggle"},PORTAL_SEARCH:{SHOW:"portalSearch:show",HIDE:"portalSearch:hide",TOGGLE:"portalSearch:toggle"},ZOOM_TO:{SHOW:"zoomTo:show",HIDE:"zoomTo:hide",TOGGLE:"zoomTo:toggle"},REFLECTIVITY:{SHOW:"reflect:show",HIDE:"reflect:hide",TOGGLE:"reflect:toggle"},PRINT:{SHOW:"print:show",HIDE:"print:hide",TOGGLE:"print:toggle"},PLOTTING:{SHOW:"plotting:show",HIDE:"plotting:hide",TOGGLE:"plotting:toggle"}},DRAW:{CLEAR_STORED_GRAPHICS:"draw:clearStrdGraph",USER:{LINE_INPUT:"draw:usrLnIn",POINT_INPUT:"draw:usrPointIn",POLYGON_INPUT:"draw:usrPolyIn",POLYLINE_INPUT:"draw:usrPLnIn",RECTANGLE_INPUT:"draw:usrRectIn",DRAW_CANCEL:"draw:usrDrawCncl",FREEHAND_POLYLINE_INPUT:"draw:usrFrLnIn",FREEHAND_POLYGON_INPUT:"draw:usrFrPolyIn",GET_USER_GRAPHICS:"draw:usrGGraphics"},SYMBOLOGY:{SET_POLYGON:"drawSym:setPolygon",SET_POINT:"drawSym:setPoint",SET_LINE:"drawSym:setLine",SET_ENVELOPE:"drawSym:setEnvelope",SET_TEXT:"drawSym:setText"},DRAW_GRAPHICS_LAYER_CREATED:"draw:drawGraphicsLayerCreated",DRAW_STARTED:"draw:started",DRAW_COMPLETE:"draw:complete",DRAW_CANCELLED:"draw:cancelled"},NAVIGATION:{DISABLE:"nav:disable",DISABLE_TOOLBAR:"nav:disableToolbar",ENABLE_TOOLBAR:"nav:enableToolbar",PAN:"nav:pan",ZOOM_IN:"nav:zoomIn",ZOOM_OUT:"nav:zoomOut"},LOCATOR:{REVERSE_GEOCODE:"locator:reverseGeocode",SINGLE_LINE_ADDRESS_TO_LOCATION:"locator:addressToLocation",LOCATOR_REQUEST_COMPLETE:"locator:locatorRequestComplete",LOCATOR_REQUEST_ERROR:"locator:locatorRequestError",ADD_LOCATOR:"locator:addLocator",GET_LOCATORS:"locator:getLocators",LOCATOR_ADDED:"locator:locatorAdded",REMOVE_LOCATOR:"locator:remove",LOCATOR_REMOVED:"locator:removed"},BOOKMARK:{STORAGE:{GET:"bookmark:getBookmarks"},CREATE_WINDOW:{SHOW:"bookmark:show",HIDE:"bookmark:hide"},REMOVED:"bookmark:removed",CREATED:"bookmark:created",DELETE_STORED:"bookmark:deleteStored"},CONFIGURE:{WINDOW:{SHOW:"configureWindow:show",HIDE:"configureWindow:hide"}},THROBBER:{SHOW:"throbber:show",HIDE:"throbber:hide",BLOCK_HIDE:"throbber:blockHide",RELEASE_HIDE_BLOCK:"throbber:unblockHide",DISABLE:"throbber:disable",ENABLE:"throbber:enable"},TOOLTIP:{CREATE_CONFIRM:"tooltip:createConfirm"},MESSAGING:{SHOW:"messaging:show",HIDE:"messaging:hide"},GEOMETRY_SERVICE:{EXISTS:"geometryService:exists",TASKS:{PROJECT_TO_MAP_SR:"geometry:project",CALCULATE_AREA:"geometry:calculateArea",CALCULATE_DISTANCE:"geometry:calculateDistance",PROJECT_TO_LAT_LON:"geometry:projectToLatLon"},BUFFER_POINT:"geometryService:bufferPoint",BUFFER:"geometryService:buffer",MGRS_TO_LAT_LON:"geometryService:mrgsToLatLon",CONTROLLER_CREATED:"geometryService:controllerCreated",GET:"geometryService:get"},LOGGING:{ADD:"logging:add",CLEAR:"logging:clear",WINDOW:{SHOW:"logging:windowShow",HIDE:"logging:windowHide",TOGGLE:"logging:windowToggle"}},FOOTER:{TOGGLE:"footer:toggle",COLLAPSE:"footer:collapse",EXPAND:"footer:expand",COLLAPSED:"footer:collapsed",EXPANDED:"footer:expanded",IS_EXPANDED:"footer:isExpanded"},CONFIGURATION:{GET:"config:get",GET_ENTRY:"config:getEntry"},PLACEMENT:{GLOBAL:{PLACE:{NAVIGATION_TOOLBAR:"place:navTool",HEADER:"place:header",VIEWER_ACCORDION:"place:vAccor",MAIN_TOOLBAR:"place:mTbar",MAIN_TOOLBAR_DROP_DOWN:"place:mTbardd",FOOTER:"place:ftr",MESSAGING:"place:msging",THROBBER:"place:throbber",BASEMAP_GALLERY:"place:basemapGallery",MAP_SCALE_AND_COORDINATES:"place:mSACoords",CREATE_BOOOKMARK:"place:createBmrk",MENU_BAR:"place:menuBar",USER_LOCATION:"place:usrLoc"}}}},STORAGE:{LABELS:{BOOKMARKS:"bookmarks",USER_GRAPHICS:"userGraphics","BASEMAPS":"basemaps","LOCATORS":"locators","REFERENCE_LAYERS":"referenceLayers","LAYERS":"userLayers"}},SERVICE_TYPES:{GEOMETRY_SERVER:"GeometryServer",GLOBE_SERVER:"GlobeServer",GP_SERVER:"GPServer",GP_TASK:"GPTask",IMAGE_SERVER:"ImageServer",MAP_SERVER:"MapServer",WEB_MAP:"WebMap",PORTAL_SERVER:"PortalServer",GEOCODE_SERVER:"GeocodeServer",FEATURE_LAYER:"FeatureLayer",FEATURE_SERVER:"FeatureServer",KML:"KMLLayer",OPEN_STREET_MAP:"OpenStreetMap",WMS_LAYER:"WMSLayer"},LAYER_TYPES:{IMAGE_SERVER:{LABEL:"Image Service",VALUE:"ImageServer"},MAP_SERVER:{LABEL:"Map Service",VALUE:"MapServer"},FEATURE_LAYER:{LABEL:"Feature Layer",VALUE:"FeatureLayer"},KML:{LABEL:"KML Layer",VALUE:"KMLLayer"}},LOG_TYPE:{WARNING:"warning",ERROR:"error",INFO:"info"},ESRI_FIELD_TYPES:{DATE:"esriFieldTypeDate",DOUBLE:"esriFieldTypeDouble",STRING:"esriFieldTypeString",INTEGER:"esriFieldTypeInteger",SMALL_INTEGER:"esriFieldTypeSmallInteger",GEOMETRY:"esriFieldTypeGeometry",OBJECT_ID:"esriFieldTypeOID",GUID:"esriFieldTypeGUID",GLOBAL_ID:"esriFieldTypeGlobalID"},ESRI_GEOMETRY_TYPES:{POINT:"esriGeometryPoint",LINE:"esriGeometryPolyline",POLYGON:"esriGeometryPolygon",ENVELOPE:"esriGeometryEnvelope"},ESRI_LAYER_TYPES:{FEATURE_LAYER:"Feature Layer",RASTER:"Raster Layer"},ESRI_LAYER_DECLARED_CLASSES:{GRAPHICS_LAYER:"esri.layers.GraphicsLayer",FEATURE_LAYER:"esri.layers.FeatureLayer",TILED_MAP_SERVICE:"esri.layers.ArcGISTiledMapServiceLayer",DYNAMIC_MAP_SERVICE:"esri.layers.ArcGISDynamicMapServiceLayer",IMAGE_SERVICE:"esri.layers.ArcGISImageServiceLayer"},ESRI_UNITS:{ACRES:"esriAcres",METERS:"esriMeters",FEET:"esriFeet",YARDS:"esriYards",MILES:"esriMiles",NAUTICAL_MILES:"esriNauticalMiles",MILLIMETERS:"esriMillimeters",CENTIMETERS:"esriCentimeters",DECIMETERS:"esriDecimeters",KILOMETERS:"esriKilometers",SQUARE_MILES:"esriSquareMiles",SQUARE_METERS:"esriSquareMeters",SQUARE_KILOMETERS:"esriSquareKilometers",SQUARE_ARES:"esriAres",SQUARE_HECTARES:"esriHectares",SQUARE_CENTIMETERS:"esriSquareCentimeters",SQUARE_DECIMETERS:"esriSquareDecimeters",SQUARE_FEET:"esriSquareFeet",SQUARE_INCHES:"esriSquareInches",SQUARE_MILLIMETERS:"esriSquareMillimeters",SQUARE_YARDS:"esriSquareYards",SQUARE_UNKNOWN:"esriUnknownAreaUnits",DECIMAL_DEGREES:"esriDUDecimalDegrees",DEGREE_MINUTE_SECONDS:"esriDegreeMinuteSeconds"},AGS_PORTAL_TYPES:{GEOPROCESSING_SERVICE:"Geoprocessing Service",MAP_SERVICE:"Map Service",WEB_MAP:"Web Map",MAPPING_APPLICATION:"Web Mapping Application",FEATURE_SERVICE:"Feature Service",FEATURE_SERVICE_LAYER:"Feature Service Layer",GEOCODE_SERVICE:"Geocoding Service",DESKTOP_TEMPLATE:"Desktop Application Template",FEATURE_COLLECTION_TEMPLATE:"Feature Collection Template",FEATURED_ITEMS:"Featured Items",LAYER_PACKAGE:"Layer Package",IMAGE_SERVICE:"Image Service",GRAPHICS_LAYER:"Graphics Layer",UNKNOWN:"Unknown",OPEN_STREET_MAPS:"OpenStreetMap"},DEFAULT_PORTAL_ENDPOINTS:{SEARCH_URL_PART:"/sharing/search",VIEWER_URL_PART:"home/webmap/viewer.html",CONTENT_URL_PART:"sharing/content",ITEMS_URL_PART:"sharing/content/items",DEFAULT_MAX_RESULTS:15,USER_CONTENT_PREPEND:"sharing/content/users/",USER_GROUPS_PREPEND:"/sharing/community/users",USER_SHARE_APPEND:"/shareItems",ADD_ITEM_PART_APPEND:"/addItem",PRINT_SERVICE_APPEND:"sharing/tools/print",GENERATE_TOKEN_APPEND:"/sharing/generateToken",PORTAL_VALIDATOR_ENDPOINT:"sharing",DATA_APPEND:"data"},ESRI_RENDERER_TYPES:{SIMPLE:"simple",UNIQUE_VALUE:"uniqueValue",CLASS_BREAKS:"classBreaks"},WINDOW:{TOP_POSITION_MOVE_OFFSET:30},VIEWER_MODES:{SIDEBAR:"sidebar",WINDOW:"window",MOBILE:"mobile"},GP_PARAMETER_DIRECTION:{INPUT:"esriGPParameterDirectionInput",OUTPUT:"esriGPParameterDirectionOutput"},GP_MESSAGE_TYPES:{INFO:["esriJobMessageTypeInformative","esriGPMessageTypeInformative"],WARNING:["esriJobMessageTypeWarning","esriGPMessageTypeWarning"],ERROR:["esriJobMessageTypeAbort","esriGPMessageTypeError","esriJobMessageTypeError","esriGPMessageTypeAbort"]},ANIMATIONS:{LIGHT_SPEED:{OUT:"lightSpeedOut animated",IN:"lightSpeedIn animated",DURATION:300},BOUNCE:{IN:"bounceIn animated",IN_DOWN:"bounceInDown animated",IN_RIGHT:"bounceInRight animated",IN_LEFT:"bounceInLeft animated"},FADE:{IN:"fadeIn animated",OUT:"fadeOut animated",IN_DOWN:"fadeInDown animated"},ROTATE:{IN:"rotateIn animated",OUT:"rotateOut animated"}},MIME_TYPES:{TEXT_PLAIN:"text/plain",EXCEL_VND:"application/vnd.ms-excel"},DEFAULT_REVERSE_GEOCODE_DISTANCE:50,PORTAL_SHARING_REST_URL_PART:"/sharing/rest",REFLECTIVITY_HELP_URL:"http://mesonet.agron.iastate.edu/GIS/radview.phtml"});});},"dojo/data/ItemFileWriteStore":function(){define(["../_base/lang","../_base/declare","../_base/array","../_base/json","../_base/kernel","./ItemFileReadStore","../date/stamp"],function(lang,_37b,_37c,_37d,_37e,_37f,_380){return _37b("dojo.data.ItemFileWriteStore",_37f,{constructor:function(_381){this._features["dojo.data.api.Write"]=true;this._features["dojo.data.api.Notification"]=true;this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};if(!this._datatypeMap["Date"].serialize){this._datatypeMap["Date"].serialize=function(obj){return _380.toISOString(obj,{zulu:true});};}if(_381&&(_381.referenceIntegrity===false)){this.referenceIntegrity=false;}this._saveInProgress=false;},referenceIntegrity:true,_assert:function(_382){if(!_382){throw new Error("assertion failed in ItemFileWriteStore");}},_getIdentifierAttribute:function(){return this.getFeatures()["dojo.data.api.Identity"];},newItem:function(_383,_384){this._assert(!this._saveInProgress);if(!this._loadFinished){this._forceLoad();}if(typeof _383!="object"&&typeof _383!="undefined"){throw new Error("newItem() was passed something other than an object");}var _385=null;var _386=this._getIdentifierAttribute();if(_386===Number){_385=this._arrayOfAllItems.length;}else{_385=_383[_386];if(typeof _385==="undefined"){throw new Error("newItem() was not passed an identity for the new item");}if(lang.isArray(_385)){throw new Error("newItem() was not passed an single-valued identity");}}if(this._itemsByIdentity){this._assert(typeof this._itemsByIdentity[_385]==="undefined");}this._assert(typeof this._pending._newItems[_385]==="undefined");this._assert(typeof this._pending._deletedItems[_385]==="undefined");var _387={};_387[this._storeRefPropName]=this;_387[this._itemNumPropName]=this._arrayOfAllItems.length;if(this._itemsByIdentity){this._itemsByIdentity[_385]=_387;_387[_386]=[_385];}this._arrayOfAllItems.push(_387);var _388=null;if(_384&&_384.parent&&_384.attribute){_388={item:_384.parent,attribute:_384.attribute,oldValue:undefined};var _389=this.getValues(_384.parent,_384.attribute);if(_389&&_389.length>0){var _38a=_389.slice(0,_389.length);if(_389.length===1){_388.oldValue=_389[0];}else{_388.oldValue=_389.slice(0,_389.length);}_38a.push(_387);this._setValueOrValues(_384.parent,_384.attribute,_38a,false);_388.newValue=this.getValues(_384.parent,_384.attribute);}else{this._setValueOrValues(_384.parent,_384.attribute,_387,false);_388.newValue=_387;}}else{_387[this._rootItemPropName]=true;this._arrayOfTopLevelItems.push(_387);}this._pending._newItems[_385]=_387;for(var key in _383){if(key===this._storeRefPropName||key===this._itemNumPropName){throw new Error("encountered bug in ItemFileWriteStore.newItem");}var _38b=_383[key];if(!lang.isArray(_38b)){_38b=[_38b];}_387[key]=_38b;if(this.referenceIntegrity){for(var i=0;i<_38b.length;i++){var val=_38b[i];if(this.isItem(val)){this._addReferenceToMap(val,_387,key);}}}}this.onNew(_387,_388);return _387;},_removeArrayElement:function(_38c,_38d){var _38e=_37c.indexOf(_38c,_38d);if(_38e!=-1){_38c.splice(_38e,1);return true;}return false;},deleteItem:function(item){this._assert(!this._saveInProgress);this._assertIsItem(item);var _38f=item[this._itemNumPropName];var _390=this.getIdentity(item);if(this.referenceIntegrity){var _391=this.getAttributes(item);if(item[this._reverseRefMap]){item["backup_"+this._reverseRefMap]=lang.clone(item[this._reverseRefMap]);}_37c.forEach(_391,function(_392){_37c.forEach(this.getValues(item,_392),function(_393){if(this.isItem(_393)){if(!item["backupRefs_"+this._reverseRefMap]){item["backupRefs_"+this._reverseRefMap]=[];}item["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(_393),attr:_392});this._removeReferenceFromMap(_393,item,_392);}},this);},this);var _394=item[this._reverseRefMap];if(_394){for(var _395 in _394){var _396=null;if(this._itemsByIdentity){_396=this._itemsByIdentity[_395];}else{_396=this._arrayOfAllItems[_395];}if(_396){for(var _397 in _394[_395]){var _398=this.getValues(_396,_397)||[];var _399=_37c.filter(_398,function(_39a){return !(this.isItem(_39a)&&this.getIdentity(_39a)==_390);},this);this._removeReferenceFromMap(item,_396,_397);if(_399.length<_398.length){this._setValueOrValues(_396,_397,_399,true);}}}}}}this._arrayOfAllItems[_38f]=null;item[this._storeRefPropName]=null;if(this._itemsByIdentity){delete this._itemsByIdentity[_390];}this._pending._deletedItems[_390]=item;if(item[this._rootItemPropName]){this._removeArrayElement(this._arrayOfTopLevelItems,item);}this.onDelete(item);return true;},setValue:function(item,_39b,_39c){return this._setValueOrValues(item,_39b,_39c,true);},setValues:function(item,_39d,_39e){return this._setValueOrValues(item,_39d,_39e,true);},unsetAttribute:function(item,_39f){return this._setValueOrValues(item,_39f,[],true);},_setValueOrValues:function(item,_3a0,_3a1,_3a2){this._assert(!this._saveInProgress);this._assertIsItem(item);this._assert(lang.isString(_3a0));this._assert(typeof _3a1!=="undefined");var _3a3=this._getIdentifierAttribute();if(_3a0==_3a3){throw new Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");}var _3a4=this._getValueOrValues(item,_3a0);var _3a5=this.getIdentity(item);if(!this._pending._modifiedItems[_3a5]){var _3a6={};for(var key in item){if((key===this._storeRefPropName)||(key===this._itemNumPropName)||(key===this._rootItemPropName)){_3a6[key]=item[key];}else{if(key===this._reverseRefMap){_3a6[key]=lang.clone(item[key]);}else{_3a6[key]=item[key].slice(0,item[key].length);}}}this._pending._modifiedItems[_3a5]=_3a6;}var _3a7=false;if(lang.isArray(_3a1)&&_3a1.length===0){_3a7=delete item[_3a0];_3a1=undefined;if(this.referenceIntegrity&&_3a4){var _3a8=_3a4;if(!lang.isArray(_3a8)){_3a8=[_3a8];}for(var i=0;i<_3a8.length;i++){var _3a9=_3a8[i];if(this.isItem(_3a9)){this._removeReferenceFromMap(_3a9,item,_3a0);}}}}else{var _3aa;if(lang.isArray(_3a1)){_3aa=_3a1.slice(0,_3a1.length);}else{_3aa=[_3a1];}if(this.referenceIntegrity){if(_3a4){var _3a8=_3a4;if(!lang.isArray(_3a8)){_3a8=[_3a8];}var map={};_37c.forEach(_3a8,function(_3ab){if(this.isItem(_3ab)){var id=this.getIdentity(_3ab);map[id.toString()]=true;}},this);_37c.forEach(_3aa,function(_3ac){if(this.isItem(_3ac)){var id=this.getIdentity(_3ac);if(map[id.toString()]){delete map[id.toString()];}else{this._addReferenceToMap(_3ac,item,_3a0);}}},this);for(var rId in map){var _3ad;if(this._itemsByIdentity){_3ad=this._itemsByIdentity[rId];}else{_3ad=this._arrayOfAllItems[rId];}this._removeReferenceFromMap(_3ad,item,_3a0);}}else{for(var i=0;i<_3aa.length;i++){var _3a9=_3aa[i];if(this.isItem(_3a9)){this._addReferenceToMap(_3a9,item,_3a0);}}}}item[_3a0]=_3aa;_3a7=true;}if(_3a2){this.onSet(item,_3a0,_3a4,_3a1);}return _3a7;},_addReferenceToMap:function(_3ae,_3af,_3b0){var _3b1=this.getIdentity(_3af);var _3b2=_3ae[this._reverseRefMap];if(!_3b2){_3b2=_3ae[this._reverseRefMap]={};}var _3b3=_3b2[_3b1];if(!_3b3){_3b3=_3b2[_3b1]={};}_3b3[_3b0]=true;},_removeReferenceFromMap:function(_3b4,_3b5,_3b6){var _3b7=this.getIdentity(_3b5);var _3b8=_3b4[this._reverseRefMap];var _3b9;if(_3b8){for(_3b9 in _3b8){if(_3b9==_3b7){delete _3b8[_3b9][_3b6];if(this._isEmpty(_3b8[_3b9])){delete _3b8[_3b9];}}}if(this._isEmpty(_3b8)){delete _3b4[this._reverseRefMap];}}},_dumpReferenceMap:function(){var i;for(i=0;i<this._arrayOfAllItems.length;i++){var item=this._arrayOfAllItems[i];if(item&&item[this._reverseRefMap]){}}},_getValueOrValues:function(item,_3ba){var _3bb=undefined;if(this.hasAttribute(item,_3ba)){var _3bc=this.getValues(item,_3ba);if(_3bc.length==1){_3bb=_3bc[0];}else{_3bb=_3bc;}}return _3bb;},_flatten:function(_3bd){if(this.isItem(_3bd)){return {_reference:this.getIdentity(_3bd)};}else{if(typeof _3bd==="object"){for(var type in this._datatypeMap){var _3be=this._datatypeMap[type];if(lang.isObject(_3be)&&!lang.isFunction(_3be)){if(_3bd instanceof _3be.type){if(!_3be.serialize){throw new Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+type+"]");}return {_type:type,_value:_3be.serialize(_3bd)};}}else{if(_3bd instanceof _3be){return {_type:type,_value:_3bd.toString()};}}}}return _3bd;}},_getNewFileContentString:function(){var _3bf={};var _3c0=this._getIdentifierAttribute();if(_3c0!==Number){_3bf.identifier=_3c0;}if(this._labelAttr){_3bf.label=this._labelAttr;}_3bf.items=[];for(var i=0;i<this._arrayOfAllItems.length;++i){var item=this._arrayOfAllItems[i];if(item!==null){var _3c1={};for(var key in item){if(key!==this._storeRefPropName&&key!==this._itemNumPropName&&key!==this._reverseRefMap&&key!==this._rootItemPropName){var _3c2=this.getValues(item,key);if(_3c2.length==1){_3c1[key]=this._flatten(_3c2[0]);}else{var _3c3=[];for(var j=0;j<_3c2.length;++j){_3c3.push(this._flatten(_3c2[j]));_3c1[key]=_3c3;}}}}_3bf.items.push(_3c1);}}var _3c4=true;return _37d.toJson(_3bf,_3c4);},_isEmpty:function(_3c5){var _3c6=true;if(lang.isObject(_3c5)){var i;for(i in _3c5){_3c6=false;break;}}else{if(lang.isArray(_3c5)){if(_3c5.length>0){_3c6=false;}}}return _3c6;},save:function(_3c7){this._assert(!this._saveInProgress);this._saveInProgress=true;var self=this;var _3c8=function(){self._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};self._saveInProgress=false;if(_3c7&&_3c7.onComplete){var _3c9=_3c7.scope||_37e.global;_3c7.onComplete.call(_3c9);}};var _3ca=function(err){self._saveInProgress=false;if(_3c7&&_3c7.onError){var _3cb=_3c7.scope||_37e.global;_3c7.onError.call(_3cb,err);}};if(this._saveEverything){var _3cc=this._getNewFileContentString();this._saveEverything(_3c8,_3ca,_3cc);}if(this._saveCustom){this._saveCustom(_3c8,_3ca);}if(!this._saveEverything&&!this._saveCustom){_3c8();}},revert:function(){this._assert(!this._saveInProgress);var _3cd;for(_3cd in this._pending._modifiedItems){var _3ce=this._pending._modifiedItems[_3cd];var _3cf=null;if(this._itemsByIdentity){_3cf=this._itemsByIdentity[_3cd];}else{_3cf=this._arrayOfAllItems[_3cd];}_3ce[this._storeRefPropName]=this;for(var key in _3cf){delete _3cf[key];}lang.mixin(_3cf,_3ce);}var _3d0;for(_3cd in this._pending._deletedItems){_3d0=this._pending._deletedItems[_3cd];_3d0[this._storeRefPropName]=this;var _3d1=_3d0[this._itemNumPropName];if(_3d0["backup_"+this._reverseRefMap]){_3d0[this._reverseRefMap]=_3d0["backup_"+this._reverseRefMap];delete _3d0["backup_"+this._reverseRefMap];}this._arrayOfAllItems[_3d1]=_3d0;if(this._itemsByIdentity){this._itemsByIdentity[_3cd]=_3d0;}if(_3d0[this._rootItemPropName]){this._arrayOfTopLevelItems.push(_3d0);}}for(_3cd in this._pending._deletedItems){_3d0=this._pending._deletedItems[_3cd];if(_3d0["backupRefs_"+this._reverseRefMap]){_37c.forEach(_3d0["backupRefs_"+this._reverseRefMap],function(_3d2){var _3d3;if(this._itemsByIdentity){_3d3=this._itemsByIdentity[_3d2.id];}else{_3d3=this._arrayOfAllItems[_3d2.id];}this._addReferenceToMap(_3d3,_3d0,_3d2.attr);},this);delete _3d0["backupRefs_"+this._reverseRefMap];}}for(_3cd in this._pending._newItems){var _3d4=this._pending._newItems[_3cd];_3d4[this._storeRefPropName]=null;this._arrayOfAllItems[_3d4[this._itemNumPropName]]=null;if(_3d4[this._rootItemPropName]){this._removeArrayElement(this._arrayOfTopLevelItems,_3d4);}if(this._itemsByIdentity){delete this._itemsByIdentity[_3cd];}}this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};return true;},isDirty:function(item){if(item){var _3d5=this.getIdentity(item);return new Boolean(this._pending._newItems[_3d5]||this._pending._modifiedItems[_3d5]||this._pending._deletedItems[_3d5]).valueOf();}else{return !this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems);}},onSet:function(item,_3d6,_3d7,_3d8){},onNew:function(_3d9,_3da){},onDelete:function(_3db){},close:function(_3dc){if(this.clearOnClose){if(!this.isDirty()){this.inherited(arguments);}else{throw new Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");}}}});});},"dojox/storage/Provider":function(){define(["dijit","dojo","dojox"],function(_3dd,dojo,_3de){dojo.provide("dojox.storage.Provider");dojo.declare("dojox.storage.Provider",null,{constructor:function(){},SUCCESS:"success",FAILED:"failed",PENDING:"pending",SIZE_NOT_AVAILABLE:"Size not available",SIZE_NO_LIMIT:"No size limit",DEFAULT_NAMESPACE:"default",onHideSettingsUI:null,initialize:function(){},isAvailable:function(){},put:function(key,_3df,_3e0,_3e1){},get:function(key,_3e2){},hasKey:function(key,_3e3){return !!this.get(key,_3e3);},getKeys:function(_3e4){},clear:function(_3e5){},remove:function(key,_3e6){},getNamespaces:function(){},isPermanent:function(){},getMaximumSize:function(){},putMultiple:function(keys,_3e7,_3e8,_3e9){for(var i=0;i<keys.length;i++){_3de.storage.put(keys[i],_3e7[i],_3e8,_3e9);}},getMultiple:function(keys,_3ea){var _3eb=[];for(var i=0;i<keys.length;i++){_3eb.push(_3de.storage.get(keys[i],_3ea));}return _3eb;},removeMultiple:function(keys,_3ec){for(var i=0;i<keys.length;i++){_3de.storage.remove(keys[i],_3ec);}},isValidKeyArray:function(keys){if(keys===null||keys===undefined||!dojo.isArray(keys)){return false;}return !dojo.some(keys,function(key){return !this.isValidKey(key);},this);},hasSettingsUI:function(){return false;},showSettingsUI:function(){},hideSettingsUI:function(){},isValidKey:function(_3ed){if(_3ed===null||_3ed===undefined){return false;}return /^[0-9A-Za-z_]*$/.test(_3ed);},getResourceList:function(){return [];}});});},"esriviewer/map/MapManager":function(){define(["dojo/_base/declare","dojo/on","dojo/has","dojo/topic","dojo/_base/lang","./base/MapUtils","./base/MapExtentTools","./base/MapLayersTools","./base/MapDisplayWidgets","./base/MapNavDrawTools","./base/MapTimeTools","dijit/layout/ContentPane","../ui/basemap/BasemapGalleryWidget","esri/config","esri/geometry/Extent","esri/map","esri/arcgis/utils"],function(_3ee,on,has,_3ef,lang,_3f0,_3f1,_3f2,_3f3,_3f4,_3f5,_3f6,_3f7,_3f8,_3f9,Map,_3fa){return _3ee([],{__defaultZoomSliderPosition:{x:10,y:120},hasGeometryService:false,maxClientZoom:null,hideLatLongDisplay:false,hideMGRSDisplay:true,disableKeyboardNavigation:true,hideMapScale:false,constructor:function(_3fb){lang.mixin(this,_3fb||{});this.mapInitializationParameters={wrapAround180:true,force3DTransforms:false,navigationMode:"classic"};this.loadViewerConfigurationData();this.initMap();},loadViewerConfigurationData:function(){var _3fc=null;_3ef.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"geometryService",function(_3fd){_3fc=_3fd;});this.hasGeometryService=_3fc!=null;var _3fe=null;_3ef.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_3ff){_3fe=_3ff;});if(_3fe&&lang.isObject(_3fe)){this.mapConfiguration=_3fe;this.basemaps=this.mapConfiguration.basemaps;var _400=false;if(this.mapConfiguration.display!=null&&lang.isObject(this.mapConfiguration.display)&&this.mapConfiguration.display.showScale!=null&&this.mapConfiguration.display.showScale==false){this.hideMapScale=true;}if(this.mapConfiguration.disableKeyboardNavigation!=null&&this.mapConfiguration.disableKeyboardNavigation==false){this.disableKeyboardNavigation=false;}if(this.mapConfiguration.maxClientZoom!=null){try{this.maxClientZoom=parseInt(this.mapConfiguration.maxClientZoom,10);}catch(err){}}lang.mixin(this.mapInitializationParameters,this.mapConfiguration.initializationParameters||{});}},initListeners:function(){this.map.on("load",lang.hitch(this,this.handleMapLoaded));this.map.on("update-start",function(){_3ef.publish(VIEWER_GLOBALS.EVENTS.THROBBER.SHOW);});this.map.on("zoom-end",lang.hitch(this,this.handleZoomLevelChanged));this.map.on("update-end",function(){_3ef.publish(VIEWER_GLOBALS.EVENTS.THROBBER.HIDE);});this.map.on("extent-change",lang.hitch(this,this.handleMapExtentChange));_3ef.subscribe(VIEWER_GLOBALS.EVENTS.MAP.GET,lang.hitch(this,this.handleGetMap));on(window,"resize",lang.hitch(this,function(){this.map.resize();}));},handleMapExtentChange:function(evt){if(!this.hideMapScale){this.mapExtentTools.handleMapExtentChanged();}_3ef.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.CHANGED,evt);},handleGetMap:function(_401){if(_401!=null&&lang.isFunction(_401)){_401(this.map);}},initMap:function(){var _402;_3ef.publish(VIEWER_GLOBALS.EVENTS.MAP.GET_MAP_DIV,function(mD){_402=mD;});this.mapDiv=_402;new _3f6({region:"center",style:"height: 100%; width: 100%; margin: 0; padding: 0; overflow: hidden;"},this.mapDiv);if(this.mapConfiguration.zoomSlider==null||this.mapConfiguration.zoomSlider.create!=false){var _403=this.__defaultZoomSliderPosition.x;var _404=this.__defaultZoomSliderPosition.y;if(VIEWER_GLOBALS&&VIEWER_GLOBALS.windowPositioning&&VIEWER_GLOBALS.windowPositioning.zoomSlider&&lang.isObject(VIEWER_GLOBALS.windowPositioning.zoomSlider)){_403=VIEWER_GLOBALS.windowPositioning.zoomSlider.x;_404=VIEWER_GLOBALS.windowPositioning.zoomSlider.y;var _405="left";var _406="top";if(VIEWER_GLOBALS.windowPositioning.zoomSlider.alignY!=null&&lang.isString(VIEWER_GLOBALS.windowPositioning.zoomSlider.alignY)){var _407=VIEWER_GLOBALS.windowPositioning.zoomSlider.alignY.toLowerCase();if(_407==="top"||_407==="bottom"){_406=_407;}}if(VIEWER_GLOBALS.windowPositioning.zoomSlider.alignX!=null&&lang.isString(VIEWER_GLOBALS.windowPositioning.zoomSlider.alignX)){var _408=VIEWER_GLOBALS.windowPositioning.zoomSlider.alignX.toLowerCase();if(_408==="left"||_408==="right"){_405=_408;}}}var _409={width:null,height:"150px"};_409[_405]=_403+"px";_409[_406]=_404+"px";if(has("ie")){_409.height="80px";}_3f8.defaults.map.slider=_409;}else{this.mapInitializationParameters.slider=false;}if(this.mapConfiguration.initialExtent!=null&&lang.isObject(this.mapConfiguration.initialExtent)){var _40a=this.mapConfiguration.initialExtent;this.initialExtent=new _3f9({xmin:_40a.xmin,ymin:_40a.ymin,xmax:_40a.xmax,ymax:_40a.ymax,spatialReference:_40a.spatialReference});this.mapInitializationParameters.extent=this.initialExtent;}if(lang.isArray(this.mapConfiguration.lods)){this.mapInitializationParameters.lods=this.mapConfiguration.lods;}if(this.webMapItem){this.map=_3fa.createMap(this.webMapItem,this.mapDiv).then(lang.hitch(this,function(_40b){this.mapCreated(_40b.map);this.handleMapLoaded();}));}else{var map=new Map(this.mapDiv,this.mapInitializationParameters);if(this.disableKeyboardNavigation){map.disableKeyboardNavigation();}this.mapCreated(map);}},mapCreated:function(map){this.map=map;this.mapDisplayWidgets=new _3f3({map:this.map,mapDiv:this.mapDiv});this.mapExtentTools=new _3f1({mapDisplayWidgets:this.mapDisplayWidgets,map:this.map,mapUtils:this.mapUtils,maxClientZoom:this.maxClientZoom});this.mapLayersTools=new _3f2({map:this.map,basemaps:this.basemaps,mapConfiguration:this.mapConfiguration,webMapItem:this.webMapItem});this.mapUtils=new _3f0({map:this.map,mapDiv:this.mapDiv,operationalLayers:this.mapLayersTools.operationalLayers});this.mapNavDrawTools=new _3f4({map:this.map});this.mapTimeTools=new _3f5({map:this.map});this.initListeners();this.initBasemaps();},initBasemaps:function(){if(this.mapConfiguration.useBasemapGallery==null||this.mapConfiguration.useBasemapGallery!=true){for(var key in this.basemaps){this.mapLayersTools.changeBaseMaps(key);break;}}else{this.basemapGalleryWidget=new _3f7();}},handleMapLoaded:function(){if(this.webMapItem&&this.webMapItem.itemData){this.mapLayersTools.addWebMapOperationalLayers(this.webMapItem);}else{this.mapLayersTools.loadMapConfigurationLayers();}if(this.mapConfiguration.overview==null||this.mapConfiguration.overview.create!=false){require(["esri/dijit/OverviewMap"],lang.hitch(this,function(_40c){this.overviewMapDijit=new _40c({attachTo:"bottom-right",color:"#D84E13",opacity:0.4,map:this.map,visible:true,width:225,height:175});this.overviewMapDijit.startup();}));}_3ef.publish(VIEWER_GLOBALS.EVENTS.MAP.LOADED,this.map);this.onMapLoaded();},handleZoomLevelChanged:function(evt){if(evt==null){return;}var _40d=evt.extent;var _40e=evt.zoomFactor;var _40f=evt.anchor;var _410=evt.level;_3ef.publish(VIEWER_GLOBALS.EVENTS.MAP.LEVEL.CHANGED,_40d,_40e,_40f,_410);},onMapLoaded:function(){}});});},"esriviewer/util/GeometryUtils":function(){define(["dojo/_base/declare"],function(_411){return _411([],{polygonIntersectsPoint:function(pt,_412){var ext=_412.getExtent();return (pt.x>=ext.xmin&&pt.y>=ext.ymin&&pt.x<=ext.xmax&&pt.y<=ext.ymax);},ddToDMSString:function(_413){var _414;var _415=false;if(_413<0){_415=true;_413=Math.abs(_413);}_414=Math.floor(_413)+""+Math.floor((_413-Math.floor(_413))*60)+"'"+Math.floor(((_413-Math.floor(_413))*60-Math.floor((_413-Math.floor(_413))*60))*60)+"\"";if(_415){_414="-"+_414;}return _414;}});});},"esriviewer/ui/weather/conditions/WeatherWidgetWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","../../window/WindowWidget"],function(_416,lang,_417,_418){return _416([_418],{defaultPositioning:{x:400,y:125},windowWidth:"350px",windowHeaderText:"Weather",windowIconAltText:"Weather",windowIconClass:"commonIcons16 weather",positioningParamName:"weather",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/weather/conditions/WeatherWidget"],lang.hitch(this,function(_419){this.weatherWidget=new _419();this.setContent(this.weatherWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_417.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.WEATHER.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_417.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.WEATHER.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_417.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.WEATHER.TOGGLE,lang.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.weatherWidget){this.weatherWidget.clearDraw();}}});});},"esriviewer/ui/draw/configure/geometry/ConfigurePolygonWidget":function(){define(["dojo/_base/declare","dojo/text!./template/ConfigurePolygonTemplate.html","dojo/_base/lang","dojo/_base/Color","./model/ConfigurePolygonViewModel","./BaseGeometryConfigurationWidget","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol"],function(_41a,_41b,lang,_41c,_41d,_41e,_41f,_420){return _41a([_41e],{defaultTransparency:50,templateString:_41b,postCreate:function(){this.inherited(arguments);this.viewModel=new _41d();this.viewModel.fillColorActive.subscribe(lang.hitch(this,this.handleFillColorToggled));this.viewModel.selectedAngle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedFillStyle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedOutlineStyle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedAngle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedOutlineWidth.subscribe(lang.hitch(this,this.processChange));this.outlineColor=new _41c([255,0,0,this.getTransparency()/100]);this.fillColor=new _41c([255,0,0,this.getTransparency()/100]);this.colorPicker.set("value",this.outlineColor.toHex());ko.applyBindings(this.viewModel,this.domNode);},handleTransparencyChanged:function(){var _421=this.getTransparency()/100;this.outlineColor=new _41c([this.outlineColor.r,this.outlineColor.g,this.outlineColor.b,_421]);this.fillColor=new _41c([this.fillColor.r,this.fillColor.g,this.fillColor.b,_421]);this.inherited(arguments);},handleFillColorToggled:function(_422){if(_422){this.colorPicker.set("value",this.fillColor.toHex());}else{this.colorPicker.set("value",this.outlineColor.toHex());}},handleColorPickerChanged:function(){if(this.viewModel.outlineColorActive()){this.outlineColor=this.getColor();}else{this.fillColor=this.getColor();}this.processChange();},processChange:function(){this.onChange(this.getSymbol());},getSymbol:function(){return new _41f(this.viewModel.selectedFillStyle(),new _420(this.viewModel.selectedOutlineStyle(),this.outlineColor,this.viewModel.selectedOutlineWidth()),this.fillColor);}});});},"esriviewer/ui/draw/configure/ConfigureDrawWidget":function(){define(["dojo/_base/declare","dojo/text!./template/ConfigureDrawTemplate.html","dojo/_base/lang","../../base/UITemplatedWidget","./model/ConfigureDrawViewModel","./geometry/ConfigurePointWidget","./geometry/ConfigureLineWidget","./geometry/ConfigureTextWidget","./geometry/ConfigurePolygonWidget"],function(_423,_424,lang,_425,_426,_427,_428,_429,_42a){return _423([_425],{showConfigureGeometryIcons:true,showTextIcon:true,showEnvelopeIcon:true,templateString:_424,postCreate:function(){this.inherited(arguments);this.viewModel=new _426();this.viewModel.showEnvelopeIcon(this.showEnvelopeIcon);this.viewModel.showTextIcon(this.showTextIcon);this.viewModel.showConfigureGeometryIcons(this.showConfigureGeometryIcons);ko.applyBindings(this.viewModel,this.domNode);this.createConfigurationWidgets();},createConfigurationWidgets:function(){this.pointConfigurationWidget=new _427();this.pointConfigurationWidget.placeAt(this.configurePointWidgetContainer);this.pointConfigurationWidget.on("change",lang.hitch(this,this.handlePointSymbolChanged));this.lineConfigurationWidget=new _428();this.lineConfigurationWidget.placeAt(this.configureLineWidgetContainer);this.lineConfigurationWidget.on("change",lang.hitch(this,this.handleLineSymbolChanged));this.rectangleConfigurationWidget=new _42a();this.rectangleConfigurationWidget.placeAt(this.configureRectangleWidgetContainer);this.rectangleConfigurationWidget.on("change",lang.hitch(this,this.handleRectangleSymbolChanged));this.configureTextWidget=new _429();this.configureTextWidget.placeAt(this.configureTextWidgetContainer);this.configureTextWidget.on("change",lang.hitch(this,this.handleTextSymbolChanged));this.configurePolygonWidget=new _42a();this.configurePolygonWidget.placeAt(this.configurePolygonWidgetContainer);this.configurePolygonWidget.on("change",lang.hitch(this,this.handlePolygonSymbolChanged));},handlePointSymbolChanged:function(_42b){this.onPointSymbolChanged(_42b);},handleLineSymbolChanged:function(_42c){this.onLineSymbolChanged(_42c);},handlePolygonSymbolChanged:function(_42d){this.onPolygonSymbolChanged(_42d);},handleTextSymbolChanged:function(_42e){this.onTextSymbolChanged(_42e);},handleRectangleSymbolChanged:function(_42f){this.onRectangleSymbolChanged(_42f);},onPointSymbolChanged:function(_430){},onLineSymbolChanged:function(_431){},onPolygonSymbolChanged:function(_432){},onTextSymbolChanged:function(_433){},onRectangleSymbolChanged:function(_434){}});});},"esriviewer/ui/draw/configure/geometry/ConfigureLineWidget":function(){define(["dojo/_base/declare","dojo/text!./template/ConfigureLineTemplate.html","dojo/_base/lang","./model/ConfigureLineViewModel","./BaseGeometryConfigurationWidget","esri/symbols/SimpleLineSymbol"],function(_435,_436,lang,_437,_438,_439){return _435([_438],{templateString:_436,postCreate:function(){this.inherited(arguments);this.viewModel=new _437();this.viewModel.selectedLineStyle.subscribe(lang.hitch(this,this.processChange));this.viewModel.selectedWidth.subscribe(lang.hitch(this,this.processChange));ko.applyBindings(this.viewModel,this.domNode);},processChange:function(){this.onChange(this.getSymbol());},getSymbol:function(){return new _439(this.viewModel.selectedLineStyle(),this.getColor(),this.viewModel.selectedWidth());}});});},"esriviewer/ui/layers/LayersTocWidget":function(){define(["dojo/_base/declare","dojo/text!./template/LayersTocWidgetTemplate.html","dojo/_base/array","dojo/_base/lang","dojo/dom-style","dojo/dom-construct","dijit/Tree","dijit/tree/ForestStoreModel","dojo/data/ItemFileWriteStore","./base/LayersTocWidgetContextMenu","../base/UITemplatedWidget","esri/layers/ArcGISTiledMapServiceLayer"],function(_43a,_43b,_43c,lang,_43d,_43e,Tree,_43f,_440,_441,_442,_443){return _43a([_442],{templateString:_43b,constructor:function(){this.treeStore=new _440({data:{items:[],identifier:"id",label:"label"}});this.treeModel=new _43f({store:this.treeStore,openOnClick:true});this.tree=new Tree({model:this.treeModel,getIconClass:lang.hitch(this,this.getTreeIcon),showRoot:false});_43d.set(this.tree.domNode,"height","100%");this.treeContextMenu=new _441({tree:this.tree});this.treeContextMenu.bindNodeToNoContentMenu(this.tree.rootNode.domNode);},postCreate:function(){this.inherited(arguments);_43e.place(this.tree.domNode,this.tocContainer);},initListeners:function(){this.tree.on("click",lang.hitch(this,this.treeClickHandler));},getNodeFromItem:function(item){var _444=item.id[0];return this.tree._itemNodesMap[_444][0];},getTreeIcon:function(item,_445){if(item.root){return "tocIcons layerService";}var _446=null;var _447=null;if(item.layer){_446=this.treeStore.getValue(item,"layer");}if(item.layerId){_447=this.treeStore.getValue(item,"layerId");}if(_446){if(_447!=null){var _448=this.treeStore.getValue(item,"info");if(lang.isArray(_448.subLayerIds)&&_448.subLayerIds.length>0){if(_445){return "tocIcons folderOpen";}else{return "tocIcons folderClosed";}}else{var _449=_43c.indexOf(_446.visibleLayers,_447)>-1;if(lang.isObject(_448.metadata)){var _44a=_448.metadata;if(_44a.geometryType!=""){if(_44a.geometryType==VIEWER_GLOBALS.ESRI_GEOMETRY_TYPES.POINT){if(_446.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.TILED_MAP_SERVICE){return "tocIcons layerPoint";}if(_449){return "tocIcons layerPointChecked";}else{return "tocIcons layerPointUnchecked";}}else{if(_44a.geometryType==VIEWER_GLOBALS.ESRI_GEOMETRY_TYPES.LINE){if(_446.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.TILED_MAP_SERVICE){return "tocIcons layerLine";}if(_449){return "tocIcons layerLineChecked";}else{return "tocIcons layerLineUnchecked";}}else{if(_44a.geometryType==VIEWER_GLOBALS.ESRI_GEOMETRY_TYPES.POLYGON){if(_446.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.TILED_MAP_SERVICE){return "tocIcons layerPolygon";}if(_449){return "tocIcons layerPolygonChecked";}else{return "tocIcons layerPolygonUnchecked";}}else{if(_446.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.TILED_MAP_SERVICE){return "tocIcons layerGeneric";}if(_449){return "layerGenericChecked";}else{return "layerGenericUnchecked";}}}}}else{if(_44a.type==VIEWER_GLOBALS.ESRI_LAYER_TYPES.RASTER){if(_446 instanceof _443){return "tocIcons layerRasterIcon";}if(_449){return "tocIcons layerRasterIconChecked";}else{return "tocIcons layerRasterIconUnchecked";}}else{return _449?"tocIcons layerGenericChecked":"tocIcons layerGenericUnchecked";}}}else{if(_446.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.IMAGE_SERVICE){return "genericLayerIcon";}else{return _449?"tocIcons layerGenericChecked":"tocIcons layerGenericUnchecked";}}}}else{if(_446.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.IMAGE_SERVICE){if(_446.visible){return "tocIcons imageServiceChecked";}else{return "tocIcons imageServiceUnchecked";}}else{if(_446.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.DYNAMIC_MAP_SERVICE){if(_446.visible){return "tocIcons globeChecked";}else{return "tocIcons globeUnchecked";}}else{if(_446.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.TILED_MAP_SERVICE){if(_446.visible){return "tocIcons layerRasterChecked";}else{return "tocIcons layerRasterUnchecked";}}else{if(_446.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.FEATURE_LAYER){if(_446.visible){return "tocIcons layerGenericChecked";}else{return "tocIcons layerGenericUnchecked";}}else{if(_446.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.GRAPHICS_LAYER){if(_446.visible){return "tocIcons graphicsLayerChecked";}else{return "tocIcons graphicsLayerUnchecked";}}else{if(_446.visible){return "tocIcons layerGenericChecked";}else{return "tocIcons layerGenericUnchecked";}}}}}}}}return "tocIcons layerGeneric";},addTreeNode:function(item,_44b){var _44c={children:[]};_44c.parent=_44b;if(_44b.children!=null){_44c.attribute="children";}return this.treeStore.newItem(item,_44c);},addLayer:function(_44d){if(_44d==null||!_44d.isOperationalLayer){return;}var _44e=VIEWER_UTILS.getLayerNameFromLayer(_44d);var _44f={label:_44e,serviceId:_44d.id,layer:_44d,id:VIEWER_UTILS.generateUUID()};if(lang.isArray(_44d.layerInfos)&&_44d.layerInfos.length>0){_44f.children=[];}var _450=this.addTreeNode(_44f,this.tree.rootNode);var _451=this.getNodeFromItem(_450);if(!(_44d.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.GRAPHICS_LAYER)||(_44d.declaredClass==VIEWER_GLOBALS.ESRI_LAYER_DECLARED_CLASSES.FEATURE_LAYER)){this.treeContextMenu.bindNodeToServerMenu(_451.domNode);}else{this.treeContextMenu.bindNodeToGraphicsLayerMenu(_451.domNode);}this.checkForChildLayers(_44d,_450);},checkForChildLayers:function(_452,_453){var _454={};var _455=_452.layerInfos;if(lang.isArray(_455)){var _456=_453;var _457;for(var i=0;i<_455.length;i++){_457=false;var info=_455[i];if(info==null){continue;}var name=info.name;var _458={id:VIEWER_UTILS.generateUUID(),label:name,layerId:info.id,serviceId:_452.id,layer:_452,info:info};if(lang.isArray(info.subLayerIds)){_458.children=[];_457=true;}if(info.parentLayerId>-1){_456=_454[info.parentLayerId];if(_456==null){return;}}else{_456=_453;}var _459=this.addTreeNode(_458,_456);var _45a=this.getNodeFromItem(_459);if(_457){_454[info.id]=_459;this.treeContextMenu.bindNodeToGroupMenu(_45a.domNode);}else{this.treeContextMenu.bindNodeToLayerMenu(_45a.domNode);}}}},removeLayer:function(_45b){if(_45b==null){return;}var _45c;this.treeStore.fetch({query:{serviceId:_45b.id},queryOptions:{deep:false},onComplete:lang.hitch(this,this.deleteNodes)});},deleteNodes:function(_45d){for(var i=0;i<_45d.length;i++){this.deleteNode(_45d[i]);}},deleteChildNodes:function(item){var _45e=this.treeStore.getValue(item,"isPersistedToCookie");if(_45e){var url=this.treeStore.getValue(item,"url");}var node=this.getNodeFromItem(item);var _45f=node.getChildren();for(var i=0;i<_45f.length;i++){this.deleteNode(_45f[i].item);}this.treeStore.save();},deleteNode:function(item){this.deleteChildNodes(item);this.treeStore.deleteItem(item);this.treeStore.save();},treeClickHandler:function(item,node,_460){var _461=null;var _462=null;if(item.layer){_461=this.treeStore.getValue(item,"layer");}if(item.layerId){_462=this.treeStore.getValue(item,"layerId");}if(_461 instanceof _443&&item.layerId!=null){return;}if(_461&&_462==null){if(_461.visible){_461.hide();}else{_461.show();}}else{if(_461&&_462!=null){this.toggleDynamicSubLayerItem(_461,_462);this.processVisibleLayers(_461);}}node._updateItemClasses(item);},processVisibleLayers:function(_463){if(_463.visibleLayers.length==0){_463.setVisibleLayers([-1]);}else{var _464=VIEWER_UTILS.sortIntegerArray(_463.visibleLayers);_463.setVisibleLayers(_464);}},toggleDynamicSubLayerItem:function(_465,_466){if(_465==null){return;}var _467=_43c.indexOf(_465.visibleLayers,_466)>-1;if(_467){var _468=_43c.indexOf(_465.visibleLayers,_466);if(_468>-1){_465.visibleLayers.splice(_468,1);}}else{_465.visibleLayers.push(_466);}}});});},"esriviewer/map/base/MapNavDrawTools":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/connect","dojo/_base/lang","dojox/timing","dojo/_base/Color","esri/toolbars/draw","esri/graphic","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Extent","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol"],function(_469,_46a,con,lang,_46b,_46c,Draw,_46d,_46e,_46f,_470,_471,_472,_473){return _469([],{CROSSHAIR:"crosshair",DEFAULT:"default",MOVE:"move",POINTER:"pointer",currentGraphicFlashCount:0,maxGraphicFlashCount:3,currentFlashGraphicVisible:false,constructor:function(_474){lang.mixin(this,_474);this.initListeners();this.createDrawToolbar();},createDrawToolbar:function(){this.drawToolbar=new Draw(this.map,{showTooltips:true});},initListeners:function(){_46a.subscribe(VIEWER_GLOBALS.EVENTS.MAP.FLASH.POINT,lang.hitch(this,this.flashPoint));_46a.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.DRAW_CANCEL,lang.hitch(this,this.handleDrawCancel));_46a.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.RECTANGLE_INPUT,lang.hitch(this,this.handleUserRectangleDrawInput));_46a.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.POLYLINE_INPUT,lang.hitch(this,this.handleUserPolyLineDrawInput));_46a.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.LINE_INPUT,lang.hitch(this,this.handleUserLineDrawInput));_46a.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.POINT_INPUT,lang.hitch(this,this.handleUserPointClickInput));_46a.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.POLYGON_INPUT,lang.hitch(this,this.handleUserPolygonClickInput));_46a.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.FREEHAND_POLYLINE_INPUT,lang.hitch(this,this.handleUserFreehandLineDrawInput));_46a.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.FREEHAND_POLYGON_INPUT,lang.hitch(this,this.handleUserFreehandPolygonDrawInput));_46a.subscribe(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.ADD,lang.hitch(this,this.handleAddGraphic));_46a.subscribe(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.REMOVE,lang.hitch(this,this.removeGraphic));_46a.subscribe(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.CENTER_AND_FLASH,lang.hitch(this,this.handleCenterAndFlashGraphic));_46a.subscribe(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.CENTER_ON_MAP,lang.hitch(this,this.centerMapAtGraphic));},handleAddGraphic:function(_475){if(this.map&&this.map.graphics){this.map.graphics.add(_475);}},removeGraphic:function(_476){if(this.map&&this.map.graphics){this.map.graphics.remove(_476);}},handleDrawCancel:function(){this.drawToolbar.deactivate();if(this._drawEventHandle){con.disconnect(this._drawEventHandle);this._drawEventHandle=null;_46a.publish(VIEWER_GLOBALS.EVENTS.DRAW.DRAW_CANCELLED);}this.map.enableMapNavigation();this.map.setMapCursor(this.DEFAULT);},handleUserRectangleDrawInput:function(_477,_478){_46a.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_RECTANGLE);this._userRectangleDrawInput(_477,_478);},handleUserLineDrawInput:function(_479,_47a){_46a.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_LINE);this._userLineDrawInput(_479,_47a);},handleUserPolyLineDrawInput:function(_47b,_47c){_46a.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_POLYLINE);this._userPolylineDrawInput(_47b,_47c);},handleUserPointClickInput:function(_47d,_47e){_46a.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_POINT);this._userPointDrawInput(_47d,_47e);},handleUserPolygonClickInput:function(_47f,_480){_46a.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_POLYGON);this._userPolygonDrawInput(_47f,_480);},handleUserFreehandLineDrawInput:function(_481,_482){_46a.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_FREEHAND_LINE);this._userFreehandLineDrawInput(_481,_482);},handleUserFreehandPolygonDrawInput:function(_483,_484){_46a.publish(VIEWER_GLOBALS.EVENTS.MAP.ACTIONS.TOOL_CHANGED,VIEWER_GLOBALS.EVENTS.TOOLS.DRAW_FREEHAND_POLYGON);this._userFreehandPolygonDrawInput(_483,_484);},_userFreehandPolygonDrawInput:function(_485,_486){this.userDrawCancel();var _487=_486&&_486.cursor?_486.cursor:this.CROSSHAIR;this.map.setMapCursor(_487);this.activateDraw(Draw.FREEHAND_POLYGON,_485,_486);},_userFreehandLineDrawInput:function(_488,_489){this.userDrawCancel();var _48a=_489&&_489.cursor?_489.cursor:this.CROSSHAIR;this.map.setMapCursor(_48a);this.activateDraw(Draw.FREEHAND_POLYLINE,_488,_489);},_userRectangleDrawInput:function(_48b,_48c){this.userDrawCancel();var _48d=_48c&&_48c.cursor?_48c.cursor:this.CROSSHAIR;this.map.setMapCursor(_48d);this.activateDraw(Draw.EXTENT,_48b,_48c);},_userLineDrawInput:function(_48e,_48f){this.userDrawCancel();var _490=_48f&&_48f.cursor?_48f.cursor:this.CROSSHAIR;this.map.setMapCursor(_490);this.activateDraw(Draw.LINE,_48e,_48f);},_userPolylineDrawInput:function(_491,_492){this.userDrawCancel();var _493=_492&&_492.cursor?_492.cursor:this.CROSSHAIR;this.map.setMapCursor(_493);this.activateDraw(Draw.POLYLINE,_491,_492);},_userPointDrawInput:function(_494,_495){this.userDrawCancel();var _496=_495&&_495.cursor?_495.cursor:this.POINTER;this.map.setMapCursor(_496);this.activateDraw(Draw.POINT,_494,_495);},_userPolygonDrawInput:function(_497,_498){this.userDrawCancel();var _499=_498&&_498.cursor?_498.cursor:this.CROSSHAIR;this.map.setMapCursor(_499);this.activateDraw(Draw.POLYGON,_497,_498);},activateDraw:function(type,_49a,_49b){if(_49b==null){_49b={};}if(_49a!=null&&lang.isFunction(_49a)){this._drawEventHandle=con.connect(this.drawToolbar,"onDrawEnd",lang.hitch(this,this._internalDrawComplete,_49a));}_49b.showTooltips=_49b.showTooltips==null?true:_49b.showTooltips;this.drawToolbar.activate(type,_49b);this.map.disableMapNavigation();_46a.publish(VIEWER_GLOBALS.EVENTS.DRAW.DRAW_STARTED);},_internalDrawComplete:function(_49c,_49d){_46a.publish(VIEWER_GLOBALS.EVENTS.DRAW.DRAW_COMPLETE);this.drawToolbar.deactivate();this.map.setMapCursor(this.DEFAULT);this.map.enableMapNavigation();if(_49c!=null&&lang.isFunction(_49c)){_49c(_49d);}},userDrawCancel:function(){this.drawToolbar.deactivate();if(this._drawEventHandle){con.disconnect(this._drawEventHandle);this._drawEventHandle=null;_46a.publish(VIEWER_GLOBALS.EVENTS.DRAW.DRAW_CANCELLED);}this.map.setMapCursor(this.DEFAULT);},handleCenterAndFlashGraphic:function(_49e){this.centerMapAtGraphic(_49e);this.flashGraphic(_49e);},centerMapAtGraphic:function(_49f){var _4a0=this.getGraphicCenter(_49f);if(_4a0){this.centerMapAtPoint(_4a0);}},centerMapAtPoint:function(_4a1){this.map.centerAt(_4a1);},flashGraphic:function(_4a2){if(_4a2==null||!(_4a2 instanceof _46d)||this.graphicFlashInProgress){return;}this.currentGraphicFlashCount=0;this.currentFlashGraphic=_4a2;this.graphicFlashTimer=new _46b.Timer(500);var _4a3=_4a2.visible;_4a2.hide();this.graphicFlashTimer.onTick=lang.hitch(this,function(_4a4){try{if(this.currentGraphicFlashCount==this.maxGraphicFlashCount){this.currentGraphicFlashCount=0;this.graphicFlashTimer.stop();this.graphicFlashInProgress=false;if(_4a4){this.currentFlashGraphic.show();}else{this.currentFlashGraphic.hide();}}else{if(this.currentFlashGraphic.visible){if(this.currentFlashGraphic!=null){this.currentFlashGraphic.hide();}}else{if(this.currentFlashGraphic!=null){this.currentFlashGraphic.show();this.currentGraphicFlashCount++;}}}}catch(err){}},_4a3);this.graphicFlashInProgress=true;this.graphicFlashTimer.start();},getGraphicCenter:function(_4a5){if(_4a5==null){return;}if(_4a5.geometry==null){return;}var _4a6=_4a5.geometry;if(_4a6 instanceof _46e){return _4a6;}else{if(_4a6 instanceof _46f||_4a6 instanceof _470){var _4a7=_4a6.getExtent();return _4a7.getCenter();}else{if(_4a6 instanceof _471){return _4a6.getCenter();}}}return null;},flashPoint:function(pt,_4a8){if(_4a8==null){_4a8=20;}var _4a9;if(pt==null||!(pt instanceof _46e)){return;}var _4aa=new _472(_472.STYLE_X,2,new _473(_473.STYLE_SOLID,new _46c([255,0,0])));_4a9=new _46d(pt,_4aa);var opac=1;setTimeout(function(){_46a.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.ADD,_4a9);var i_id=setInterval(function(){_4aa.setColor(new _46c([255,0,0,opac]));_4a9.setSymbol(_4aa);if(opac<0.01){clearInterval(i_id);_46a.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.REMOVE,_4a9);}opac-=0.01;},_4a8);},700);}});});},"dijit/ColorPalette":function(){define(["require","dojo/text!./templates/ColorPalette.html","./_Widget","./_TemplatedMixin","./_PaletteMixin","./hccss","dojo/i18n","dojo/_base/Color","dojo/_base/declare","dojo/dom-construct","dojo/string","dojo/i18n!dojo/nls/colors","dojo/colors"],function(_4ab,_4ac,_4ad,_4ae,_4af,has,i18n,_4b0,_4b1,_4b2,_4b3){var _4b4=_4b1("dijit.ColorPalette",[_4ad,_4ae,_4af],{palette:"7x10",_palettes:{"7x10":[["white","seashell","cornsilk","lemonchiffon","lightyellow","palegreen","paleturquoise","lightcyan","lavender","plum"],["lightgray","pink","bisque","moccasin","khaki","lightgreen","lightseagreen","lightskyblue","cornflowerblue","violet"],["silver","lightcoral","sandybrown","orange","palegoldenrod","chartreuse","mediumturquoise","skyblue","mediumslateblue","orchid"],["gray","red","orangered","darkorange","yellow","limegreen","darkseagreen","royalblue","slateblue","mediumorchid"],["dimgray","crimson","chocolate","coral","gold","forestgreen","seagreen","blue","blueviolet","darkorchid"],["darkslategray","firebrick","saddlebrown","sienna","olive","green","darkcyan","mediumblue","darkslateblue","darkmagenta"],["black","darkred","maroon","brown","darkolivegreen","darkgreen","midnightblue","navy","indigo","purple"]],"3x4":[["white","lime","green","blue"],["silver","yellow","fuchsia","navy"],["gray","red","purple","black"]]},templateString:_4ac,baseClass:"dijitColorPalette",_dyeFactory:function(_4b5,row,col,_4b6){return new this._dyeClass(_4b5,row,col,_4b6);},buildRendering:function(){this.inherited(arguments);this._dyeClass=_4b1(_4b4._Color,{palette:this.palette});this._preparePalette(this._palettes[this.palette],i18n.getLocalization("dojo","colors",this.lang));}});_4b4._Color=_4b1("dijit._Color",_4b0,{template:"<span class='dijitInline dijitPaletteImg'>"+"<img src='${blankGif}' alt='${alt}' title='${title}' class='dijitColorPaletteSwatch' style='background-color: ${color}'/>"+"</span>",hcTemplate:"<span class='dijitInline dijitPaletteImg' style='position: relative; overflow: hidden; height: 12px; width: 14px;'>"+"<img src='${image}' alt='${alt}' title='${title}' style='position: absolute; left: ${left}px; top: ${top}px; ${size}'/>"+"</span>",_imagePaths:{"7x10":_4ab.toUrl("./themes/a11y/colors7x10.png"),"3x4":_4ab.toUrl("./themes/a11y/colors3x4.png")},constructor:function(_4b7,row,col,_4b8){this._title=_4b8;this._row=row;this._col=col;this.setColor(_4b0.named[_4b7]);},getValue:function(){return this.toHex();},fillCell:function(cell,_4b9){var html=_4b3.substitute(has("highcontrast")?this.hcTemplate:this.template,{color:this.toHex(),blankGif:_4b9,alt:this._title,title:this._title,image:this._imagePaths[this.palette].toString(),left:this._col*-20-5,top:this._row*-20-5,size:this.palette=="7x10"?"height: 145px; width: 206px":"height: 64px; width: 86px"});_4b2.place(html,cell);}});return _4b4;});},"esriviewer/ui/base/UIWidget":function(){define(["dojo/_base/declare","dijit/_Widget","dojo/_base/lang","dojo/_base/connect","dojo/dom-class","dojo/dom-construct","dojo/dom-style","../../base/ConfigurationEntryMixin"],function(_4ba,_4bb,lang,con,_4bc,_4bd,_4be,_4bf){return _4ba([_4bb,_4bf],{defaultPositioning:{x:0,y:0},animateOnPlace:true,animate:false,animation:"fadeIn animated",positioningParamName:null,isPositionedByConfig:false,LEFT_LOWER:"left",RIGHT_LOWER:"right",TOP_LOWER:"top",BOTTOM_LOWER:"bottom",constructor:function(){this.creationPositioning=lang.mixin({},this.defaultPositioning);this.connects=[];this.subscribes=[];},postCreate:function(){this.loadViewerConfigurationData();this.initListeners();if(this.isPositionedByConfig){this.positionNode();}},initListeners:function(){},destroy:function(){this.clearSubscribes();this.clearConnects();},placeAt:function(node){_4bd.place(this.domNode,node);if(this.animate&&this.animateOnPlace){this._animateWidget();}return this;},clearSubscribes:function(){if(lang.isArray(this.subscribes)){for(var i=0;i<this.subscribes.length;i++){this.subscribes[i].remove();}}},positionNode:function(){_4be.set(this.domNode,"position","absolute");var _4c0=VIEWER_GLOBALS.windowPositioning[this.positioningParamName];var _4c1=(_4c0!=null&&_4c0.x!=null)?_4c0.x:this.defaultPositioning.x;var _4c2=(_4c0!=null&&_4c0.y!=null)?_4c0.y:this.defaultPositioning.y;var _4c3="left";var _4c4="top";if(_4c0){if(_4c0.alignY!=null&&lang.isString(_4c0.alignY)){var _4c5=_4c0.alignY.toLowerCase();if(_4c5===this.TOP_LOWER||_4c5===this.BOTTOM_LOWER){_4c4=_4c5;}}if(_4c0.alignX!=null&&lang.isString(_4c0.alignX)){var _4c6=_4c0.alignX.toLowerCase();if(_4c6===this.LEFT_LOWER||_4c6===this.RIGHT_LOWER){_4c3=_4c6;}}}_4be.set(this.domNode,_4c3,_4c1+"px");_4be.set(this.domNode,_4c4,_4c2+"px");this.creationPositioning={x:_4c1,y:_4c2,alignX:_4c3,alignY:_4c4};},clearConnects:function(){if(lang.isArray(this.connects)){for(var i=0;i<this.connects.length;i++){if(this.connects[i].remove!=null&&lang.isFunction(this.connects[i].remove)){this.connects[i].remove();}else{con.disconnect(this.connects[i]);}}}},show:function(){_4be.set(this.domNode,"display","block");},hide:function(){_4be.set(this.domNode,"display","none");},hidePopups:function(){},_animateWidget:function(){this._removeAnimationClasses();_4bc.add(this.domNode,this.animation);},_removeAnimationClasses:function(){_4bc.remove(this.domNode,this.animation);},_handleContentAnimation:function(_4c7,node){if(_4c7){_4bc.add(node,VIEWER_GLOBALS.ANIMATIONS.FADE.IN);}else{_4bc.remove(node,VIEWER_GLOBALS.ANIMATIONS.FADE.IN);}}});});},"dojox/storage":function(){define(["./storage/_common"],function(){});},"dojox/main":function(){define(["dojo/_base/kernel"],function(dojo){return dojo.dojox;});},"esriviewer/ui/measure/MeasureWidget":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/topic","../base/UITemplatedWidget","dojo/text!./template/MeasureWidgetTemplate.html","./model/MeasureWidgetViewModel","../draw/base/MapDrawSupport","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleMarkerSymbol"],function(_4c8,lang,_4c9,_4ca,_4cb,_4cc,_4cd,_4ce,_4cf,_4d0,_4d1,_4d2,_4d3,_4d4){return _4c8([_4cb,_4ce],{measureFloatPrecision:2,locationFloatPrecision:3,templateString:_4cc,AREA:"area",DISTANCE:"distance",LOCATION:"location",constructor:function(){this.currentGeometry=null;this.currentGraphic=null;},postCreate:function(){this.distanceResponseCallback=lang.hitch(this,this.handleDistanceResponse);this.areaResponseCallback=lang.hitch(this,this.handleAreaResponse);this.locationResponseCallback=lang.hitch(this,this.handleLocationResponse);this.initSymbology();this.viewModel=new _4cd();this.viewModel.areaActive.subscribe(lang.hitch(this,this.handleAreaActiveChanged));this.viewModel.distanceActive.subscribe(lang.hitch(this,this.handleDistanceActiveChanged));this.viewModel.locationActive.subscribe(lang.hitch(this,this.handleLocationActiveChanged));this.viewModel.selectedAreaUnits.subscribe(lang.hitch(this,this.handleSelectedAreaUnitsChanged));this.viewModel.selectedDistanceUnits.subscribe(lang.hitch(this,this.handleSelectedDistanceUnitsChanged));this.viewModel.selectedLocationUnits.subscribe(lang.hitch(this,this.handleSelectedLocationUnitsChanged));ko.applyBindings(this.viewModel,this.domNode);},handleSelectedLocationUnitsChanged:function(_4d5){if(this.currentGeometry&&this.currentGeometry instanceof _4cf){_4ca.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_LAT_LON,this.currentGeometry,this.locationResponseCallback);}},handleSelectedDistanceUnitsChanged:function(_4d6){if(this.currentGeometry&&this.currentGeometry instanceof _4d0){_4ca.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_DISTANCE,this.currentGeometry,_4d6,this.distanceResponseCallback);}},handleSelectedAreaUnitsChanged:function(_4d7){if(this.currentGeometry&&this.currentGeometry instanceof _4d1){_4ca.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_AREA,this.currentGeometry,_4d7,this.areaResponseCallback);}},initSymbology:function(){this.polygonSymbol=new _4d2(_4d2.STYLE_SOLID,new _4d3(_4d3.STYLE_SOLID,new _4c9([0,0,255]),1),new _4c9([0,0,255,0]));this.pointSymbol=new _4d4(_4d4.STYLE_X,1,new _4d3(_4d3.STYLE_SOLID,new _4c9("blue")));this.lineSymbol=new _4d3(_4d3.STYLE_SOLID,new _4c9([0,0,255]),1);},handleAreaActiveChanged:function(_4d8){this.clearCurrentGraphic();if(_4d8){this.viewModel.measureMethodText("");this.viewModel.unitsText("");this.viewModel.resultsText("");this.handlePolygonDraw();this.activeMode=this.AREA;}else{if(this.activeMode==this.AREA){this.activeMode="";this.clearDraw();}}},handleDistanceActiveChanged:function(_4d9){this.clearCurrentGraphic();if(_4d9){this.viewModel.measureMethodText("");this.viewModel.unitsText("");this.viewModel.resultsText("");this.handleLineDraw();this.activeMode=this.DISTANCE;}else{if(this.activeMode==this.DISTANCE){this.activeMode="";this.clearDraw();}}},handleLocationActiveChanged:function(_4da){this.clearCurrentGraphic();if(_4da){this.viewModel.measureMethodText("");this.viewModel.unitsText("");this.viewModel.resultsText("");this.handlePointDraw();this.activeMode=this.LOCATION;}else{if(this.activeMode==this.LOCATION){this.activeMode="";this.clearDraw();}}},clearDraw:function(){this.inherited(arguments);this.viewModel.areaActive(false);this.viewModel.distanceActive(false);this.viewModel.locationActive(false);this.viewModel.measureMethodText("");this.viewModel.unitsText("");this.viewModel.resultsText("");_4ca.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.DRAW_CANCEL);},clearCurrentGraphic:function(){if(this.currentGraphic){_4ca.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.REMOVE,this.currentGraphic);this.currentGraphic=null;}},handleLineDraw:function(){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE);},handlePolygonDraw:function(){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON);},handlePointDraw:function(){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT);},geometryAdded:function(_4db){this.currentGeometry=_4db;this.inherited(arguments);if(this.viewModel.locationActive()){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT);_4ca.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_LAT_LON,_4db,this.locationResponseCallback);}if(this.viewModel.areaActive()){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON);_4ca.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_AREA,_4db,this.viewModel.selectedAreaUnits(),this.areaResponseCallback);}if(this.viewModel.distanceActive()){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE);_4ca.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_DISTANCE,_4db,this.viewModel.selectedDistanceUnits(),this.distanceResponseCallback);}},handleDistanceResponse:function(_4dc){if(_4dc==null||!lang.isObject(_4dc)||_4dc.lengths==null||!lang.isArray(_4dc.lengths)||_4dc.lengths.length<1){return;}this.viewModel.measureMethodText("Distance: ");this.viewModel.resultsText(REG_EXP_UTILS.numberToStringWithCommas(_4dc.lengths[0].toFixed(this.measureFloatPrecision)));this.viewModel.unitsText(this.viewModel.getLabelForDistanceValue(this.viewModel.selectedDistanceUnits()));},handleAreaResponse:function(_4dd){if(_4dd==null||!lang.isObject(_4dd)||_4dd.areas==null||!lang.isArray(_4dd.areas)||_4dd.areas.length<1){return;}var area=_4dd.areas[0];this.viewModel.measureMethodText("Area: ");this.viewModel.unitsText(this.viewModel.getLabelForAreaValue(this.viewModel.selectedAreaUnits()));this.viewModel.resultsText(REG_EXP_UTILS.numberToStringWithCommas(area.toFixed(this.measureFloatPrecision)));},handleLocationResponse:function(_4de){if(_4de==null||!lang.isArray(_4de)||_4de.length<1){return;}var pt=_4de[0];this.viewModel.measureMethodText("");this.viewModel.unitsText("");if(this.viewModel.selectedLocationUnits()==VIEWER_GLOBALS.ESRI_UNITS.DEGREE_MINUTE_SECONDS){this.viewModel.resultsText("Latitude: "+GEOMETRY_UTILS.ddToDMSString(pt.y)+" Longitude:"+GEOMETRY_UTILS.ddToDMSString(pt.x));}else{this.viewModel.resultsText("Latitude: "+pt.y.toFixed(this.locationFloatPrecision)+" Longitude: "+pt.x.toFixed(this.locationFloatPrecision));}},onAnnotationCreated:function(_4df){if(_4df!=null&&_4df.graphic!=null){this.inherited(arguments);this.clearCurrentGraphic();this.currentGraphic=_4df.graphic;_4ca.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.ADD,_4df.graphic);}},reset:function(){this.clearCurrentGraphic();this.clearDraw();}});});},"esriviewer/map/geometry/base/ProjectionUtils":function(){define(["dojo/_base/declare","dojo/_base/lang","esri/geometry/webMercatorUtils","esri/geometry/Point","esri/SpatialReference"],function(_4e0,lang,_4e1,_4e2,_4e3){return _4e0([],{DEG_2_RAD:Math.PI/180,BLOCK_SIZE:100000,GRIDSQUARE_SET_COL_SIZE:8,GRIDSQUARE_SET_ROW_SIZE:20,UNDEFINED_STR:"undefined",WEB_MERCATOR_WKID:102100,WGS_84_WKID:4326,EASTING_OFFSET:500000,NORTHING_OFFSET:10000000,k0:0.9996,RAD_2_DEG:(180/Math.PI),EQUATORIAL_RADIUS_NAD83:6378137,EQUATORIAL_RADIUS_NAD27:6378206.4,ECC_SQUARED_NAD83:0.006694380023,ECC_SQUARED_NAD27:0.006768658,UTMGzdLetters:"NPQRSTUVWX",USNGSqEast:"ABCDEFGHJKLMNPQRSTUVWXYZ",USNGSqLetOdd:"ABCDEFGHJKLMNPQRSTUV",USNGSqLetEven:"FGHJKLMNPQRSTUVABCDE",zoneBase:[1.1,2,2.9,3.8,4.7,5.6,6.5,7.3,8.2,9.1,0,0.8,1.7,2.6,3.5,4.4,5.3,6.2,7,7.9],segBase:[0,2,2,2,4,4,6,6,8,8,0,0,0,2,2,4,4,6,6,6],isNad83Mode:true,constructor:function(){if(this.isNad83Mode){this.EQUATORIAL_RADIUS=this.EQUATORIAL_RADIUS_NAD83;this.ECC_SQUARED=this.ECC_SQUARED_NAD83;}else{this.EQUATORIAL_RADIUS=this.EQUATORIAL_RADIUS_NAD27;this.ECC_SQUARED=this.ECC_SQUARED_NAD27;}this.ECC_PRIME_SQUARED=this.ECC_SQUARED/(1-this.ECC_SQUARED);this.E1=(1-Math.sqrt(1-this.ECC_SQUARED))/(1+Math.sqrt(1-this.ECC_SQUARED));},setMapSpatialReference:function(_4e4){this.mapSpatialReference=_4e4;},graphicsToMapSpatialReference:function(_4e5){if(_4e5==null){return null;}if(!lang.isArray(_4e5)){_4e5=[_4e5];}if(_4e5.length<1){return [];}if((this.mapSpatialReference.wkid===this.WEB_MERCATOR_WKID||this.mapSpatialReference.wkid===this.WGS_84_WKID)&&_4e5[0].geometry.spatialReference.wkid===this.WEB_MERCATOR_WKID||_4e5[0].geometry.spatialReference.wkid===this.WGS_84_WKID){var _4e6=null;if(this.mapSpatialReference.wkid===this.WEB_MERCATOR_WKID&&_4e5[0].geometry.spatialReference.wkid===this.WGS_84_WKID){_4e6=_4e1.geographicToWebMercator;}else{if(_4e5[0].geometry.spatialReference.wkid===this.WEB_MERCATOR_WKID&&this.mapSpatialReference.wkid===this.WGS_84_WKID){_4e6=_4e1.webMercatorToGeographic;}}if(lang.isFunction(_4e6)){var _4e7;for(var i=0;i<_4e5.length;i++){_4e7=_4e5[i];_4e7.geometry=_4e6(_4e7.geometry);}}}return _4e5;},geometryToMapSpatialReference:function(_4e8){if(_4e8==null){return null;}if(!lang.isArray(_4e8)){_4e8=[_4e8];}if(_4e8.length<1){return [];}if(this.mapSpatialReference.wkid==_4e8[0].spatialReference.wkid){return _4e8;}var _4e9=null;if((this.mapSpatialReference.wkid===this.WEB_MERCATOR_WKID||this.mapSpatialReference.wkid===this.WGS_84_WKID)&&_4e8[0].spatialReference.wkid===this.WEB_MERCATOR_WKID||_4e8[0].spatialReference.wkid===this.WGS_84_WKID){var _4ea=null;if(this.mapSpatialReference.wkid===this.WEB_MERCATOR_WKID&&_4e8[0].spatialReference.wkid===this.WGS_84_WKID){_4ea=_4e1.geographicToWebMercator;}else{if(_4e8[0].spatialReference.wkid===this.WEB_MERCATOR_WKID&&this.mapSpatialReference.wkid===this.WGS_84_WKID){_4ea=_4e1.webMercatorToGeographic;}}if(lang.isFunction(_4ea)){_4e9=[];for(var i=0;i<_4e8.length;i++){_4e9.push(_4ea(_4e8[i]));}}}return _4e9;},USNGtoLL:function(_4eb,_4ec){var _4ed=[];var _4ee={};this.parseUSNG_str(_4eb,_4ee);var _4ef={};this.USNGtoUTM(_4ee.zone,_4ee.letN,_4ee.sq1,_4ee.sq2,_4ee.east,_4ee.north,_4ef);if(_4ee.letN<"N"){_4ef.N-=this.NORTHING_OFFSET;}this.UTMtoLL(_4ef.N,_4ef.E,_4ee.zone,_4ef);_4ed[0]=_4ef.lat;_4ed[1]=_4ef.lon;var _4f0=new _4e2(_4ef.lon,_4ef.lat,new _4e3(4326));if(_4ec&&lang.isFunction(_4ec)){_4ec(_4f0);}else{return _4f0;}},USNGtoUTM:function(zone,letN,sq1,sq2,east,_4f1,ret){var _4f2=this.USNGSqEast.indexOf(sq1);var _4f3=1+_4f2%8;var _4f4;var _4f5="CDEFGHJKLMNPQRSTUVWX".indexOf(letN);if(zone%2){_4f4="ABCDEFGHJKLMNPQRSTUV".indexOf(sq2);}else{_4f4="FGHJKLMNPQRSTUVABCDE".indexOf(sq2);}var _4f6=this.zoneBase[_4f5];var _4f7=Number(this.segBase[_4f5])+_4f4/10;if(_4f7<_4f6){_4f7+=2;}ret.N=_4f7*1000000+Number(_4f1)*Math.pow(10,5-_4f1.length);ret.E=_4f3*100000+Number(east)*Math.pow(10,5-east.length);ret.zone=zone;ret.letter=letN;},parseUSNG_str:function(_4f8,_4f9){var j=0;var k;var _4fa=[];var _4fb=[];_4fb=_4f8.toUpperCase();var _4fc=/%20/g;_4fa=_4fb.replace(_4fc,"");_4fc=/ /g;_4fa=_4fb.replace(_4fc,"");if(_4fa.length<7){return 0;}_4f9.zone=_4fa.charAt(j++)*10+_4fa.charAt(j++)*1;_4f9.letN=_4fa.charAt(j++);_4f9.sq1=_4fa.charAt(j++);_4f9.sq2=_4fa.charAt(j++);_4f9.precision=(_4fa.length-j)/2;_4f9.east="";_4f9.north="";for(k=0;k<_4f9.precision;k++){_4f9.east+=_4fa.charAt(j++);}if(_4fa[j]==" "){j++;}for(k=0;k<_4f9.precision;k++){_4f9.north+=_4fa.charAt(j++);}},UTMtoLL:function(_4fd,_4fe,_4ff,ret){var xUTM=parseFloat(_4fe)-this.EASTING_OFFSET;var yUTM=parseFloat(_4fd);var _500=parseInt(_4ff,10);var _501=(_500-1)*6-180+3;var M=yUTM/this.k0;var mu=M/(this.EQUATORIAL_RADIUS*(1-this.ECC_SQUARED/4-3*this.ECC_SQUARED*this.ECC_SQUARED/64-5*this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED/256));var _502=mu+(3*this.E1/2-27*this.E1*this.E1*this.E1/32)*Math.sin(2*mu)+(21*this.E1*this.E1/16-55*this.E1*this.E1*this.E1*this.E1/32)*Math.sin(4*mu)+(151*this.E1*this.E1*this.E1/96)*Math.sin(6*mu);var phi1=_502*this.RAD_2_DEG;var N1=this.EQUATORIAL_RADIUS/Math.sqrt(1-this.ECC_SQUARED*Math.sin(_502)*Math.sin(_502));var T1=Math.tan(_502)*Math.tan(_502);var C1=this.ECC_PRIME_SQUARED*Math.cos(_502)*Math.cos(_502);var R1=this.EQUATORIAL_RADIUS*(1-this.ECC_SQUARED)/Math.pow(1-this.ECC_SQUARED*Math.sin(_502)*Math.sin(_502),1.5);var D=xUTM/(N1*this.k0);var lat=_502-(N1*Math.tan(_502)/R1)*(D*D/2-(5+3*T1+10*C1-4*C1*C1-9*this.ECC_PRIME_SQUARED)*D*D*D*D/24+(61+90*T1+298*C1+45*T1*T1-252*this.ECC_PRIME_SQUARED-3*C1*C1)*D*D*D*D*D*D/720);lat=lat*this.RAD_2_DEG;var lon=(D-(1+2*T1+C1)*D*D*D/6+(5-2*C1+28*T1-3*C1*C1+8*this.ECC_PRIME_SQUARED+24*T1*T1)*D*D*D*D*D/120)/Math.cos(_502);lon=_501+lon*this.RAD_2_DEG;ret.lat=lat;ret.lon=lon;},LLtoMGRS:function(lat,lon,_503){var _504="";var _505=this.LLtoUSNG(lat,lon,_503);var _506=/ /g;return _505.replace(_506,"");},LLtoUSNG:function(lat,lon,_507){var USNG;lat=parseFloat(lat);lon=parseFloat(lon);var _508=this.LLtoUTM(lat,lon);var _509=_508.easting;var _50a=_508.northing;if(lat<0){_50a+=this.NORTHING_OFFSET;}var _50b=this.getZoneNumber(lat,lon);var _50c=this.findGridLetters(_50b,_50a,_509);var _50d=Math.round(_50a)%this.BLOCK_SIZE;var _50e=Math.round(_509)%this.BLOCK_SIZE;_50d=Math.floor(_50d/Math.pow(10,(5-_507)));_50e=Math.floor(_50e/Math.pow(10,(5-_507)));USNG=this.getZoneNumber(lat,lon)+this.UTMLetterDesignator(lat)+" "+_50c+" ";var i;for(i=String(_50e).length;i<_507;i++){USNG+="0";}USNG+=_50e+" ";for(i=String(_50d).length;i<_507;i++){USNG+="0";}return USNG;},LLtoUTM:function(lat,lon,zone){lat=parseFloat(lat);lon=parseFloat(lon);if(lat>84||lat<-80){return this.UNDEFINED_STR;}var _50f=(lon+180)-parseInt((lon+180)/360,10)*360-180;var _510=lat*this.DEG_2_RAD;var _511=_50f*this.DEG_2_RAD;var _512=this.getZoneNumber(lat,lon);var _513=(_512-1)*6-180+3;var _514=_513*this.DEG_2_RAD;var _515=_512+""+this.UTMLetterDesignator(lat)+" ";var N=this.EQUATORIAL_RADIUS/Math.sqrt(1-this.ECC_SQUARED*Math.sin(_510)*Math.sin(_510));var T=Math.tan(_510)*Math.tan(_510);var C=this.ECC_PRIME_SQUARED*Math.cos(_510)*Math.cos(_510);var A=Math.cos(_510)*(_511-_514);var M=this.EQUATORIAL_RADIUS*((1-this.ECC_SQUARED/4-3*(this.ECC_SQUARED*this.ECC_SQUARED)/64-5*(this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED)/256)*_510-(3*this.ECC_SQUARED/8+3*this.ECC_SQUARED*this.ECC_SQUARED/32+45*this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED/1024)*Math.sin(2*_510)+(15*this.ECC_SQUARED*this.ECC_SQUARED/256+45*this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED/1024)*Math.sin(4*_510)-(35*this.ECC_SQUARED*this.ECC_SQUARED*this.ECC_SQUARED/3072)*Math.sin(6*_510));var _516=(this.k0*N*(A+(1-T+C)*(A*A*A)/6+(5-18*T+T*T+72*C-58*this.ECC_PRIME_SQUARED)*(A*A*A*A*A)/120)+this.EASTING_OFFSET);var _517=(this.k0*(M+N*Math.tan(_510)*((A*A)/2+(5-T+9*C+4*C*C)*(A*A*A*A)/24+(61-58*T+T*T+600*C-330*this.ECC_PRIME_SQUARED)*(A*A*A*A*A*A)/720)));return {easting:_516,northing:_517,zone:_512};},getZoneNumber:function(lat,lon){lat=parseFloat(lat);lon=parseFloat(lon);var _518=(lon+180)-parseInt((lon+180)/360,10)*360-180;var _519=parseInt((_518+180)/6,10)+1;if(lat>=56&&lat<64&&_518>=3&&_518<12){_519=32;}if(lat>=72&&lat<84){if(_518>=0&&_518<9){_519=31;}else{if(_518>=9&&_518<21){_519=33;}else{if(_518>=21&&_518<33){_519=35;}else{if(_518>=33&&_518<42){_519=37;}}}}}return _519;},findGridLetters:function(_51a,_51b,_51c){_51a=parseInt(_51a,10);_51b=parseFloat(_51b);_51c=parseFloat(_51c);row=1;var _51d=Math.round(_51b);while(_51d>=this.BLOCK_SIZE){_51d=_51d-this.BLOCK_SIZE;row++;}var row=row%this.GRIDSQUARE_SET_ROW_SIZE;var col=0;var _51e=Math.round(_51c);while(_51e>=this.BLOCK_SIZE){_51e=_51e-this.BLOCK_SIZE;col++;}col=col%this.GRIDSQUARE_SET_COL_SIZE;return this.lettersHelper(this.findSet(_51a),row,col);},findSet:function(_51f){_51f=parseInt(_51f,10);_51f=_51f%6;switch(_51f){case 0:return 6;break;case 1:return 1;break;case 2:return 2;break;case 3:return 3;break;case 4:return 4;break;case 5:return 5;break;default:return -1;break;}},lettersHelper:function(set,row,col){if(row==0){row=this.GRIDSQUARE_SET_ROW_SIZE-1;}else{row--;}if(col==0){col=this.GRIDSQUARE_SET_COL_SIZE-1;}else{col--;}var l1;var l2;switch(set){case 1:l1="ABCDEFGH";l2="ABCDEFGHJKLMNPQRSTUV";return l1.charAt(col)+l2.charAt(row);break;case 2:l1="JKLMNPQR";l2="FGHJKLMNPQRSTUVABCDE";return l1.charAt(col)+l2.charAt(row);break;case 3:l1="STUVWXYZ";l2="ABCDEFGHJKLMNPQRSTUV";return l1.charAt(col)+l2.charAt(row);break;case 4:l1="ABCDEFGH";l2="FGHJKLMNPQRSTUVABCDE";return l1.charAt(col)+l2.charAt(row);break;case 5:l1="JKLMNPQR";l2="ABCDEFGHJKLMNPQRSTUV";return l1.charAt(col)+l2.charAt(row);break;case 6:l1="STUVWXYZ";l2="FGHJKLMNPQRSTUVABCDE";return l1.charAt(col)+l2.charAt(row);break;}},UTMLetterDesignator:function(lat){lat=parseFloat(lat);var _520;if((84>=lat)&&(lat>=72)){_520="X";}else{if((72>lat)&&(lat>=64)){_520="W";}else{if((64>lat)&&(lat>=56)){_520="V";}else{if((56>lat)&&(lat>=48)){_520="U";}else{if((48>lat)&&(lat>=40)){_520="T";}else{if((40>lat)&&(lat>=32)){_520="S";}else{if((32>lat)&&(lat>=24)){_520="R";}else{if((24>lat)&&(lat>=16)){_520="Q";}else{if((16>lat)&&(lat>=8)){_520="P";}else{if((8>lat)&&(lat>=0)){_520="N";}else{if((0>lat)&&(lat>=-8)){_520="M";}else{if((-8>lat)&&(lat>=-16)){_520="L";}else{if((-16>lat)&&(lat>=-24)){_520="K";}else{if((-24>lat)&&(lat>=-32)){_520="J";}else{if((-32>lat)&&(lat>=-40)){_520="H";}else{if((-40>lat)&&(lat>=-48)){_520="G";}else{if((-48>lat)&&(lat>=-56)){_520="F";}else{if((-56>lat)&&(lat>=-64)){_520="E";}else{if((-64>lat)&&(lat>=-72)){_520="D";}else{if((-72>lat)&&(lat>=-80)){_520="C";}else{_520="Z";}}}}}}}}}}}}}}}}}}}}return _520;}});});},"esriviewer/ui/navigation/model/NavigationWidgetViewModel":function(){define(["dojo/_base/declare"],function(_521){return _521([],{constructor:function(){this.visible=ko.observable(true);}});});},"dojox/uuid/generateTimeBasedUuid":function(){define(["dojo/_base/lang","./_base"],function(lang){dojox.uuid.generateTimeBasedUuid=function(node){var _522=dojox.uuid.generateTimeBasedUuid._generator.generateUuidString(node);return _522;};dojox.uuid.generateTimeBasedUuid.isValidNode=function(node){var _523=16;var _524=parseInt(node,_523);var _525=lang.isString(node)&&node.length==12&&isFinite(_524);return _525;};dojox.uuid.generateTimeBasedUuid.setNode=function(node){dojox.uuid.assert((node===null)||this.isValidNode(node));this._uniformNode=node;};dojox.uuid.generateTimeBasedUuid.getNode=function(){return this._uniformNode;};dojox.uuid.generateTimeBasedUuid._generator=new function(){this.GREGORIAN_CHANGE_OFFSET_IN_HOURS=3394248;var _526=null;var _527=null;var _528=null;var _529=0;var _52a=null;var _52b=null;var _52c=16;function _52d(_52e){_52e[2]+=_52e[3]>>>16;_52e[3]&=65535;_52e[1]+=_52e[2]>>>16;_52e[2]&=65535;_52e[0]+=_52e[1]>>>16;_52e[1]&=65535;dojox.uuid.assert((_52e[0]>>>16)===0);};function _52f(x){var _530=new Array(0,0,0,0);_530[3]=x%65536;x-=_530[3];x/=65536;_530[2]=x%65536;x-=_530[2];x/=65536;_530[1]=x%65536;x-=_530[1];x/=65536;_530[0]=x;return _530;};function _531(_532,_533){dojox.uuid.assert(lang.isArray(_532));dojox.uuid.assert(lang.isArray(_533));dojox.uuid.assert(_532.length==4);dojox.uuid.assert(_533.length==4);var _534=new Array(0,0,0,0);_534[3]=_532[3]+_533[3];_534[2]=_532[2]+_533[2];_534[1]=_532[1]+_533[1];_534[0]=_532[0]+_533[0];_52d(_534);return _534;};function _535(_536,_537){dojox.uuid.assert(lang.isArray(_536));dojox.uuid.assert(lang.isArray(_537));dojox.uuid.assert(_536.length==4);dojox.uuid.assert(_537.length==4);var _538=false;if(_536[0]*_537[0]!==0){_538=true;}if(_536[0]*_537[1]!==0){_538=true;}if(_536[0]*_537[2]!==0){_538=true;}if(_536[1]*_537[0]!==0){_538=true;}if(_536[1]*_537[1]!==0){_538=true;}if(_536[2]*_537[0]!==0){_538=true;}dojox.uuid.assert(!_538);var _539=new Array(0,0,0,0);_539[0]+=_536[0]*_537[3];_52d(_539);_539[0]+=_536[1]*_537[2];_52d(_539);_539[0]+=_536[2]*_537[1];_52d(_539);_539[0]+=_536[3]*_537[0];_52d(_539);_539[1]+=_536[1]*_537[3];_52d(_539);_539[1]+=_536[2]*_537[2];_52d(_539);_539[1]+=_536[3]*_537[1];_52d(_539);_539[2]+=_536[2]*_537[3];_52d(_539);_539[2]+=_536[3]*_537[2];_52d(_539);_539[3]+=_536[3]*_537[3];_52d(_539);return _539;};function _53a(_53b,_53c){while(_53b.length<_53c){_53b="0"+_53b;}return _53b;};function _53d(){var _53e=Math.floor((Math.random()%1)*Math.pow(2,32));var _53f=_53e.toString(_52c);while(_53f.length<8){_53f="0"+_53f;}return _53f;};this.generateUuidString=function(node){if(node){dojox.uuid.assert(dojox.uuid.generateTimeBasedUuid.isValidNode(node));}else{if(dojox.uuid.generateTimeBasedUuid._uniformNode){node=dojox.uuid.generateTimeBasedUuid._uniformNode;}else{if(!_526){var _540=32768;var _541=Math.floor((Math.random()%1)*Math.pow(2,15));var _542=(_540|_541).toString(_52c);_526=_542+_53d();}node=_526;}}if(!_527){var _543=32768;var _544=Math.floor((Math.random()%1)*Math.pow(2,14));_527=(_543|_544).toString(_52c);}var now=new Date();var _545=now.valueOf();var _546=_52f(_545);if(!_52a){var _547=_52f(60*60);var _548=_52f(dojox.uuid.generateTimeBasedUuid._generator.GREGORIAN_CHANGE_OFFSET_IN_HOURS);var _549=_535(_548,_547);var _54a=_52f(1000);_52a=_535(_549,_54a);_52b=_52f(10000);}var _54b=_546;var _54c=_531(_52a,_54b);var _54d=_535(_54c,_52b);if(now.valueOf()==_528){_54d[3]+=_529;_52d(_54d);_529+=1;if(_529==10000){while(now.valueOf()==_528){now=new Date();}}}else{_528=now.valueOf();_529=1;}var _54e=_54d[2].toString(_52c);var _54f=_54d[3].toString(_52c);var _550=_53a(_54e,4)+_53a(_54f,4);var _551=_54d[1].toString(_52c);_551=_53a(_551,4);var _552=_54d[0].toString(_52c);_552=_53a(_552,3);var _553="-";var _554="1";var _555=_550+_553+_551+_553+_554+_552+_553+_527+_553+node;_555=_555.toLowerCase();return _555;};}();return dojox.uuid.generateTimeBasedUuid;});},"dojo/gears":function(){define(["./_base/lang","./sniff"],function(lang,has){var _556={};lang.setObject("dojo.gears",_556);_556._gearsObject=function(){var _557;var _558=lang.getObject("google.gears");if(_558){return _558;}if(typeof GearsFactory!="undefined"){_557=new GearsFactory();}else{if(has("ie")){try{_557=new ActiveXObject("Gears.Factory");}catch(e){}}else{if(navigator.mimeTypes["application/x-googlegears"]){_557=document.createElement("object");_557.setAttribute("type","application/x-googlegears");_557.setAttribute("width",0);_557.setAttribute("height",0);_557.style.display="none";document.documentElement.appendChild(_557);}}}if(!_557){return null;}lang.setObject("google.gears.factory",_557);return lang.getObject("google.gears");};_556.available=(!!_556._gearsObject())||0;return _556;});},"esriviewer/ui/identify/IdentifyWindowWidget":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/dom-class","../window/WindowWidget"],function(_559,lang,_55a,_55b,_55c){return _559([_55c],{defaultPositioning:{x:400,y:125},windowWidth:"310px",windowHeaderText:"Identify",windowIconAltText:"Identify",windowIconClass:"commonIcons16 information",positioningParamName:"identify",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_55b.add(this.windowContent,"identifyWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/identify/IdentifyWidget"],lang.hitch(this,function(_55d){this.identifyWidget=new _55d();this.setContent(this.identifyWidget.domNode);this.identifyWidget.showQueryView();}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_55a.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.IDENTIFY.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_55a.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.IDENTIFY.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_55a.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.IDENTIFY.TOGGLE,lang.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.identifyWidget){this.identifyWidget.reset();}},show:function(){this.inherited(arguments);if(this.identifyWidget){this.identifyWidget.showQueryView();}}});});},"dijit/layout/AccordionPane":function(){define(["dojo/_base/declare","dojo/_base/kernel","./ContentPane"],function(_55e,_55f,_560){return _55e("dijit.layout.AccordionPane",_560,{constructor:function(){_55f.deprecated("dijit.layout.AccordionPane deprecated, use ContentPane instead","","2.0");},onSelected:function(){}});});},"esriviewer/portal/PortalViewerManagerSupportMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","./PortalSupport"],function(_561,lang,_562){return _561([],{portalSupported:false,_initializePortalSupport:function(){if(this.viewerConfig.portal!=null&&lang.isObject(this.viewerConfig.portal)&&this.viewerConfig.portal.url!=null&&this.viewerConfig.portal.url!=""){this.portalSupported=true;new _562();this._createPortalSearchWidget();return true;}return false;},_createPortalSearchWidget:function(){if(this.portalSupported){if(this.viewerConfig.portalSearchWidget!=null&&this.viewerConfig.portalSearchWidget.create!=null&&this.viewerConfig.portalSearchWidget.create==true){require(["esriviewer/ui/portal/PortalSearchWidgetWindow"],function(_563){this.portalSearchWidgetWindow=new _563();});}}}});});},"esri/dijit/Basemap":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","esri/kernel","esri/request","esri/dijit/BasemapLayer"],function(_564,_565,lang,has,_566,_567,_568){var BM=_564(null,{declaredClass:"esri.dijit.Basemap",id:null,title:"",thumbnailUrl:null,layers:null,itemId:null,basemapGallery:null,constructor:function(_569,_56a){_569=_569||{};if(!_569.layers&&!_569.itemId){}this.id=_569.id;this.itemId=_569.itemId;this.layers=_569.layers;this.title=_569.title||"";this.thumbnailUrl=_569.thumbnailUrl;this.basemapGallery=_56a;},getLayers:function(){if(this.layers){return this.layers;}else{if(this.itemId){var url=_566.dijit._arcgisUrl+"/content/items/"+this.itemId+"/data";var _56b={};_56b.f="json";var _56c=_567({url:url,content:_56b,callbackParamName:"callback",error:lang.hitch(this,function(_56d,args){var msg="esri.dijit.Basemap: could not access basemap item.";if(this.basemapGallery){this.basemapGallery.onError(msg);}else{}})});_56c.addCallback(lang.hitch(this,function(_56e,args){if(_56e.baseMap){this.layers=[];_565.forEach(_56e.baseMap.baseMapLayers,function(_56f){var _570={};if(_56f.url){_570.url=_56f.url;}if(_56f.type){_570.type=_56f.type;}if(_56f.isReference){_570.isReference=_56f.isReference;}if(_56f.displayLevels){_570.displayLevels=_56f.displayLevels;}if(_56f.visibleLayers){_570.visibleLayers=_56f.visibleLayers;}if(_56f.bandIds){_570.bandIds=_56f.bandIds;}this.layers.push(new _568(_570));},this);return this.layers;}else{var msg="esri.dijit.Basemap: could not access basemap item.";if(this.basemapGallery){this.basemapGallery.onError(msg);}else{}return [];}}));return _56c;}}}});if(has("extend-esri")){lang.setObject("dijit.Basemap",BM,_566);}return BM;});},"dojox/storage/_common":function(){define(["dijit","dojo","dojox","dojo/require!dojox/storage/Provider,dojox/storage/manager,dojox/storage/LocalStorageProvider,dojox/storage/GearsStorageProvider,dojox/storage/WhatWGStorageProvider,dojox/storage/FlashStorageProvider,dojox/storage/BehaviorStorageProvider,dojox/storage/CookieStorageProvider"],function(_571,dojo,_572){dojo.provide("dojox.storage._common");dojo.require("dojox.storage.Provider");dojo.require("dojox.storage.manager");dojo.require("dojox.storage.LocalStorageProvider");dojo.require("dojox.storage.GearsStorageProvider");dojo.require("dojox.storage.WhatWGStorageProvider");dojo.require("dojox.storage.FlashStorageProvider");dojo.require("dojox.storage.BehaviorStorageProvider");dojo.require("dojox.storage.CookieStorageProvider");_572.storage.manager.initialize();});},"dojox/sql":function(){define(["./sql/_base"],function(){});},"esriviewer/ui/time/TimeSliderWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/window","dojo/dom-style","../window/WindowWidget"],function(_573,lang,_574,_575,_576,_577){return _573([_577],{defaultPositioning:{x:10,y:50},windowWidth:"450px",windowHeaderText:"Time Slider",windowIconAltText:"Time Slider",windowIconClass:"commonIcons16 clock",positioningParamName:"time",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/time/TimeSliderWidget"],lang.hitch(this,function(_578){this.timeSliderWidget=new _578();this.setContent(this.timeSliderWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_574.subscribe(VIEWER_GLOBALS.EVENTS.MAP.TIME.SHOW_TIME_SLIDER,lang.hitch(this,this.show)));this.subscribes.push(_574.subscribe(VIEWER_GLOBALS.EVENTS.MAP.TIME.TOGGLE_TIME_SLIDER,lang.hitch(this,this.toggle)));},postCreate:function(){var _579=_575.getBox();if(_579.w>1600){_576.set(this.domNode,"width","25%");}else{_576.set(this.domNode,"width","35%");}this.inherited(arguments);},hide:function(){this.inherited(arguments);if(this.timeSliderWidget){this.timeSliderWidget.clearTimeSlider();}}});});},"esri/dijit/BasemapLayer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_57a,lang,has,_57b){var BML=_57a(null,{declaredClass:"esri.dijit.BasemapLayer",constructor:function(_57c){_57c=_57c||{};if(!_57c.url&&!_57c.type){}this.url=_57c.url;this.type=_57c.type;this.isReference=(_57c.isReference===true)?true:false;this.opacity=_57c.opacity;this.visibleLayers=_57c.visibleLayers;this.displayLevels=_57c.displayLevels;this.bandIds=_57c.bandIds;this.copyright=_57c.copyright;this.subDomains=_57c.subDomains;this.fullExtent=_57c.fullExtent;this.initialExtent=_57c.initialExtent;this.tileInfo=_57c.tileInfo;this.tileServers=_57c.tileServers;}});if(has("extend-esri")){lang.setObject("dijit.BasemapLayer",BML,_57b);}return BML;});},"dijit/MenuItem":function(){define(["dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/kernel","dojo/sniff","dojo/_base/lang","./_Widget","./_TemplatedMixin","./_Contained","./_CssStateMixin","dojo/text!./templates/MenuItem.html"],function(_57d,dom,_57e,_57f,_580,has,lang,_581,_582,_583,_584,_585){var _586=_57d("dijit.MenuItem"+(has("dojo-bidi")?"_NoBidi":""),[_581,_582,_583,_584],{templateString:_585,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(val){this._set("label",val);var _587="";var text;var ndx=val.search(/{\S}/);if(ndx>=0){_587=val.charAt(ndx+1);var _588=val.substr(0,ndx);var _589=val.substr(ndx+3);text=_588+_587+_589;val=_588+"<span class=\"dijitMenuItemShortcutKey\">"+_587+"</span>"+_589;}else{text=val;}this.domNode.setAttribute("aria-label",text+" "+this.accelKey);this.containerNode.innerHTML=val;this._set("shortcutKey",_587);},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:false,_fillContent:function(_58a){if(_58a&&!("label" in this.params)){this._set("label",_58a.innerHTML);}},buildRendering:function(){this.inherited(arguments);var _58b=this.id+"_text";_57e.set(this.containerNode,"id",_58b);if(this.accelKeyNode){_57e.set(this.accelKeyNode,"id",this.id+"_accel");}dom.setSelectable(this.domNode,false);},onClick:function(){},focus:function(){try{if(has("ie")==8){this.containerNode.focus();}this.focusNode.focus();}catch(e){}},_onFocus:function(){this.getParent()._onItemFocus(this);this.inherited(arguments);},_setSelected:function(_58c){_57f.toggle(this.domNode,"dijitMenuItemSelected",_58c);},setLabel:function(_58d){_580.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_58d);},setDisabled:function(_58e){_580.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",_58e);},_setDisabledAttr:function(_58f){this.focusNode.setAttribute("aria-disabled",_58f?"true":"false");this._set("disabled",_58f);},_setAccelKeyAttr:function(_590){if(this.accelKeyNode){this.accelKeyNode.style.display=_590?"":"none";this.accelKeyNode.innerHTML=_590;_57e.set(this.containerNode,"colSpan",_590?"1":"2");}this._set("accelKey",_590);}});if(has("dojo-bidi")){_586=_57d("dijit.MenuItem",_586,{_setLabelAttr:function(val){this.inherited(arguments);if(this.textDir==="auto"){this.applyTextDir(this.textDirNode);}}});}return _586;});},"esriviewer/ui/measure/MeasureWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","../window/WindowWidget","./MeasureWidget"],function(_591,lang,_592,_593,_594){return _591([_593],{defaultPositioning:{x:50,y:50},windowWidth:"300px",windowHeaderText:"Measure",windowIconAltText:"Measure",windowIconClass:"commonIcons16 triangle",positioningParamName:"measure",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/measure/MeasureWidget"],lang.hitch(this,function(_595){this.measureWidget=new _595();this.setContent(this.measureWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_592.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.MEASURE.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_592.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.MEASURE.TOGGLE,lang.hitch(this,this.toggle)));this.subscribes.push(_592.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.MEASURE.HIDE,lang.hitch(this,this.hide)));},hide:function(){this.inherited(arguments);if(this.measureWidget){this.measureWidget.reset();}}});});},"esriviewer/map/geometry/GeometryServiceController":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","esri/tasks/GeometryService","esri/config","esri/tasks/AreasAndLengthsParameters","esri/tasks/LengthsParameters","esri/tasks/BufferParameters","esri/tasks/ProjectParameters","esri/geometry/webMercatorUtils","esri/SpatialReference"],function(_596,_597,lang,_598,_599,_59a,_59b,_59c,_59d,_59e,_59f){return _596([],{constructor:function(_5a0){lang.mixin(this,_5a0||{});this.init();},init:function(){this.loadViewerConfigurationData();if(this.geometryService==null){return;}else{this.initListeners();}var _5a1=null;_597.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,function(ext){_5a1=ext;});if(_5a1&&_5a1.spatialReference&&_5a1.spatialReference!=null){this.mapSpatialReference=_5a1.spatialReference;}this.createMapConfigGeometryService();},loadViewerConfigurationData:function(){var _5a2=null;_597.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"geometryServiceUrl",function(_5a3){_5a2=_5a3;});this.geometryServiceUrl=_5a2;if(this.geometryServiceUrl!=null&&this.geometryServiceUrl!=""){this.geometryService=new _598(this.geometryServiceUrl);}else{_597.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"No Geometry Service in configuration. Service disabled");VIEWER_UTILS.log("No Geometry Service in configuration. Service disabled",VIEWER_GLOBALS.LOG_TYPE.WARNING);}},createMapConfigGeometryService:function(){if(this.geometryServiceUrl){if(_599&&_599.defaults){_599.defaults.geometryService=new _598(this.geometryServiceUrl);}}},initListeners:function(){_597.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_LAT_LON,lang.hitch(this,this.handleProjectGeometriesToLatLon));_597.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.MGRS_TO_LAT_LON,lang.hitch(this,this.handleMgrsToLatLon));_597.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_MAP_SR,lang.hitch(this,this.handleProjectGeometriesToMapSR));_597.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_AREA,lang.hitch(this,this.handleCalculateArea));_597.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.CALCULATE_DISTANCE,lang.hitch(this,this.handleCalculateDistance));_597.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.EXISTS,lang.hitch(this,this.handleGeometryServiceExists));_597.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.BUFFER_POINT,lang.hitch(this,this.handleBufferPoint));_597.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.BUFFER,lang.hitch(this,this.handleBuffer));_597.subscribe(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.GET,lang.hitch(this,this.handleGetGeometryService));this.projectErrorDefaultCallback=lang.hitch(this,this.handleProjectionError);},handleGetGeometryService:function(_5a4){if(_5a4&&lang.isFunction(_5a4)){_5a4(this.geometryService);}},handleCalculateArea:function(_5a5,_5a6,_5a7){if(_5a7!=null&&lang.isFunction(_5a7)){var _5a8=new _59a();_5a8.areaUnit=_5a6;_5a8.polygons=[_5a5];this.geometryService.areasAndLengths(_5a8,_5a7,_5a7);}},handleCalculateDistance:function(_5a9,_5aa,_5ab){if(_5ab!=null&&lang.isFunction(_5ab)){var _5ac=new _59b();_5ac.lengthUnit=_5aa;_5ac.polylines=[_5a9];_5ac.geodesic=true;this.geometryService.lengths(_5ac,_5ab,_5ab);}},handleMgrsToLatLon:function(_5ad,_5ae){PROJECTION_UTILS.USNGtoLL(_5ad,_5ae);},handleBuffer:function(_5af,_5b0,_5b1){this.geometryService.buffer(_5af,_5b0,_5b1);},handleBufferPoint:function(pt,_5b2,_5b3,_5b4){if(pt==null||_5b2==null||_5b2.distance==null||_5b2.units==null){return;}if(_5b3==null||!lang.isFunction(_5b3)||this.mapSpatialReference==null){return;}var _5b5=new _59c();if(!lang.isArray(pt)){_5b5.geometries=[pt];}else{_5b5.geometries=pt;}_5b5.distances=[_5b2.distance];_5b5.unit=_5b2.units;_5b5.bufferSpatialReference=pt.spatialReference;_5b5.outSpatialReference=this.mapSpatialReference;this.geometryService.buffer(_5b5,_5b3,_5b4);},handleProjectGeometriesToLatLon:function(_5b6,_5b7){if(_5b7==null||!lang.isFunction(_5b7)||_5b6==null){return;}if(!lang.isArray(_5b6)){_5b6=[_5b6];}if(_5b6.length==0){_5b7([]);}var _5b8=false;var _5b9=[];if(_5b6[0].spatialReference.wkid===PROJECTION_UTILS.WEB_MERCATOR_WKID||_5b6[0].spatialReference.wkid===PROJECTION_UTILS.WGS_84_WKID){if(_5b6[0].spatialReference.wkid===PROJECTION_UTILS.WGS_84_WKID){_5b7(_5b6);}var _5ba=_59e.webMercatorToGeographic;if(lang.isFunction(_5ba)){for(var i=0;i<_5b6.length;i++){_5b9.push(_5ba(_5b6[i]));}}}if(_5b9.length>0){_5b7(_5b9);}else{var _5bb=new _59d();_5bb.geometries=_5b6;_5bb.outSR=new _59f({wkid:PROJECTION_UTILS.WGS_84_WKID});this.geometryService.project(_5bb,_5b7,_5b7);}},handleProjectGeometriesToMapSR:function(_5bc,_5bd,_5be,_5bf){if(_5bc==null){if(_5bf&&lang.isFunction(_5bf)){_5bf("No geometries to project");}return;}if(_5bd==null||!lang.isFunction(_5bd)||this.mapSpatialReference==null){if(_5bf&&lang.isFunction(_5bf)){_5bf("Cannot process project");}return;}if(!lang.isArray(_5bc)){_5bc=[_5bc];}if(_5bc.length<0){_5bd([]);}var _5c0=PROJECTION_UTILS.geometryToMapSpatialReference(_5bc);if(_5c0!=null&&lang.isArray(_5c0)){_5bd(_5c0);}else{this._handleServerSideProject(_5bc,_5bd,_5be,_5bf);}},_handleServerSideProject:function(_5c1,_5c2,_5c3,_5c4){if(_5c3==null){_5c3={};}var _5c5=new _59d();_5c5.geometries=_5c1;_5c5.outSR=this.mapSpatialReference;if(_5c3.transformation){_5c5.transformation=_5c3.transformation;}if(_5c4==null||!lang.isFunction(_5c4)){_5c4=this.projectErrorDefaultCallback;}this.geometryService.project(_5c5,_5c2,_5c4);},handleProjectionError:function(err){VIEWER_UTILS.log("Error Projecting data",VIEWER_GLOBALS.LOG_TYPE.ERROR);},handleGeometryServiceExists:function(_5c6){if(_5c6!=null&&lang.isFunction(_5c6)){_5c6(this.geometryService!=null);}}});});},"esriviewer/base/LocationServiceSupport":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","esri/tasks/locator"],function(_5c7,_5c8,lang,_5c9){return _5c7([],{constructor:function(){this.locatorLookup={};},_initListeners:function(){_5c8.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.SINGLE_LINE_ADDRESS_TO_LOCATION,lang.hitch(this,this._handleSingleAddressLineAddressToLocations));_5c8.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.REVERSE_GEOCODE,lang.hitch(this,this.handleReverseGeocode));_5c8.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.ADD_LOCATOR,lang.hitch(this,this.handleAddLocatorRequest));_5c8.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.REMOVE_LOCATOR,lang.hitch(this,this.handleRemoveLocatorRequest));_5c8.subscribe(VIEWER_GLOBALS.EVENTS.LOCATOR.GET_LOCATORS,lang.hitch(this,this.handleGetLocators));},handleGetLocators:function(_5ca){if(_5ca!=null&&lang.isFunction(_5ca)){var _5cb=[];for(var key in this.locatorLookup){_5cb.push(this.locatorLookup[key]);}_5ca(_5cb);}},handleReverseGeocode:function(_5cc,_5cd,_5ce,_5cf){if(_5ce!=null&&lang.isFunction(_5ce)){var _5d0;var _5d1=null;for(var key in this.locatorLookup){_5d0=this.locatorLookup[key];if(_5d0!=null&&_5d0.locator!=null&&lang.isFunction(_5d0.locator.locationToAddress)){_5d1=_5d0.locator;break;}}if(_5d1==null){if(_5cf!=null&&lang.isFunction(_5cf)){_5cf("Reverse Geocode Not Supported");return;}}if(_5cd==null){_5cd=VIEWER_GLOBALS.DEFAULT_REVERSE_GEOCODE_DISTANCE;}_5d1.locationToAddress(_5cc,_5cd,_5ce,_5cf);}},_handleSingleAddressLineAddressToLocations:function(_5d2,_5d3,_5d4){this.singleLineAddressToLocations(_5d2,_5d3,_5d4);},handleRemoveLocatorRequest:function(_5d5){if(this.locatorLookup[_5d5]!=null){delete this.locatorLookup[_5d5];_5c8.publish(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_REMOVED,_5d5);}},handleAddLocatorRequest:function(_5d6,_5d7,_5d8){this.addLocator(_5d6,null,function(id){if(id!=null){if(_5d7!=null&&lang.isFunction(_5d7)){_5d7(id,_5d6);}}else{if(_5d8!=null&&lang.isFunction(_5d8)){_5d8("Locator Exists");}}});},addLocator:function(_5d9,_5da,_5db){var id=_5d9.toLowerCase();if(this.locatorLookup[id]==null){var _5dc=new _5c9(_5d9);var _5dd={locator:_5dc,label:(_5da!=null&&_5da!="")?_5da:REG_EXP_UTILS.getServiceNameFromUrl(_5dc.url)};var _5de=null;_5c8.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,function(ext){_5de=ext;});if(_5de&&_5de.spatialReference){_5dc.setOutSpatialReference(_5de.spatialReference);}var _5df=_5db;var _5e0=this.locatorLookup;VIEWER_UTILS.getServiceDescription(_5d9,function(_5e1){if(_5e1!=null&&lang.isObject(_5e1)){if(_5e1.singleLineAddressField!=null&&lang.isObject(_5e1.singleLineAddressField)&&_5e1.singleLineAddressField.name!=null&&_5e1.singleLineAddressField.name!=""){_5dc.serviceDescription=_5e1;_5e0[id]=_5dd;_5c8.publish(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_ADDED,_5dd);if(_5df!=null&&lang.isFunction(_5df)){_5df(id);}}else{_5c8.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Locator does not support single line address.");}}});}else{VIEWER_UTILS.log("Locator Already Exists: "+_5d9,VIEWER_GLOBALS.LOG_TYPE.ERROR);_5c8.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Locator already exists.");}},singleLineAddressToLocations:function(_5e2,_5e3,_5e4){if(_5e4!=null){var _5e5={};_5e5[_5e4.serviceDescription.singleLineAddressField.name]=VIEWER_UTILS.trim(_5e2);var _5e6=lang.hitch(this,this._handleLocatorResponse,_5e4.url.toLowerCase(),_5e3);var _5e7=lang.hitch(this,this._handleLocatorError,_5e4.url.toLowerCase(),_5e3);_5e4.addressToLocations(_5e5,["*"],_5e6,_5e7);}},_handleLocatorResponse:function(_5e8,_5e9,_5ea){_5c8.publish(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_REQUEST_COMPLETE,{addressCandidates:_5ea,locatorId:_5e8,requestId:_5e9});},_handleLocatorError:function(_5eb,_5ec,_5ed){_5c8.publish(VIEWER_GLOBALS.EVENTS.LOCATOR.LOCATOR_REQUEST_ERROR,{error:_5ed,locatorId:_5eb,requestId:_5ec});VIEWER_UTILS.log("Could not perform locate",VIEWER_GLOBALS.LOG_TYPE.ERROR);_5c8.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Could not perform locate");}});});},"esriviewer/ui/zoomto/ZoomToWidgetWindow":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","../window/WindowWidget"],function(_5ee,_5ef,lang,_5f0){return _5ee([_5f0],{defaultPositioning:{x:10,y:240},windowWidth:"275px",windowHeaderText:"Zoom To",windowIconAltText:"Zoom To",windowIconClass:"commonIcons16 magnifyingGlass",positioningParamName:"zoomTo",initListeners:function(){this.inherited(arguments);this.subscribes.push(_5ef.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.ZOOM_TO.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_5ef.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.ZOOM_TO.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_5ef.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.ZOOM_TO.TOGGLE,lang.hitch(this,this.toggle)));this.firstShowListener=this.on("firstWindowShow",lang.hitch(this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/zoomto/ZoomToWidget"],lang.hitch(this,function(_5f1){this.zoomToWidget=new _5f1();this.setContent(this.zoomToWidget.domNode);}));}});});},"dijit/layout/_LayoutWidget":function(){define(["dojo/_base/lang","../_Widget","../_Container","../_Contained","../Viewport","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style"],function(lang,_5f2,_5f3,_5f4,_5f5,_5f6,_5f7,_5f8,_5f9){return _5f6("dijit.layout._LayoutWidget",[_5f2,_5f3,_5f4],{baseClass:"dijitLayoutContainer",isLayoutContainer:true,buildRendering:function(){this.inherited(arguments);_5f7.add(this.domNode,"dijitContainer");},startup:function(){if(this._started){return;}this.inherited(arguments);var _5fa=this.getParent&&this.getParent();if(!(_5fa&&_5fa.isLayoutContainer)){this.resize();this.own(_5f5.on("resize",lang.hitch(this,"resize")));}},resize:function(_5fb,_5fc){var node=this.domNode;if(_5fb){_5f8.setMarginBox(node,_5fb);}var mb=_5fc||{};lang.mixin(mb,_5fb||{});if(!("h" in mb)||!("w" in mb)){mb=lang.mixin(_5f8.getMarginBox(node),mb);}var cs=_5f9.getComputedStyle(node);var me=_5f8.getMarginExtents(node,cs);var be=_5f8.getBorderExtents(node,cs);var bb=(this._borderBox={w:mb.w-(me.w+be.w),h:mb.h-(me.h+be.h)});var pe=_5f8.getPadExtents(node,cs);this._contentBox={l:_5f9.toPixelValue(node,cs.paddingLeft),t:_5f9.toPixelValue(node,cs.paddingTop),w:bb.w-pe.w,h:bb.h-pe.h};this.layout();},layout:function(){},_setupChild:function(_5fd){var cls=this.baseClass+"-child "+(_5fd.baseClass?this.baseClass+"-"+_5fd.baseClass:"");_5f7.add(_5fd.domNode,cls);},addChild:function(_5fe,_5ff){this.inherited(arguments);if(this._started){this._setupChild(_5fe);}},removeChild:function(_600){var cls=this.baseClass+"-child"+(_600.baseClass?" "+this.baseClass+"-"+_600.baseClass:"");_5f7.remove(_600.domNode,cls);this.inherited(arguments);}});});},"dojox/uuid/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang"],function(dojo){dojo.getObject("uuid",true,dojox);dojox.uuid.NIL_UUID="00000000-0000-0000-0000-000000000000";dojox.uuid.version={UNKNOWN:0,TIME_BASED:1,DCE_SECURITY:2,NAME_BASED_MD5:3,RANDOM:4,NAME_BASED_SHA1:5};dojox.uuid.variant={NCS:"0",DCE:"10",MICROSOFT:"110",UNKNOWN:"111"};dojox.uuid.assert=function(_601,_602){if(!_601){if(!_602){_602="An assert statement failed.\n"+"The method dojox.uuid.assert() was called with a 'false' value.\n";}throw new Error(_602);}};dojox.uuid.generateNilUuid=function(){return dojox.uuid.NIL_UUID;};dojox.uuid.isValid=function(_603){_603=_603.toString();var _604=(dojo.isString(_603)&&(_603.length==36)&&(_603==_603.toLowerCase()));if(_604){var _605=_603.split("-");_604=((_605.length==5)&&(_605[0].length==8)&&(_605[1].length==4)&&(_605[2].length==4)&&(_605[3].length==4)&&(_605[4].length==12));var _606=16;for(var i in _605){var part=_605[i];var _607=parseInt(part,_606);_604=_604&&isFinite(_607);}}return _604;};dojox.uuid.getVariant=function(_608){if(!dojox.uuid._ourVariantLookupTable){var _609=dojox.uuid.variant;var _60a=[];_60a[0]=_609.NCS;_60a[1]=_609.NCS;_60a[2]=_609.NCS;_60a[3]=_609.NCS;_60a[4]=_609.NCS;_60a[5]=_609.NCS;_60a[6]=_609.NCS;_60a[7]=_609.NCS;_60a[8]=_609.DCE;_60a[9]=_609.DCE;_60a[10]=_609.DCE;_60a[11]=_609.DCE;_60a[12]=_609.MICROSOFT;_60a[13]=_609.MICROSOFT;_60a[14]=_609.UNKNOWN;_60a[15]=_609.UNKNOWN;dojox.uuid._ourVariantLookupTable=_60a;}_608=_608.toString();var _60b=_608.charAt(19);var _60c=16;var _60d=parseInt(_60b,_60c);dojox.uuid.assert((_60d>=0)&&(_60d<=16));return dojox.uuid._ourVariantLookupTable[_60d];};dojox.uuid.getVersion=function(_60e){var _60f="dojox.uuid.getVersion() was not passed a DCE Variant UUID.";dojox.uuid.assert(dojox.uuid.getVariant(_60e)==dojox.uuid.variant.DCE,_60f);_60e=_60e.toString();var _610=_60e.charAt(14);var _611=16;var _612=parseInt(_610,_611);return _612;};dojox.uuid.getNode=function(_613){var _614="dojox.uuid.getNode() was not passed a TIME_BASED UUID.";dojox.uuid.assert(dojox.uuid.getVersion(_613)==dojox.uuid.version.TIME_BASED,_614);_613=_613.toString();var _615=_613.split("-");var _616=_615[4];return _616;};dojox.uuid.getTimestamp=function(_617,_618){var _619="dojox.uuid.getTimestamp() was not passed a TIME_BASED UUID.";dojox.uuid.assert(dojox.uuid.getVersion(_617)==dojox.uuid.version.TIME_BASED,_619);_617=_617.toString();if(!_618){_618=null;}switch(_618){case "string":case String:return dojox.uuid.getTimestamp(_617,Date).toUTCString();break;case "hex":var _61a=_617.split("-");var _61b=_61a[0];var _61c=_61a[1];var _61d=_61a[2];_61d=_61d.slice(1);var _61e=_61d+_61c+_61b;dojox.uuid.assert(_61e.length==15);return _61e;break;case null:case "date":case Date:var _61f=3394248;var _620=16;var _621=_617.split("-");var _622=parseInt(_621[0],_620);var _623=parseInt(_621[1],_620);var _624=parseInt(_621[2],_620);var _625=_624&4095;_625<<=16;_625+=_623;_625*=4294967296;_625+=_622;var _626=_625/10000;var _627=60*60;var _628=_61f;var _629=_628*_627;var _62a=_629*1000;var _62b=_626-_62a;var _62c=new Date(_62b);return _62c;break;default:dojox.uuid.assert(false,"dojox.uuid.getTimestamp was not passed a valid returnType: "+_618);break;}};return dojox.uuid;});},"esriviewer/ui/user/location/UserLocationWidget":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-class","dojo/_base/lang","dojo/on","dojo/topic","../../base/UIWidget","esri/geometry/Point","esri/SpatialReference"],function(_62d,_62e,_62f,lang,on,_630,_631,_632,_633){return _62d([_631],{defaultPositioning:{x:20,y:205},browserLocationWkid:4326,isPositionedByConfig:true,positioningParamName:"zoomToUserLocation",maximumAge:0,timeout:6000,enableHighAccuracy:true,postCreate:function(){this.inherited(arguments);_62f.add(this.domNode,"userLocationCrosshairContainer fivePixelBorderRadius defaultTwoPixelBorder defaultBackground");var _634=_62e.create("div",{className:"commonIcons32 locationCrosshair"});_62e.place(_634,this.domNode);on(_634,"click",lang.hitch(this,this.handleZoomToCurrentLocation));this.handleProjectResponse=lang.hitch(this,this._handleProjectResponse);this.zoomToCurrentLocation=lang.hitch(this,this._zoomToCurrentLocation);this.zoomToCurrentLocationError=lang.hitch(this,this._zoomToCurrentLocationError);},handleZoomToCurrentLocation:function(){if(navigator&&navigator.geolocation){navigator.geolocation.getCurrentPosition(this.zoomToCurrentLocation,this.zoomToCurrentLocationError,{maximumAge:this.maximumAge,timeout:this.timeout,enableHighAccuracy:this.enableHighAccuracy});}},_zoomToCurrentLocation:function(_635){if(_635!=null&&lang.isObject(_635)&&_635.coords){var pt=new _632(_635.coords.longitude,_635.coords.latitude,new _633({wkid:this.browserLocationWkid}));_630.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_MAP_SR,pt,this.handleProjectResponse);}},_handleProjectResponse:function(_636){if(_636!=null&&lang.isArray(_636)&&_636.length>0){_630.publish(VIEWER_GLOBALS.EVENTS.MAP.FLASH.POINT,_636[0]);_630.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PAN_TO,_636[0],{deepest:true});}},_zoomToCurrentLocationError:function(){_630.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Could not zoom to current location");VIEWER_UTILS.log("Could not get users current location");}});});},"esriviewer/ui/geocode/ReverseGeocodeWindowWidget":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","../window/WindowWidget"],function(_637,_638,lang,_639){return _637([_639],{defaultPositioning:{x:600,y:150},windowWidth:"310px",windowHeaderText:"Find Address By Point",windowIconAltText:"Find Address By Point",positioningParamName:"reverseGeocode",windowIconClass:"commonIcons16 binoculars",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/geocode/ReverseGeocodeWidget"],lang.hitch(this,function(_63a){this.reverseGeocodeWidget=new _63a();this.setContent(this.reverseGeocodeWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_638.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REVERSE_GEOCODE.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_638.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REVERSE_GEOCODE.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_638.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REVERSE_GEOCODE.TOGGLE,lang.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.reverseGeocodeWidget){this.reverseGeocodeWidget.reset();}}});});},"esriviewer/ui/logging/LoggingWidget":function(){define(["dojo/_base/declare","dojo/text!./template/LoggingWidgetTemplate.html","dojo/topic","../base/UITemplatedWidget","dojo/_base/lang","../tooltip/ConfirmTooltip","./model/LoggingViewModel"],function(_63b,_63c,_63d,_63e,lang,_63f,_640){return _63b([_63e],{templateString:_63c,initListeners:function(){this.inherited(arguments);this.subscribes.push(_63d.subscribe(VIEWER_GLOBALS.EVENTS.LOGGING.ADD,lang.hitch(this,this._addLogging)));this.subscribes.push(_63d.subscribe(VIEWER_GLOBALS.EVENTS.LOGGING.CLEAR,lang.hitch(this,this._clearLogging)));},postCreate:function(){this.inherited(arguments);this.viewModel=new _640();ko.applyBindings(this.viewModel,this.domNode);},_addLogging:function(_641,type){if(type!=null&&type!=""){type=type.toLowerCase();}if(type===VIEWER_GLOBALS.LOG_TYPE.WARNING){this._createWarningMessage(_641);}else{if(type===VIEWER_GLOBALS.LOG_TYPE.ERROR){this._createErrorMessage(_641);}else{this._createInfoMessage(_641);}}},_createErrorMessage:function(_642){this._createMessage(_642,"commonIcons16 error","loggingErrorMessage",VIEWER_GLOBALS.LOG_TYPE.ERROR);},_createInfoMessage:function(_643){this._createMessage(_643,"commonIcons16 information","loggingInfoMessage",VIEWER_GLOBALS.LOG_TYPE.INFO);},_createWarningMessage:function(_644){this._createMessage(_644,"commonIcons16 warning","loggingWarningMessage",VIEWER_GLOBALS.LOG_TYPE.WARNING);},_createMessage:function(_645,_646,_647,type){this.viewModel.logEntries.push({message:_645,messageStyleClass:_647,iconClass:_646,time:VIEWER_UTILS.getTimeStamp(),type:type});},_clearLogging:function(){this.viewModel.logEntries.removeAll();},_createDeleteAllMessagesTooltip:function(){this.confirmClearLogTooltip=new _63f({confirmCallback:lang.hitch(this,this._clearLogging),aroundNode:this.clearLogIcon,displayText:"Clear Log? "});},_showConfirmLogTooltip:function(){if(this.confirmClearLogTooltip==null){this._createDeleteAllMessagesTooltip();}if(this.confirmClearLogTooltip){this.confirmClearLogTooltip.show();}},hidePopups:function(){if(this.confirmClearLogTooltip){this.confirmClearLogTooltip.hide();}}});});},"dijit/layout/StackController":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/keys","dojo/_base/lang","dojo/on","dojo/topic","../focus","../registry","../_Widget","../_TemplatedMixin","../_Container","../form/ToggleButton","dojo/touch","dojo/i18n!../nls/common"],function(_648,_649,_64a,_64b,keys,lang,on,_64c,_64d,_64e,_64f,_650,_651,_652){var _653=_649("dijit.layout._StackButton",_652,{tabIndex:"-1",closeButton:false,_aria_attr:"aria-selected",buildRendering:function(evt){this.inherited(arguments);(this.focusNode||this.domNode).setAttribute("role","tab");}});var _654=_649("dijit.layout.StackController",[_64f,_650,_651],{baseClass:"dijitStackController",templateString:"<span role='tablist' data-dojo-attach-event='onkeydown'></span>",containerId:"",buttonWidget:_653,buttonWidgetCloseClass:"dijitStackCloseButton",pane2button:function(id){return _64e.byId(this.id+"_"+id);},postCreate:function(){this.inherited(arguments);this.own(_64c.subscribe(this.containerId+"-startup",lang.hitch(this,"onStartup")),_64c.subscribe(this.containerId+"-addChild",lang.hitch(this,"onAddChild")),_64c.subscribe(this.containerId+"-removeChild",lang.hitch(this,"onRemoveChild")),_64c.subscribe(this.containerId+"-selectChild",lang.hitch(this,"onSelectChild")),_64c.subscribe(this.containerId+"-containerKeyDown",lang.hitch(this,"onContainerKeyDown")));this.containerNode.dojoClick=true;this.own(on(this.containerNode,"click",lang.hitch(this,function(evt){var _655=_64e.getEnclosingWidget(evt.target);if(_655!=this.containerNode&&!_655.disabled&&_655.page){for(var _656=evt.target;_656!==this.containerNode;_656=_656.parentNode){if(_64a.contains(_656,this.buttonWidgetCloseClass)){this.onCloseButtonClick(_655.page);break;}else{if(_656==_655.domNode){this.onButtonClick(_655.page);break;}}}}})));},onStartup:function(info){this.textDir=info.textDir;_648.forEach(info.children,this.onAddChild,this);if(info.selected){this.onSelectChild(info.selected);}var _657=_64e.byId(this.containerId).containerNode,_658=lang.hitch(this,"pane2button"),_659={"title":"label","showtitle":"showLabel","iconclass":"iconClass","closable":"closeButton","tooltip":"title","disabled":"disabled","textdir":"textdir"},_65a=function(attr,_65b){return on(_657,"attrmodified-"+attr,function(evt){var _65c=_658(evt.detail&&evt.detail.widget&&evt.detail.widget.id);if(_65c){_65c.set(_65b,evt.detail.newValue);}});};for(var attr in _659){this.own(_65a(attr,_659[attr]));}},destroy:function(_65d){this.destroyDescendants(_65d);this.inherited(arguments);},onAddChild:function(page,_65e){var Cls=lang.isString(this.buttonWidget)?lang.getObject(this.buttonWidget):this.buttonWidget;var _65f=new Cls({id:this.id+"_"+page.id,name:this.id+"_"+page.id,label:page.title,disabled:page.disabled,ownerDocument:this.ownerDocument,dir:page.dir,lang:page.lang,textDir:page.textDir||this.textDir,showLabel:page.showTitle,iconClass:page.iconClass,closeButton:page.closable,title:page.tooltip,page:page});this.addChild(_65f,_65e);page.controlButton=_65f;if(!this._currentChild){this.onSelectChild(page);}var _660=page._wrapper.getAttribute("aria-labelledby")?page._wrapper.getAttribute("aria-labelledby")+" "+_65f.id:_65f.id;page._wrapper.removeAttribute("aria-label");page._wrapper.setAttribute("aria-labelledby",_660);},onRemoveChild:function(page){if(this._currentChild===page){this._currentChild=null;}var _661=this.pane2button(page.id);if(_661){this.removeChild(_661);_661.destroy();}delete page.controlButton;},onSelectChild:function(page){if(!page){return;}if(this._currentChild){var _662=this.pane2button(this._currentChild.id);_662.set("checked",false);_662.focusNode.setAttribute("tabIndex","-1");}var _663=this.pane2button(page.id);_663.set("checked",true);this._currentChild=page;_663.focusNode.setAttribute("tabIndex","0");var _664=_64e.byId(this.containerId);},onButtonClick:function(page){var _665=this.pane2button(page.id);_64d.focus(_665.focusNode);if(this._currentChild&&this._currentChild.id===page.id){_665.set("checked",true);}var _666=_64e.byId(this.containerId);_666.selectChild(page);},onCloseButtonClick:function(page){var _667=_64e.byId(this.containerId);_667.closeChild(page);if(this._currentChild){var b=this.pane2button(this._currentChild.id);if(b){_64d.focus(b.focusNode||b.domNode);}}},adjacent:function(_668){if(!this.isLeftToRight()&&(!this.tabPosition||/top|bottom/.test(this.tabPosition))){_668=!_668;}var _669=this.getChildren();var idx=_648.indexOf(_669,this.pane2button(this._currentChild.id)),_66a=_669[idx];var _66b;do{idx=(idx+(_668?1:_669.length-1))%_669.length;_66b=_669[idx];}while(_66b.disabled&&_66b!=_66a);return _66b;},onkeydown:function(e,_66c){if(this.disabled||e.altKey){return;}var _66d=null;if(e.ctrlKey||!e._djpage){switch(e.keyCode){case keys.LEFT_ARROW:case keys.UP_ARROW:if(!e._djpage){_66d=false;}break;case keys.PAGE_UP:if(e.ctrlKey){_66d=false;}break;case keys.RIGHT_ARROW:case keys.DOWN_ARROW:if(!e._djpage){_66d=true;}break;case keys.PAGE_DOWN:if(e.ctrlKey){_66d=true;}break;case keys.HOME:var _66e=this.getChildren();for(var idx=0;idx<_66e.length;idx++){var _66f=_66e[idx];if(!_66f.disabled){this.onButtonClick(_66f.page);break;}}e.stopPropagation();e.preventDefault();break;case keys.END:var _66e=this.getChildren();for(var idx=_66e.length-1;idx>=0;idx--){var _66f=_66e[idx];if(!_66f.disabled){this.onButtonClick(_66f.page);break;}}e.stopPropagation();e.preventDefault();break;case keys.DELETE:case "W".charCodeAt(0):if(this._currentChild.closable&&(e.keyCode==keys.DELETE||e.ctrlKey)){this.onCloseButtonClick(this._currentChild);}e.stopPropagation();e.preventDefault();break;case keys.TAB:if(e.ctrlKey){this.onButtonClick(this.adjacent(!e.shiftKey).page);e.stopPropagation();e.preventDefault();}break;}if(_66d!==null){this.onButtonClick(this.adjacent(_66d).page);e.stopPropagation();e.preventDefault();}}},onContainerKeyDown:function(info){info.e._djpage=info.page;this.onkeydown(info.e);}});_654.StackButton=_653;return _654;});},"esriviewer/ui/basemap/BasemapGalleryWidget":function(){define(["dojo/_base/declare","dojo/text!./template/BasemapGalleryTemplate.html","dojo/_base/lang","dojo/_base/connect","dojo/topic","../base/UITemplatedWidget","./model/BasemapGalleryViewModel","esri/arcgis/utils"],function(_670,_671,lang,con,_672,_673,_674,_675){return _670([_673],{configuredPortalBasemapsGroupId:null,animateOnPlace:false,usePortalBasemaps:false,animate:true,_defaultArcGISBasemapTitle:null,templateString:_671,constructor:function(){this.animation=VIEWER_GLOBALS.ANIMATIONS.FADE.IN;},initListeners:function(){_672.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.TOGGLE,lang.hitch(this,this.handleToggleBasemapGallery));_672.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.SHOW,lang.hitch(this,this.handleShowBasemapGallery));_672.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.HIDE,lang.hitch(this,this.handleHideBasemapGallery));_672.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.IS_HIDDEN,lang.hitch(this,this.handleBasemapGalleryIsHidden));_672.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.GET,lang.hitch(this,this.handleGetBasemapGallery));},handleGetBasemapGallery:function(_676){if(_676!=null&&lang.isFunction(_676)){_676(this.basemapGallery);}},loadViewerConfigurationData:function(){var _677;_672.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_678){_677=_678;});if(_677){if(_677.useConfiguredPortalBasemaps!=null){this.usePortalBasemaps=_677.useConfiguredPortalBasemaps;}if(_677.basemapGalleryDefault!=null){this._defaultArcGISBasemapTitle=_677.basemapGalleryDefault;}if(_677.configuredPortalBasemapsGroupId!=null){this.configuredPortalBasemapsGroupId=_677.configuredPortalBasemapsGroupId;}}var _679=null;_672.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"animationsEnabled",function(_67a){_679=_67a;});if(_679!=null){this.animate=_679;}},handleBasemapGalleryIsHidden:function(_67b){if(_67b!=null&&lang.isFunction(_67b)){_67b(!this.viewModel.visible());}},handleHideBasemapGallery:function(){if(this.viewModel.visible()){this.viewModel.visible(false);if(this.animate){this._removeAnimationClasses();}}},handleShowBasemapGallery:function(){if(!this.viewModel.visible()){this.viewModel.visible(true);if(this.animate){this._animateWidget();}}},handleToggleBasemapGallery:function(){if(!this.viewModel.visible()){this.handleShowBasemapGallery();}else{this.handleHideBasemapGallery();}},postCreate:function(){this.inherited(arguments);this.viewModel=new _674();ko.applyBindings(this.viewModel,this.domNode);_672.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.BASEMAP_GALLERY,this);var map;_672.publish(VIEWER_GLOBALS.EVENTS.MAP.GET,function(_67c){map=_67c;});var _67d={map:map,showArcGISBasemaps:true};var _67e;_672.publish(VIEWER_GLOBALS.EVENTS.PORTAL.GET_INSTANCE,function(_67f){_67e=_67f;});if(this.usePortalBasemaps&&_67e){var _680;_672.publish(VIEWER_GLOBALS.EVENTS.PORTAL.GET_BASEMAPS,lang.hitch(this,function(_681){_680=_681;if(_680&&_680.length>0){_67d.showArcGISBasemaps=false;_67d.basemaps=_680;}this._initGallery(_67d);}),this.configuredPortalBasemapsGroupId);}else{this._initGallery(_67d);}},_initGallery:function(_682){require(["esri/dijit/BasemapGallery"],lang.hitch(this,function(_683){this.basemapGallery=new _683(_682,this.basemapGalleryContents);this.basemapGallery.on("load",lang.hitch(this,this.handleBasemapGalleryLoaded));con.connect(this.basemapGallery,"onSelectionChange",lang.hitch(this,this.handleBasemapSelectionChanged));this.basemapGallery.startup();}));},handleBasemapSelectionChanged:function(evt){this.handleHideBasemapGallery();_672.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.CHANGED);},_setArcGISBasemapByTitle:function(){if(this._defaultArcGISBasemapTitle){var _684=this._getBasemapIdByTitle(this._defaultArcGISBasemapTitle);if(_684!=null){this.basemapGallery.select(_684);}}},handleBasemapGalleryLoaded:function(){if(this._defaultArcGISBasemapTitle!=null){this._setArcGISBasemapByTitle();}},_getBasemapIdByTitle:function(_685){if(this.basemapGallery&&this.basemapGallery.basemaps){var _686;for(var i=0;i<this.basemapGallery.basemaps.length;i++){_686=this.basemapGallery.basemaps[i];if(_686!=null&&_686.title!=null){if(_686.title==_685){return _686.id;}}}}return null;}});});},"dojo/dnd/move":function(){define(["../_base/declare","../dom-geometry","../dom-style","./common","./Mover","./Moveable"],function(_687,_688,_689,dnd,_68a,_68b){var _68c=_687("dojo.dnd.move.constrainedMoveable",_68b,{constraints:function(){},within:false,constructor:function(node,_68d){if(!_68d){_68d={};}this.constraints=_68d.constraints;this.within=_68d.within;},onFirstMove:function(_68e){var c=this.constraintBox=this.constraints.call(this,_68e);c.r=c.l+c.w;c.b=c.t+c.h;if(this.within){var mb=_688.getMarginSize(_68e.node);c.r-=mb.w;c.b-=mb.h;}},onMove:function(_68f,_690){var c=this.constraintBox,s=_68f.node.style;this.onMoving(_68f,_690);_690.l=_690.l<c.l?c.l:c.r<_690.l?c.r:_690.l;_690.t=_690.t<c.t?c.t:c.b<_690.t?c.b:_690.t;s.left=_690.l+"px";s.top=_690.t+"px";this.onMoved(_68f,_690);}});var _691=_687("dojo.dnd.move.boxConstrainedMoveable",_68c,{box:{},constructor:function(node,_692){var box=_692&&_692.box;this.constraints=function(){return box;};}});var _693=_687("dojo.dnd.move.parentConstrainedMoveable",_68c,{area:"content",constructor:function(node,_694){var area=_694&&_694.area;this.constraints=function(){var n=this.node.parentNode,s=_689.getComputedStyle(n),mb=_688.getMarginBox(n,s);if(area=="margin"){return mb;}var t=_688.getMarginExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="border"){return mb;}t=_688.getBorderExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="padding"){return mb;}t=_688.getPadExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;return mb;};}});return {constrainedMoveable:_68c,boxConstrainedMoveable:_691,parentConstrainedMoveable:_693};});},"esriviewer/portal/PortalSupport":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/connect","dojo/_base/lang","../base/ConfigurationEntryMixin","./PortalSearcher","../base/DataLoaderSupport","esri/dijit/Basemap","esri/dijit/BasemapLayer"],function(_695,_696,con,lang,_697,_698,_699,_69a,_69b){return _695([_697,_699],{constructor:function(){this.portalConfiguration=null;this.loadViewerConfigurationData();if(this.portalConfiguration!=null&&lang.isObject(this.portalConfiguration)&&this.portalConfiguration.url!=null&&this.portalConfiguration.url!=""){this.initPortal();}else{VIEWER_UTILS.log("Portal Configuration not found",VIEWER_GLOBALS.LOG_TYPE.ERROR);_696.publish(VIEWER_GLOBALS.EVENTS.PORTAL.INITIALIZED);}},initPortal:function(){require(["esri/arcgis/Portal"],lang.hitch(this,function(_69c){this.portal=new _69c.Portal(this.portalConfiguration.url);con.connect(this.portal,"onLoad",lang.hitch(this,this._handlePortalLoaded));}));},_handlePortalLoaded:function(_69d){this._createPortalSearcher();this.initListeners();_696.publish(VIEWER_GLOBALS.EVENTS.PORTAL.INITIALIZED);},initListeners:function(){_696.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.GET_INSTANCE,lang.hitch(this,this.handleGetPortalInstance));_696.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.LOG_IN,lang.hitch(this,this.handlePortalLogIn));_696.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.LOG_OUT,lang.hitch(this,this.handlePortalLogOut));_696.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.IS_USER_LOGGED_IN,lang.hitch(this,this.handleIsUserLoggedIn));_696.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.GET_BASEMAPS,lang.hitch(this,this.getBasemaps));},getBasemaps:function(_69e,_69f){if(_69e!=null&&lang.isFunction(_69e)){var self=this;var _6a0=[];if(this.portal){var _6a1;if(_69f!=null){_6a1="group:"+_69f;}else{if(this.portal.basemapGalleryGroupQuery){_6a1=this.portal.basemapGalleryGroupQuery.replace("id:","group:");}else{return;}}_696.publish(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_WEBMAPS,_6a1,null,null,null,function(_6a2){if(_6a2&&_6a2.results){var _6a3;var _6a4={f:"json"};for(var i=0;i<_6a2.results.length;i++){_6a3=_6a2.results[i];self.loadJsonP(_6a3.itemDataUrl,_6a4,lang.partial(function(item,_6a5){var _6a6=[];for(var j=0;j<_6a5.baseMap.baseMapLayers.length;j++){var _6a7=new _69b({url:_6a5.baseMap.baseMapLayers[j].url});_6a6.push(_6a7);}var _6a8=new _69a({thumbnailUrl:item.thumbnailUrl,title:item.title,layers:_6a6});_6a0.push(_6a8);if(_6a0.length==_6a2.results.length){_69e(_6a0);}},_6a3));}}});}}},handleIsUserLoggedIn:function(_6a9){if(_6a9!=null&&lang.isFunction(_6a9)){_6a9(this.portal&&this.portal.getPortalUser()!=null);}},handlePortalLogOut:function(){this.portal.signOut();_696.publish(VIEWER_GLOBALS.EVENTS.PORTAL.USER_LOGGED_OUT);},handlePortalLogIn:function(_6aa){this.portal.signIn().then(lang.hitch(this,function(user){_696.publish(VIEWER_GLOBALS.EVENTS.PORTAL.USER_LOGGED_IN,user);if(_6aa!=null&&lang.isFunction(_6aa)){_6aa(user);}}));},loadViewerConfigurationData:function(){var _6ab;_696.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"portal",function(_6ac){_6ab=_6ac;});this.portalConfiguration=_6ab;},handleGetPortalInstance:function(_6ad){if(_6ad!=null&&lang.isFunction(_6ad)){_6ad(this.portal);}},_createPortalSearcher:function(){this.portalSearcher=new _698();}});});},"dojox/sql/_crypto":function(){define(["dijit","dojo","dojox"],function(_6ae,dojo,_6af){dojo.provide("dojox.sql._crypto");dojo.mixin(_6af.sql._crypto,{_POOL_SIZE:100,encrypt:function(_6b0,_6b1,_6b2){this._initWorkerPool();var msg={plaintext:_6b0,password:_6b1};msg=dojo.toJson(msg);msg="encr:"+String(msg);this._assignWork(msg,_6b2);},decrypt:function(_6b3,_6b4,_6b5){this._initWorkerPool();var msg={ciphertext:_6b3,password:_6b4};msg=dojo.toJson(msg);msg="decr:"+String(msg);this._assignWork(msg,_6b5);},_initWorkerPool:function(){if(!this._manager){try{this._manager=google.gears.factory.create("beta.workerpool","1.0");this._unemployed=[];this._employed={};this._handleMessage=[];var self=this;this._manager.onmessage=function(msg,_6b6){var _6b7=self._employed["_"+_6b6];self._employed["_"+_6b6]=undefined;self._unemployed.push("_"+_6b6);if(self._handleMessage.length){var _6b8=self._handleMessage.shift();self._assignWork(_6b8.msg,_6b8.callback);}_6b7(msg);};var _6b9="function _workerInit(){"+"gearsWorkerPool.onmessage = "+String(this._workerHandler)+";"+"}";var code=_6b9+" _workerInit();";for(var i=0;i<this._POOL_SIZE;i++){this._unemployed.push("_"+this._manager.createWorker(code));}}catch(exp){throw exp.message||exp;}}},_assignWork:function(msg,_6ba){if(!this._handleMessage.length&&this._unemployed.length){var _6bb=this._unemployed.shift().substring(1);this._employed["_"+_6bb]=_6ba;this._manager.sendMessage(msg,parseInt(_6bb,10));}else{this._handleMessage={msg:msg,callback:_6ba};}},_workerHandler:function(msg,_6bc){var Sbox=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22];var Rcon=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]];function _6bd(_6be,w){var Nb=4;var Nr=w.length/Nb-1;var _6bf=[[],[],[],[]];for(var i=0;i<4*Nb;i++){_6bf[i%4][Math.floor(i/4)]=_6be[i];}_6bf=_6c0(_6bf,w,0,Nb);for(var _6c1=1;_6c1<Nr;_6c1++){_6bf=_6c2(_6bf,Nb);_6bf=_6c3(_6bf,Nb);_6bf=_6c4(_6bf,Nb);_6bf=_6c0(_6bf,w,_6c1,Nb);}_6bf=_6c2(_6bf,Nb);_6bf=_6c3(_6bf,Nb);_6bf=_6c0(_6bf,w,Nr,Nb);var _6c5=new Array(4*Nb);for(var i=0;i<4*Nb;i++){_6c5[i]=_6bf[i%4][Math.floor(i/4)];}return _6c5;};function _6c2(s,Nb){for(var r=0;r<4;r++){for(var c=0;c<Nb;c++){s[r][c]=Sbox[s[r][c]];}}return s;};function _6c3(s,Nb){var t=new Array(4);for(var r=1;r<4;r++){for(var c=0;c<4;c++){t[c]=s[r][(c+r)%Nb];}for(var c=0;c<4;c++){s[r][c]=t[c];}}return s;};function _6c4(s,Nb){for(var c=0;c<4;c++){var a=new Array(4);var b=new Array(4);for(var i=0;i<4;i++){a[i]=s[i][c];b[i]=s[i][c]&128?s[i][c]<<1^283:s[i][c]<<1;}s[0][c]=b[0]^a[1]^b[1]^a[2]^a[3];s[1][c]=a[0]^b[1]^a[2]^b[2]^a[3];s[2][c]=a[0]^a[1]^b[2]^a[3]^b[3];s[3][c]=a[0]^b[0]^a[1]^a[2]^b[3];}return s;};function _6c0(_6c6,w,rnd,Nb){for(var r=0;r<4;r++){for(var c=0;c<Nb;c++){_6c6[r][c]^=w[rnd*4+c][r];}}return _6c6;};function _6c7(key){var Nb=4;var Nk=key.length/4;var Nr=Nk+6;var w=new Array(Nb*(Nr+1));var temp=new Array(4);for(var i=0;i<Nk;i++){var r=[key[4*i],key[4*i+1],key[4*i+2],key[4*i+3]];w[i]=r;}for(var i=Nk;i<(Nb*(Nr+1));i++){w[i]=new Array(4);for(var t=0;t<4;t++){temp[t]=w[i-1][t];}if(i%Nk==0){temp=_6c8(_6c9(temp));for(var t=0;t<4;t++){temp[t]^=Rcon[i/Nk][t];}}else{if(Nk>6&&i%Nk==4){temp=_6c8(temp);}}for(var t=0;t<4;t++){w[i][t]=w[i-Nk][t]^temp[t];}}return w;};function _6c8(w){for(var i=0;i<4;i++){w[i]=Sbox[w[i]];}return w;};function _6c9(w){w[4]=w[0];for(var i=0;i<4;i++){w[i]=w[i+1];}return w;};function _6ca(_6cb,_6cc,_6cd){if(!(_6cd==128||_6cd==192||_6cd==256)){return "";}var _6ce=_6cd/8;var _6cf=new Array(_6ce);for(var i=0;i<_6ce;i++){_6cf[i]=_6cc.charCodeAt(i)&255;}var key=_6bd(_6cf,_6c7(_6cf));key=key.concat(key.slice(0,_6ce-16));var _6d0=16;var _6d1=new Array(_6d0);var _6d2=(new Date()).getTime();for(var i=0;i<4;i++){_6d1[i]=(_6d2>>>i*8)&255;}for(var i=0;i<4;i++){_6d1[i+4]=(_6d2/4294967296>>>i*8)&255;}var _6d3=_6c7(key);var _6d4=Math.ceil(_6cb.length/_6d0);var _6d5=new Array(_6d4);for(var b=0;b<_6d4;b++){for(var c=0;c<4;c++){_6d1[15-c]=(b>>>c*8)&255;}for(var c=0;c<4;c++){_6d1[15-c-4]=(b/4294967296>>>c*8);}var _6d6=_6bd(_6d1,_6d3);var _6d7=b<_6d4-1?_6d0:(_6cb.length-1)%_6d0+1;var ct="";for(var i=0;i<_6d7;i++){var _6d8=_6cb.charCodeAt(b*_6d0+i);var _6d9=_6d8^_6d6[i];ct+=String.fromCharCode(_6d9);}_6d5[b]=_6da(ct);}var _6db="";for(var i=0;i<8;i++){_6db+=String.fromCharCode(_6d1[i]);}_6db=_6da(_6db);return _6db+"-"+_6d5.join("-");};function _6dc(_6dd,_6de,_6df){if(!(_6df==128||_6df==192||_6df==256)){return "";}var _6e0=_6df/8;var _6e1=new Array(_6e0);for(var i=0;i<_6e0;i++){_6e1[i]=_6de.charCodeAt(i)&255;}var _6e2=_6c7(_6e1);var key=_6bd(_6e1,_6e2);key=key.concat(key.slice(0,_6e0-16));var _6e3=_6c7(key);_6dd=_6dd.split("-");var _6e4=16;var _6e5=new Array(_6e4);var _6e6=_6e7(_6dd[0]);for(var i=0;i<8;i++){_6e5[i]=_6e6.charCodeAt(i);}var _6e8=new Array(_6dd.length-1);for(var b=1;b<_6dd.length;b++){for(var c=0;c<4;c++){_6e5[15-c]=((b-1)>>>c*8)&255;}for(var c=0;c<4;c++){_6e5[15-c-4]=((b/4294967296-1)>>>c*8)&255;}var _6e9=_6bd(_6e5,_6e3);_6dd[b]=_6e7(_6dd[b]);var pt="";for(var i=0;i<_6dd[b].length;i++){var _6ea=_6dd[b].charCodeAt(i);var _6eb=_6ea^_6e9[i];pt+=String.fromCharCode(_6eb);}_6e8[b-1]=pt;}return _6e8.join("");};function _6da(str){return str.replace(/[\0\t\n\v\f\r\xa0!-]/g,function(c){return "!"+c.charCodeAt(0)+"!";});};function _6e7(str){return str.replace(/!\d\d?\d?!/g,function(c){return String.fromCharCode(c.slice(1,-1));});};function _6ec(_6ed,_6ee){return _6ca(_6ed,_6ee,256);};function _6ef(_6f0,_6f1){return _6dc(_6f0,_6f1,256);};var cmd=msg.substr(0,4);var arg=msg.substr(5);if(cmd=="encr"){arg=eval("("+arg+")");var _6f2=arg.plaintext;var _6f3=arg.password;var _6f4=_6ec(_6f2,_6f3);gearsWorkerPool.sendMessage(String(_6f4),_6bc);}else{if(cmd=="decr"){arg=eval("("+arg+")");var _6f5=arg.ciphertext;var _6f3=arg.password;var _6f4=_6ef(_6f5,_6f3);gearsWorkerPool.sendMessage(String(_6f4),_6bc);}}}});});},"esriviewer/ui/layers/base/model/UserPersistedLayersListViewModel":function(){define(["dojo/_base/declare","dojo/Evented","dojo/has"],function(_6f6,_6f7,has){return _6f6([_6f7],{persistedInfoIconDefaultClasses:"commonIcons16 information",CLEAR_USER_PERSISTED_LAYERS:"clearUserPersistedLayers",REMOVE_USER_PERSISTED_LAYER:"removeUserPersistedLayer",ADD_USER_PERSISTED_LAYER_TO_MAP:"addUserPersistedLayerToMap",constructor:function(){this.persistedLayerInfoIconClass=ko.observable();if((has("ie")<8)){this.persistedLayerInfoIconClass(this.persistedInfoIconDefaultClasses+" userPersistedLayersInfoIconIEHack");}else{this.persistedLayerInfoIconClass(this.persistedInfoIconDefaultClasses+" userPersistedLayersInfoIcon");}var self=this;this.addedUserPersistedLayers=ko.observableArray();this.removeUserPersistedLayer=function(_6f8){if(_6f8==null){return;}self.emit(self.REMOVE_USER_PERSISTED_LAYER,_6f8);self.addedUserPersistedLayers.remove(_6f8);};this.addPersistedLayerToMap=function(_6f9){if(_6f9==null){return;}self.emit(self.ADD_USER_PERSISTED_LAYER_TO_MAP,_6f9);};this.hasEntries=ko.computed(function(){return self.addedUserPersistedLayers().length>0;});},sort:function(){this.addedUserPersistedLayers.sort(function(left,_6fa){var _6fb=left.name.toLowerCase();var _6fc=_6fa.name.toLowerCase();return _6fb==_6fc?0:(_6fb<_6fc?-1:1);});},clearEntries:function(){this.addedUserPersistedLayers.removeAll();this.emit(this.CLEAR_USER_PERSISTED_LAYERS);}});});},"esriviewer/manager/base/ViewerManagerUI":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","./../../ui/user/location/UserLocationWidget","../../ui/footer/FooterTogglerWidget","../../ui/messaging/MessagingWidget","../../ui/navigation/NavigationWidget","../../ui/throbber/ThrobberWidget","../../ui/accordion/ToolsAccordion","dojo/Evented"],function(_6fd,lang,_6fe,_6ff,_700,_701,_702,_703,_704,_705){return _6fd([_705],{FINALIZE_UI_LOAD_COMPLETE:"finalizeUILoadComplete",loadUI:function(){var _706=true;if(lang.isObject(this.viewerConfig.header)){if(this.viewerConfig.header.display!=null){_706=!(String(this.viewerConfig.header.display).toLowerCase()=="false");}}if(_706){this._createHeaderLogo();}this._createIdentifyWidget();this._createMeasureWidget();this._createQueryBuilderWidget();this._createReverseGeocodeWidget();this.createFooterWidget();this._createConfigureViewerWidget();this._createDrawWidget();this._createLegendWidget();this._createReflectivityWidget();var _707=true;if(lang.isObject(this.viewerConfig.toolsBar)){if(this.viewerConfig.toolsBar.display!=null){_707=!(String(this.viewerConfig.toolsBar.display).toLowerCase()=="false");}}if(_707){this._createViewerMainToolbar();}this._createWeatherWidget();this._createTimeSliderWidget();if(VIEWER_UTILS.isHtml5FileUploadSupported()){this._createPointUploadWidget();}else{VIEWER_UTILS.log("Point upload widget disabled. HTML 5 not supported",VIEWER_GLOBALS.LOG_TYPE.WARNING);}this._createFeatureEditorWidget();this._createSocialMediaWidget();this._createPrintWidget();this._createZoomToWidget();this._createZoomToUserLocationWidget();this._createLayersTransparencyWidget();this._createViewerAccordion();this._createPortalPublisherWidget();this._createPlottingWidget();this._createZoomInOutWidget();this.finalizeUILoad();},_createViewerAccordion:function(){if(this.viewerConfig.toolsAccordion.create==null||this.viewerConfig.toolsAccordion.create!=false){_6fe.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.LOAD_DEFAULT_TOOLS,lang.hitch(this,this.createDefaultAccordionTools));this.viewerAccordion=new _704({allowCollapse:this.allowAccordionCollapse,movable:this.allowAccordionMove});_6fe.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.VIEWER_ACCORDION,this.viewerAccordion);}},finalizeUILoad:function(){if(this.viewerAccordion!=null){this.viewerAccordion.startup();var _708=true;}this.createThrobberWidget();this.emit(this.FINALIZE_UI_LOAD_COMPLETE);},_createHeaderLogo:function(){require(["esriviewer/ui/header/HeaderLogo"],lang.hitch(this,function(_709){this.headerLogo=new _709();_6fe.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.HEADER,this.headerLogo);}));},_createIdentifyWidget:function(){if(this.viewerConfig.identifyWidget!=null&&lang.isObject(this.viewerConfig.identifyWidget)&&this.viewerConfig.identifyWidget.create!=null&&this.viewerConfig.identifyWidget.create==true){this.createIdentifyWidget();}},createIdentifyWidget:function(){},_createMeasureWidget:function(){if(this.viewerConfig.geometryServiceUrl!=null&&this.viewerConfig.geometryServiceUrl){if(this.viewerConfig.measureWidget==null||(lang.isObject(this.viewerConfig.measureWidget)&&this.viewerConfig.measureWidget.create!=false)){this.createMeasureWidget();}}},createMeasureWidget:function(){},_createPrintWidget:function(){if(this.viewerConfig.printWidget==null||(lang.isObject(this.viewerConfig.printWidget)&&this.viewerConfig.printWidget.create!=null&&this.viewerConfig.printWidget.create&&this.viewerConfig.printWidget.printTaskUrl!=null)){this.createPrintWidget();}},createPrintWidget:function(){},_createSocialMediaWidget:function(){if(this.viewerConfig.socialMediaWidget==null||(lang.isObject(this.viewerConfig.socialMediaWidget)&&this.viewerConfig.socialMediaWidget.create!=null&&this.viewerConfig.socialMediaWidget.create)){this.createSocialMediaWidget();}},createSocialMediaWidget:function(){},_createFeatureEditorWidget:function(){if(this.viewerConfig.featureEditorWidget!=null&&this.viewerConfig.featureEditorWidget.service!=null&&this.viewerConfig.featureEditorWidget.service.url!=""){this.createFeatureEditorWidget();}},createFeatureEditorWidget:function(){},_createZoomToUserLocationWidget:function(){if(navigator&&navigator.geolocation&&this.viewerConfig.zoomToUserLocationWidget!=null&&lang.isObject(this.viewerConfig.zoomToUserLocationWidget)&&this.viewerConfig.zoomToUserLocationWidget.create===true){this.createZoomToUserLocationWidget();}},createZoomToUserLocationWidget:function(){this.userLocationWidget=new _6ff();_6fe.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.USER_LOCATION,this.userLocationWidget);},_createZoomToWidget:function(){if(this.viewerConfig.zoomToWidget==null||(lang.isObject(this.viewerConfig.zoomToWidget)&&this.viewerConfig.zoomToWidget.create!=null&&this.viewerConfig.zoomToWidget.create)){this.createZoomToWidget();}},createZoomToWidget:function(){},_createPointUploadWidget:function(){if(this.viewerConfig.pointUploadWidget!=null&&this.viewerConfig.pointUploadWidget.create==true){this.createPointUploadWidget();}},createPointUploadWidget:function(){},_createTimeSliderWidget:function(){if(!this.forceHideCoreTimeSlider&&(this.viewerConfig.timeSliderWidget!=null&&this.viewerConfig.timeSliderWidget.create!=false)){this.createTimeSliderWidget();}},createTimeSliderWidget:function(){},_createLayersTransparencyWidget:function(){if(this.viewerConfig.layersTransparencyWidget==null||(lang.isObject(this.viewerConfig.layersTransparencyWidget)&&this.viewerConfig.layersTransparencyWidget.create!=null&&this.viewerConfig.layersTransparencyWidget.create)){this.createLayersTransparencyWidget();}},createLayersTransparencyWidget:function(){},_createConfigureViewerWidget:function(){if(this.viewerConfig.configureWidget==null||this.viewerConfig.configureWidget.create==null||this.viewerConfig.configureWidget.create==true){this.createConfigureViewerWidget();}},createConfigureViewerWidget:function(){},_createReverseGeocodeWidget:function(){if(this.viewerConfig.reverseGeocodeWidget==null||this.viewerConfig.reverseGeocodeWidget.create==null||this.viewerConfig.reverseGeocodeWidget.create==true){if(this.viewerConfig.locators!=null&&lang.isArray(this.viewerConfig.locators)&&this.viewerConfig.locators.length>0){this.createReverseGeocodeWidget();}}},createReverseGeocodeWidget:function(){},_createQueryBuilderWidget:function(){if(this.viewerConfig.queryBuilder&&this.viewerConfig.queryBuilder.create!=null&&this.viewerConfig.queryBuilder.create){this.createQueryBuilderWidget();}},createQueryBuilderWidget:function(){},_createWeatherWidget:function(){if(lang.isObject(this.viewerConfig.weatherWidget)&&this.viewerConfig.weatherWidget.create!=null&&this.viewerConfig.weatherWidget.create==true){this.createWeatherWidget();}},createWeatherWidget:function(){},_createPlottingWidget:function(){if(lang.isObject(this.viewerConfig.plottingWidget)&&this.viewerConfig.plottingWidget.create!=null&&this.viewerConfig.plottingWidget.create==true){this.createPlottingWidget();}},createPlottingWidget:function(){},_createZoomInOutWidget:function(){if(lang.isObject(this.viewerConfig.zoomInAndOutWidget)&&this.viewerConfig.zoomInAndOutWidget.create!=null&&this.viewerConfig.zoomInAndOutWidget.create==true){this.createZoomInOutWidget();}},createZoomInOutWidget:function(){},_createPortalPublisherWidget:function(){if(this.viewerConfig.portal!=null&&lang.isObject(this.viewerConfig.portal)&&this.viewerConfig.portal.url){if(this.viewerConfig.portalPublisher&&this.viewerConfig.portalPublisher.window&&this.viewerConfig.portalPublisher.window.create){this.createPortalPublisherWidget();}}},createPortalPublisherWidget:function(){},createFooterWidget:function(){var _70a=false;if(lang.isObject(this.viewerConfig.footerTogglerWidget)){if(this.viewerConfig.footerTogglerWidget.create!=null){_70a=!(String(this.viewerConfig.footerTogglerWidget.create).toLowerCase()=="false");}}if(_70a){this.footerTogglerWidget=new _700();this.footerTogglerWidget.on("firstFooterShow",lang.hitch(this,this.handleFirstFooterShow));_6fe.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.FOOTER,this.footerTogglerWidget);}},handleFirstFooterShow:function(){},_createLoggingWidget:function(){if(this.viewerConfig.logging&&this.viewerConfig.logging.window&&this.viewerConfig.logging.window.create){this.createLoggingWidget();}},createLoggingWidget:function(){},_createMessagingWidget:function(){this.messagingWidget=new _701();_6fe.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MESSAGING,this.messagingWidget);},createThrobberWidget:function(){this.loadingThrobber=new _703();_6fe.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.THROBBER,this.loadingThrobber);},_createReflectivityWidget:function(){if(this.viewerConfig.reflectivityWidget!=null&&lang.isObject(this.viewerConfig.reflectivityWidget)&&this.viewerConfig.reflectivityWidget.create==true){this.createReflectivityWidget();}},createReflectivityWidget:function(){},_createLegendWidget:function(){if(this.viewerConfig.map.legend==null||this.viewerConfig.map.legend.create==true){this.createLegendWidget();}},createLegendWidget:function(){},_createNavigationToolbar:function(){this.createNavigationToolbar();if(this.navigationToolbar){_6fe.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.NAVIGATION_TOOLBAR,this.navigationToolbar);}this.processNavigationToolbarAddons();},processNavigationToolbarAddons:function(){},createNavigationToolbar:function(){this.navigationToolbar=new _702();},_createDrawWidget:function(){if(this.viewerConfig.drawWidget==null||!lang.isObject(this.viewerConfig.drawWidget)||this.viewerConfig.drawWidget.create==null||this.viewerConfig.drawWidget.create!=false){this.createDrawWidget();}},createDrawWidget:function(){},_createViewerMainToolbar:function(){require(["esriviewer/ui/toolbar/ActionsToolbarWidget"],lang.hitch(this,function(_70b){this.mainToolbar=new _70b();_6fe.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAIN_TOOLBAR,this.mainToolbar);if(lang.isObject(this.viewerConfig.map)){this.mainToolbar.setBasemaps(this.viewerConfig.map.basemaps);}this.createViewerDefaultTools();this._createNavigationToolbar();this._createBookmarkController();this.tweakMainToolbar();}));},tweakMainToolbar:function(){},createViewerDefaultTools:function(){require(["esriviewer/ui/tools/ViewerDefaultTools"],lang.hitch(this,function(_70c){this.viewerDefaultTools=new _70c();this.createAddonTools();this.viewerDefaultTools.createConfigurationMenuItem();}));},createAddonTools:function(){},_createBookmarkController:function(){require(["esriviewer/ui/bookmark/BookmarkController"],lang.hitch(this,function(_70d){this.bookmarkController=new _70d();this._loadBookmarks();}));},_loadBookmarks:function(){if(lang.isObject(this.viewerConfig.bookmarks)&&this.viewerConfig.bookmarks.url!=null){var _70e=lang.hitch(this,function(_70f){this._setServerBookmarks(_70f);});this.loadJson(this.viewerConfig.bookmarks.url,_70e);}if(this.mainToolbar){this.mainToolbar.loadCookieBookmarks();}},_setServerBookmarks:function(_710){if(this.mainToolbar){this.mainToolbar.addStaticBookmarks(_710);}}});});},"esriviewer/ui/measure/model/MeasureWidgetViewModel":function(){define(["dojo/_base/declare","esri/tasks/GeometryService"],function(_711,_712){return _711([],{constructor:function(){this.areaMeasurementUnits=ko.observableArray([{label:"Acres",value:_712.UNIT_ACRES},{label:"Sq Miles",value:_712.UNIT_SQUARE_MILES},{label:"Sq Kilometers",value:_712.UNIT_SQUARE_KILOMETERS},{label:"Hectares",value:_712.UNIT_HECTARES},{label:"Sq Yards",value:_712.UNIT_SQUARE_YARDS},{label:"Sq Feet",value:_712.UNIT_SQUARE_FEET},{label:"Sq Meters",value:_712.UNIT_SQUARE_METERS}]);this.distanceMeasurementUnits=ko.observableArray([{label:"Miles",value:_712.UNIT_STATUTE_MILE},{label:"Kilometers",value:_712.UNIT_KILOMETER},{label:"Feet",value:_712.UNIT_FOOT},{label:"Meters",value:_712.UNIT_METER}]);this.locationUnits=ko.observableArray([{label:"Degrees",value:VIEWER_GLOBALS.ESRI_UNITS.DECIMAL_DEGREES},{label:"DMS",value:VIEWER_GLOBALS.ESRI_UNITS.DEGREE_MINUTE_SECONDS}]);this.measureMethodText=ko.observable("");this.unitsText=ko.observable("");this.resultsText=ko.observable("");this.selectedAreaUnits=ko.observable("");this.selectedDistanceUnits=ko.observable("");this.selectedLocationUnits=ko.observable("");this.areaActive=ko.observable(false);this.distanceActive=ko.observable(false);this.locationActive=ko.observable(false);this.measurementResult=ko.observable("");},handleAreaButtonClick:function(){var _713=this.areaActive();this.areaActive(!_713);this.distanceActive(false);this.locationActive(false);},handleDistanceButtonClick:function(){var _714=this.distanceActive();this.distanceActive(!_714);this.areaActive(false);this.locationActive(false);},handleLocationButtonClick:function(){var _715=this.locationActive();this.locationActive(!_715);this.areaActive(false);this.distanceActive(false);},getLabelForDistanceValue:function(_716){var _717=this.distanceMeasurementUnits();for(var i=0;i<_717.length;i++){if(_717[i].value==_716){return _717[i].label;}}return "Unknown";},getLabelForLocationValue:function(_718){var _719=this.locationUnits();for(var i=0;i<_719.length;i++){if(_719[i].value==_718){return _719[i].label;}}return "Unknown";},getLabelForAreaValue:function(_71a){var _71b=this.areaMeasurementUnits();for(var i=0;i<_71b.length;i++){if(_71b[i].value==_71a){return _71b[i].label;}}return "Unknown";}});});},"esriviewer/ui/weather/reflectivity/ReflectivityWidgetWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","../../window/WindowWidget"],function(_71c,lang,_71d,_71e){return _71c([_71e],{defaultPositioning:{x:400,y:125},windowWidth:"300px",windowHeaderText:"NEXRAD Reflectance",windowIconAltText:"Alt Text",windowIconClass:"commonIcons16 weather",positioningParamName:"reflectance",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/weather/reflectivity/ReflectivityWidget"],lang.hitch(this,function(_71f){this.reflectivityWidget=new _71f();this.setContent(this.reflectivityWidget.domNode);if(this.reflectivityWidget){this.reflectivityWidget.showWmsLayer();}}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_71d.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REFLECTIVITY.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_71d.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REFLECTIVITY.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_71d.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REFLECTIVITY.TOGGLE,lang.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.reflectivityWidget&&this.reflectivityWidget){this.reflectivityWidget.hideWmsLayer();}},show:function(){this.inherited(arguments);if(this.reflectivityWidget){this.reflectivityWidget.showWmsLayer();}}});});},"dijit/layout/StackContainer":function(){define(["dojo/_base/array","dojo/cookie","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/has","dojo/_base/lang","dojo/on","dojo/ready","dojo/topic","dojo/when","../registry","../_WidgetBase","./_LayoutWidget","dojo/i18n!../nls/common"],function(_720,_721,_722,_723,_724,has,lang,on,_725,_726,when,_727,_728,_729){if(has("dijit-legacy-requires")){_725(0,function(){var _72a=["dijit/layout/StackController"];require(_72a);});}var _72b=_722("dijit.layout.StackContainer",_729,{doLayout:true,persist:false,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);_723.add(this.domNode,"dijitLayoutContainer");},postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,"keydown",lang.hitch(this,"_onKeyDown")));},startup:function(){if(this._started){return;}var _72c=this.getChildren();_720.forEach(_72c,this._setupChild,this);if(this.persist){this.selectedChildWidget=_727.byId(_721(this.id+"_selectedChild"));}else{_720.some(_72c,function(_72d){if(_72d.selected){this.selectedChildWidget=_72d;}return _72d.selected;},this);}var _72e=this.selectedChildWidget;if(!_72e&&_72c[0]){_72e=this.selectedChildWidget=_72c[0];_72e.selected=true;}_726.publish(this.id+"-startup",{children:_72c,selected:_72e,textDir:this.textDir});this.inherited(arguments);},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=true;var _72f=this.selectedChildWidget;if(_72f){this._showChild(_72f);}}this.inherited(arguments);},_setupChild:function(_730){var _731=_730.domNode,_732=_724.place("<div role='tabpanel' class='"+this.baseClass+"ChildWrapper dijitHidden'>",_730.domNode,"replace"),_733=_730["aria-label"]||_730.title||_730.label;if(_733){_732.setAttribute("aria-label",_733);}_724.place(_731,_732);_730._wrapper=_732;this.inherited(arguments);if(_731.style.display=="none"){_731.style.display="block";}_730.domNode.title="";},addChild:function(_734,_735){this.inherited(arguments);if(this._started){_726.publish(this.id+"-addChild",_734,_735);this.layout();if(!this.selectedChildWidget){this.selectChild(_734);}}},removeChild:function(page){var idx=_720.indexOf(this.getChildren(),page);this.inherited(arguments);_724.destroy(page._wrapper);delete page._wrapper;if(this._started){_726.publish(this.id+"-removeChild",page);}if(this._descendantsBeingDestroyed){return;}if(this.selectedChildWidget===page){this.selectedChildWidget=undefined;if(this._started){var _736=this.getChildren();if(_736.length){this.selectChild(_736[Math.max(idx-1,0)]);}}}if(this._started){this.layout();}},selectChild:function(page,_737){var d;page=_727.byId(page);if(this.selectedChildWidget!=page){d=this._transition(page,this.selectedChildWidget,_737);this._set("selectedChildWidget",page);_726.publish(this.id+"-selectChild",page);if(this.persist){_721(this.id+"_selectedChild",this.selectedChildWidget.id);}}return when(d||true);},_transition:function(_738,_739){if(_739){this._hideChild(_739);}var d=this._showChild(_738);if(_738.resize){if(this.doLayout){_738.resize(this._containerContentBox||this._contentBox);}else{_738.resize();}}return d;},_adjacent:function(_73a){var _73b=this.getChildren();var _73c=_720.indexOf(_73b,this.selectedChildWidget);_73c+=_73a?1:_73b.length-1;return _73b[_73c%_73b.length];},forward:function(){return this.selectChild(this._adjacent(true),true);},back:function(){return this.selectChild(this._adjacent(false),true);},_onKeyDown:function(e){_726.publish(this.id+"-containerKeyDown",{e:e,page:this});},layout:function(){var _73d=this.selectedChildWidget;if(_73d&&_73d.resize){if(this.doLayout){_73d.resize(this._containerContentBox||this._contentBox);}else{_73d.resize();}}},_showChild:function(page){var _73e=this.getChildren();page.isFirstChild=(page==_73e[0]);page.isLastChild=(page==_73e[_73e.length-1]);page._set("selected",true);if(page._wrapper){_723.replace(page._wrapper,"dijitVisible","dijitHidden");}return (page._onShow&&page._onShow())||true;},_hideChild:function(page){page._set("selected",false);if(page._wrapper){_723.replace(page._wrapper,"dijitHidden","dijitVisible");}page.onHide&&page.onHide();},closeChild:function(page){var _73f=page.onClose&&page.onClose(this,page);if(_73f){this.removeChild(page);page.destroyRecursive();}},destroyDescendants:function(_740){this._descendantsBeingDestroyed=true;this.selectedChildWidget=undefined;_720.forEach(this.getChildren(),function(_741){if(!_740){this.removeChild(_741);}_741.destroyRecursive(_740);},this);this._descendantsBeingDestroyed=false;}});_72b.ChildWidgetProperties={selected:false,disabled:false,closable:false,iconClass:"dijitNoIcon",showTitle:true};lang.extend(_728,_72b.ChildWidgetProperties);return _72b;});},"esriviewer/ui/window/WindowWidget":function(){define(["dojo/_base/declare","dojo/text!./template/WindowWidgetTemplate.html","dojo/topic","dojo/_base/window","dojo/_base/lang","dojo/on","dojo/dom-construct","dojo/dom-class","dojo/dom-style","../base/UITemplatedWidget","dojo/dnd/Moveable","dojox/layout/ResizeHandle","dojo/_base/connect","dojo/dom-geometry"],function(_742,_743,_744,_745,lang,on,_746,_747,_748,_749,_74a,_74b,con,_74c){return _742([_749],{resizeAxis:"xy",animate:true,resizable:false,isPositionedByConfig:true,firstShow:true,showOnLoad:false,visible:false,movable:true,canMinimize:true,windowHeight:null,windowWidth:"35%",positioningParamName:"",windowHeaderText:"Window",windowIconClass:"commonIcons16 application",templateString:_743,closeWindowTitle:"Close Window",windowIconAltText:"Window",constructor:function(){this.animation=VIEWER_GLOBALS.ANIMATIONS.FADE.IN;this.windowTopOffset=(VIEWER_GLOBALS.WINDOW&&VIEWER_GLOBALS.WINDOW.TOP_POSITION_MOVE_OFFSET)?(VIEWER_GLOBALS.WINDOW.TOP_POSITION_MOVE_OFFSET):3;},postCreate:function(){this.inherited(arguments);_746.place(this.domNode,_745.body());this.visible=false;_747.add(this.domNode,"windowHidden");if(this.movable){this._initMover();}else{_748.set(this.windowHeader,"cursor","default");}if(this.windowHeight!=null){_748.set(this.domNode,"height",this.windowHeight);}if(this.windowWidth!=null){_748.set(this.domNode,"width",this.windowWidth);}if(this.resizable){var _74d={targetId:this.id,activeResize:true};if(this.minWidth!=null){_74d["minWidth"]=this.minWidth;}if(this.minHeight!=null){_74d["minHeight"]=this.minHeight;}if(this.resizeAxis){_74d["resizeAxis"]=this.resizeAxis;}this.handle=new _74b(_74d).placeAt(this.domNode);}if(!this.canMinimize){_748.set(this.windowMinimizeImg,"display","none");}if(!this.showOnLoad){this.hide();}else{this.show();}},initListeners:function(){this.inherited(arguments);this.connects.push(on(this.windowCloseImg,"click",lang.hitch(this,this.hide,0)));this.connects.push(on(this.windowMinimizeImg,"click",lang.hitch(this,this.toggleContent)));this.subscribes.push(_744.subscribe("/dojo/resize/stop",lang.hitch(this,this.handleGlobalResizeFired)));this.subscribes.push(_744.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.REPOSITION_ALL,lang.hitch(this,this.handleReposition)));},loadViewerConfigurationData:function(){var _74e=null;_744.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"animationsEnabled",function(_74f){_74e=_74f;});if(_74e!=null){this.animate=_74e;}},handleReposition:function(){var pos=_74c.position(this.domNode);if(pos.y<this.windowTopOffset){_748.set(this.domNode,"top",this.windowTopOffset+"px");}},handleGlobalResizeFired:function(_750){if(this.handle){if(_750.id===this.handle.id){this.onWindowResize();}}},setContent:function(_751){_746.empty(this.windowContent);_746.place(_751,this.windowContent);},toggle:function(){if(this.visible){this.hide();}else{this.show();}},show:function(){if(!this.visible){this.onBeforeWindowShow();_747.remove(this.domNode,"windowHidden");if(this.animate){this._animateWidget();}this.visible=true;if(this.firstShow){this.firstShow=false;this.onFirstWindowShow();}this.onAfterWindowShow();}},hide:function(){if(this.visible){this.onBeforeWindowHide();_747.add(this.domNode,"windowHidden");if(this.animate){this._removeAnimationClasses();}this.visible=false;this.hidePopups();this.onAfterWindowHide();}},_initMover:function(){this.mover=new _74a(this.domNode,{handle:this.headerMoverContainer});con.connect(this.mover,"onMove",VIEWER_UTILS,VIEWER_UTILS.handleContainerMoved);},toggleContent:function(){var _752=_748.get(this.windowContentOuter,"display");if(_752=="none"){this._expand();}else{this._collapse();}},_expand:function(){_747.remove(this.windowHeader,"windowHeaderCollapsed");_748.set(this.windowContentOuter,"display","block");_747.add(this.windowHeader,"windowHeader");if(this.windowHeight!=null){_748.set(this.domNode,"height",this.windowHeight);}this.onWindowExpanded();if(this.handle&&this.handle.resizeHandle){this.handle.resizeHandle.style.display="block";}},_collapse:function(){_747.add(this.windowHeader,"windowHeaderCollapsed");_747.remove(this.windowHeader,"windowHeader");_748.set(this.windowContentOuter,"display","none");if(this.windowHeight!=null){_748.set(this.domNode,"height",null);}this.hidePopups();this.onWindowCollapsed();if(this.handle&&this.handle.resizeHandle){this.handle.resizeHandle.style.display="none";}},hidePopups:function(){},setWindowWidthFromInt:function(_753){_748.set(this.domNode,"width",_753+"px");},onWindowExpanded:function(){},onWindowCollapsed:function(){},onWindowResize:function(){},onBeforeWindowShow:function(){},onBeforeWindowHide:function(){},onAfterWindowShow:function(){},onAfterWindowHide:function(){},onFirstWindowShow:function(){}});});},"esriviewer/ui/layers/base/UserPersistedLayersListWidget":function(){define(["dojo/_base/declare","dojo/text!./template/UserPersistedLayersListingTemplate.html","../../base/UITemplatedWidget","dojo/_base/lang","./model/UserPersistedLayersListViewModel"],function(_754,_755,_756,lang,_757){return _754([_756],{bindingsApplied:false,templateString:_755,constructor:function(){this.userPersistedGraphics={};},postCreate:function(){this.inherited(arguments);this.viewModel=new _757();this.viewModel.on(this.viewModel.REMOVE_USER_PERSISTED_LAYER,lang.hitch(this,this.handleRemoveUserPersistedLayer));this.viewModel.on(this.viewModel.ADD_USER_PERSISTED_LAYER_TO_MAP,lang.hitch(this,this.handleAddUserPersistedLayerToMap));this.viewModel.on(this.viewModel.CLEAR_USER_PERSISTED_LAYERS,lang.hitch(this,this.handleClearUserPersistedLayers));},applyBindings:function(){if(!this.bindingsApplied){this.bindingsApplied=true;ko.applyBindings(this.viewModel,this.domNode);}},handleAddUserPersistedLayerToMap:function(_758){if(_758==null||!lang.isObject(_758)||_758.url==null||_758.url==""){return;}this.onAddUserPersistedLayerToMap(_758.url,_758.name);},onAddUserPersistedLayerToMap:function(_759,_75a){},handleClearUserPersistedLayers:function(){this.onRemoveAllUserPersistedLayers();},handleRemoveUserPersistedLayer:function(_75b){if(_75b&&lang.isObject(_75b)){var id=VIEWER_UTILS.getLayerUniqueId(_75b);if(id==null){return;}this.onRemoveUserPersistedLayer(id);}},onRemoveAllUserPersistedLayers:function(){},onRemoveUserPersistedLayer:function(_75c){},addExistingPersistedLayerItems:function(_75d){for(var key in _75d){this.viewModel.addedUserPersistedLayers.push(_75d[key]);}this.viewModel.sort();this.applyBindings();},addPersistedLayer:function(_75e){this.viewModel.addedUserPersistedLayers.push(_75e);this.viewModel.sort();}});});},"dijit/DropDownMenu":function(){define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_OnDijitClickMixin","./_MenuBase"],function(_75f,keys,_760,_761,_762){return _75f("dijit.DropDownMenu",[_762,_761],{templateString:_760,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev();},_onDownArrow:function(){this.focusNext();},_onRightArrow:function(evt){this._moveToPopup(evt);evt.stopPropagation();evt.preventDefault();},_onLeftArrow:function(){if(this.parentMenu){if(this.parentMenu._isMenuBar){this.parentMenu.focusPrev();}else{this.onCancel(false);}}else{evt.stopPropagation();evt.preventDefault();}}});});},"dijit/Menu":function(){define(["require","dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window","dojo/window","./popup","./DropDownMenu","dojo/ready"],function(_763,_764,_765,dom,_766,_767,_768,keys,lang,on,has,win,_769,pm,_76a,_76b){if(has("dijit-legacy-requires")){_76b(0,function(){var _76c=["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"];_763(_76c);});}return _765("dijit.Menu",_76a,{constructor:function(){this._bindings=[];},targetNodeIds:[],selector:"",contextMenuForWindow:false,leftClickToOpen:false,refocus:true,postCreate:function(){if(this.contextMenuForWindow){this.bindDomNode(this.ownerDocumentBody);}else{_764.forEach(this.targetNodeIds,this.bindDomNode,this);}this.inherited(arguments);},_iframeContentWindow:function(_76d){return _769.get(this._iframeContentDocument(_76d))||this._iframeContentDocument(_76d)["__parent__"]||(_76d.name&&document.frames[_76d.name])||null;},_iframeContentDocument:function(_76e){return _76e.contentDocument||(_76e.contentWindow&&_76e.contentWindow.document)||(_76e.name&&document.frames[_76e.name]&&document.frames[_76e.name].document)||null;},bindDomNode:function(node){node=dom.byId(node,this.ownerDocument);var cn;if(node.tagName.toLowerCase()=="iframe"){var _76f=node,_770=this._iframeContentWindow(_76f);cn=win.body(_770.document);}else{cn=(node==win.body(this.ownerDocument)?this.ownerDocument.documentElement:node);}var _771={node:node,iframe:_76f};_766.set(node,"_dijitMenu"+this.id,this._bindings.push(_771));var _772=lang.hitch(this,function(cn){var _773=this.selector,_774=_773?function(_775){return on.selector(_773,_775);}:function(_776){return _776;},self=this;return [on(cn,_774(this.leftClickToOpen?"click":"contextmenu"),function(evt){evt.stopPropagation();evt.preventDefault();self._scheduleOpen(this,_76f,{x:evt.pageX,y:evt.pageY});}),on(cn,_774("keydown"),function(evt){if(evt.shiftKey&&evt.keyCode==keys.F10){evt.stopPropagation();evt.preventDefault();self._scheduleOpen(this,_76f);}})];});_771.connects=cn?_772(cn):[];if(_76f){_771.onloadHandler=lang.hitch(this,function(){var _777=this._iframeContentWindow(_76f),cn=win.body(_777.document);_771.connects=_772(cn);});if(_76f.addEventListener){_76f.addEventListener("load",_771.onloadHandler,false);}else{_76f.attachEvent("onload",_771.onloadHandler);}}},unBindDomNode:function(_778){var node;try{node=dom.byId(_778,this.ownerDocument);}catch(e){return;}var _779="_dijitMenu"+this.id;if(node&&_766.has(node,_779)){var bid=_766.get(node,_779)-1,b=this._bindings[bid],h;while((h=b.connects.pop())){h.remove();}var _77a=b.iframe;if(_77a){if(_77a.removeEventListener){_77a.removeEventListener("load",b.onloadHandler,false);}else{_77a.detachEvent("onload",b.onloadHandler);}}_766.remove(node,_779);delete this._bindings[bid];}},_scheduleOpen:function(_77b,_77c,_77d){if(!this._openTimer){this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:_77b,iframe:_77c,coords:_77d});},1);}},_openMyself:function(args){var _77e=args.target,_77f=args.iframe,_780=args.coords,_781=!_780;this.currentTarget=_77e;if(_780){if(_77f){var ifc=_767.position(_77f,true),_782=this._iframeContentWindow(_77f),_783=_767.docScroll(_782.document);var cs=_768.getComputedStyle(_77f),tp=_768.toPixelValue,left=(has("ie")&&has("quirks")?0:tp(_77f,cs.paddingLeft))+(has("ie")&&has("quirks")?tp(_77f,cs.borderLeftWidth):0),top=(has("ie")&&has("quirks")?0:tp(_77f,cs.paddingTop))+(has("ie")&&has("quirks")?tp(_77f,cs.borderTopWidth):0);_780.x+=ifc.x+left-_783.x;_780.y+=ifc.y+top-_783.y;}}else{_780=_767.position(_77e,true);_780.x+=10;_780.y+=10;}var self=this;var _784=this._focusManager.get("prevNode");var _785=this._focusManager.get("curNode");var _786=!_785||(dom.isDescendant(_785,this.domNode))?_784:_785;function _787(){if(self.refocus&&_786){_786.focus();}pm.close(self);};pm.open({popup:this,x:_780.x,y:_780.y,onExecute:_787,onCancel:_787,orient:this.isLeftToRight()?"L":"R"});this.focus();if(!_781){this.defer(function(){this._cleanUp(true);});}this._onBlur=function(){this.inherited("_onBlur",arguments);pm.close(this);};},destroy:function(){_764.forEach(this._bindings,function(b){if(b){this.unBindDomNode(b.node);}},this);this.inherited(arguments);}});});},"dijit/form/_CheckBoxMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(_788,_789){return _788("dijit.form._CheckBoxMixin",null,{type:"checkbox",value:"on",readOnly:false,_aria_attr:"aria-checked",_setReadOnlyAttr:function(_78a){this._set("readOnly",_78a);_789.set(this.focusNode,"readOnly",_78a);},_setLabelAttr:undefined,_getSubmitValue:function(_78b){return (_78b==null||_78b==="")?"on":_78b;},_setValueAttr:function(_78c){_78c=this._getSubmitValue(_78c);this._set("value",_78c);_789.set(this.focusNode,"value",_78c);},reset:function(){this.inherited(arguments);this._set("value",this._getSubmitValue(this.params.value));_789.set(this.focusNode,"value",this.value);},_onClick:function(e){if(this.readOnly){e.stopPropagation();e.preventDefault();return false;}return this.inherited(arguments);}});});},"esriviewer/ui/footer/model/FooterTogglerViewModel":function(){define(["dojo/_base/declare"],function(_78d){return _78d([],{constructor:function(){this.expanded=ko.observable(false);}});});},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(_78e,_78f){return _78e("dijit._Contained",null,{_getSibling:function(_790){var node=this.domNode;do{node=node[_790+"Sibling"];}while(node&&node.nodeType!=1);return node&&_78f.byNode(node);},getPreviousSibling:function(){return this._getSibling("previous");},getNextSibling:function(){return this._getSibling("next");},getIndexInParent:function(){var p=this.getParent();if(!p||!p.getIndexOfChild){return -1;}return p.getIndexOfChild(this);}});});},"dijit/_KeyNavContainer":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/_base/kernel","dojo/keys","dojo/_base/lang","./registry","./_Container","./_FocusMixin","./_KeyNavMixin"],function(_791,_792,_793,_794,keys,lang,_795,_796,_797,_798){return _792("dijit._KeyNavContainer",[_797,_798,_796],{connectKeyNavHandlers:function(_799,_79a){var _79b=(this._keyNavCodes={});var prev=lang.hitch(this,"focusPrev");var next=lang.hitch(this,"focusNext");_791.forEach(_799,function(code){_79b[code]=prev;});_791.forEach(_79a,function(code){_79b[code]=next;});_79b[keys.HOME]=lang.hitch(this,"focusFirstChild");_79b[keys.END]=lang.hitch(this,"focusLastChild");},startupKeyNavChildren:function(){_794.deprecated("startupKeyNavChildren() call no longer needed","","2.0");},startup:function(){this.inherited(arguments);_791.forEach(this.getChildren(),lang.hitch(this,"_startupChild"));},addChild:function(_79c,_79d){this.inherited(arguments);this._startupChild(_79c);},_startupChild:function(_79e){_79e.set("tabIndex","-1");},_getFirst:function(){var _79f=this.getChildren();return _79f.length?_79f[0]:null;},_getLast:function(){var _7a0=this.getChildren();return _7a0.length?_7a0[_7a0.length-1]:null;},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1));},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),true);},childSelector:function(node){var node=_795.byNode(node);return node&&node.getParent()==this;}});});},"esriviewer/ui/draw/configure/model/ConfigureDrawViewModel":function(){define(["dojo/_base/declare"],function(_7a1){return _7a1([],{constructor:function(){this.showConfigureGeometryIcons=ko.observable(true);this.showEnvelopeIcon=ko.observable(true);this.showTextIcon=ko.observable(true);this.pointConfigurationActive=ko.observable(true);this.lineConfigurationActive=ko.observable(false);this.rectangleConfigurationActive=ko.observable(false);this.polygonConfigurationActive=ko.observable(false);this.textConfigurationActive=ko.observable(false);},showPointConfiguration:function(){this.pointConfigurationActive(true);this.lineConfigurationActive(false);this.rectangleConfigurationActive(false);this.polygonConfigurationActive(false);this.textConfigurationActive(false);},showLineConfiguration:function(){this.lineConfigurationActive(true);this.pointConfigurationActive(false);this.rectangleConfigurationActive(false);this.polygonConfigurationActive(false);this.textConfigurationActive(false);},showRectangleConfiguration:function(){this.rectangleConfigurationActive(true);this.lineConfigurationActive(false);this.pointConfigurationActive(false);this.polygonConfigurationActive(false);this.textConfigurationActive(false);},showPolygonConfiguration:function(){this.polygonConfigurationActive(true);this.rectangleConfigurationActive(false);this.lineConfigurationActive(false);this.pointConfigurationActive(false);this.textConfigurationActive(false);},showTextConfiguration:function(){this.textConfigurationActive(true);this.polygonConfigurationActive(false);this.rectangleConfigurationActive(false);this.lineConfigurationActive(false);this.pointConfigurationActive(false);}});});},"esriviewer/ui/layers/model/LayersWidgetViewModel":function(){define(["dojo/_base/declare","dojo/topic","dojo/Evented"],function(_7a2,_7a3,_7a4){return _7a2([_7a4],{ADD_LAYERS_VISIBLE:"addLayersVisible",constructor:function(){this.firstAddLayersDisplay=true;this.layersListVisible=ko.observable(true);this.addLayersVisible=ko.observable(false);this.persistedLayersVisible=ko.observable(false);this.showWKIDInAddLayers=ko.observable(true);this.showUserPersistedLayersIcon=ko.observable(true);this.viewerWKID=ko.observable("");},showLayersList:function(){this.layersListVisible(true);this.addLayersVisible(false);this.persistedLayersVisible(false);},showAddLayers:function(){if(this.addLayersVisible()){return;}if(this.firstAddLayersDisplay){var _7a5=null;_7a3.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,function(ext){_7a5=ext;});if(_7a5&&_7a5.spatialReference&&_7a5.spatialReference.wkid!=null){this.viewerWKID(_7a5.spatialReference.wkid.toString());}this.firstAddLayersDisplay=false;}this.layersListVisible(false);this.addLayersVisible(true);this.persistedLayersVisible(false);this.emit(this.ADD_LAYERS_VISIBLE);},showUserPersistedLayers:function(){this.layersListVisible(false);this.addLayersVisible(false);this.persistedLayersVisible(true);}});});},"dojox/timing/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang"],function(dojo){dojo.experimental("dojox.timing");dojo.getObject("timing",true,dojox);dojox.timing.Timer=function(_7a6){this.timer=null;this.isRunning=false;this.interval=_7a6;this.onStart=null;this.onStop=null;};dojo.extend(dojox.timing.Timer,{onTick:function(){},setInterval:function(_7a7){if(this.isRunning){window.clearInterval(this.timer);}this.interval=_7a7;if(this.isRunning){this.timer=window.setInterval(dojo.hitch(this,"onTick"),this.interval);}},start:function(){if(typeof this.onStart=="function"){this.onStart();}this.isRunning=true;this.timer=window.setInterval(dojo.hitch(this,"onTick"),this.interval);},stop:function(){if(typeof this.onStop=="function"){this.onStop();}this.isRunning=false;window.clearInterval(this.timer);}});return dojox.timing;});},"dojox/sql/_base":function(){define(["dijit","dojo","dojox","dojo/require!dojox/sql/_crypto"],function(_7a8,dojo,_7a9){dojo.provide("dojox.sql._base");dojo.require("dojox.sql._crypto");dojo.mixin(_7a9.sql,{dbName:null,debug:(dojo.exists("dojox.sql.debug")?_7a9.sql.debug:false),open:function(_7aa){if(this._dbOpen&&(!_7aa||_7aa==this.dbName)){return;}if(!this.dbName){this.dbName="dot_store_"+window.location.href.replace(/[^0-9A-Za-z_]/g,"_");if(this.dbName.length>63){this.dbName=this.dbName.substring(0,63);}}if(!_7aa){_7aa=this.dbName;}try{this._initDb();this.db.open(_7aa);this._dbOpen=true;}catch(exp){throw exp.message||exp;}},close:function(_7ab){if(dojo.isIE){return;}if(!this._dbOpen&&(!_7ab||_7ab==this.dbName)){return;}if(!_7ab){_7ab=this.dbName;}try{this.db.close(_7ab);this._dbOpen=false;}catch(exp){throw exp.message||exp;}},_exec:function(_7ac){try{this._initDb();if(!this._dbOpen){this.open();this._autoClose=true;}var sql=null;var _7ad=null;var _7ae=null;var args=dojo._toArray(_7ac);sql=args.splice(0,1)[0];if(this._needsEncrypt(sql)||this._needsDecrypt(sql)){_7ad=args.splice(args.length-1,1)[0];_7ae=args.splice(args.length-1,1)[0];}if(this.debug){this._printDebugSQL(sql,args);}var _7af;if(this._needsEncrypt(sql)){_7af=new _7a9.sql._SQLCrypto("encrypt",sql,_7ae,args,_7ad);return null;}else{if(this._needsDecrypt(sql)){_7af=new _7a9.sql._SQLCrypto("decrypt",sql,_7ae,args,_7ad);return null;}}var rs=this.db.execute(sql,args);rs=this._normalizeResults(rs);if(this._autoClose){this.close();}return rs;}catch(exp){exp=exp.message||exp;if(this._autoClose){try{this.close();}catch(e){}}throw exp;}return null;},_initDb:function(){if(!this.db){try{this.db=google.gears.factory.create("beta.database","1.0");}catch(exp){dojo.setObject("google.gears.denied",true);if(_7a9.off){_7a9.off.onFrameworkEvent("coreOperationFailed");}throw "Google Gears must be allowed to run";}}},_printDebugSQL:function(sql,args){var msg="dojox.sql(\""+sql+"\"";for(var i=0;i<args.length;i++){if(typeof args[i]=="string"){msg+=", \""+args[i]+"\"";}else{msg+=", "+args[i];}}msg+=")";},_normalizeResults:function(rs){var _7b0=[];if(!rs){return [];}while(rs.isValidRow()){var row={};for(var i=0;i<rs.fieldCount();i++){var _7b1=rs.fieldName(i);var _7b2=rs.field(i);row[_7b1]=_7b2;}_7b0.push(row);rs.next();}rs.close();return _7b0;},_needsEncrypt:function(sql){return /encrypt\([^\)]*\)/i.test(sql);},_needsDecrypt:function(sql){return /decrypt\([^\)]*\)/i.test(sql);}});dojo.declare("dojox.sql._SQLCrypto",null,{constructor:function(_7b3,sql,_7b4,args,_7b5){if(_7b3=="encrypt"){this._execEncryptSQL(sql,_7b4,args,_7b5);}else{this._execDecryptSQL(sql,_7b4,args,_7b5);}},_execEncryptSQL:function(sql,_7b6,args,_7b7){var _7b8=this._stripCryptoSQL(sql);var _7b9=this._flagEncryptedArgs(sql,args);var self=this;this._encrypt(_7b8,_7b6,args,_7b9,function(_7ba){var _7bb=false;var _7bc=[];var exp=null;try{_7bc=_7a9.sql.db.execute(_7b8,_7ba);}catch(execError){_7bb=true;exp=execError.message||execError;}if(exp!=null){if(_7a9.sql._autoClose){try{_7a9.sql.close();}catch(e){}}_7b7(null,true,exp.toString());return;}_7bc=_7a9.sql._normalizeResults(_7bc);if(_7a9.sql._autoClose){_7a9.sql.close();}if(_7a9.sql._needsDecrypt(sql)){var _7bd=self._determineDecryptedColumns(sql);self._decrypt(_7bc,_7bd,_7b6,function(_7be){_7b7(_7be,false,null);});}else{_7b7(_7bc,false,null);}});},_execDecryptSQL:function(sql,_7bf,args,_7c0){var _7c1=this._stripCryptoSQL(sql);var _7c2=this._determineDecryptedColumns(sql);var _7c3=false;var _7c4=[];var exp=null;try{_7c4=_7a9.sql.db.execute(_7c1,args);}catch(execError){_7c3=true;exp=execError.message||execError;}if(exp!=null){if(_7a9.sql._autoClose){try{_7a9.sql.close();}catch(e){}}_7c0(_7c4,true,exp.toString());return;}_7c4=_7a9.sql._normalizeResults(_7c4);if(_7a9.sql._autoClose){_7a9.sql.close();}this._decrypt(_7c4,_7c2,_7bf,function(_7c5){_7c0(_7c5,false,null);});},_encrypt:function(sql,_7c6,args,_7c7,_7c8){this._totalCrypto=0;this._finishedCrypto=0;this._finishedSpawningCrypto=false;this._finalArgs=args;for(var i=0;i<args.length;i++){if(_7c7[i]){var _7c9=args[i];var _7ca=i;this._totalCrypto++;_7a9.sql._crypto.encrypt(_7c9,_7c6,dojo.hitch(this,function(_7cb){this._finalArgs[_7ca]=_7cb;this._finishedCrypto++;if(this._finishedCrypto>=this._totalCrypto&&this._finishedSpawningCrypto){_7c8(this._finalArgs);}}));}}this._finishedSpawningCrypto=true;},_decrypt:function(_7cc,_7cd,_7ce,_7cf){this._totalCrypto=0;this._finishedCrypto=0;this._finishedSpawningCrypto=false;this._finalResultSet=_7cc;for(var i=0;i<_7cc.length;i++){var row=_7cc[i];for(var _7d0 in row){if(_7cd=="*"||_7cd[_7d0]){this._totalCrypto++;var _7d1=row[_7d0];this._decryptSingleColumn(_7d0,_7d1,_7ce,i,function(_7d2){_7cf(_7d2);});}}}this._finishedSpawningCrypto=true;},_stripCryptoSQL:function(sql){sql=sql.replace(/DECRYPT\(\*\)/ig,"*");var _7d3=sql.match(/ENCRYPT\([^\)]*\)/ig);if(_7d3!=null){for(var i=0;i<_7d3.length;i++){var _7d4=_7d3[i];var _7d5=_7d4.match(/ENCRYPT\(([^\)]*)\)/i)[1];sql=sql.replace(_7d4,_7d5);}}_7d3=sql.match(/DECRYPT\([^\)]*\)/ig);if(_7d3!=null){for(i=0;i<_7d3.length;i++){var _7d6=_7d3[i];var _7d7=_7d6.match(/DECRYPT\(([^\)]*)\)/i)[1];sql=sql.replace(_7d6,_7d7);}}return sql;},_flagEncryptedArgs:function(sql,args){var _7d8=new RegExp(/([\"][^\"]*\?[^\"]*[\"])|([\'][^\']*\?[^\']*[\'])|(\?)/ig);var _7d9;var _7da=0;var _7db=[];while((_7d9=_7d8.exec(sql))!=null){var _7dc=RegExp.lastMatch+"";if(/^[\"\']/.test(_7dc)){continue;}var _7dd=false;if(/ENCRYPT\([^\)]*$/i.test(RegExp.leftContext)){_7dd=true;}_7db[_7da]=_7dd;_7da++;}return _7db;},_determineDecryptedColumns:function(sql){var _7de={};if(/DECRYPT\(\*\)/i.test(sql)){_7de="*";}else{var _7df=/DECRYPT\((?:\s*\w*\s*\,?)*\)/ig;var _7e0=_7df.exec(sql);while(_7e0){var _7e1=new String(RegExp.lastMatch);var _7e2=_7e1.replace(/DECRYPT\(/i,"");_7e2=_7e2.replace(/\)/,"");_7e2=_7e2.split(/\s*,\s*/);dojo.forEach(_7e2,function(_7e3){if(/\s*\w* AS (\w*)/i.test(_7e3)){_7e3=_7e3.match(/\s*\w* AS (\w*)/i)[1];}_7de[_7e3]=true;});_7e0=_7df.exec(sql);}}return _7de;},_decryptSingleColumn:function(_7e4,_7e5,_7e6,_7e7,_7e8){_7a9.sql._crypto.decrypt(_7e5,_7e6,dojo.hitch(this,function(_7e9){this._finalResultSet[_7e7][_7e4]=_7e9;this._finishedCrypto++;if(this._finishedCrypto>=this._totalCrypto&&this._finishedSpawningCrypto){_7e8(this._finalResultSet);}}));}});(function(){var _7ea=_7a9.sql;_7a9.sql=new Function("return dojox.sql._exec(arguments);");dojo.mixin(_7a9.sql,_7ea);})();});},"dijit/form/CheckBox":function(){define(["require","dojo/_base/declare","dojo/dom-attr","dojo/has","dojo/query","dojo/ready","./ToggleButton","./_CheckBoxMixin","dojo/text!./templates/CheckBox.html","dojo/NodeList-dom","../a11yclick"],function(_7eb,_7ec,_7ed,has,_7ee,_7ef,_7f0,_7f1,_7f2){if(has("dijit-legacy-requires")){_7ef(0,function(){var _7f3=["dijit/form/RadioButton"];_7eb(_7f3);});}return _7ec("dijit.form.CheckBox",[_7f0,_7f1],{templateString:_7f2,baseClass:"dijitCheckBox",_setValueAttr:function(_7f4,_7f5){if(typeof _7f4=="string"){this.inherited(arguments);_7f4=true;}if(this._created){this.set("checked",_7f4,_7f5);}},_getValueAttr:function(){return this.checked&&this._get("value");},_setIconClassAttr:null,_setNameAttr:"focusNode",postMixInProperties:function(){this.inherited(arguments);this.checkedAttrSetting="";},_fillContent:function(){},_onFocus:function(){if(this.id){_7ee("label[for='"+this.id+"']").addClass("dijitFocusedLabel");}this.inherited(arguments);},_onBlur:function(){if(this.id){_7ee("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");}this.inherited(arguments);}});});},"dojox/storage/manager":function(){define(["dijit","dojo","dojox"],function(_7f6,dojo,_7f7){dojo.provide("dojox.storage.manager");_7f7.storage.manager=new function(){this.currentProvider=null;this.available=false;this.providers=[];this._initialized=false;this._onLoadListeners=[];this.initialize=function(){this.autodetect();};this.register=function(name,_7f8){this.providers.push(_7f8);this.providers[name]=_7f8;};this.setProvider=function(_7f9){};this.autodetect=function(){if(this._initialized){return;}var _7fa=dojo.config["forceStorageProvider"]||false;var _7fb;for(var i=0;i<this.providers.length;i++){_7fb=this.providers[i];if(_7fa&&_7fa==_7fb.declaredClass){_7fb.isAvailable();break;}else{if(!_7fa&&_7fb.isAvailable()){break;}}}if(!_7fb){this._initialized=true;this.available=false;this.currentProvider=null;this.loaded();return;}this.currentProvider=_7fb;dojo.mixin(_7f7.storage,this.currentProvider);_7f7.storage.initialize();this._initialized=true;this.available=true;};this.isAvailable=function(){return this.available;};this.addOnLoad=function(func){this._onLoadListeners.push(func);if(this.isInitialized()){this._fireLoaded();}};this.removeOnLoad=function(func){for(var i=0;i<this._onLoadListeners.length;i++){if(func==this._onLoadListeners[i]){this._onLoadListeners.splice(i,1);break;}}};this.isInitialized=function(){if(this.currentProvider!=null&&this.currentProvider.declaredClass=="dojox.storage.FlashStorageProvider"&&_7f7.flash.ready==false){return false;}else{return this._initialized;}};this.supportsProvider=function(_7fc){try{var _7fd=eval("new "+_7fc+"()");var _7fe=_7fd.isAvailable();if(!_7fe){return false;}return _7fe;}catch(e){return false;}};this.getProvider=function(){return this.currentProvider;};this.loaded=function(){this._fireLoaded();};this._fireLoaded=function(){dojo.forEach(this._onLoadListeners,function(i){try{i();}catch(e){}});};this.getResourceList=function(){var _7ff=[];dojo.forEach(_7f7.storage.manager.providers,function(_800){_7ff=_7ff.concat(_800.getResourceList());});return _7ff;};};});},"dijit/tree/_dndSelector":function(){define(["dojo/_base/array","dojo/_base/connect","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/dom","dojo/mouse","dojo/on","dojo/touch","../a11yclick","./_dndContainer"],function(_801,_802,_803,_804,lang,dom,_805,on,_806,_807,_808){return _803("dijit.tree._dndSelector",_808,{constructor:function(){this.selection={};this.anchor=null;this.events.push(on(this.tree.domNode,_806.press,lang.hitch(this,"onMouseDown")),on(this.tree.domNode,_806.release,lang.hitch(this,"onMouseUp")),on(this.tree.domNode,_806.move,lang.hitch(this,"onMouseMove")),on(this.tree.domNode,_807.press,lang.hitch(this,"onClickPress")),on(this.tree.domNode,_807.release,lang.hitch(this,"onClickRelease")));},singular:false,getSelectedTreeNodes:function(){var _809=[],sel=this.selection;for(var i in sel){_809.push(sel[i]);}return _809;},selectNone:function(){this.setSelection([]);return this;},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null;},addTreeNode:function(node,_80a){this.setSelection(this.getSelectedTreeNodes().concat([node]));if(_80a){this.anchor=node;}return node;},removeTreeNode:function(node){var _80b=_801.filter(this.getSelectedTreeNodes(),function(_80c){return !dom.isDescendant(_80c.domNode,node.domNode);});this.setSelection(_80b);return node;},isTreeNodeSelected:function(node){return node.id&&!!this.selection[node.id];},setSelection:function(_80d){var _80e=this.getSelectedTreeNodes();_801.forEach(this._setDifference(_80e,_80d),lang.hitch(this,function(node){node.setSelected(false);if(this.anchor==node){delete this.anchor;}delete this.selection[node.id];}));_801.forEach(this._setDifference(_80d,_80e),lang.hitch(this,function(node){node.setSelected(true);this.selection[node.id]=node;}));this._updateSelectionProperties();},_setDifference:function(xs,ys){_801.forEach(ys,function(y){y.__exclude__=true;});var ret=_801.filter(xs,function(x){return !x.__exclude__;});_801.forEach(ys,function(y){delete y["__exclude__"];});return ret;},_updateSelectionProperties:function(){var _80f=this.getSelectedTreeNodes();var _810=[],_811=[],_812=[];_801.forEach(_80f,function(node){var ary=node.getTreePath(),_813=this.tree.model;_811.push(node);_810.push(ary);ary=_801.map(ary,function(item){return _813.getIdentity(item);},this);_812.push(ary.join("/"));},this);var _814=_801.map(_811,function(node){return node.item;});this.tree._set("paths",_810);this.tree._set("path",_810[0]||[]);this.tree._set("selectedNodes",_811);this.tree._set("selectedNode",_811[0]||null);this.tree._set("selectedItems",_814);this.tree._set("selectedItem",_814[0]||null);},onClickPress:function(e){if(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(e.target,this.current)){return;}if(_805.isLeft(e)){e.preventDefault();}var _815=e.type=="keydown"?this.tree.focusedChild:this.current;if(!_815){return;}var copy=_802.isCopyKey(e),id=_815.id;if(!this.singular&&!e.shiftKey&&this.selection[id]){this._doDeselect=true;return;}else{this._doDeselect=false;}this.userSelect(_815,copy,e.shiftKey);},onClickRelease:function(e){if(!this._doDeselect){return;}this._doDeselect=false;this.userSelect(e.type=="keyup"?this.tree.focusedChild:this.current,_802.isCopyKey(e),e.shiftKey);},onMouseMove:function(){this._doDeselect=false;},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(n1,n2){if(n1===n2){return 0;}if("sourceIndex" in document.documentElement){return n1.sourceIndex-n2.sourceIndex;}else{if("compareDocumentPosition" in document.documentElement){return n1.compareDocumentPosition(n2)&2?1:-1;}else{if(document.createRange){var r1=doc.createRange();r1.setStartBefore(n1);var r2=doc.createRange();r2.setStartBefore(n2);return r1.compareBoundaryPoints(r1.END_TO_END,r2);}else{throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");}}}},userSelect:function(node,_816,_817){if(this.singular){if(this.anchor==node&&_816){this.selectNone();}else{this.setSelection([node]);this.anchor=node;}}else{if(_817&&this.anchor){var cr=this._compareNodes(this.anchor.rowNode,node.rowNode),_818,end,_819=this.anchor;if(cr<0){_818=_819;end=node;}else{_818=node;end=_819;}var _81a=[];while(_818!=end){_81a.push(_818);_818=this.tree._getNext(_818);}_81a.push(end);this.setSelection(_81a);}else{if(this.selection[node.id]&&_816){this.removeTreeNode(node);}else{if(_816){this.addTreeNode(node,true);}else{this.setSelection([node]);this.anchor=node;}}}}},getItem:function(key){var _81b=this.selection[key];return {data:_81b,type:["treeNode"]};},forInSelectedItems:function(f,o){o=o||_804.global;for(var id in this.selection){f.call(o,this.getItem(id),id,this);}}});});},"dojox/flash/_base":function(){define(["dijit","dojo","dojox","dojo/require!dojo/window"],function(_81c,dojo,_81d){dojo.provide("dojox.flash._base");dojo.experimental("dojox.flash");dojo.require("dojo.window");_81d.flash={ready:false,url:null,_visible:true,_loadedListeners:[],_installingListeners:[],setSwf:function(url,_81e){this.url=url;this._visible=true;if(_81e!==null&&_81e!==undefined){this._visible=_81e;}this._initialize();},addLoadedListener:function(_81f){this._loadedListeners.push(_81f);},addInstallingListener:function(_820){this._installingListeners.push(_820);},loaded:function(){_81d.flash.ready=true;if(_81d.flash._loadedListeners.length){for(var i=0;i<_81d.flash._loadedListeners.length;i++){_81d.flash._loadedListeners[i].call(null);}}},installing:function(){if(_81d.flash._installingListeners.length){for(var i=0;i<_81d.flash._installingListeners.length;i++){_81d.flash._installingListeners[i].call(null);}}},_initialize:function(){var _821=new _81d.flash.Install();_81d.flash.installer=_821;if(_821.needed()){_821.install();}else{_81d.flash.obj=new _81d.flash.Embed(this._visible);_81d.flash.obj.write();_81d.flash.comm=new _81d.flash.Communicator();}}};_81d.flash.Info=function(){this._detectVersion();};_81d.flash.Info.prototype={version:-1,versionMajor:-1,versionMinor:-1,versionRevision:-1,capable:false,installing:false,isVersionOrAbove:function(_822,_823,_824){_824=parseFloat("."+_824);if(this.versionMajor>=_822&&this.versionMinor>=_823&&this.versionRevision>=_824){return true;}else{return false;}},_detectVersion:function(){var _825;for(var _826=25;_826>0;_826--){if(dojo.isIE){var axo;try{if(_826>6){axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_826);}else{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}if(typeof axo=="object"){if(_826==6){axo.AllowScriptAccess="always";}_825=axo.GetVariable("$version");}}catch(e){continue;}}else{_825=this._JSFlashInfo(_826);}if(_825==-1){this.capable=false;return;}else{if(_825!=0){var _827;if(dojo.isIE){var _828=_825.split(" ");var _829=_828[1];_827=_829.split(",");}else{_827=_825.split(".");}this.versionMajor=_827[0];this.versionMinor=_827[1];this.versionRevision=_827[2];var _82a=this.versionMajor+"."+this.versionRevision;this.version=parseFloat(_82a);this.capable=true;break;}}}},_JSFlashInfo:function(_82b){if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var _82c=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"";var _82d=navigator.plugins["Shockwave Flash"+_82c].description;var _82e=_82d.split(" ");var _82f=_82e[2].split(".");var _830=_82f[0];var _831=_82f[1];var _832=(_82e[3]||_82e[4]).split("r");var _833=_832[1]>0?_832[1]:0;var _834=_830+"."+_831+"."+_833;return _834;}}return -1;}};_81d.flash.Embed=function(_835){this._visible=_835;};_81d.flash.Embed.prototype={width:215,height:138,id:"flashObject",_visible:true,protocol:function(){switch(window.location.protocol){case "https:":return "https";break;default:return "http";break;}},write:function(_836){var _837;var _838=_81d.flash.url;var _839=_838;var _83a=_838;var _83b=dojo.baseUrl;var _83c=document.location.protocol+"//"+document.location.host;if(_836){var _83d=escape(window.location);document.title=document.title.slice(0,47)+" - Flash Player Installation";var _83e=escape(document.title);_839+="?MMredirectURL="+_83d+"&MMplayerType=ActiveX"+"&MMdoctitle="+_83e+"&baseUrl="+escape(_83b)+"&xdomain="+escape(_83c);_83a+="?MMredirectURL="+_83d+"&MMplayerType=PlugIn"+"&baseUrl="+escape(_83b)+"&xdomain="+escape(_83c);}else{_839+="?cachebust="+new Date().getTime();_839+="&baseUrl="+escape(_83b);_839+="&xdomain="+escape(_83c);}if(_83a.indexOf("?")==-1){_83a+="?baseUrl="+escape(_83b);}else{_83a+="&baseUrl="+escape(_83b);}_83a+="&xdomain="+escape(_83c);_837="<object classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" "+"codebase=\""+this.protocol()+"://fpdownload.macromedia.com/pub/shockwave/cabs/flash/"+"swflash.cab#version=8,0,0,0\"\n "+"width=\""+this.width+"\"\n "+"height=\""+this.height+"\"\n "+"id=\""+this.id+"\"\n "+"name=\""+this.id+"\"\n "+"align=\"middle\">\n "+"<param name=\"allowScriptAccess\" value=\"always\"></param>\n "+"<param name=\"movie\" value=\""+_839+"\"></param>\n "+"<param name=\"quality\" value=\"high\"></param>\n "+"<param name=\"bgcolor\" value=\"#ffffff\"></param>\n "+"<embed src=\""+_83a+"\" "+"quality=\"high\" "+"bgcolor=\"#ffffff\" "+"width=\""+this.width+"\" "+"height=\""+this.height+"\" "+"id=\""+this.id+"Embed"+"\" "+"name=\""+this.id+"\" "+"swLiveConnect=\"true\" "+"align=\"middle\" "+"allowScriptAccess=\"always\" "+"type=\"application/x-shockwave-flash\" "+"pluginspage=\""+this.protocol()+"://www.macromedia.com/go/getflashplayer\" "+"></embed>\n"+"</object>\n";dojo.connect(dojo,"loaded",dojo.hitch(this,function(){var _83f=this.id+"Container";if(dojo.byId(_83f)){return;}var div=document.createElement("div");div.id=this.id+"Container";div.style.width=this.width+"px";div.style.height=this.height+"px";if(!this._visible){div.style.position="absolute";div.style.zIndex="10000";div.style.top="-1000px";}div.innerHTML=_837;var body=document.getElementsByTagName("body");if(!body||!body.length){throw new Error("No body tag for this page");}body=body[0];body.appendChild(div);}));},get:function(){if(dojo.isIE||dojo.isWebKit){return dojo.byId(this.id);}else{return document[this.id+"Embed"];}},setVisible:function(_840){var _841=dojo.byId(this.id+"Container");if(_840){_841.style.position="absolute";_841.style.visibility="visible";}else{_841.style.position="absolute";_841.style.y="-1000px";_841.style.visibility="hidden";}},center:function(){var _842=this.width;var _843=this.height;var _844=dojo.window.getBox();var x=_844.l+(_844.w-_842)/2;var y=_844.t+(_844.h-_843)/2;var _845=dojo.byId(this.id+"Container");_845.style.top=y+"px";_845.style.left=x+"px";}};_81d.flash.Communicator=function(){};_81d.flash.Communicator.prototype={_addExternalInterfaceCallback:function(_846){var _847=dojo.hitch(this,function(){var _848=new Array(arguments.length);for(var i=0;i<arguments.length;i++){_848[i]=this._encodeData(arguments[i]);}var _849=this._execFlash(_846,_848);_849=this._decodeData(_849);return _849;});this[_846]=_847;},_encodeData:function(data){if(!data||typeof data!="string"){return data;}data=data.replace("\\","&custom_backslash;");data=data.replace(/\0/g,"&custom_null;");return data;},_decodeData:function(data){if(data&&data.length&&typeof data!="string"){data=data[0];}if(!data||typeof data!="string"){return data;}data=data.replace(/\&custom_null\;/g,"\x00");data=data.replace(/\&custom_lt\;/g,"<").replace(/\&custom_gt\;/g,">").replace(/\&custom_backslash\;/g,"\\");return data;},_execFlash:function(_84a,_84b){var _84c=_81d.flash.obj.get();_84b=(_84b)?_84b:[];for(var i=0;i<_84b;i++){if(typeof _84b[i]=="string"){_84b[i]=this._encodeData(_84b[i]);}}var _84d=function(){return eval(_84c.CallFunction("<invoke name=\""+_84a+"\" returntype=\"javascript\">"+__flash__argumentsToXML(_84b,0)+"</invoke>"));};var _84e=_84d.call(_84b);if(typeof _84e=="string"){_84e=this._decodeData(_84e);}return _84e;}};_81d.flash.Install=function(){};_81d.flash.Install.prototype={needed:function(){if(!_81d.flash.info.capable){return true;}if(!_81d.flash.info.isVersionOrAbove(8,0,0)){return true;}return false;},install:function(){var _84f;_81d.flash.info.installing=true;_81d.flash.installing();if(_81d.flash.info.capable==false){_84f=new _81d.flash.Embed(false);_84f.write();}else{if(_81d.flash.info.isVersionOrAbove(6,0,65)){_84f=new _81d.flash.Embed(false);_84f.write(true);_84f.setVisible(true);_84f.center();}else{alert("This content requires a more recent version of the Macromedia "+" Flash Player.");window.location.href=+_81d.flash.Embed.protocol()+"://www.macromedia.com/go/getflashplayer";}}},_onInstallStatus:function(msg){if(msg=="Download.Complete"){_81d.flash._initialize();}else{if(msg=="Download.Cancelled"){alert("This content requires a more recent version of the Macromedia "+" Flash Player.");window.location.href=_81d.flash.Embed.protocol()+"://www.macromedia.com/go/getflashplayer";}else{if(msg=="Download.Failed"){alert("There was an error downloading the Flash Player update. "+"Please try again later, or visit macromedia.com to download "+"the latest version of the Flash plugin.");}}}}};_81d.flash.info=new _81d.flash.Info();});},"esriviewer/ui/basemap/model/BasemapGalleryViewModel":function(){define(["dojo/_base/declare"],function(_850){return _850([],{constructor:function(){this.visible=ko.observable(false);}});});},"dojo/data/ItemFileReadStore":function(){define(["../_base/kernel","../_base/lang","../_base/declare","../_base/array","../_base/xhr","../Evented","./util/filter","./util/simpleFetch","../date/stamp"],function(_851,lang,_852,_853,xhr,_854,_855,_856,_857){var _858=_852("dojo.data.ItemFileReadStore",[_854],{constructor:function(_859){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=_859.url;this._ccUrl=_859.url;this.url=_859.url;this._jsonData=_859.data;this.data=null;this._datatypeMap=_859.typeMap||{};if(!this._datatypeMap["Date"]){this._datatypeMap["Date"]={type:Date,deserialize:function(_85a){return _857.fromISOString(_85a);}};}this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(_859.urlPreventCache!==undefined){this.urlPreventCache=_859.urlPreventCache?true:false;}if(_859.hierarchical!==undefined){this.hierarchical=_859.hierarchical?true:false;}if(_859.clearOnClose){this.clearOnClose=true;}if("failOk" in _859){this.failOk=_859.failOk?true:false;}},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,failOk:false,hierarchical:true,_assertIsItem:function(item){if(!this.isItem(item)){throw new Error(this.declaredClass+": Invalid item argument.");}},_assertIsAttribute:function(_85b){if(typeof _85b!=="string"){throw new Error(this.declaredClass+": Invalid attribute argument.");}},getValue:function(item,_85c,_85d){var _85e=this.getValues(item,_85c);return (_85e.length>0)?_85e[0]:_85d;},getValues:function(item,_85f){this._assertIsItem(item);this._assertIsAttribute(_85f);return (item[_85f]||[]).slice(0);},getAttributes:function(item){this._assertIsItem(item);var _860=[];for(var key in item){if((key!==this._storeRefPropName)&&(key!==this._itemNumPropName)&&(key!==this._rootItemPropName)&&(key!==this._reverseRefMap)){_860.push(key);}}return _860;},hasAttribute:function(item,_861){this._assertIsItem(item);this._assertIsAttribute(_861);return (_861 in item);},containsValue:function(item,_862,_863){var _864=undefined;if(typeof _863==="string"){_864=_855.patternToRegExp(_863,false);}return this._containsValue(item,_862,_863,_864);},_containsValue:function(item,_865,_866,_867){return _853.some(this.getValues(item,_865),function(_868){if(_868!==null&&!lang.isObject(_868)&&_867){if(_868.toString().match(_867)){return true;}}else{if(_866===_868){return true;}}});},isItem:function(_869){if(_869&&_869[this._storeRefPropName]===this){if(this._arrayOfAllItems[_869[this._itemNumPropName]]===_869){return true;}}return false;},isItemLoaded:function(_86a){return this.isItem(_86a);},loadItem:function(_86b){this._assertIsItem(_86b.item);},getFeatures:function(){return this._features;},getLabel:function(item){if(this._labelAttr&&this.isItem(item)){return this.getValue(item,this._labelAttr);}return undefined;},getLabelAttributes:function(item){if(this._labelAttr){return [this._labelAttr];}return null;},filter:function(_86c,_86d,_86e){var _86f=[],i,key;if(_86c.query){var _870,_871=_86c.queryOptions?_86c.queryOptions.ignoreCase:false;var _872={};for(key in _86c.query){_870=_86c.query[key];if(typeof _870==="string"){_872[key]=_855.patternToRegExp(_870,_871);}else{if(_870 instanceof RegExp){_872[key]=_870;}}}for(i=0;i<_86d.length;++i){var _873=true;var _874=_86d[i];if(_874===null){_873=false;}else{for(key in _86c.query){_870=_86c.query[key];if(!this._containsValue(_874,key,_870,_872[key])){_873=false;}}}if(_873){_86f.push(_874);}}_86e(_86f,_86c);}else{for(i=0;i<_86d.length;++i){var item=_86d[i];if(item!==null){_86f.push(item);}}_86e(_86f,_86c);}},_fetchItems:function(_875,_876,_877){var self=this;if(this._loadFinished){this.filter(_875,this._getItemsArray(_875.queryOptions),_876);}else{if(this._jsonFileUrl!==this._ccUrl){_851.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_875,filter:lang.hitch(self,"filter"),findCallback:lang.hitch(self,_876)});}else{this._loadInProgress=true;var _878={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _879=xhr.get(_878);_879.addCallback(function(data){try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;self.filter(_875,self._getItemsArray(_875.queryOptions),_876);self._handleQueuedFetches();}catch(e){self._loadFinished=true;self._loadInProgress=false;_877(e,_875);}});_879.addErrback(function(_87a){self._loadInProgress=false;_877(_87a,_875);});var _87b=null;if(_875.abort){_87b=_875.abort;}_875.abort=function(){var df=_879;if(df&&df.fired===-1){df.cancel();df=null;}if(_87b){_87b.call(_875);}};}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;self.filter(_875,this._getItemsArray(_875.queryOptions),_876);}catch(e){_877(e,_875);}}else{_877(new Error(this.declaredClass+": No JSON source data was provided as either URL or a nested Javascript object."),_875);}}}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var i=0;i<this._queuedFetches.length;i++){var _87c=this._queuedFetches[i],_87d=_87c.args,_87e=_87c.filter,_87f=_87c.findCallback;if(_87e){_87e(_87d,this._getItemsArray(_87d.queryOptions),_87f);}else{this.fetchItemByIdentity(_87d);}}this._queuedFetches=[];}},_getItemsArray:function(_880){if(_880&&_880.deep){return this._arrayOfAllItems;}return this._arrayOfTopLevelItems;},close:function(_881){if(this.clearOnClose&&this._loadFinished&&!this._loadInProgress){if(((this._jsonFileUrl==""||this._jsonFileUrl==null)&&(this.url==""||this.url==null))&&this.data==null){}this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[];}},_getItemsFromLoadedData:function(_882){var _883=false,self=this;function _884(_885){return (_885!==null)&&(typeof _885==="object")&&(!lang.isArray(_885)||_883)&&(!lang.isFunction(_885))&&(_885.constructor==Object||lang.isArray(_885))&&(typeof _885._reference==="undefined")&&(typeof _885._type==="undefined")&&(typeof _885._value==="undefined")&&self.hierarchical;};function _886(_887){self._arrayOfAllItems.push(_887);for(var _888 in _887){var _889=_887[_888];if(_889){if(lang.isArray(_889)){var _88a=_889;for(var k=0;k<_88a.length;++k){var _88b=_88a[k];if(_884(_88b)){_886(_88b);}}}else{if(_884(_889)){_886(_889);}}}}};this._labelAttr=_882.label;var i,item;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=_882.items;for(i=0;i<this._arrayOfTopLevelItems.length;++i){item=this._arrayOfTopLevelItems[i];if(lang.isArray(item)){_883=true;}_886(item);item[this._rootItemPropName]=true;}var _88c={},key;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){if(key!==this._rootItemPropName){var _88d=item[key];if(_88d!==null){if(!lang.isArray(_88d)){item[key]=[_88d];}}else{item[key]=[null];}}_88c[key]=key;}}while(_88c[this._storeRefPropName]){this._storeRefPropName+="_";}while(_88c[this._itemNumPropName]){this._itemNumPropName+="_";}while(_88c[this._reverseRefMap]){this._reverseRefMap+="_";}var _88e;var _88f=_882.identifier;if(_88f){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=_88f;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];_88e=item[_88f];var _890=_88e[0];if(!Object.hasOwnProperty.call(this._itemsByIdentity,_890)){this._itemsByIdentity[_890]=item;}else{if(this._jsonFileUrl){throw new Error(this.declaredClass+":  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+_88f+"].  Value collided: ["+_890+"]");}else{if(this._jsonData){throw new Error(this.declaredClass+":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+_88f+"].  Value collided: ["+_890+"]");}}}}}else{this._features["dojo.data.api.Identity"]=Number;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];item[this._storeRefPropName]=this;item[this._itemNumPropName]=i;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){_88e=item[key];for(var j=0;j<_88e.length;++j){_88d=_88e[j];if(_88d!==null&&typeof _88d=="object"){if(("_type" in _88d)&&("_value" in _88d)){var type=_88d._type;var _891=this._datatypeMap[type];if(!_891){throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+type+"'");}else{if(lang.isFunction(_891)){_88e[j]=new _891(_88d._value);}else{if(lang.isFunction(_891.deserialize)){_88e[j]=_891.deserialize(_88d._value);}else{throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");}}}}if(_88d._reference){var _892=_88d._reference;if(!lang.isObject(_892)){_88e[j]=this._getItemByIdentity(_892);}else{for(var k=0;k<this._arrayOfAllItems.length;++k){var _893=this._arrayOfAllItems[k],_894=true;for(var _895 in _892){if(_893[_895]!=_892[_895]){_894=false;}}if(_894){_88e[j]=_893;}}}if(this.referenceIntegrity){var _896=_88e[j];if(this.isItem(_896)){this._addReferenceToMap(_896,item,key);}}}else{if(this.isItem(_88d)){if(this.referenceIntegrity){this._addReferenceToMap(_88d,item,key);}}}}}}}},_addReferenceToMap:function(_897,_898,_899){},getIdentity:function(item){var _89a=this._features["dojo.data.api.Identity"];if(_89a===Number){return item[this._itemNumPropName];}else{var _89b=item[_89a];if(_89b){return _89b[0];}}return null;},fetchItemByIdentity:function(_89c){var item,_89d;if(!this._loadFinished){var self=this;if(this._jsonFileUrl!==this._ccUrl){_851.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_89c});}else{this._loadInProgress=true;var _89e={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _89f=xhr.get(_89e);_89f.addCallback(function(data){var _8a0=_89c.scope?_89c.scope:_851.global;try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;item=self._getItemByIdentity(_89c.identity);if(_89c.onItem){_89c.onItem.call(_8a0,item);}self._handleQueuedFetches();}catch(error){self._loadInProgress=false;if(_89c.onError){_89c.onError.call(_8a0,error);}}});_89f.addErrback(function(_8a1){self._loadInProgress=false;if(_89c.onError){var _8a2=_89c.scope?_89c.scope:_851.global;_89c.onError.call(_8a2,_8a1);}});}}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;item=self._getItemByIdentity(_89c.identity);if(_89c.onItem){_89d=_89c.scope?_89c.scope:_851.global;_89c.onItem.call(_89d,item);}}}}else{item=this._getItemByIdentity(_89c.identity);if(_89c.onItem){_89d=_89c.scope?_89c.scope:_851.global;_89c.onItem.call(_89d,item);}}},_getItemByIdentity:function(_8a3){var item=null;if(this._itemsByIdentity){if(Object.hasOwnProperty.call(this._itemsByIdentity,_8a3)){item=this._itemsByIdentity[_8a3];}}else{if(Object.hasOwnProperty.call(this._arrayOfAllItems,_8a3)){item=this._arrayOfAllItems[_8a3];}}if(item===undefined){item=null;}return item;},getIdentityAttributes:function(item){var _8a4=this._features["dojo.data.api.Identity"];if(_8a4===Number){return null;}else{return [_8a4];}},_forceLoad:function(){var self=this;if(this._jsonFileUrl!==this._ccUrl){_851.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){var _8a5={url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:true};var _8a6=xhr.get(_8a5);_8a6.addCallback(function(data){try{if(self._loadInProgress!==true&&!self._loadFinished){self._getItemsFromLoadedData(data);self._loadFinished=true;}else{if(self._loadInProgress){throw new Error(this.declaredClass+":  Unable to perform a synchronous load, an async load is in progress.");}}}catch(e){throw e;}});_8a6.addErrback(function(_8a7){throw _8a7;});}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;}}}});lang.extend(_858,_856);return _858;});},"dijit/_PaletteMixin":function(){define(["dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/keys","dojo/_base/lang","dojo/on","./_CssStateMixin","./a11yclick","./focus","./typematic"],function(_8a8,_8a9,_8aa,_8ab,keys,lang,on,_8ac,_8ad,_8ae,_8af){var _8b0=_8a8("dijit._PaletteMixin",_8ac,{defaultTimeout:500,timeoutChangeRate:0.9,value:"",_selectedCell:-1,tabIndex:"0",cellClass:"dijitPaletteCell",dyeClass:null,_dyeFactory:function(_8b1){var _8b2=typeof this.dyeClass=="string"?lang.getObject(this.dyeClass):this.dyeClass;return new _8b2(_8b1);},_preparePalette:function(_8b3,_8b4){this._cells=[];var url=this._blankGif;this.own(on(this.gridNode,_8ad,lang.hitch(this,"_onCellClick")));for(var row=0;row<_8b3.length;row++){var _8b5=_8ab.create("tr",{tabIndex:"-1",role:"row"},this.gridNode);for(var col=0;col<_8b3[row].length;col++){var _8b6=_8b3[row][col];if(_8b6){var _8b7=this._dyeFactory(_8b6,row,col,_8b4[_8b6]);var _8b8=_8ab.create("td",{"class":this.cellClass,tabIndex:"-1",title:_8b4[_8b6],role:"gridcell"},_8b5);_8b7.fillCell(_8b8,url);_8b8.idx=this._cells.length;this._cells.push({node:_8b8,dye:_8b7});}}}this._xDim=_8b3[0].length;this._yDim=_8b3.length;var _8b9={UP_ARROW:-this._xDim,DOWN_ARROW:this._xDim,RIGHT_ARROW:this.isLeftToRight()?1:-1,LEFT_ARROW:this.isLeftToRight()?-1:1};for(var key in _8b9){this.own(_8af.addKeyListener(this.domNode,{keyCode:keys[key],ctrlKey:false,altKey:false,shiftKey:false},this,function(){var _8ba=_8b9[key];return function(_8bb){this._navigateByKey(_8ba,_8bb);};}(),this.timeoutChangeRate,this.defaultTimeout));}},postCreate:function(){this.inherited(arguments);this._setCurrent(this._cells[0].node);},focus:function(){_8ae.focus(this._currentFocus);},_onCellClick:function(evt){var _8bc=evt.target;while(_8bc.tagName!="TD"){if(!_8bc.parentNode||_8bc==this.gridNode){return;}_8bc=_8bc.parentNode;}var _8bd=this._getDye(_8bc).getValue();this._setCurrent(_8bc);_8ae.focus(_8bc);this._setValueAttr(_8bd,true);evt.stopPropagation();evt.preventDefault();},_setCurrent:function(node){if("_currentFocus" in this){_8a9.set(this._currentFocus,"tabIndex","-1");}this._currentFocus=node;if(node){_8a9.set(node,"tabIndex",this.tabIndex);}},_setValueAttr:function(_8be,_8bf){if(this._selectedCell>=0){_8aa.remove(this._cells[this._selectedCell].node,this.cellClass+"Selected");}this._selectedCell=-1;if(_8be){for(var i=0;i<this._cells.length;i++){if(_8be==this._cells[i].dye.getValue()){this._selectedCell=i;_8aa.add(this._cells[i].node,this.cellClass+"Selected");break;}}}this._set("value",this._selectedCell>=0?_8be:null);if(_8bf||_8bf===undefined){this.onChange(_8be);}},onChange:function(){},_navigateByKey:function(_8c0,_8c1){if(_8c1==-1){return;}var _8c2=this._currentFocus.idx+_8c0;if(_8c2<this._cells.length&&_8c2>-1){var _8c3=this._cells[_8c2].node;this._setCurrent(_8c3);this.defer(lang.hitch(_8ae,"focus",_8c3));}},_getDye:function(cell){return this._cells[cell.idx].dye;}});return _8b0;});},"esriviewer/base/Configurable":function(){define(["dojo/_base/declare","dojo/_base/xhr","dojo/_base/lang","./DataLoaderSupport"],function(_8c4,xhr,lang,_8c5){return _8c4([_8c5],{configUrl:"",loadConfig:function(){xhr.get({url:this.configUrl,handleAs:"json",load:lang.hitch(this,this.handleConfigLoaded),error:lang.hitch(this,this.handleConfigLoadError)});},loadProxiedConfig:function(){this.loadProxiedJson(this.configUrl,lang.hitch(this,this.handleConfigLoaded),lang.hitch(this,this.handleConfigLoadError));},handleConfigLoaded:function(_8c6){},handleConfigLoadError:function(err){}});});},"esriviewer/util/ViewerUtils":function(){define(["dojo/_base/declare","dojo/window","dojo/keys","dojo/_base/lang","dojo/dom-style","dojox/uuid/Uuid","dojox/uuid/generateTimeBasedUuid","dojo/Deferred","dojo/topic","esri/request"],function(_8c7,_8c8,keys,lang,_8c9,Uuid,_8ca,_8cb,_8cc,_8cd){return _8c7([],{isDebug:false,constructor:function(_8ce){this.html5UploadSupported=window.File&&window.FileReader&&window.FileList&&window.Blob;lang.mixin(this,_8ce||{});Uuid.setGenerator(_8ca);},isHtml5FileUploadSupported:function(){return this.html5UploadSupported;},debug:function(_8cf){if(this.isDebug){this.log(_8cf,VIEWER_GLOBALS.LOG_TYPE.INFO);}},log:function(_8d0,type){if(_8d0==null||_8d0===""){return;}_8cc.publish(VIEWER_GLOBALS.EVENTS.LOGGING.ADD,_8d0,type);},handleContainerMoved:function(_8d1,_8d2){var _8d3=false;var _8d4=false;if(_8d2.l<3){_8c9.set(_8d1.node,"left","3px");_8d3=true;}var _8d5=(VIEWER_GLOBALS.WINDOW&&VIEWER_GLOBALS.WINDOW.TOP_POSITION_MOVE_OFFSET)?(VIEWER_GLOBALS.WINDOW.TOP_POSITION_MOVE_OFFSET):3;if(_8d2.t<_8d5){_8c9.set(_8d1.node,"top",_8d5+"px");_8d4=true;}if(_8d3&&_8d4){return;}var _8d6=_8c8.getBox();if(!_8d3){var _8d7=_8c9.get(_8d1.node,"width");var _8d8=_8c9.get(_8d1.node,"left");var _8d9=_8d8+_8d7;if(_8d9>(_8d6.w-3)){_8c9.set(_8d1.node,"left",(_8d6.w-_8d7-3)+"px");}}if(!_8d4){var _8da=_8c9.get(_8d1.node,"height");var _8db=_8c9.get(_8d1.node,"top");var _8dc=_8db+_8da;if(_8dc>(_8d6.h-5)){_8c9.set(_8d1.node,"top",(_8d6.h-_8da-5)+"px");}}},generateUUID:function(){var uuid=new Uuid();return uuid.toString();},getTimeStamp:function(){var date=new Date();var _8dd=date.getHours();if(_8dd<12){if(_8dd==0){_8dd=12;}}else{if(_8dd!=12){_8dd=_8dd-12;}}_8dd=_8dd.toString();if(_8dd.length<2){_8dd="0"+_8dd;}var _8de=date.getMinutes().toString();if(_8de.length<2){_8de="0"+_8de;}var _8df=date.getSeconds().toString();if(_8df.length<2){_8df="0"+_8df;}return _8dd+":"+_8de+":"+_8df;},sendJsonPQuery:function(url,_8e0,_8e1,_8e2,_8e3){if(_8e2==null){_8e2=lang.hitch(this,function(_8e4){var msg="Could not resource : "+url+". Please verify URL is accessible.";VIEWER_UTILS.log(msg,VIEWER_GLOBALS.LOG_TYPE.ERROR);_8cc.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,msg);});}if(_8e3==null){_8e3="callback";}var _8e5={callbackParamName:_8e3,content:_8e0,url:url};_8cd(_8e5).then(_8e1,_8e2);},isEnterKey:function(e){return e.keyCode==keys.ENTER;},joinUrl:function(url,_8e6){var _8e7=url.lastIndexOf("/")==url.length-1;if(!_8e7){url+="/";}if(_8e6[0]==="/"){_8e6=_8e6.substring(1);}return url+_8e6;},getLayerInfoFromService:function(_8e8,_8e9,_8ea,_8eb){if(_8eb==null){_8eb="callback";}var _8ec=lang.hitch(this,function(_8ed){var msg="could not load layer from service: "+_8ee;VIEWER_UTILS.log(msg,VIEWER_GLOBALS.LOG_TYPE.ERROR);_8cc.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,msg);});if(_8e8!=null&&_8e9!=null&&_8ea){var _8ee=_8e8+"/"+_8e9;}var _8ef={callbackParamName:_8eb,content:{f:"json"},url:_8ee};_8cd(_8ef).then(_8ea,_8ec);},endsWith:function(_8f0,_8f1){var _8f2=_8f0.lastIndexOf(_8f1);return (_8f2!=-1)&&(_8f2+_8f1.length==_8f0.length);},getFileExtension:function(_8f3){var _8f4=_8f3.lastIndexOf(".");if(_8f4<0||_8f4===_8f3.length-1){return "";}return _8f3.substr(_8f4+1);},getFileExtensionLower:function(_8f5){return this.getFileExtension(_8f5).toLowerCase();},getServiceTypeFromUrl:function(url){if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER;}else{if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER;}else{if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GP_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GP_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.GP_SERVER;}else{if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GLOBE_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GLOBE_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.GLOBE_SERVER;}else{if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GEOCODE_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GEOCODE_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.GEOCODE_SERVER;}else{if(REG_EXP_UTILS.isKMLExtension(url)){return VIEWER_GLOBALS.SERVICE_TYPES.KML;}else{if(REG_EXP_UTILS.isFeatureLayer(url)){return VIEWER_GLOBALS.SERVICE_TYPES.FEATURE_SERVER;}else{return null;}}}}}}}},getServiceDescription:function(_8f6,_8f7,_8f8,_8f9){if(_8f9==null){_8f9="callback";}if(_8f8==null){_8f8=lang.hitch(this,function(_8fa){var msg="Could not load service description for : "+_8f6+". Please verify service is online.";});}if(_8f6!=null&&_8f7){var _8fb={callbackParamName:_8f9,content:{f:"json"},url:_8f6};_8cd(_8fb).then(_8f7,_8f8);}},getLayerNameFromLayer:function(_8fc){if(_8fc.layerAliasName!=null&&_8fc.layerAliasName!=""){return _8fc.layerAliasName;}else{if(_8fc.name!=null&&_8fc.name!=""){return _8fc.name;}else{if(_8fc.id!=null){return _8fc.id;}else{if(_8fc.url!=null){return _8fc.url;}}}}return "Layer";},getLabelForEsriUnit:function(_8fd){if(_8fd===VIEWER_GLOBALS.ESRI_UNITS.METERS){return "meters";}else{if(_8fd===VIEWER_GLOBALS.ESRI_UNITS.FEET){return "feet";}else{if(_8fd===VIEWER_GLOBALS.ESRI_UNITS.YARDS){return "yards";}else{if(_8fd===VIEWER_GLOBALS.ESRI_UNITS.MILES){return "miles";}else{if(_8fd===VIEWER_GLOBALS.ESRI_UNITS.NAUTICAL_MILES){return "nautical miles";}else{if(_8fd===VIEWER_GLOBALS.ESRI_UNITS.MILLIMETERS){return "millimeters";}else{if(_8fd===VIEWER_GLOBALS.ESRI_UNITS.CENTIMETERS){return "centimeters";}else{if(_8fd===VIEWER_GLOBALS.ESRI_UNITS.DECIMETERS){return "decimeters";}else{if(_8fd===VIEWER_GLOBALS.ESRI_UNITS.KILOMETERS){return "kilometers";}else{if(_8fd===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_MILES){return "square miles";}else{if(_8fd===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_METERS){return "square meters";}else{if(_8fd===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_KILOMETERS){return "square kilometers";}else{if(_8fd===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_ARES){return "square ares";}else{if(_8fd===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_HECTARES){return "square hectares";}else{if(_8fd===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_CENTIMETERS){return "square centimeters";}else{if(_8fd===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_DECIMETERS){return "square decimeters";}else{if(_8fd===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_FEET){return "square feet";}else{if(_8fd===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_INCHES){return "square inches";}else{if(_8fd===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_MILLIMETERS){return "square millimeters";}else{if(_8fd===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_YARDS){return "square yards";}else{if(_8fd===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_UNKNOWN){return "square unknown";}else{if(_8fd===VIEWER_GLOBALS.ESRI_UNITS.DECIMAL_DEGREES){return "decimal degrees";}}}}}}}}}}}}}}}}}}}}}}return "unknown";},getShortLabelForEsriUnit:function(_8fe){if(_8fe===VIEWER_GLOBALS.ESRI_UNITS.METERS){return "m";}else{if(_8fe===VIEWER_GLOBALS.ESRI_UNITS.FEET){return "f";}else{if(_8fe===VIEWER_GLOBALS.ESRI_UNITS.YARDS){return "y";}else{if(_8fe===VIEWER_GLOBALS.ESRI_UNITS.MILES){return "M";}else{if(_8fe===VIEWER_GLOBALS.ESRI_UNITS.NAUTICAL_MILES){return "NM";}else{if(_8fe===VIEWER_GLOBALS.ESRI_UNITS.MILLIMETERS){return "mm";}else{if(_8fe===VIEWER_GLOBALS.ESRI_UNITS.CENTIMETERS){return "cm";}else{if(_8fe===VIEWER_GLOBALS.ESRI_UNITS.DECIMETERS){return "dm";}else{if(_8fe===VIEWER_GLOBALS.ESRI_UNITS.KILOMETERS){return "KM";}else{if(_8fe===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_MILES){return "square miles";}else{if(_8fe===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_METERS){return "Sq m";}else{if(_8fe===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_KILOMETERS){return "Sq KM";}else{if(_8fe===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_ARES){return "Sq Ares";}else{if(_8fe===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_HECTARES){return "Sq Hectares";}else{if(_8fe===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_CENTIMETERS){return "Sq cm";}else{if(_8fe===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_DECIMETERS){return "Sq dm";}else{if(_8fe===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_FEET){return "Sq f";}else{if(_8fe===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_INCHES){return "Sq in";}else{if(_8fe===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_MILLIMETERS){return "Sq mm";}else{if(_8fe===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_YARDS){return "Sq y";}else{if(_8fe===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_UNKNOWN){return "Sq unknown";}else{if(_8fe===VIEWER_GLOBALS.ESRI_UNITS.DECIMAL_DEGREES){return "Dec. Deg.";}}}}}}}}}}}}}}}}}}}}}}return "Unknown";},getFieldTypeFromLayer:function(_8ff,_900){var _901=_900.fields?_900.fields:(_900.serviceDescription?_900.serviceDescription.fields:[]);if(_900&&_901&&_8ff){for(var i=0;i<_901.length;i++){if(_901[i].alias===_8ff||_901[i].name===_8ff){return _901[i].type;}}}return null;},getFileNameFromAtEndOfUrl:function(_902){if(_902==null||_902.lastIndexOf("/")<0){return "";}_902=_902.substring(0,(_902.indexOf("#")==-1)?_902.length:_902.indexOf("#"));_902=_902.substring(0,(_902.indexOf("?")==-1)?_902.length:_902.indexOf("?"));return _902.substring(_902.lastIndexOf("/")+1,_902.length);},getFileNameFromAtEndOfPath:function(_903){if(_903==null||_903.lastIndexOf("\\")<0){return "";}return _903.substring(_903.lastIndexOf("\\")+1,_903.length);},_intSorter:function(a,b){return a-b;},sortIntegerArray:function(arr){return arr.sort(this._intSorter);},validateUrl:function(url){var def=new _8cb();def.resolve(true);return def;},trim:function(str){return str.replace(/^\s*/,"").replace(/\s*$/,"");},getLayerUniqueId:function(_904){if(_904==null){return null;}if(lang.isString(_904)){return _904.toLowerCase();}var id;if(_904.url){id=_904.url.toLowerCase();}else{if(_904.id!=null){id=_904.id;}else{id="lyr_"+VIEWER_UTILS.generateUUID();_904.id=id;}}return id;}});});},"esriviewer/map/base/MapExtentTools":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","esri/geometry/Extent","esri/geometry/Point"],function(_905,_906,lang,_907,_908){return _905([],{maxClientZoom:null,extentArray:[],currentExtentIdx:0,extentActionInProgress:false,constructor:function(_909){lang.mixin(this,_909);this.initListeners();},initListeners:function(){_906.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_SPATIAL_REFERENCE,lang.hitch(this,this.handleGetSpatialReference));_906.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.CHANGED,lang.hitch(this,this.handleBasemapChanged));_906.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PAN_TO,lang.hitch(this,this.panToPoint));_906.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.ZOOM_OUT,lang.hitch(this,this.zoomOut));_906.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_CENTER,lang.hitch(this,this.handleGetCenter));_906.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,lang.hitch(this,this.handleGetExtent));_906.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_LEVEL,lang.hitch(this,this.handleGetLevel));_906.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_LEVEL,lang.hitch(this,this.handleSetLevel));_906.subscribe(VIEWER_GLOBALS.EVENTS.MAP.DIMENSIONS.GET,lang.hitch(this,this.handleGetMapDimensions));_906.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,lang.hitch(this,this.setMapExtent));_906.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LEVEL.GET_LEVEL_COUNT,lang.hitch(this,this.getZoomLevelCount));_906.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_PREV_EXTENT,lang.hitch(this,this.handleGotoPrevExtent));_906.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_NEXT_EXTENT,lang.hitch(this,this.handleGotoNextExtent));_906.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.CHANGED,lang.hitch(this,this.handleRecordNewMapExtent));_906.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_INITIAL_EXTENT,lang.hitch(this,this.handleGotoInitialExtent));_906.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_LAST_EXTENT,lang.hitch(this,this.handleGotoLastExtent));_906.subscribe(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.ZOOM_TO_LAYER,lang.hitch(this,this.handleZoomToLayer));},handleZoomToLayer:function(_90a){if(_90a.fullExtent){this.setExtent(_90a.fullExtent);}},handleGetSpatialReference:function(_90b){if(_90b!=null&&lang.isFunction(_90b)){_90b(this.map.extent.spatialReference);}},zoomOut:function(){var _90c=this.map.getLevel();var _90d=-1;if(_90c>1){_90d=_90c-1;}else{_90d=0;}this.map.setLevel(_90d);},handleBasemapChanged:function(){var _90e=this.getZoomLevelCount();_906.publish(VIEWER_GLOBALS.EVENTS.MAP.LEVEL.LEVEL_COUNT_CHANGED,_90e);},getZoomLevelCount:function(_90f){var _910=null;if(lang.isObject(this.map.__tileInfo)&&lang.isArray(this.map.__tileInfo.lods)){_910=this.map.__tileInfo.lods.length-1;}var _911={count:_910,current:this.map.getLevel()};if(_90f!=null&&lang.isFunction(_90f)){_90f(_911);}else{return _911;}return null;},setMapExtent:function(_912){if(_912!=null&&_912 instanceof _907){if(_912.spatialReference.wkid==this.map.spatialReference.wkid){this.map.setExtent(_912);}else{_906.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_MAP_SR,_912,lang.hitch(this,function(_913){if(lang.isArray(_913)&&_913.length>0){if(this.maxClientZoom!=null){this.map.setLevel(this.maxClientZoom);}this.map.setExtent(_913[0]);}}));}}},handleGetMapDimensions:function(_914){if(_914!=null&&lang.isFunction(_914)){_914({width:this.map.width,height:this.map.height});}},handleMapExtentChanged:function(){this.mapDisplayWidgets.showScale();},panToPoint:function(_915,_916){var _917;if(!(_915 instanceof _908)){return;}if(_916!=null&&lang.isObject(_916)){if(_916.zoomTo!=null&&_916.zoomTo===false){this.map.centerAt(_915);}else{if(_916.deepest!=null&&_916.deepest==true){if(lang.isObject(this.map.__tileInfo)&&lang.isArray(this.map.__tileInfo.lods)){_917=this.map.__tileInfo.lods.length-1;}}else{if(_916.zoomLevel!=null&&lang.isObject(this.map.__tileInfo)&&lang.isArray(this.map.__tileInfo.lods)){if(_917>=this.map.__tileInfo.lods.length){_917=this.map.__tileInfo.lods.length-1;}else{_917=_916.zoomLevel;}}}if(_917!=null){this.map.centerAndZoom(_915,_917);}}}else{if(this.map.getLevel()<8||this.map.getLevel()>15){_917=7;}else{_917=this.map.getLevel();}if(this.map.getLevel()==_917){this.map.centerAt(_915);}else{this.map.centerAndZoom(_915,_917);}}},handleSetLevel:function(_918){if(_918<this.map.__tileInfo.lods.length){this.map.setLevel(_918);}},handleGetLevel:function(_919){if(_919==null||!lang.isFunction(_919)){return;}_919(this.map.getLevel());},handleGetExtent:function(_91a){if(_91a==null||!lang.isFunction(_91a)){return;}_91a(this.map.extent);},handleGetCenter:function(_91b){if(_91b==null||!lang.isFunction(_91b)){return;}_91b(this.map.extent.getCenter());},handleRecordNewMapExtent:function(){if(arguments&&arguments[0]&&arguments[0].extent){if(!this.extentActionInProgress){if(this.currentExtentIdx<(this.extentArray.length-1)){this.extentArray.splice(this.currentExtentIdx+1,this.extentArray.length-(this.currentExtentIdx+1));}this.extentArray.push(arguments[0].extent);this.currentExtentIdx=this.extentArray.length-1;_906.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PREV_EXTENT_EXISTS,(this.currentExtentIdx>0));_906.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.NEXT_EXTENT_EXISTS,(this.currentExtentIdx<(this.extentArray.length-1)));}else{this.extentActionInProgress=false;}}},handleGotoPrevExtent:function(){if(this.currentExtentIdx>0){this.currentExtentIdx-=1;this.extentActionInProgress=true;_906.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,this.extentArray[this.currentExtentIdx]);_906.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PREV_EXTENT_EXISTS,(this.currentExtentIdx>0));_906.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.NEXT_EXTENT_EXISTS,(this.currentExtentIdx<(this.extentArray.length-1)));}},handleGotoNextExtent:function(){if(this.currentExtentIdx<this.extentArray.length-1){this.currentExtentIdx+=1;this.extentActionInProgress=true;_906.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,this.extentArray[this.currentExtentIdx]);_906.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PREV_EXTENT_EXISTS,(this.currentExtentIdx>0));_906.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.NEXT_EXTENT_EXISTS,(this.currentExtentIdx<(this.extentArray.length-1)));}},handleGotoInitialExtent:function(){this.currentExtentIdx=0;this.extentActionInProgress=true;_906.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,this.extentArray[this.currentExtentIdx]);_906.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PREV_EXTENT_EXISTS,(this.currentExtentIdx>0));_906.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.NEXT_EXTENT_EXISTS,(this.currentExtentIdx<(this.extentArray.length-1)));},handleGotoLastExtent:function(){this.currentExtentIdx=this.extentArray.length-1;this.extentActionInProgress=true;_906.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,this.extentArray[this.currentExtentIdx]);_906.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PREV_EXTENT_EXISTS,(this.currentExtentIdx>0));_906.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.NEXT_EXTENT_EXISTS,(this.currentExtentIdx<(this.extentArray.length-1)));}});});},"dojox/timing":function(){define(["./timing/_base"],function(_91c){return _91c;});},"esriviewer/util/RegExpUtils":function(){define(["dojo/_base/declare"],function(_91d){return _91d([],{URLRegExp:new RegExp(/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/),xmlExtensionRegExp:new RegExp(/\.xml$/i),jsonExtensionRegExp:new RegExp(/\.json$/i),kmlExtensionRegExp:new RegExp(/\.kml/i),featureLayerRegExp:new RegExp(/\/[0-9]+$/i),dateRegexp:new RegExp(/\d+\/\d+\/\d{4}/),numberRegExp:new RegExp(/^[+-]?\d*\.?\d*$/),numericRegexp:new RegExp(/[^0-9\.]/g),unsignedNumberRegExp:new RegExp(/^\d*\.?\d*$/),mapServiceNameRegExp:new RegExp(/.*\/(.*)\/MapServer\/?$/),geocodeServiceNameRegExp:new RegExp(/.*\/(.*)\/GeocodeServer\/?$/),imageServiceNameRegExp:new RegExp(/.*\/(.*)\/ImageServer\/?$/),globeServiceNameRegExp:new RegExp(/.*\/(.*)\/GlobeServer\/?$/),gpServerServiceNameRegExp:new RegExp(/.*\/(.*)\/GPServer\/?$/),featureServerServiceNameRegExp:new RegExp(/.*\/(.*)\/FeatureServer\/?$/),numberToStringWithCommasRegexp:new RegExp(/\B(?=(\d{3})+(?!\d))/g),whitespaceRegexp:new RegExp(/\s*/g),isUrl:function(_91e){return this.URLRegExp.test(_91e);},isFeatureLayer:function(url){var _91f=url.indexOf("/"+VIEWER_GLOBALS.SERVICE_TYPES.FEATURE_SERVER+"/")>-1;var _920=url.indexOf("/"+VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER+"/")>-1;if(_91f||_920){return this.featureLayerRegExp.test(url);}return false;},isXmlExtension:function(_921){return this.xmlExtensionRegExp.test(_921);},isJsonExtension:function(_922){return this.jsonExtensionRegExp.test(_922);},isKMLExtension:function(_923){return this.kmlExtensionRegExp.test(_923);},isDate:function(_924){return this.dateRegexp.test(_924);},isNumber:function(_925){return this.numberRegExp.test(_925);},isUnsignedNumber:function(_926){return this.unsignedNumberRegExp.test(_926);},stripNonNumeric:function(_927){var _928=_927.toString();var _929=false;if(_928.length>0&&_928[0]==="-"){_929=true;}var res=_928.replace(this.numericRegexp,"");if(_929){res="-"+res;}return res;},stripWhitespace:function(_92a){return _92a.toString().replace(this.whitespaceRegexp,"");},getCharacterOccurrenceCount:function(_92b,_92c){return this.getCharacterOccuranceCount(_92b,_92c);},getCharacterOccuranceCount:function(_92d,_92e){return _92e.split(_92d).length-1;},getServiceNameFromUrl:function(url){var type=VIEWER_UTILS.getServiceTypeFromUrl(url);if(type){var _92f=null;if(type==VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER){_92f=this.mapServiceNameRegExp;}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER){_92f=this.imageServiceNameRegExp;}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.GP_SERVER){_92f=this.gpServerServiceNameRegExp;}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.GLOBE_SERVER){_92f=this.globeServiceNameRegExp;}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.FEATURE_SERVER){_92f=this.featureServerServiceNameRegExp;}else{if(type==VIEWER_GLOBALS.SERVICE_TYPES.GEOCODE_SERVER){_92f=this.geocodeServiceNameRegExp;}else{return url;}}}}}}var res=_92f.exec(url);if(res!=undefined&&res[1]!=undefined){return res[1].replace("_"," ");}return url;}else{return url;}},numberToStringWithCommas:function(x){var _930=x.toString().split(".");_930[0]=_930[0].replace(this.numberToStringWithCommasRegexp,",");return _930.join(".");}});});},"esriviewer/ui/draw/DrawWidget":function(){define(["dojo/_base/declare","dojo/text!./template/DrawWidgetTemplate.html","dojo/topic","dojo/_base/lang","../base/UITemplatedWidget","./base/MapDrawSupport","./configure/ConfigureDrawWidget","./base/GraphicsListWidget","./model/DrawWidgetViewModel","./base/GraphicsLocalStorageMixin","./base/UserPersistedGraphicsListWidget","dijit/form/CheckBox","esri/layers/GraphicsLayer","esri/graphic"],function(_931,_932,_933,lang,_934,_935,_936,_937,_938,_939,_93a,_93b,_93c,_93d){return _931([_934,_935,_939],{bindingsApplied:false,templateString:_932,constructor:function(){this.freehandActive=false;},initListeners:function(){this.inherited(arguments);_933.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.USER.GET_USER_GRAPHICS,lang.hitch(this,this.getUserGraphics));_933.subscribe(VIEWER_GLOBALS.EVENTS.DRAW.CLEAR_STORED_GRAPHICS,lang.hitch(this,this._clearStoredGraphics));},postCreate:function(){this.viewModel=new _938();this.viewModel.drawVisible.subscribe(lang.hitch(this,this._handleDrawVisibilityChanged));this.viewModel.configurationVisible.subscribe(lang.hitch(this,this._handleConfigurationVisibilityChanged));this.viewModel.graphicsListVisible.subscribe(lang.hitch(this,this._handleGraphicsListVisibilityChanged));this.viewModel.userPersistedGraphicsVisible.subscribe(lang.hitch(this,this._handleUserPersistedVisibilityChanged));this.viewModel.showUserPersistedGraphicsIcon(this.localStoragePersistSupported);var _93e=false;for(var key in this.persistedUserGraphics){_93e=true;break;}this.viewModel.showSavedGraphicsTab(_93e);this.applyBindings();this._createConfigureDrawWidget();this._createGraphicsListWidget();if(this.localStoragePersistSupported){this._createUserPersistedGraphicsListWidget();}this.inherited(arguments);this.drawGraphicsLayer=_93c();_933.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.ADD_EXTERNAL_MANAGED_LAYER,this.drawGraphicsLayer);_933.publish(VIEWER_GLOBALS.EVENTS.DRAW.DRAW_GRAPHICS_LAYER_CREATED);},_clearStoredGraphics:function(){this.deleteAllPersistedGraphics();},_handleConfigurationVisibilityChanged:function(_93f){this._handleContentAnimation(_93f,this.drawWindowConfigureContainer);},_handleGraphicsListVisibilityChanged:function(_940){this._handleContentAnimation(_940,this.drawWindowGraphicsListContainer);},_handleUserPersistedVisibilityChanged:function(_941){this._handleContentAnimation(_941,this.drawWindowUserPersistedGraphicsContainer);},_handleDrawVisibilityChanged:function(_942){this._handleContentAnimation(_942,this.drawWindowInputIconsContainer);},applyBindings:function(){if(!this.bindingsApplied){this._applyBindings();}},_applyBindings:function(){if(!this.bindingsApplied){ko.applyBindings(this.viewModel,this.domNode);this.bindingsApplied=true;}},_createConfigureDrawWidget:function(){if(this.configureDrawWidget==null){this.configureDrawWidget=new _936();this.configureDrawWidget.placeAt(this.drawWindowConfigureContainer);this.configureDrawWidget.on("pointSymbolChanged",lang.hitch(this,this.handlePointSymbolChanged));this.configureDrawWidget.on("lineSymbolChanged",lang.hitch(this,this.handleLineSymbolChanged));this.configureDrawWidget.on("polygonSymbolChanged",lang.hitch(this,this.handlePolygonSymbolChanged));this.configureDrawWidget.on("rectangleSymbolChanged",lang.hitch(this,this.handleRectangleSymbolChanged));this.configureDrawWidget.on("textSymbolChanged",lang.hitch(this,this.handleTextSymbolChanged));this.pointSymbol=this.configureDrawWidget.pointConfigurationWidget.getSymbol();this.lineSymbol=this.configureDrawWidget.lineConfigurationWidget.getSymbol();this.envelopeSymbol=this.configureDrawWidget.rectangleConfigurationWidget.getSymbol();this.textSymbol=this.configureDrawWidget.configureTextWidget.getSymbol();this.polygonSymbol=this.configureDrawWidget.configurePolygonWidget.getSymbol();}},handlePointSymbolChanged:function(_943){this.pointSymbol=_943;},handleLineSymbolChanged:function(_944){this.lineSymbol=_944;},handlePolygonSymbolChanged:function(_945){this.polygonSymbol=_945;},handleRectangleSymbolChanged:function(_946){this.envelopeSymbol=_946;},handleTextSymbolChanged:function(_947){this.textSymbol=_947;},_createUserPersistedGraphicsListWidget:function(){if(this.userPersistedGraphicsListWidget==null){this.userPersistedGraphicsListWidget=new _93a();this.userPersistedGraphicsListWidget.placeAt(this.drawWindowUserPersistedGraphicsContainer);this.userPersistedGraphicsListWidget.on("removeUserPersistedGraphics",lang.hitch(this,this.removeUserPersistedGraphics));this.userPersistedGraphicsListWidget.on("addUserPersistedGraphicsToMap",lang.hitch(this,this.addUserPersistedGraphicsToMap));this.userPersistedGraphicsListWidget.addExistingPersistedGraphicsItems(this.persistedUserGraphics);}},_createGraphicsListWidget:function(){if(this.graphicsListWidget==null){this.graphicsListWidget=new _937({saveSupported:this.localStoragePersistSupported});this.graphicsListWidget.placeAt(this.drawWindowGraphicsListContainer);this.graphicsListWidget.viewModel.hasGraphics.subscribe(lang.hitch(this,this._handleCheckForExistingGraphics));this.graphicsListWidget.on("removeAllGraphics",lang.hitch(this,this.removeAllGraphics));this.graphicsListWidget.on("removeGraphic",lang.hitch(this,this.removeGraphic));this.graphicsListWidget.on("saveGraphics",lang.hitch(this,this.saveUserGraphics));}},saveUserGraphics:function(_948,_949){var _94a=this.persistUserGraphics(_948,_949);if(_94a){this.userPersistedGraphicsListWidget.addUserPersistedGraphics(_94a);this.viewModel.showSavedGraphicsTab(true);}},addUserPersistedGraphicsToMap:function(_94b){if(_94b==null||!lang.isObject(_94b)){return;}if(_94b.graphics==null||!lang.isArray(_94b.graphics)){return;}var _94c;for(var i=0;i<_94b.graphics.length;i++){_94c=_94b.graphics[i].graphic;var _94d=new _93d(_94c);var _94e={label:_94b.graphics[i].label,graphic:_94d};this.onAnnotationCreated(_94e);}},removeUserPersistedGraphics:function(_94f){var _950=this.deleteUserPersistedGraphics(_94f);this.viewModel.showSavedGraphicsTab(_950);},removeAllGraphics:function(){this.drawGraphicsLayer.clear();},removeGraphic:function(_951){if(_951){this.drawGraphicsLayer.remove(_951);}},getUserGraphics:function(_952){if(_952&&lang.isFunction(_952)){_952(this.graphicsListWidget.getGraphics());}},_handleCheckForExistingGraphics:function(_953){if(!_953){this.viewModel.graphicsListTabVisible(false);this.viewModel.showDraw();}else{this.viewModel.graphicsListTabVisible(true);}},handlePointDrawClick:function(){var _954=this.viewModel.pointActive();this.clearDraw();if(!_954){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT);this.viewModel.setDrawMode(this.viewModel.drawModes.point);}},handleTextDrawClick:function(){var _955=this.viewModel.textActive();this.clearDraw();if(!_955){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT);this.viewModel.setDrawMode(this.viewModel.drawModes.text);}},handleLineDrawClick:function(){var _956=this.viewModel.lineActive();this.clearDraw();if(!_956){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_LINE);this.viewModel.setDrawMode(this.viewModel.drawModes.line);}},handlePolylineDrawClick:function(){var _957=this.viewModel.polylineActive();this.clearDraw();if(!_957){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE);this.viewModel.setDrawMode(this.viewModel.drawModes.polyline);}},handlePolygonDrawClick:function(){var _958=this.viewModel.polygonActive();this.clearDraw();if(!_958){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON);this.viewModel.setDrawMode(this.viewModel.drawModes.polygon);}},handleRectangleDrawClick:function(){var _959=this.viewModel.rectangleActive();this.clearDraw();if(!_959){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_RECTANGLE);this.viewModel.setDrawMode(this.viewModel.drawModes.rectangle);}},clearDraw:function(){this.inherited(arguments);this.viewModel.setDrawMode(null);_933.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.DRAW_CANCEL);},geometryAdded:function(_95a){this.inherited(arguments);var _95b=this.viewModel.getCurrentDrawType();this.clearDraw();if(_95b!=null){if(_95b===this.viewModel.drawModes.rectangle){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_RECTANGLE);this.viewModel.setDrawMode(this.viewModel.drawModes.rectangle);}if(_95b===this.viewModel.drawModes.point){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT);this.viewModel.setDrawMode(this.viewModel.drawModes.point);}if(_95b===this.viewModel.drawModes.polygon){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON);this.viewModel.setDrawMode(this.viewModel.drawModes.polygon);}if(_95b===this.viewModel.drawModes.polyline){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE);this.viewModel.setDrawMode(this.viewModel.drawModes.polyline);}if(_95b===this.viewModel.drawModes.line){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_LINE);this.viewModel.setDrawMode(this.viewModel.drawModes.line);}if(_95b===this.viewModel.drawModes.text){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_TEXT);this.viewModel.setDrawMode(this.viewModel.drawModes.text);}}},toggleFreehand:function(){this.freeHandDrawCheckbox.set("checked",!this.freeHandDrawCheckbox.get("checked"));},handleFreehandToggled:function(){this.freehandActive=this.freeHandDrawCheckbox.get("checked");var _95c=this.viewModel.getCurrentDrawType();if(_95c===this.viewModel.drawModes.polygon){this.clearDraw();this.viewModel.setDrawMode(this.viewModel.drawModes.polygon);this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYGON);}if(_95c===this.viewModel.drawModes.polyline){this.clearDraw();this.viewModel.setDrawMode(this.viewModel.drawModes.polyline);this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POLYLINE);}},onAnnotationCreated:function(_95d){this.inherited(arguments);this.graphicsListWidget.addGraphic(_95d);this.drawGraphicsLayer.add(_95d.graphic);},hidePopups:function(){if(this.graphicsListWidget){this.graphicsListWidget.hidePopups();}}});});},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(dojo,lang,_95e,_95f){var _960={};lang.setObject("dojo.colors",_960);var _961=function(m1,m2,h){if(h<0){++h;}if(h>1){--h;}var h6=6*h;if(h6<1){return m1+(m2-m1)*h6;}if(2*h<1){return m2;}if(3*h<2){return m1+(m2-m1)*(2/3-h)*6;}return m1;};dojo.colorFromRgb=_95e.fromRgb=function(_962,obj){var m=_962.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(m){var c=m[2].split(/\s*,\s*/),l=c.length,t=m[1],a;if((t=="rgb"&&l==3)||(t=="rgba"&&l==4)){var r=c[0];if(r.charAt(r.length-1)=="%"){a=_95f.map(c,function(x){return parseFloat(x)*2.56;});if(l==4){a[3]=c[3];}return _95e.fromArray(a,obj);}return _95e.fromArray(c,obj);}if((t=="hsl"&&l==3)||(t=="hsla"&&l==4)){var H=((parseFloat(c[0])%360)+360)%360/360,S=parseFloat(c[1])/100,L=parseFloat(c[2])/100,m2=L<=0.5?L*(S+1):L+S-L*S,m1=2*L-m2;a=[_961(m1,m2,H+1/3)*256,_961(m1,m2,H)*256,_961(m1,m2,H-1/3)*256,1];if(l==4){a[3]=c[3];}return _95e.fromArray(a,obj);}}return null;};var _963=function(c,low,high){c=Number(c);return isNaN(c)?high:c<low?low:c>high?high:c;};_95e.prototype.sanitize=function(){var t=this;t.r=Math.round(_963(t.r,0,255));t.g=Math.round(_963(t.g,0,255));t.b=Math.round(_963(t.b,0,255));t.a=_963(t.a,0,1);return this;};_960.makeGrey=_95e.makeGrey=function(g,a){return _95e.fromArray([g,g,g,a]);};lang.mixin(_95e.named,{"aliceblue":[240,248,255],"antiquewhite":[250,235,215],"aquamarine":[127,255,212],"azure":[240,255,255],"beige":[245,245,220],"bisque":[255,228,196],"blanchedalmond":[255,235,205],"blueviolet":[138,43,226],"brown":[165,42,42],"burlywood":[222,184,135],"cadetblue":[95,158,160],"chartreuse":[127,255,0],"chocolate":[210,105,30],"coral":[255,127,80],"cornflowerblue":[100,149,237],"cornsilk":[255,248,220],"crimson":[220,20,60],"cyan":[0,255,255],"darkblue":[0,0,139],"darkcyan":[0,139,139],"darkgoldenrod":[184,134,11],"darkgray":[169,169,169],"darkgreen":[0,100,0],"darkgrey":[169,169,169],"darkkhaki":[189,183,107],"darkmagenta":[139,0,139],"darkolivegreen":[85,107,47],"darkorange":[255,140,0],"darkorchid":[153,50,204],"darkred":[139,0,0],"darksalmon":[233,150,122],"darkseagreen":[143,188,143],"darkslateblue":[72,61,139],"darkslategray":[47,79,79],"darkslategrey":[47,79,79],"darkturquoise":[0,206,209],"darkviolet":[148,0,211],"deeppink":[255,20,147],"deepskyblue":[0,191,255],"dimgray":[105,105,105],"dimgrey":[105,105,105],"dodgerblue":[30,144,255],"firebrick":[178,34,34],"floralwhite":[255,250,240],"forestgreen":[34,139,34],"gainsboro":[220,220,220],"ghostwhite":[248,248,255],"gold":[255,215,0],"goldenrod":[218,165,32],"greenyellow":[173,255,47],"grey":[128,128,128],"honeydew":[240,255,240],"hotpink":[255,105,180],"indianred":[205,92,92],"indigo":[75,0,130],"ivory":[255,255,240],"khaki":[240,230,140],"lavender":[230,230,250],"lavenderblush":[255,240,245],"lawngreen":[124,252,0],"lemonchiffon":[255,250,205],"lightblue":[173,216,230],"lightcoral":[240,128,128],"lightcyan":[224,255,255],"lightgoldenrodyellow":[250,250,210],"lightgray":[211,211,211],"lightgreen":[144,238,144],"lightgrey":[211,211,211],"lightpink":[255,182,193],"lightsalmon":[255,160,122],"lightseagreen":[32,178,170],"lightskyblue":[135,206,250],"lightslategray":[119,136,153],"lightslategrey":[119,136,153],"lightsteelblue":[176,196,222],"lightyellow":[255,255,224],"limegreen":[50,205,50],"linen":[250,240,230],"magenta":[255,0,255],"mediumaquamarine":[102,205,170],"mediumblue":[0,0,205],"mediumorchid":[186,85,211],"mediumpurple":[147,112,219],"mediumseagreen":[60,179,113],"mediumslateblue":[123,104,238],"mediumspringgreen":[0,250,154],"mediumturquoise":[72,209,204],"mediumvioletred":[199,21,133],"midnightblue":[25,25,112],"mintcream":[245,255,250],"mistyrose":[255,228,225],"moccasin":[255,228,181],"navajowhite":[255,222,173],"oldlace":[253,245,230],"olivedrab":[107,142,35],"orange":[255,165,0],"orangered":[255,69,0],"orchid":[218,112,214],"palegoldenrod":[238,232,170],"palegreen":[152,251,152],"paleturquoise":[175,238,238],"palevioletred":[219,112,147],"papayawhip":[255,239,213],"peachpuff":[255,218,185],"peru":[205,133,63],"pink":[255,192,203],"plum":[221,160,221],"powderblue":[176,224,230],"rosybrown":[188,143,143],"royalblue":[65,105,225],"saddlebrown":[139,69,19],"salmon":[250,128,114],"sandybrown":[244,164,96],"seagreen":[46,139,87],"seashell":[255,245,238],"sienna":[160,82,45],"skyblue":[135,206,235],"slateblue":[106,90,205],"slategray":[112,128,144],"slategrey":[112,128,144],"snow":[255,250,250],"springgreen":[0,255,127],"steelblue":[70,130,180],"tan":[210,180,140],"thistle":[216,191,216],"tomato":[255,99,71],"turquoise":[64,224,208],"violet":[238,130,238],"wheat":[245,222,179],"whitesmoke":[245,245,245],"yellowgreen":[154,205,50]});return _95e;});},"dojox/uuid/Uuid":function(){define(["dojo/_base/lang","./_base"],function(dojo,uuid){dojox.uuid.Uuid=function(_964){this._uuidString=dojox.uuid.NIL_UUID;if(_964){dojox.uuid.assert(dojo.isString(_964));this._uuidString=_964.toLowerCase();dojox.uuid.assert(this.isValid());}else{var _965=dojox.uuid.Uuid.getGenerator();if(_965){this._uuidString=_965();dojox.uuid.assert(this.isValid());}}};dojox.uuid.Uuid.compare=function(_966,_967){var _968=_966.toString();var _969=_967.toString();if(_968>_969){return 1;}if(_968<_969){return -1;}return 0;};dojox.uuid.Uuid.setGenerator=function(_96a){dojox.uuid.assert(!_96a||dojo.isFunction(_96a));dojox.uuid.Uuid._ourGenerator=_96a;};dojox.uuid.Uuid.getGenerator=function(){return dojox.uuid.Uuid._ourGenerator;};dojox.uuid.Uuid.prototype.toString=function(){return this._uuidString;};dojox.uuid.Uuid.prototype.compare=function(_96b){return dojox.uuid.Uuid.compare(this,_96b);};dojox.uuid.Uuid.prototype.isEqual=function(_96c){return (this.compare(_96c)==0);};dojox.uuid.Uuid.prototype.isValid=function(){return dojox.uuid.isValid(this);};dojox.uuid.Uuid.prototype.getVariant=function(){return dojox.uuid.getVariant(this);};dojox.uuid.Uuid.prototype.getVersion=function(){if(!this._versionNumber){this._versionNumber=dojox.uuid.getVersion(this);}return this._versionNumber;};dojox.uuid.Uuid.prototype.getNode=function(){if(!this._nodeString){this._nodeString=dojox.uuid.getNode(this);}return this._nodeString;};dojox.uuid.Uuid.prototype.getTimestamp=function(_96d){if(!_96d){_96d=null;}switch(_96d){case "string":case String:return this.getTimestamp(Date).toUTCString();break;case "hex":if(!this._timestampAsHexString){this._timestampAsHexString=dojox.uuid.getTimestamp(this,"hex");}return this._timestampAsHexString;break;case null:case "date":case Date:if(!this._timestampAsDate){this._timestampAsDate=dojox.uuid.getTimestamp(this,Date);}return this._timestampAsDate;break;default:dojox.uuid.assert(false,"The getTimestamp() method dojox.uuid.Uuid was passed a bogus returnType: "+_96d);break;}};return dojox.uuid.Uuid;});},"esriviewer/ui/social/SocialMediaWidgetWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/dom-class","../window/WindowWidget"],function(_96e,lang,_96f,_970,_971){return _96e([_971],{defaultPositioning:{x:400,y:125},constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/social/SocialMediaWidget"],lang.hitch(this,function(_972){this.socialMediaWidget=new _972();this.setContent(this.socialMediaWidget.domNode);this.socialMediaWidget.listenForMapCursor();}));},windowWidth:"400px",windowHeaderText:"Search Social Media",windowIconAltText:"Search Social Media",windowIconClass:"commonIcons16 binoculars",positioningParamName:"socialMedia",postCreate:function(){this.inherited(arguments);_970.add(this.windowContent,"socialMediaWindowContent");},initListeners:function(){this.inherited(arguments);this.subscribes.push(_96f.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.SOCIAL_MEDIA.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_96f.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.SOCIAL_MEDIA.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_96f.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.SOCIAL_MEDIA.TOGGLE,lang.hitch(this,this.toggle)));},show:function(){this.inherited(arguments);if(this.socialMediaWidget){this.socialMediaWidget.listenForMapCursor();}},hide:function(){this.inherited(arguments);if(this.socialMediaWidget){this.socialMediaWidget.stopMapCursorListener();}}});});},"dijit/tree/_dndContainer":function(){define(["dojo/aspect","dojo/_base/declare","dojo/dom-class","dojo/_base/lang","dojo/on","dojo/touch"],function(_973,_974,_975,lang,on,_976){return _974("dijit.tree._dndContainer",null,{constructor:function(tree,_977){this.tree=tree;this.node=tree.domNode;lang.mixin(this,_977);this.containerState="";_975.add(this.node,"dojoDndContainer");this.events=[on(this.node,_976.enter,lang.hitch(this,"onOverEvent")),on(this.node,_976.leave,lang.hitch(this,"onOutEvent")),_973.after(this.tree,"_onNodeMouseEnter",lang.hitch(this,"onMouseOver"),true),_973.after(this.tree,"_onNodeMouseLeave",lang.hitch(this,"onMouseOut"),true),on(this.node,"dragstart, selectstart",function(evt){evt.preventDefault();})];},destroy:function(){var h;while(h=this.events.pop()){h.remove();}this.node=this.parent=null;},onMouseOver:function(_978){this.current=_978;},onMouseOut:function(){this.current=null;},_changeState:function(type,_979){var _97a="dojoDnd"+type;var _97b=type.toLowerCase()+"State";_975.replace(this.node,_97a+_979,_97a+this[_97b]);this[_97b]=_979;},_addItemClass:function(node,type){_975.add(node,"dojoDndItem"+type);},_removeItemClass:function(node,type){_975.remove(node,"dojoDndItem"+type);},onOverEvent:function(){this._changeState("Container","Over");},onOutEvent:function(){this._changeState("Container","");}});});},"dijit/form/_FormSelectWidget":function(){define(["dojo/_base/array","dojo/_base/Deferred","dojo/aspect","dojo/data/util/sorter","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/when","dojo/store/util/QueryResults","./_FormValueWidget"],function(_97c,_97d,_97e,_97f,_980,dom,_981,_982,lang,_983,when,_984,_985){var _986=_980("dijit.form._FormSelectWidget",_985,{multiple:false,options:null,store:null,query:null,queryOptions:null,labelAttr:"",onFetch:null,sortByLabel:true,loadChildrenOnOpen:false,onLoadDeferred:null,getOptions:function(_987){var opts=this.options||[];if(_987==null){return opts;}if(lang.isArray(_987)){return _97c.map(_987,"return this.getOptions(item);",this);}if(lang.isString(_987)){_987={value:_987};}if(lang.isObject(_987)){if(!_97c.some(opts,function(_988,idx){for(var a in _987){if(!(a in _988)||_988[a]!=_987[a]){return false;}}_987=idx;return true;})){_987=-1;}}if(_987>=0&&_987<opts.length){return opts[_987];}return null;},addOption:function(_989){_97c.forEach(lang.isArray(_989)?_989:[_989],function(i){if(i&&lang.isObject(i)){this.options.push(i);}},this);this._loadChildren();},removeOption:function(_98a){var _98b=this.getOptions(lang.isArray(_98a)?_98a:[_98a]);_97c.forEach(_98b,function(_98c){if(_98c){this.options=_97c.filter(this.options,function(node){return (node.value!==_98c.value||node.label!==_98c.label);});this._removeOptionItem(_98c);}},this);this._loadChildren();},updateOption:function(_98d){_97c.forEach(lang.isArray(_98d)?_98d:[_98d],function(i){var _98e=this.getOptions({value:i.value}),k;if(_98e){for(k in i){_98e[k]=i[k];}}},this);this._loadChildren();},setStore:function(_98f,_990,_991){var _992=this.store;_991=_991||{};if(_992!==_98f){var h;while((h=this._notifyConnections.pop())){h.remove();}if(!_98f.get){lang.mixin(_98f,{_oldAPI:true,get:function(id){var _993=new _97d();this.fetchItemByIdentity({identity:id,onItem:function(_994){_993.resolve(_994);},onError:function(_995){_993.reject(_995);}});return _993.promise;},query:function(_996,_997){var _998=new _97d(function(){if(_999.abort){_999.abort();}});_998.total=new _97d();var _999=this.fetch(lang.mixin({query:_996,onBegin:function(_99a){_998.total.resolve(_99a);},onComplete:function(_99b){_998.resolve(_99b);},onError:function(_99c){_998.reject(_99c);}},_997));return new _984(_998);}});if(_98f.getFeatures()["dojo.data.api.Notification"]){this._notifyConnections=[_97e.after(_98f,"onNew",lang.hitch(this,"_onNewItem"),true),_97e.after(_98f,"onDelete",lang.hitch(this,"_onDeleteItem"),true),_97e.after(_98f,"onSet",lang.hitch(this,"_onSetItem"),true)];}}this._set("store",_98f);}if(this.options&&this.options.length){this.removeOption(this.options);}if(this._queryRes&&this._queryRes.close){this._queryRes.close();}if(_991.query){this._set("query",_991.query);this._set("queryOptions",_991.queryOptions);}if(_98f){this._loadingStore=true;this.onLoadDeferred=new _97d();this._queryRes=_98f.query(this.query,this.queryOptions);when(this._queryRes,lang.hitch(this,function(_99d){if(this.sortByLabel&&!_991.sort&&_99d.length){if(_98f.getValue){_99d.sort(_97f.createSortFunction([{attribute:_98f.getLabelAttributes(_99d[0])[0]}],_98f));}else{var _99e=this.labelAttr;_99d.sort(function(a,b){return a[_99e]>b[_99e]?1:b[_99e]>a[_99e]?-1:0;});}}if(_991.onFetch){_99d=_991.onFetch.call(this,_99d,_991);}_97c.forEach(_99d,function(i){this._addOptionForItem(i);},this);if(this._queryRes.observe){this._queryRes.observe(lang.hitch(this,function(_99f,_9a0,_9a1){if(_9a0==_9a1){this._onSetItem(_99f);}else{if(_9a0!=-1){this._onDeleteItem(_99f);}if(_9a1!=-1){this._onNewItem(_99f);}}}),true);}this._loadingStore=false;this.set("value","_pendingValue" in this?this._pendingValue:_990);delete this._pendingValue;if(!this.loadChildrenOnOpen){this._loadChildren();}else{this._pseudoLoadChildren(_99d);}this.onLoadDeferred.resolve(true);this.onSetStore();}),function(err){this.onLoadDeferred.reject(err);});}return _992;},_setValueAttr:function(_9a2,_9a3){if(!this._onChangeActive){_9a3=null;}if(this._loadingStore){this._pendingValue=_9a2;return;}if(_9a2==null){return;}if(lang.isArray(_9a2)){_9a2=_97c.map(_9a2,function(_9a4){return lang.isObject(_9a4)?_9a4:{value:_9a4};});}else{if(lang.isObject(_9a2)){_9a2=[_9a2];}else{_9a2=[{value:_9a2}];}}_9a2=_97c.filter(this.getOptions(_9a2),function(i){return i&&i.value;});var opts=this.getOptions()||[];if(!this.multiple&&(!_9a2[0]||!_9a2[0].value)&&!!opts.length){_9a2[0]=opts[0];}_97c.forEach(opts,function(opt){opt.selected=_97c.some(_9a2,function(v){return v.value===opt.value;});});var val=_97c.map(_9a2,function(opt){return opt.value;});if(typeof val=="undefined"||typeof val[0]=="undefined"){return;}var disp=_97c.map(_9a2,function(opt){return opt.label;});this._setDisplay(this.multiple?disp:disp[0]);this.inherited(arguments,[this.multiple?val:val[0],_9a3]);this._updateSelection();},_getDisplayedValueAttr:function(){var ret=_97c.map([].concat(this.get("selectedOptions")),function(v){if(v&&"label" in v){return v.label;}else{if(v){return v.value;}}return null;},this);return this.multiple?ret:ret[0];},_setDisplayedValueAttr:function(_9a5){this.set("value",this.getOptions(typeof _9a5=="string"?{label:_9a5}:_9a5));},_loadChildren:function(){if(this._loadingStore){return;}_97c.forEach(this._getChildren(),function(_9a6){_9a6.destroyRecursive();});_97c.forEach(this.options,this._addOptionItem,this);this._updateSelection();},_updateSelection:function(){this.focusedChild=null;this._set("value",this._getValueFromOpts());var val=[].concat(this.value);if(val&&val[0]){var self=this;_97c.forEach(this._getChildren(),function(_9a7){var _9a8=_97c.some(val,function(v){return _9a7.option&&(v===_9a7.option.value);});if(_9a8&&!self.multiple){self.focusedChild=_9a7;}_981.toggle(_9a7.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),_9a8);_9a7.domNode.setAttribute("aria-selected",_9a8?"true":"false");},this);}},_getValueFromOpts:function(){var opts=this.getOptions()||[];if(!this.multiple&&opts.length){var opt=_97c.filter(opts,function(i){return i.selected;})[0];if(opt&&opt.value){return opt.value;}else{opts[0].selected=true;return opts[0].value;}}else{if(this.multiple){return _97c.map(_97c.filter(opts,function(i){return i.selected;}),function(i){return i.value;})||[];}}return "";},_onNewItem:function(item,_9a9){if(!_9a9||!_9a9.parent){this._addOptionForItem(item);}},_onDeleteItem:function(item){var _9aa=this.store;this.removeOption({value:_9aa.getIdentity(item)});},_onSetItem:function(item){this.updateOption(this._getOptionObjForItem(item));},_getOptionObjForItem:function(item){var _9ab=this.store,_9ac=(this.labelAttr&&this.labelAttr in item)?item[this.labelAttr]:_9ab.getLabel(item),_9ad=(_9ac?_9ab.getIdentity(item):null);return {value:_9ad,label:_9ac,item:item};},_addOptionForItem:function(item){var _9ae=this.store;if(_9ae.isItemLoaded&&!_9ae.isItemLoaded(item)){_9ae.loadItem({item:item,onItem:function(i){this._addOptionForItem(i);},scope:this});return;}var _9af=this._getOptionObjForItem(item);this.addOption(_9af);},constructor:function(_9b0){this._oValue=(_9b0||{}).value||null;this._notifyConnections=[];},buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.focusNode,false);},_fillContent:function(){if(!this.options){this.options=this.srcNodeRef?_983("> *",this.srcNodeRef).map(function(node){if(node.getAttribute("type")==="separator"){return {value:"",label:"",selected:false,disabled:false};}return {value:(node.getAttribute("data-"+_982._scopeName+"-value")||node.getAttribute("value")),label:String(node.innerHTML),selected:node.getAttribute("selected")||false,disabled:node.getAttribute("disabled")||false};},this):[];}if(!this.value){this._set("value",this._getValueFromOpts());}else{if(this.multiple&&typeof this.value=="string"){this._set("value",this.value.split(","));}}},postCreate:function(){this.inherited(arguments);_97e.after(this,"onChange",lang.hitch(this,"_updateSelection"));var _9b1=this.store;if(_9b1&&(_9b1.getIdentity||_9b1.getFeatures()["dojo.data.api.Identity"])){this.store=null;this.setStore(_9b1,this._oValue);}},startup:function(){this._loadChildren();this.inherited(arguments);},destroy:function(){var h;while((h=this._notifyConnections.pop())){h.remove();}if(this._queryRes&&this._queryRes.close){this._queryRes.close();}this.inherited(arguments);},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return [];},_getSelectedOptionsAttr:function(){return this.getOptions({selected:true});},_pseudoLoadChildren:function(){},onSetStore:function(){}});return _986;});},"esriviewer/ui/configure/ConfigureViewerWindow":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/dom-class","../window/WindowWidget"],function(_9b2,_9b3,lang,_9b4,_9b5){return _9b2([_9b5],{defaultPositioning:{x:500,y:50},constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/configure/ConfigureViewerWidget"],lang.hitch(this,function(_9b6){this.configureViewerWidget=new _9b6();this.setContent(this.configureViewerWidget.domNode);}));},isPositionedByConfig:true,canMinimize:false,windowHeaderText:"Configure Viewer",windowIconAltText:"Configure Viewer",windowIconClass:"commonIcons16 gear",postCreate:function(){this.inherited(arguments);_9b4.add(this.windowContent,"configureWindowContent");},initListeners:function(){this.inherited(arguments);this.subscribes.push(_9b3.subscribe(VIEWER_GLOBALS.EVENTS.CONFIGURE.WINDOW.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_9b3.subscribe(VIEWER_GLOBALS.EVENTS.CONFIGURE.WINDOW.HIDE,lang.hitch(this,this.hide)));},hidePopups:function(){this.inherited(arguments);if(this.configureViewerWidget){this.configureViewerWidget.hidePopups();}}});});},"dijit/form/Select":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/i18n","dojo/_base/lang","dojo/on","dojo/sniff","./_FormSelectWidget","../_HasDropDown","../DropDownMenu","../MenuItem","../MenuSeparator","../Tooltip","../_KeyNavMixin","../registry","dojo/text!./templates/Select.html","dojo/i18n!./nls/validate"],function(_9b7,_9b8,_9b9,_9ba,_9bb,i18n,lang,on,has,_9bc,_9bd,_9be,_9bf,_9c0,_9c1,_9c2,_9c3,_9c4){var _9c5=_9b8("dijit.form._SelectMenu",_9be,{autoFocus:true,buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("role","listbox");},postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,"selectstart",function(evt){evt.preventDefault();evt.stopPropagation();}));},focus:function(){var _9c6=false,val=this.parentWidget.value;if(lang.isArray(val)){val=val[val.length-1];}if(val){_9b7.forEach(this.parentWidget._getChildren(),function(_9c7){if(_9c7.option&&(val===_9c7.option.value)){_9c6=true;this.focusChild(_9c7,false);}},this);}if(!_9c6){this.inherited(arguments);}}});var _9c8=_9b8("dijit.form.Select"+(has("dojo-bidi")?"_NoBidi":""),[_9bc,_9bd,_9c2],{baseClass:"dijitSelect dijitValidationTextBox",templateString:_9c4,_buttonInputDisabled:has("ie")?"disabled":"",required:false,state:"",message:"",tooltipPosition:[],emptyLabel:"&#160;",_isLoaded:false,_childrenLoaded:false,_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var si=this.srcNodeRef.selectedIndex||0;this._set("value",this.options[si>=0?si:0].value);}this.dropDown=new _9c5({id:this.id+"_menu",parentWidget:this});_9ba.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "));},_getMenuItemForOption:function(_9c9){if(!_9c9.value&&!_9c9.label){return new _9c0({ownerDocument:this.ownerDocument});}else{var _9ca=lang.hitch(this,"_setValueAttr",_9c9);var item=new _9bf({option:_9c9,label:_9c9.label||this.emptyLabel,onClick:_9ca,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:_9c9.disabled||false});item.focusNode.setAttribute("role","option");return item;}},_addOptionItem:function(_9cb){if(this.dropDown){this.dropDown.addChild(this._getMenuItemForOption(_9cb));}},_getChildren:function(){if(!this.dropDown){return [];}return this.dropDown.getChildren();},focus:function(){if(!this.disabled&&this.focusNode.focus){try{this.focusNode.focus();}catch(e){}}},focusChild:function(_9cc){if(_9cc){this.set("value",_9cc.option);}},_getFirst:function(){var _9cd=this._getChildren();return _9cd.length?_9cd[0]:null;},_getLast:function(){var _9ce=this._getChildren();return _9ce.length?_9ce[_9ce.length-1]:null;},childSelector:function(node){var node=_9c3.byNode(node);return node&&node.getParent()==this.dropDown;},onKeyboardSearch:function(item,evt,_9cf,_9d0){if(item){this.focusChild(item);}},_loadChildren:function(_9d1){if(_9d1===true){if(this.dropDown){delete this.dropDown.focusedChild;this.focusedChild=null;}if(this.options.length){this.inherited(arguments);}else{_9b7.forEach(this._getChildren(),function(_9d2){_9d2.destroyRecursive();});var item=new _9bf({ownerDocument:this.ownerDocument,label:this.emptyLabel});this.dropDown.addChild(item);}}else{this._updateSelection();}this._isLoaded=false;this._childrenLoaded=true;if(!this._loadingStore){this._setValueAttr(this.value,false);}},_refreshState:function(){if(this._started){this.validate(this.focused);}},startup:function(){this.inherited(arguments);this._refreshState();},_setValueAttr:function(_9d3){this.inherited(arguments);_9b9.set(this.valueNode,"value",this.get("value"));this._refreshState();},_setNameAttr:"valueNode",_setDisabledAttr:function(_9d4){this.inherited(arguments);this._refreshState();},_setRequiredAttr:function(_9d5){this._set("required",_9d5);this.focusNode.setAttribute("aria-required",_9d5);this._refreshState();},_setOptionsAttr:function(_9d6){this._isLoaded=false;this._set("options",_9d6);},_setDisplay:function(_9d7){var lbl=_9d7||this.emptyLabel;this.containerNode.innerHTML="<span role=\"option\" class=\"dijitReset dijitInline "+this.baseClass.replace(/\s+|$/g,"Label ")+"\">"+lbl+"</span>";},validate:function(_9d8){var _9d9=this.disabled||this.isValid(_9d8);this._set("state",_9d9?"":(this._hasBeenBlurred?"Error":"Incomplete"));this.focusNode.setAttribute("aria-invalid",_9d9?"false":"true");var _9da=_9d9?"":this._missingMsg;if(_9da&&this.focused&&this._hasBeenBlurred){_9c1.show(_9da,this.domNode,this.tooltipPosition,!this.isLeftToRight());}else{_9c1.hide(this.domNode);}this._set("message",_9da);return _9d9;},isValid:function(){return (!this.required||this.value===0||!(/^\s*$/.test(this.value||"")));},reset:function(){this.inherited(arguments);_9c1.hide(this.domNode);this._refreshState();},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=i18n.getLocalization("dijit.form","validate",this.lang).missingMessage;},postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,"selectstart",function(evt){evt.preventDefault();evt.stopPropagation();}));this.domNode.setAttribute("aria-expanded","false");if(has("ie")<9){this.defer(function(){try{var s=domStyle.getComputedStyle(this.domNode);if(s){var ff=s.fontFamily;if(ff){var _9db=this.domNode.getElementsByTagName("INPUT");if(_9db){for(var i=0;i<_9db.length;i++){_9db[i].style.fontFamily=ff;}}}}}catch(e){}});}},_setStyleAttr:function(_9dc){this.inherited(arguments);_9ba.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width);},isLoaded:function(){return this._isLoaded;},loadDropDown:function(_9dd){this._loadChildren(true);this._isLoaded=true;_9dd();},destroy:function(_9de){if(this.dropDown&&!this.dropDown._destroyed){this.dropDown.destroyRecursive(_9de);delete this.dropDown;}this.inherited(arguments);},_onFocus:function(){this.validate(true);this.inherited(arguments);},_onBlur:function(){_9c1.hide(this.domNode);this.inherited(arguments);this.validate(false);}});if(has("dojo-bidi")){_9c8=_9b8("dijit.form.Select",_9c8,{_setDisplay:function(_9df){this.inherited(arguments);this.applyTextDir(this.containerNode);}});}_9c8._Menu=_9c5;function _9e0(_9e1){return function(evt){if(!this._isLoaded){this.loadDropDown(lang.hitch(this,_9e1,evt));}else{this.inherited(_9e1,arguments);}};};_9c8.prototype._onContainerKeydown=_9e0("_onContainerKeydown");_9c8.prototype._onContainerKeypress=_9e0("_onContainerKeypress");return _9c8;});},"esriviewer/loader/base/BaseViewerPlacement":function(){define(["dojo/_base/declare","dojo/_base/window","dojo/topic","dojo/_base/lang","dojo/dom-construct","dojo/dom-class","dojo/dom"],function(_9e2,_9e3,_9e4,lang,_9e5,_9e6,dom){return _9e2([],{label:"unknown",isAbsolutePositioned:false,isWindowless:true,MAP_DIV_CLASS:"mapdiv",constructor:function(_9e7){this.mapDiv=null;if(_9e7!=null&&_9e7.mapDiv!=null){if(_9e7.mapDiv instanceof String){this.mapDiv=dom.byId(_9e7.mapDiv);}else{if(!_9e6.contains(_9e7.mapDiv,this.MAP_DIV_CLASS)){_9e6.add(_9e7.mapDiv,this.MAP_DIV_CLASS);}}this.mapDiv=_9e7.mapDiv;}if(this.mapDiv==null){this.initUI();}this.initListeners();},initUI:function(){this.mapDiv=_9e5.create("div",{className:this.MAP_DIV_CLASS});},initListeners:function(){_9e4.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAIN_TOOLBAR,lang.hitch(this,this.placeMainToolbar));_9e4.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAIN_TOOLBAR_DROP_DOWN,lang.hitch(this,this.placeMainToolbarDropdown));_9e4.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.NAVIGATION_TOOLBAR,lang.hitch(this,this.placeNavigationToolbar));_9e4.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.HEADER,lang.hitch(this,this.placeHeader));_9e4.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.VIEWER_ACCORDION,lang.hitch(this,this.placeViewerAccordion));_9e4.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.FOOTER,lang.hitch(this,this.placeFooterWidget));_9e4.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MESSAGING,lang.hitch(this,this.placeMessagingWidget));_9e4.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.THROBBER,lang.hitch(this,this.placeThrobberWidget));_9e4.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.BASEMAP_GALLERY,lang.hitch(this,this.placeBasemapGallery));_9e4.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAP_SCALE_AND_COORDINATES,lang.hitch(this,this.placeMapScaleAndCoordinates));_9e4.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.CREATE_BOOOKMARK,lang.hitch(this,this.placeCreateBookmarkWidget));_9e4.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MENU_BAR,lang.hitch(this,this.placeMenuBarWidget));_9e4.subscribe(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.USER_LOCATION,lang.hitch(this,this.placeUserLocationWidget));_9e4.subscribe(VIEWER_GLOBALS.EVENTS.MAP.GET_MAP_DIV,lang.hitch(this,this.handleGetMapDiv));},handleGetMapDiv:function(_9e8){if(_9e8!=null&&lang.isFunction(_9e8)){_9e8(this.mapDiv);}},placeMainToolbarDropdown:function(_9e9){},placeMenuBarWidget:function(_9ea){},placeCreateBookmarkWidget:function(_9eb){},placeMapScaleAndCoordinates:function(_9ec){},placeBasemapGallery:function(_9ed){},placeNavigationToolbar:function(_9ee){},placeHeader:function(_9ef){},placeViewerAccordion:function(_9f0){},placeMainToolbar:function(_9f1){},placeUserLocationWidget:function(_9f2){if(_9f2){var _9f3=this._getMapContainer();if(_9f3){_9f2.placeAt(_9f3);}}},placeFooterWidget:function(_9f4){if(_9f4){_9f4.placeAt(_9e3.body());}},placeMessagingWidget:function(_9f5){},placeThrobberWidget:function(_9f6){},_getMapContainer:function(){if(this.mapContainer==null){var _9f7;_9e4.publish(VIEWER_GLOBALS.EVENTS.MAP.GET_MAP_DIV,function(mDiv){_9f7=mDiv;});this.mapContainer=_9f7;}return this.mapContainer;}});});},"esriviewer/ui/draw/configure/geometry/BaseGeometryConfigurationWidget":function(){define(["dojo/_base/declare","dojo/_base/lang","dijit/form/HorizontalSlider","dojo/_base/Color","dijit/ColorPalette","dojo/dom-attr","dojo/dom-style","dojo/dom-construct","dojo/dom-class","../../../base/UITemplatedWidget"],function(_9f8,lang,_9f9,_9fa,_9fb,_9fc,_9fd,_9fe,_9ff,_a00){return _9f8([_a00],{defaultColor:"#ff0000",transparencySliderContainer:null,colorPickerContainer:null,defaultTransparency:75,postCreate:function(){this.inherited(arguments);if(this.transparencySliderContainer!=null){this.createTransparencySlider();}if(this.colorPickerContainer!=null){this.createColorPicker();}},createTransparencySlider:function(){this.transparencySliderLabel=_9fe.create("div");_9fd.set(this.transparencySliderLabel,"margin","8px 0 5px 0");_9fc.set(this.transparencySliderLabel,"innerHTML","Opacity - "+this.defaultTransparency+"%");_9ff.add(this.transparencySliderLabel,"configureGeometryOpacityLabel");_9fe.place(this.transparencySliderLabel,this.transparencySliderContainer);var _a01=_9fe.create("div");_9fe.place(_a01,this.transparencySliderContainer);this.transparencySlider=new _9f9({value:this.defaultTransparency,maximum:100,minimum:5,showButtons:false,pageIncrement:10,style:"width:195px"},_a01);this.transparencySlider.on("change",lang.hitch(this,this.handleTransparencyChanged));this.transparencySlider.startup();},createColorPicker:function(){var _a02=_9fe.create("div");_9fe.place(_a02,this.colorPickerContainer);this.colorPicker=new _9fb({value:this.defaultColor},_a02);this.colorPicker.on("change",lang.hitch(this,this.handleColorPickerChanged));},handleTransparencyChanged:function(_a03){_9fc.set(this.transparencySliderLabel,"innerHTML","Opacity - "+Math.ceil(_a03)+" %");this.processChange();},handleColorPickerChanged:function(_a04){this.processChange();},getTransparency:function(){if(this.transparencySlider==null){return 100;}else{return Math.ceil(this.transparencySlider.get("value"));}},getColor:function(){var _a05=_9fa.fromHex(this.colorPicker.get("value"));var _a06=this.getTransparency()/100;return new _9fa([_a05.r,_a05.g,_a05.b,_a06]);},processChange:function(){},onChange:function(_a07){},getSymbol:function(){return null;}});});},"dijit/_KeyNavMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","dijit/registry","dijit/_FocusMixin"],function(_a08,_a09,_a0a,keys,lang,on,_a0b,_a0c){return _a09("dijit._KeyNavMixin",_a0c,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments);_a0a.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var _a0d=this._keyNavCodes={};_a0d[keys.HOME]=lang.hitch(this,"focusFirstChild");_a0d[keys.END]=lang.hitch(this,"focusLastChild");_a0d[this.isLeftToRight()?keys.LEFT_ARROW:keys.RIGHT_ARROW]=lang.hitch(this,"_onLeftArrow");_a0d[this.isLeftToRight()?keys.RIGHT_ARROW:keys.LEFT_ARROW]=lang.hitch(this,"_onRightArrow");_a0d[keys.UP_ARROW]=lang.hitch(this,"_onUpArrow");_a0d[keys.DOWN_ARROW]=lang.hitch(this,"_onDownArrow");}var self=this,_a0e=typeof this.childSelector=="string"?this.childSelector:lang.hitch(this,"childSelector");this.own(on(this.domNode,"keypress",lang.hitch(this,"_onContainerKeypress")),on(this.domNode,"keydown",lang.hitch(this,"_onContainerKeydown")),on(this.domNode,"focus",lang.hitch(this,"_onContainerFocus")),on(this.containerNode,on.selector(_a0e,"focusin"),function(evt){self._onChildFocus(_a0b.getEnclosingWidget(this),evt);}));},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild();},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1);},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1);},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild());},focusLastChild:function(){this.focusChild(this._getLastFocusableChild());},focusChild:function(_a0f,last){if(!_a0f){return;}if(this.focusedChild&&_a0f!==this.focusedChild){this._onChildBlur(this.focusedChild);}_a0f.set("tabIndex",this.tabIndex);_a0f.focus(last?"end":"start");},_onContainerFocus:function(evt){if(evt.target!==this.domNode||this.focusedChild){return;}this.focus();},_onFocus:function(){_a0a.set(this.domNode,"tabIndex","-1");this.inherited(arguments);},_onBlur:function(evt){_a0a.set(this.domNode,"tabIndex",this.tabIndex);if(this.focusedChild){this.focusedChild.set("tabIndex","-1");this.lastFocusedChild=this.focusedChild;this._set("focusedChild",null);}this.inherited(arguments);},_onChildFocus:function(_a10){if(_a10&&_a10!=this.focusedChild){if(this.focusedChild&&!this.focusedChild._destroyed){this.focusedChild.set("tabIndex","-1");}_a10.set("tabIndex",this.tabIndex);this.lastFocused=_a10;this._set("focusedChild",_a10);}},_searchString:"",multiCharSearchDuration:1000,onKeyboardSearch:function(item,evt,_a11,_a12){if(item){this.focusChild(item);}},_keyboardSearchCompare:function(item,_a13){var _a14=item.domNode,text=item.label||(_a14.focusNode?_a14.focusNode.label:"")||_a14.innerText||_a14.textContent||"",_a15=text.replace(/^\s+/,"").substr(0,_a13.length).toLowerCase();return (!!_a13.length&&_a15==_a13)?-1:0;},_onContainerKeydown:function(evt){var func=this._keyNavCodes[evt.keyCode];if(func){func(evt,this.focusedChild);evt.stopPropagation();evt.preventDefault();this._searchString="";}else{if(evt.keyCode==keys.SPACE&&this._searchTimer&&!(evt.ctrlKey||evt.altKey||evt.metaKey)){evt.stopImmediatePropagation();evt.preventDefault();this._keyboardSearch(evt," ");}}},_onContainerKeypress:function(evt){if(evt.charCode<keys.SPACE||evt.ctrlKey||evt.altKey||evt.metaKey||(evt.charCode==keys.SPACE&&this._searchTimer)){return;}evt.preventDefault();evt.stopPropagation();this._keyboardSearch(evt,String.fromCharCode(evt.charCode).toLowerCase());},_keyboardSearch:function(evt,_a16){var _a17=null,_a18,_a19=0,_a1a=lang.hitch(this,function(){if(this._searchTimer){this._searchTimer.remove();}this._searchString+=_a16;var _a1b=/^(.)\1*$/.test(this._searchString);var _a1c=_a1b?1:this._searchString.length;_a18=this._searchString.substr(0,_a1c);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString="";},this.multiCharSearchDuration);var _a1d=this.focusedChild||null;if(_a1c==1||!_a1d){_a1d=this._getNextFocusableChild(_a1d,1);if(!_a1d){return;}}var stop=_a1d;do{var rc=this._keyboardSearchCompare(_a1d,_a18);if(!!rc&&_a19++==0){_a17=_a1d;}if(rc==-1){_a19=-1;break;}_a1d=this._getNextFocusableChild(_a1d,1);}while(_a1d!=stop);});_a1a();this.onKeyboardSearch(_a17,evt,_a18,_a19);},_onChildBlur:function(){},_getNextFocusableChild:function(_a1e,dir){var _a1f=_a1e;do{if(!_a1e){_a1e=this[dir>0?"_getFirst":"_getLast"]();if(!_a1e){break;}}else{_a1e=this._getNext(_a1e,dir);}if(_a1e!=null&&_a1e!=_a1f&&_a1e.isFocusable()){return _a1e;}}while(_a1e!=_a1f);return null;},_getFirst:function(){return null;},_getLast:function(){return null;},_getNext:function(_a20,dir){if(_a20){_a20=_a20.domNode;while(_a20){_a20=_a20[dir<0?"previousSibling":"nextSibling"];if(_a20&&"getAttribute" in _a20){var w=_a0b.byNode(_a20);if(w){return w;}}}}return null;}});});},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../when"],function(_a21,lang,when){var _a22=function(_a23){if(!_a23){return _a23;}if(_a23.then){_a23=lang.delegate(_a23);}function _a24(_a25){if(!_a23[_a25]){_a23[_a25]=function(){var args=arguments;return when(_a23,function(_a26){Array.prototype.unshift.call(args,_a26);return _a22(_a21[_a25].apply(_a21,args));});};}};_a24("forEach");_a24("filter");_a24("map");if(!_a23.total){_a23.total=when(_a23,function(_a27){return _a27.length;});}return _a23;};lang.setObject("dojo.store.util.QueryResults",_a22);return _a22;});},"xstyle/util/createStyleSheet":function(){define([],function(){function has(){return !document.createStyleSheet;};var head=document.head;return function insertCss(css){if(has("dom-create-style-element")){_a28=document.createElement("style");_a28.setAttribute("type","text/css");_a28.appendChild(document.createTextNode(css));head.insertBefore(_a28,head.firstChild);return _a28;}else{var _a28=document.createStyleSheet();_a28.cssText=css;return _a28.owningElement;}};});},"dijit/CheckedMenuItem":function(){define(["dojo/_base/declare","dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(_a29,_a2a,_a2b,_a2c){return _a29("dijit.CheckedMenuItem",_a2b,{baseClass:"dijitCheckedMenuItem",templateString:_a2c,checked:false,_setCheckedAttr:function(_a2d){_a2a.toggle(this.domNode,this.baseClass+"Checked",_a2d);this.domNode.setAttribute("aria-checked",_a2d?"true":"false");this._set("checked",_a2d);},iconClass:"",role:"menuitemcheckbox",checkedChar:"&#10003;",onChange:function(){},_onClick:function(evt){if(!this.disabled){this.set("checked",!this.checked);this.onChange(this.checked);}this.onClick(evt);}});});},"esriviewer/ui/draw/model/DrawWidgetViewModel":function(){define(["dojo/_base/declare"],function(_a2e){return _a2e([],{drawModes:{"point":"point","line":"line","polyline":"polyline","polygon":"polygon","rectangle":"rectangle","text":"text"},constructor:function(){var self=this;this.showUserPersistedGraphicsIcon=ko.observable(true);this.showDrawWindowActions=ko.observable(true);this.showDrawPolylineIcon=ko.observable(true);this.showDrawTextIcon=ko.observable(true);this.showDrawPointIcon=ko.observable(true);this.showDrawLineIcon=ko.observable(true);this.showDrawPolygonIcon=ko.observable(true);this.showDrawRectangleIcon=ko.observable(true);this.forceHideGraphicsListTab=ko.observable(false);this.polylineActive=ko.observable(false);this.pointActive=ko.observable(false);this.lineActive=ko.observable(false);this.rectangleActive=ko.observable(false);this.polygonActive=ko.observable(false);this.textActive=ko.observable(false);this.graphicsListTabVisible=ko.observable(false);this.freehandContainerVisible=ko.observable(false);this.userPersistedGraphicsVisible=ko.observable(false);this.graphicsListVisible=ko.observable(false);this.configurationVisible=ko.observable(false);this.drawVisible=ko.observable(true);var _a2f=function(){return (!self.forceHideGraphicsListTab())&&self.graphicsListTabVisible();};this.showGraphicsListTab=ko.computed(_a2f);this.showSavedGraphicsTab=ko.observable(false);},showUserPersistedGraphics:function(){this.graphicsListVisible(false);this.configurationVisible(false);this.drawVisible(false);this.userPersistedGraphicsVisible(true);this.freehandContainerVisible(false);},showGraphicsList:function(){this.graphicsListVisible(true);this.configurationVisible(false);this.drawVisible(false);this.userPersistedGraphicsVisible(false);this.freehandContainerVisible(false);},showConfiguration:function(){this.graphicsListVisible(false);this.configurationVisible(true);this.userPersistedGraphicsVisible(false);this.drawVisible(false);this.freehandContainerVisible(false);},showDraw:function(){this.graphicsListVisible(false);this.userPersistedGraphicsVisible(false);this.configurationVisible(false);this.drawVisible(true);this.freehandContainerVisible(this.polygonActive()||this.lineActive());},setDrawMode:function(mode){this.pointActive(false);this.lineActive(false);this.polylineActive(false);this.rectangleActive(false);this.polygonActive(false);this.textActive(false);this.freehandContainerVisible(false);if(mode!=null){if(mode===this.drawModes.point){this.pointActive(true);}else{if(mode===this.drawModes.line){this.lineActive(true);if(this.drawVisible()){this.freehandContainerVisible(false);}}else{if(mode===this.drawModes.polyline){this.polylineActive(true);if(this.drawVisible()){this.freehandContainerVisible(true);}}else{if(mode===this.drawModes.rectangle){this.rectangleActive(true);}else{if(mode===this.drawModes.polygon){this.polygonActive(true);if(this.drawVisible()){this.freehandContainerVisible(true);}}else{if(mode===this.drawModes.text){this.textActive(true);}}}}}}}},getCurrentDrawType:function(){if(this.polygonActive()){return this.drawModes.polygon;}else{if(this.lineActive()){return this.drawModes.line;}else{if(this.rectangleActive()){return this.drawModes.rectangle;}else{if(this.pointActive()){return this.drawModes.point;}else{if(this.polylineActive()){return this.drawModes.polyline;}else{if(this.textActive()){return this.drawModes.text;}else{return null;}}}}}}}});});},"esriviewer/ui/logging/LoggingWidgetWindow":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","../window/WindowWidget","./LoggingWidget"],function(_a30,_a31,lang,_a32,_a33){return _a30([_a32],{defaultPositioning:{x:10,y:240},windowWidth:"500px",windowHeaderText:"Logging",windowIconAltText:"Logging",windowIconClass:"commonIcons16 list",positioningParamName:"logging",postCreate:function(){this.inherited(arguments);this.loggingWidget=new _a33();this.setContent(this.loggingWidget.domNode);},initListeners:function(){this.inherited(arguments);this.subscribes.push(_a31.subscribe(VIEWER_GLOBALS.EVENTS.LOGGING.WINDOW.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_a31.subscribe(VIEWER_GLOBALS.EVENTS.LOGGING.WINDOW.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_a31.subscribe(VIEWER_GLOBALS.EVENTS.LOGGING.WINDOW.TOGGLE,lang.hitch(this,this.toggle)));},hidePopups:function(){this.inherited(arguments);if(this.loggingWidget){this.loggingWidget.hidePopups();}}});});},"esriviewer/ui/portal/PortalPublisherWindowWidget":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/dom-class","../window/WindowWidget"],function(_a34,lang,_a35,_a36,_a37){return _a34([_a37],{defaultPositioning:{x:400,y:125},windowWidth:"375px",windowHeaderText:"Publish to Portal",windowIconAltText:"Publish to Portal",windowIconClass:"commonIcons16 worldAdd",positioningParamName:"portalPublisher",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_a36.add(this.windowContent,"portalPublisherWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/portal/PortalPublisherWidget"],lang.hitch(this,function(_a38){this.portalPublisherWidget=new _a38();this.setContent(this.portalPublisherWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_a35.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PORTAL_PUBLISH.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_a35.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PORTAL_PUBLISH.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_a35.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.PORTAL_PUBLISH.TOGGLE,lang.hitch(this,this.toggle)));}});});},"esriviewer/ui/legend/MapLegendWindow":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","../window/WindowWidget"],function(_a39,_a3a,lang,_a3b){return _a39([_a3b],{defaultPositioning:{x:62,y:150},windowWidth:"300px",windowHeight:"400px",windowHeaderText:"Map Legend",windowIconAltText:"Map Legend",windowIconClass:"commonIcons16 list",positioningParamName:"legend",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/legend/MapLegendWidget"],lang.hitch(this,function(_a3c){this.mapLegendWidget=new _a3c();this.setContent(this.mapLegendWidget.domNode);this.mapLegendWidget.startup();}));},initListeners:function(){this.inherited(arguments);_a3a.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.LEGEND.SHOW,lang.hitch(this,this.show));_a3a.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.LEGEND.HIDE,lang.hitch(this,this.hide));}});});},"dijit/MenuSeparator":function(){define(["dojo/_base/declare","dojo/dom","./_WidgetBase","./_TemplatedMixin","./_Contained","dojo/text!./templates/MenuSeparator.html"],function(_a3d,dom,_a3e,_a3f,_a40,_a41){return _a3d("dijit.MenuSeparator",[_a3e,_a3f,_a40],{templateString:_a41,buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});});},"esriviewer/ui/draw/configure/geometry/model/ConfigureTextViewModel":function(){define(["dojo/_base/declare","esri/symbols/TextSymbol","esri/symbols/Font"],function(_a42,_a43,Font){return _a42([],{textAligns:ko.observableArray([{value:_a43.ALIGN_START,label:"Start"},{value:_a43.ALIGN_MIDDLE,label:"Middle"},{value:_a43.ALIGN_END,label:"End"}]),textWeights:ko.observableArray([{value:Font.WEIGHT_NORMAL,label:"Normal"},{value:Font.WEIGHT_LIGHTER,label:"Lighter"},{value:Font.WEIGHT_BOLD,label:"Bold"},{value:Font.WEIGHT_BOLDER,label:"Bolder"}]),fontFaces:ko.observableArray([{value:Font.STYLE_NORMAL,label:"Normal"},{value:Font.STYLE_ITALIC,label:"Italic"},{value:Font.STYLE_OBLIQUE,label:"Oblique"}]),textSizes:ko.observableArray([{value:"8pt",label:"8"},{value:"9pt",label:"9"},{value:"10pt",label:"10"},{value:"11pt",label:"11"},{value:"12pt",label:"12"},{value:"13pt",label:"13"},{value:"14pt",label:"14"},{value:"15pt",label:"15"},{value:"20pt",label:"20"},{value:"25pt",label:"25"},{value:"30pt",label:"30"},{value:"50pt",label:"50"},{value:"75pt",label:"75"}]),angles:ko.observableArray([0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85]),constructor:function(){this.selectedTextSize=ko.observable("15pt");this.selectedTextAlign=ko.observable(_a43.ALIGN_END);this.selectedTextWeight=ko.observable(Font.WEIGHT_NORMAL);this.selectedFontFace=ko.observable(Font.STYLE_NORMAL);this.selectedAngle=ko.observable(0);}});});},"esriviewer/map/base/DistinctQuery":function(){define(["dojo/_base/declare","esri/tasks/query"],function(_a44,_a45){return _a44([_a45],{toJson:function(){var json=this.inherited(arguments);json.returnDistinctValues=true;return json;}});});},"esriviewer/base/DataLoaderSupport":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/xhr","esri/config","esri/request"],function(_a46,lang,xhr,_a47,_a48){return _a46([],{loadJson:function(url,_a49,_a4a){if(url==null||url==""||_a49==null||!lang.isFunction(_a49)){return;}var _a4b={url:url,handleAs:"json",load:_a49};if(_a4a!=null&&lang.isFunction(_a4a)){_a4b.error=_a4a;}xhr.get(_a4b);},loadProxiedJson:function(url,_a4c,_a4d){if(_a47==null||_a47.defaults==null||_a47.defaults.io==null||_a47.defaults.io.proxyUrl==null){alert("You Must Configure a proxy for this request: "+url);return;}this.loadJson(_a47.defaults.io.proxyUrl+"?"+url,_a4c,_a4d);},loadJsonP:function(url,_a4e,_a4f,_a50,_a51){if(_a50==null){_a50=lang.hitch(this,function(_a52){var msg="Could not resource : "+url+". Please verify URL is accessible.";});}if(_a51==null){_a51="callback";}var _a53={callbackParamName:_a51,content:_a4e,url:url};_a48(_a53).then(_a4f,_a50);},loadText:function(url,_a54,_a55){if(url==null||url==""||!lang.isFunction(_a54)){return;}var _a56={url:url,handleAs:"text",load:_a54};if(_a55!=null&&lang.isFunction(_a55)){_a56.error=_a55;}xhr.get(_a56);}});});},"esriviewer/ui/draw/DrawWindow":function(){define(["dojo/_base/declare","dojo/topic","dojo/_base/lang","dojo/dom-class","../window/WindowWidget","./DrawWidget"],function(_a57,_a58,lang,_a59,_a5a,_a5b){return _a57([_a5a],{defaultPositioning:{x:500,y:50},windowWidth:"335px",windowHeaderText:"Draw",windowIconAltText:"Draw",positioningParamName:"draw",windowIconClass:"commonIcons16 pencil",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_a59.add(this.windowContent,"drawWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();this.drawWidget=new _a5b();this.setContent(this.drawWidget.domNode);},initListeners:function(){this.inherited(arguments);this.subscribes.push(_a58.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.DRAW.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_a58.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.DRAW.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_a58.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.DRAW.TOGGLE,lang.hitch(this,this.toggle)));},hide:function(){this.inherited(arguments);if(this.drawWidget){if(this.drawWidget.currentDrawType!=null){this.drawWidget.clearDraw();}}},hidePopups:function(){this.inherited(arguments);if(this.drawWidget){this.drawWidget.hidePopups();}}});});},"esriviewer/ui/query/QueryBuilderWindowWidget":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/dom-class","../window/WindowWidget","dojox/html/metrics"],function(_a5c,lang,_a5d,_a5e,_a5f,_a60){return _a5c([_a5f],{defaultPositioning:{x:400,y:125},pendingQueryLayerCallback:null,minWidth:400,resizable:true,resizeAxis:"xy",windowHeight:"38em",windowHeaderText:"Query Builder",windowIconAltText:"Query Builder",windowIconClass:"commonIcons16 sql",positioningParamName:"queryBuilder",constructor:function(){var _a61=_a60.getFontMeasurements();this.minHeight=38*_a61["1em"];this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_a5e.add(this.windowContent,"queryBuilderWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/query/QueryBuilderWidget"],lang.hitch(this,function(_a62){this.queryBuilderWidget=new _a62();this.setContent(this.queryBuilderWidget.domNode);if(this.pendingQueryLayerCallback!=null&&lang.isFunction(this.pendingQueryLayerCallback)){this.pendingQueryLayerCallback();}}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_a5d.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.QUERY_BUILDER.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_a5d.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.QUERY_BUILDER.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_a5d.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.QUERY_BUILDER.TOGGLE,lang.hitch(this,this.toggle)));_a5d.subscribe(VIEWER_GLOBALS.EVENTS.QUERY_BUILDER.SET_IMAGE_SERVICE_LAYER,lang.hitch(this,this.setImageServiceLayer));_a5d.subscribe(VIEWER_GLOBALS.EVENTS.QUERY_BUILDER.SET_MAP_SERVICE_LAYER,lang.hitch(this,this.setMapServiceLayer));_a5d.subscribe(VIEWER_GLOBALS.EVENTS.QUERY_BUILDER.SET_FEATURE_SERVICE_LAYER,lang.hitch(this,this.setFeatureServiceLayer));},hide:function(){this.inherited(arguments);if(this.queryBuilderWidget){this.queryBuilderWidget.clearGraphics();}},setImageServiceLayer:function(_a63){if(this.queryBuilderWidget==null){this.pendingQueryLayerCallback=lang.hitch(this,function(_a64){this.queryBuilderWidget.setImageServiceLayer(_a64);this.pendingQueryLayerCallback=null;},_a63);}else{this.queryBuilderWidget.setImageServiceLayer(_a63);}this.show();},setMapServiceLayer:function(_a65,_a66){if(this.queryBuilderWidget==null){this.pendingQueryLayerCallback=lang.hitch(this,function(_a67,_a68){this.queryBuilderWidget.setMapServiceLayer(_a67,_a68);this.pendingQueryLayerCallback=null;},_a65,_a66);}else{this.queryBuilderWidget.setMapServiceLayer(_a65,_a66);}this.show();},setFeatureServiceLayer:function(_a69){if(this.queryBuilderWidget==null){this.pendingQueryLayerCallback=lang.hitch(this,function(_a6a){this.queryBuilderWidget.setFeatureServiceLayer(_a6a);this.pendingQueryLayerCallback=null;},_a69);}else{this.queryBuilderWidget.setFeatureServiceLayer(_a69);}this.show();}});});},"dojo/require":function(){define(["./_base/loader"],function(_a6b){return {dynamic:0,normalize:function(id){return id;},load:_a6b.require};});},"xstyle/css":function(){define(["require"],function(_a6c){"use strict";function _a6d(tag,id,_a6e){var _a6f=document.documentElement;var _a70=_a6f.insertBefore(document.createElement(tag),_a6f.firstChild);_a70.id=id;var _a71=(_a70.currentStyle||getComputedStyle(_a70,null))[_a6e];_a6f.removeChild(_a70);return _a71;};return {load:function(_a72,_a73,_a74,_a75){var url=_a73.toUrl(_a72);var _a76=_a73.cache["url:"+url];if(_a76){if(_a76.xCss){var _a77=_a76.parser;var xCss=_a76.xCss;_a76=_a76.cssText;}_a6c(["./util/createStyleSheet"],function(_a78){_a78(_a76);});if(xCss){}return _a79();}function _a79(){var _a7a=_a6d("x-parse",null,"content");if(_a7a&&_a7a!="none"){_a73([eval(_a7a)],_a74);}else{_a74();}};var _a7b=_a6d("div",_a72.replace(/\//g,"-").replace(/\..*/,"")+"-loaded","display");if(_a7b=="none"){return _a79();}_a6c(["./load-css"],function(load){load(url,_a79);});}};});},"esriviewer/ui/draw/configure/geometry/model/ConfigurePolygonViewModel":function(){define(["dojo/_base/declare","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol"],function(_a7c,_a7d,_a7e){return _a7c([],{fillStyles:ko.observableArray([{value:_a7e.STYLE_BACKWARD_DIAGONAL,label:"Backward Diagonal"},{value:_a7e.STYLE_CROSS,label:"Cross"},{value:_a7e.STYLE_DIAGONAL_CROSS,label:"Diagonal Cross"},{value:_a7e.STYLE_FORWARD_DIAGONAL,label:"Forward Diagonal"},{value:_a7e.STYLE_HORIZONTAL,label:"Horizontal Lines"},{value:_a7e.STYLE_SOLID,label:"Solid"},{value:_a7e.STYLE_VERTICAL,label:"Vertical Lines"},{value:_a7e.STYLE_NULL,label:"None"}]),outlineStyles:ko.observableArray([{value:_a7d.STYLE_DASH,label:"Dashed Line"},{value:_a7d.STYLE_DASHDOT,label:"Dash Dot Line"},{value:_a7d.STYLE_DASHDOTDOT,label:"Dash Dot Dot Line"},{value:_a7d.STYLE_DOT,label:"Dotted Line"},{value:_a7d.STYLE_SOLID,label:"Solid Line"},{value:_a7d.STYLE_NULL,label:"None"}]),outlineWidths:ko.observableArray([1,2,3,4,5,6,7,8,9,10,15,20,25,30,40,50]),angles:ko.observableArray([0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85]),constructor:function(){this.selectedFillStyle=ko.observable(_a7e.STYLE_SOLID);this.selectedOutlineStyle=ko.observable(_a7d.STYLE_SOLID);this.selectedAngle=ko.observable(0);this.selectedOutlineWidth=ko.observable(1);this.outlineColorActive=ko.observable(true);this.fillColorActive=ko.observable(false);},setOutlineColorMode:function(){this.outlineColorActive(true);this.fillColorActive(false);},setFillColorMode:function(){this.outlineColorActive(false);this.fillColorActive(true);}});});},"dojox/storage/CookieStorageProvider":function(){define(["dijit","dojo","dojox","dojo/require!dojox/storage/Provider,dojox/storage/manager,dojo/cookie"],function(_a7f,dojo,_a80){dojo.provide("dojox.storage.CookieStorageProvider");dojo.require("dojox.storage.Provider");dojo.require("dojox.storage.manager");dojo.require("dojo.cookie");dojo.declare("dojox.storage.CookieStorageProvider",[_a80.storage.Provider],{store:null,cookieName:"dojoxStorageCookie",storageLife:730,initialize:function(){this.store=dojo.fromJson(dojo.cookie(this.cookieName))||{};this.initialized=true;_a80.storage.manager.loaded();},isAvailable:function(){return dojo.cookie.isSupported();},put:function(key,_a81,_a82,_a83){this._assertIsValidKey(key);_a83=_a83||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_a83);fullKey=this.getFullKey(key,_a83);this.store[fullKey]=dojo.toJson(_a81);this._save();var _a84=dojo.toJson(this.store)===dojo.cookie(this.cookieName);if(!_a84){this.remove(key,_a83);}if(_a82){_a82(_a84?this.SUCCESS:this.FAILED,key,null,_a83);}},get:function(key,_a85){this._assertIsValidKey(key);_a85=_a85||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_a85);key=this.getFullKey(key,_a85);return this.store[key]?dojo.fromJson(this.store[key]):null;},getKeys:function(_a86){_a86=_a86||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_a86);_a86="__"+_a86+"_";var keys=[];for(var _a87 in this.store){if(this._beginsWith(_a87,_a86)){_a87=_a87.substring(_a86.length);keys.push(_a87);}}return keys;},clear:function(_a88){_a88=_a88||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_a88);_a88="__"+_a88+"_";for(var _a89 in this.store){if(this._beginsWith(_a89,_a88)){delete (this.store[_a89]);}}this._save();},remove:function(key,_a8a){_a8a=_a8a||this.DEFAULT_NAMESPACE;this._assertIsValidNamespace(_a8a);this._assertIsValidKey(key);key=this.getFullKey(key,_a8a);delete this.store[key];this._save();},getNamespaces:function(){var _a8b=[this.DEFAULT_NAMESPACE];var _a8c={};_a8c[this.DEFAULT_NAMESPACE]=true;var _a8d=/^__([^_]*)_/;for(var _a8e in this.store){if(_a8d.test(_a8e)==true){var _a8f=_a8e.match(_a8d)[1];if(typeof _a8c[_a8f]=="undefined"){_a8c[_a8f]=true;_a8b.push(_a8f);}}}return _a8b;},isPermanent:function(){return true;},getMaximumSize:function(){return 4;},hasSettingsUI:function(){return false;},isValidKey:function(_a90){if(_a90===null||_a90===undefined){return false;}return /^[0-9A-Za-z_-]*$/.test(_a90);},isValidNamespace:function(_a91){if(_a91===null||_a91===undefined){return false;}return /^[0-9A-Za-z-]*$/.test(_a91);},getFullKey:function(key,_a92){return "__"+_a92+"_"+key;},_save:function(){dojo.cookie(this.cookieName,dojo.toJson(this.store),{expires:this.storageLife});},_beginsWith:function(_a93,_a94){if(_a94.length>_a93.length){return false;}return _a93.substring(0,_a94.length)===_a94;},_assertIsValidNamespace:function(_a95){if(this.isValidNamespace(_a95)===false){throw new Error("Invalid namespace given: "+_a95);}},_assertIsValidKey:function(key){if(this.isValidKey(key)===false){throw new Error("Invalid key given: "+key);}}});_a80.storage.manager.register("dojox.storage.CookieStorageProvider",new _a80.storage.CookieStorageProvider());});},"esriviewer/ui/accordion/ToolsAccordion":function(){define(["dojo/_base/declare","dojo/text!./template/ToolsAccordionTemplate.html","dojo/topic","dojo/_base/lang","dojo/on","dijit/layout/AccordionContainer","dojo/dom-style","dojo/dom-class","dojo/dom-attr","dojo/dom-construct","dojo/dnd/Moveable","../base/UITemplatedWidget","dojo/_base/connect"],function(_a96,_a97,_a98,lang,on,_a99,_a9a,_a9b,_a9c,_a9d,_a9e,_a9f,con){return _a96([_a9f],{templateString:_a97,isPositionedByConfig:true,positionForHeader:false,headerVisiblePositioning:{x:75,y:145},defaultPositioning:{x:75,y:100},allowCollapse:true,movable:false,isFirstAddedItem:true,showOnLoad:true,positioningParamName:"accordion",returnToOriginOnShow:true,constructor:function(){this.accordion=new _a99();_a9b.add(this.accordion.domNode,"toolsAccordion");this.visible=true;},postCreate:function(){this.inherited(arguments);if(this.allowCollapse){this.addMinimizeIcon();}_a9d.place(this.accordion.domNode,this.domNode);_a98.publish(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.LOAD_DEFAULT_TOOLS);if(!this.showOnLoad){this.hide();}if(this.positionForHeader){this.creationPositioning.x=this.headerVisiblePositioning.x;this.creationPositioning.y=this.headerVisiblePositioning.y;}this.returnToOrigin();},loadViewerConfigurationData:function(){var _aa0=null;_a98.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"toolsAccordion",function(_aa1){_aa0=_aa1;});if(_aa0&&_aa0.showOnLoad!=null){this.showOnLoad=_aa0.showOnLoad;}var _aa2;_a98.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"header",function(_aa3){_aa2=_aa3;});if(_aa2!=null&&lang.isObject(_aa2)){this.positionForHeader=_aa2.display===true&&_aa2.small!=true;}},initMover:function(){var _aa4=_a9d.create("div",{title:"Move",className:"accordionMoveIcon accordionAction move"});_a9d.place(_aa4,this.domNode);this.mover=new _a9e(this.domNode,{handle:_aa4});con.connect(this.mover,"onMove",VIEWER_UTILS,VIEWER_UTILS.handleContainerMoved);},placeAt:function(node){_a9d.place(this.domNode,node);if(this.toolsAccordionActions){_a9d.place(this.toolsAccordionActions,node);}if(this.movable){this.initMover();}},addMinimizeIcon:function(){if(this.minimizeIconElement==null){this.minimizeIconElement=_a9d.create("div",{title:"Minimize",className:"accordionMimimizeIcon accordionAction minimize"});_a9d.place(this.minimizeIconElement,this.domNode);on(this.minimizeIconElement,"click",lang.hitch(this,this.hide));if(!this.movable){_a9a.set(this.minimizeIconElement,"right","5px");}}},addItem:function(_aa5){_a9b.add(_aa5.domNode,"accordionChild");this.accordion.addChild(_aa5);if(this.isFirstAddedItem){this.isFirstAddedItem=false;this.selectedChild=_aa5;}},initListeners:function(){this.inherited(arguments);_a98.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.TOGGLE,lang.hitch(this,this.toggle));_a98.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.SHOW,lang.hitch(this,this.show));_a98.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.HIDE,lang.hitch(this,this.hide));_a98.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.ADD_ITEM,lang.hitch(this,this.addItem));_a98.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.SHOW_ITEM,lang.hitch(this,this.selectChild));},startup:function(){this.accordion.startup();},destroy:function(){if(this.imageryDisplayWidget){this.imageryDisplayWidget.destroy();}if(this.imageryQueryFilterManager){this.imageryQueryFilterManager.destroy();}},toggle:function(){if(this.visible){this.hide();}else{this.show();}},show:function(){_a9a.set(this.domNode,"display","block");this.visible=true;if(this.toolsAccordionActions){_a9c.set(this.toolsAccordionActions,"title","Collapse Tools");if(!_a9b.contains(this.toolsAccordionActions,"toolsAccordionCollapserExpanded")){_a9b.add(this.toolsAccordionActions,"toolsAccordionCollapserExpanded");}_a9b.remove(this.toolsAccordionActions,"toolsAccordionCollapserCollapsed");}if(this.returnToOriginOnShow){this.returnToOrigin();}},returnToOrigin:function(){_a9a.set(this.domNode,this.creationPositioning.alignX,this.creationPositioning.x+"px");_a9a.set(this.domNode,this.creationPositioning.alignY,this.creationPositioning.y+"px");},hide:function(){_a9a.set(this.domNode,"display","none");this.visible=false;if(this.toolsAccordionActions){_a9c.set(this.toolsAccordionActions,"title","Show Tools");if(!_a9b.contains(this.toolsAccordionActions,"toolsAccordionCollapserCollapsed")){_a9b.add(this.toolsAccordionActions,"toolsAccordionCollapserCollapsed");}_a9b.remove(this.toolsAccordionActions,"toolsAccordionCollapserExpanded");}_a98.publish(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.HIDE_COMPLETE);},toggleVisibility:function(){if(this.visible){this.hide();}else{this.show();}},selectChild:function(_aa6){this.accordion.selectChild(_aa6);this.selectedChild=_aa6;}});});},"esriviewer/ui/draw/base/GraphicsLocalStorageMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","dojo/topic"],function(_aa7,lang,has,_aa8){return _aa7([],{localStoragePersistSupported:true,constructor:function(){if(!(has("ie")<8)){this.localStoragePersistSupported=false;}this.storageProvider=dojox.storage.manager.getProvider();if(this.storageProvider){this.localStoragePersistSupported=true;}this.persistedUserGraphics=this.loadPersistedUserGraphics();},deleteAllPersistedGraphics:function(){if(this.storageProvider){this.storageProvider.remove(VIEWER_GLOBALS.STORAGE.LABELS.USER_GRAPHICS);}},deleteUserPersistedGraphics:function(_aa9){if(this.persistUserGraphicsLabelExists(_aa9)){delete this.persistedUserGraphics[_aa9];this.persist();}var _aaa=false;for(var key in this.persistedUserGraphics){_aaa=true;break;}return _aaa;},persistUserGraphicsLabelExists:function(_aab){return this.persistedUserGraphics[_aab]!=null;},persistUserGraphics:function(_aac,_aad){if(_aac==null||_aac==""||_aad==null||!lang.isArray(_aad)||_aad.length==0){return null;}if(this.persistUserGraphicsLabelExists(_aac)){VIEWER_UTILS.log("Attempted to save graphics with an existing label: "+_aac,VIEWER_GLOBALS.LOG_TYPE.ERROR);_aa8.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Cannot save graphics. Label already exists.");return null;}else{var _aae=[];for(var i=0;i<_aad.length;i++){_aae.push({label:_aad[i].label,graphic:_aad[i].graphic.toJson()});}var _aaf={label:_aac,graphics:_aae};this.persistedUserGraphics[_aac]=_aaf;this.persist();VIEWER_UTILS.log("Saved graphics with label: "+_aac,VIEWER_GLOBALS.LOG_TYPE.INFO);_aa8.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Graphics Saved");return _aaf;}},loadPersistedUserGraphics:function(){if(this.storageProvider){if(this.storageProvider.hasKey(VIEWER_GLOBALS.STORAGE.LABELS.USER_GRAPHICS)){return this.storageProvider.get(VIEWER_GLOBALS.STORAGE.LABELS.USER_GRAPHICS);}}return {};},persist:function(){this.storageProvider.put(VIEWER_GLOBALS.STORAGE.LABELS.USER_GRAPHICS,this.persistedUserGraphics);}});});},"esriviewer/ui/navigation/NavigationWidget":function(){define(["dojo/_base/declare","dojo/text!./template/NavigationWidgetTemplate.html","dojo/topic","dojo/dom-class","../base/UITemplatedWidget","dojo/_base/lang","./model/NavigationWidgetViewModel"],function(_ab0,_ab1,_ab2,_ab3,_ab4,lang,_ab5){return _ab0([_ab4],{defaultPositioning:{y:5,x:0},positionWithSmallHeader:false,isPositionedByConfig:true,positioningParamName:"navigation",templateString:_ab1,constructor:function(_ab6){lang.mixin(this,_ab6||{});this.visible=true;},postCreate:function(){this.viewModel=new _ab5();this.inherited(arguments);ko.applyBindings(this.viewModel,this.domNode);if(this.positionWithSmallHeader){_ab3.add(this.navigationToolbar,"navigationWithSmallHeaderPositioning");}this.show();},loadViewerConfigurationData:function(){var _ab7;_ab2.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"header",function(_ab8){_ab7=_ab8;});if(_ab7!=null&&lang.isObject(_ab7)){this.positionWithSmallHeader=_ab7.display===true&&_ab7.small===true;}},handleToggle:function(){this.viewModel.visible(!this.viewModel.visible());},show:function(){this.viewModel.visible(true);},hide:function(){this.viewModel.visible(false);}});});},"dojox/storage/FlashStorageProvider":function(){define(["dijit","dojo","dojox","dojo/require!dojox/flash,dojox/storage/manager,dojox/storage/Provider"],function(_ab9,dojo,_aba){dojo.provide("dojox.storage.FlashStorageProvider");dojo.require("dojox.flash");dojo.require("dojox.storage.manager");dojo.require("dojox.storage.Provider");dojo.declare("dojox.storage.FlashStorageProvider",_aba.storage.Provider,{initialized:false,_available:null,_statusHandler:null,_flashReady:false,_pageReady:false,initialize:function(){if(dojo.config["disableFlashStorage"]==true){return;}_aba.flash.addLoadedListener(dojo.hitch(this,function(){this._flashReady=true;if(this._flashReady&&this._pageReady){this._loaded();}}));var _abb=dojo.moduleUrl("dojox","storage/Storage.swf").toString();_aba.flash.setSwf(_abb,false);dojo.connect(dojo,"loaded",this,function(){this._pageReady=true;if(this._flashReady&&this._pageReady){this._loaded();}});},setFlushDelay:function(_abc){if(_abc===null||typeof _abc==="undefined"||isNaN(_abc)){throw new Error("Invalid argunment: "+_abc);}_aba.flash.comm.setFlushDelay(String(_abc));},getFlushDelay:function(){return Number(_aba.flash.comm.getFlushDelay());},flush:function(_abd){if(_abd==null||typeof _abd=="undefined"){_abd=_aba.storage.DEFAULT_NAMESPACE;}_aba.flash.comm.flush(_abd);},isAvailable:function(){return (this._available=!dojo.config["disableFlashStorage"]);},put:function(key,_abe,_abf,_ac0){if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}if(!_ac0){_ac0=_aba.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_ac0)){throw new Error("Invalid namespace given: "+_ac0);}this._statusHandler=_abf;if(dojo.isString(_abe)){_abe="string:"+_abe;}else{_abe=dojo.toJson(_abe);}_aba.flash.comm.put(key,_abe,_ac0);},putMultiple:function(keys,_ac1,_ac2,_ac3){if(!this.isValidKeyArray(keys)||!_ac1 instanceof Array||keys.length!=_ac1.length){throw new Error("Invalid arguments: keys = ["+keys+"], values = ["+_ac1+"]");}if(!_ac3){_ac3=_aba.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_ac3)){throw new Error("Invalid namespace given: "+_ac3);}this._statusHandler=_ac2;var _ac4=keys.join(",");var _ac5=[];for(var i=0;i<_ac1.length;i++){if(dojo.isString(_ac1[i])){_ac1[i]="string:"+_ac1[i];}else{_ac1[i]=dojo.toJson(_ac1[i]);}_ac5[i]=_ac1[i].length;}var _ac6=_ac1.join("");var _ac7=_ac5.join(",");_aba.flash.comm.putMultiple(_ac4,_ac6,_ac7,_ac3);},get:function(key,_ac8){if(!this.isValidKey(key)){throw new Error("Invalid key given: "+key);}if(!_ac8){_ac8=_aba.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_ac8)){throw new Error("Invalid namespace given: "+_ac8);}var _ac9=_aba.flash.comm.get(key,_ac8);if(_ac9==""){return null;}return this._destringify(_ac9);},getMultiple:function(keys,_aca){if(!this.isValidKeyArray(keys)){throw new ("Invalid key array given: "+keys);}if(!_aca){_aca=_aba.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_aca)){throw new Error("Invalid namespace given: "+_aca);}var _acb=keys.join(",");var _acc=_aba.flash.comm.getMultiple(_acb,_aca);var _acd=eval("("+_acc+")");for(var i=0;i<_acd.length;i++){_acd[i]=(_acd[i]=="")?null:this._destringify(_acd[i]);}return _acd;},_destringify:function(_ace){if(dojo.isString(_ace)&&(/^string:/.test(_ace))){_ace=_ace.substring("string:".length);}else{_ace=dojo.fromJson(_ace);}return _ace;},getKeys:function(_acf){if(!_acf){_acf=_aba.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_acf)){throw new Error("Invalid namespace given: "+_acf);}var _ad0=_aba.flash.comm.getKeys(_acf);if(_ad0==null||_ad0=="null"){_ad0="";}_ad0=_ad0.split(",");_ad0.sort();return _ad0;},getNamespaces:function(){var _ad1=_aba.flash.comm.getNamespaces();if(_ad1==null||_ad1=="null"){_ad1=_aba.storage.DEFAULT_NAMESPACE;}_ad1=_ad1.split(",");_ad1.sort();return _ad1;},clear:function(_ad2){if(!_ad2){_ad2=_aba.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_ad2)){throw new Error("Invalid namespace given: "+_ad2);}_aba.flash.comm.clear(_ad2);},remove:function(key,_ad3){if(!_ad3){_ad3=_aba.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_ad3)){throw new Error("Invalid namespace given: "+_ad3);}_aba.flash.comm.remove(key,_ad3);},removeMultiple:function(keys,_ad4){if(!this.isValidKeyArray(keys)){dojo.raise("Invalid key array given: "+keys);}if(!_ad4){_ad4=_aba.storage.DEFAULT_NAMESPACE;}if(!this.isValidKey(_ad4)){throw new Error("Invalid namespace given: "+_ad4);}var _ad5=keys.join(",");_aba.flash.comm.removeMultiple(_ad5,_ad4);},isPermanent:function(){return true;},getMaximumSize:function(){return _aba.storage.SIZE_NO_LIMIT;},hasSettingsUI:function(){return true;},showSettingsUI:function(){_aba.flash.comm.showSettings();_aba.flash.obj.setVisible(true);_aba.flash.obj.center();},hideSettingsUI:function(){_aba.flash.obj.setVisible(false);if(dojo.isFunction(_aba.storage.onHideSettingsUI)){_aba.storage.onHideSettingsUI.call(null);}},getResourceList:function(){return [];},_loaded:function(){this._allNamespaces=this.getNamespaces();this.initialized=true;_aba.storage.manager.loaded();},_onStatus:function(_ad6,key,_ad7){var ds=_aba.storage;var dfo=_aba.flash.obj;if(_ad6==ds.PENDING){dfo.center();dfo.setVisible(true);}else{dfo.setVisible(false);}if(ds._statusHandler){ds._statusHandler.call(null,_ad6,key,null,_ad7);}}});_aba.storage.manager.register("dojox.storage.FlashStorageProvider",new _aba.storage.FlashStorageProvider());});},"esriviewer/ui/transparency/LayersTransparencyWindowWidget":function(){define(["dojo/_base/declare","dojo/topic","dojo/dom-class","dojo/_base/lang","../window/WindowWidget"],function(_ad8,_ad9,_ada,lang,_adb){return _ad8([_adb],{defaultPositioning:{x:700,y:50},windowHeight:"250px",windowWidth:"300px",windowHeaderText:"Layer Transparency",windowIconAltText:"Layer Transparency",windowIconClass:"commonIcons16 slider",positioningParamName:"layerTransparency",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_ada.add(this.windowContent,"layerTransparencyWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/transparency/LayersTransparencyWidget"],lang.hitch(this,function(_adc){this.layersTransparencyWidget=new _adc();this.setContent(this.layersTransparencyWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_ad9.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.TRANSPARENCY.WINDOW.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_ad9.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.TRANSPARENCY.WINDOW.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_ad9.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.TRANSPARENCY.WINDOW.TOGGLE,lang.hitch(this,this.toggle)));}});});},"esriviewer/ui/messaging/MessagingWidget":function(){define(["dojo/_base/declare","dojo/text!./template/MessagingWidgetTemplate.html","dojo/topic","dojo/_base/lang","../base/UITemplatedWidget","dojox/timing","./model/MessagingWidgetViewModel"],function(_add,_ade,_adf,lang,_ae0,_ae1,_ae2){return _add([_ae0],{templateString:_ade,defaultTimerInterval:4000,isPositionedByConfig:true,defaultPositioning:{x:375,y:50},positioningParamName:"messaging",postCreate:function(){this.inherited(arguments);this.viewModel=new _ae2();ko.applyBindings(this.viewModel,this.domNode);this.messageTimer=new _ae1.Timer(this.defaultTimerInterval);this.messageTimer.onTick=lang.hitch(this,this.hideMessage);this.hideMessage();},initListeners:function(){this.inherited(arguments);_adf.subscribe(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,lang.hitch(this,this.showMessage));_adf.subscribe(VIEWER_GLOBALS.EVENTS.MESSAGING.HIDE,lang.hitch(this,this.hideMessage));},showMessage:function(_ae3,_ae4){this.viewModel.showMessage(_ae3);_ae4=(_ae4==null)?this.defaultTimerInterval:_ae4;this.messageTimer.setInterval(_ae4);this.messageTimer.start();},hideMessage:function(){if(this.messageTimer){this.messageTimer.stop();}this.viewModel.hideMessage();}});});},"esriviewer/ui/pointupload/PointUploadWindow":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/topic","../window/WindowWidget"],function(_ae5,lang,_ae6,_ae7){return _ae5([_ae7],{defaultPositioning:{x:510,y:45},windowWidth:"20%",windowHeaderText:"CSV Point Upload",windowIconAltText:"CSV Point Upload",windowIconClass:"commonIcons16 upload",positioningParamName:"pointUpload",constructor:function(){this.firstShowListener=this.on("firstWindowShow",lang.hitch(this,this.handleFirstWindowShow));},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/pointupload/PointUploadWidget"],lang.hitch(this,function(_ae8){this.pointUploadWidget=new _ae8();this.setContent(this.pointUploadWidget.domNode);}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_ae6.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.POINT_UPLOAD.SHOW,lang.hitch(this,this.show)));this.subscribes.push(_ae6.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.POINT_UPLOAD.HIDE,lang.hitch(this,this.hide)));this.subscribes.push(_ae6.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.POINT_UPLOAD.TOGGLE,lang.hitch(this,this.toggle)));}});});},"esriviewer/ui/messaging/model/MessagingWidgetViewModel":function(){define(["dojo/_base/declare"],function(_ae9){return _ae9([],{constructor:function(){this.message=ko.observable("");this.visible=ko.observable(false);},showMessage:function(_aea){if(_aea!=null&&_aea!=""){this.visible(true);this.message(_aea);}},hideMessage:function(){this.visible(false);}});});},"dojo/request/notify":function(){define(["../Evented","../_base/lang","./util"],function(_aeb,lang,util){var _aec=0,_aed=[].slice;var hub=lang.mixin(new _aeb,{onsend:function(data){if(!_aec){this.emit("start");}_aec++;},_onload:function(data){this.emit("done",data);},_onerror:function(data){this.emit("done",data);},_ondone:function(data){if(--_aec<=0){_aec=0;this.emit("stop");}},emit:function(type,_aee){var _aef=_aeb.prototype.emit.apply(this,arguments);if(this["_on"+type]){this["_on"+type].apply(this,_aed.call(arguments,1));}return _aef;}});function _af0(type,_af1){return hub.on(type,_af1);};_af0.emit=function(type,_af2,_af3){return hub.emit(type,_af2,_af3);};return util.notify=_af0;});},"esriviewer/ui/draw/configure/geometry/model/ConfigureLineViewModel":function(){define(["dojo/_base/declare","esri/symbols/SimpleLineSymbol"],function(_af4,_af5){return _af4([],{lineStyles:ko.observableArray([{value:_af5.STYLE_DASH,label:"Dashed Line"},{value:_af5.STYLE_DASHDOT,label:"Dash Dot Line"},{value:_af5.STYLE_DASHDOTDOT,label:"Dash Dot Dot Line"},{value:_af5.STYLE_DOT,label:"Dotted Line"},{value:_af5.STYLE_SOLID,label:"Solid Line"},{value:_af5.STYLE_NULL,label:"None"}]),lineWidths:ko.observableArray([1,2,3,4,5,6,7,8,9,10,15,20,25,30,40,50]),constructor:function(){this.selectedLineStyle=ko.observable(_af5.STYLE_SOLID);this.selectedWidth=ko.observable(2);}});});},"dijit/form/HorizontalSlider":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dnd/move","dojo/_base/fx","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/dnd/Moveable","dojo/dnd/Mover","dojo/query","dojo/mouse","dojo/on","../_base/manager","../focus","../typematic","./Button","./_FormValueWidget","../_Container","dojo/text!./templates/HorizontalSlider.html"],function(_af6,_af7,move,fx,_af8,_af9,keys,lang,has,_afa,_afb,_afc,_afd,on,_afe,_aff,_b00,_b01,_b02,_b03,_b04){var _b05=_af7("dijit.form._SliderMover",_afb,{onMouseMove:function(e){var _b06=this.widget;var _b07=_b06._abspos;if(!_b07){_b07=_b06._abspos=_af8.position(_b06.sliderBarContainer,true);_b06._setPixelValue_=lang.hitch(_b06,"_setPixelValue");_b06._isReversed_=_b06._isReversed();}var _b08=e[_b06._mousePixelCoord]-_b07[_b06._startingPixelCoord];_b06._setPixelValue_(_b06._isReversed_?(_b07[_b06._pixelCount]-_b08):_b08,_b07[_b06._pixelCount],false);},destroy:function(e){_afb.prototype.destroy.apply(this,arguments);var _b09=this.widget;_b09._abspos=null;_b09._setValueAttr(_b09.value,true);}});var _b0a=_af7("dijit.form.HorizontalSlider",[_b02,_b03],{templateString:_b04,value:0,showButtons:true,minimum:0,maximum:100,discreteValues:Infinity,pageIncrement:2,clickSelect:true,slideDuration:_afe.defaultDuration,_setIdAttr:"",_setNameAttr:"valueNode",baseClass:"dijitSlider",cssStateNodes:{incrementButton:"dijitSliderIncrementButton",decrementButton:"dijitSliderDecrementButton",focusNode:"dijitSliderThumb"},_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_handleOffsetCoord:"left",_progressPixelSize:"width",_onKeyUp:function(e){if(this.disabled||this.readOnly||e.altKey||e.ctrlKey||e.metaKey){return;}this._setValueAttr(this.value,true);},_onKeyDown:function(e){if(this.disabled||this.readOnly||e.altKey||e.ctrlKey||e.metaKey){return;}switch(e.keyCode){case keys.HOME:this._setValueAttr(this.minimum,false);break;case keys.END:this._setValueAttr(this.maximum,false);break;case ((this._descending||this.isLeftToRight())?keys.RIGHT_ARROW:keys.LEFT_ARROW):case (this._descending===false?keys.DOWN_ARROW:keys.UP_ARROW):case (this._descending===false?keys.PAGE_DOWN:keys.PAGE_UP):this.increment(e);break;case ((this._descending||this.isLeftToRight())?keys.LEFT_ARROW:keys.RIGHT_ARROW):case (this._descending===false?keys.UP_ARROW:keys.DOWN_ARROW):case (this._descending===false?keys.PAGE_UP:keys.PAGE_DOWN):this.decrement(e);break;default:return;}e.stopPropagation();e.preventDefault();},_onHandleClick:function(e){if(this.disabled||this.readOnly){return;}if(!has("ie")){_aff.focus(this.sliderHandle);}e.stopPropagation();e.preventDefault();},_isReversed:function(){return !this.isLeftToRight();},_onBarClick:function(e){if(this.disabled||this.readOnly||!this.clickSelect){return;}_aff.focus(this.sliderHandle);e.stopPropagation();e.preventDefault();var _b0b=_af8.position(this.sliderBarContainer,true);var _b0c=e[this._mousePixelCoord]-_b0b[this._startingPixelCoord];this._setPixelValue(this._isReversed()?(_b0b[this._pixelCount]-_b0c):_b0c,_b0b[this._pixelCount],true);this._movable.onMouseDown(e);},_setPixelValue:function(_b0d,_b0e,_b0f){if(this.disabled||this.readOnly){return;}var _b10=this.discreteValues;if(_b10<=1||_b10==Infinity){_b10=_b0e;}_b10--;var _b11=_b0e/_b10;var _b12=Math.round(_b0d/_b11);this._setValueAttr(Math.max(Math.min((this.maximum-this.minimum)*_b12/_b10+this.minimum,this.maximum),this.minimum),_b0f);},_setValueAttr:function(_b13,_b14){this._set("value",_b13);this.valueNode.value=_b13;this.focusNode.setAttribute("aria-valuenow",_b13);this.inherited(arguments);var _b15=(_b13-this.minimum)/(this.maximum-this.minimum);var _b16=(this._descending===false)?this.remainingBar:this.progressBar;var _b17=(this._descending===false)?this.progressBar:this.remainingBar;if(this._inProgressAnim&&this._inProgressAnim.status!="stopped"){this._inProgressAnim.stop(true);}if(_b14&&this.slideDuration>0&&_b16.style[this._progressPixelSize]){var _b18=this;var _b19={};var _b1a=parseFloat(_b16.style[this._progressPixelSize]);var _b1b=this.slideDuration*(_b15-_b1a/100);if(_b1b==0){return;}if(_b1b<0){_b1b=0-_b1b;}_b19[this._progressPixelSize]={start:_b1a,end:_b15*100,units:"%"};this._inProgressAnim=fx.animateProperty({node:_b16,duration:_b1b,onAnimate:function(v){_b17.style[_b18._progressPixelSize]=(100-parseFloat(v[_b18._progressPixelSize]))+"%";},onEnd:function(){delete _b18._inProgressAnim;},properties:_b19});this._inProgressAnim.play();}else{_b16.style[this._progressPixelSize]=(_b15*100)+"%";_b17.style[this._progressPixelSize]=((1-_b15)*100)+"%";}},_bumpValue:function(_b1c,_b1d){if(this.disabled||this.readOnly){return;}var s=_af9.getComputedStyle(this.sliderBarContainer);var c=_af8.getContentBox(this.sliderBarContainer,s);var _b1e=this.discreteValues;if(_b1e<=1||_b1e==Infinity){_b1e=c[this._pixelCount];}_b1e--;var _b1f=(this.value-this.minimum)*_b1e/(this.maximum-this.minimum)+_b1c;if(_b1f<0){_b1f=0;}if(_b1f>_b1e){_b1f=_b1e;}_b1f=_b1f*(this.maximum-this.minimum)/_b1e+this.minimum;this._setValueAttr(_b1f,_b1d);},_onClkBumper:function(val){if(this.disabled||this.readOnly||!this.clickSelect){return;}this._setValueAttr(val,true);},_onClkIncBumper:function(){this._onClkBumper(this._descending===false?this.minimum:this.maximum);},_onClkDecBumper:function(){this._onClkBumper(this._descending===false?this.maximum:this.minimum);},decrement:function(e){this._bumpValue(e.keyCode==keys.PAGE_DOWN?-this.pageIncrement:-1);},increment:function(e){this._bumpValue(e.keyCode==keys.PAGE_UP?this.pageIncrement:1);},_mouseWheeled:function(evt){evt.stopPropagation();evt.preventDefault();this._bumpValue(evt.wheelDelta<0?-1:1,true);},startup:function(){if(this._started){return;}_af6.forEach(this.getChildren(),function(_b20){if(this[_b20.container]!=this.containerNode){this[_b20.container].appendChild(_b20.domNode);}},this);this.inherited(arguments);},_typematicCallback:function(_b21,_b22,e){if(_b21==-1){this._setValueAttr(this.value,true);}else{this[(_b22==(this._descending?this.incrementButton:this.decrementButton))?"decrement":"increment"](e);}},buildRendering:function(){this.inherited(arguments);if(this.showButtons){this.incrementButton.style.display="";this.decrementButton.style.display="";}var _b23=_afc("label[for=\""+this.id+"\"]");if(_b23.length){if(!_b23[0].id){_b23[0].id=this.id+"_label";}this.focusNode.setAttribute("aria-labelledby",_b23[0].id);}this.focusNode.setAttribute("aria-valuemin",this.minimum);this.focusNode.setAttribute("aria-valuemax",this.maximum);},postCreate:function(){this.inherited(arguments);if(this.showButtons){this.own(_b00.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500),_b00.addMouseListener(this.incrementButton,this,"_typematicCallback",25,500));}this.own(on(this.domNode,_afd.wheel,lang.hitch(this,"_mouseWheeled")));var _b24=_af7(_b05,{widget:this});this._movable=new _afa(this.sliderHandle,{mover:_b24});this._layoutHackIE7();},destroy:function(){this._movable.destroy();if(this._inProgressAnim&&this._inProgressAnim.status!="stopped"){this._inProgressAnim.stop(true);}this.inherited(arguments);}});_b0a._Mover=_b05;return _b0a;});},"dojox/layout/ResizeHandle":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/connect","dojo/_base/array","dojo/_base/event","dojo/_base/fx","dojo/_base/window","dojo/fx","dojo/window","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dijit/_base/manager","dijit/_Widget","dijit/_TemplatedMixin","dojo/_base/declare"],function(_b25,lang,_b26,_b27,_b28,_b29,_b2a,_b2b,_b2c,_b2d,_b2e,_b2f,_b30,_b31,_b32,_b33,_b34){_b25.experimental("dojox.layout.ResizeHandle");var _b35=_b34("dojox.layout.ResizeHandle",[_b32,_b33],{targetId:"",targetContainer:null,resizeAxis:"xy",activeResize:false,activeResizeClass:"dojoxResizeHandleClone",animateSizing:true,animateMethod:"chain",animateDuration:225,minHeight:100,minWidth:100,constrainMax:false,maxHeight:0,maxWidth:0,fixedAspect:false,intermediateChanges:false,startTopic:"/dojo/resize/start",endTopic:"/dojo/resize/stop",templateString:"<div dojoAttachPoint=\"resizeHandle\" class=\"dojoxResizeHandle\"><div></div></div>",postCreate:function(){this.connect(this.resizeHandle,"onmousedown","_beginSizing");if(!this.activeResize){this._resizeHelper=_b31.byId("dojoxGlobalResizeHelper");if(!this._resizeHelper){this._resizeHelper=new _b36({id:"dojoxGlobalResizeHelper"}).placeAt(_b2a.body());_b2e.add(this._resizeHelper.domNode,this.activeResizeClass);}}else{this.animateSizing=false;}if(!this.minSize){this.minSize={w:this.minWidth,h:this.minHeight};}if(this.constrainMax){this.maxSize={w:this.maxWidth,h:this.maxHeight};}this._resizeX=this._resizeY=false;var _b37=lang.partial(_b2e.add,this.resizeHandle);switch(this.resizeAxis.toLowerCase()){case "xy":this._resizeX=this._resizeY=true;_b37("dojoxResizeNW");break;case "x":this._resizeX=true;_b37("dojoxResizeW");break;case "y":this._resizeY=true;_b37("dojoxResizeN");break;}},_beginSizing:function(e){if(this._isSizing){return;}_b26.publish(this.startTopic,[this]);this.targetWidget=_b31.byId(this.targetId);this.targetDomNode=this.targetWidget?this.targetWidget.domNode:_b2d.byId(this.targetId);if(this.targetContainer){this.targetDomNode=this.targetContainer;}if(!this.targetDomNode){return;}if(!this.activeResize){var c=_b2f.position(this.targetDomNode,true);this._resizeHelper.resize({l:c.x,t:c.y,w:c.w,h:c.h});this._resizeHelper.show();if(!this.isLeftToRight()){this._resizeHelper.startPosition={l:c.x,t:c.y};}}this._isSizing=true;this.startPoint={x:e.clientX,y:e.clientY};var _b38=_b30.getComputedStyle(this.targetDomNode),_b39=_b2f.boxModel==="border-model",_b3a=_b39?{w:0,h:0}:_b2f.getPadBorderExtents(this.targetDomNode,_b38),_b3b=_b2f.getMarginExtents(this.targetDomNode,_b38),mb;mb=this.startSize={w:_b30.get(this.targetDomNode,"width",_b38),h:_b30.get(this.targetDomNode,"height",_b38),pbw:_b3a.w,pbh:_b3a.h,mw:_b3b.w,mh:_b3b.h};if(!this.isLeftToRight()&&dojo.style(this.targetDomNode,"position")=="absolute"){var p=_b2f.position(this.targetDomNode,true);this.startPosition={l:p.x,t:p.y};}this._pconnects=[_b26.connect(_b2a.doc,"onmousemove",this,"_updateSizing"),_b26.connect(_b2a.doc,"onmouseup",this,"_endSizing")];_b28.stop(e);},_updateSizing:function(e){if(this.activeResize){this._changeSizing(e);}else{var tmp=this._getNewCoords(e,"border",this._resizeHelper.startPosition);if(tmp===false){return;}this._resizeHelper.resize(tmp);}e.preventDefault();},_getNewCoords:function(e,box,_b3c){try{if(!e.clientX||!e.clientY){return false;}}catch(e){return false;}this._activeResizeLastEvent=e;var dx=(this.isLeftToRight()?1:-1)*(this.startPoint.x-e.clientX),dy=this.startPoint.y-e.clientY,newW=this.startSize.w-(this._resizeX?dx:0),newH=this.startSize.h-(this._resizeY?dy:0),r=this._checkConstraints(newW,newH);_b3c=(_b3c||this.startPosition);if(_b3c&&this._resizeX){r.l=_b3c.l+dx;if(r.w!=newW){r.l+=(newW-r.w);}r.t=_b3c.t;}switch(box){case "margin":r.w+=this.startSize.mw;r.h+=this.startSize.mh;case "border":r.w+=this.startSize.pbw;r.h+=this.startSize.pbh;break;}return r;},_checkConstraints:function(newW,newH){if(this.minSize){var tm=this.minSize;if(newW<tm.w){newW=tm.w;}if(newH<tm.h){newH=tm.h;}}if(this.constrainMax&&this.maxSize){var ms=this.maxSize;if(newW>ms.w){newW=ms.w;}if(newH>ms.h){newH=ms.h;}}if(this.fixedAspect){var w=this.startSize.w,h=this.startSize.h,_b3d=w*newH-h*newW;if(_b3d<0){newW=newH*w/h;}else{if(_b3d>0){newH=newW*h/w;}}}return {w:newW,h:newH};},_changeSizing:function(e){var _b3e=this.targetWidget&&lang.isFunction(this.targetWidget.resize),tmp=this._getNewCoords(e,_b3e&&"margin");if(tmp===false){return;}if(_b3e){this.targetWidget.resize(tmp);}else{if(this.animateSizing){var anim=_b2b[this.animateMethod]([_b29.animateProperty({node:this.targetDomNode,properties:{width:{start:this.startSize.w,end:tmp.w}},duration:this.animateDuration}),_b29.animateProperty({node:this.targetDomNode,properties:{height:{start:this.startSize.h,end:tmp.h}},duration:this.animateDuration})]);anim.play();}else{_b30.set(this.targetDomNode,{width:tmp.w+"px",height:tmp.h+"px"});}}if(this.intermediateChanges){this.onResize(e);}},_endSizing:function(e){_b27.forEach(this._pconnects,_b26.disconnect);var pub=lang.partial(_b26.publish,this.endTopic,[this]);if(!this.activeResize){this._resizeHelper.hide();this._changeSizing(e);setTimeout(pub,this.animateDuration+15);}else{pub();}this._isSizing=false;this.onResize(e);},onResize:function(e){}});var _b36=dojo.declare("dojox.layout._ResizeHelper",_b32,{show:function(){_b30.set(this.domNode,"display","");},hide:function(){_b30.set(this.domNode,"display","none");},resize:function(dim){_b2f.setMarginBox(this.domNode,dim);}});return _b35;});},"dijit/Tree":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/connect","dojo/cookie","dojo/_base/declare","dojo/Deferred","dojo/promise/all","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/errors/create","dojo/fx","dojo/has","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/topic","dojo/touch","dojo/when","./a11yclick","./focus","./registry","./_base/manager","./_Widget","./_TemplatedMixin","./_Container","./_Contained","./_CssStateMixin","./_KeyNavMixin","dojo/text!./templates/TreeNode.html","dojo/text!./templates/Tree.html","./tree/TreeStoreModel","./tree/ForestStoreModel","./tree/_dndSelector","dojo/query!css2"],function(_b3f,_b40,_b41,_b42,_b43,_b44,all,dom,_b45,_b46,_b47,_b48,_b49,has,_b4a,keys,lang,on,_b4b,_b4c,when,_b4d,_b4e,_b4f,_b50,_b51,_b52,_b53,_b54,_b55,_b56,_b57,_b58,_b59,_b5a,_b5b){function _b5c(d){return lang.delegate(d.promise||d,{addCallback:function(_b5d){this.then(_b5d);},addErrback:function(_b5e){this.otherwise(_b5e);}});};var _b5f=_b43("dijit._TreeNode",[_b51,_b52,_b53,_b54,_b55],{item:null,isTreeNode:true,label:"",_setLabelAttr:function(val){this.labelNode[this.labelType=="html"?"innerHTML":"innerText" in this.labelNode?"innerText":"textContent"]=val;this._set("label",val);},labelType:"text",isExpandable:null,isExpanded:false,state:"NotLoaded",templateString:_b57,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);if(this.isExpandable){this.labelNode.setAttribute("aria-expanded",this.isExpanded);}this.setSelected(false);},_setIndentAttr:function(_b60){var _b61=(Math.max(_b60,0)*this.tree._nodePixelIndent)+"px";_b47.set(this.domNode,"backgroundPosition",_b61+" 0px");_b47.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",_b61);_b3f.forEach(this.getChildren(),function(_b62){_b62.set("indent",_b60+1);});this._set("indent",_b60);},markProcessing:function(){this.state="Loading";this._setExpando(true);},unmarkProcessing:function(){this._setExpando(false);},_updateItemClasses:function(item){var tree=this.tree,_b63=tree.model;if(tree._v10Compat&&item===_b63.root){item=null;}this._applyClassAndStyle(item,"icon","Icon");this._applyClassAndStyle(item,"label","Label");this._applyClassAndStyle(item,"row","Row");this.tree._startPaint(true);},_applyClassAndStyle:function(item,_b64,_b65){var _b66="_"+_b64+"Class";var _b67=_b64+"Node";var _b68=this[_b66];this[_b66]=this.tree["get"+_b65+"Class"](item,this.isExpanded);_b45.replace(this[_b67],this[_b66]||"",_b68||"");_b47.set(this[_b67],this.tree["get"+_b65+"Style"](item,this.isExpanded)||{});},_updateLayout:function(){var _b69=this.getParent();if(!_b69||!_b69.rowNode||_b69.rowNode.style.display=="none"){_b45.add(this.domNode,"dijitTreeIsRoot");}else{_b45.toggle(this.domNode,"dijitTreeIsLast",!this.getNextSibling());}},_setExpando:function(_b6a){var _b6b=["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"],_b6c=["*","-","+","*"],idx=_b6a?0:(this.isExpandable?(this.isExpanded?1:2):3);_b45.replace(this.expandoNode,_b6b[idx],_b6b);this.expandoNodeText.innerHTML=_b6c[idx];},expand:function(){if(this._expandDeferred){return _b5c(this._expandDeferred);}if(this._collapseDeferred){this._collapseDeferred.cancel();delete this._collapseDeferred;}this.isExpanded=true;this.labelNode.setAttribute("aria-expanded","true");if(this.tree.showRoot||this!==this.tree.rootNode){this.containerNode.setAttribute("role","group");}_b45.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);if(this==this.tree.rootNode&&this.tree.showRoot){this.tree.domNode.setAttribute("aria-expanded","true");}var _b6d=_b49.wipeIn({node:this.containerNode,duration:_b50.defaultDuration});var def=(this._expandDeferred=new _b44(function(){_b6d.stop();}));_b40.after(_b6d,"onEnd",function(){def.resolve(true);},true);_b6d.play();return _b5c(def);},collapse:function(){if(this._collapseDeferred){return _b5c(this._collapseDeferred);}if(this._expandDeferred){this._expandDeferred.cancel();delete this._expandDeferred;}this.isExpanded=false;this.labelNode.setAttribute("aria-expanded","false");if(this==this.tree.rootNode&&this.tree.showRoot){this.tree.domNode.setAttribute("aria-expanded","false");}_b45.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var _b6e=_b49.wipeOut({node:this.containerNode,duration:_b50.defaultDuration});var def=(this._collapseDeferred=new _b44(function(){_b6e.stop();}));_b40.after(_b6e,"onEnd",function(){def.resolve(true);},true);_b6e.play();return _b5c(def);},indent:0,setChildItems:function(_b6f){var tree=this.tree,_b70=tree.model,defs=[];var _b71=this.getChildren();_b3f.forEach(_b71,function(_b72){_b53.prototype.removeChild.call(this,_b72);},this);this.defer(function(){_b3f.forEach(_b71,function(node){if(!node._destroyed&&!node.getParent()){tree.dndController.removeTreeNode(node);function _b73(node){var id=_b70.getIdentity(node.item),ary=tree._itemNodesMap[id];if(ary.length==1){delete tree._itemNodesMap[id];}else{var _b74=_b3f.indexOf(ary,node);if(_b74!=-1){ary.splice(_b74,1);}}_b3f.forEach(node.getChildren(),_b73);};_b73(node);if(tree.persist){var _b75=_b3f.map(node.getTreePath(),function(item){return tree.model.getIdentity(item);}).join("/");for(var path in tree._openedNodes){if(path.substr(0,_b75.length)==_b75){delete tree._openedNodes[path];}}tree._saveExpandedNodes();}node.destroyRecursive();}});});this.state="Loaded";if(_b6f&&_b6f.length>0){this.isExpandable=true;_b3f.forEach(_b6f,function(item){var id=_b70.getIdentity(item),_b76=tree._itemNodesMap[id],node;if(_b76){for(var i=0;i<_b76.length;i++){if(_b76[i]&&!_b76[i].getParent()){node=_b76[i];node.set("indent",this.indent+1);break;}}}if(!node){node=this.tree._createTreeNode({item:item,tree:tree,isExpandable:_b70.mayHaveChildren(item),label:tree.getLabel(item),labelType:(tree.model&&tree.model.labelType)||"text",tooltip:tree.getTooltip(item),ownerDocument:tree.ownerDocument,dir:tree.dir,lang:tree.lang,textDir:tree.textDir,indent:this.indent+1});if(_b76){_b76.push(node);}else{tree._itemNodesMap[id]=[node];}}this.addChild(node);if(this.tree.autoExpand||this.tree._state(node)){defs.push(tree._expandNode(node));}},this);_b3f.forEach(this.getChildren(),function(_b77){_b77._updateLayout();});}else{this.isExpandable=false;}if(this._setExpando){this._setExpando(false);}this._updateItemClasses(this.item);var def=all(defs);this.tree._startPaint(def);return _b5c(def);},getTreePath:function(){var node=this;var path=[];while(node&&node!==this.tree.rootNode){path.unshift(node.item);node=node.getParent();}path.unshift(this.tree.rootNode.item);return path;},getIdentity:function(){return this.tree.model.getIdentity(this.item);},removeChild:function(node){this.inherited(arguments);var _b78=this.getChildren();if(_b78.length==0){this.isExpandable=false;this.collapse();}_b3f.forEach(_b78,function(_b79){_b79._updateLayout();});},makeExpandable:function(){this.isExpandable=true;this._setExpando(false);},setSelected:function(_b7a){this.labelNode.setAttribute("aria-selected",_b7a?"true":"false");_b45.toggle(this.rowNode,"dijitTreeRowSelected",_b7a);},focus:function(){_b4e.focus(this.focusNode);}});if(has("dojo-bidi")){_b5f.extend({_setTextDirAttr:function(_b7b){if(_b7b&&((this.textDir!=_b7b)||!this._created)){this._set("textDir",_b7b);this.applyTextDir(this.labelNode);_b3f.forEach(this.getChildren(),function(_b7c){_b7c.set("textDir",_b7b);},this);}}});}var Tree=_b43("dijit.Tree",[_b51,_b56,_b52,_b55],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:true,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:false,openOnDblClick:false,templateString:_b58,persist:false,autoExpand:false,dndController:_b5b,dndParams:["onDndDrop","itemCreator","onDndCancel","checkAcceptance","checkItemAcceptance","dragThreshold","betweenThreshold"],onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(_b7d,_b7e){_b4b.publish(this.id,lang.mixin({tree:this,event:_b7d},_b7e||{}));},postMixInProperties:function(){this.tree=this;if(this.autoExpand){this.persist=false;}this._itemNodesMap={};if(!this.cookieName&&this.id){this.cookieName=this.id+"SaveStateCookie";}this.expandChildrenDeferred=new _b44();this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments);},postCreate:function(){this._initState();var self=this;this.own(on(this.containerNode,on.selector(".dijitTreeNode",_b4c.enter),function(evt){self._onNodeMouseEnter(_b4f.byNode(this),evt);}),on(this.containerNode,on.selector(".dijitTreeNode",_b4c.leave),function(evt){self._onNodeMouseLeave(_b4f.byNode(this),evt);}),on(this.containerNode,_b4d,function(evt){var node=_b4f.getEnclosingWidget(evt.target);if(node.isInstanceOf(_b5f)){self._onClick(node,evt);}}),on(this.containerNode,on.selector(".dijitTreeNode","dblclick"),function(evt){self._onDblClick(_b4f.byNode(this),evt);}));if(!this.model){this._store2model();}this.own(_b40.after(this.model,"onChange",lang.hitch(this,"_onItemChange"),true),_b40.after(this.model,"onChildrenChange",lang.hitch(this,"_onItemChildrenChange"),true),_b40.after(this.model,"onDelete",lang.hitch(this,"_onItemDelete"),true));this.inherited(arguments);if(this.dndController){if(lang.isString(this.dndController)){this.dndController=lang.getObject(this.dndController);}var _b7f={};for(var i=0;i<this.dndParams.length;i++){if(this[this.dndParams[i]]){_b7f[this.dndParams[i]]=this[this.dndParams[i]];}}this.dndController=new this.dndController(this,_b7f);}this._load();this.onLoadDeferred=_b5c(this.pendingCommandsPromise);this.onLoadDeferred.then(lang.hitch(this,"onLoad"));},_store2model:function(){this._v10Compat=true;_b4a.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var _b80={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};if(this.params.mayHaveChildren){_b80.mayHaveChildren=lang.hitch(this,"mayHaveChildren");}if(this.params.getItemChildren){_b80.getChildren=lang.hitch(this,function(item,_b81,_b82){this.getItemChildren((this._v10Compat&&item===this.model.root)?null:item,_b81,_b82);});}this.model=new _b5a(_b80);this.showRoot=Boolean(this.label);},onLoad:function(){},_load:function(){this.model.getRoot(lang.hitch(this,function(item){var rn=(this.rootNode=this.tree._createTreeNode({item:item,tree:this,isExpandable:true,label:this.label||this.getLabel(item),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1}));if(!this.showRoot){rn.rowNode.style.display="none";this.domNode.setAttribute("role","presentation");this.domNode.removeAttribute("aria-expanded");this.domNode.removeAttribute("aria-multiselectable");if(this["aria-label"]){rn.containerNode.setAttribute("aria-label",this["aria-label"]);this.domNode.removeAttribute("aria-label");}else{if(this["aria-labelledby"]){rn.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]);this.domNode.removeAttribute("aria-labelledby");}}rn.labelNode.setAttribute("role","presentation");rn.containerNode.setAttribute("role","tree");rn.containerNode.setAttribute("aria-expanded","true");rn.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular);}else{this.domNode.setAttribute("aria-multiselectable",!this.dndController.singular);this.rootLoadingIndicator.style.display="none";}this.containerNode.appendChild(rn.domNode);var _b83=this.model.getIdentity(item);if(this._itemNodesMap[_b83]){this._itemNodesMap[_b83].push(rn);}else{this._itemNodesMap[_b83]=[rn];}rn._updateLayout();this._expandNode(rn).then(lang.hitch(this,function(){this.rootLoadingIndicator.style.display="none";this.expandChildrenDeferred.resolve(true);}));}),lang.hitch(this,function(err){}));},getNodesByItem:function(item){if(!item){return [];}var _b84=lang.isString(item)?item:this.model.getIdentity(item);return [].concat(this._itemNodesMap[_b84]);},_setSelectedItemAttr:function(item){this.set("selectedItems",[item]);},_setSelectedItemsAttr:function(_b85){var tree=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(lang.hitch(this,function(){var _b86=_b3f.map(_b85,function(item){return (!item||lang.isString(item))?item:tree.model.getIdentity(item);});var _b87=[];_b3f.forEach(_b86,function(id){_b87=_b87.concat(tree._itemNodesMap[id]||[]);});this.set("selectedNodes",_b87);}));},_setPathAttr:function(path){if(path.length){return _b5c(this.set("paths",[path]).then(function(_b88){return _b88[0];}));}else{return _b5c(this.set("paths",[]).then(function(_b89){return _b89[0];}));}},_setPathsAttr:function(_b8a){var tree=this;function _b8b(path,_b8c){var _b8d=path.shift();var _b8e=_b3f.filter(_b8c,function(node){return node.getIdentity()==_b8d;})[0];if(!!_b8e){if(path.length){return tree._expandNode(_b8e).then(function(){return _b8b(path,_b8e.getChildren());});}else{return _b8e;}}else{throw new Tree.PathError("Could not expand path at "+_b8d);}};return _b5c(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return all(_b3f.map(_b8a,function(path){path=_b3f.map(path,function(item){return lang.isString(item)?item:tree.model.getIdentity(item);});if(path.length){return _b8b(path,[tree.rootNode]);}else{throw new Tree.PathError("Empty path");}}));}).then(function setNodes(_b8f){tree.set("selectedNodes",_b8f);return tree.paths;}));},_setSelectedNodeAttr:function(node){this.set("selectedNodes",[node]);},_setSelectedNodesAttr:function(_b90){this.dndController.setSelection(_b90);},expandAll:function(){var _b91=this;function _b92(node){return _b91._expandNode(node).then(function(){var _b93=_b3f.filter(node.getChildren()||[],function(node){return node.isExpandable;});return all(_b3f.map(_b93,_b92));});};return _b5c(_b92(this.rootNode));},collapseAll:function(){var _b94=this;function _b95(node){var _b96=_b3f.filter(node.getChildren()||[],function(node){return node.isExpandable;}),defs=all(_b3f.map(_b96,_b95));if(!node.isExpanded||(node==_b94.rootNode&&!_b94.showRoot)){return defs;}else{return defs.then(function(){return _b94._collapseNode(node);});}};return _b5c(_b95(this.rootNode));},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(item){return this.model.getLabel(item);},getIconClass:function(item,_b97){return (!item||this.model.mayHaveChildren(item))?(_b97?"dijitFolderOpened":"dijitFolderClosed"):"dijitLeaf";},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return "";},_onDownArrow:function(evt,node){var _b98=this._getNext(node);if(_b98&&_b98.isTreeNode){this.focusNode(_b98);}},_onUpArrow:function(evt,node){var _b99=node.getPreviousSibling();if(_b99){node=_b99;while(node.isExpandable&&node.isExpanded&&node.hasChildren()){var _b9a=node.getChildren();node=_b9a[_b9a.length-1];}}else{var _b9b=node.getParent();if(!(!this.showRoot&&_b9b===this.rootNode)){node=_b9b;}}if(node&&node.isTreeNode){this.focusNode(node);}},_onRightArrow:function(evt,node){if(node.isExpandable&&!node.isExpanded){this._expandNode(node);}else{if(node.hasChildren()){node=node.getChildren()[0];if(node&&node.isTreeNode){this.focusNode(node);}}}},_onLeftArrow:function(evt,node){if(node.isExpandable&&node.isExpanded){this._collapseNode(node);}else{var _b9c=node.getParent();if(_b9c&&_b9c.isTreeNode&&!(!this.showRoot&&_b9c===this.rootNode)){this.focusNode(_b9c);}}},focusLastChild:function(){var node=this._getLast();if(node&&node.isTreeNode){this.focusNode(node);}},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0];},_getLast:function(){var node=this.rootNode;while(node.isExpanded){var c=node.getChildren();if(!c.length){break;}node=c[c.length-1];}return node;},_getNext:function(node){if(node.isExpandable&&node.isExpanded&&node.hasChildren()){return node.getChildren()[0];}else{while(node&&node.isTreeNode){var _b9d=node.getNextSibling();if(_b9d){return _b9d;}node=node.getParent();}return null;}},childSelector:".dijitTreeRow",isExpandoNode:function(node,_b9e){return dom.isDescendant(node,_b9e.expandoNode)||dom.isDescendant(node,_b9e.expandoNodeText);},__click:function(_b9f,e,_ba0,func){var _ba1=e.target,_ba2=this.isExpandoNode(_ba1,_b9f);if(_b9f.isExpandable&&(_ba0||_ba2)){this._onExpandoClick({node:_b9f});}else{this._publish("execute",{item:_b9f.item,node:_b9f,evt:e});this[func](_b9f.item,_b9f,e);this.focusNode(_b9f);}e.stopPropagation();e.preventDefault();},_onClick:function(_ba3,e){this.__click(_ba3,e,this.openOnClick,"onClick");},_onDblClick:function(_ba4,e){this.__click(_ba4,e,this.openOnDblClick,"onDblClick");},_onExpandoClick:function(_ba5){var node=_ba5.node;this.focusNode(node);if(node.isExpanded){this._collapseNode(node);}else{this._expandNode(node);}},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(node){_b4a.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(node);},_getRootOrFirstNode:function(){_b4a.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst();},_collapseNode:function(node){if(node._expandNodeDeferred){delete node._expandNodeDeferred;}if(node.state=="Loading"){return;}if(node.isExpanded){var ret=node.collapse();this.onClose(node.item,node);this._state(node,false);this._startPaint(ret);return ret;}},_expandNode:function(node){if(node._expandNodeDeferred){return node._expandNodeDeferred;}var _ba6=this.model,item=node.item,_ba7=this;if(!node._loadDeferred){node.markProcessing();node._loadDeferred=new _b44();_ba6.getChildren(item,function(_ba8){node.unmarkProcessing();node.setChildItems(_ba8).then(function(){node._loadDeferred.resolve(_ba8);});},function(err){node._loadDeferred.reject(err);});}var def=node._loadDeferred.then(lang.hitch(this,function(){var def2=node.expand();this.onOpen(node.item,node);this._state(node,true);return def2;}));this._startPaint(def);return def;},focusNode:function(node){this.focusChild(node);},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(item){var _ba9=this.model,_baa=_ba9.getIdentity(item),_bab=this._itemNodesMap[_baa];if(_bab){var _bac=this.getLabel(item),_bad=this.getTooltip(item);_b3f.forEach(_bab,function(node){node.set({item:item,label:_bac,tooltip:_bad});node._updateItemClasses(item);});}},_onItemChildrenChange:function(_bae,_baf){var _bb0=this.model,_bb1=_bb0.getIdentity(_bae),_bb2=this._itemNodesMap[_bb1];if(_bb2){_b3f.forEach(_bb2,function(_bb3){_bb3.setChildItems(_baf);});}},_onItemDelete:function(item){var _bb4=this.model,_bb5=_bb4.getIdentity(item),_bb6=this._itemNodesMap[_bb5];if(_bb6){_b3f.forEach(_bb6,function(node){this.dndController.removeTreeNode(node);var _bb7=node.getParent();if(_bb7){_bb7.removeChild(node);}node.destroyRecursive();},this);delete this._itemNodesMap[_bb5];}},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var oreo=_b42(this.cookieName);if(oreo){_b3f.forEach(oreo.split(","),function(item){this._openedNodes[item]=true;},this);}}},_state:function(node,_bb8){if(!this.persist){return false;}var path=_b3f.map(node.getTreePath(),function(item){return this.model.getIdentity(item);},this).join("/");if(arguments.length===1){return this._openedNodes[path];}else{if(_bb8){this._openedNodes[path]=true;}else{delete this._openedNodes[path];}this._saveExpandedNodes();}},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var ary=[];for(var id in this._openedNodes){ary.push(id);}_b42(this.cookieName,ary.join(","),{expires:365});}},destroy:function(){if(this._curSearch){this._curSearch.timer.remove();delete this._curSearch;}if(this.rootNode){this.rootNode.destroyRecursive();}if(this.dndController&&!lang.isString(this.dndController)){this.dndController.destroy();}this.rootNode=null;this.inherited(arguments);},destroyRecursive:function(){this.destroy();},resize:function(_bb9){if(_bb9){_b46.setMarginBox(this.domNode,_bb9);}this._nodePixelIndent=_b46.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(lang.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths();}));},_outstandingPaintOperations:0,_startPaint:function(p){this._outstandingPaintOperations++;if(this._adjustWidthsTimer){this._adjustWidthsTimer.remove();delete this._adjustWidthsTimer;}var oc=lang.hitch(this,function(){this._outstandingPaintOperations--;if(this._outstandingPaintOperations<=0&&!this._adjustWidthsTimer&&this._started){this._adjustWidthsTimer=this.defer("_adjustWidths");}});when(p,oc,oc);},_adjustWidths:function(){if(this._adjustWidthsTimer){this._adjustWidthsTimer.remove();delete this._adjustWidthsTimer;}this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%";},_createTreeNode:function(args){return new _b5f(args);},focus:function(){if(this.lastFocusedChild){this.focusNode(this.lastFocusedChild);}else{this.focusFirstChild();}}});if(has("dojo-bidi")){Tree.extend({_setTextDirAttr:function(_bba){if(_bba&&this.textDir!=_bba){this._set("textDir",_bba);this.rootNode.set("textDir",_bba);}}});}Tree.PathError=_b48("TreePathError");Tree._TreeNode=_b5f;return Tree;});},"esriviewer/loader/ViewerLoader":function(){define(["dojo/_base/declare","dojo/_base/window","dojo/_base/lang","dojo/topic","dojo/_base/connect","dojo/dom-class","../base/ViewerGlobals","../manager/ViewerManagerWindow","../util/RegExpUtils","../util/ViewerUtils","../util/GeometryUtils","../map/geometry/base/ProjectionUtils","dojo/on","dojo/io-query","xstyle/css","./base/ViewerPlacementWindow","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/layout/StackController","dijit/layout/AccordionPane","xstyle/css!dojox/layout/resources/ResizeHandle.css"],function(_bbb,_bbc,lang,_bbd,con,_bbe,_bbf,_bc0,_bc1,_bc2,_bc3,_bc4,on,_bc5,Css,_bc6){return _bbb([],{isDebug:false,constructor:function(_bc7){lang.mixin(this,_bc7||{});this._initPageResizeListener();this.viewerConfigurationParameters={useProxyForConfig:false};this.createGlobalClasses();this.initCss();this.processConfigurationSettings();this.createViewerPlacementWindow();this.createViewerManager();this.tweakUI();},_initPageResizeListener:function(){on(window,"resize",lang.hitch(this,function(){_bbd.publish(VIEWER_GLOBALS.EVENTS.WINDOW.REPOSITION_ALL);}));},initCss:function(){if(this.loadCoreTheme==null||this.loadCoreTheme!=false){Css.load("esriviewer/theme/coreTheme.css",require,lang.hitch(this,function(){this._handleCoreThemeLoaded();}));}else{this._handleCoreThemeLoaded();}},_handleCoreThemeLoaded:function(){Css.load("dijit/themes/tundra/tundra.css",require,function(){});Css.load("esri/css/esri.css",require,function(){});var _bc8=location.pathname.replace(/[^\/]+$/,"")+"css/overrides.css";Css.load(_bc8,require,function(){});_bbd.publish(VIEWER_GLOBALS.EVENTS.CSS.CORE_UI_THEME_LOADED);},createViewerPlacementWindow:function(){this.viewPlacement=new _bc6({mapDiv:this.mapDiv});},tweakUI:function(){if(VIEWER_UTILS.isHtml5FileUploadSupported()){con.connect(_bbc.body(),"dragover",function(e){e.stopPropagation();e.preventDefault();e.dataTransfer.effectAllowed=e.dataTransfer.dropEffect="none";});}_bbe.add(_bbc.body(),["defaultTextColor","defaultFont","defaultFontSize"]);},createGlobalClasses:function(){window.VIEWER_GLOBALS=this.createGlobals();window.VIEWER_UTILS=this.createUtils();window.GEOMETRY_UTILS=this.createGeometryUtils();window.REG_EXP_UTILS=this.createRegExpUtils();window.PROJECTION_UTILS=new _bc4();},processConfigurationSettings:function(){if(window&&window.location&&window.location.href){var _bc9=window.location.href.substring(window.location.href.indexOf("?")+1,window.location.href.length);this.windowQueryObject=_bc5.queryToObject(_bc9);if(this.windowQueryObject!=null&&lang.isObject(this.windowQueryObject)){if(this.windowQueryObject.viewerConfig!=null){this.viewerConfigurationParameters.configUrl=this.windowQueryObject.viewerConfig;this.viewerConfigurationParameters.useProxyForConfig=true;}if(this.windowQueryObject.viewerPositionConfig!=null){this.viewerConfigurationParameters.viewerPositioningConfigUrl=this.windowQueryObject.viewerPositionConfig;this.viewerConfigurationParameters.useProxyForPositionConfig=true;}}}},createGlobals:function(){return new _bbf();},createGeometryUtils:function(){return new _bc3();},createUtils:function(){return new _bc2({isDebug:this.isDebug});},createRegExpUtils:function(){return new _bc1();},createViewerManager:function(){window.VIEWER_MANAGER=this.createViewerManagerWindow();return window.VIEWER_MANAGER;},createViewerManagerWindow:function(){return new _bc0(this.viewerConfigurationParameters);}});});},"url:dijit/templates/Menu.html":"<table class=\"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable\" role=\"menu\" tabIndex=\"${tabIndex}\"\n\t   cellspacing=\"0\">\n\t<tbody class=\"dijitReset\" data-dojo-attach-point=\"containerNode\"></tbody>\n</table>\n","url:dijit/templates/TreeNode.html":"<div class=\"dijitTreeNode\" role=\"presentation\"\n\t><div data-dojo-attach-point=\"rowNode\" class=\"dijitTreeRow\" role=\"presentation\"\n\t\t><span data-dojo-attach-point=\"expandoNode\" class=\"dijitInline dijitTreeExpando\" role=\"presentation\"></span\n\t\t><span data-dojo-attach-point=\"expandoNodeText\" class=\"dijitExpandoText\" role=\"presentation\"></span\n\t\t><span data-dojo-attach-point=\"contentNode\"\n\t\t\tclass=\"dijitTreeContent\" role=\"presentation\">\n\t\t\t<span role=\"presentation\" class=\"dijitInline dijitIcon dijitTreeIcon\" data-dojo-attach-point=\"iconNode\"></span\n\t\t\t><span data-dojo-attach-point=\"labelNode,focusNode\" class=\"dijitTreeLabel\" role=\"treeitem\" tabindex=\"-1\" aria-selected=\"false\"></span>\n\t\t</span\n\t></div>\n\t<div data-dojo-attach-point=\"containerNode\" class=\"dijitTreeNodeContainer\" role=\"presentation\" style=\"display: none;\"></div>\n</div>\n","url:esriviewer/ui/draw/template/DrawWidgetTemplate.html":"<div class=\"drawWindow\">\r\n    <div class=\"defaultTabContainer\">\r\n        <span  data-bind=\"click:showDraw, css: {selectedTab: drawVisible}\">Create</span>\r\n        <span data-bind=\"click:showConfiguration, css: {selectedTab: configurationVisible}\">Configure</span>\r\n        <span  data-bind=\"visible:showGraphicsListTab, click:showGraphicsList, css: {selectedTab: graphicsListVisible}\">Added</span>\r\n        <span data-bind=\"visible:showSavedGraphicsTab, click:showUserPersistedGraphics, css: {selectedTab: userPersistedGraphicsVisible}\">Saved</span>\r\n    </div>\r\n    <div class=\"drawWindowInputIconsContainer\" data-dojo-attach-point=\"drawWindowInputIconsContainer\"\r\n         data-bind=\"visible: drawVisible\">\r\n        <div class=\"threePixelBorderRadius commonIcons32 pointUnselected\"\r\n             data-bind=\"visible: showDrawPointIcon, css: {pointSelected: pointActive}\"\r\n             title=\"Draw Point\" data-dojo-attach-event=\"onclick:handlePointDrawClick\"></div>\r\n        <div class=\"threePixelBorderRadius commonIcons32 lineUnselected\"\r\n             data-bind=\"visible: showDrawLineIcon, css: {lineSelected: lineActive}\"\r\n             title=\"Draw Line\" data-dojo-attach-event=\"onclick:handleLineDrawClick\"></div>\r\n        <div class=\"threePixelBorderRadius commonIcons32 polylineUnselected\"\r\n                data-bind=\"visible: showDrawPolylineIcon, css: {polylineSelected: polylineActive}\"\r\n                title=\"Draw Polyline\" data-dojo-attach-event=\"onclick:handlePolylineDrawClick\"></div>\r\n        <div data-bind=\"visible: showDrawPolygonIcon, css: {polygonSelected: polygonActive}\"\r\n             class=\"threePixelBorderRadius commonIcons32 polygonUnselected\"\r\n             title=\"Draw Polygon\" data-dojo-attach-event=\"onclick:handlePolygonDrawClick\"></div>\r\n        <div data-bind=\"visible: showDrawRectangleIcon,css: {rectangleSelected: rectangleActive}\"\r\n             class=\"threePixelBorderRadius commonIcons32 rectangleUnselected\"\r\n             title=\"Draw Rectangle\" data-dojo-attach-event=\"onclick:handleRectangleDrawClick\"></div>\r\n        <div class=\"threePixelBorderRadius commonIcons32 textUnselected\"\r\n             data-bind=\"visible: showDrawTextIcon,css: {textSelected: textActive}\"\r\n             title=\"Draw Text\" data-dojo-attach-event=\"onclick:handleTextDrawClick\"></div>\r\n    </div>\r\n    <div class=\"drawFreehandContainer\"\r\n         data-bind=\"visible: freehandContainerVisible\">\r\n        <span data-dojo-type=\"dijit/form/CheckBox\" data-dojo-attach-event=\"onChange:handleFreehandToggled\"\r\n              data-dojo-attach-point=\"freeHandDrawCheckbox\"></span>\r\n        <span class=\"drawFreehandCheckboxLabel\" data-dojo-attach-event=\"onclick:toggleFreehand\">Freehand</span>\r\n    </div>\r\n    <div class=\"drawWindowConfigureContainer\" data-bind=\"visible: configurationVisible\"\r\n         data-dojo-attach-point=\"drawWindowConfigureContainer\">\r\n    </div>\r\n    <div class=\"drawWindowGraphicsListContainer\" data-dojo-attach-point=\"drawWindowGraphicsListContainer\"\r\n         data-bind=\"visible: graphicsListVisible\">\r\n    </div>\r\n    <div class=\"drawWindowUserPersistedGraphicsContainer\"\r\n         data-dojo-attach-point=\"drawWindowUserPersistedGraphicsContainer\"\r\n         data-bind=\"visible: userPersistedGraphicsVisible\">\r\n    </div>\r\n</div>","url:esriviewer/ui/layers/template/LayersWidgetTemplate.html":"<div>\r\n    <div class=\"defaultTabContainer\" data-dojo-attach-point=\"layersTabContainer\">\r\n        <span data-dojo-attach-point=\"layersTab\"\r\n              data-bind=\"click:showLayersList, css: {selectedTab: layersListVisible}\">Layers</span>\r\n        <span data-dojo-attach-point=\"addLayersTab\"\r\n              data-bind=\"click:showAddLayers, css: {selectedTab: addLayersVisible}\">Add Layer</span>\r\n        <span data-dojo-attach-point=\"persistedLayersTab\"\r\n              data-bind=\"click:showUserPersistedLayers, css: {selectedTab: persistedLayersVisible}\">Saved Layers</span>\r\n    </div>\r\n    <div data-bind=\"visible:addLayersVisible\" class=\"addLayerContainer\" data-dojo-attach-point=\"addLayerContainer\">\r\n        <div class=\"addLayerContainerInner\">\r\n            <div class=\"viewerAddLayerWorkingWKIDContainer\" data-bind=\"visible:showWKIDInAddLayers\">\r\n                <span class=\"viewerAddLayerLabel \">Map WKID:</span>\r\n                <span class=\"viewerAddLayerWorkingWKIDLabel\" data-bind=\"text: viewerWKID\"></span>\r\n            </div>\r\n            <div class=\"viewerAddLayerLabel viewerAddLayerUrlLabel \">URL:</div>\r\n            <div data-dojo-type=\"dijit/form/TextBox\" style=\"width: 100%\" data-dojo-attach-point=\"addLayerTextInput\"\r\n                 data-dojo-attach-event=\"onKeyUp:handleLayerAddUrlKeyUp\"></div>\r\n            <div class=\"viewerAddLayerLabel viewerAddLayerUrlLabel \">Label:</div>\r\n            <div data-dojo-type=\"dijit/form/TextBox\" style=\"width: 100%\" data-dojo-attach-point=\"addLayerLabelInput\"\r\n                 value=\"Added Layer\"></div>\r\n            <div class=\"viewerAddLayerActions\">\r\n                <div class=\"layerTypeContainer\">\r\n                    <div class=\"viewerAddLayerLabel\">Type:</div>\r\n                    <select data-dojo-type=\"dijit/form/Select\" style=\"width: 100%\"\r\n                            data-dojo-attach-point=\"addLayerTypeSelect\"\r\n                            style=\"width: 15em\"></select>\r\n                </div>\r\n                <div class=\"viewerAddLayerButtonActions\">\r\n                    <div data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:addManualLayer\">Add Layer\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n    <div data-dojo-attach-point=\"layerTocContainer\" data-bind=\"visible:layersListVisible\">\r\n\r\n    </div>\r\n    <div data-bind=\"visible:persistedLayersVisible\" data-dojo-attach-point=\"userPersistedLayersContainer\">\r\n    </div>\r\n</div>","url:dijit/layout/templates/AccordionButton.html":"<div data-dojo-attach-event='ondijitclick:_onTitleClick' class='dijitAccordionTitle' role=\"presentation\">\n\t<div data-dojo-attach-point='titleNode,focusNode' data-dojo-attach-event='onkeydown:_onTitleKeyDown'\n\t\t\tclass='dijitAccordionTitleFocus' role=\"tab\" aria-expanded=\"false\"\n\t\t><span class='dijitInline dijitAccordionArrow' role=\"presentation\"></span\n\t\t><span class='arrowTextUp' role=\"presentation\">+</span\n\t\t><span class='arrowTextDown' role=\"presentation\">-</span\n\t\t><span role=\"presentation\" class=\"dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span>\n\t\t<span role=\"presentation\" data-dojo-attach-point='titleTextNode, textDirNode' class='dijitAccordionText'></span>\n\t</div>\n</div>\n","url:esriviewer/ui/accordion/template/ToolsAccordionTemplate.html":"<div class=\"toolsAccordionContainer fivePixelBorderRadius defaultBoxShadow\">\r\n\r\n</div>","url:esriviewer/ui/window/template/WindowWidgetTemplate.html":"<div class=\"windowContainer defaultBorder fivePixelBorderRadius defaultBoxShadow\">\r\n    <div data-dojo-attach-point=\"windowHeader\" class=\"windowHeader\">\r\n        <div class=\"windowCloseImg windowAction close\" data-dojo-attach-point=\"windowCloseImg\"\r\n             title=\"Close\"></div>\r\n        <div class=\"windowMinimizeImg windowAction minimize\" data-dojo-attach-point=\"windowMinimizeImg\"\r\n             title=\"Minimize\"></div>\r\n        <div data-dojo-attach-point=\"headerMoverContainer\" class=\"headerMoverContainer\">\r\n            <div class=\"windowIcon ${windowIconClass}\" title=\"${windowIconAltText}\"></div>\r\n            <span class=\"windowHeaderText\">${windowHeaderText}</span>\r\n        </div>\r\n    </div>\r\n    <div class=\"windowContentOuter\" data-dojo-attach-point=\"windowContentOuter\">\r\n        <div data-dojo-attach-point=\"windowContent\" class=\"windowContent\">\r\n            <div data-dojo-attach-point=\"windowLoadingThrobber\" class=\"windowLoadingThrobber\"></div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n</div>","url:esriviewer/ui/messaging/template/MessagingWidgetTemplate.html":"<div class=\"defaultBorder defaultBackground statusMessageContainer threePixelBorderRadius defaultBoxShadow\"\r\n     data-bind=\"visible:visible\">\r\n    <div class=\"commonIcons16 infoBlock messagingIcon\"></div>\r\n    <div class=\"statusDivInner threePixelBorderRadius\">\r\n        <div class=\"statusDivMessage\" data-bind=\"text:message\"></div>\r\n    </div>\r\n</div>","url:esriviewer/ui/draw/configure/geometry/template/ConfigureLineTemplate.html":"<div class=\"configureDrawGeometryContainer\">\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Line Style</span>\r\n        <select data-bind=\"options: lineStyles ,value:selectedLineStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Width</span>\r\n        <select data-bind=\"options: lineWidths ,value:selectedWidth\"></select>\r\n    </div>\r\n    <div data-dojo-attach-point=\"transparencySliderContainer\"></div>\r\n\r\n    <div class=\"configureDrawColorPickerContainer\" data-dojo-attach-point=\"colorPickerContainer\"></div>\r\n</div>","url:esriviewer/ui/zoomin/template/ZoomInWidgetTemplate.html":"<div>\r\n    <div class=\"zoomWidgetButton defaultBorder fivePixelBorderRadius\" data-dojo-attach-event=\"click: zoomOut\"\r\n         data-dojo-attach-point=\"zoomOutButton\">\r\n        <div class=\"zoomWidgetIcon zoomOutIcon\"></div>\r\n    </div>\r\n    <div class=\"zoomWidgetButton defaultBorder fivePixelBorderRadius\" data-dojo-attach-event=\"click: zoomIn\"\r\n         data-dojo-attach-point=\"zoomInButton\">\r\n        <div class=\"zoomWidgetIcon zoomInIcon\"></div>\r\n    </div>\r\n\r\n</div>","url:dijit/templates/MenuSeparator.html":"<tr class=\"dijitMenuSeparator\" role=\"separator\">\n\t<td class=\"dijitMenuSeparatorIconCell\">\n\t\t<div class=\"dijitMenuSeparatorTop\"></div>\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\n\t</td>\n\t<td colspan=\"3\" class=\"dijitMenuSeparatorLabelCell\">\n\t\t<div class=\"dijitMenuSeparatorTop dijitMenuSeparatorLabel\"></div>\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\n\t</td>\n</tr>\n","url:dijit/templates/CheckedMenuItem.html":"<tr class=\"dijitReset dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"${role}\" tabIndex=\"-1\" aria-checked=\"${checked}\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<span class=\"dijitInline dijitIcon dijitMenuItemIcon dijitCheckedMenuItemIcon\" data-dojo-attach-point=\"iconNode\"></span>\n\t\t<span class=\"dijitMenuItemIconChar dijitCheckedMenuItemIconChar\">${checkedChar}</span>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode,labelNode,textDirNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">&#160;</td>\n</tr>\n","url:esriviewer/ui/draw/base/template/GraphicsListingTemplate.html":"<div>\r\n    <div class=\"addGraphicsActionsContainer\" data-dojo-attach-point=\"addGraphicsActionsContainer\">\r\n        <div class=\"graphicsListRightIcon commonIcons16 disk\" title=\"Save Graphics\"\r\n             data-bind=\"click:toggleSaveGraphics, visible:saveGraphicsIconVisible\"></div>\r\n        <div class=\"graphicsListLeftIcon commonIcons16 layerHide\" title=\"Toggle Graphics\"\r\n             data-bind=\"click:toggleAllGraphics, css:{layerShow: allGraphicsVisible}\"></div>\r\n        <div class=\"graphicsListLeftIcon commonIcons16 trash\" title=\"Remove All Graphics\"\r\n             data-dojo-attach-event=\"onclick:showConfirmRemoveAllTooltip\"\r\n             data-dojo-attach-point=\"removeAllGraphicsIcon\"\r\n                ></div>\r\n    </div>\r\n    <div class=\"saveGraphicsInputContainer\" data-bind=\"visible: saveGraphicsInputVisible\">\r\n        <input data-dojo-type=\"dijit/form/TextBox\" data-dojo-attach-event=\"onKeyUp: handleSaveGraphicsKeyUp\" data-dojo-attach-point=\"userSaveGraphicsNameInput\" placeholder=\"Enter A Label...\"/>\r\n        <span data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:handleSaveGraphics\">Save</span>\r\n    </div>\r\n\r\n    <div class=\"addedGraphicsListContainer\" data-dojo-attach-point=\"addedGraphicsListContainer\">\r\n        <ul data-dojo-attach-point=\"addedGraphicsList\" class=\"viewerList\" data-bind=\"foreach: addedGraphics\">\r\n            <li class=\"graphicsListEntry\">\r\n                <div title=\"Pan And Flash Graphic\"\r\n                     class=\"viewerListGenericIcon commonIcons16 magnifyingGlass\"\r\n                     data-bind=\"click:$parent.zoomToGraphic\"></div>\r\n                <div title=\"Remove Graphic\" class=\"viewerListEntryRemoveIcon commonIcons16 remove\"\r\n                     data-bind=\"click:$parent.removeGraphic\"></div>\r\n                <span class=\"graphicsListEntryLabel\" data-bind=\"text: $data.label\"></span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>","url:esriviewer/ui/layers/base/template/UserPersistedLayersListingTemplate.html":"<div>\r\n    <div class=\"userPersistsedLayersClearContainer\" data-bind=\"visible: hasEntries\">\r\n        <div class=\"userPersistsedLayersClearLbl\" data-bind=\"click:clearEntries\">Clear Entries</div>\r\n    </div>\r\n    <div class=\"addedUserPersistedLayersListContainer\" data-dojo-attach-point=\"addedUserPersistedGraphicsListContainer\">\r\n        <ul class=\"viewerList\" data-bind=\"foreach: addedUserPersistedLayers\">\r\n            <li class=\"graphicsListEntry\">\r\n                <div title=\"Delete Layer\" class=\"viewerListEntryRemoveIcon commonIcons16 remove\"\r\n                     data-bind=\"click:$parent.removeUserPersistedLayer\"></div>\r\n                <div title=\"Add Layer To Map\" class=\"viewerListGenericIcon commonIcons16 layerShow\"\r\n                     data-bind=\"click:$parent.addPersistedLayerToMap\"></div>\r\n                <span class=\"graphicsListEntryLabel\" data-bind=\"text: $data.name\"></span>\r\n\r\n                <div data-bind=\"css: $parent.persistedLayerInfoIconClass, attr:{title:$data.url}\"></div>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>","url:esriviewer/ui/throbber/template/ThrobberTemplate.html":"<div class=\"loadingThrobber\"\r\n     style=\"display:none\">\r\n    <div class=\"loadingThrobberInner\">\r\n        <div class=\"loadingIcon\"></div>\r\n    </div>\r\n</div>","url:dijit/templates/ColorPalette.html":"<div class=\"dijitInline dijitColorPalette\" role=\"grid\">\n\t<table dojoAttachPoint=\"paletteTableNode\" class=\"dijitPaletteTable\" cellSpacing=\"0\" cellPadding=\"0\" role=\"presentation\">\n\t\t<tbody data-dojo-attach-point=\"gridNode\"></tbody>\n\t</table>\n</div>\n","url:esriviewer/ui/footer/template/FooterTogglerTemplate.html":"<div class=\"footerWidget\" data-dojo-attach-point=\"footerWidget\" data-bind=\"css:{footerExpanded: expanded() == true, footerCollapsed: expanded() != true}\">\r\n    <div class=\"footerExpanderContent headerFooterBg\" data-dojo-attach-point=\"footerExpanderContent\"  data-dojo-attach-event=\"onclick:toggle\">\r\n        <div class=\"footerTogglerArrow\" data-dojo-attach-point=\"footerTogglerArrow\" data-bind=\"css:{footerTogglerDown: expanded() == true, footerTogglerUp: expanded() != true}\"></div>\r\n    </div>\r\n    <div data-dojo-attach-point=\"footerContent\"></div>\r\n</div>","url:esriviewer/ui/draw/configure/geometry/template/ConfigurePolygonTemplate.html":"<div class=\"configureDrawGeometryContainer\">\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Fill Style</span>\r\n        <select data-bind=\"options: fillStyles ,value:selectedFillStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Outline Style</span>\r\n        <select data-bind=\"options: outlineStyles ,value:selectedOutlineStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Outline Width</span>\r\n        <select data-bind=\"options: outlineWidths ,value:selectedOutlineWidth\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Angle</span>\r\n        <select data-bind=\"options: angles ,value:selectedAngle\"></select>\r\n    </div>\r\n    <div data-dojo-attach-point=\"transparencySliderContainer\"></div>\r\n\r\n    <div class=\"colorPickerTextContainer\">\r\n        <span class=\"colorPickerText\"\r\n              data-bind=\"click: setOutlineColorMode,css:{colorPickerTextSelected: outlineColorActive}\"> Outline Color</span>\r\n        <span class=\"colorPickerText\"\r\n              data-bind=\"click: setFillColorMode,css:{colorPickerTextSelected: fillColorActive}\"> Fill Color</span>\r\n\r\n    </div>\r\n\r\n\r\n    <div class=\"configureDrawColorPickerContainer\" data-dojo-attach-point=\"colorPickerContainer\"></div>\r\n</div>","url:dijit/templates/Tree.html":"<div role=\"tree\">\n\t<div class=\"dijitInline dijitTreeIndent\" style=\"position: absolute; top: -9999px\" data-dojo-attach-point=\"indentDetector\"></div>\n\t<div class=\"dijitTreeExpando dijitTreeExpandoLoading\" data-dojo-attach-point=\"rootLoadingIndicator\"></div>\n\t<div data-dojo-attach-point=\"containerNode\" class=\"dijitTreeContainer\" role=\"presentation\">\n\t</div>\n</div>\n","url:esriviewer/ui/draw/configure/geometry/template/ConfigurePointTemplate.html":"<div class=\"configureDrawGeometryContainer\">\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Marker Style</span>\r\n        <select data-bind=\"options: markerStyles ,value:selectedMarkerStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Marker Size</span>\r\n        <select data-bind=\"options: markerSizes ,value:selectedMarkerSize\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Outline Style</span>\r\n        <select data-bind=\"options: outlineStyles ,value:selectedOutlineStyle, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Outline Width</span>\r\n        <select data-bind=\"options: outlineWidths ,value:selectedOutlineWidth\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Angle</span>\r\n        <select data-bind=\"options: angles ,value:selectedAngle\"></select>\r\n    </div>\r\n    <div data-dojo-attach-point=\"transparencySliderContainer\"></div>\r\n    <div class=\"colorPickerTextContainer\">\r\n        <span class=\"colorPickerText\"\r\n              data-bind=\"click: setMarkerColorMode,css:{colorPickerTextSelected: markerColorActive}\"> Marker Color</span>\r\n        <span class=\"colorPickerText\"\r\n              data-bind=\"click: setOutlineColorMode,css:{colorPickerTextSelected: outlineColorActive}\"> Outline Color</span>\r\n\r\n    </div>\r\n\r\n    <div class=\"configureDrawColorPickerContainer\" data-dojo-attach-point=\"colorPickerContainer\"></div>\r\n</div>","url:dijit/form/templates/Select.html":"<table class=\"dijit dijitReset dijitInline dijitLeft\"\n\tdata-dojo-attach-point=\"_buttonNode,tableNode,focusNode,_popupStateNode\" cellspacing='0' cellpadding='0'\n\trole=\"listbox\" aria-haspopup=\"true\"\n\t><tbody role=\"presentation\"><tr role=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonContents\" role=\"presentation\"\n\t\t\t><div class=\"dijitReset dijitInputField dijitButtonText\"  data-dojo-attach-point=\"containerNode,textDirNode\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitValidationContainer\"\n\t\t\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t/></div\n\t\t\t><input type=\"hidden\" ${!nameAttrSetting} data-dojo-attach-point=\"valueNode\" value=\"${value}\" aria-hidden=\"true\"\n\t\t/></td\n\t\t><td class=\"dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\"\n\t\t\tdata-dojo-attach-point=\"titleNode\" role=\"presentation\"\n\t\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t${_buttonInputDisabled}\n\t\t/></td\n\t></tr></tbody\n></table>\n","undefined":undefined,"url:dijit/templates/MenuItem.html":"<tr class=\"dijitReset dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<span role=\"presentation\" class=\"dijitInline dijitIcon dijitMenuItemIcon\" data-dojo-attach-point=\"iconNode\"></span>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode,textDirNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">\n\t\t<span data-dojo-attach-point=\"arrowWrapper\" style=\"visibility: hidden\">\n\t\t\t<span class=\"dijitInline dijitIcon dijitMenuExpand\"></span>\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</span>\n\t</td>\n</tr>\n","url:esriviewer/ui/basemap/template/BasemapGalleryTemplate.html":"<div data-bind=\"visible: visible\" class=\"defaultBackground basemapGalleryContainer\">\r\n    <div data-dojo-attach-point=\"basemapGalleryContents\"></div>\r\n</div>","url:esriviewer/ui/draw/configure/geometry/template/ConfigureTextTemplate.html":"<div class=\"configureDrawGeometryContainer\">\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Font Face</span>\r\n        <select data-bind=\"options: fontFaces ,value:selectedFontFace, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Text Align</span>\r\n        <select data-bind=\"options: textAligns ,value:selectedTextAlign, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Weight</span>\r\n        <select data-bind=\"options: textWeights ,value:selectedTextWeight, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Size</span>\r\n        <select data-bind=\"options: textSizes ,value:selectedTextSize, optionsText: 'label', optionsValue: 'value'\"></select>\r\n    </div>\r\n    <div class=\"annotationOptionContainer\">\r\n        <span class=\"annotationsOptionsLabel\">Angle</span>\r\n        <select data-bind=\"options: angles ,value:selectedAngle\"></select>\r\n    </div>\r\n    <div class=\"configureDrawColorPickerContainer\" data-dojo-attach-point=\"colorPickerContainer\"></div>\r\n\r\n</div>","url:esriviewer/ui/draw/base/template/UserPersistedGrahicsListingTemplate.html":"<div>\r\n    <div class=\"addedUserPersistedGraphicsListContainer\" data-dojo-attach-point=\"addedUserPersistedGraphicsListContainer\">\r\n        <ul data-dojo-attach-point=\"addedGraphicsList\" class=\"viewerList\" data-bind=\"foreach: addedUserPersistedGraphics\">\r\n            <li class=\"graphicsListEntry\">\r\n                <div title=\"Delete Saved Graphics\" class=\"viewerListEntryRemoveIcon commonIcons16 remove\" data-bind=\"click:$parent.removeUserPersistedGraphic\"></div>\r\n                <div title=\"Add Saved Graphics To Map\" class=\"viewerListGenericIcon commonIcons16 layerShow\" data-bind=\"click:$parent.addSavedGraphics\"></div>\r\n                <span class=\"graphicsListEntryLabel\" data-bind=\"text: $data.label\"></span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>","url:esriviewer/ui/draw/configure/template/ConfigureDrawTemplate.html":"<div>\r\n    <div data-bind=\"visible:showConfigureGeometryIcons\" data-dojo-attach-point=\"annotationOptionsButtons\" class=\"annotationOptionButtons\">\r\n        <div title=\"Set Point Symbol\"\r\n             data-bind=\"click: showPointConfiguration, css:{pointSelected: pointConfigurationActive}\"\r\n             class=\"annotationOptionButton pointUnselected\"></div>\r\n        <div title=\"Set Line Symbol\"\r\n             data-bind=\"click: showLineConfiguration, css:{polylineSelected: lineConfigurationActive}\"\r\n                    class=\"annotationOptionButton polylineUnselected\"></div>\r\n        <div title=\"Set Polygon Symbol\"\r\n             data-bind=\"click: showPolygonConfiguration, css:{polygonSelected: polygonConfigurationActive}\"\r\n             class=\"annotationOptionButton polygonUnselected\"></div>\r\n        <div title=\"Set Rectangle Symbol\"\r\n             data-bind=\"visible: showEnvelopeIcon, click: showRectangleConfiguration, css:{rectangleSelected: rectangleConfigurationActive}\"\r\n             class=\"annotationOptionButton rectangleUnselected\"></div>\r\n        <div title=\"Set Text Symbol\"\r\n             data-bind=\"visible: showTextIcon, click: showTextConfiguration, css:{textSelected: textConfigurationActive}\"\r\n             class=\"annotationOptionButton textUnselected\"></div>\r\n    </div>\r\n    <div data-dojo-attach-point=\"configurePointWidgetContainer\" data-bind=\"visible:pointConfigurationActive\"></div>\r\n    <div data-dojo-attach-point=\"configureLineWidgetContainer\" data-bind=\"visible:lineConfigurationActive\"></div>\r\n    <div data-dojo-attach-point=\"configureRectangleWidgetContainer\" data-bind=\"visible:rectangleConfigurationActive\"></div>\r\n    <div data-dojo-attach-point=\"configurePolygonWidgetContainer\" data-bind=\"visible:polygonConfigurationActive\"></div>\r\n\r\n    <div data-dojo-attach-point=\"configureTextWidgetContainer\" data-bind=\"visible:textConfigurationActive\"></div>\r\n\r\n</div>","url:dijit/form/templates/HorizontalSlider.html":"<table class=\"dijit dijitReset dijitSlider dijitSliderH\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" rules=\"none\" data-dojo-attach-event=\"onkeydown:_onKeyDown, onkeyup:_onKeyUp\"\n\trole=\"presentation\"\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td data-dojo-attach-point=\"topDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\n\t\t\t><div class=\"dijitSliderDecrementIconH\" style=\"display:none\" data-dojo-attach-point=\"decrementButton\"><span class=\"dijitSliderButtonInner\">-</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper\" data-dojo-attach-event=\"press:_onClkDecBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><input data-dojo-attach-point=\"valueNode\" type=\"hidden\" ${!nameAttrSetting}\n\t\t\t/><div class=\"dijitReset dijitSliderBarContainerH\" role=\"presentation\" data-dojo-attach-point=\"sliderBarContainer\"\n\t\t\t\t><div role=\"presentation\" data-dojo-attach-point=\"progressBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH\" data-dojo-attach-event=\"press:_onBarClick\"\n\t\t\t\t\t><div class=\"dijitSliderMoveable dijitSliderMoveableH\"\n\t\t\t\t\t\t><div data-dojo-attach-point=\"sliderHandle,focusNode\" class=\"dijitSliderImageHandle dijitSliderImageHandleH\" data-dojo-attach-event=\"press:_onHandleClick\" role=\"slider\"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t\t><div role=\"presentation\" data-dojo-attach-point=\"remainingBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH\" data-dojo-attach-event=\"press:_onBarClick\"></div\n\t\t\t></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper\" data-dojo-attach-event=\"press:_onClkIncBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\n\t\t\t><div class=\"dijitSliderIncrementIconH\" style=\"display:none\" data-dojo-attach-point=\"incrementButton\"><span class=\"dijitSliderButtonInner\">+</span></div\n\t\t></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td data-dojo-attach-point=\"containerNode,bottomDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n></table>\n","url:esriviewer/ui/layers/template/LayersTocWidgetTemplate.html":"<div>\r\n    <div class=\"tocRightClickLbl\">Right click for actions</div>\r\n    <div data-dojo-attach-point=\"tocContainer\" class=\"tocContainer\">\r\n\r\n\r\n    </div>\r\n</div>","url:dijit/form/templates/CheckBox.html":"<div class=\"dijit dijitReset dijitInline\" role=\"presentation\"\n\t><input\n\t \t${!nameAttrSetting} type=\"${type}\" role=\"${type}\" aria-checked=\"false\" ${checkedAttrSetting}\n\t\tclass=\"dijitReset dijitCheckBoxInput\"\n\t\tdata-dojo-attach-point=\"focusNode\"\n\t \tdata-dojo-attach-event=\"ondijitclick:_onClick\"\n/></div>\n","url:esriviewer/ui/logging/template/LoggingWidgetTemplate.html":"<div class=\"loggingWidgetContainer\">\r\n    <div class=\"windowActions\">\r\n        <div class=\"loggingWidgetActionContainerToggleEntry\">\r\n            <div class=\"commonIcons16 information loggingWidgetActionDisplayToggleIcon\"></div>\r\n            <input type=\"checkbox\" data-bind=\"checked:infoDisplayed\"\r\n                   title=\"Toggle Info Messages\"\r\n                   class=\"loggingWidgetActionDisplayCheckbox\"/>\r\n        </div>\r\n        <div class=\"loggingWidgetActionContainerToggleEntry\">\r\n            <div class=\"commonIcons16 warning loggingWidgetActionDisplayToggleIcon\"></div>\r\n            <input type=\"checkbox\" data-bind=\"checked:warningDisplayed\"\r\n                   title=\"Toggle Warning Messages\"\r\n                   class=\"loggingWidgetActionDisplayCheckbox\"/>\r\n        </div>\r\n        <div class=\"loggingWidgetActionContainerToggleEntry\">\r\n            <div class=\"commonIcons16 error loggingWidgetActionDisplayToggleIcon\"></div>\r\n            <input type=\"checkbox\" data-bind=\"checked:errorDisplayed\"\r\n                   title=\"Toggle Error Messages\"\r\n                   class=\"loggingWidgetActionDisplayCheckbox\"/>\r\n\r\n        </div>\r\n        <div class=\"commonIcons16 deleteCross loggingWidgetActionClearIcon\" data-bind=\"visible: hasLogEntries\"\r\n             data-dojo-attach-point=\"clearLogIcon\"\r\n             data-dojo-attach-event=\"onclick: _showConfirmLogTooltip\"></div>\r\n    </div>\r\n    <ul class=\"loggingWidgetEntryList\"\r\n        data-bind=\"foreach: filteredEntries\">\r\n        <li class=\"loggingInfoMessage\" data-bind=\"css: $data.messageStyleClass\">\r\n            <span class=\"loggingMessageTimestamp\"><span>(</span><span\r\n                data-bind=\"text: $data.time\"></span><span>)</span></span>\r\n            <div class=\"loggingWidgetTypeIcon commonIcons16\" data-bind=\"css: $data.iconClass\" style=\"cursor: default\"></div>\r\n            <span class=\"loggingMessageText\" data-bind=\"text:$data.message\"></span>\r\n        </li>\r\n    </ul>\r\n</div>","url:esriviewer/ui/navigation/template/NavigationWidgetTemplate.html":"<div data-bind=\"visible: visible\" class=\"navigationHorizontalWidgetContainer\">\r\n    <div class=\"navigationTextToolbarHorizontal\">\r\n        <div class=\"navigationTextToolbarHorizontalInner\" data-dojo-attach-point=\"navigationToolbar\">\r\n        </div>\r\n    </div>\r\n</div>\r\n","url:esriviewer/ui/measure/template/MeasureWidgetTemplate.html":"<div class=\"measurementWidget\">\r\n    <div class=\"measureIcon areaIcon\"\r\n         title=\"Area\"\r\n         data-bind=\"click:handleAreaButtonClick, css: {measurementIconSelected: areaActive}\"></div>\r\n    <div class=\"measureIcon distanceIcon\"\r\n         title=\"Distance\"\r\n         data-bind=\"click:handleDistanceButtonClick, css: {measurementIconSelected: distanceActive}\"></div>\r\n    <div class=\"measureIcon locationIcon\"\r\n         title=\"Location\"\r\n         data-bind=\"click:handleLocationButtonClick, css: {measurementIconSelected: locationActive}\"></div>\r\n    <div class=\"measurementSpacer\">|</div>\r\n    <select data-bind=\"visible: areaActive, options: areaMeasurementUnits ,value:selectedAreaUnits, optionsText: 'label', optionsValue: 'value'\">\r\n    </select>\r\n    <select data-bind=\"visible: distanceActive, options: distanceMeasurementUnits ,value:selectedDistanceUnits, optionsText: 'label', optionsValue: 'value'\">\r\n    </select>\r\n    <select data-bind=\"visible: locationActive, options: locationUnits ,value:selectedLocationUnits, optionsText: 'label', optionsValue: 'value'\">\r\n    </select>\r\n\r\n\r\n    <div class=\"measurementResultsContainer\">\r\n        <span data-bind=\"text: measureMethodText\" class=\"measureMethodText\"></span>\r\n        <span data-bind=\"text: resultsText\" class=\"measureResultsText\"></span>\r\n        <span data-bind=\"text: unitsText\"  class=\"measureUnitsText\"></span>\r\n    </div>\r\n</div>","*now":function(r){r(["dojo/i18n!*preload*esriviewer/nls/esriviewer*[\"ar\",\"ca\",\"cs\",\"da\",\"de\",\"el\",\"en-gb\",\"en-us\",\"es-es\",\"fi-fi\",\"fr-fr\",\"he-il\",\"hu\",\"it-it\",\"ja-jp\",\"ko-kr\",\"nl-nl\",\"nb\",\"pl\",\"pt-br\",\"pt-pt\",\"ru\",\"sk\",\"sl\",\"sv\",\"th\",\"tr\",\"zh-tw\",\"zh-cn\",\"ROOT\"]"]);}}});define("esriviewer/esriviewer",[],1);