//>>built
require({cache:{"url:esriviewer/ui/accordion/template/ToolsAccordionTemplate.html":"<div class=\"toolsAccordionContainer fivePixelBorderRadius defaultBoxShadow\">\r\n\r\n</div>"}});define("esriviewer/ui/accordion/ToolsAccordion",["dojo/_base/declare","dojo/text!./template/ToolsAccordionTemplate.html","dojo/topic","dojo/_base/lang","dojo/on","dijit/layout/AccordionContainer","dojo/dom-style","dojo/dom-class","dojo/dom-attr","dojo/dom-construct","dojo/dnd/Moveable","../base/UITemplatedWidget"],function(_1,_2,_3,_4,on,_5,_6,_7,_8,_9,_a,_b){return _1([_b],{templateString:_2,isPositionedByConfig:true,positionForHeader:false,headerVisiblePositioning:{x:75,y:125},defaultPositioning:{x:75,y:100},allowCollapse:true,movable:false,isFirstAddedItem:true,showOnLoad:true,positioningParamName:"accordion",returnToOriginOnShow:true,constructor:function(){this.accordion=new _5();_7.add(this.accordion.domNode,"toolsAccordion");this.visible=true;},postCreate:function(){this.inherited(arguments);if(this.allowCollapse){this.addMinimizeIcon();}_9.place(this.accordion.domNode,this.domNode);_3.publish(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.LOAD_DEFAULT_TOOLS);if(!this.showOnLoad){this.hide();}if(this.positionForHeader){this.creationPositioning.x=this.headerVisiblePositioning.x;this.creationPositioning.y=this.headerVisiblePositioning.y;}this.returnToOrigin();},loadViewerConfigurationData:function(){var _c=null;_3.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"toolsAccordion",function(_d){_c=_d;});if(_c&&_c.showOnLoad!=null){this.showOnLoad=_c.showOnLoad;}var _e;_3.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"header",function(_f){_e=_f;});if(_e!=null&&_4.isObject(_e)){this.positionForHeader=_e.display===true&&_e.small===false;}},initMover:function(){var _10=_9.create("div",{title:"Move",className:"accordionMoveIcon accordionAction move"});_9.place(_10,this.domNode);this.mover=new _a(this.domNode,{handle:_10});this.mover.on("move",_4.hitch(VIEWER_UTILS,VIEWER_UTILS.handleContainerMoved));},placeAt:function(_11){_9.place(this.domNode,_11);if(this.toolsAccordionActions){_9.place(this.toolsAccordionActions,_11);}if(this.movable){this.initMover();}},addMinimizeIcon:function(){if(this.minimizeIconElement==null){this.minimizeIconElement=_9.create("div",{title:"Minimize",className:"accordionMimimizeIcon accordionAction minimize"});_9.place(this.minimizeIconElement,this.domNode);on(this.minimizeIconElement,"click",_4.hitch(this,this.hide));if(!this.movable){_6.set(this.minimizeIconElement,"right","5px");}}},addItem:function(_12){_7.add(_12.domNode,"accordionChild");this.accordion.addChild(_12);if(this.isFirstAddedItem){this.isFirstAddedItem=false;this.selectedChild=_12;}},initListeners:function(){this.inherited(arguments);_3.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.TOGGLE,_4.hitch(this,this.toggle));_3.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.SHOW,_4.hitch(this,this.show));_3.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.HIDE,_4.hitch(this,this.hide));_3.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.ADD_ITEM,_4.hitch(this,this.addItem));},startup:function(){this.accordion.startup();},destroy:function(){if(this.imageryDisplayWidget){this.imageryDisplayWidget.destroy();}if(this.imageryQueryFilterManager){this.imageryQueryFilterManager.destroy();}},toggle:function(){if(this.visible){this.hide();}else{this.show();}},show:function(){_6.set(this.domNode,"display","block");this.visible=true;if(this.toolsAccordionActions){_8.set(this.toolsAccordionActions,"title","Collapse Tools");if(!_7.contains(this.toolsAccordionActions,"toolsAccordionCollapserExpanded")){_7.add(this.toolsAccordionActions,"toolsAccordionCollapserExpanded");}_7.remove(this.toolsAccordionActions,"toolsAccordionCollapserCollapsed");}if(this.returnToOriginOnShow){this.returnToOrigin();}},returnToOrigin:function(){_6.set(this.domNode,this.creationPositioning.alignX,this.creationPositioning.x+"px");_6.set(this.domNode,this.creationPositioning.alignY,this.creationPositioning.y+"px");},hide:function(){_6.set(this.domNode,"display","none");this.visible=false;if(this.toolsAccordionActions){_8.set(this.toolsAccordionActions,"title","Show Tools");if(!_7.contains(this.toolsAccordionActions,"toolsAccordionCollapserCollapsed")){_7.add(this.toolsAccordionActions,"toolsAccordionCollapserCollapsed");}_7.remove(this.toolsAccordionActions,"toolsAccordionCollapserExpanded");}_3.publish(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.HIDE_COMPLETE);},toggleVisibility:function(){if(this.visible){this.hide();}else{this.show();}},selectChild:function(_13){this.accordion.selectChild(_13);this.selectedChild=_13;}});});