//>>built
require({cache:{"url:esriviewer/ui/accordion/template/ToolsAccordionTemplate.html":"<div class=\"toolsAccordionContainer fivePixelBorderRadius defaultBoxShadow\">\r\n\r\n</div>"}});define("esriviewer/ui/accordion/ToolsAccordion",["dojo/_base/declare","dojo/text!./template/ToolsAccordionTemplate.html","dojo/topic","dojo/_base/lang","dojo/on","dijit/layout/AccordionContainer","dojo/dom-style","dojo/dom-class","dojo/dom-attr","dojo/dom-construct","dojo/dnd/Moveable","../base/UITemplatedWidget","dojo/_base/connect"],function(_1,_2,_3,_4,on,_5,_6,_7,_8,_9,_a,_b,_c){return _1([_b],{templateString:_2,isPositionedByConfig:true,positionForHeader:false,headerVisiblePositioning:{x:75,y:145},defaultPositioning:{x:75,y:100},allowCollapse:true,movable:false,isFirstAddedItem:true,showOnLoad:true,positioningParamName:"accordion",returnToOriginOnShow:true,constructor:function(){this.accordion=new _5();_7.add(this.accordion.domNode,"toolsAccordion");this.visible=true;},postCreate:function(){this.inherited(arguments);if(this.allowCollapse){this.addMinimizeIcon();}_9.place(this.accordion.domNode,this.domNode);_3.publish(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.LOAD_DEFAULT_TOOLS);if(!this.showOnLoad){this.hide();}if(this.positionForHeader){this.creationPositioning.x=this.headerVisiblePositioning.x;this.creationPositioning.y=this.headerVisiblePositioning.y;}this.returnToOrigin();},loadViewerConfigurationData:function(){var _d=null;_3.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"toolsAccordion",function(_e){_d=_e;});if(_d&&_d.showOnLoad!=null){this.showOnLoad=_d.showOnLoad;}var _f;_3.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"header",function(_10){_f=_10;});if(_f!=null&&_4.isObject(_f)){this.positionForHeader=_f.display===true&&_f.small!=true;}},initMover:function(){var _11=_9.create("div",{title:"Move",className:"accordionMoveIcon accordionAction move"});_9.place(_11,this.domNode);this.mover=new _a(this.domNode,{handle:_11});_c.connect(this.mover,"onMove",VIEWER_UTILS,VIEWER_UTILS.handleContainerMoved);},placeAt:function(_12){_9.place(this.domNode,_12);if(this.toolsAccordionActions){_9.place(this.toolsAccordionActions,_12);}if(this.movable){this.initMover();}},addMinimizeIcon:function(){if(this.minimizeIconElement==null){this.minimizeIconElement=_9.create("div",{title:"Minimize",className:"accordionMimimizeIcon accordionAction minimize"});_9.place(this.minimizeIconElement,this.domNode);on(this.minimizeIconElement,"click",_4.hitch(this,this.hide));if(!this.movable){_6.set(this.minimizeIconElement,"right","5px");}}},addItem:function(_13){_7.add(_13.domNode,"accordionChild");this.accordion.addChild(_13);if(this.isFirstAddedItem){this.isFirstAddedItem=false;this.selectedChild=_13;}},initListeners:function(){this.inherited(arguments);_3.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.TOGGLE,_4.hitch(this,this.toggle));_3.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.SHOW,_4.hitch(this,this.show));_3.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.HIDE,_4.hitch(this,this.hide));_3.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.ADD_ITEM,_4.hitch(this,this.addItem));_3.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.SHOW_ITEM,_4.hitch(this,this.selectChild));},startup:function(){this.accordion.startup();},destroy:function(){if(this.imageryDisplayWidget){this.imageryDisplayWidget.destroy();}if(this.imageryQueryFilterManager){this.imageryQueryFilterManager.destroy();}},toggle:function(){if(this.visible){this.hide();}else{this.show();}},show:function(){_6.set(this.domNode,"display","block");this.visible=true;if(this.toolsAccordionActions){_8.set(this.toolsAccordionActions,"title","Collapse Tools");if(!_7.contains(this.toolsAccordionActions,"toolsAccordionCollapserExpanded")){_7.add(this.toolsAccordionActions,"toolsAccordionCollapserExpanded");}_7.remove(this.toolsAccordionActions,"toolsAccordionCollapserCollapsed");}if(this.returnToOriginOnShow){this.returnToOrigin();}},returnToOrigin:function(){_6.set(this.domNode,this.creationPositioning.alignX,this.creationPositioning.x+"px");_6.set(this.domNode,this.creationPositioning.alignY,this.creationPositioning.y+"px");},hide:function(){_6.set(this.domNode,"display","none");this.visible=false;if(this.toolsAccordionActions){_8.set(this.toolsAccordionActions,"title","Show Tools");if(!_7.contains(this.toolsAccordionActions,"toolsAccordionCollapserCollapsed")){_7.add(this.toolsAccordionActions,"toolsAccordionCollapserCollapsed");}_7.remove(this.toolsAccordionActions,"toolsAccordionCollapserExpanded");}_3.publish(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.HIDE_COMPLETE);},toggleVisibility:function(){if(this.visible){this.hide();}else{this.show();}},selectChild:function(_14){this.accordion.selectChild(_14);this.selectedChild=_14;}});});