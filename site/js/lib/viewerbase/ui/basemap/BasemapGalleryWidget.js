//>>built
require({cache:{"url:esriviewer/ui/basemap/template/BasemapGalleryTemplate.html":"<div data-bind=\"visible: visible\" class=\"defaultBackground basemapGalleryContainer\">\r\n    <div data-dojo-attach-point=\"basemapGalleryContents\"></div>\r\n</div>"}});define("esriviewer/ui/basemap/BasemapGalleryWidget",["dojo/_base/declare","dojo/text!./template/BasemapGalleryTemplate.html","dojo/_base/lang","dojo/_base/connect","dojo/topic","dojo/_base/window","dojo/dom-class","dojo/dom-construct","../base/UITemplatedWidget","./model/BasemapGalleryViewModel","esri/dijit/BasemapGallery","esri/arcgis/utils"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c){return _1([_9],{animateOnPlace:false,usePortalBasemaps:false,animate:true,templateString:_2,constructor:function(){this.animation=VIEWER_GLOBALS.ANIMATIONS.FADE.IN;},initListeners:function(){_5.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.TOGGLE,_3.hitch(this,this.handleToggleBasemapGallery));_5.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.SHOW,_3.hitch(this,this.handleShowBasemapGallery));_5.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.HIDE,_3.hitch(this,this.handleHideBasemapGallery));_5.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.IS_HIDDEN,_3.hitch(this,this.handleBasemapGalleryIsHidden));_5.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.GET,_3.hitch(this,this.handleGetBasemapGallery));},handleGetBasemapGallery:function(_d){if(_d!=null&&_3.isFunction(_d)){_d(this.basemapGallery);}},loadViewerConfigurationData:function(){var _e;_5.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_f){_e=_f;});if(_e){if(_e.useConfiguredPortalBasemaps!=null){this.usePortalBasemaps=_e.useConfiguredPortalBasemaps;}}var _10=null;_5.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"animationsEnabled",function(_11){_10=_11;});if(_10!=null){this.animate=_10;}},handleBasemapGalleryIsHidden:function(_12){if(_12!=null&&_3.isFunction(_12)){_12(!this.viewModel.visible());}},handleHideBasemapGallery:function(){if(this.viewModel.visible()){this.viewModel.visible(false);if(this.animate){this._removeAnimationClasses();}}},handleShowBasemapGallery:function(){if(!this.viewModel.visible()){this.viewModel.visible(true);if(this.animate){this._animateWidget();}}},handleToggleBasemapGallery:function(){if(!this.viewModel.visible()){this.handleShowBasemapGallery();}else{this.handleHideBasemapGallery();}},postCreate:function(){this.inherited(arguments);this.viewModel=new _a();ko.applyBindings(this.viewModel,this.domNode);_5.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.BASEMAP_GALLERY,this);var map;dojo.publish(VIEWER_GLOBALS.EVENTS.MAP.GET,function(_13){map=_13;});var _14={map:map,showArcGISBasemaps:true};var _15;_5.publish(VIEWER_GLOBALS.EVENTS.PORTAL.GET_INSTANCE,function(_16){_15=_16;});if(this.usePortalBasemaps&&_15){var _17;_5.publish(VIEWER_GLOBALS.EVENTS.PORTAL.GET_BASEMAPS,_3.hitch(this,function(_18){_17=_18;if(_17&&_17.length>0){_14.showArcGISBasemaps=false;_14.basemaps=_17;}this._initGallery(_14);}));}else{this._initGallery(_14);}},_initGallery:function(_19){this.basemapGallery=new _b(_19,this.basemapGalleryContents);this.basemapGallery.on("load",_3.hitch(this,this.handleBasemapGalleryLoaded));_4.connect(this.basemapGallery,"onSelectionChange",_3.hitch(this,this.handleBasemapSelectionChanged));this.basemapGallery.startup();},handleBasemapSelectionChanged:function(){this.handleHideBasemapGallery();_5.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.CHANGED);},handleBasemapGalleryLoaded:function(){}});});