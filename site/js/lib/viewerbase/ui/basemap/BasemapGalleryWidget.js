//>>built
require({cache:{"url:esriviewer/ui/basemap/template/BasemapGalleryTemplate.html":"<div data-bind=\"visible: visible\" class=\"defaultTransparentBackground basemapGalleryContainer\">\r\n    <div data-dojo-attach-point=\"basemapGalleryContents\"></div>\r\n</div>"}});define("esriviewer/ui/basemap/BasemapGalleryWidget",["dojo/_base/declare","dojo/text!./template/BasemapGalleryTemplate.html","dojo/_base/lang","dojo/topic","dojo/_base/window","dojo/dom-class","dojo/dom-construct","../base/UITemplatedWidget","./model/BasemapGalleryViewModel","esri/dijit/BasemapGallery","esri/arcgis/utils"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b){return _1([_8],{templateString:_2,constructor:function(){this.portalConfig=null;},initListeners:function(){_4.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.TOGGLE,_3.hitch(this,this.handleToggleBasemapGallery));_4.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.SHOW,_3.hitch(this,this.handleShowBasemapGallery));_4.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.HIDE,_3.hitch(this,this.handleHideBasemapGallery));_4.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.IS_HIDDEN,_3.hitch(this,this.handleBasemapGalleryIsHidden));_4.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.GET,_3.hitch(this,this.handleGetBasemapGallery));},handleGetBasemapGallery:function(_c){if(_c!=null&&_3.isFunction(_c)){_c(this.basemapGallery);}},loadViewerConfigurationData:function(){var _d=null;_4.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"portal",function(_e){_d=_e;});this.portalConfig=_d;},handleBasemapGalleryIsHidden:function(_f){if(_f!=null&&_3.isFunction(_f)){_f(!this.viewModel.visible());}},handleHideBasemapGallery:function(){if(this.viewModel.visible()){this.viewModel.visible(false);}},handleShowBasemapGallery:function(){if(!this.viewModel.visible()){this.viewModel.visible(true);}},handleToggleBasemapGallery:function(){this.viewModel.visible(!this.viewModel.visible());},postCreate:function(){this.inherited(arguments);this.viewModel=new _9();ko.applyBindings(this.viewModel,this.domNode);var map;dojo.publish(VIEWER_GLOBALS.EVENTS.MAP.GET,function(_10){map=_10;});this.basemapGallery=new _a({showArcGISBasemaps:true,map:map},this.basemapGalleryContents);this.basemapGallery.on("load",_3.hitch(this,this.handleBasemapGalleryLoaded));this.basemapGallery.on("selectionChange",_3.hitch(this,this.handleHideBasemapGallery));},placeAt:function(_11){this.inherited(arguments);},handleBasemapGalleryLoaded:function(){},startup:function(){if(this.portalConfig!=null&&_3.isObject(this.portalConfig)&&this.portalConfig.url!=null&&this.portalConfig.url!=""){_b.arcgisUrl=VIEWER_UTILS.joinUrl(this.portalConfig.url,VIEWER_GLOBALS.PORTAL_SHARING_REST_URL_PART);}this.basemapGallery.startup();}});});