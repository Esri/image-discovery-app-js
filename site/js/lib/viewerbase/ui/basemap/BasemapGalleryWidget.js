//>>built
require({cache:{"url:esriviewer/ui/basemap/template/BasemapGalleryTemplate.html":"<div data-bind=\"visible: visible\" class=\"defaultBackground basemapGalleryContainer\">\r\n    <div data-dojo-attach-point=\"basemapGalleryContents\"></div>\r\n</div>"}});define("esriviewer/ui/basemap/BasemapGalleryWidget",["dojo/_base/declare","dojo/text!./template/BasemapGalleryTemplate.html","dojo/_base/lang","dojo/_base/connect","dojo/topic","../base/UITemplatedWidget","./model/BasemapGalleryViewModel","esri/dijit/BasemapGallery","esri/arcgis/utils"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9){return _1([_6],{animateOnPlace:false,usePortalBasemaps:false,animate:true,templateString:_2,constructor:function(){this.animation=VIEWER_GLOBALS.ANIMATIONS.FADE.IN;},initListeners:function(){_5.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.TOGGLE,_3.hitch(this,this.handleToggleBasemapGallery));_5.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.SHOW,_3.hitch(this,this.handleShowBasemapGallery));_5.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.HIDE,_3.hitch(this,this.handleHideBasemapGallery));_5.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.IS_HIDDEN,_3.hitch(this,this.handleBasemapGalleryIsHidden));_5.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.GET,_3.hitch(this,this.handleGetBasemapGallery));},handleGetBasemapGallery:function(_a){if(_a!=null&&_3.isFunction(_a)){_a(this.basemapGallery);}},loadViewerConfigurationData:function(){var _b;_5.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_c){_b=_c;});if(_b){if(_b.useConfiguredPortalBasemaps!=null){this.usePortalBasemaps=_b.useConfiguredPortalBasemaps;}}var _d=null;_5.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"animationsEnabled",function(_e){_d=_e;});if(_d!=null){this.animate=_d;}},handleBasemapGalleryIsHidden:function(_f){if(_f!=null&&_3.isFunction(_f)){_f(!this.viewModel.visible());}},handleHideBasemapGallery:function(){if(this.viewModel.visible()){this.viewModel.visible(false);if(this.animate){this._removeAnimationClasses();}}},handleShowBasemapGallery:function(){if(!this.viewModel.visible()){this.viewModel.visible(true);if(this.animate){this._animateWidget();}}},handleToggleBasemapGallery:function(){if(!this.viewModel.visible()){this.handleShowBasemapGallery();}else{this.handleHideBasemapGallery();}},postCreate:function(){this.inherited(arguments);this.viewModel=new _7();ko.applyBindings(this.viewModel,this.domNode);_5.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.BASEMAP_GALLERY,this);var map;_5.publish(VIEWER_GLOBALS.EVENTS.MAP.GET,function(_10){map=_10;});var _11={map:map,showArcGISBasemaps:true};var _12;_5.publish(VIEWER_GLOBALS.EVENTS.PORTAL.GET_INSTANCE,function(_13){_12=_13;});if(this.usePortalBasemaps&&_12){var _14;_5.publish(VIEWER_GLOBALS.EVENTS.PORTAL.GET_BASEMAPS,_3.hitch(this,function(_15){_14=_15;if(_14&&_14.length>0){_11.showArcGISBasemaps=false;_11.basemaps=_14;}this._initGallery(_11);}));}else{this._initGallery(_11);}},_initGallery:function(_16){this.basemapGallery=new _8(_16,this.basemapGalleryContents);this.basemapGallery.on("load",_3.hitch(this,this.handleBasemapGalleryLoaded));_4.connect(this.basemapGallery,"onSelectionChange",_3.hitch(this,this.handleBasemapSelectionChanged));this.basemapGallery.startup();},handleBasemapSelectionChanged:function(){this.handleHideBasemapGallery();_5.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.CHANGED);},handleBasemapGalleryLoaded:function(){}});});