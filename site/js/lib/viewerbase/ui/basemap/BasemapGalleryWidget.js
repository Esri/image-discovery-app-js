//>>built
require({cache:{"url:esriviewer/ui/basemap/theme/BasemapGalleryTheme.css":".basemapGalleryContainer{max-height:45%;max-width:120px;overflow-x:hidden;overflow-y:auto;margin:auto;padding:10px 25px 0 10px;position:absolute;right:15%;text-align:center;top:41px;z-index:51;}.basemapGalleryContainerHidden{display:none;}.esriBasemapGalleryLabelContainer{font-size:8pt;}","url:esriviewer/ui/basemap/template/BasemapGalleryTemplate.html":"<div data-bind=\"visible: visible\" class=\"defaultBackground basemapGalleryContainer\">\r\n    <div data-dojo-attach-point=\"basemapGalleryContents\"></div>\r\n</div>"}});define("esriviewer/ui/basemap/BasemapGalleryWidget",["dojo/_base/declare","xstyle/css!./theme/BasemapGalleryTheme.css","dojo/text!./template/BasemapGalleryTemplate.html","dojo/_base/lang","dojo/_base/connect","dojo/topic","dojo/_base/window","dojo/dom-class","dojo/dom-construct","../base/UITemplatedWidget","./model/BasemapGalleryViewModel","esri/dijit/BasemapGallery","esri/arcgis/utils"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d){return _1([_a],{animateOnPlace:false,animate:true,templateString:_3,constructor:function(){this.portalConfig=null;this.animation=VIEWER_GLOBALS.ANIMATIONS.FADE.IN;},initListeners:function(){_6.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.TOGGLE,_4.hitch(this,this.handleToggleBasemapGallery));_6.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.SHOW,_4.hitch(this,this.handleShowBasemapGallery));_6.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.HIDE,_4.hitch(this,this.handleHideBasemapGallery));_6.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.IS_HIDDEN,_4.hitch(this,this.handleBasemapGalleryIsHidden));_6.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.GET,_4.hitch(this,this.handleGetBasemapGallery));},handleGetBasemapGallery:function(_e){if(_e!=null&&_4.isFunction(_e)){_e(this.basemapGallery);}},loadViewerConfigurationData:function(){var _f=null;_6.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"portal",function(_10){_f=_10;});this.portalConfig=_f;var _11=null;_6.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"animationsEnabled",function(_12){_11=_12;});if(_11!=null){this.animate=_11;}},handleBasemapGalleryIsHidden:function(_13){if(_13!=null&&_4.isFunction(_13)){_13(!this.viewModel.visible());}},handleHideBasemapGallery:function(){if(this.viewModel.visible()){this.viewModel.visible(false);if(this.animate){this._removeAnimationClasses();}}},handleShowBasemapGallery:function(){if(!this.viewModel.visible()){this.viewModel.visible(true);if(this.animate){this._animateWidget();}}},handleToggleBasemapGallery:function(){if(!this.viewModel.visible()){this.handleShowBasemapGallery();}else{this.handleHideBasemapGallery();}},postCreate:function(){this.inherited(arguments);this.viewModel=new _b();ko.applyBindings(this.viewModel,this.domNode);var map;dojo.publish(VIEWER_GLOBALS.EVENTS.MAP.GET,function(_14){map=_14;});this.basemapGallery=new _c({showArcGISBasemaps:true,map:map},this.basemapGalleryContents);this.basemapGallery.on("load",_4.hitch(this,this.handleBasemapGalleryLoaded));_5.connect(this.basemapGallery,"onSelectionChange",_4.hitch(this,this.handleBasemapSelectionChanged));},handleBasemapSelectionChanged:function(){this.handleHideBasemapGallery();_6.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.CHANGED);},placeAt:function(_15){this.inherited(arguments);},handleBasemapGalleryLoaded:function(){},startup:function(){if(this.portalConfig!=null&&_4.isObject(this.portalConfig)&&this.portalConfig.url!=null&&this.portalConfig.url!=""){_d.arcgisUrl=VIEWER_UTILS.joinUrl(this.portalConfig.url,VIEWER_GLOBALS.PORTAL_SHARING_REST_URL_PART);}this.basemapGallery.startup();}});});