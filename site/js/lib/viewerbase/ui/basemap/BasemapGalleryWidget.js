//>>built
require({cache:{"url:esriviewer/ui/basemap/template/BasemapGalleryTemplate.html":"<div data-bind=\"visible: visible\" class=\"defaultBackground basemapGalleryContainer\">\r\n    <div data-dojo-attach-point=\"basemapGalleryContents\"></div>\r\n</div>"}});define("esriviewer/ui/basemap/BasemapGalleryWidget",["dojo/_base/declare","dojo/text!./template/BasemapGalleryTemplate.html","dojo/_base/lang","dojo/_base/connect","dojo/topic","dojo/_base/window","dojo/dom-class","dojo/dom-construct","../base/UITemplatedWidget","./model/BasemapGalleryViewModel","esri/dijit/BasemapGallery","esri/arcgis/utils"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c){return _1([_9],{templateString:_2,constructor:function(){this.portalConfig=null;},initListeners:function(){_5.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.TOGGLE,_3.hitch(this,this.handleToggleBasemapGallery));_5.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.SHOW,_3.hitch(this,this.handleShowBasemapGallery));_5.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.HIDE,_3.hitch(this,this.handleHideBasemapGallery));_5.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.IS_HIDDEN,_3.hitch(this,this.handleBasemapGalleryIsHidden));_5.subscribe(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.GET,_3.hitch(this,this.handleGetBasemapGallery));},handleGetBasemapGallery:function(_d){if(_d!=null&&_3.isFunction(_d)){_d(this.basemapGallery);}},loadViewerConfigurationData:function(){var _e=null;_5.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"portal",function(_f){_e=_f;});this.portalConfig=_e;},handleBasemapGalleryIsHidden:function(_10){if(_10!=null&&_3.isFunction(_10)){_10(!this.viewModel.visible());}},handleHideBasemapGallery:function(){if(this.viewModel.visible()){this.viewModel.visible(false);}},handleShowBasemapGallery:function(){if(!this.viewModel.visible()){this.viewModel.visible(true);}},handleToggleBasemapGallery:function(){this.viewModel.visible(!this.viewModel.visible());},postCreate:function(){this.inherited(arguments);this.viewModel=new _a();ko.applyBindings(this.viewModel,this.domNode);var map;dojo.publish(VIEWER_GLOBALS.EVENTS.MAP.GET,function(_11){map=_11;});this.basemapGallery=new _b({showArcGISBasemaps:true,map:map},this.basemapGalleryContents);this.basemapGallery.on("load",_3.hitch(this,this.handleBasemapGalleryLoaded));_4.connect(this.basemapGallery,"onSelectionChange",_3.hitch(this,this.handleBasemapSelectionChanged));},handleBasemapSelectionChanged:function(){this.handleHideBasemapGallery();_5.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.CHANGED);},placeAt:function(_12){this.inherited(arguments);},handleBasemapGalleryLoaded:function(){},startup:function(){if(this.portalConfig!=null&&_3.isObject(this.portalConfig)&&this.portalConfig.url!=null&&this.portalConfig.url!=""){_c.arcgisUrl=VIEWER_UTILS.joinUrl(this.portalConfig.url,VIEWER_GLOBALS.PORTAL_SHARING_REST_URL_PART);}this.basemapGallery.startup();}});});