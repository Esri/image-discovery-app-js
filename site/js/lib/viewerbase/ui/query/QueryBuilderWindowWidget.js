//>>built
define("esriviewer/ui/query/QueryBuilderWindowWidget",["dojo/_base/declare","dojo/_base/lang","dojo/topic","dojo/window","dojo/dom-style","dojo/dom-class","../window/WindowWidget","dojox/html/metrics"],function(_1,_2,_3,_4,_5,_6,_7,_8){return _1([_7],{defaultPositioning:{x:400,y:125},pendingQueryLayerCallback:null,minWidth:400,resizable:true,resizeAxis:"xy",windowHeight:"38em",windowHeaderText:"Query Builder",windowIconAltText:"Query Builder",windowIconClass:"commonIcons16 sql",positioningParamName:"queryBuilder",constructor:function(){var _9=_8.getFontMeasurements();this.minHeight=38*_9["1em"];this.firstShowListener=this.on("firstWindowShow",_2.hitch(this,this.handleFirstWindowShow));},postCreate:function(){this.inherited(arguments);_6.add(this.windowContent,"queryBuilderWindowContent");},handleFirstWindowShow:function(){this.firstShowListener.remove();require(["esriviewer/ui/query/QueryBuilderWidget"],_2.hitch(this,function(_a){this.queryBuilderWidget=new _a();this.setContent(this.queryBuilderWidget.domNode);if(this.pendingQueryLayerCallback!=null&&_2.isFunction(this.pendingQueryLayerCallback)){this.pendingQueryLayerCallback();}}));},initListeners:function(){this.inherited(arguments);this.subscribes.push(_3.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.QUERY_BUILDER.SHOW,_2.hitch(this,this.show)));this.subscribes.push(_3.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.QUERY_BUILDER.HIDE,_2.hitch(this,this.hide)));this.subscribes.push(_3.subscribe(VIEWER_GLOBALS.EVENTS.WINDOW.QUERY_BUILDER.TOGGLE,_2.hitch(this,this.toggle)));_3.subscribe(VIEWER_GLOBALS.EVENTS.QUERY_BUILDER.SET_IMAGE_SERVICE_LAYER,_2.hitch(this,this.setImageServiceLayer));_3.subscribe(VIEWER_GLOBALS.EVENTS.QUERY_BUILDER.SET_MAP_SERVICE_LAYER,_2.hitch(this,this.setMapServiceLayer));_3.subscribe(VIEWER_GLOBALS.EVENTS.QUERY_BUILDER.SET_FEATURE_SERVICE_LAYER,_2.hitch(this,this.setFeatureServiceLayer));},hide:function(){this.inherited(arguments);if(this.queryBuilderWidget){this.queryBuilderWidget.clearGraphics();}},setImageServiceLayer:function(_b){if(this.queryBuilderWidget==null){this.pendingQueryLayerCallback=_2.hitch(this,function(_c){this.queryBuilderWidget.setImageServiceLayer(_c);this.pendingQueryLayerCallback=null;},_b);}else{this.queryBuilderWidget.setImageServiceLayer(_b);}this.show();},setMapServiceLayer:function(_d,_e){if(this.queryBuilderWidget==null){this.pendingQueryLayerCallback=_2.hitch(this,function(_f,_10){this.queryBuilderWidget.setMapServiceLayer(_f,_10);this.pendingQueryLayerCallback=null;},_d,_e);}else{this.queryBuilderWidget.setMapServiceLayer(_d,_e);}this.show();},setFeatureServiceLayer:function(_11){if(this.queryBuilderWidget==null){this.pendingQueryLayerCallback=_2.hitch(this,function(_12){this.queryBuilderWidget.setFeatureServiceLayer(_12);this.pendingQueryLayerCallback=null;},_11);}else{this.queryBuilderWidget.setFeatureServiceLayer(_11);}this.show();}});});