//>>built
define("esriviewer/ui/user/location/UserLocationWidget",["dojo/_base/declare","dojo/dom-construct","dojo/dom-class","dojo/_base/lang","dojo/on","dojo/topic","../../base/UIWidget","esri/geometry/Point","esri/SpatialReference"],function(_1,_2,_3,_4,on,_5,_6,_7,_8){return _1([_6],{defaultPositioning:{x:20,y:205},browserLocationWkid:4326,isPositionedByConfig:true,positioningParamName:"zoomToUserLocation",maximumAge:0,timeout:6000,enableHighAccuracy:true,postCreate:function(){this.inherited(arguments);_3.add(this.domNode,"userLocationCrosshairContainer fivePixelBorderRadius defaultTwoPixelBorder defaultBackground");var _9=_2.create("div",{className:"commonIcons32 locationCrosshair"});_2.place(_9,this.domNode);on(_9,"click",_4.hitch(this,this.handleZoomToCurrentLocation));this.handleProjectResponse=_4.hitch(this,this._handleProjectResponse);this.zoomToCurrentLocation=_4.hitch(this,this._zoomToCurrentLocation);this.zoomToCurrentLocationError=_4.hitch(this,this._zoomToCurrentLocationError);},handleZoomToCurrentLocation:function(){if(navigator&&navigator.geolocation){navigator.geolocation.getCurrentPosition(this.zoomToCurrentLocation,this.zoomToCurrentLocationError,{maximumAge:this.maximumAge,timeout:this.timeout,enableHighAccuracy:this.enableHighAccuracy});}},_zoomToCurrentLocation:function(_a){if(_a!=null&&_4.isObject(_a)&&_a.coords){var pt=new _7(_a.coords.longitude,_a.coords.latitude,new _8({wkid:this.browserLocationWkid}));_5.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_MAP_SR,pt,this.handleProjectResponse);}},_handleProjectResponse:function(_b){if(_b!=null&&_4.isArray(_b)&&_b.length>0){_5.publish(VIEWER_GLOBALS.EVENTS.MAP.FLASH.POINT,_b[0]);_5.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PAN_TO,_b[0],{deepest:true});}},_zoomToCurrentLocationError:function(){_5.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Could not zoom to current location");VIEWER_UTILS.log("Could not get users current location");}});});