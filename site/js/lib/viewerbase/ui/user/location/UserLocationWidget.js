//>>built
require({cache:{"url:esriviewer/ui/user/location/theme/UserLocationWidgetTheme.css":".userLocationCrosshairContainer{position:absolute;z-index:4;}"}});define("esriviewer/ui/user/location/UserLocationWidget",["dojo/_base/declare","xstyle/css!./theme/UserLocationWidgetTheme.css","dojo/dom-construct","dojo/dom-class","dojo/_base/lang","dojo/on","dojo/topic","../../base/UIWidget","esri/geometry/Point","esri/SpatialReference"],function(_1,_2,_3,_4,_5,on,_6,_7,_8,_9){return _1([_7],{defaultPositioning:{x:20,y:205},browserLocationWkid:4326,isPositionedByConfig:true,positioningParamName:"zoomToUserLocation",maximumAge:0,timeout:6000,enableHighAccuracy:true,postCreate:function(){this.inherited(arguments);_4.add(this.domNode,"userLocationCrosshairContainer fivePixelBorderRadius defaultTwoPixelBorder defaultBackground");var _a=_3.create("div",{className:"commonIcons32 locationCrosshair"});_3.place(_a,this.domNode);on(_a,"click",_5.hitch(this,this.handleZoomToCurrentLocation));this.handleProjectResponse=_5.hitch(this,this._handleProjectResponse);this.zoomToCurrentLocation=_5.hitch(this,this._zoomToCurrentLocation);this.zoomToCurrentLocationError=_5.hitch(this,this._zoomToCurrentLocationError);},handleZoomToCurrentLocation:function(){if(navigator&&navigator.geolocation){navigator.geolocation.getCurrentPosition(this.zoomToCurrentLocation,this.zoomToCurrentLocationError,{maximumAge:this.maximumAge,timeout:this.timeout,enableHighAccuracy:this.enableHighAccuracy});}},_zoomToCurrentLocation:function(_b){if(_b!=null&&_5.isObject(_b)&&_b.coords){var pt=new _8(_b.coords.longitude,_b.coords.latitude,new _9({wkid:this.browserLocationWkid}));_6.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_MAP_SR,pt,this.handleProjectResponse);}},_handleProjectResponse:function(_c){if(_c!=null&&_5.isArray(_c)&&_c.length>0){_6.publish(VIEWER_GLOBALS.EVENTS.MAP.FLASH.POINT,_c[0]);_6.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PAN_TO,_c[0],{deepest:true});}},_zoomToCurrentLocationError:function(){_6.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Could not zoom to current location");VIEWER_UTILS.log("Could not get users current location");}});});