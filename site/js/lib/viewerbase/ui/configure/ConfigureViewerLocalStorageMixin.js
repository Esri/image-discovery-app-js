//>>built
define("esriviewer/ui/configure/ConfigureViewerLocalStorageMixin",["dojo/_base/declare","dojo/_base/lang","dojo/has","dojo/topic"],function(_1,_2,_3,_4){return _1([],{localStoragePersistSupported:true,constructor:function(){if(!(_3("ie")<8)){this.localStoragePersistSupported=false;}this.storageProvider=dojox.storage.manager.getProvider();if(this.storageProvider){this.localStoragePersistSupported=true;}this.persistedBasemaps=this.loadPersistedBasemaps();this.persistedReferenceLayers=this.loadPersistedReferenceLayers();this.persistedLocators=this.loadPersistedLocators();},deleteUserPersistedReferenceLayer:function(_5){if(this.persistReferenceLayerUrlExists(_5)){var _6=_5.toLowerCase();delete this.persistedReferenceLayers[_6];this.persistReferenceLayers();}},deleteUserPersistedLocator:function(_7){if(this.persistLocatorUrlExists(_7)){var _8=_7.toLowerCase();delete this.persistedLocators[_8];this.persistLocators();}},deleteUserPersistedBasemap:function(_9){if(this.persistBasemapUrlExists(_9)){var _a=_9.toLowerCase();delete this.persistedBasemaps[_a];this.persistBasemaps();}},persistLocatorUrlExists:function(_b){var _c=_b.toLowerCase();return this.persistedLocators[_c]!=null;},persistReferenceLayerUrlExists:function(_d){var _e=_d.toLowerCase();return this.persistedReferenceLayers[_e]!=null;},persistBasemapUrlExists:function(_f){var _10=_f.toLowerCase();return this.persistedBasemaps[_10]!=null;},persistBasemap:function(_11){if(_11==null||_11.label==null||_11.label==""||_11.url==null||_11.url==""){return null;}if(this.persistBasemapUrlExists(_11.url)){return null;}else{var _12=_11.url.toLowerCase();this.persistedBasemaps[_12]=_11;this.persistBasemaps();return _11;}},persistLocator:function(_13){if(_13==null||_13.label==null||_13.label==""||_13.url==null||_13.url==""){return null;}if(this.persistLocatorUrlExists(_13.url)){return null;}else{var _14=_13.url.toLowerCase();this.persistedLocators[_14]=_13;this.persistLocators();return _13;}},persistReferenceLayer:function(_15){if(_15==null||_15.label==null||_15.label==""||_15.url==null||_15.url==""){return null;}if(this.persistReferenceLayerUrlExists(_15.url)){return null;}else{var _16=_15.url.toLowerCase();this.persistedReferenceLayers[_16]=_15;this.persistReferenceLayers();return _15;}},loadPersistedLocators:function(){if(this.storageProvider){if(this.storageProvider.hasKey(VIEWER_GLOBALS.STORAGE.LABELS.LOCATORS)){return this.storageProvider.get(VIEWER_GLOBALS.STORAGE.LABELS.LOCATORS);}}return {};},loadPersistedReferenceLayers:function(){if(this.storageProvider){if(this.storageProvider.hasKey(VIEWER_GLOBALS.STORAGE.LABELS.REFERENCE_LAYERS)){return this.storageProvider.get(VIEWER_GLOBALS.STORAGE.LABELS.REFERENCE_LAYERS);}}return {};},loadPersistedBasemaps:function(){if(this.storageProvider){if(this.storageProvider.hasKey(VIEWER_GLOBALS.STORAGE.LABELS.BASEMAPS)){return this.storageProvider.get(VIEWER_GLOBALS.STORAGE.LABELS.BASEMAPS);}}return {};},persistBasemaps:function(){this.storageProvider.put(VIEWER_GLOBALS.STORAGE.LABELS.BASEMAPS,this.persistedBasemaps);},persistLocators:function(){this.storageProvider.put(VIEWER_GLOBALS.STORAGE.LABELS.LOCATORS,this.persistedLocators);},persistReferenceLayers:function(){this.storageProvider.put(VIEWER_GLOBALS.STORAGE.LABELS.REFERENCE_LAYERS,this.persistedReferenceLayers);}});});