//>>built
require({cache:{"url:esriviewer/ui/geocode/theme/ReverseGeocodeWidgetTheme.css":".reverseGeocodeContainer{padding-bottom:10px;}.reverseGeocodeActionsContainer{float:left;margin-right:10px;margin-top:5px;}.reverseGeocodeDistanceInput{width:35px;}.reverseGeocodeDistanceContainer{margin-bottom:7px;float:left;}.reverseActionsContainerOuter{height:45px;}.reverseGeocodeResultsHeader{border-bottom:1px solid #666666;margin-bottom:5px;}.reverseGeocodeResultEntry{margin:2px 0;}","url:esriviewer/ui/geocode/template/ReverseGeocodeWidgetTemplate.html":"<div class=\"reverseGeocodeContainer\">\r\n    <div class=\"reverseActionsContainerOuter\">\r\n        <div class=\"reverseGeocodeActionsContainer\">\r\n            <div class=\"commonIcons32 pointUnselected fivePixelBorderRadius\"\r\n                 data-bind=\"click: toggleDrawActive, css:{pointSelected: drawActive}\"></div>\r\n        </div>\r\n        <div class=\"reverseGeocodeDistanceContainer\">\r\n            <div class=\"reverseGeocodeDistanceLabel defaultFont\">Distance (m)</div>\r\n            <input class=\"reverseGeocodeDistanceInput\" type=\"text\" data-bind=\"value:reverseGeocodeDistance\"/>\r\n        </div>\r\n    </div>\r\n    <div class=\"reverseGeocodeResultsContainer\" data-bind=\"visible: resultVisible\">\r\n        <div class=\"reverseGeocodeResultsHeader\">Result</div>\r\n        <div class=\"reverseGeocodeResultEntry\" data-bind=\"visible: showStreetResult\">\r\n            <span>Street:</span>\r\n            <span data-bind=\"text:reverseGeocodeStreet\"></span>\r\n        </div>\r\n        <div class=\"reverseGeocodeResultEntry\" data-bind=\"visible: showCityResult\">\r\n            <span>City:</span>\r\n            <span data-bind=\"text:reverseGeocodeCity\"></span>\r\n        </div>\r\n        <div class=\"reverseGeocodeResultEntry\" data-bind=\"visible: showStateResult\">\r\n            <span>State:</span>\r\n            <span data-bind=\"text:reverseGeocodeState\"></span>\r\n        </div>\r\n        <div class=\"reverseGeocodeResultEntry\" data-bind=\"visible: showZipResult\">\r\n            <span>Zip:</span>\r\n            <span data-bind=\"text:reverseGeocodeZip\"></span>\r\n        </div>\r\n        <div class=\"reverseGeocodeResultEntry\" data-bind=\"visible: showCertaintyResult\">\r\n            <span>Certainty:</span>\r\n            <span data-bind=\"text:reverseGeocodeCertainty\"></span>\r\n            <span>%</span>\r\n        </div>\r\n    </div>\r\n    <div data-bind=\"visible: noResultsVisible\">\r\n        No Address Found\r\n    </div>\r\n</div>"}});define("esriviewer/ui/geocode/ReverseGeocodeWidget",["dojo/_base/declare","xstyle/css!./theme/ReverseGeocodeWidgetTheme.css","dojo/text!./template/ReverseGeocodeWidgetTemplate.html","dojo/topic","dojo/_base/Color","dojo/_base/lang","../base/UITemplatedWidget","../draw/base/MapDrawSupport","./model/ReverseGeocodeViewModel","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleMarkerSymbol"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b){return _1([_7,_8],{templateString:_3,postCreate:function(){this.inherited(arguments);this.viewModel=new _9();this.viewModel.drawActive.subscribe(_6.hitch(this,this.handleDrawActiveChange));ko.applyBindings(this.viewModel,this.domNode);this.initSymbology();this.handleReverseGeocodeErrorCallback=_6.hitch(this,this.handleReverseGeocodeError);this.handleReverseGeocodeResponseCallback=_6.hitch(this,this.handleReverseGeocodeResponse);},initSymbology:function(){this.pointSymbol=new _b(_b.STYLE_X,1,new _a(_a.STYLE_SOLID,new _5("blue")));},handleDrawActiveChange:function(_c){if(_c){this.handlePointDraw();}else{this.clearDraw();}},handlePointDraw:function(){this.setDraw(VIEWER_GLOBALS.EVENTS.MAP.TOOLS.DRAW_POINT);},clearDraw:function(){this.inherited(arguments);_4.publish(VIEWER_GLOBALS.EVENTS.DRAW.USER.DRAW_CANCEL);this.viewModel.drawActive(false);},geometryAdded:function(_d){var _e=this.viewModel.reverseGeocodeDistance();var _f=REG_EXP_UTILS.stripNonNumberic(_e);var _10=parseInt(_f,10);_4.publish(VIEWER_GLOBALS.EVENTS.LOCATOR.REVERSE_GEOCODE,_d,_10,this.handleReverseGeocodeResponseCallback,this.handleReverseGeocodeErrorCallback);this.handlePointDraw();},handleReverseGeocodeResponse:function(_11){if(_11&&_11.address!=null&&_6.isObject(_11.address)){this.viewModel.showResults();if(_11.address.Street!=null){this.viewModel.reverseGeocodeStreet(_11.address.Street);this.viewModel.showStreetResult(true);}else{this.viewModel.reverseGeocodeStreet("");this.viewModel.showStreetResult(false);}if(_11.address.City!=null){this.viewModel.reverseGeocodeCity(_11.address.City);this.viewModel.showCityResult(true);}else{this.viewModel.reverseGeocodeCity("");this.viewModel.showCityResult(false);}if(_11.address.State!=null){this.viewModel.reverseGeocodeState(_11.address.State);this.viewModel.showStateResult(true);}else{this.viewModel.reverseGeocodeState("");this.viewModel.showStateResult(false);}if(_11.address.PostalCode!=null){this.viewModel.reverseGeocodeZip(_11.address.PostalCode);this.viewModel.showZipResult(true);}else{this.viewModel.reverseGeocodeZip("");this.viewModel.showZipResult(false);}if(_11.score!=null){this.viewModel.reverseGeocodeCertainty(_11.score.toString());this.viewModel.showCertaintyResult(true);}else{this.viewModel.reverseGeocodeCertainty("");this.viewModel.showCertaintyResult(false);}}else{this.viewModel.showNoResults();}},handleReverseGeocodeError:function(err){if(err!=null&&_6.isString(err)){VIEWER_UTILS.log("An error was encountered with reverse geocode",VIEWER_GLOBALS.LOG_TYPE.ERROR);VIEWER_UTILS.log(err,VIEWER_GLOBALS.LOG_TYPE.ERROR);_4.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,err);}else{VIEWER_UTILS.log("An error was encountered with reverse geocode",VIEWER_GLOBALS.LOG_TYPE.ERROR);_4.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Reverse Geocode Failed");}},reset:function(){this.clearDraw();this.viewModel.reverseGeocodeZip("");this.viewModel.reverseGeocodeCertainty("");this.viewModel.reverseGeocodeState("");this.viewModel.reverseGeocodeCity("");this.viewModel.reverseGeocodeStreet("");this.viewModel.hideNoResultsAndResults(false);}});});