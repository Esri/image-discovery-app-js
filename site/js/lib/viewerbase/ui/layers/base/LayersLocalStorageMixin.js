//>>built
define("esriviewer/ui/layers/base/LayersLocalStorageMixin",["dojo/_base/declare","dojo/has"],function(_1,_2){return _1([],{localStoragePersistSupported:true,constructor:function(){if(!(_2("ie")<8)){this.localStoragePersistSupported=false;}this.storageProvider=dojox.storage.manager.getProvider();if(this.storageProvider){this.localStoragePersistSupported=true;}this.persistedUserLayers=this.loadPersistedUserLayers();},deleteUserPersistedLayer:function(_3){if(_3!=null&&_3!=""){if(this.persistUserLayerExists(_3)){var _4=_3.toLowerCase();delete this.persistedUserLayers[_4];this.persist();}}},removeAllLayers:function(){this.persistedUserLayers={};this.persist();},persistUserLayerExists:function(_5){if(_5==null||_5==""){return true;}return this.persistedUserLayers[_5]!=null;},persistUserLayer:function(_6){if(_6==null||_6.url==null){return null;}var _7=_6.url.toLowerCase();if(_7==null){return null;}if(this.persistUserLayerExists(_7)){return null;}else{var _8=VIEWER_UTILS.getLayerNameFromLayer(_6);var _9={url:_6.url,name:_8};this.persistedUserLayers[_7]=_9;this.persist();return _9;}},loadPersistedUserLayers:function(){if(this.storageProvider){if(this.storageProvider.hasKey(VIEWER_GLOBALS.STORAGE.LABELS.LAYERS)){return this.storageProvider.get(VIEWER_GLOBALS.STORAGE.LABELS.LAYERS);}}return {};},persist:function(){this.storageProvider.put(VIEWER_GLOBALS.STORAGE.LABELS.LAYERS,this.persistedUserLayers);}});});