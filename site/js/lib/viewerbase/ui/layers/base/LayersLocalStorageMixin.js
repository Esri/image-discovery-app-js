//>>built
define("esriviewer/ui/layers/base/LayersLocalStorageMixin",["dojo/_base/declare","dojo/_base/lang","dojo/has"],function(_1,_2,_3){return _1([],{localStoragePersistSupported:true,constructor:function(){if(!(_3("ie")<8)){this.localStoragePersistSupported=false;}this.storageProvider=dojox.storage.manager.getProvider();if(this.storageProvider){this.localStoragePersistSupported=true;}this.persistedUserLayers=this.loadPersistedUserLayers();},deleteUserPersistedLayer:function(_4){if(_4!=null&&_4!=""){if(this.persistUserLayerExists(_4)){var _5=_4.toLowerCase();delete this.persistedUserLayers[_5];this.persist();}}},removeAllLayers:function(){this.persistedUserLayers={};this.persist();},persistUserLayerExists:function(_6){if(_6==null||_6==""){return true;}return this.persistedUserLayers[_6]!=null;},persistUserLayer:function(_7){if(_7==null||_7.url==null){return;}var _8=_7.url.toLowerCase();if(_8==null){return null;}if(this.persistUserLayerExists(_8)){return null;}else{var _9=VIEWER_UTILS.getLayerNameFromLayer(_7);var _a={url:_7.url,name:_9};this.persistedUserLayers[_8]=_a;this.persist();return _a;}},loadPersistedUserLayers:function(){if(this.storageProvider){if(this.storageProvider.hasKey(VIEWER_GLOBALS.STORAGE.LABELS.LAYERS)){return this.storageProvider.get(VIEWER_GLOBALS.STORAGE.LABELS.LAYERS);}}return {};},persist:function(){this.storageProvider.put(VIEWER_GLOBALS.STORAGE.LABELS.LAYERS,this.persistedUserLayers);}});});