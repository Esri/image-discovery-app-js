//>>built
define("esriviewer/ui/layers/base/LayersLocalStorageMixin",["dojo/_base/declare","dojo/_base/lang","dojo/has"],function(_1,_2,_3){return _1([],{localStoragePersistSupported:true,constructor:function(){if(!(_3("ie")<8)){this.localStoragePersistSupported=false;}this.storageProvider=dojox.storage.manager.getProvider();if(this.storageProvider){this.localStoragePersistSupported=true;}this.persistedUserLayers=this.loadPersistedUserLayers();},deleteUserPersistedLayer:function(_4){if(_4!=null&&_4!=""){if(this.persistUserLayerExists(_4)){var _5=_4.toLowerCase();delete this.persistedUserLayers[_5];this.persist();}}},removeAllLayers:function(){this.persistedUserLayers={};this.persist();},persistUserLayerExists:function(_6){if(_6==null||_6==""){return true;}var _7=_6.toLowerCase();return this.persistedUserLayers[_7]!=null;},persistUserLayer:function(_8){if(_8.url==null||_8.url==""){return null;}if(this.persistUserLayerExists(_8.url)){return null;}else{var _9=VIEWER_UTILS.getLayerNameFromLayer(_8);var _a={url:_8.url,name:_9};this.persistedUserLayers[_8.url.toLowerCase()]=_a;this.persist();return _a;}},loadPersistedUserLayers:function(){if(this.storageProvider){if(this.storageProvider.hasKey(VIEWER_GLOBALS.STORAGE.LABELS.LAYERS)){return this.storageProvider.get(VIEWER_GLOBALS.STORAGE.LABELS.LAYERS);}}return {};},persist:function(){this.storageProvider.put(VIEWER_GLOBALS.STORAGE.LABELS.LAYERS,this.persistedUserLayers);}});});