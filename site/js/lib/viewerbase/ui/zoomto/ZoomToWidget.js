//>>built
require({cache:{"url:esriviewer/ui/zoomto/templates/ZoomToWidget.html":"<div>\n    <div data-dojo-attach-point=\"stateContainer\" style=\"padding: 0 0 10px 0;\">\n        <div>State:</div>\n        <input data-dojo-attach-point=\"stateInputSelect\"/>\n    </div>\n    <div data-dojo-attach-point=\"countyContainer\">\n        <div>County:</div>\n        <input data-dojo-attach-point=\"countyInputSelect\"/>\n    </div>\n</div>\n"}});define("esriviewer/ui/zoomto/ZoomToWidget",["dojo/_base/declare","dojo/topic","dojo/text!./templates/ZoomToWidget.html","dojo/_base/connect","dojo/_base/lang","dojo/_base/Color","dojo/data/ItemFileReadStore","../base/UITemplatedWidget","dijit/form/FilteringSelect","esri/geometry/Extent","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/graphic"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d){return _1([_8],{stateJson:"config/data/coordinates/states_web_merc.json",countyJson:"config/data/coordinates/counties_web_merc.json",templateString:_3,stateFS:null,countyFS:null,stateStore:null,countyStore:null,constructor:function(_e,_f){this.stateZoomer=_5.hitch(this,this.stateZoomer);this.countyZoomer=_5.hitch(this,this.countyZoomer);this.zoomerComplete=_5.hitch(this,this.zoomerComplete);this.handleExtent=_5.hitch(this,this.handleExtent);this.showExtent=_5.hitch(this,this.showExtent);this.handleProjectionError=_5.hitch(this,this.handleProjectionError);},postCreate:function(){this.inherited(arguments);this.stateStore=new _7({url:this.stateJson,typeMap:{"Extent":_a}});this.countyStore=new _7({url:this.countyJson,typeMap:{"Extent":_a}});this.stateFS=new _9({name:"states",required:false,maxHeight:125,store:this.stateStore,searchAttr:"name"},this.stateInputSelect);this.countyFS=new _9({disabled:true,maxHeight:125,displayedValue:"Please select a state.",label:"name",name:"counties",required:false,searchAttr:"name"},this.countyInputSelect);_4.connect(this.stateFS,"onChange",this,this.stateZoomer);_4.connect(this.countyFS,"onChange",this,this.countyZoomer);},loadViewerConfigurationData:function(){var _10=null;_2.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"zoomToWidget",function(_11){_10=_11;});if(_10){if(_10.stateJson){this.stateJson=_10.stateJson;}if(_10.countyJson){this.countyJson=_10.countyJson;}}},handleExtent:function(_12){_2.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_MAP_SR,_12.extent[0],this.showExtent,this.handleProjectionError);},showExtent:function(_13){var ext;if(_13[0]&&typeof (_13[0].geometry)!="undefined"){ext=_13[0].geometry;}else{if(_5.isArray(_13)&&_13.length>0){ext=_13[0];}else{ext=_13;}}if(ext==null){return;}var _14=_5.clone(ext);_2.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,_14);var _15=1;var sls=_b;var sfs=_c;setTimeout(function(){var _16=new sls("solid",new _6([0,0,0,1]),3);var _17=new sfs("solid",_16,new _6([0,0,128,0]));var _18=new _d(ext,_17);_2.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.ADD,_18);var _19=setInterval(function(){_17.outline.setColor(new _6([102,0,153,_15]));_18.setSymbol(_17);if(_15<0.01){clearInterval(_19);_2.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.REMOVE,_18);}_15-=0.01;},10);},1500);},stateZoomer:function(){var _1a=this.stateFS.get("value");if(_1a!==""){this.countyFS.attr({disabled:false,displayedValue:""});this.countyFS.query={state_name:_1a};this.countyFS.set("store",this.countyStore);this.countyFS.focus();this.stateStore.fetchItemByIdentity({identity:_1a,onItem:this.handleExtent,onError:this.errorHandler});}},countyZoomer:function(){var _1b=this.countyFS.get("value");if(_1b!==""){this.countyStore.fetchItemByIdentity({identity:_1b,onItem:this.handleExtent,onError:this.errorHandler});}},errorHandler:function(_1c){},handleProjectionError:function(err){if(_5.isString(err)){_2.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,err);}else{_2.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Projection Failed");}}});});