//>>built
require({cache:{"url:esriviewer/ui/zoomto/templates/ZoomToWidget.html":"<div>\n    <div data-dojo-attach-point=\"stateContainer\" style=\"padding: 0 0 10px 0;\">\n        <div>State:</div>\n        <input data-dojo-attach-point=\"stateInputSelect\"/>\n    </div>\n    <div data-dojo-attach-point=\"countyContainer\">\n        <div>County:</div>\n        <input data-dojo-attach-point=\"countyInputSelect\"/>\n    </div>\n</div>\n"}});define("esriviewer/ui/zoomto/ZoomToWidget",["dojo/_base/declare","dojo/topic","dojo/text!./templates/ZoomToWidget.html","dojo/_base/lang","dojo/_base/Color","dojo/data/ItemFileReadStore","../base/UITemplatedWidget","dijit/form/FilteringSelect","esri/geometry/Extent","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/graphic"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c){return _1([_7],{stateJson:"config/data/coordinates/states_web_merc.json",countyJson:"config/data/coordinates/counties_web_merc.json",templateString:_3,stateFS:null,countyFS:null,stateStore:null,countyStore:null,constructor:function(_d,_e){this.stateZoomer=_4.hitch(this,this.stateZoomer);this.countyZoomer=_4.hitch(this,this.countyZoomer);this.zoomerComplete=_4.hitch(this,this.zoomerComplete);this.handleExtent=_4.hitch(this,this.handleExtent);this.showExtent=_4.hitch(this,this.showExtent);this.handleProjectionError=_4.hitch(this,this.handleProjectionError);},postCreate:function(){this.inherited(arguments);this.stateStore=new _6({url:this.stateJson,typeMap:{"Extent":_9}});this.countyStore=new _6({url:this.countyJson,typeMap:{"Extent":_9}});this.stateFS=new _8({name:"states",required:false,maxHeight:125,store:this.stateStore,searchAttr:"name"},this.stateInputSelect);this.countyFS=new _8({disabled:true,maxHeight:125,displayedValue:"Please select a state.",label:"name",name:"counties",required:false,searchAttr:"name"},this.countyInputSelect);this.stateFS.on("change",_4.hitch(this,this.stateZoomer));this.countyFS.on("change",_4.hitch(this,this.countyZoomer));},loadViewerConfigurationData:function(){var _f=null;_2.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"zoomToWidget",function(_10){_f=_10;});if(_f){if(_f.stateJson){this.stateJson=_f.stateJson;}if(_f.countyJson){this.countyJson=_f.countyJson;}}},handleExtent:function(_11){_2.publish(VIEWER_GLOBALS.EVENTS.GEOMETRY_SERVICE.TASKS.PROJECT_TO_MAP_SR,_11.extent[0],this.showExtent,this.handleProjectionError);},showExtent:function(_12){var ext;if(_12[0]&&typeof (_12[0].geometry)!="undefined"){ext=_12[0].geometry;}else{if(_4.isArray(_12)&&_12.length>0){ext=_12[0];}else{ext=_12;}}if(ext==null){return;}var _13=_4.clone(ext);_2.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,_13);var _14=1;var sls=_a;var sfs=_b;setTimeout(function(){var _15=new sls("solid",new _5([0,0,0,1]),3);var _16=new sfs("solid",_15,new _5([0,0,128,0]));var _17=new _c(ext,_16);_2.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.ADD,_17);var _18=setInterval(function(){_16.outline.setColor(new _5([102,0,153,_14]));_17.setSymbol(_16);if(_14<0.01){clearInterval(_18);_2.publish(VIEWER_GLOBALS.EVENTS.MAP.GRAPHICS.REMOVE,_17);}_14-=0.01;},10);},1500);},stateZoomer:function(){var _19=this.stateFS.get("value");if(_19!==""){this.countyFS.attr({disabled:false,displayedValue:""});this.countyFS.query={state_name:_19};this.countyFS.set("store",this.countyStore);this.countyFS.focus();this.stateStore.fetchItemByIdentity({identity:_19,onItem:this.handleExtent,onError:this.errorHandler});}},countyZoomer:function(){var _1a=this.countyFS.get("value");if(_1a!==""){this.countyStore.fetchItemByIdentity({identity:_1a,onItem:this.handleExtent,onError:this.errorHandler});}},errorHandler:function(_1b){},handleProjectionError:function(err){if(_4.isString(err)){_2.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,err);}else{_2.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,"Projection Failed");}}});});