//>>built
define("esriviewer/ui/toolbar/base/model/BookmarkListingViewModel",["dojo/_base/declare","dojo/topic","dojo/Evented","dojo/dom-construct","dojo/dom-class","dojox/timing"],function(_1,_2,_3,_4,_5,_6){return _1([_3],{animate:true,SHOW_CREATE_BOOKMARK:"showCreateBookmark",REMOVE_BOOKMARK_REQUEST:"removeBookmarkRequest",ignoreAddAnimation:true,constructor:function(){this.loadViewerConfigurationData();var _7=this;this.showCreateBookmarkIcon=ko.observable(true);this.visible=ko.observable(false);this._removableBookmarks=ko.observableArray();this._bookmarks=ko.observableArray();this.removeClick=function(_8,_9){_7._removeClick(_8,_9);};this.handleBeforeRemoveBookmark=function(_a){if(_7.animate){_5.add(_a,VIEWER_GLOBALS.ANIMATIONS.LIGHT_SPEED.OUT);var _b=new _6.Timer(VIEWER_GLOBALS.ANIMATIONS.LIGHT_SPEED.DURATION);_b.onTick=function(){_4.destroy(_a);_b.stop();_b=null;};_b.start();}else{_4.destroy(_a);}};this.handleAfterAddBookmark=function(e){if(!_7.ignoreAddAnimation&&_7.animate){_5.add(e,VIEWER_GLOBALS.ANIMATIONS.LIGHT_SPEED.IN);var _c=new _6.Timer(VIEWER_GLOBALS.ANIMATIONS.LIGHT_SPEED.DURATION);_c.onTick=function(){_5.remove(e,VIEWER_GLOBALS.ANIMATIONS.LIGHT_SPEED.IN);_c.stop();_c=null;};_c.start();}};},loadViewerConfigurationData:function(){var _d=null;_2.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"animationsEnabled",function(_e){_d=_e;});if(_d!=null){this.animate=_d;}},handleBookmarkClick:function(_f){if(_f==null){return;}_2.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.PAN_TO,_f.point,{zoomLevel:_f.zoomLevel});},addRemovableBookmark:function(_10){if(this._removableBookmarks.indexOf(_10)>-1){return;}this._removableBookmarks.push(_10);this._removableBookmarks.sort(this._bookmarkSorter);},addBookmark:function(_11){if(this._bookmarks.indexOf(_11)>-1){return;}this._bookmarks.push(_11);this._bookmarks.sort(this._bookmarkSorter);},_bookmarkSorter:function(_12,_13){return _12.label==_13.label?0:(_12.label<_13.label?-1:1);},showCreateBookmark:function(){this.emit(this.SHOW_CREATE_BOOKMARK);},_removeClick:function(_14,evt){if(_14!=null){this.emit(this.REMOVE_BOOKMARK_REQUEST,_14,evt);}},removeBookmark:function(_15){this._removableBookmarks.remove(_15);},sortStatic:function(){this._bookmarks.sort(function(_16,_17){var _18=_16.label.toLowerCase();var _19=_17.label.toLowerCase();return _18==_19?0:(_18<_19?-1:1);});},sortRemovable:function(){this._removableBookmarks.sort(function(_1a,_1b){var _1c=_1a.label.toLowerCase();var _1d=_1b.label.toLowerCase();return _1c==_1d?0:(_1c<_1d?-1:1);});},sortAll:function(){this.sortRemovable();this.sortStatic();}});});