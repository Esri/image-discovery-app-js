//>>built
require({cache:{"url:esriviewer/ui/toolbar/template/ActionsToolbarWidgetTemplate.html":"<div class='viewerMainToolbar headerFooterBg'>\r\n    <div class=\"mainToolbarContents\" data-dojo-attach-point=\"mainToolbarContents\">\r\n            <span data-bind=\"visible: toolsButtonVisible\"\r\n                  data-dojo-type=\"dijit/form/DropDownButton\"\r\n                  data-dojo-attach-point=\"toolsDropDownButton\"\r\n                  data-dojo-props=\"iconClass:'commonIcons16 wrench'\">\r\n                <span>Tools</span>\r\n            </span>\r\n\r\n        <div data-dojo-attach-point=\"layersButton\" class=\"actionsToolbarButton\"\r\n             data-bind=\"visible: layersButtonVisible\">\r\n            <div class=\"commonIcons16 layerList actionsToolbarIcon\"></div>\r\n            <div class=\"actionsToolbarText\">Layers</div>\r\n        </div>\r\n        <div data-dojo-attach-point=\"bookmarksButton\" class=\"actionsToolbarButton\"\r\n             data-dojo-attach-event=\"onclick:toggleBookmarksListing\">\r\n            <div class=\"commonIcons16 bookmark actionsToolbarIcon\"></div>\r\n            <div class=\"actionsToolbarText\">Bookmarks</div>\r\n        </div>\r\n        <div data-dojo-attach-point=\"basemapsButton\" class=\"actionsToolbarButton\"\r\n             data-dojo-attach-event=\"onclick:toggleBasemapsListing\">\r\n            <div class=\"commonIcons16 blocks actionsToolbarIcon\"></div>\r\n            <div class=\"actionsToolbarText\">Basemaps</div>\r\n\r\n        </div>\r\n        <span data-dojo-type=\"dijit/form/ToggleButton\"\r\n              data-dojo-attach-point=\"labelsButton\"\r\n              data-dojo-props=\"iconClass:'dijitCheckBoxIcon'\">Labels</span>\r\n\r\n        <div data-dojo-attach-point=\"addOnContentContainer\"></div>\r\n        <div class=\"locateToolbarContainer locateToolbarContainerOnMap\" data-dojo-attach-point=\"locateToolbarContainer\">\r\n            <input value=\"${locateDefaultInput}\" type=\"text\" class=\"locateTextBox defaultBorder\"\r\n                   data-dojo-attach-point=\"locateTextBox\"/>\r\n\r\n            <div data-dojo-attach-point=\"locateButton\" title=\"Locate\"\r\n                 class=\"defaultBorder searchButton searchButtonIcon\"></div>\r\n            <div data-dojo-attach-point=\"configureLocateButton\"\r\n                 data-dojo-attach-event=\"onclick:toggleConfigureLocatorTooltip\" title=\"Configure Locate\"\r\n                 class=\"defaultBorder configureLocate configureButtonIcon\"></div>\r\n        </div>\r\n    </div>\r\n</div>\r\n"}});define("esriviewer/ui/toolbar/ActionsToolbarWidget",["dojo/_base/declare","dojo/text!./template/ActionsToolbarWidgetTemplate.html","dojo/topic","dojo/_base/lang","dojo/on","dojo/window","dojo/_base/window","dojo/has","dojo/dom-style","dojo/dom-class","dojo/dom-construct","dijit/Menu","dijit/MenuItem","../base/UITemplatedWidget","./base/BookmarkListingWidget","./base/LocatorToolbarSupportMixin","./model/ActionsToolbarViewModel","./base/BasemapListingWidget","dijit/form/DropDownButton","dijit/form/ToggleButton"],function(_1,_2,_3,_4,on,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10,_11,_12,_13){return _1([_d,_f],{useBasemapGallery:false,basemapsDropdownWidth:"125px",bookmarksDropdownWidth:"224px",showLocator:true,showLabelServicesButton:true,showConfigureLocatorsIcon:true,showLayersButton:true,showBookmarksButton:true,showToolsDropdownButton:true,configureLocatorTooltipVisible:false,locateDefaultInput:"Enter a location...",templateString:_2,constructor:function(_14){_4.mixin(this,_14||{});},postCreate:function(){this.inherited(arguments);this.viewModel=new _10();this.toolsDropDownMenu=new _b({});this.toolsDropDownButton.dropDown=this.toolsDropDownMenu;if(!this.showToolsDropdownButton){this.handleHideToolsButton();}else{this.handleShowToolsButton();}ko.applyBindings(this.viewModel,this.domNode);this.createToolbarDropDown();if(this.showLabelServicesButton){var _15=false;_3.publish(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.SERVICE_EXISTS,function(_16){_15=_16;});if(!_15){_8.set(this.labelsButton.domNode,"display","none");}}else{_8.set(this.labelsButton.domNode,"display","none");}if(!this.showLayersButton){_8.set(this.layersButton,"display","none");}if(!this.showBookmarksButton){_8.set(this.bookmarksButton,"display","none");}if(!this.showLocator){_8.set(this.locateToolbarContainer,"display","none");}if(!this.showConfigureLocatorsIcon){_8.set(this.configureLocateButton,"display","none");}this.tweakUI();},loadViewerConfigurationData:function(){var _17=null;_3.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"toolsBar",function(_18){_17=_18;});if(_17&&_4.isObject(_17)){if(_17.showToolsDropdown!=null&&_17.showToolsDropdown==false){this.showToolsDropdownButton=false;}if(_17.showLayersButton!=null&&_17.showLayersButton==false){this.showLayersButton=false;}if(_17.showConfigureLocatorsIcon!=null&&_17.showConfigureLocatorsIcon==false){this.showConfigureLocatorsIcon=false;}if(_17.showBookmarksButton!=null&&_17.showBookmarksButton==false){this.showBookmarksButton=false;}if(_17.showLocator!=null&&_17.showLocator==false){this.showLocator=false;}}var _19=null;_3.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_1a){_19=_1a;});if(_19!=null&&_4.isObject(_19)){if(_19.useBasemapGallery!=null&&_19.useBasemapGallery===true){this.useBasemapGallery=true;}}},handleBookmarksWidgetVisibilityChanged:function(_1b){if(_1b){if(!this.useBasemapGallery){this.basemapListingWidget.hide();}else{var _1c;_3.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.IS_HIDDEN,function(_1d){_1c=_1d;});if(!_1c){_3.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.HIDE);}}this.handleDropdownContentVisiblility(true,this.bookmarksDropdownWidth);}else{if(!this.useBasemapGallery){if(!this.basemapListingWidget.viewModel.visible()){this.handleDropdownContentVisiblility(false);}}else{this.handleDropdownContentVisiblility(false);}}},handleBasemapsWidgetVisibilityChanged:function(_1e){if(_1e){this.bookmarkListingWidget.hide();if(!this.useBasemapGallery){this.handleDropdownContentVisiblility(true,this.basemapsDropdownWidth);}}else{if(!this.bookmarkListingWidget.viewModel.visible()){this.handleDropdownContentVisiblility(false);}}},handleDropdownContentVisiblility:function(_1f,_20){if(!_1f){_8.set(this.toolbarDropdownElement,"display","none");}else{if(_20!=null){_8.set(this.toolbarDropdownElement,"width",_20);}_8.set(this.toolbarDropdownElement,"display","block");}},toggleBasemapsListing:function(){if(!this.useBasemapGallery){this.basemapListingWidget.toggle();}else{var _21;_3.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.IS_HIDDEN,function(_22){_21=_22;});if(_21){_3.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.SHOW);if(this.bookmarkListingWidget.viewModel.visible()){this.bookmarkListingWidget.hide();}}else{_3.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.HIDE);}}},toggleBookmarksListing:function(){this.bookmarkListingWidget.toggle();},initListeners:function(){this.inherited(arguments);if(this.showToolsDropdownButton){_3.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.ADD_TOOL,_4.hitch(this,this.handleAddToolToMenu));}this.initLocatorListeners();if(this.showLabelServicesButton){_3.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REFERENCE_LAYER_ADDED,_4.hitch(this,this.handleReferenceLayerAdded));_3.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REFERENCE_LAYER_REMOVED,_4.hitch(this,this.handleReferenceLayerRemoved));this.labelsButton.on("change",_4.hitch(this,this.handleToggleLabels));on(this.layersButton,"click",_4.hitch(this,this.handleShowLayersWindow));}_3.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.HIDE_TOOLS_BUTTON,_4.hitch(this,this.handleHideToolsButton));_3.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.SHOW_TOOLS_BUTTON,_4.hitch(this,this.handleShowToolsButton));_3.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.HIDE_LAYERS_BUTTON,_4.hitch(this,this.handleHideLayersButton));_3.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.SHOW_LAYERS_BUTTON,_4.hitch(this,this.handleShowLayersButton));this.loadCurrentLocators();},handleShowLayersButton:function(){this.viewModel.layersButtonVisible(true);},handleHideLayersButton:function(){this.viewModel.layersButtonVisible(false);},handleShowToolsButton:function(){this.viewModel.toolsButtonVisible(true);},handleHideToolsButton:function(){this.viewModel.toolsButtonVisible(false);},handleShowLayersWindow:function(){_3.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.WIDGET.SHOW);},handleToggleLabels:function(_23){if(_23){_3.publish(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.SHOW);}else{_3.publish(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.HIDE);}},handleReferenceLayerRemoved:function(_24,_25){if(!_25){_8.set(this.labelsButton.domNode,"display","none");}},handleReferenceLayerAdded:function(){var _26=_8.get(this.labelsButton.domNode,"display");if(_26.toLowerCase()==="none"){_8.set(this.labelsButton.domNode,"display","inline");}},setBasemaps:function(_27){if(!this.useBasemapGallery){this.basemapListingWidget.setBasemaps(_27);}},addStaticBookmarks:function(_28){if(this.bookmarkListingWidget){this.bookmarkListingWidget.addStaticBookmarks(_28,false);}},loadCookieBookmarks:function(){if(this.bookmarkListingWidget){this.bookmarkListingWidget.loadCookieBookmarks();}},createToolbarDropDown:function(){this.toolbarDropdownElement=_a.create("div",{className:"defaultBorder threePixelBorderRadius defaultBoxShadow toolbarDropdownContainer",style:{display:"none"}});_3.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAIN_TOOLBAR_DROP_DOWN,this.toolbarDropdownElement);this.bookmarkListingWidget=new _e();this.bookmarkListingWidget.placeAt(this.toolbarDropdownElement);this.bookmarkListingWidget.viewModel.visible.subscribe(_4.hitch(this,this.handleBookmarksWidgetVisibilityChanged));if(!this.useBasemapGallery){this.basemapListingWidget=new _11();this.basemapListingWidget.placeAt(this.toolbarDropdownElement);this.basemapListingWidget.viewModel.visible.subscribe(_4.hitch(this,this.handleBasemapsWidgetVisibilityChanged));}},tweakUI:function(){this.inherited(arguments);if(_7("ie")<9){_8.set(this.locateButton,"position","relative");_8.set(this.locateButton,"top","-2px");_8.set(this.configureLocateButton,"position","relative");_8.set(this.configureLocateButton,"top","-2px");}else{if(_7("ie")>=9){_8.set(this.locateButton,"height","17px");_8.set(this.configureLocateButton,"height","17px");_8.set(this.locateButton,"marginTop","0");_8.set(this.configureLocateButton,"marginTop","0");}else{if(_7("ff")){_8.set(this.locateButton,"marginTop","0");_8.set(this.configureLocateButton,"marginTop","0");}}}if(this.toolsDropDownButton){_8.set(this.toolsDropDownButton.domNode,"float","right");_8.set(this.toolsDropDownButton.domNode.firstChild,"background","none");_8.set(this.toolsDropDownButton.domNode.firstChild,"border","none");}_8.set(this.labelsButton.domNode,"float","right");_8.set(this.labelsButton.domNode,"marginRight","20px");_9.add(this.labelsButton.domNode,"defaultTextColor");_8.set(this.labelsButton.domNode.firstChild,"background","none");_8.set(this.labelsButton.domNode.firstChild,"border","none");},handleAddToolToMenu:function(_29){if(_29 instanceof _c&&this.toolsDropDownMenu){this.toolsDropDownMenu.addChild(_29);}}});});