//>>built
require({cache:{"url:esriviewer/ui/toolbar/template/ActionsToolbarWidgetTemplate.html":"<div class='viewerMainToolbar headerFooterBg'>\r\n    <div class=\"mainToolbarContents\" data-dojo-attach-point=\"mainToolbarContents\">\r\n            <span data-bind=\"visible: toolsButtonVisible\"\r\n                  data-dojo-type=\"dijit/form/DropDownButton\"\r\n                  data-dojo-attach-point=\"toolsDropDownButton\"\r\n                  data-dojo-props=\"iconClass:'commonIcons16 wrench'\">\r\n                <span>Tools</span>\r\n            </span>\r\n\r\n        <div data-dojo-attach-point=\"layersButton\" class=\"actionsToolbarButton\"\r\n             data-bind=\"visible: layersButtonVisible\">\r\n            <div class=\"commonIcons16 layerList actionsToolbarIcon\"></div>\r\n            <div class=\"actionsToolbarText\">Layers</div>\r\n        </div>\r\n        <div data-dojo-attach-point=\"bookmarksButton\" class=\"actionsToolbarButton\"\r\n             data-bind=\"visible:showBookmarksButton\"\r\n             data-dojo-attach-event=\"onclick:toggleBookmarksListing\">\r\n            <div class=\"commonIcons16 bookmark actionsToolbarIcon\"></div>\r\n            <div class=\"actionsToolbarText\">Bookmarks</div>\r\n        </div>\r\n        <div data-dojo-attach-point=\"basemapsButton\" class=\"actionsToolbarButton\"\r\n             data-dojo-attach-event=\"onclick:toggleBasemapsListing\">\r\n            <div class=\"commonIcons16 blocks actionsToolbarIcon\"></div>\r\n            <div class=\"actionsToolbarText\">Basemaps</div>\r\n\r\n        </div>\r\n        <span data-bind=\"visible:showLabelsButton\">\r\n            <span data-dojo-type=\"dijit/form/ToggleButton\"\r\n                  data-dojo-attach-point=\"labelsButton\"\r\n                  data-dojo-props=\"iconClass:'dijitCheckBoxIcon'\">Labels</span>\r\n        </span>\r\n\r\n        <div data-dojo-attach-point=\"addOnContentContainer\"></div>\r\n        <div class=\"locateToolbarContainer locateToolbarContainerOnMap\" data-dojo-attach-point=\"locateToolbarContainer\"\r\n             data-bind=\"visible: showLocator\">\r\n            <input value=\"${locateDefaultInput}\" type=\"text\" class=\"locateTextBox defaultBorder\"\r\n                   data-dojo-attach-point=\"locateTextBox\"/>\r\n\r\n            <div data-dojo-attach-point=\"locateButton\" title=\"Locate\"\r\n                 class=\"defaultBorder searchButton searchButtonIcon\"></div>\r\n            <div data-dojo-attach-point=\"configureLocateButton\"\r\n                 data-bind=\"visible:showConfigureLocatorsButton\"\r\n                 data-dojo-attach-event=\"onclick:toggleConfigureLocatorTooltip\" title=\"Configure Locate\"\r\n                 class=\"defaultBorder configureLocate configureButtonIcon\"></div>\r\n        </div>\r\n        <div data-bind=\"visible:showExtentActionsToolbar\" data-dojo-attach-point=\"extentActionsToolbar\">\r\n            <div class=\"smallActionsToolbarButton\">\r\n                <div data-dojo-attach-point=\"initialExtentButton\" title=\"Initial Extent\"\r\n                     class=\"commonIcons16 firstItem\"\r\n                     data-dojo-attach-event=\"onclick:handleGotoInitialExtent\"></div>\r\n            </div>\r\n            <div class=\"smallActionsToolbarButton\">\r\n                <div data-dojo-attach-point=\"prevExtentButton\" title=\"Previous Extent\"\r\n                     class=\"commonIcons16 previousGray\"\r\n                     data-bind=\"css:{previous: prevExtentEnabled()}\"\r\n                     data-dojo-attach-event=\"onclick:handleGotoPrevExtent\"></div>\r\n            </div>\r\n            <div class=\"smallActionsToolbarButton\">\r\n                <div data-dojo-attach-point=\"nextExtentButton\" title=\"Full Extent\"\r\n                     class=\"commonIcons16 locationGoTo\"\r\n                     data-dojo-attach-event=\"onclick:handleGotoFullExtent\"></div>\r\n            </div>\r\n            <div class=\"smallActionsToolbarButton\">\r\n                <div data-dojo-attach-point=\"nextExtentButton\" title=\"Next Extent\"\r\n                     class=\"commonIcons16 nextGray\"\r\n                     data-bind=\"css:{next: nextExtentEnabled()}\"\r\n                     data-dojo-attach-event=\"onclick:handleGotoNextExtent\"></div>\r\n            </div>\r\n            <div class=\"smallActionsToolbarButton\">\r\n                <div data-dojo-attach-point=\"lastExtentButton\" title=\"Last Extent\"\r\n                     class=\"commonIcons16 lastItem\"\r\n                     data-dojo-attach-event=\"onclick:handleGotoLastExtent\"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n"}});define("esriviewer/ui/toolbar/ActionsToolbarWidget",["dojo/_base/declare","dojo/text!./template/ActionsToolbarWidgetTemplate.html","dojo/window","dojo/topic","dojo/_base/lang","dojo/on","dojo/has","dojo/dom-style","dojo/dom-class","dojo/dom-construct","dijit/Menu","dijit/MenuItem","../base/UITemplatedWidget","./base/BookmarkListingWidget","./base/LocatorToolbarSupportMixin","./model/ActionsToolbarViewModel","./base/BasemapListingWidget","dijit/form/DropDownButton","dijit/form/ToggleButton"],function(_1,_2,_3,_4,_5,on,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10,_11,_12){return _1([_c,_e],{animateOnPlace:false,animate:true,showExtentActions:true,showExtentActionsOnMap:false,useBasemapGallery:false,basemapsDropdownWidth:"125px",bookmarksDropdownWidth:"224px",showLabelServicesButton:true,showConfigureLocatorsIcon:true,showLayersButton:true,showBookmarksButton:true,showToolsDropdownButton:true,configureLocatorTooltipVisible:false,locateDefaultInput:"Enter a location...",templateString:_2,constructor:function(_13){_5.mixin(this,_13||{});},postCreate:function(){this.inherited(arguments);this.viewModel=new _f();this.viewModel.showExtentActionsToolbar(this.showExtentActions);this.toolsDropDownMenu=new _a({});this.toolsDropDownButton.dropDown=this.toolsDropDownMenu;if(!this.showToolsDropdownButton){this.handleHideToolsButton();}else{this.handleShowToolsButton();}if(this.showLabelServicesButton){var _14=false;_4.publish(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.SERVICE_EXISTS,function(_15){_14=_15;});if(!_14){this.viewModel.showLabelsButton(false);}}else{this.viewModel.showLabelsButton(false);}if(!this.showLayersButton){this.viewModel.layersButtonVisible(false);}if(!this.showBookmarksButton){this.viewModel.showBookmarksButton(false);}if(!this.showLocator){this.viewModel.showLocator(false);}if(!this.showConfigureLocatorsIcon){this.viewModel.showConfigureLocatorsButton(false);}ko.applyBindings(this.viewModel,this.domNode);this.createToolbarDropDown();this.tweakUI();},loadViewerConfigurationData:function(){var _16=null;_4.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"animationsEnabled",function(_17){_16=_17;});if(_16!=null){this.animate=_16;}var _18=null;_4.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"toolsBar",function(_19){_18=_19;});if(_18&&_5.isObject(_18)){if(_18.showExtentActionsOnMap&&_18.showExtentActionsOnMap===true){this.showExtentActionsOnMap=true;}if(_18.showExtentActions!=null&&_18.showExtentActions===false){this.showExtentActions=false;}if(_18.showToolsDropdown!=null&&_18.showToolsDropdown===false){this.showToolsDropdownButton=false;}if(_18.showLayersButton!=null&&_18.showLayersButton===false){this.showLayersButton=false;}if(_18.showConfigureLocatorsIcon!=null&&_18.showConfigureLocatorsIcon===false){this.showConfigureLocatorsIcon=false;}if(_18.showBookmarksButton!=null&&_18.showBookmarksButton===false){this.showBookmarksButton=false;}if(_18.showLocator!=null&&_18.showLocator===false){this.showLocator=false;}}var _1a=null;_4.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_1b){_1a=_1b;});if(_1a!=null&&_5.isObject(_1a)){if(_1a.useBasemapGallery!=null&&_1a.useBasemapGallery===true){this.useBasemapGallery=true;}}},handleBookmarksWidgetVisibilityChanged:function(_1c){if(_1c){if(!this.useBasemapGallery){this.basemapListingWidget.hide();}else{var _1d;_4.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.IS_HIDDEN,function(_1e){_1d=_1e;});if(!_1d){_4.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.HIDE);}}this.handleDropdownContentVisibility(true,this.bookmarksDropdownWidth);}else{if(!this.useBasemapGallery){if(!this.basemapListingWidget.viewModel.visible()){this.handleDropdownContentVisibility(false);}}else{this.handleDropdownContentVisibility(false);}}},handleBasemapsWidgetVisibilityChanged:function(_1f){if(_1f){this.bookmarkListingWidget.hide();if(!this.useBasemapGallery){this.handleDropdownContentVisibility(true,this.basemapsDropdownWidth);}}else{if(!this.bookmarkListingWidget.viewModel.visible()){this.handleDropdownContentVisibility(false);}}},handleDropdownContentVisibility:function(_20,_21){if(!_20){this._showDropdownContent();}else{this._hideDropdownContent(_21);}},_hideDropdownContent:function(_22){if(_22!=null){_7.set(this.toolbarDropdownElement,"width",_22);}_7.set(this.toolbarDropdownElement,"display","block");if(this.animate){_8.add(this.toolbarDropdownElement,VIEWER_GLOBALS.ANIMATIONS.FADE.IN);}},_showDropdownContent:function(){_7.set(this.toolbarDropdownElement,"display","none");if(this.animate){_8.remove(this.toolbarDropdownElement,VIEWER_GLOBALS.ANIMATIONS.FADE.IN);}},toggleBasemapsListing:function(){if(!this.useBasemapGallery){this.basemapListingWidget.toggle();}else{var _23;_4.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.IS_HIDDEN,function(_24){_23=_24;});if(_23){_4.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.SHOW);if(this.bookmarkListingWidget.viewModel.visible()){this.bookmarkListingWidget.hide();}}else{_4.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.HIDE);}}},toggleBookmarksListing:function(){this.bookmarkListingWidget.toggle();},initListeners:function(){this.inherited(arguments);if(this.showToolsDropdownButton){_4.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.ADD_TOOL,_5.hitch(this,this.handleAddToolToMenu));}this.initLocatorListeners();if(this.showLabelServicesButton){_4.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REFERENCE_LAYER_ADDED,_5.hitch(this,this.handleReferenceLayerAdded));_4.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REFERENCE_LAYER_REMOVED,_5.hitch(this,this.handleReferenceLayerRemoved));this.labelsButton.on("change",_5.hitch(this,this.handleToggleLabels));on(this.layersButton,"click",_5.hitch(this,this.handleShowLayersWindow));}_4.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.HIDE_TOOLS_BUTTON,_5.hitch(this,this.handleHideToolsButton));_4.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.SHOW_TOOLS_BUTTON,_5.hitch(this,this.handleShowToolsButton));_4.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.HIDE_LAYERS_BUTTON,_5.hitch(this,this.handleHideLayersButton));_4.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.SHOW_LAYERS_BUTTON,_5.hitch(this,this.handleShowLayersButton));this.loadCurrentLocators();},handleShowLayersButton:function(){this.viewModel.layersButtonVisible(true);},handleHideLayersButton:function(){this.viewModel.layersButtonVisible(false);},handleShowToolsButton:function(){this.viewModel.toolsButtonVisible(true);},handleHideToolsButton:function(){this.viewModel.toolsButtonVisible(false);},handleShowLayersWindow:function(){_4.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.WIDGET.SHOW);},handleToggleLabels:function(_25){if(_25){_4.publish(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.SHOW);}else{_4.publish(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.HIDE);}},handleReferenceLayerRemoved:function(_26,_27){if(!_27){this.viewModel.showLabelsButton(false);}},handleReferenceLayerAdded:function(){this.viewModel.showLabelsButton(true);},setBasemaps:function(_28){if(!this.useBasemapGallery){this.basemapListingWidget.setBasemaps(_28);}},addStaticBookmarks:function(_29){if(this.bookmarkListingWidget){this.bookmarkListingWidget.addStaticBookmarks(_29,false);}},loadCookieBookmarks:function(){if(this.bookmarkListingWidget){this.bookmarkListingWidget.loadCookieBookmarks();}},createToolbarDropDown:function(){this.toolbarDropdownElement=_9.create("div",{className:"defaultBorder threePixelBorderRadius defaultBoxShadow toolbarDropdownContainer",style:{display:"none"}});_4.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAIN_TOOLBAR_DROP_DOWN,this.toolbarDropdownElement);this.bookmarkListingWidget=new _d();this.bookmarkListingWidget.placeAt(this.toolbarDropdownElement);this.bookmarkListingWidget.viewModel.visible.subscribe(_5.hitch(this,this.handleBookmarksWidgetVisibilityChanged));if(!this.useBasemapGallery){this.basemapListingWidget=new _10();this.basemapListingWidget.placeAt(this.toolbarDropdownElement);this.basemapListingWidget.viewModel.visible.subscribe(_5.hitch(this,this.handleBasemapsWidgetVisibilityChanged));}},tweakUI:function(){this.inherited(arguments);if(_6("ie")<9){_7.set(this.locateButton,"position","relative");_7.set(this.locateButton,"top","-2px");_7.set(this.configureLocateButton,"position","relative");_7.set(this.configureLocateButton,"top","-2px");}else{if(_6("ie")>=9){_7.set(this.locateButton,"height","17px");_7.set(this.configureLocateButton,"height","17px");_7.set(this.locateButton,"marginTop","0");_7.set(this.configureLocateButton,"marginTop","0");}else{if(_6("ff")){_7.set(this.locateButton,"marginTop","0");_7.set(this.configureLocateButton,"marginTop","0");}}}if(this.toolsDropDownButton){_7.set(this.toolsDropDownButton.domNode,"float","right");_7.set(this.toolsDropDownButton.domNode.firstChild,"background","none");_7.set(this.toolsDropDownButton.domNode.firstChild,"border","none");}_7.set(this.labelsButton.domNode,"float","right");_7.set(this.labelsButton.domNode,"marginRight","20px");_8.add(this.labelsButton.domNode,"defaultTextColor");_7.set(this.labelsButton.domNode.firstChild,"background","none");_7.set(this.labelsButton.domNode.firstChild,"border","none");var _2a=_3.getBox();if(_2a.w<1025){_7.set(this.locateTextBox,"width","120px");}if(this.showExtentActionsOnMap){_8.add(this.extentActionsToolbar,"extentActionsToolbarOnMap");}else{_8.add(this.extentActionsToolbar,"extentActionsToolbar");}},handleAddToolToMenu:function(_2b){if(_2b instanceof _b&&this.toolsDropDownMenu){this.toolsDropDownMenu.addChild(_2b);}},handleGotoPrevExtent:function(){_4.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_PREV_EXTENT);},handleGotoNextExtent:function(){_4.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_NEXT_EXTENT);},handleGotoFullExtent:function(){var _2c;_4.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,function(ext){_2c=ext;var _2d=_5.clone(_2c);_2d.xmin=-25924231.641352512;_2d.xmax=24169539.215607613;_2d.ymin=-12751827.549115097;_2d.ymax=22157269.016828995;_4.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,_2d);});},handleGotoInitialExtent:function(){_4.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_INITIAL_EXTENT);},handleGotoLastExtent:function(){_4.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_LAST_EXTENT);}});});