//>>built
require({cache:{"url:esriviewer/ui/toolbar/template/ActionsToolbarWidgetTemplate.html":"<div class='viewerMainToolbar headerFooterBg'>\r\n    <div class=\"mainToolbarContents\" data-dojo-attach-point=\"mainToolbarContents\">\r\n            <span data-bind=\"visible: toolsButtonVisible\"\r\n                  data-dojo-type=\"dijit/form/DropDownButton\"\r\n                  data-dojo-attach-point=\"toolsDropDownButton\"\r\n                  data-dojo-props=\"iconClass:'commonIcons16 wrench'\">\r\n                <span>Tools</span>\r\n            </span>\r\n\r\n        <div data-dojo-attach-point=\"layersButton\" class=\"actionsToolbarButton\"\r\n             data-bind=\"visible: layersButtonVisible\">\r\n            <div class=\"commonIcons16 layerList actionsToolbarIcon\"></div>\r\n            <div class=\"actionsToolbarText\">Layers</div>\r\n        </div>\r\n        <div data-dojo-attach-point=\"bookmarksButton\" class=\"actionsToolbarButton\"\r\n             data-bind=\"visible:showBookmarksButton\"\r\n             data-dojo-attach-event=\"onclick:toggleBookmarksListing\">\r\n            <div class=\"commonIcons16 bookmark actionsToolbarIcon\"></div>\r\n            <div class=\"actionsToolbarText\">Bookmarks</div>\r\n        </div>\r\n        <div data-dojo-attach-point=\"basemapsButton\" class=\"actionsToolbarButton\"\r\n             data-dojo-attach-event=\"onclick:toggleBasemapsListing\">\r\n            <div class=\"commonIcons16 blocks actionsToolbarIcon\"></div>\r\n            <div class=\"actionsToolbarText\">Basemaps</div>\r\n\r\n        </div>\r\n        <span data-bind=\"visible:showLabelsButton\">\r\n            <span data-dojo-type=\"dijit/form/ToggleButton\"\r\n                  data-dojo-attach-point=\"labelsButton\"\r\n                  data-dojo-props=\"iconClass:'dijitCheckBoxIcon'\">Labels</span>\r\n        </span>\r\n\r\n        <div data-dojo-attach-point=\"addOnContentContainer\"></div>\r\n        <div class=\"locateToolbarContainer locateToolbarContainerOnMap\" data-dojo-attach-point=\"locateToolbarContainer\"\r\n             data-bind=\"visible: showLocator\">\r\n            <input value=\"${locateDefaultInput}\" type=\"text\" class=\"locateTextBox defaultBorder\"\r\n                   data-dojo-attach-point=\"locateTextBox\"/>\r\n\r\n            <div data-dojo-attach-point=\"locateButton\" title=\"Locate\"\r\n                 class=\"defaultBorder searchButton searchButtonIcon\"></div>\r\n            <div data-dojo-attach-point=\"configureLocateButton\"\r\n                 data-bind=\"visible:showConfigureLocatorsButton\"\r\n                 data-dojo-attach-event=\"onclick:toggleConfigureLocatorTooltip\" title=\"Configure Locate\"\r\n                 class=\"defaultBorder configureLocate configureButtonIcon\"></div>\r\n        </div>\r\n        <div class=\"extentActionsToolbar\" data-bind=\"visible:showExtentActionsToolbar\">\r\n            <div class=\"smallActionsToolbarButton\">\r\n                <div data-dojo-attach-point=\"initialExtentButton\" title=\"Initial Extent\"\r\n                     class=\"commonIcons16 firstItem\"\r\n                     data-dojo-attach-event=\"onclick:handleGotoInitialExtent\"></div>\r\n            </div>\r\n            <div class=\"smallActionsToolbarButton\">\r\n                <div data-dojo-attach-point=\"prevExtentButton\" title=\"Previous Extent\"\r\n                     class=\"commonIcons16 previousGray\"\r\n                     data-bind=\"css:{previous: prevExtentEnabled()}\"\r\n                     data-dojo-attach-event=\"onclick:handleGotoPrevExtent\"></div>\r\n            </div>\r\n            <div class=\"smallActionsToolbarButton\">\r\n                <div data-dojo-attach-point=\"nextExtentButton\" title=\"Full Extent\"\r\n                     class=\"commonIcons16 locationGoTo\"\r\n                     data-dojo-attach-event=\"onclick:handleGotoFullExtent\"></div>\r\n            </div>\r\n            <div class=\"smallActionsToolbarButton\">\r\n                <div data-dojo-attach-point=\"nextExtentButton\" title=\"Next Extent\"\r\n                     class=\"commonIcons16 nextGray\"\r\n                     data-bind=\"css:{next: nextExtentEnabled()}\"\r\n                     data-dojo-attach-event=\"onclick:handleGotoNextExtent\"></div>\r\n            </div>\r\n            <div class=\"smallActionsToolbarButton\">\r\n                <div data-dojo-attach-point=\"lastExtentButton\" title=\"Last Extent\"\r\n                     class=\"commonIcons16 lastItem\"\r\n                     data-dojo-attach-event=\"onclick:handleGotoLastExtent\"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n"}});define("esriviewer/ui/toolbar/ActionsToolbarWidget",["dojo/_base/declare","dojo/text!./template/ActionsToolbarWidgetTemplate.html","dojo/topic","dojo/_base/lang","dojo/on","dojo/window","dojo/_base/window","dojo/has","dojo/dom-style","dojo/dom-class","dojo/dom-construct","dijit/Menu","dijit/MenuItem","../base/UITemplatedWidget","./base/BookmarkListingWidget","./base/LocatorToolbarSupportMixin","./model/ActionsToolbarViewModel","./base/BasemapListingWidget","dijit/form/DropDownButton","dijit/form/ToggleButton"],function(_1,_2,_3,_4,on,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10,_11,_12,_13){return _1([_d,_f],{animateOnPlace:false,animate:true,showExtentActions:true,useBasemapGallery:false,basemapsDropdownWidth:"125px",bookmarksDropdownWidth:"224px",showLabelServicesButton:true,showConfigureLocatorsIcon:true,showLayersButton:true,showBookmarksButton:true,showToolsDropdownButton:true,configureLocatorTooltipVisible:false,locateDefaultInput:"Enter a location...",templateString:_2,constructor:function(_14){_4.mixin(this,_14||{});},postCreate:function(){this.inherited(arguments);this.viewModel=new _10();this.viewModel.showExtentActionsToolbar(this.showExtentActions);this.toolsDropDownMenu=new _b({});this.toolsDropDownButton.dropDown=this.toolsDropDownMenu;if(!this.showToolsDropdownButton){this.handleHideToolsButton();}else{this.handleShowToolsButton();}if(this.showLabelServicesButton){var _15=false;_3.publish(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.SERVICE_EXISTS,function(_16){_15=_16;});if(!_15){this.viewModel.showLabelsButton(false);}}else{this.viewModel.showLabelsButton(false);}if(!this.showLayersButton){this.viewModel.layersButtonVisible(false);}if(!this.showBookmarksButton){this.viewModel.showBookmarksButton(false);}if(!this.showLocator){this.viewModel.showLocator(false);}if(!this.showConfigureLocatorsIcon){this.viewModel.showConfigureLocatorsButton(false);}ko.applyBindings(this.viewModel,this.domNode);this.createToolbarDropDown();this.tweakUI();},loadViewerConfigurationData:function(){var _17=null;_3.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"animationsEnabled",function(_18){_17=_18;});if(_17!=null){this.animate=_17;}var _19=null;_3.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"toolsBar",function(_1a){_19=_1a;});if(_19&&_4.isObject(_19)){if(_19.showExtentActions!=null&&_19.showExtentActions===false){this.showExtentActions=false;}if(_19.showToolsDropdown!=null&&_19.showToolsDropdown===false){this.showToolsDropdownButton=false;}if(_19.showLayersButton!=null&&_19.showLayersButton===false){this.showLayersButton=false;}if(_19.showConfigureLocatorsIcon!=null&&_19.showConfigureLocatorsIcon===false){this.showConfigureLocatorsIcon=false;}if(_19.showBookmarksButton!=null&&_19.showBookmarksButton===false){this.showBookmarksButton=false;}if(_19.showLocator!=null&&_19.showLocator===false){this.showLocator=false;}}var _1b=null;_3.publish(VIEWER_GLOBALS.EVENTS.CONFIGURATION.GET_ENTRY,"map",function(_1c){_1b=_1c;});if(_1b!=null&&_4.isObject(_1b)){if(_1b.useBasemapGallery!=null&&_1b.useBasemapGallery===true){this.useBasemapGallery=true;}}},handleBookmarksWidgetVisibilityChanged:function(_1d){if(_1d){if(!this.useBasemapGallery){this.basemapListingWidget.hide();}else{var _1e;_3.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.IS_HIDDEN,function(_1f){_1e=_1f;});if(!_1e){_3.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.HIDE);}}this.handleDropdownContentVisiblility(true,this.bookmarksDropdownWidth);}else{if(!this.useBasemapGallery){if(!this.basemapListingWidget.viewModel.visible()){this.handleDropdownContentVisiblility(false);}}else{this.handleDropdownContentVisiblility(false);}}},handleBasemapsWidgetVisibilityChanged:function(_20){if(_20){this.bookmarkListingWidget.hide();if(!this.useBasemapGallery){this.handleDropdownContentVisiblility(true,this.basemapsDropdownWidth);}}else{if(!this.bookmarkListingWidget.viewModel.visible()){this.handleDropdownContentVisiblility(false);}}},handleDropdownContentVisiblility:function(_21,_22){if(!_21){this._showDropdownContent();}else{this._hideDropdownContent(_22);}},_hideDropdownContent:function(_23){if(_23!=null){_8.set(this.toolbarDropdownElement,"width",_23);}_8.set(this.toolbarDropdownElement,"display","block");if(this.animate){_9.add(this.toolbarDropdownElement,VIEWER_GLOBALS.ANIMATIONS.FADE.IN);}},_showDropdownContent:function(){_8.set(this.toolbarDropdownElement,"display","none");if(this.animate){_9.remove(this.toolbarDropdownElement,VIEWER_GLOBALS.ANIMATIONS.FADE.IN);}},toggleBasemapsListing:function(){if(!this.useBasemapGallery){this.basemapListingWidget.toggle();}else{var _24;_3.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.IS_HIDDEN,function(_25){_24=_25;});if(_24){_3.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.SHOW);if(this.bookmarkListingWidget.viewModel.visible()){this.bookmarkListingWidget.hide();}}else{_3.publish(VIEWER_GLOBALS.EVENTS.MAP.BASEMAP.GALLERY.HIDE);}}},toggleBookmarksListing:function(){this.bookmarkListingWidget.toggle();},initListeners:function(){this.inherited(arguments);if(this.showToolsDropdownButton){_3.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.ADD_TOOL,_4.hitch(this,this.handleAddToolToMenu));}this.initLocatorListeners();if(this.showLabelServicesButton){_3.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REFERENCE_LAYER_ADDED,_4.hitch(this,this.handleReferenceLayerAdded));_3.subscribe(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.REFERENCE_LAYER_REMOVED,_4.hitch(this,this.handleReferenceLayerRemoved));this.labelsButton.on("change",_4.hitch(this,this.handleToggleLabels));on(this.layersButton,"click",_4.hitch(this,this.handleShowLayersWindow));}_3.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.HIDE_TOOLS_BUTTON,_4.hitch(this,this.handleHideToolsButton));_3.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.SHOW_TOOLS_BUTTON,_4.hitch(this,this.handleShowToolsButton));_3.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.HIDE_LAYERS_BUTTON,_4.hitch(this,this.handleHideLayersButton));_3.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.MENU.SHOW_LAYERS_BUTTON,_4.hitch(this,this.handleShowLayersButton));this.loadCurrentLocators();},handleShowLayersButton:function(){this.viewModel.layersButtonVisible(true);},handleHideLayersButton:function(){this.viewModel.layersButtonVisible(false);},handleShowToolsButton:function(){this.viewModel.toolsButtonVisible(true);},handleHideToolsButton:function(){this.viewModel.toolsButtonVisible(false);},handleShowLayersWindow:function(){_3.publish(VIEWER_GLOBALS.EVENTS.MAP.LAYERS.WIDGET.SHOW);},handleToggleLabels:function(_26){if(_26){_3.publish(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.SHOW);}else{_3.publish(VIEWER_GLOBALS.EVENTS.MAP.LABEL_SERVICES.HIDE);}},handleReferenceLayerRemoved:function(_27,_28){if(!_28){this.viewModel.showLabelsButton(false);}},handleReferenceLayerAdded:function(){var _29=_8.get(this.labelsButton.domNode,"display");if(_29.toLowerCase()==="none"){this.viewModel.showLabelsButton(true);}},setBasemaps:function(_2a){if(!this.useBasemapGallery){this.basemapListingWidget.setBasemaps(_2a);}},addStaticBookmarks:function(_2b){if(this.bookmarkListingWidget){this.bookmarkListingWidget.addStaticBookmarks(_2b,false);}},loadCookieBookmarks:function(){if(this.bookmarkListingWidget){this.bookmarkListingWidget.loadCookieBookmarks();}},createToolbarDropDown:function(){this.toolbarDropdownElement=_a.create("div",{className:"defaultBorder threePixelBorderRadius defaultBoxShadow toolbarDropdownContainer",style:{display:"none"}});_3.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAIN_TOOLBAR_DROP_DOWN,this.toolbarDropdownElement);this.bookmarkListingWidget=new _e();this.bookmarkListingWidget.placeAt(this.toolbarDropdownElement);this.bookmarkListingWidget.viewModel.visible.subscribe(_4.hitch(this,this.handleBookmarksWidgetVisibilityChanged));if(!this.useBasemapGallery){this.basemapListingWidget=new _11();this.basemapListingWidget.placeAt(this.toolbarDropdownElement);this.basemapListingWidget.viewModel.visible.subscribe(_4.hitch(this,this.handleBasemapsWidgetVisibilityChanged));}},tweakUI:function(){this.inherited(arguments);if(_7("ie")<9){_8.set(this.locateButton,"position","relative");_8.set(this.locateButton,"top","-2px");_8.set(this.configureLocateButton,"position","relative");_8.set(this.configureLocateButton,"top","-2px");}else{if(_7("ie")>=9){_8.set(this.locateButton,"height","17px");_8.set(this.configureLocateButton,"height","17px");_8.set(this.locateButton,"marginTop","0");_8.set(this.configureLocateButton,"marginTop","0");}else{if(_7("ff")){_8.set(this.locateButton,"marginTop","0");_8.set(this.configureLocateButton,"marginTop","0");}}}if(this.toolsDropDownButton){_8.set(this.toolsDropDownButton.domNode,"float","right");_8.set(this.toolsDropDownButton.domNode.firstChild,"background","none");_8.set(this.toolsDropDownButton.domNode.firstChild,"border","none");}_8.set(this.labelsButton.domNode,"float","right");_8.set(this.labelsButton.domNode,"marginRight","20px");_9.add(this.labelsButton.domNode,"defaultTextColor");_8.set(this.labelsButton.domNode.firstChild,"background","none");_8.set(this.labelsButton.domNode.firstChild,"border","none");},handleAddToolToMenu:function(_2c){if(_2c instanceof _c&&this.toolsDropDownMenu){this.toolsDropDownMenu.addChild(_2c);}},handleGotoPrevExtent:function(){_3.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_PREV_EXTENT);},handleGotoNextExtent:function(){_3.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_NEXT_EXTENT);},handleGotoFullExtent:function(){var _2d;_3.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GET_EXTENT,function(ext){_2d=ext;var _2e=_4.clone(_2d);_2e.xmin=-25924231.641352512;_2e.xmax=24169539.215607613;_2e.ymin=-12751827.549115097;_2e.ymax=22157269.016828995;_3.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.SET_EXTENT,_2e);});},handleGotoInitialExtent:function(){_3.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_INITIAL_EXTENT);},handleGotoLastExtent:function(){_3.publish(VIEWER_GLOBALS.EVENTS.MAP.EXTENT.GO_LAST_EXTENT);}});});