//>>built
define("esriviewer/manager/base/ViewerManagerUI",["dojo/_base/declare","dojo/_base/lang","dojo/topic","./../../ui/user/location/UserLocationWidget","../../ui/footer/FooterTogglerWidget","../../ui/messaging/MessagingWidget","../../ui/navigation/NavigationWidget","../../ui/throbber/ThrobberWidget","../../ui/accordion/ToolsAccordion","dojo/Evented"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a){return _1([_a],{FINALIZE_UI_LOAD_COMPLETE:"finalizeUILoadComplete",loadUI:function(){var _b=true;if(_2.isObject(this.viewerConfig.header)){if(this.viewerConfig.header.display!=null){_b=!(String(this.viewerConfig.header.display).toLowerCase()=="false");}}if(_b){this._createHeaderLogo();}this._createIdentifyWidget();this._createMeasureWidget();this._createQueryBuilderWidget();this._createReverseGeocodeWidget();this.createFooterWidget();this._createConfigureViewerWidget();this._createDrawWidget();this._createLegendWidget();this._createReflectivityWidget();var _c=true;if(_2.isObject(this.viewerConfig.toolsBar)){if(this.viewerConfig.toolsBar.display!=null){_c=!(String(this.viewerConfig.toolsBar.display).toLowerCase()=="false");}}if(_c){this._createViewerMainToolbar();}this._createWeatherWidget();this._createTimeSliderWidget();if(VIEWER_UTILS.isHtml5FileUploadSupported()){this._createPointUploadWidget();}else{VIEWER_UTILS.log("Point upload widget disabled. HTML 5 not supported",VIEWER_GLOBALS.LOG_TYPE.WARNING);}this._createFeatureEditorWidget();this._createSocialMediaWidget();this._createPrintWidget();this._createZoomToWidget();this._createZoomToUserLocationWidget();this._createLayersTransparencyWidget();this._createViewerAccordion();this._createPortalPublisherWidget();this._createPlottingWidget();this._createZoomInOutWidget();this.finalizeUILoad();},_createViewerAccordion:function(){if(this.viewerConfig.toolsAccordion.create==null||this.viewerConfig.toolsAccordion.create!=false){_3.subscribe(VIEWER_GLOBALS.EVENTS.TOOLS.ACCORDION.LOAD_DEFAULT_TOOLS,_2.hitch(this,this.createDefaultAccordionTools));this.viewerAccordion=new _9({allowCollapse:this.allowAccordionCollapse,movable:this.allowAccordionMove});_3.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.VIEWER_ACCORDION,this.viewerAccordion);}},finalizeUILoad:function(){if(this.viewerAccordion!=null){this.viewerAccordion.startup();var _d=true;}this.createThrobberWidget();this.emit(this.FINALIZE_UI_LOAD_COMPLETE);},_createHeaderLogo:function(){require(["esriviewer/ui/header/HeaderLogo"],_2.hitch(this,function(_e){this.headerLogo=new _e();_3.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.HEADER,this.headerLogo);}));},_createIdentifyWidget:function(){if(this.viewerConfig.identifyWidget!=null&&_2.isObject(this.viewerConfig.identifyWidget)&&this.viewerConfig.identifyWidget.create!=null&&this.viewerConfig.identifyWidget.create==true){this.createIdentifyWidget();}},createIdentifyWidget:function(){},_createMeasureWidget:function(){if(this.viewerConfig.geometryServiceUrl!=null&&this.viewerConfig.geometryServiceUrl){if(this.viewerConfig.measureWidget==null||(_2.isObject(this.viewerConfig.measureWidget)&&this.viewerConfig.measureWidget.create!=false)){this.createMeasureWidget();}}},createMeasureWidget:function(){},_createPrintWidget:function(){if(this.viewerConfig.printWidget==null||(_2.isObject(this.viewerConfig.printWidget)&&this.viewerConfig.printWidget.create!=null&&this.viewerConfig.printWidget.create&&this.viewerConfig.printWidget.printTaskUrl!=null)){this.createPrintWidget();}},createPrintWidget:function(){},_createSocialMediaWidget:function(){if(this.viewerConfig.socialMediaWidget==null||(_2.isObject(this.viewerConfig.socialMediaWidget)&&this.viewerConfig.socialMediaWidget.create!=null&&this.viewerConfig.socialMediaWidget.create)){this.createSocialMediaWidget();}},createSocialMediaWidget:function(){},_createFeatureEditorWidget:function(){if(this.viewerConfig.featureEditorWidget!=null&&this.viewerConfig.featureEditorWidget.service!=null&&this.viewerConfig.featureEditorWidget.service.url!=""){this.createFeatureEditorWidget();}},createFeatureEditorWidget:function(){},_createZoomToUserLocationWidget:function(){if(navigator&&navigator.geolocation&&this.viewerConfig.zoomToUserLocationWidget!=null&&_2.isObject(this.viewerConfig.zoomToUserLocationWidget)&&this.viewerConfig.zoomToUserLocationWidget.create===true){this.createZoomToUserLocationWidget();}},createZoomToUserLocationWidget:function(){this.userLocationWidget=new _4();_3.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.USER_LOCATION,this.userLocationWidget);},_createZoomToWidget:function(){if(this.viewerConfig.zoomToWidget==null||(_2.isObject(this.viewerConfig.zoomToWidget)&&this.viewerConfig.zoomToWidget.create!=null&&this.viewerConfig.zoomToWidget.create)){this.createZoomToWidget();}},createZoomToWidget:function(){},_createPointUploadWidget:function(){if(this.viewerConfig.pointUploadWidget!=null&&this.viewerConfig.pointUploadWidget.create==true){this.createPointUploadWidget();}},createPointUploadWidget:function(){},_createTimeSliderWidget:function(){if(!this.forceHideCoreTimeSlider&&(this.viewerConfig.timeSliderWidget!=null&&this.viewerConfig.timeSliderWidget.create!=false)){this.createTimeSliderWidget();}},createTimeSliderWidget:function(){},_createLayersTransparencyWidget:function(){if(this.viewerConfig.layersTransparencyWidget==null||(_2.isObject(this.viewerConfig.layersTransparencyWidget)&&this.viewerConfig.layersTransparencyWidget.create!=null&&this.viewerConfig.layersTransparencyWidget.create)){this.createLayersTransparencyWidget();}},createLayersTransparencyWidget:function(){},_createConfigureViewerWidget:function(){if(this.viewerConfig.configureWidget==null||this.viewerConfig.configureWidget.create==null||this.viewerConfig.configureWidget.create==true){this.createConfigureViewerWidget();}},createConfigureViewerWidget:function(){},_createReverseGeocodeWidget:function(){if(this.viewerConfig.reverseGeocodeWidget==null||this.viewerConfig.reverseGeocodeWidget.create==null||this.viewerConfig.reverseGeocodeWidget.create==true){if(this.viewerConfig.locators!=null&&_2.isArray(this.viewerConfig.locators)&&this.viewerConfig.locators.length>0){this.createReverseGeocodeWidget();}}},createReverseGeocodeWidget:function(){},_createQueryBuilderWidget:function(){if(this.viewerConfig.queryBuilder&&this.viewerConfig.queryBuilder.create!=null&&this.viewerConfig.queryBuilder.create){this.createQueryBuilderWidget();}},createQueryBuilderWidget:function(){},_createWeatherWidget:function(){if(_2.isObject(this.viewerConfig.weatherWidget)&&this.viewerConfig.weatherWidget.create!=null&&this.viewerConfig.weatherWidget.create==true){this.createWeatherWidget();}},createWeatherWidget:function(){},_createPlottingWidget:function(){if(_2.isObject(this.viewerConfig.plottingWidget)&&this.viewerConfig.plottingWidget.create!=null&&this.viewerConfig.plottingWidget.create==true){this.createPlottingWidget();}},createPlottingWidget:function(){},_createZoomInOutWidget:function(){if(_2.isObject(this.viewerConfig.zoomInAndOutWidget)&&this.viewerConfig.zoomInAndOutWidget.create!=null&&this.viewerConfig.zoomInAndOutWidget.create==true){this.createZoomInOutWidget();}},createZoomInOutWidget:function(){},_createPortalPublisherWidget:function(){if(this.viewerConfig.portal!=null&&_2.isObject(this.viewerConfig.portal)&&this.viewerConfig.portal.url){if(this.viewerConfig.portalPublisher&&this.viewerConfig.portalPublisher.window&&this.viewerConfig.portalPublisher.window.create){this.createPortalPublisherWidget();}}},createPortalPublisherWidget:function(){},createFooterWidget:function(){var _f=false;if(_2.isObject(this.viewerConfig.footerTogglerWidget)){if(this.viewerConfig.footerTogglerWidget.create!=null){_f=!(String(this.viewerConfig.footerTogglerWidget.create).toLowerCase()=="false");}}if(_f){this.footerTogglerWidget=new _5();this.footerTogglerWidget.on("firstFooterShow",_2.hitch(this,this.handleFirstFooterShow));_3.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.FOOTER,this.footerTogglerWidget);}},handleFirstFooterShow:function(){},_createLoggingWidget:function(){if(this.viewerConfig.logging&&this.viewerConfig.logging.window&&this.viewerConfig.logging.window.create){this.createLoggingWidget();}},createLoggingWidget:function(){},_createMessagingWidget:function(){this.messagingWidget=new _6();_3.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MESSAGING,this.messagingWidget);},createThrobberWidget:function(){this.loadingThrobber=new _8();_3.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.THROBBER,this.loadingThrobber);},_createReflectivityWidget:function(){if(this.viewerConfig.reflectivityWidget!=null&&_2.isObject(this.viewerConfig.reflectivityWidget)&&this.viewerConfig.reflectivityWidget.create==true){this.createReflectivityWidget();}},createReflectivityWidget:function(){},_createLegendWidget:function(){if(this.viewerConfig.map.legend==null||this.viewerConfig.map.legend.create==true){this.createLegendWidget();}},createLegendWidget:function(){},_createNavigationToolbar:function(){this.createNavigationToolbar();if(this.navigationToolbar){_3.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.NAVIGATION_TOOLBAR,this.navigationToolbar);}this.processNavigationToolbarAddons();},processNavigationToolbarAddons:function(){},createNavigationToolbar:function(){this.navigationToolbar=new _7();},_createDrawWidget:function(){if(this.viewerConfig.drawWidget==null||!_2.isObject(this.viewerConfig.drawWidget)||this.viewerConfig.drawWidget.create==null||this.viewerConfig.drawWidget.create!=false){this.createDrawWidget();}},createDrawWidget:function(){},_createViewerMainToolbar:function(){require(["esriviewer/ui/toolbar/ActionsToolbarWidget"],_2.hitch(this,function(_10){this.mainToolbar=new _10();_3.publish(VIEWER_GLOBALS.EVENTS.PLACEMENT.GLOBAL.PLACE.MAIN_TOOLBAR,this.mainToolbar);if(_2.isObject(this.viewerConfig.map)){this.mainToolbar.setBasemaps(this.viewerConfig.map.basemaps);}this.createViewerDefaultTools();this._createNavigationToolbar();this._createBookmarkController();this.tweakMainToolbar();}));},tweakMainToolbar:function(){},createViewerDefaultTools:function(){require(["esriviewer/ui/tools/ViewerDefaultTools"],_2.hitch(this,function(_11){this.viewerDefaultTools=new _11();this.createAddonTools();this.viewerDefaultTools.createConfigurationMenuItem();}));},createAddonTools:function(){},_createBookmarkController:function(){require(["esriviewer/ui/bookmark/BookmarkController"],_2.hitch(this,function(_12){this.bookmarkController=new _12();this._loadBookmarks();}));},_loadBookmarks:function(){if(_2.isObject(this.viewerConfig.bookmarks)&&this.viewerConfig.bookmarks.url!=null){var _13=_2.hitch(this,function(_14){this._setServerBookmarks(_14);});this.loadJson(this.viewerConfig.bookmarks.url,_13);}if(this.mainToolbar){this.mainToolbar.loadCookieBookmarks();}},_setServerBookmarks:function(_15){if(this.mainToolbar){this.mainToolbar.addStaticBookmarks(_15);}}});});