//>>built
define("esriviewer/util/ViewerUtils",["dojo/_base/declare","dojo/keys","dojo/_base/lang","dojo/dom-style","dojox/uuid/Uuid","dojox/uuid/generateTimeBasedUuid","dojo/Deferred","dojo/topic","esri/request"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9){return _1([],{isDebug:false,constructor:function(_a){_3.mixin(this,_a||{});_5.setGenerator(_6);},debug:function(_b){if(this.isDebug){this.log(_b,VIEWER_GLOBALS.LOG_TYPE.INFO);}},log:function(_c,_d){if(_c==null||_c===""){return;}_8.publish(VIEWER_GLOBALS.EVENTS.LOGGING.ADD,_c,_d);},handleContainerMoved:function(_e,_f){var _10=false;var _11=false;if(_f.l<3){_4.set(_e.node,"left","3px");_10=true;}var _12=(VIEWER_GLOBALS.WINDOW&&VIEWER_GLOBALS.WINDOW.TOP_POSITION_MOVE_OFFSET)?(VIEWER_GLOBALS.WINDOW.TOP_POSITION_MOVE_OFFSET):3;if(_f.t<_12){_4.set(_e.node,"top",_12+"px");_11=true;}if(_10&&_11){return;}var _13=dijit.getViewport();if(!_10){var _14=_4.get(_e.node,"width");var _15=_4.get(_e.node,"left");var _16=_15+_14;if(_16>(_13.w-3)){_4.set(_e.node,"left",(_13.w-_14-3)+"px");}}if(!_11){var _17=_4.get(_e.node,"height");var _18=_4.get(_e.node,"top");var _19=_18+_17;if(_19>(_13.h-3)){_4.set(_e.node,"top",(_13.h-_17-5)+"px");}}},generateUUID:function(){var _1a=new _5();return _1a.toString();},getTimeStamp:function(){var _1b=new Date();var _1c=_1b.getHours();if(_1c<12){if(_1c==0){_1c=12;}}else{if(_1c!=12){_1c=_1c-12;}}_1c=_1c.toString();if(_1c.length<2){_1c="0"+_1c;}var _1d=_1b.getMinutes().toString();if(_1d.length<2){_1d="0"+_1d;}var _1e=_1b.getSeconds().toString();if(_1e.length<2){_1e="0"+_1e;}return _1c+":"+_1d+":"+_1e;},sendJsonPQuery:function(url,_1f,_20,_21,_22){if(_21==null){_21=_3.hitch(this,function(_23){var msg="Could not resource : "+url+". Please verify URL is accessible.";VIEWER_UTILS.log(msg,VIEWER_GLOBALS.LOG_TYPE.ERROR);_8.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,msg);});}if(_22==null){_22="callback";}var _24={callbackParamName:_22,content:_1f,url:url};_9(_24).then(_20,_21);},isEnterKey:function(e){return e.keyCode==_2.ENTER;},joinUrl:function(url,_25){var _26=url.lastIndexOf("/")==url.length-1;if(!_26){url+="/";}if(_25[0]==="/"){_25=_25.substring(1);}return url+_25;},getLayerInfoFromService:function(_27,_28,_29,_2a){if(_2a==null){_2a="callback";}var _2b=_3.hitch(this,function(_2c){var msg="could not load layer from service: "+_2d;VIEWER_UTILS.log(msg,VIEWER_GLOBALS.LOG_TYPE.ERROR);_8.publish(VIEWER_GLOBALS.EVENTS.MESSAGING.SHOW,msg);});if(_27!=null&&_28!=null&&_29){var _2d=_27+"/"+_28;}var _2e={callbackParamName:_2a,content:{f:"json"},url:_2d};_9(_2e).then(_29,_2b);},trim:function(str){return str.replace(/^\s*/,"").replace(/\s*$/,"");},endsWith:function(_2f,_30){var _31=_2f.lastIndexOf(_30);return (_31!=-1)&&(_31+_30.length==_2f.length);},getFileExtension:function(_32){var _33=_32.lastIndexOf(".");if(_33<0||_33===_32.length-1){return "";}return _32.substr(_33+1);},getFileExtensionLower:function(_34){return this.getFileExtension(_34).toLowerCase();},getServiceTypeFromUrl:function(url){if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.MAP_SERVER;}else{if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.IMAGE_SERVER;}else{if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GP_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GP_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.GP_SERVER;}else{if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GLOBE_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GLOBE_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.GLOBE_SERVER;}else{if(this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GEOCODE_SERVER)||this.endsWith(url,VIEWER_GLOBALS.SERVICE_TYPES.GEOCODE_SERVER+"/")){return VIEWER_GLOBALS.SERVICE_TYPES.GEOCODE_SERVER;}else{if(REG_EXP_UTILS.isKMLExtension(url)){return VIEWER_GLOBALS.SERVICE_TYPES.KML;}else{if(REG_EXP_UTILS.isFeatureLayer(url)){return VIEWER_GLOBALS.SERVICE_TYPES.FEATURE_SERVER;}else{return null;}}}}}}}},getServiceDescription:function(_35,_36,_37,_38){if(_38==null){_38="callback";}if(_37==null){_37=_3.hitch(this,function(_39){var msg="Could not load service description for : "+_35+". Please verify service is online.";});}if(_35!=null&&_36){var _3a={callbackParamName:_38,content:{f:"json"},url:_35};_9(_3a).then(_36,_37);}},getLayerNameFromLayer:function(_3b){if(_3b.layerAliasName!=null&&_3b.layerAliasName!=""){return _3b.layerAliasName;}else{if(_3b.name!=null&&_3b.name!=""){return _3b.name;}else{if(_3b.id!=null){return _3b.id;}else{if(_3b.url!=null){return _3b.url;}}}}return "Layer";},getLabelForEsriUnit:function(_3c){if(_3c===VIEWER_GLOBALS.ESRI_UNITS.METERS){return "meters";}else{if(_3c===VIEWER_GLOBALS.ESRI_UNITS.FEET){return "feet";}else{if(_3c===VIEWER_GLOBALS.ESRI_UNITS.YARDS){return "yards";}else{if(_3c===VIEWER_GLOBALS.ESRI_UNITS.MILES){return "miles";}else{if(_3c===VIEWER_GLOBALS.ESRI_UNITS.NAUTICAL_MILES){return "nautical miles";}else{if(_3c===VIEWER_GLOBALS.ESRI_UNITS.MILLIMETERS){return "millimeters";}else{if(_3c===VIEWER_GLOBALS.ESRI_UNITS.CENTIMETERS){return "centimeters";}else{if(_3c===VIEWER_GLOBALS.ESRI_UNITS.DECIMETERS){return "decimeters";}else{if(_3c===VIEWER_GLOBALS.ESRI_UNITS.KILOMETERS){return "kilometers";}else{if(_3c===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_MILES){return "square miles";}else{if(_3c===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_METERS){return "square meters";}else{if(_3c===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_KILOMETERS){return "square kilometers";}else{if(_3c===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_ARES){return "square ares";}else{if(_3c===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_HECTARES){return "square hectares";}else{if(_3c===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_CENTIMETERS){return "square centimeters";}else{if(_3c===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_DECIMETERS){return "square decimeters";}else{if(_3c===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_FEET){return "square feet";}else{if(_3c===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_INCHES){return "square inches";}else{if(_3c===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_MILLIMETERS){return "square millimeters";}else{if(_3c===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_YARDS){return "square yards";}else{if(_3c===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_UNKNOWN){return "square unknown";}else{if(_3c===VIEWER_GLOBALS.ESRI_UNITS.DECIMAL_DEGREES){return "decimal degrees";}}}}}}}}}}}}}}}}}}}}}}return "unknown";},getShortLabelForEsriUnit:function(_3d){if(_3d===VIEWER_GLOBALS.ESRI_UNITS.METERS){return "m";}else{if(_3d===VIEWER_GLOBALS.ESRI_UNITS.FEET){return "f";}else{if(_3d===VIEWER_GLOBALS.ESRI_UNITS.YARDS){return "y";}else{if(_3d===VIEWER_GLOBALS.ESRI_UNITS.MILES){return "M";}else{if(_3d===VIEWER_GLOBALS.ESRI_UNITS.NAUTICAL_MILES){return "NM";}else{if(_3d===VIEWER_GLOBALS.ESRI_UNITS.MILLIMETERS){return "mm";}else{if(_3d===VIEWER_GLOBALS.ESRI_UNITS.CENTIMETERS){return "cm";}else{if(_3d===VIEWER_GLOBALS.ESRI_UNITS.DECIMETERS){return "dm";}else{if(_3d===VIEWER_GLOBALS.ESRI_UNITS.KILOMETERS){return "KM";}else{if(_3d===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_MILES){return "square miles";}else{if(_3d===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_METERS){return "Sq m";}else{if(_3d===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_KILOMETERS){return "Sq KM";}else{if(_3d===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_ARES){return "Sq Ares";}else{if(_3d===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_HECTARES){return "Sq Hectares";}else{if(_3d===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_CENTIMETERS){return "Sq cm";}else{if(_3d===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_DECIMETERS){return "Sq dm";}else{if(_3d===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_FEET){return "Sq f";}else{if(_3d===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_INCHES){return "Sq in";}else{if(_3d===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_MILLIMETERS){return "Sq mm";}else{if(_3d===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_YARDS){return "Sq y";}else{if(_3d===VIEWER_GLOBALS.ESRI_UNITS.SQUARE_UNKNOWN){return "Sq unknown";}else{if(_3d===VIEWER_GLOBALS.ESRI_UNITS.DECIMAL_DEGREES){return "Dec. Deg.";}}}}}}}}}}}}}}}}}}}}}}return "Unknown";},getFieldTypeFromLayer:function(_3e,_3f){var _40=_3f.fields?_3f.fields:(_3f.serviceDescription?_3f.serviceDescription.fields:[]);if(_3f&&_40&&_3e){for(var i=0;i<_40.length;i++){if(_40[i].alias===_3e||_40[i].name===_3e){return _40[i].type;}}}return null;},getFileNameFromAtEndOfUrl:function(_41){if(_41==null||_41.lastIndexOf("/")<0){return "";}_41=_41.substring(0,(_41.indexOf("#")==-1)?_41.length:_41.indexOf("#"));_41=_41.substring(0,(_41.indexOf("?")==-1)?_41.length:_41.indexOf("?"));return _41.substring(_41.lastIndexOf("/")+1,_41.length);},getFileNameFromAtEndOfPath:function(_42){if(_42==null||_42.lastIndexOf("\\")<0){return "";}return _42.substring(_42.lastIndexOf("\\")+1,_42.length);},_intSorter:function(a,b){return a-b;},sortIntegerArray:function(arr){return arr.sort(this._intSorter);},validateUrl:function(url){var def=new _7();def.resolve(true);return def;}});});