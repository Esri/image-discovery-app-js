//>>built
define("esriviewer/portal/PortalSearcher",["dojo/_base/declare","dojo/topic","dojo/_base/lang","../base/ConfigurationEntryMixin"],function(_1,_2,_3,_4){return _1([_4],{_defaultMaxResults:50,_defaultSortField:"avgRating",constructor:function(){this.initListeners();},initListeners:function(){_2.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_WEBMAPS,_3.hitch(this,this.searchWebmaps));_2.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_GEOCODE_SERVICES,_3.hitch(this,this.searchGeocodeServices));_2.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_IMAGE_SERVICES,_3.hitch(this,this.searchImageServices));_2.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_FEATURE_SERVICE_LAYERS,_3.hitch(this,this.searchFeatureServiceLayers));_2.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_FEATURE_SERVICES,_3.hitch(this,this.searchFeatureServices));_2.subscribe(VIEWER_GLOBALS.EVENTS.PORTAL.SEARCH_MAP_SERVICES,_3.hitch(this,this.searchMapServices));},searchGeocodeServices:function(_5,_6,_7,_8,_9,_a){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.GEOCODE_SERVICE,_5,_6,_7,_8,_9,_a);},searchFeatureServiceLayers:function(_b,_c,_d,_e,_f,_10){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.FEATURE_SERVICE_LAYER,_b,_c,_d,_e,_f,_10);},searchImageServices:function(_11,_12,_13,_14,_15,_16){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.IMAGE_SERVICE,_11,_12,_13,_14,_15,_16);},searchFeatureServices:function(_17,_18,_19,_1a,_1b,_1c){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.FEATURE_SERVICE,_17,_18,_19,_1a,_1b,_1c);},searchMapServices:function(_1d,_1e,_1f,_20,_21,_22){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.MAP_SERVICE,_1d,_1e,_1f,_20,_21,_22);},searchWebmaps:function(_23,_24,_25,_26,_27,_28){this._performSearch(VIEWER_GLOBALS.AGS_PORTAL_TYPES.WEB_MAP,_23,_24,_25,_26,_27,_28);},_performSearch:function(_29,_2a,_2b,_2c,_2d,_2e,_2f){if(_2e==null||!_3.isFunction(_2e)){return;}if(_2b==null){_2b=this._defaultMaxResults;}if(_2c==null||_2c==""){_2c=this._defaultSortField;}if(_2d==null){_2d=0;}var _30={};_30.q=_2a+this._getItemTypeAppend(_29);_30.sortField=_2c;_30.start=_2d;this._search(_30,_2e,_2f);},_getItemTypeAppend:function(_31){if(_31==null){return "";}return " AND (type: \""+_31+"\") AND NOT (type: \""+VIEWER_GLOBALS.AGS_PORTAL_TYPES.MAPPING_APPLICATION+"\")";},_search:function(_32,_33,_34){var _35=null;_2.publish(VIEWER_GLOBALS.EVENTS.PORTAL.GET_INSTANCE,function(_36){_35=_36;});if(_35){var _37=_33;_35.queryItems(_32).then(function(_38){_37(_38);});}else{if(_34!=null&&_3.isFunction(_34)){_34("Portal is not configured");}}}});});